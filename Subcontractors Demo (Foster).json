{
    "Product": "Web Eoc",
    "ProjectType": "Board",
    "Version": "9.18.0.0",
    "Data": {
        "inputViews": [
            {
                "name": "Input - Expenses",
                "table": "Expenses",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/slim-select/2.12.1/slimselect.css\" integrity=\"sha512-VO63TgB5CDjc4B2UL1UyGpDeQSve7dd5SO9bHBoa5yXIMgHQ+hAXN9hIqvdf3SYK1l695SqizbqVeG2ICWUQpA==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n\n    <link rel=\"stylesheet\" boardresource=\"loader.css\"/>\n  </head>\n  <style>\n    .form-section {\n        border: 1px solid #000; \n        padding: 20px; \n        border-radius: 5px; \n        margin: 20px 0; \n        height: 100%;\n    }\n  </style>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" >\n    <applytheme/>\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"i5x4i\">\n        <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\"/>\n            </div>\n            <div>\n              <h4>Add/Edit Record</h4>\n              <h6>Board Record</h6>\n            </div>\n          </div>\n        </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n        <foreignkey type=\"viewlink\" table=\"Expense Reports\" />\n        <!-- Top Section -->\n        <section class=\"top-section\" id=\"ik9ez\">\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ioyg36\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"expense_date\" id=\"im3dvf\">Expense Date</label>\n              <input name=\"expense_date\" type=\"date\" fieldtype=\"date\" class=\"form-control dpickr\" label=\"Expense Date\" id=\"expense_date\" required=\"required\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iin0jd\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"subcontractor_name\" id=\"i9y9yv\">Subcontractor Name</label>\n              <select name=\"subcontractor_name\" class=\"form-control\" label=\"Subcontractor Name\" id=\"subcontractor_name\" required=\"required\">\n                  <option data-placeholder=\"true\"></option>\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i5q9wg\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"crew_id\" id=\"itqk46\">Crew ID</label>\n              <select name=\"crew_id\" class=\"form-control\" label=\"Crew ID\" id=\"crew_id\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ikyh7g\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"crew_lead\" id=\"i9slqf\">Crew Lead</label>\n              <input name=\"crew_lead\" type=\"text\" class=\"form-control\" label=\"Crew Lead\" id=\"crew_lead\" required=\"required\"/>\n            </div>\n          </div>\n          </section>\n          <!-- Expense 1 -->\n        <section class=\"form-section\" id=\"expense_1\">\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member\">Crew Member</label>\n                    <select name=\"crew_member\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_1\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" required=\"required\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_1\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_1\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_1\" address=\"city_state\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_1\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"amount\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount\" type=\"text\" class=\"form-control\"  label=\"Amount\" id=\"amount\" required=\"required\"/>\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_1\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments\" rows=\"3\" class=\"form-control\" id=\"comments\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 2 -->\n        <section class=\"form-section\" id=\"expense_2\">\n            <if test=\"/data//@expense_type_2 = '' or not(/data//@expense_type_2)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_2\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_2\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_2\">Crew Member</label>\n                    <select name=\"crew_member_2\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_2\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_2\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_2\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_2\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_2\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_2\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_2\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_2\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_2\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_2\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_2\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_2\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_2\" address=\"city_state_2\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_2\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_2\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_2\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_2\"/>\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_2\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_2\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_2\" rows=\"3\" class=\"form-control\" id=\"comments_2\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                    <label class=\"form-label\">Attachment</label>\n                    <div class=\"input-group\">\n                        <input name=\"attachment_2\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_2\"\n                        label=\"Attachment\" />\n                        <input name=\"attachment_name_2\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\"\n                            readonly=\"readonly\" label=\"Attachment Name\" />\n                    </div>\n                </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 3 -->\n        <section class=\"form-section\" id=\"expense_3\">\n             <if test=\"/data//@expense_type_3 = '' or not(/data//@expense_type_3)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_3\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_3\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_3\">Crew Member</label>\n                    <select name=\"crew_member_3\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_3\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_3\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_3\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_3\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_3\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_3\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_3\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_3\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_3\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_3\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_3\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_3\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_3\" address=\"city_state_3\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_3\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_3\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_3\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_3\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_3\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_3\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_3\" rows=\"3\" class=\"form-control\" id=\"comments_3\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                    <label class=\"form-label\">Attachment</label>\n                    <div class=\"input-group\">\n                        <input name=\"attachment_3\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_3\"\n                        label=\"Attachment\" />\n                        <input name=\"attachment_name_3\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\"\n                            readonly=\"readonly\" label=\"Attachment Name\" />\n                    </div>\n                </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 4 -->\n        <section class=\"form-section\" id=\"expense_4\">\n            <if test=\"/data//@expense_type_4 = '' or not(/data//@expense_type_4)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_4\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_4\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_4\">Crew Member</label>\n                    <select name=\"crew_member_4\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_4\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_4\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_4\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_4\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_4\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_4\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_4\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_4\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_4\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_4\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_4\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_4\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_4\" address=\"city_state_4\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_4\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_4\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_4\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_4\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_4\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_4\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_4\" rows=\"3\" class=\"form-control\" id=\"comments_4\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                    <label class=\"form-label\">Attachment</label>\n                    <div class=\"input-group\">\n                        <input name=\"attachment_4\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_4\"\n                        label=\"Attachment\" />\n                        <input name=\"attachment_name_4\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\"\n                            readonly=\"readonly\" label=\"Attachment Name\" />\n                    </div>\n                </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 5 -->\n        <section class=\"form-section\" id=\"expense_5\">\n             <if test=\"/data//@expense_type_5 = '' or not(/data//@expense_type_5)\">\n                 <attribute name=\"class\">\n                     form-section d-none\n                    </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_5\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_5\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_5\">Crew Member</label>\n                    <select name=\"crew_member_5\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_5\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_5\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_5\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_5\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_5\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_5\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_5\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_5\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_5\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_5\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_5\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_5\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_5\" address=\"city_state_5\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_5\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_5\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_5\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_5\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_5\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_5\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_5\" rows=\"3\" class=\"form-control\" id=\"comments_5\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_5\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_5\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_5\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 6 -->\n        <section class=\"form-section\" id=\"expense_6\">\n             <if test=\"/data//@expense_type_6 = '' or not(/data//@expense_type_6)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_6\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_6\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_6\">Crew Member</label>\n                    <select name=\"crew_member_6\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_6\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_6\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_6\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_6\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_6\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_6\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_6\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_6\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_6\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_6\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_6\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_6\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_6\" address=\"city_state_6\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_6\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_6\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_6\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_6\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_6\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_6\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_6\" rows=\"3\" class=\"form-control\" id=\"comments_6\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_6\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_6\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_6\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 7 -->\n        <section class=\"form-section\" id=\"expense_7\">\n             <if test=\"/data//@expense_type_7 = '' or not(/data//@expense_type_7)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_7\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_7\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_7\">Crew Member</label>\n                    <select name=\"crew_member_7\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_7\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_7\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_7\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_7\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_7\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_7\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_7\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_7\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_7\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_7\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_7\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_7\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_7\" address=\"city_state_7\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_7\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_7\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_7\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_7\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_7\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_7\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_7\" rows=\"3\" class=\"form-control\" id=\"comments_7\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_7\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_7\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_7\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 8 -->\n        <section class=\"form-section\" id=\"expense_8\">\n             <if test=\"/data//@expense_type_8 = '' or not(/data//@expense_type_8)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_8\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_8\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_8\">Crew Member</label>\n                    <select name=\"crew_member_8\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_8\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_8\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_8\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_8\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_8\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_8\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_8\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_8\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_8\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_8\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_8\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_8\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_8\" address=\"city_state_8\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_8\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_8\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_8\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_8\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_8\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_8\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_8\" rows=\"3\" class=\"form-control\" id=\"comments_8\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_8\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_8\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_8\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 9 -->\n        <section class=\"form-section\" id=\"expense_9\">\n             <if test=\"/data//@expense_type_9 = '' or not(/data//@expense_type_9)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_9\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_9\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_9\">Crew Member</label>\n                    <select name=\"crew_member_9\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_9\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_9\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_9\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_9\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_9\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_9\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_9\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_9\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_9\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_9\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_9\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_9\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_9\" address=\"city_state_9\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_9\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_9\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_9\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_9\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_9\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_9\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_9\" rows=\"3\" class=\"form-control\" id=\"comments_9\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_9\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_9\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_9\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <!-- Expense 10 -->\n        <section class=\"form-section\" id=\"expense_10\">\n             <if test=\"/data//@expense_type_10 = '' or not(/data//@expense_type_10)\">\n                <attribute name=\"class\">\n                    form-section d-none\n                </attribute>\n            </if>\n            <div class=\"col-md-12 text-right\">\n                <button type=\"button\" class=\"btn btn-danger btn-sm remove-expense\" data-section=\"expense_10\">\n                    X\n                </button>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl_10\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member_10\">Crew Member</label>\n                    <select name=\"crew_member_10\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member_10\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug_10\">\n                    <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n                        for=\"expense_type_10\" id=\"ikm707\">Expense Type</label>\n                    <select name=\"expense_type_10\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type_10\"\n                        list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" />\n                </div>\n                <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j_10\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                        for=\"store_restaurant_hotel_10\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n                    <input name=\"store_restaurant_hotel_10\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\"\n                        id=\"store_restaurant_hotel_10\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94_10\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state_10\"\n                        id=\"iv477s\">City, State</label>\n                    <div class=\"input-group\">\n                        <input name=\"city_state_10\" type=\"text\" class=\"form-control\" />\n                        <div class=\"input-group-append\">\n                            <feature name=\"location_10\" address=\"city_state_10\" autopopulate=\"address\" type=\"button\"\n                                class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                                <div class=\"d-flex align-items-center justify-content-center\">\n                                    Map\n                                    <i class=\"material-icons ml-1\">room</i>\n                                </div>\n                            </feature>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm_10\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"amount_10\"\n                        id=\"ivgsto\">Amount</label>\n                    <input name=\"amount_10\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount_10\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo_10\">\n                    <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments_10\"\n                        id=\"iw7fb3\">Comments</label>\n                    <textarea name=\"comments_10\" rows=\"3\" class=\"form-control\" id=\"comments_10\" label=\"Comments\" />\n                </div>\n            </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                    <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                        <label class=\"form-label\">Attachment</label>\n                        <div class=\"input-group\">\n                            <input name=\"attachment_10\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name_10\"\n                                label=\"Attachment\" />\n                            <input name=\"attachment_name_10\" type=\"text\" class=\"form-control inputFileVisible\"\n                                placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment Name\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <div id=\"loader\" class=\"loader-overlay d-none\">\n            <div class=\"loader-spinner\"></div>\n            <p class=\"text-center text-primary\">Loading...</p>\n        </div>\n        <button type=\"button\" id=\"add-expense-section\" class=\"btn btn-outline-primary btn-sm    \">\n            Add Expense\n        </button>\n        <!-- Footer -->\n        <section class=\"text-right\" aria-label=\"Footer\">\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n        </section>\n      </main>\n      <div class=\"input-delete-flag\">\n        <boardpermission name=\"Delete\">\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n        </boardpermission>\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n      </div>\n    <div class=\"d-none\">\n        <grouplist />\n        <div class=\"form-group col-12\">\n            <div class=\"form-group col-12\">\n                <label class=\"form-label\">Entity Group</label>\n                <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\n                <if test=\"not(//*[@entity_group])\">\n                    <attribute name=\"value\">\n                        <for-each select=\"/data/groups\">\n                            <choose>\n                                <when test=\"starts-with(@name,'Entity -')\">\n                                    <value-of select=\"@name\" />\n                                </when>\n                            </choose>\n                        </for-each>\n                    </attribute>\n                </if>\n                </input>\n            </div>\n        </div>\n        <span id=\"fkCrews\">\n            <foreignkeyreference table=\"Crews\" />\n        </span>\n        <span id=\"fkExpenseReports\">\n            <foreignkeyreference table=\"Expense Reports\" />\n        </span>\n        <span id=\"boardName\">\n            <boardname />\n        </span>\n        <input name=\"crewId\" id=\"crewId\" value=\"\" />\n        <span id=\"boardName\"><boardname/></span>\n        <div id=\"view-data-data\">\n            <for-each select=\"/data/@*\">\n                <attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute>\n            </for-each>\n        </div>\n            <span id=\"permissioned_subcontractor_details\">\n                <choose>\n                    <when test=\"/data/assignedboardpermissiontags/boardpermissiontag[@name='Bird Administrator']\">List - Subcontractors - All</when>\n                    <otherwise>List - Subcontractors</otherwise>\n                </choose>\n            </span>\n            <boardpermission name=\"Bird Administrator\" />\n            <grouplist />\n    </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/slim-select/2.12.1/slimselect.min.js\" integrity=\"sha512-sByHIkabhPJsGxRISbnt0bpNZw3NSAnshLhlu2AceSC+sDOyDT4NgtnDOznHulIjR07ua1SudQC25iLvFzkWTw==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\n    <script boardresource=\"moneyInputNormalizer.js\" type=\"text/javascript\"></script>\n    <script boardresource=\"subEntityArray.js\" type=\"text/javascript\"></script>\n\n    <script type=\"text/javascript\">\n        (async function () {\n            const currentBoardName = document.querySelector('#boardName').textContent;\n            const fkCrewTable = document.querySelector('#fkCrews').textContent;\n            const fkExpenseReportTable = document.querySelector('#fkExpenseReports').textContent;\n            const permissionedSubcontractorDetails = document.querySelector('#permissioned_subcontractor_details').textContent;\n\n            const subcontractorCrewApi = new WebEOCCXD.WebEOCAPI({\n                boardName: currentBoardName,\n                displayViewName: permissionedSubcontractorDetails,\n            });\n                        \n            const listCrewApi = new WebEOCCXD.WebEOCAPI({\n                boardName: currentBoardName,\n                displayViewName: 'List - Crews - All',\n            });\n            const listTeamMemberApi = new WebEOCCXD.WebEOCAPI({\n                boardName: currentBoardName,\n                displayViewName: 'List - Team Members - All',\n            });\n            const expenseEntryInputApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Expenses' });\n            const expenseReportInputApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Expense Report' });\n            const listExpenseReportApi = new WebEOCCXD.WebEOCAPI({\n                boardName: currentBoardName,\n                displayViewName: 'List - Expense Report',\n            });\n            const api = new WebEOCCXD.WebEOCAPI({\n                boardName: currentBoardName, \n                displayViewName: 'Details - Expense Report',\n            });\n\n            let selectedCrewDataId;\n            let subbieInput = document.getElementById(\"subcontractor_name\");\n            let crewInput = document.getElementById(\"crew_id\");\n            let crewId = document.getElementById('crewId').value;\n            let crewLeadInput = document.getElementById(\"crew_lead\");\n            let selectedSubcontractorName;\n            const maxSections = 10;\n            const addExpenseBtn = document.getElementById(\"add-expense-section\");\n            const entityGroup = document.getElementById(\"entity_group\");\n            const { view } = WebEOCCXD.ViewBase;\n            const { data } = view.data;\n            const dataId = data.dataid;\n            const relatedDataId = data.relateddataid;\n\n            const { data: subcontractorsData } = await subcontractorCrewApi.getRecords();\n           \n            subcontractorsData.forEach(sub => {\n                let option = document.createElement(\"option\");\n                option.value = sub.subcontractor_name;\n                option.textContent = sub.subcontractor_name;\n                subbieInput.appendChild(option);\n            })\n            \n            new SlimSelect({\n                select: '#subcontractor_name',\n                events: {\n                    afterChange: async (newValue) => {\n                        const crewsUnderThisSubbie = await getCrewsBySubcontractor(newValue[0].value)\n                        populateCrewDropdown(crewsUnderThisSubbie);\n                    }\n                },\n            });     \n\n            subbieInput.addEventListener(\"change\", function(e){\n                var value = subbieInput.options[subbieInput.selectedIndex].text;\n                var entityObj = subEntityArray.filter((x) => x[value]);\n                var entityVal = Object.values(entityObj[0]);\n                entityGroup.setAttribute(\"value\", entityVal[0]);\n\n                crewInput.innerHTML = \"\";\n                document.getElementById(\"crew_member\").innerHTML = \"\";\n                document.getElementById(\"crew_lead\").value = \"\";\n            })\n\n            if(document.querySelector(\"[name=dataid]\").value == \"\") {\n                subbieInput.insertAdjacentHTML('afterbegin', '<option value=\"\" selected=\"true\">Select a Subcontractor</option>');\n                crewInput.innerHTML = '<option value=\"\">Select a Subcontractor first</option>'\n                document.getElementById(\"crew_member\").innerHTML = '<option value=\"\" selected=\"true\">Select a Crew first</option>';\n            }\n\n            document.addEventListener(\"DOMContentLoaded\", async function () {\n                if (dataId != '0') {\n                    let expenseReportData = await getExpenseReportData(dataId);\n                    const {crew_id, expense_date, subcontractor_name, crew_lead} = expenseReportData[0];\n\n                    let crewsUnderThisSubbie = await getCrewsBySubcontractor(subcontractor_name);\n                    populateCrewDropdown(crewsUnderThisSubbie);\n\n                    const fkCrewTableName = Object.keys(expenseReportData[0]).find(key => key.startsWith('fk_table_'));\n                    const fkCrewTable = expenseReportData[0][fkCrewTableName];\n                    subbieInput.value = subcontractor_name;\n                    crewInput.value = fkCrewTable;\n                    crewLeadInput.value = crew_lead;\n                    document.querySelector(\"[name=expense_date]\").value = expense_date;\n                }\n\n                if(crewInput.value) {\n                    crewId.value = crewInput.options[crewInput.selectedIndex].text;\n                } \n                \n                selectedSubcontractorName = subbieInput.value;\n                    \n            });\n\n            function getVisibleSectionsCount() {\n                return document.querySelectorAll(\".form-section:not(.d-none)\").length;\n            }\n\n            function updateAddButtonVisibility() {\n                const visible = getVisibleSectionsCount();\n                if (visible &gt;= maxSections) {\n                    addExpenseBtn.classList.add(\"d-none\");\n                } else {\n                    addExpenseBtn.classList.remove(\"d-none\");\n                }\n            }\n\n            addExpenseBtn.addEventListener(\"click\", function () {\n                for (let i = 1; i &lt;= maxSections; i++) {\n                    const section = document.getElementById(`expense_${i}`);\n                    if (section &amp;&amp; section.classList.contains(\"d-none\")) {\n                        section.classList.remove(\"d-none\");\n\n                        const amountInput = section.querySelector(`[name=\"amount_${currentVisible}\"]`);\n                        const amountLabel = section.querySelector(`label[for=\"amount_${currentVisible}\"]`);\n                        const expenseTypeInput = section.querySelector(`[name=\"expense_type_${currentVisible}\"]`);\n                        const expenseTypeLabel = section.querySelector(`label[for=\"expense_type_${currentVisible}\"]`);\n\n                        if (amountInput) {\n                            amountLabel.classList.add(\"required\");\n                            amountInput.setAttribute(\"required\", \"required\");\n                        }\n\n                        if (expenseTypeInput) {\n                            expenseTypeLabel.classList.add(\"required\");\n                            expenseTypeInput.setAttribute(\"required\", \"required\");\n                        }\n\n                        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\n                        break;\n                    }\n                }\n\n                updateAddButtonVisibility();\n            });\n\n            document.addEventListener(\"click\", function (e) {\n                if (e.target.classList.contains(\"remove-expense\")) {\n                    const sectionId = e.target.getAttribute(\"data-section\");\n                    const section = document.getElementById(sectionId);\n                    if (section &amp;&amp; !section.classList.contains(\"d-none\")) {\n                        section.classList.add(\"d-none\");\n\n                        section.querySelectorAll(\"input, textarea, select\").forEach(el => {\n                            if (el.type === \"file\") {\n                                el.value = null;\n                            } else if (el.tagName.toLowerCase() === \"select\") {\n                                el.selectedIndex = 0;\n                            } else {\n                                el.value = \"\";\n                            }\n                        });\n\n                        updateAddButtonVisibility();\n                    }\n                }\n            });\n\n            crewInput.addEventListener(\"change\", async function () {\n                selectedCrewDataId = crewInput.value;\n                crewId = crewInput.options[crewInput.selectedIndex].text;\n\n                const personnel = await getAllPersonnelByCrewId(crewId);\n                const foreman = personnel.find(personnel => personnel.crew_lead === \"Yes\");\n                document.querySelector(\"[name=crew_lead]\").value = `${foreman.first_name} ${foreman.last_name}`;\n                \n                for (let i = 1; i &lt;= 10; i++) {\n                    const suffix = i === 1 ? \"\" : `_${i}`;\n                    const crewMemberSelect = document.getElementById(`crew_member${suffix}`);\n                    if (!crewMemberSelect) continue;\n                    crewMemberSelect.innerHTML = \"\"; \n\n                    // Add \"Entire Crew\" option\n                    const entireCrewOption = document.createElement(\"option\");\n                    entireCrewOption.value = \"Entire Crew\";\n                    entireCrewOption.textContent = \"Entire Crew\";\n                    entireCrewOption.selected = true;\n                    crewMemberSelect.appendChild(entireCrewOption);\n\n                    // Add each crew member as an option\n                    personnel.forEach(member => {\n                        const option = document.createElement(\"option\");\n                        option.value = `${member.first_name} ${member.last_name}`;\n                        option.textContent = `${member.first_name} ${member.last_name}`;\n                        crewMemberSelect.appendChild(option);\n                    });\n                }\n\n                if(crewInput.value) {\n                    document.getElementById(\"crewId\").value = crewInput.options[crewInput.selectedIndex].text;\n                }    \n            });\n\n            function populateCrewDropdown(crews) {\n                crewInput.innerHTML = \"\";\n                let placeholderOption = document.createElement(\"option\");\n                placeholderOption.value = \"\";\n                placeholderOption.textContent = \"Select a Crew\";\n                placeholderOption.selected = true;\n                placeholderOption.disabled = true;\n                crewInput.appendChild(placeholderOption);\n\n                crews.forEach(crew => {\n                    let option = document.createElement(\"option\");\n                    option.value = crew.dataid;\n                    option.textContent = crew.crew_id;\n                    option.selected = crew.selected;\n                    crewInput.appendChild(option);\n                });\n            }\n\n            async function getSubcontractors() {\n                try {\n                    const { data, error, response } = await subcontractorCrewApi.getRecords();\n                    return data;\n                } catch (error) {\n                    console.error(`Error fetching subcontractor:`, error);\n                    return [];\n                }\n            }\n\n            async function getCrewsBySubcontractor(subcontractorName) {\n                try {\n                    const { data, error, response } = await listCrewApi.getRecords();\n                    let crewsUnderThisSubbie = data.filter(crew => crew.subcontractor_name === subcontractorName);\n                    return crewsUnderThisSubbie;\n                } catch (error) {\n                    console.error(`Error fetching crews:`, error);\n                    return [];\n                }\n            } \n\n            async function getExpenseReportData(expenseReportDataId) {\n                try {\n                    const { data, error, response } = await listExpenseReportApi.getRecords(parseInt(expenseReportDataId));\n                    return response.ok ? data : null;\n                } catch (error) {\n                    console.error(`Error fetching crews:`, error);\n                    return null;\n                }\n            }\n\n            async function getAllPersonnelByCrewId(crewId) {\n                try {\n                    const { data, error, response } = await listTeamMemberApi.getRecords();\n                    const personnel = data.filter(personnel => personnel.crew_id == crewId);\n                    return response.ok ? personnel : null;\n                } catch (error) {\n                    console.error(`Error fetching crews:`, error);\n                    return null;\n                }\n            }\n\n            function buildExpenseEntryList(expenseReportDataId) {\n                let allExpenses = [];\n                for (let i = 1; i &lt;= 10; i++) {\n                    const expense = document.getElementById(`expense_${i}`);\n\n                    if (expense !== null) {\n                        const tempExpense = {\n                            [fkExpenseReportTable]: expenseReportDataId,\n                            crew_member: expense.querySelector('[name^=\"crew_member\"]')?.value,\n                            expense_type: expense.querySelector('[name^=\"expense_type\"]')?.value,\n                            store_restaurant_hotel: expense.querySelector('[name^=\"store_restaurant_hotel\"]')?.value,\n                            city_state: expense.querySelector('[name^=\"city_state\"]')?.value,\n                            amount: expense.querySelector('[name^=\"amount\"]')?.value,\n                            comments: expense.querySelector('[name^=\"comments\"]')?.value,\n                            attachment: expense.querySelector('[name^=\"attachment\"]')?.files[0],\n                            attachment_name: expense.querySelector('[name^=\"attachment_name\"]')?.value\n                        };\n                        if(expense.querySelector('[name^=\"expense_type\"]')?.value !== \"\") {\n                            allExpenses.push(tempExpense);\n                        }\n                    }\n                }\n                return allExpenses;\n            }\n\n            view.onValidSave(function (event) {\n                document.querySelector(\"#loader\").classList.remove(\"d-none\");\n\n                return new Promise(async function (resolve, reject) {\n                    try {\n                        // 1. Create Expense Report\n                        const { data: expenseReportDataId, error, response } = await expenseReportInputApi.addRecord({\n                            expense_date: document.querySelector('[name^=\"expense_date\"]')?.value,\n                            subcontractor_name: document.querySelector('[name^=\"subcontractor_name\"]')?.value,\n                            crew_id: crewId,\n                            crewId: crewId,\n                            entity_group: document.querySelector('[name^=\"entity_group\"]')?.value,\n                            crew_lead: document.querySelector('[name^=\"crew_lead\"]')?.value,\n                            [fkCrewTable]: parseInt(selectedCrewDataId),\n                        });\n\n                        if (!response.ok || !expenseReportDataId) {\n                            return reject(error || 'Failed to create expense report');\n                        }\n\n                        document.querySelector('[name=dataid]').value = expenseReportDataId; // to prevent creating two expense reports\n\n                        // 2. Create Expense Entries\n                        const allExpenses = buildExpenseEntryList(expenseReportDataId);\n\n                        for (const record of allExpenses) {\n                            const { attachment, ...rest } = record;\n                            try {\n                                const { data: entryData, error: entryError, response: entryResponse } = await expenseEntryInputApi.addRecord(rest);\n                                if (!entryResponse.ok || !entryData) {\n                                    console.warn('Failed to create expense entry:', entryError);\n                                    continue;\n                                }\n\n                                // 3. Add Attachments\n                                if (attachment) {\n                                    if (attachment.size === 0) {\n                                        alert('The file is empty. Please select a file with content.');\n                                        return;\n                                    }\n\n                                    try {\n                                        const { data: attachmentData, error: attachmentError, response: attachmentResponse } =\n                                            await expenseEntryInputApi.addAttachment({\n                                                dataid: entryData,\n                                                file: new File([attachment], encodeURIComponent(attachment.name || \"\")),\n                                                attachmentFieldName: 'attachment',\n                                            });\n\n                                        if (!attachmentResponse.ok || !attachmentData) {\n                                            console.warn('Failed to save attachment:', attachmentError);\n                                        } \n                                    } catch (attachmentErr) {\n                                        console.error('Error saving the attachment:', attachmentErr);\n                                    }\n                                }\n                            } catch (entryErr) {\n                                console.error('Error creating expense entry:', entryErr);\n                            }\n                        }\n\n                        resolve();\n                    } catch (error) {\n                        console.error('Error during expense report process:', error);\n                        reject(error);\n                    }\n                });\n\n                document.querySelector(\"#loader\").classList.add(\"d-none\");\n                \n            })\n\n        })();\n    </script>\n  </body>\n</html>\n",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Expense Report",
                "table": "Expense Reports",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"/>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <applytheme/>\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"ie33x\">\n        <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\"/>\n            </div>\n            <div>\n              <h4>Add/Edit Record</h4>\n              <h6>Board Record</h6>\n            </div>\n          </div>\n        </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n        <span id=\"parentId\" style=\"display: none;\">\n          <foreignkey type=\"select\" table=\"Crews\">\n            <eocfield name=\"dataid\" type=\"rl\" table=\"Crews\"/>\n          </foreignkey>\n        </span>    \n        <section class=\"form-section\" id=\"ioa2y\">\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ij759z\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"subcontractor_name\" id=\"iqhm1g\">Subcontractor Name</label>\n              <select name=\"subcontractor_name\" class=\"form-control\" label=\"Subcontractor Name\" id=\"subcontractor_name\" list=\"Subcontractors List\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iwiqzi\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_id\" id=\"i5m8ma\">Crew ID</label>\n              <select name=\"crew_id\" class=\"form-control\" label=\"Crew ID\" id=\"crew_id\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iwksm9\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_lead\" id=\"inp1mn\">Crew Lead</label>\n              <input name=\"crew_lead\" type=\"text\" class=\"form-control\" label=\"Crew Lead\" id=\"crew_lead\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i2nj9f\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"expense_date\" id=\"iksxm1\">Expense Date</label>\n              <input name=\"expense_date\" type=\"date\" fieldtype=\"date\" class=\"form-control dpickr\" label=\"Expense Date\" id=\"expense_date\"/>\n            </div>\n          </div>\n        </section>\n        <section class=\"text-right\" aria-label=\"Footer\">\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n          <savebutton class=\"btn btn-sm btn-primary\" disabled=\"disabled\">Save</savebutton>\n        </section>\n        <div style=\"display: none;\">\n          <input name=\"crewId\" id=\"crewId\" />\n          <input name=\"entity_group\" id=\"entity_group\" />\n          <viewlink name=\"Details - Subcontractor\" />\n          <viewlink name=\"Details - Crew\" />\n          <div id=\"foreignkeyReferences\">\n            <span id=\"subcontractorsFk\">\n              <foreignkeyreference table=\"Subcontractors\" />\n            </span>\n            <span id=\"crewsFk\">\n              <foreignkeyreference table=\"Crews\" />\n            </span>\n          </div>\n          <span id=\"crew_id_xml\">\n            <value-of select=\"//@crew_id\" />\n          </span>\n        </div>\n      </main>\n      <div class=\"input-delete-flag\">\n        <boardpermission name=\"Delete\">\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n        </boardpermission>\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n      </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n\n    <script>\n      document.addEventListener('DOMContentLoaded', async () => {\n        // Utility to fetch records from WebEOC API\n        async function fetchRecords(viewName) {\n          const api = new WebEOCCXD.WebEOCAPI({ displayViewName: viewName });\n          const { data } = await api.getRecords();\n          return data;\n        }\n\n        // Get foreign key references from hidden spans\n        function getForeignKeyRefs() {\n          return {\n            subcontractors: document.getElementById('subcontractorsFk').textContent.trim(),\n            crews: document.getElementById('crewsFk').textContent.trim(),\n          };\n        }\n\n        // Populate crew select dropdown\n        function populateCrewSelect(crewSelect, crews, selectedCrewId) {\n          crewSelect.innerHTML = '';\n          crews.forEach(crew => {\n            const option = document.createElement('option');\n            option.value = crew.crew_id;\n            option.textContent = crew.crew_id;\n            crewSelect.appendChild(option);\n          });\n          crewSelect.value = selectedCrewId || '';\n        }\n\n        // Main logic\n        try {\n          const foreignKeys = getForeignKeyRefs();\n          const [subcontractors, crews] = await Promise.all([\n            fetchRecords('Details - Subcontractor'),\n            fetchRecords('Details - Crew')\n          ]);\n\n          // Enable save button after data is loaded\n          const saveBtn = document.querySelector('savebutton, [name=\"cmdSave\"]');\n          if (saveBtn) saveBtn.disabled = false;\n\n          // Get parent crew ID from form\n          const parentId = document.querySelector(`[name=\"${foreignKeys.crews}\"]`)?.value;\n          const parentCrew = crews.find(crew => crew.dataid === parentId);\n          const parentSubcontractor = parentCrew\n            ? subcontractors.find(sub => sub.dataid === parentCrew[foreignKeys.subcontractors])\n            : null;\n\n          // Filter sibling crews by subcontractor\n          const siblingCrews = parentSubcontractor\n            ? crews.filter(crew => crew[foreignKeys.subcontractors] === parentSubcontractor.dataid)\n            : [];\n\n          // Get crew ID from XML span\n          const crewIdXml = document.getElementById('crew_id_xml').textContent.trim();\n\n          // Populate crew select\n          const crewSelect = document.getElementById('crew_id');\n          if (crewSelect) {\n            populateCrewSelect(\n              crewSelect,\n              siblingCrews,\n              crewIdXml || (parentCrew &amp;&amp; parentCrew.crew_id)\n            );\n          }\n        } catch (err) {\n          console.error('Error initializing crew select:', err);\n        }\n      });\n    </script>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "UTIL - POST Timesheet Entry",
                "table": "Timesheet Entries",
                "html": "<html>\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    </head>\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n        <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n            <insertfields id=\"ilvyy\">\n                <field name=\"_webeoc_delete_flag\">'no'</field>\n            </insertfields>\n            <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n                <header class=\"container-fluid\" aria-label=\"Header\">\n                    <div class=\"flex\">\n                        <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                            <agencyinfo type=\"primarylogo\"/>\n                        </div>\n                        <div>\n                            <h4>Add/Edit Record</h4>\n                            <h6>Board Record</h6>\n                        </div>\n                    </div>\n                </header>\n            </nav>\n            <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n                <section class=\"form-section\" id=\"impo7\">\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-12\" id=\"i7qfl2\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">Type</label>\n                            <div class=\"form-check form-check-radio\">\n                                <label class=\"form-check-label\"><input type=\"radio\" name=\"type\" value=\"Personnel\" label=\"Type\" class=\"form-check-input\"/>Personnel<span class=\"circle\"><span class=\"check\"/></span></label>\n                            </div>\n                            <div class=\"form-check form-check-radio\">\n                                <label class=\"form-check-label\"><input type=\"radio\" name=\"type\" value=\"Equipment\" label=\"Type\" class=\"form-check-input\"/>Equipment<span class=\"circle\"><span class=\"check\"/></span></label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"iap61\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"personnel_id\" id=\"is46jd\">Personnel ID</label>\n                            <input name=\"personnel_id\" type=\"text\" class=\"form-control\" label=\"Personnel ID\" id=\"personnel_id\" required=\"required\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"ignmyl\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"first_name\" id=\"iyjufq\">First Name</label>\n                            <input name=\"first_name\" type=\"text\" class=\"form-control\" label=\"First Name\" id=\"first_name\" required=\"required\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"ixr1dl\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"last_name\" id=\"ivvaqh\">Last Name</label>\n                            <input name=\"last_name\" type=\"text\" class=\"form-control\" label=\"Last Name\" id=\"last_name\" required=\"required\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-6\" id=\"ink8y4\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"classification\" id=\"ijqnml\">Classification</label>\n                            <select name=\"classification\" class=\"form-control\" label=\"Classification\" id=\"classification\" list=\"Subcontractors - Classification\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-6\" id=\"i7smpi\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"status\" id=\"iwxr3k\">Status</label>\n                            <select name=\"status\" class=\"form-control\" label=\"Status\" list=\"Subcontractors - Personnel Status\" id=\"status\" required=\"required\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-6\" id=\"ipww5z\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"number_of_meals_provided\" id=\"ib7z9t\">Number of Meals Provided</label>\n                            <input name=\"number_of_meals_provided\" type=\"number\" class=\"form-control\" fieldtype=\"int\" label=\"Number of Meals Provided\" id=\"number_of_meals_provided\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-6\" id=\"i0ulog\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"number_of_per_diem_meals\" id=\"ie2ykz\">Number of Per Diem Meals</label>\n                            <input name=\"number_of_per_diem_meals\" type=\"number\" class=\"form-control\" fieldtype=\"int\" label=\"Number of Per Diem Meals\" id=\"number_of_per_diem_meals\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"il6ou\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"date\" id=\"izwlj\">Date</label>\n                            <input name=\"date\" type=\"date\" class=\"form-control dpickr\" fieldtype=\"datetime\" label=\"Date\" id=\"date\" required=\"required\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"idym3\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"start_time\" id=\"ijwvb\">Start Time</label>\n                            <input name=\"start_time\" type=\"text\" class=\"form-control\" label=\"Start Time\" id=\"start_time\" required=\"required\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"izhs2\">\n                            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"end_time\" id=\"i5kp1\">End Time</label>\n                            <input name=\"end_time\" type=\"text\" class=\"form-control\" label=\"End Time\" id=\"end_time\" required=\"required\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"irqmps\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_number\" id=\"iemmni\">Equipment Number</label>\n                            <input name=\"equipment_number\" type=\"text\" class=\"form-control\" label=\"Equipment Number\" id=\"equipment_number\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"ib23xx\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_fuel_type\" id=\"izrjhl\">Equipment Fuel Type</label>\n                            <input name=\"equipment_fuel_type\" type=\"text\" class=\"form-control\" label=\"Equipment Fuel Type\" id=\"equipment_fuel_type\"/>\n                        </div>\n                        <div class=\"form-group bmd-form-group col-md-4\" id=\"isay7v\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_type\" id=\"ihits1\">Equipment Type</label>\n                            <input name=\"equipment_type\" type=\"text\" class=\"form-control\" label=\"Equipment Type\" id=\"equipment_type\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-12\" id=\"iu1gc9\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_description\" id=\"iqj66f\">Equipment Description</label>\n                            <textarea name=\"equipment_description\" rows=\"4\" class=\"form-control\" id=\"equipment_description\" label=\"Equipment Description\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-row\">\n                        <div class=\"form-group bmd-form-group col-md-12\" id=\"inv3b7\">\n                            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\" id=\"ibk9h6\">Comments</label>\n                            <textarea name=\"comments\" rows=\"4\" class=\"form-control\" id=\"comments\" label=\"Comments\"/>\n                        </div>\n                    </div>\n                </section>\n                <section class=\"text-right\" aria-label=\"Footer\">\n                    <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n                    <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n                </section>\n            </main>\n            <div class=\"input-delete-flag\">\n                <boardpermission name=\"Delete\">\n                    <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n                </boardpermission>\n                <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n            </div>\n        </form>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Timesheet Entry",
                "table": "Timesheet Entries",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n    <insertfields id=\"ilvyy\">\n      <field name=\"_webeoc_delete_flag\">'no'</field>\n    </insertfields>\n    <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n      <header class=\"container-fluid\" aria-label=\"Header\">\n        <div class=\"flex\">\n          <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n            <agencyinfo type=\"primarylogo\" />\n          </div>\n          <div>\n            <h4>Add/Edit Record</h4>\n            <h6>Board Record</h6>\n          </div>\n        </div>\n      </header>\n    </nav>\n    <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n      <section class=\"form-section\" id=\"impo7\">\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"i7qfl2\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">Type</label>\n            <div class=\"form-check form-check-radio\">\n              <label class=\"form-check-label\"><input type=\"radio\" name=\"type\" value=\"Personnel\" label=\"Type\"\n                  class=\"form-check-input\" />Personnel<span class=\"circle\"><span class=\"check\" /></span></label>\n            </div>\n            <div class=\"form-check form-check-radio\">\n              <label class=\"form-check-label\"><input type=\"radio\" name=\"type\" value=\"Equipment\" label=\"Type\"\n                  class=\"form-check-input\" />Equipment<span class=\"circle\"><span class=\"check\" /></span></label>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"iap61\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"personnel_id\"\n              id=\"is46jd\">Personnel ID</label>\n            <input name=\"personnel_id\" type=\"text\" class=\"form-control\" label=\"Personnel ID\" id=\"personnel_id\"\n              required=\"required\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"iap61\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"crew_lead\"\n              id=\"is46jd\">Crew Lead / Foreman</label>\n            <input name=\"crew_lead\" type=\"text\" class=\"form-control\" label=\"Crew Lead / Foreman\" id=\"crew_lead\"\n              required=\"required\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ignmyl\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"first_name\"\n              id=\"iyjufq\">First Name</label>\n            <input name=\"first_name\" type=\"text\" class=\"form-control\" label=\"First Name\" id=\"first_name\"\n              required=\"required\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ixr1dl\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"last_name\"\n              id=\"ivvaqh\">Last Name</label>\n            <input name=\"last_name\" type=\"text\" class=\"form-control\" label=\"Last Name\" id=\"last_name\"\n              required=\"required\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-6\" id=\"ink8y4\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"classification\"\n              id=\"ijqnml\">Classification</label>\n            <select name=\"classification\" class=\"form-control\" label=\"Classification\" id=\"classification\"\n              list=\"Subcontractors - Classification\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-6\" id=\"i7smpi\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"status\"\n              id=\"iwxr3k\">Status</label>\n            <select name=\"status\" class=\"form-control\" label=\"Status\" list=\"Subcontractors - Personnel Status\"\n              id=\"status\" required=\"required\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-4\">\n            <label class=\"form-label\">Lodging Provided</label>\n            <div>\n                <div class=\"form-check form-check-radio form-check-inline\">\n                    <label class=\"form-check-label\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" value=\"yes\" label=\"Lodging Provided\" /> Yes\n                        <span class=\"circle\"><span class=\"check\" /></span></label>\n                </div>\n                <div class=\"form-check form-check-radio form-check-inline\">\n                    <label class=\"form-check-label\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" label=\"Lodging Provided\" value=\"no\" /> No\n                        <span class=\"circle\"><span class=\"check\" /></span></label>\n                </div>\n            </div>\n        </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ipww5z\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n              for=\"number_of_meals_provided\" id=\"ib7z9t\">Number of Meals Provided</label>\n            <input name=\"number_of_meals_provided\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n              label=\"Number of Meals Provided\" id=\"number_of_meals_provided\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"i0ulog\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n              for=\"number_of_per_diem_meals\" id=\"ie2ykz\">Number of Per Diem Meals</label>\n            <input name=\"number_of_per_diem_meals\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n              label=\"Number of Per Diem Meals\" id=\"number_of_per_diem_meals\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ipzljw\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n              for=\"date\" id=\"iizac7\">Date</label>\n              <input name=\"date\" type=\"date\" class=\"form-control dpickr\" fieldtype=\"date\" label=\"Date\"\n              required=\"required\" id=\"date\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"iyg9so\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n              for=\"start_time\" id=\"ir7hw5\">Start Time</label>\n              <input name=\"start_time\" type=\"time\" class=\"form-control\"  label=\"Start Time\"\n                            id=\"start_time\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ipaco9\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"end_time\"\n              id=\"ii4i5r\">End Time</label>\n              <input name=\"end_time\" type=\"time\" class=\"form-control\"  label=\"End Time\"\n                            id=\"end_time\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-1\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"total_hours\" id=\"ii4i5r\">Total\n              Hours</label>\n            <div class=\"d-flex\">\n              <input name=\"total_hours\" type=\"text\" class=\"form-control\" label=\"Total Hours\" readonly=\"readonly\"\n                id=\"total_hours\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row\" id=\"hoursType\">\n          <div class=\"form-group bmd-form-group col-md-2\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"standard_hours\">Standard\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"standard_hours\" type=\"text\" class=\"form-control\" label=\"Standard Time\" id=\"standard_hours\" />\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-2\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"double_hours\">Over\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"double_hours\" type=\"text\" class=\"form-control\" label=\"Over Time\" id=\"double_hours\" />\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-2\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"premium_hours\">Premium\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"premium_hours\" type=\"text\" class=\"form-control\" label=\"Premium Time\" id=\"premium_hours\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"irqmps\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_number\"\n              id=\"iemmni\">Equipment Number</label>\n            <input name=\"equipment_number\" type=\"text\" class=\"form-control\" label=\"Equipment Number\"\n              id=\"equipment_number\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ib23xx\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_fuel_type\"\n              id=\"izrjhl\">Equipment Fuel Type</label>\n            <input name=\"equipment_fuel_type\" type=\"text\" class=\"form-control\" label=\"Equipment Fuel Type\"\n              id=\"equipment_fuel_type\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"isay7v\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_type\"\n              id=\"ihits1\">Equipment Type</label>\n            <input name=\"equipment_type\" type=\"text\" class=\"form-control\" label=\"Equipment Type\" id=\"equipment_type\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"iu1gc9\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_description\"\n              id=\"iqj66f\">Equipment Description</label>\n            <textarea name=\"equipment_description\" rows=\"4\" class=\"form-control\" id=\"equipment_description\"\n              label=\"Equipment Description\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"inv3b7\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\"\n              id=\"ibk9h6\">Comments</label>\n            <textarea name=\"comments\" rows=\"4\" class=\"form-control\" id=\"comments\" label=\"Comments\" />\n          </div>\n        </div>\n      </section>\n      <section class=\"text-right\" aria-label=\"Footer\">\n        <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n        <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n      </section>\n    </main>\n    <div class=\"input-delete-flag\">\n      <boardpermission name=\"Delete\">\n        <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n      </boardpermission>\n      <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n        format=\"html\" />\n    </div>\n    <div>\n      <foreignkey table=\"Timesheets\" />\n    </div>\n  </form>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n\n</body>\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Team Member",
                "table": "Team Members",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <div>\r\n      <form>\r\n        <updatefields>\r\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\r\n        </updatefields>\r\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\r\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\r\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" />\r\n                    <i class=\"material-icons\">close</i>\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this record?</div>\r\n                <div class=\"modal-footer\">\r\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\r\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\r\n        </main>\r\n      </form>\r\n      <div class=\"modal-backdrop show\" />\r\n    </div>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Expense Entry",
                "table": "Expenses",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <applytheme/>\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"i5x4i\">\n        <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\"/>\n            </div>\n            <div>\n              <h4>Add/Edit Record</h4>\n              <h6>Board Record</h6>\n            </div>\n          </div>\n        </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n        <foreignkey type=\"viewlink\" table=\"Expense Reports\"/>\n        <section class=\"form-section\" id=\"ik9ez\">\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"iin0kl\">\n                <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew_member\" id=\"i9y9yv\">Crew Member</label>\n                <select name=\"crew_member\" class=\"form-control\" label=\"Crew Member\" id=\"crew_member\">\n                    <option value=\"entire_crew\">Entire Crew</option>\n                </select>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"iqxxug\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"expense_type\" id=\"ikm707\">Expense Type</label>\n              <select name=\"expense_type\" class=\"form-control\" label=\"Expense Type\" id=\"expense_type\" list=\"Subcontractors - Expense Type\" defaulttext=\"(Select one)\" required=\"required\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"iuez0j\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"store_restaurant_hotel\" id=\"ia7daj\">Store/Restaurant/Hotel</label>\n              <input name=\"store_restaurant_hotel\" type=\"text\" class=\"form-control\" label=\"Store/Restaurant/Hotel\" id=\"store_restaurant_hotel\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iohw94\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"city_state\" id=\"iv477s\">City, State</label>\n              <div class=\"input-group\">\n                <input name=\"city_state\" type=\"text\" class=\"form-control\"/>\n                <div class=\"input-group-append\">\n                  <feature name=\"location\" address=\"city_state\" autopopulate=\"address\" type=\"button\" class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                    <div class=\"d-flex align-items-center justify-content-center\">\n                      Map\n                      <i class=\"material-icons ml-1\">room</i>\n                    </div>\n                  </feature>\n                </div>\n              </div>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"idw8nm\" numberFieldType=\"money\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"amount\" id=\"ivgsto\">Amount</label>\n              <input name=\"amount\" type=\"text\" class=\"form-control\" label=\"Amount\" id=\"amount\" required=\"required\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-12\" id=\"i4z7uo\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\" id=\"iw7fb3\">Comments</label>\n              <textarea name=\"comments\" rows=\"3\" class=\"form-control\" id=\"comments\" label=\"Comments\"/>\n            </div>\n          </div>\n            <div class=\"form-row\">\n                <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback \">\n                    <label class=\"form-label\">Attachment</label>\n                    <div class=\"input-group\">\n                        <input name=\"attachment\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_name\"\n                        label=\"Attachment\" />\n                        <input name=\"attachment_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\"\n                            readonly=\"readonly\" label=\"Attachment Name\" />\n                    </div>\n                </div>\n                </div>\n            </div>\n        </section>\n        <section class=\"text-right\" aria-label=\"Footer\">\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n        </section>\n      </main>\n      <div class=\"input-delete-flag\">\n        <boardpermission name=\"Delete\">\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n        </boardpermission>\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n      </div>\n      <div class=\"d-none\">\n        <div id=\"view-data-data\">\n            <for-each select=\"/data/@*\">\n                <attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute>\n            </for-each>\n        </div>\n        <span id=\"fkExpenseReports\">\n          <foreignkeyreference table=\"Expense Reports\" />\n        </span>\n    </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n    <script boardresource=\"moneyInputNormalizer.js\" type=\"text/javascript\"/>\n\n    <script>\n        const listExpenseReportApi = new WebEOCCXD.WebEOCAPI({\n            displayViewName: 'List - Expense Report - All',\n        });\n        const listTeamMemberApi = new WebEOCCXD.WebEOCAPI({\n            displayViewName: 'List - Team Members - All',\n        });\n\n        const { view } = WebEOCCXD.ViewBase;\n        const { data } = view.data;\n        const dataId = data.dataid;\n        const fkExpenseReportTable = document.querySelector('#fkExpenseReports').textContent;\n        const relatedDataId = data.relateddataid == '0' ? '<value-of select=\"/data/ViewParameter[@name = 'parentDataid']\" />' : data.relateddataid;\n\n        const crewMemberSelect = document.getElementById(\"crew_member\");\n\n\n        async function getExpenseReportData(expenseReportDataId) {\n            try {\n                const { data, error, response } = await listExpenseReportApi.getRecords();\n                const currentExpenseReport = data.find(expenseReport => expenseReport.dataid == expenseReportDataId);\n                return response.ok ? currentExpenseReport : null;\n            } catch (error) {\n                console.error(`Error fetching crews:`, error);\n                return null;\n            }\n        }\n\n        async function getAllPersonnelByCrewId(crewId) {\n            try {\n                const { data, error, response } = await listTeamMemberApi.getRecords();\n                const personnel = data.filter(personnel => personnel.crew_id == crewId);\n                return response.ok ? personnel : null;\n            } catch (error) {\n                console.error(`Error fetching crews:`, error);\n                return null;\n            }\n        }\n\n        function populateCrewMembers(personnel) {\n            crewMemberSelect.innerHTML = \"\"; \n\n            const entireCrewOption = document.createElement(\"option\");\n            entireCrewOption.value = \"Entire Crew\";\n            entireCrewOption.textContent = \"Entire Crew\";\n            crewMemberSelect.appendChild(entireCrewOption);\n\n            personnel.forEach(member => {\n                const option = document.createElement(\"option\");\n                option.value = `${member.first_name} ${member.last_name}`;\n                option.textContent = `${member.first_name} ${member.last_name}`;\n                crewMemberSelect.appendChild(option);\n            });\n        }\n\n\n        document.addEventListener('DOMContentLoaded', async function() {\n            const expenseReport = await getExpenseReportData(relatedDataId);\n            const personnel = await getAllPersonnelByCrewId(expenseReport.crew_id);\n            populateCrewMembers(personnel);\n            \n            const selectedCrewMember = '<value-of select=\"/data//@crew_member\" />';\n            for (let option of crewMemberSelect.options) {\n                option.selected = option.value === selectedCrewMember;\n            }\n        })    \n    </script>\n  </body>\n</html>\n",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Timesheet",
                "table": "Timesheets",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <div>\n      <form>\n        <updatefields>\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\n        </updatefields>\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\n            <div class=\"modal-dialog\" role=\"document\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\" />\n                    <i class=\"material-icons\">close</i>\n                  </returnlink>\n                </div>\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this timesheet?\n                  <div id=\"timesheet_container\"></div>\n                </div>\n                <div class=\"modal-footer\">\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\n                </div>\n              </div>\n            </div>\n          </section>\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\n        </main>\n        <div style=\"display: none;\">\n          <viewlink name=\"Details - Timesheet Entry\" table=\"Timesheet Entries\" />\n          <viewlink name=\"Input - Timesheet Entry\" table=\"Timesheet Entries\" />\n        </div>\n      </form>\n      <div class=\"modal-backdrop show\" />\n    </div>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\n        <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script type=\"text/javascript\">\n      (async function() {\n        const view = WebEOCCXD.ViewBase.initialize();\n\n        const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet Entry' });\n        const timesheetInputApi = new WebEOCCXD.WebEOCAPI({inputViewName: \"Input - Timesheet Entry\" })\n\n        view.onValidSave(async function(event) {\n          return new Promise(async function (resolve, reject) {\n            let childTimesheetEntries = await timesheetDetailsApi.getRecords({'<foreignkeyreference table=\"Timesheets\" />': '<value-of select=\"/data/@dataid\" />'});\n\n            if (Array.isArray(childTimesheetEntries.data)) {\n              const updateRecords = childTimesheetEntries.data.map(entry => ({\n                dataid: entry.dataid,\n                _webeoc_delete_flag: 'yes'\n              }));\n              const { error: batchError } = await timesheetInputApi.batchRecords(updateRecords);\n              var error = batchError;\n            } else {\n              var error = \"No child timesheet entries found.\";\n            }\n\n            if(!error){\n              resolve()\n            }\n            reject();\n          })\n        })\n      })();\n    </script>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Signature",
                "table": "Timesheets",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n   <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n   <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n      name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n</head>\n\n<style type=\"text/css\">\n   .signaturewrap {\n      border: 1px solid #185a7d; \n      border-width: 1px;\n      overflow: hidden;\n      height: 120px;\n      width: 655px;\n      vertical-align: bottom;\n      position: relative;\n   }\n\n   canvas {\n      cursor: crosshair;\n      height: 120px;\n      width: 655px;\n      position: absolute;\n      top: 0px;\n      left: 0px;\n   }\n\n   .lightboxcontainer{\n      border-color: transparent !important;\n   }\n</style>\n\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n   <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"ilvyy\">\n         <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n         <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n               <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                  <agencyinfo type=\"primarylogo\" />\n               </div>\n               <div>\n                  <h4>Add Signature</h4>\n                  <h6>Board Record</h6>\n               </div>\n            </div>\n         </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n         <section class=\"form-section\" id=\"impo7\">\n             <h2 class=\"section-header\" id=\"i5gw3c\">Signature</h2>\n             <div class=\"form-row\">\n                 <div class=\"my-4\">\n                  <button class=\"btn btn-sm btn-outline-primary mr-2\" id=\"undo-canvas-staff_signature\">Undo</button>\n                  <button class=\"btn btn-sm btn-primary\" id=\"clear-canvas-staff_signature\">Clear</button>\n                  <div class=\"signaturewrap\">\n                     <canvas id=\"canvas-staff_signature\" width=\"700\" height=\"150\" class=\"signature-canvas\"></canvas>\n                  </div>\n                  \n                  <textarea class=\"form-control d-none\" style=\"display: none;\" name=\"staff_signature\" label=\"Staff Signature\"\n                     id=\"staff_signature\" />\n               </div>\n            </div>\n            <div class=\"form-row\">\n               <div class=\"form-group col-12\">\n                <label class=\"form-label\">Signed On:</label>\n                <input type=\"text\" name=\"staff_signature_date\" id=\"staff_signature_date\" class=\"form-control hide-default-calendar col-2\" label=\"Signature Date\" readonly=\"readonly\" />\n               </div>\n            </div>\n         </section>\n         <section class=\"text-right\" aria-label=\"Footer\">\n            <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n            <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n         </section>\n      </main>\n      <div class=\"input-delete-flag\">\n         <boardpermission name=\"Delete\">\n            <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n         </boardpermission>\n         <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n            format=\"html\" />\n      </div>\n      <grouplist/>\n      <div class=\"d-none\">  \n        <div class=\"form-row\">\n          <div class=\"form-group col-12\">\n            <label class=\"form-label\">Entity Group</label>\n            <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\n            <if test=\"not(//*[@entity_group])\">\n              <attribute name=\"value\">\n                <for-each select=\"/data/groups\">\n                  <choose>\n                    <when test=\"starts-with(@name,'Entity -')\">\n                      <value-of select=\"@name\" />\n                    </when>\n                  </choose>\n                </for-each>\n              </attribute>\n            </if>\n            </input>\n          </div>\n        </div>\n        <div class=\"form-row\">\n           <span id=\"user-data-holder\" data-dataid=\"{/data/@dataid}\" data-date=\"{/data/@currentdate}\"/>\n         </div>\n      </div>\n   </form>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"\n      path=\"/js/core/jquery.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"\n      path=\"/js/core/popper.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n      path=\"/js/core/bootstrap-material-design.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n      path=\"/js/plugins/moment.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n      path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n      path=\"/js/plugins/nouislider.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n      path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n      path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n      path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n      path=\"/js/plugins/jquery.flexisel.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n      path=\"/js/plugins/jquery.sharrre.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n      path=\"/js/material-kit.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n      path=\"/js/ux-webeoc-board-standards.js\"></script>\n      <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.8.0/view-base.min.js\"></script>\n      <script src=\"https://assets.juvare.com/webeoc/internal-third-party/signature_pad/4.1.7/signature_pad.umd.min.js\"></script>\n   <script>\n        let signatureDate = document.getElementById('user-data-holder').dataset.date;  \n\n      function initSignatures() {\n        let signaturePad;\n         for (const sigCanvas of document.querySelectorAll('.signature-canvas')) {\n            const sigId = sigCanvas.id;\n            signaturePad = new SignaturePad(sigCanvas);\n            const signatureSrc = document.getElementById(sigId.replace('canvas-', '')).value;\n            if (signatureSrc !== '') {\n               signaturePad.fromDataURL(signatureSrc);\n            }\n\n            document.getElementById(`clear-${sigId}`).addEventListener('click', function () {\n               signaturePad.clear();\n               document.getElementById('staff-signature').value = '';\n            });\n\n            document.getElementById(`undo-${sigId}`).addEventListener('click', function () {\n               var data = signaturePad.toData();\n               if (data) {\n                  data.pop(); // remove the last dot or line\n                  signaturePad.fromData(data);\n               }\n            });\n        }\n        return signaturePad;\n      }\n\n      (function () {\n         \"use strict\";\n         const signaturePad = initSignatures();\n\n        const view = ViewBase.default.view;\n\n        document.getElementById('staff_signature_date').value = signatureDate;\n\n        view.onValidSave(function (event) {\n            return new Promise(function (resolve, reject) {\n                for (const sigCanvas of document.querySelectorAll('.signature-canvas')) {\n                    const sigTextarea = sigCanvas.id.replace('canvas-', '');\n                    document.getElementById(sigTextarea).value = sigCanvas.toDataURL('image/png');\n                } \n                if(signaturePad.isEmpty()) {\n                    alert('Please sign!');\n                  reject();\n                } else {\n                  resolve();\n                }\n            })\n        });\n      })();\n\n   </script>\n</body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Crew",
                "table": "Crews",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n  </head>\n  \n  <xsl:variable name=\"partialSubbieName\" select=\"substring-after(/data/groups[starts-with(@name, 'Entity -')]/@name, 'Entity - ')\" />\n  \n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"if5hg\">\n        <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\"/>\n            </div>\n            <div>\n              <h4>Add/Edit Crew</h4>\n              <h6>Subcontactor Resources</h6>\n            </div>\n          </div>\n        </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n        <section class=\"form-section\" id=\"ijp36\">\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"i16ah\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"select_subcontractor\" id=\"iv8syl\">Subcontractor</label>\n              <foreignkey id=\"subcontractor_name\" type=\"select\" required=\"required\" table=\"Subcontractors\"  style=\"border-radius: 4px; background-image: none; padding: 4px 12px; width: 100%;\" filter=\"_webeoc_delete_flag = 'no'\">\n                  <eocfield name=\"subcontractor_name\" type=\"fk\" table=\"Subcontractors\"/>\n              </foreignkey>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"i16ah\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"crew_id\" id=\"iuvos\">Crew ID</label>\n              <input name=\"crew_id\" type=\"text\" class=\"form-control\" label=\"Crew ID\" id=\"crew_id\" required=\"required\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"iouvp\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"team_type\" id=\"ix8og\">Team Type</label>\n              <select name=\"team_type\" class=\"form-control\" label=\"Team Type\" id=\"team_type\" list=\"Subcontractors - Team Type\" defaulttext=\"Select one\" required=\"required\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"ioudg\">\n              <if test=\"//@dataid = 0\">\n                <attribute name=\"class\">\n                  d-none\n                </attribute>\n              </if>\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"foreman\">Crew Lead / Foreman</label>\n              <select name=\"foreman\" class=\"form-control\" label=\"Foreman\" id=\"foreman\" ></select>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"work_location\">Work Location</label>\n              <div class=\"input-group\">\n                <input name=\"work_location_address\" type=\"text\" class=\"form-control\" required=\"required\" label=\"Work Location\"/>\n                <div class=\"input-group-append\">\n                  <feature name=\"work_location\" address=\"work_location_address\" autopopulate=\"address\" type=\"button\" class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                    <div class=\"d-flex justify-content-center align-items-center\">\n                      Map\n                      <i class=\"material-icons ml-1\">room</i></div>\n                  </feature>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n        <div class=\"d-none\">\n          <span id=\"boardName\"><boardname/></span>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-12\" id=\"iz4sa\">\n              <div class=\"form-check\">\n                <label class=\"form-check-label d-flex align-items-center form-label\" for=\"locked\">\n                  <input type=\"checkbox\" name=\"locked\" class=\"form-check-input form-control\" label=\"Locked\" id=\"locked\" value=\"true\"/>\n                  Lock record\n                  <span class=\"form-check-sign\">\n                    <span class=\"check\"/>\n                  </span>\n                </label>\n              </div>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-10\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">\n                 Approval Status</label>\n              <select name=\"record_approval_status\" class=\"form-control\" label=\"Subcontractor Approval Status\" id=\"record_approval_status\"\n                 list=\"Subcontractors - Approval Status\" />\n           </div>\n          </div>\n        </div>\n        <section class=\"text-right\" aria-label=\"Footer\">\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n        </section>\n      </main>\n      <div class=\"input-delete-flag\">\n        <boardpermission name=\"Delete\">\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n        </boardpermission>\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n      </div>\n      <div class=\"d-none\" id=\"xml-data\">\n        <for-each select=\"/data/@*\">\n          <attribute name=\"data-{name()}\">\n            <value-of select=\".\" />\n          </attribute>\n        </for-each>\n      </div>\n      <grouplist />\n      <div class=\"d-none\">  \n        <div class=\"form-row\">\n          <div class=\"form-group col-12\">\n            <label class=\"form-label\">Entity Group</label>\n            <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\n            <if test=\"not(//*[@entity_group])\">\n              <attribute name=\"value\">\n                <for-each select=\"/data/groups\">\n                  <choose>\n                    <when test=\"starts-with(@name,'Entity -')\">\n                      <value-of select=\"@name\" />\n                    </when>\n                  </choose>\n                </for-each>\n              </attribute>\n            </if>\n            </input>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group col-12\">\n            <label class=\"form-label\">Vewlinks</label>\n            <viewlink name=\"List - Crews - All\" />\n          </div>\n        </div>\n      </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.10.0/view-base.min.js\"></script>\n    <script boardresource=\"subEntityArray.js\" type=\"text/javascript\"/>\n\n  <script type=\"text/javascript\">\n    (async function(window, $) {\n      const detailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Crew' });\n      const teamMemberInput= new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Team Member' });\n      const currentBoardName = document.querySelector('#boardName').textContent;\n      let subbieInput = document.getElementById(\"subcontractor_name\");\n      const crewIdInput = document.querySelector(\"[name=crew_id]\");\n      const view = ViewBase.view;\n      let foremanSelect = $(\"#foreman\")[0];\n      const xmlData = $(\"#xml-data\")[0].dataset; \n      const entityGroup = document.getElementById(\"entity_group\");\n\n      subbieInput.addEventListener(\"change\", function(e){\n          var value = subbieInput.options[subbieInput.selectedIndex].text;\n          var entityObj = subEntityArray.filter((x) => x[value]);\n          var entityVal = Object.values(entityObj[0]);\n          entityGroup.setAttribute(\"value\", entityVal[0]);\n      })\n\n      const partialSubbieName = \"<value-of select='$partialSubbieName' />\";\n\n      document.addEventListener(\"DOMContentLoaded\", async function (e) {\n        let optionsArray = Array.from(subbieInput.options);\n        let matchingOption = optionsArray.filter(option => option.text.includes(partialSubbieName)).forEach(option => {\n          subbieInput.innerHTML = '';\n          option.selected = true;\n          subbieInput.appendChild(option);\n        })\n      })\n\n      async function addForemanOptions() {\n        const { data, error, response } = await detailsApi.getRecord(xmlData.dataid);\n     \n        data.forEach(function (item) {\n          const option = document.createElement(\"option\");\n          let tempForemanName = '';\n\n          if (item.tablename == \"Team Members\" &amp;&amp; item.crew_lead == \"Yes\") {\n            tempForemanName = `${item.first_name} ${item.last_name}`;\n            option.value = tempForemanName;\n            option.text = tempForemanName;\n            option.selected = true;\n            foremanSelect.appendChild(option);\n\n          } else if (item.tablename == \"Team Members\" ) {\n            tempForemanName = `${item.first_name} ${item.last_name}`;\n            option.value = tempForemanName;\n            option.text = tempForemanName;\n            foremanSelect.appendChild(option);\n          } \n        });\n        \n        \n\n      };\n\n      addForemanOptions();\n\n      async function updateCrewForeman() {\n        const { data, error, response } = await detailsApi.getRecord(xmlData.dataid);\n        let optionsArray = Array.from(foremanSelect.options);\n        let updatedData = [];\n\n        data.filter(record => record.tablename == 'Team Members').forEach(record => {\n          let tempFullName = `${record.first_name} ${record.last_name}`;\n          optionsArray.forEach(option => {\n            if (tempFullName == option.value) {\n              \n              if (option.selected == true) {\n                updatedData.push({\n                dataid: record.dataid,\n                crew_lead: 'Yes'\n                });\n              } else {\n                updatedData.push({\n                dataid: record.dataid,\n                crew_lead: 'No'\n                });\n              }\n            }\n          });\n\n        })\n\n        let result = await teamMemberInput.batchRecords(updatedData);\n        \n        return result\n        \n      };\n\n      const listCrewApi = new WebEOCCXD.WebEOCAPI({\n        boardName: currentBoardName,\n        displayViewName: 'List - Crews - All',\n      });\n      \n      if(document.querySelector(\"[name=dataid]\").value == \"\") {\n        subbieInput.insertAdjacentHTML('afterbegin', '<option value=\"\" selected=\"true\">Select a Subcontractor</option>');\n      }\n\n      crewIdInput.addEventListener(\"change\", async function (e) {\n        // console.log(\"change event\")\n        let existingCrew = await getCrewByValue(e.target.value);\n        \n        if (existingCrew.length > 0) {\n            alert(`Crew with Crew ID: ${e.target.value} already exists.`);\n            crewIdInput.value = '';\n        }\n      });\n\n      async function getCrewByValue(value) {\n        // console.log(\"getCrewByValue\", value);\n        const { data, error, response } = await listCrewApi.getRecords({\"crew_id\": value});\n        // console.log('crewID getrecords', data);\n        return response.ok ? data : null;\n      }\n\n       view.onValidSave(function (event) {\n            return new Promise(async function (resolve, reject) {\n                const { data, error } = await updateCrewForeman();\n                if (error) {\n                    reject();\n                }\n\n                resolve();\n            });\n        });\n\n      view.onInvalidSave(function (event) {\n        console.log(\"onInvalidSave\");\n        return new Promise(async function (resolve, reject) {\n\n          if(subbieInput.value == \"\") {\n            console.log(\"subbieInput.value\", subbieInput.value);\n            subbieInput.setAttribute(\"required\", \"required\");\n            subbieInput.setAttribute(\"class\", \"form-control is-invalid\");\n            subbieInput.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">Subcontactor name is required.</div>');\n            reject();\n          } else {\n            resolve();\n          }\n        })\n      })\n\n    })(window, jQuery);\n  </script>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Personnel Time Entry",
                "table": "Timesheet Entries",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n</head>\n\n<style>\n  input[type=\"radio\"][readonly] {\n    pointer-events: none;\n    background-color: #e9ecef;\n  }\n\n  input[type=\"radio\"][readonly] + span.circle {\n    background-color: #e9ecef;\n    border-color: #ccc;\n  }\n\n  input[type=\"radio\"][readonly]:checked + span.circle {\n    background-color: #bdbdbd;\n    border-color: #aaa;\n  }\n</style>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n    <insertfields id=\"ilvyy\">\n      <field name=\"_webeoc_delete_flag\">'no'</field>\n    </insertfields>\n    <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n      <header class=\"container-fluid\" aria-label=\"Header\">\n        <div class=\"flex\">\n          <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n            <agencyinfo type=\"primarylogo\" />\n          </div>\n          <div>\n            <h4>Add/Edit Record</h4>\n            <h6>Board Record</h6>\n          </div>\n        </div>\n      </header>\n    </nav>\n    <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n      <section class=\"form-section\" id=\"impo7\">\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"iap61\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"personnel_id\"\n              id=\"is46jd\">Personnel ID</label>\n            <input name=\"personnel_id\" type=\"text\" class=\"form-control\" label=\"Personnel ID\" id=\"personnel_id\"\n              required=\"required\" readonly=\"readonly\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ignmyl\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"first_name\"\n              id=\"iyjufq\">First Name</label>\n            <input name=\"first_name\" type=\"text\" class=\"form-control\" label=\"First Name\" id=\"first_name\"\n              required=\"required\" readonly=\"readonly\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ixr1dl\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"last_name\"\n              id=\"ivvaqh\">Last Name</label>\n            <input name=\"last_name\" type=\"text\" class=\"form-control\" label=\"Last Name\" id=\"last_name\" required=\"required\"\n              readonly=\"readonly\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ink8y4\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"classification\"\n              id=\"ijqnml\">Classification</label>\n            <select name=\"classification\" class=\"form-control\" label=\"Classification\" id=\"classification\"\n              list=\"Subcontractors - Classification\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ixr1dl\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">Crew Lead / Foreman</label>\n            <div>\n              <div class=\"form-check form-check-radio form-check-inline\">\n                <label class=\"form-check-label\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"crew_lead\" value=\"Yes\" label=\"Crew Lead\"\n                    readonly=\"readonly\" onclick=\"return false;\" /> Yes\n                  <span class=\"circle\"><span class=\"check\" /></span>\n                </label>\n              </div>\n              <div class=\"form-check form-check-radio form-check-inline\">\n                <label class=\"form-check-label\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"crew_lead\" value=\"No\" label=\"Crew Lead\"\n                    readonly=\"readonly\" onclick=\"return false;\" /> No\n                  <span class=\"circle\"><span class=\"check\" /></span>\n                </label>\n              </div>\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"i7smpi\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"status\"\n              id=\"iwxr3k\">Status</label>\n            <select name=\"status\" class=\"form-control\" label=\"Status\" list=\"Subcontractors - Personnel Status\"\n              id=\"status\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-4\">\n            <label class=\"form-label\">Lodging Provided</label>\n            <div>\n              <div class=\"form-check form-check-radio form-check-inline\">\n                <label class=\"form-check-label\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" value=\"yes\" label=\"Lodging Provided\" /> Yes\n                  <span class=\"circle\"><span class=\"check\" /></span></label>\n              </div>\n              <div class=\"form-check form-check-radio form-check-inline\">\n                <label class=\"form-check-label\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" label=\"Lodging Provided\" value=\"no\" /> No\n                  <span class=\"circle\"><span class=\"check\" /></span></label>\n              </div>\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ipww5z\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n              for=\"number_of_meals_provided\" id=\"ib7z9t\">Number of Meals Provided</label>\n            <input name=\"number_of_meals_provided\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n              label=\"Number of Meals Provided\" id=\"number_of_meals_provided\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"i0ulog\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n              for=\"number_of_per_diem_meals\" id=\"ie2ykz\">Number of Per Diem Meals</label>\n            <input name=\"number_of_per_diem_meals\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n              label=\"Number of Per Diem Meals\" id=\"number_of_per_diem_meals\" />\n          </div>\n        </div>\n        <div class=\"form-row\" id=\"basicTime\">\n          <div class=\"form-group bmd-form-group col-md-5\" id=\"iyg9so\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"start_time\"\n              id=\"ir7hw5\">Start\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"start_time\" type=\"time\" class=\"form-control\" label=\"Start Time\" id=\"start_time\"\n                required=\"required\" />\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-5\" id=\"ipaco9\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"end_time\"\n              id=\"ii4i5r\">End\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"end_time\" type=\"time\" class=\"form-control\" label=\"End Time\" id=\"end_time\"\n                required=\"required\" />\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-2\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"total_hours\"\n              id=\"ii4i5r\">Total\n              Hours</label>\n            <div class=\"d-flex\">\n              <input name=\"total_hours\" type=\"text\" class=\"form-control\" label=\"Total Hours\" readonly=\"readonly\"\n                id=\"total_hours\" required=\"required\" />\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row\" id=\"hoursType\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\"\n              for=\"standard_hours\">Standard\n              Time</label>\n            <div class=\"d-flex\">\n              <input name=\"standard_hours\" type=\"text\" class=\"form-control\" label=\"Standard Time\" readonly=\"readonly\" id=\"standard_hours\"\n                required=\"required\" />\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"double_hours\">Over\n              Time</label>\n            <div class=\"d-flex\">\n              <boardpermission name=\"Bird Administrator\">\n                <input name=\"double_hours\" type=\"text\" class=\"form-control\" label=\"Over Time\" id=\"double_hours\" />\n                <notapplied>\n                  <input name=\"double_hours\" type=\"text\" class=\"form-control\" readonly=\"readonly\" label=\"Over Time\"\n                    id=\"double_hours\" />\n                </notapplied>\n              </boardpermission>\n            </div>\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"premium_hours\">Premium\n              Time</label>\n            <div class=\"d-flex\">\n              <boardpermission name=\"Bird Administrator\">\n                <input name=\"premium_hours\" type=\"text\" class=\"form-control\" label=\"Premium Time\" id=\"premium_hours\" />\n                <notapplied>\n                  <input name=\"premium_hours\" type=\"text\" class=\"form-control\" readonly=\"readonly\" label=\"Premium Time\"\n                    id=\"premium_hours\" />\n                </notapplied>\n              </boardpermission>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"inv3b7\">\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\"\n              id=\"ibk9h6\">Comments</label>\n            <textarea name=\"comments\" rows=\"4\" class=\"form-control\" id=\"comments\" label=\"Comments\" />\n          </div>\n        </div>\n      </section>\n      <section class=\"text-right\" aria-label=\"Footer\">\n        <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n        <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n      </section>\n    </main>\n    <div class=\"input-delete-flag\">\n      <boardpermission name=\"Delete\">\n        <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n      </boardpermission>\n      <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n        format=\"html\" />\n    </div>\n    <div>\n      <foreignkey table=\"Timesheets\" />\n    </div>\n    <div id=\"check_bird_admin\" style=\"display: none;\">\n      <boardpermission name=\"Bird Administrator\">\n        <xsl:element name=\"input\">\n          <xsl:attribute name=\"name\">bird_admin</xsl:attribute>\n          <xsl:attribute name=\"id\">bird_admin</xsl:attribute>\n          <xsl:attribute name=\"value\">true</xsl:attribute>\n        </xsl:element>\n        <notapplied>\n          <xsl:element name=\"input\">\n            <xsl:attribute name=\"name\">bird_admin</xsl:attribute>\n            <xsl:attribute name=\"id\">bird_admin</xsl:attribute>\n            <xsl:attribute name=\"value\">false</xsl:attribute>\n          </xsl:element>\n        </notapplied>\n      </boardpermission>\n    </div>\n  </form>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n  <script type=\"text/javascript\" boardresource=\"Hours.js\"></script>\n  <script>\n      initHours(); // Hours.js initialization\n    </script>\n\n</body>\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Subcontractor",
                "table": "Subcontractors",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <div>\r\n      <form>\r\n        <updatefields>\r\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\r\n        </updatefields>\r\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\r\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\r\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" />\r\n                    <i class=\"material-icons\">close</i>\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"modal-body y-scroll\" style=\"max-height: 500px;\">Are you sure you want to delete <strong><eocfield name=\"subcontractor_name\" /></strong>?\r\n                <div id=\"crew_container\"></div>\r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\r\n                  <savebutton class=\"btn btn-sm btn-danger\" disabled=\"disabled\" aria-label=\"Delete\">Delete</savebutton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\r\n          <div class=\"d-none\">\r\n            <span id=\"boardName\"><boardname/></span>\r\n            <span id=\"fkSubcontractors\">\r\n              <foreignkeyreference table=\"Subcontractors\"/>\r\n              <viewlink name=\"List - Crews - All\" />\r\n              <viewlink name=\"List - Team Members - All\" />\r\n              <viewlink name=\"List - Equipment - All\" />\r\n            </span>\r\n            <span><eocfield name=\"dataid\" id=\"subbieDataid\"/></span>\r\n          </div>\r\n        </main>\r\n      </form>\r\n      <div class=\"modal-backdrop show\" />\r\n    </div>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\r\n    <script type=\"text/javascript\">\r\n      (async function() {\r\n        const currentBoardName = document.querySelector('#boardName').textContent;\r\n        const fkSubcontractorTable = document.querySelector('#fkSubcontractors').textContent;\r\n        const currentSubcontractorDataid = document.getElementById(\"subbieDataid\").innerText || null;\r\n        const view = WebEOCCXD.ViewBase.initialize();\r\n\r\n        const listCrewApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Crews - All',\r\n        });\r\n        const listMembersApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Team Members - All',\r\n        });\r\n        const listEquipmentApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Equipment - All',\r\n        })\r\n        const editCrewApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Crew\" })\r\n        const editMemberApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Team Member\" })\r\n        const editEquipmentApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Equipment\" })\r\n\r\n        const {crews, teamMembers, equipment} = await getAllChildren();\r\n        document.querySelector('[name=\"cmdSave\"]').removeAttribute('disabled'); // un-disable the save button\r\n        \r\n        \r\n        view.onValidSave(async function(event) {\r\n          return new Promise(async function (resolve, reject) {\r\n            document.querySelector('[name=\"cmdSave\"]').setAttribute('disabled', 'disabled');\r\n            \r\n            const {data, error} = await deleteAllChildren(crews, teamMembers, equipment);\r\n            if(!error){\r\n              resolve()\r\n            }\r\n            reject();\r\n          })\r\n        })\r\n\r\n        // Get all crews, team members, equipment under this Subbie\r\n        // and display in the modal for confirmation\r\n        async function getAllChildren () {\r\n          try {\r\n            const {data: crewData} = await listCrewApi.getRecords()\r\n            const {data: teamMemberData} = await listMembersApi.getRecords();\r\n            const {data: equipmentData} = await listEquipmentApi.getRecords();\r\n\r\n            \r\n            const crewsUnderThisSubbie = crewData.filter(crew => crew[fkSubcontractorTable] == currentSubcontractorDataid);\r\n            \r\n            const crewIds = crewsUnderThisSubbie.map(crew => crew.crew_id);\r\n\r\n            const teamMembersUnderCrews = teamMemberData.filter(member => crewIds.includes(member.crew_id));\r\n            const equipmentUnderCrews = equipmentData.filter(equipment => crewIds.includes(equipment.crew_id))\r\n            populateModalWithCrews(crewsUnderThisSubbie, teamMembersUnderCrews, equipmentUnderCrews)\r\n            return {\r\n              crews: crewsUnderThisSubbie,\r\n              teamMembers: teamMembersUnderCrews,\r\n              equipment: equipmentUnderCrews\r\n            }\r\n          } catch (error) {\r\n            console.error(error)\r\n          }\r\n\r\n        }\r\n\r\n        function populateModalWithCrews(crews, teamMembers, equipment) {\r\n          const crewContainer = document.getElementById(\"crew_container\");\r\n\r\n          if(crews.length || teamMembers.length || equipment.length){\r\n            crewContainer.insertAdjacentHTML('beforeend', `<p>The following Crews, their Team Members, and Equipment will be deleted:</p>`);\r\n          }\r\n\r\n          const crewList = document.createElement('ul');\r\n          crewList.id = \"crew_list\";\r\n          crewContainer.appendChild(crewList);\r\n\r\n          crews.forEach(crew => {\r\n            const crewItem = document.createElement('li');\r\n            crewItem.innerHTML = `<strong>${crew.crew_id}</strong> `;\r\n\r\n            const teamMembersUnderCrew = teamMembers.filter(member => member.crew_id === crew.crew_id);\r\n            if (teamMembersUnderCrew.length) {\r\n              const teamList = document.createElement('ul');\r\n              teamMembersUnderCrew.forEach(member => {\r\n                teamList.insertAdjacentHTML('beforeend',\r\n                  `<li>Personnel: ${member.first_name} ${member.last_name}</li>`);\r\n              });\r\n              crewItem.appendChild(teamList);\r\n            }\r\n\r\n            const equipmentUnderCrew = equipment.filter(item => item.crew_id === crew.crew_id);\r\n            if (equipmentUnderCrew.length) {\r\n              const equipmentList = document.createElement('ul');\r\n              equipmentUnderCrew.forEach(eq => {\r\n                equipmentList.insertAdjacentHTML('beforeend',\r\n                  `<li>Equipment: ${eq.equipment}</li>`);\r\n              });\r\n              crewItem.appendChild(equipmentList);\r\n            }\r\n            crewList.appendChild(crewItem);\r\n          });\r\n        }\r\n        \r\n        async function deleteAllChildren (crews, teamMembers, equipment) {\r\n          try {\r\n            await Promise.all([\r\n              ...crews.map(crew => editCrewApi.editRecord({\r\n                dataid: crew.dataid,\r\n                record: { ...crew, _webeoc_delete_flag: \"yes\" }\r\n              })),\r\n\r\n              ...teamMembers.map(member => editMemberApi.editRecord({\r\n                dataid: member.dataid,\r\n                record: { ...member, _webeoc_delete_flag: \"yes\" }\r\n              })),\r\n\r\n              ...equipment.map(member => editEquipmentApi.editRecord({\r\n                dataid: member.dataid,\r\n                record: { ...member, _webeoc_delete_flag: \"yes\" }\r\n              }))\r\n            ]);\r\n          } catch (error) {\r\n            console.error(error)\r\n            return {data: null, error}\r\n          }\r\n          return {data: 'Success', error: null};\r\n        }\r\n      })();\r\n    </script>\r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Team Member",
                "table": "Team Members",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <xsl:variable name=\"partialSubbieName\" select=\"substring-after(/data/groups[starts-with(@name, 'Entity -')]/@name, 'Entity - ')\" />\r\n  <xsl:variable name=\"crewIdParam\">\r\n    <value-of select=\"/data/ViewParameter[@name = 'ownerid']\" />\r\n  </xsl:variable>\r\n  <style>\r\n    input[type=\"radio\"][readonly] {\r\n      pointer-events: none;\r\n      background-color: #e9ecef;\r\n    }\r\n  \r\n    input[type=\"radio\"][readonly]+span.circle {\r\n      background-color: #e9ecef;\r\n      border-color: #ccc;\r\n    }\r\n  \r\n    input[type=\"radio\"][readonly]:checked+span.circle {\r\n      background-color: #bdbdbd;\r\n      border-color: #aaa;\r\n    }\r\n  </style>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\r\n      <insertfields id=\"igbsg\">\r\n        <field name=\"_webeoc_delete_flag\">'no'</field>\r\n      </insertfields>\r\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\r\n        <header class=\"container-fluid\" aria-label=\"Header\">\r\n          <div class=\"flex\">\r\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n              <agencyinfo type=\"primarylogo\" />\r\n            </div>\r\n            <div>\r\n              <h4>Add/Edit Team Member</h4>\r\n              <h6>Subcontractor Resources</h6>\r\n            </div>\r\n          </div>\r\n        </header>\r\n      </nav>\r\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\r\n        <section class=\"form-section\" id=\"ijdpg\">\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ivrmrg\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"subcontractor_name\" id=\"iwpeve\">Subcontactor</label>\r\n              <foreignkey id=\"subcontractor_name\" type=\"select\" table=\"Subcontractors\"  style=\"border-radius: 4px; background-image: none; padding: 4px 12px; width:100% \" filter=\"_webeoc_delete_flag = 'no'\">\r\n                <eocfield name=\"subcontractor_name\" type=\"fk\" table=\"Subcontractors\" />\r\n              </foreignkey>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ivrmrg\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"crew_id\" id=\"iwpeve\">Crew ID</label>\r\n              <foreignkey id=\"crew_id\" type=\"select\" table=\"Crews\"  style=\"border-radius: 4px; background-image: none; padding: 4px 12px; width: 100%;\" filter=\"_webeoc_delete_flag = 'no'\">\r\n                <eocfield name=\"crew_id\" type=\"fk\" table=\"Crews\"/>\r\n              </foreignkey>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"ivrmrg\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"personnel_id\" id=\"iwpeve\">Personnel ID</label>\r\n              <input name=\"personnel_id\" type=\"text\" class=\"form-control\" label=\"Personnel ID\" id=\"personnel_id\" required=\"required\" />\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"ix71df\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"last_name\" id=\"itg0ot\">Last Name</label>\r\n              <input name=\"last_name\" type=\"text\" class=\"form-control\" label=\"Last Name\" id=\"last_name\" />\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"irxbnk\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"first_name\" id=\"i1kzoy\">First Name</label>\r\n              <input name=\"first_name\" type=\"text\" class=\"form-control\" label=\"First Name\" id=\"first_name\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iqw99k\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"resource_type\" id=\"iu2dvg\">Resource Type/Classification</label>\r\n              <select name=\"resource_type\" class=\"form-control\" label=\"Resource Type\" id=\"resource_type\" list=\"Subcontractors - Classification\" defaulttext=\"(Please Select)\" required=\"required\"/>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4 ml-3 \" id=\"ihyp2g\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">\r\n                Crew Lead / Foreman\r\n                <span class=\"ml-1\" tabindex=\"0\" data-toggle=\"tooltip\" title=\"This value is established via the subcontractor's roster or crew input view\"\r\n                  aria-label=\"This value can only be changed via the roster.\" style=\"cursor: pointer;\">\r\n                  <i class=\"material-icons\" style=\"font-size: 18px; vertical-align: middle;\">info_outline</i>\r\n                </span>\r\n              </label>\r\n              <div class=\"form-check form-check-radio\">\r\n                <label class=\"form-check-label\"><input type=\"radio\" name=\"crew_lead\" value=\"Yes\" label=\"Crew Lead\"\r\n                    class=\"form-check-input\" onclick=\"return false;\" readonly=\"readonly\" />Yes<span class=\"circle\"><span class=\"check\" /></span></label>\r\n              </div>\r\n              <div class=\"form-check form-check-radio\">\r\n                <label class=\"form-check-label\"><input type=\"radio\" name=\"crew_lead\" value=\"No\" label=\"Crew Lead\"\r\n                    class=\"form-check-input\" onclick=\"return false;\" readonly=\"readonly\" />No<span class=\"circle\"><span class=\"check\" /></span></label>\r\n              </div>\r\n            </div>\r\n        </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"i6ri69\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"email\">\r\n              Email\r\n            </label>\r\n              <input name=\"email\" type=\"email\" class=\"form-control\" label=\"Email\" id=\"email\" />\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"ir04n4\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"cell_phone\" id=\"i4bnum\">Cell Phone</label>\r\n              <input name=\"cell_phone\" type=\"tel\" class=\"form-control\" label=\"Cell Phone\" id=\"cell_phone\" />\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-4\" id=\"irdgt6\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"gender\" id=\"i172fz\">Gender</label>\r\n              <select name=\"gender\" class=\"form-control\" label=\"Gender\" id=\"gender\" list=\"Subcontractors - Gender\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"iub6j2\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"departure_city\" id=\"ikvajh\">Departure City</label>\r\n              <input name=\"departure_city\" type=\"text\" class=\"form-control\" label=\"Departure City\" id=\"departure_city\" required=\"required\"/>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"inucjg\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"departure_state\" id=\"iqsafl\">Departure State</label>\r\n              <select name=\"departure_state\" class=\"form-control\" label=\"Departure State\" id=\"departure_state\" list=\"Design Template - States\" defaulttext=\"(Please Select)\" required=\"required\"/>\r\n            </div>\r\n            <div class=\"input-group-append\">\r\n              <feature name=\"location\" address-field=\"departure_city,departure_state\" autopopulate=\"address\" type=\"button\" class=\"btn btn-sm btn-primary m-0 rounded-right\">\r\n                <div class=\"d-flex justify-content-center align-items-center\">\r\n                  Map\r\n                  <i class=\"material-icons ml-1\">room</i></div>\r\n              </feature>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section class=\"text-right\" aria-label=\"Footer\">\r\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\r\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\r\n        </section>\r\n      </main>\r\n      <div class=\"d-none\">\r\n        <span id=\"fkSubcontractors\">\r\n          <foreignkeyreference table=\"Subcontractors\"/>\r\n        </span>\r\n        <span id=\"boardName\"><boardname/></span>\r\n        <div class=\"form-row\">\r\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"iz4sa\">\r\n            <div class=\"form-check\">\r\n              <label class=\"form-check-label d-flex align-items-center form-label\" for=\"locked\">\r\n                <input type=\"checkbox\" name=\"locked\" class=\"form-check-input form-control\" label=\"Locked\" id=\"locked\" value=\"true\"/>\r\n                Lock record\r\n                <span class=\"form-check-sign\">\r\n                  <span class=\"check\"/>\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group bmd-form-group col-md-10\">\r\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">\r\n               Approval Status</label>\r\n            <select name=\"record_approval_status\" class=\"form-control\" label=\"Subcontractor Approval Status\" id=\"record_approval_status\"\r\n               list=\"Subcontractors - Approval Status\" />\r\n         </div>\r\n        </div>\r\n        <grouplist/>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group col-12\">\r\n              <label class=\"form-label\">Entity Group</label>\r\n              <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\r\n              <if test=\"not(//*[@entity_group])\">\r\n                <attribute name=\"value\">\r\n                  <for-each select=\"/data/groups\">\r\n                    <choose>\r\n                      <when test=\"starts-with(@name,'Entity -')\">\r\n                        <value-of select=\"@name\" />\r\n                      </when>\r\n                    </choose>\r\n                  </for-each>\r\n                </attribute>\r\n              </if>\r\n              </input>\r\n            </div>\r\n            <div class=\"form-group col-12\">\r\n              <label class=\"form-label\">Viewlinks</label>\r\n              <viewlink name=\"List - Crews - All\" table=\"Crews\" />\r\n              <viewlink name=\"List - Team Members - All\" table=\"Team Members\" />\r\n            </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"input-delete-flag\">\r\n        <boardpermission name=\"Delete\">\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\r\n        </boardpermission>\r\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\" />\r\n      </div>\r\n    </form>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\r\n    <script boardresource=\"subEntityArray.js\" type=\"text/javascript\"/>\r\n\r\n  <script type=\"text/javascript\">\r\n    (async function () {\r\n      const currentBoardName = document.querySelector('#boardName').textContent;\r\n      const fkSubbieTable = document.querySelector('#fkSubcontractors').textContent;\r\n      const personnelIdInput = document.querySelector(\"[name=personnel_id]\");\r\n      const listCrewApi = new WebEOCCXD.WebEOCAPI({\r\n        boardName: currentBoardName,\r\n        displayViewName: 'List - Crews - All',\r\n      });\r\n      const listTeamMemberApi = new WebEOCCXD.WebEOCAPI({\r\n        boardName: currentBoardName,\r\n        displayViewName: 'List - Team Members - All',\r\n      });\r\n      let subbieInput = document.getElementById(\"subcontractor_name\");\r\n      let crewInput = document.getElementById(\"crew_id\");\r\n      const entityGroup = document.getElementById(\"entity_group\");\r\n      let resourceType = document.getElementById(\"resource_type\");\r\n      const view = WebEOCCXD.ViewBase.initialize();\r\n      const partialSubbieName = \"<value-of select='$partialSubbieName' />\";\r\n      const crewIdParam = \"<value-of select='$crewIdParam' />\";\r\n\r\n      subbieInput.addEventListener(\"change\", function(e){\r\n          var value = subbieInput.options[subbieInput.selectedIndex].text;\r\n          var entityObj = subEntityArray.filter((x) => x[value]);\r\n          var entityVal = Object.values(entityObj[0]);\r\n          entityGroup.setAttribute(\"value\", entityVal[0]);\r\n      })\r\n\r\n      document.addEventListener(\"DOMContentLoaded\", async function (e) {\r\n        // on load filter our the options for Subcontractor based on entity_group name\r\n        let optionsArray = Array.from(subbieInput.options);\r\n        let matchingOption = optionsArray.filter(option => option.text.includes(partialSubbieName)).forEach(option => {\r\n          subbieInput.innerHTML = '';\r\n          option.selected = true;\r\n          subbieInput.appendChild(option);\r\n        })\r\n\r\n        let subbieDataid = subbieInput.value;\r\n        console.log('subbieDataid', subbieDataid);\r\n        let crewsUnderThisSubbie = await getAllCrews().then(data => data.filter(crew => crew[fkSubbieTable] === subbieDataid));\r\n        console.log('crewsUnderThisSubbie', crewsUnderThisSubbie);\r\n        \r\n        if(crewInput.value) {\r\n          // have to filter out the crews that don't belong to this subcontractor\r\n          let crewOptionsArray = Array.from(crewInput.options);\r\n          let matchingOptions = crewOptionsArray.filter(option => crewsUnderThisSubbie.some(crew => crew.dataid === option.value));\r\n\r\n          // have to Clear existing options\r\n          crewInput.innerHTML = \"\";\r\n          populateCrewDropdown(matchingOptions);\r\n        } else {\r\n          populateCrewDropdown(crewsUnderThisSubbie);\r\n        }\r\n\r\n        if(crewIdParam){\r\n          crewInput.value = crewIdParam;\r\n        }\r\n        if(subbieInput.classList.contains(\"is-invalid\") &amp;&amp; subbieDataid != \"\") {\r\n          subbieInput.classList.remove(\"is-invalid\");\r\n        }\r\n      })\r\n\r\n      if(document.querySelector(\"[name=dataid]\").value == \"\") {\r\n        subbieInput.insertAdjacentHTML('afterbegin', '<option value=\"\" selected=\"true\">Select a Subcontractor</option>');\r\n        crewInput.innerHTML = '<option value=\"\">Select a Crew</option>'\r\n      }\r\n\r\n      subbieInput.addEventListener(\"change\", async function () {\r\n        crewInput.innerHTML = '<option value=\"\">Select a Crew</option>'; // Clear all options\r\n        let subbieDataid = subbieInput.value;\r\n        let crewsUnderThisSubbie = await getAllCrews().then(data => data.filter(crew => crew[fkSubbieTable] === subbieDataid));\r\n        populateCrewDropdown(crewsUnderThisSubbie);\r\n        if(subbieInput.classList.contains(\"is-invalid\") &amp;&amp; subbieDataid != \"\") {\r\n          subbieInput.classList.remove(\"is-invalid\");\r\n        }\r\n      });\r\n\r\n      crewInput.addEventListener(\"change\", function () {\r\n        if(crewInput.classList.contains(\"is-invalid\") &amp;&amp; crewInput.value != \"\") {\r\n          crewInput.classList.remove(\"is-invalid\");\r\n        }\r\n      });\r\n\r\n      resourceType.addEventListener(\"change\", function (e) {\r\n        const selectedValue = e.target.value;\r\n        if(selectedValue == \"Foreman\" || selectedValue == \"General Foreman\" || selectedValue == \"Superintendent\") {\r\n          document.querySelector(\"[for=email]\").classList.add(\"required\");\r\n          document.querySelector(\"[name=email]\").setAttribute(\"required\", \"required\");\r\n          document.querySelector(\"[for=cell_phone]\").classList.add(\"required\");\r\n          document.querySelector(\"[name=cell_phone]\").setAttribute(\"required\", \"required\");\r\n        } else {\r\n          document.querySelector(\"[for=email]\").classList.remove(\"required\");\r\n          document.querySelector(\"[name=email]\").removeAttribute(\"required\");\r\n          document.querySelector(\"[for=cell_phone]\").classList.remove(\"required\");\r\n          document.querySelector(\"[name=cell_phone]\").removeAttribute(\"required\");\r\n        }\r\n      });\r\n\r\n      function populateCrewDropdown(crews) {\r\n        crews.forEach(crew => {\r\n          let option = document.createElement(\"option\");\r\n          option.value = crew.dataid || crew.value; \r\n          option.textContent = crew.crew_id || crew.text;\r\n          option.selected = crew.selected;\r\n          crewInput.appendChild(option);\r\n        });\r\n      }\r\n\r\n      async function getAllCrews() {\r\n        const { data, error, response } = await listCrewApi.getRecords();\r\n        return response.ok ? data : null;\r\n      } \r\n\r\n      personnelIdInput.addEventListener(\"change\", async function (e) {\r\n        let existingTeamMembers = await getTeamMembersByValue(e.target.value);\r\n        \r\n        if (existingTeamMembers.length > 0) {\r\n            alert(`Team Member with Personnel ID: ${e.target.value} already exists.`);\r\n            personnelIdInput.value = '';\r\n        }\r\n      });\r\n\r\n      async function getTeamMembersByValue(value) {\r\n        const { data, error, response } = await listTeamMemberApi.getRecords({\"personnel_id\": value});\r\n        return response.ok ? data : null;\r\n      }\r\n\r\n      view.onInvalidSave(function (event) {\r\n        return new Promise(async function (resolve, reject) {\r\n          if(subbieInput.value == \"\") {\r\n            subbieInput.setAttribute(\"required\", \"required\");\r\n            subbieInput.setAttribute(\"class\", \"form-control is-invalid\");\r\n            subbieInput.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">Subcontactor name is required.</div>');\r\n            reject();\r\n          } \r\n          if(crewInput.value == \"\") {\r\n            crewInput.setAttribute(\"required\", \"required\");\r\n            crewInput.setAttribute(\"class\", \"form-control is-invalid\");\r\n            crewInput.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">Crew is required.</div>');\r\n            reject();\r\n          }\r\n          resolve();\r\n        })\r\n      })\r\n\r\n    })();\r\n  </script>\r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Expense Report",
                "table": "Expense Reports",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"/>\n    <link rel=\"stylesheet\" boardresource=\"loader.css\"/>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <applytheme/>\n    <div>\n      <form>\n        <updatefields>\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\n        </updatefields>\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\n            <div class=\"modal-dialog\" role=\"document\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\"/>\n                    <i class=\"material-icons\">close</i>\n                  </returnlink>\n                </div>\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this record?</div>\n                <div class=\"modal-footer\">\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\n                </div>\n                <div id=\"loader\" class=\"loader-overlay d-none\">\n                  <div class=\"loader-spinner\"></div>\n                  <p class=\"text-center text-primary\">Loading...</p>\n                </div>\n              </div>\n            </div>\n          </section>\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\"/>\n        </main>\n      </form>\n      <div class=\"modal-backdrop show\"/>\n      <div class=\"d-none\">\n        <div id=\"view-data-data\">\n          <for-each select=\"/data/@*\">\n            <attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute>\n          </for-each>\n        </div>\n        <span id=\"fkExpenseReports\">\n          <foreignkeyreference table=\"Expense Reports\" />\n        </span>\n        <span id=\"boardName\">\n            <boardname />\n        </span>\n      </div>\n    </div>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"/>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script type=\"text/javascript\">\n      (async function () {\n        const fkExpenseReports = document.querySelector('#fkExpenseReports').textContent;\n        const { view } = WebEOCCXD.ViewBase;\n        const { data } = view.data;\n        const dataId = data.dataid;\n\n        const expenseEntryInputApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Expense Entry' });\n        const listExpenseEntryApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Expenses' });\n\n        view.onValidSave(async function (event) {\n          document.querySelector(\"#loader\").classList.remove(\"d-none\");\n\n          return new Promise(async function (resolve, reject) {\n            const { data, error } = await deleteAllChildren();\n            if (!error) {\n              resolve()\n            }\n            reject();\n          })\n\n          document.querySelector(\"#loader\").classList.add(\"d-none\");\n        })\n\n        async function getChildrenExpenseEntries() {\n          try {\n            const {data, error, response} = await listExpenseEntryApi.getRecords({ [fkExpenseReports]: dataId });\n            return response.ok ? data : null;\n          } catch (error) {\n            console.log(error);\n          }\n        }\n  \n        async function deleteAllChildren() {\n          try {\n            const expenses = await getChildrenExpenseEntries();\n            await Promise.all([\n              ...expenses.map(expense => expenseEntryInputApi.editRecord({\n                dataid: expense.dataid,\n                record: { ...expense, _webeoc_delete_flag: \"yes\" }\n              }))\n            ]);\n          } catch (error) {\n            console.error(error)\n            return {data: null, error}\n          }\n          return {data: 'Success', error: null};\n        }\n\n      })();\n    </script>\n\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Crew",
                "table": "Crews",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <div>\r\n      <form>\r\n        <updatefields>\r\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\r\n        </updatefields>\r\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\r\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\r\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" />\r\n                    <i class=\"material-icons\">close</i>\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete   <strong><eocfield name=\"crew_id\" id=\"crew_id\"/></strong>?\r\n                  <div id=\"crew_container\"></div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\r\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\r\n          <div class=\"d-none\">\r\n            <span id=\"boardName\"><boardname/></span>\r\n          </div>\r\n        </main>\r\n      </form>\r\n      <div class=\"modal-backdrop show\" />\r\n    </div>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\r\n    <script type=\"text/javascript\">\r\n      (async function() {\r\n        const currentBoardName = document.querySelector('#boardName').textContent;\r\n        const currentCrewId = document.querySelector(\"[name=crew_id]\").innerText;\r\n        const view = WebEOCCXD.ViewBase.initialize();\r\n\r\n        const listMembersApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Team Members',\r\n        });\r\n        const listEquipmentApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Equipment',\r\n        })\r\n\r\n        const editMemberApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Team Member\" })\r\n        const editEquipmentApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Equipment\" })\r\n\r\n        const {teamMembers, equipment} = await getAllChildren();\r\n\r\n        view.onValidSave(async function(event) {\r\n          return new Promise(async function (resolve, reject) {\r\n            const {data, error} = await deleteAllChildren(teamMembers, equipment);\r\n            if(!error){\r\n              resolve()\r\n            }\r\n            reject();\r\n          })\r\n        })\r\n\r\n        // Get all team members and equipment under this Crew\r\n        // and display in the modal for confirmation\r\n        async function getAllChildren () {\r\n          try {\r\n            const {data: teamMemberData} = await listMembersApi.getRecords();\r\n            const {data: equipmentData} = await listEquipmentApi.getRecords();\r\n\r\n            const teamMembersUnderCrews = teamMemberData.filter(member => member.crew_id == currentCrewId);\r\n            const equipmentUnderCrews = equipmentData.filter(equipment => equipment.crew_id == currentCrewId)\r\n\r\n            populateModalWithData(teamMembersUnderCrews, equipmentUnderCrews)\r\n            return {\r\n              teamMembers: teamMembersUnderCrews,\r\n              equipment: equipmentUnderCrews\r\n            }\r\n          } catch (error) {\r\n            console.error(error)\r\n          }\r\n        }\r\n\r\n        function populateModalWithData(teamMembers, equipment) {\r\n          const crewContainer = document.getElementById(\"crew_container\");\r\n\r\n          if(teamMembers.length || equipment.length){\r\n            crewContainer.insertAdjacentHTML('beforeend', `<p>The following Team Members and Equipment will be deleted:</p>`);\r\n          }\r\n\r\n          if (teamMembers.length) {\r\n            const teamList = document.createElement('ul');\r\n            teamMembers.forEach(member => {\r\n              teamList.insertAdjacentHTML('beforeend',\r\n                `<li>${member.first_name} ${member.last_name}</li>`);\r\n            });\r\n            crewContainer.appendChild(teamList);\r\n          }\r\n\r\n          if (equipment.length) {\r\n            const equipmentList = document.createElement('ul');\r\n            equipment.forEach(eq => {\r\n              equipmentList.insertAdjacentHTML('beforeend',\r\n                `<li>${eq.equipment}</li>`);\r\n            });\r\n            crewContainer.appendChild(equipmentList);\r\n          }\r\n        }\r\n        \r\n        async function deleteAllChildren (teamMembers, equipment) {\r\n          try {\r\n            await Promise.all([\r\n              ...teamMembers.map(member => editMemberApi.editRecord({\r\n                dataid: member.dataid,\r\n                record: { ...member, _webeoc_delete_flag: \"yes\" }\r\n              })),\r\n\r\n              ...equipment.map(member => editEquipmentApi.editRecord({\r\n                dataid: member.dataid,\r\n                record: { ...member, _webeoc_delete_flag: \"yes\" }\r\n              }))\r\n            ]);\r\n          } catch (error) {\r\n            console.error(error)\r\n            return {data: null, error}\r\n          }\r\n          return {data: 'Success', error: null};\r\n        }\r\n      })();\r\n    </script>\r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Timesheet Entry",
                "table": "Timesheet Entries",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <div>\n      <form>\n        <updatefields>\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\n        </updatefields>\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\n            <div class=\"modal-dialog\" role=\"document\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\" />\n                    <i class=\"material-icons\">close</i>\n                  </returnlink>\n                </div>\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this record?</div>\n                <div class=\"modal-footer\">\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\n                </div>\n              </div>\n            </div>\n          </section>\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\n        </main>\n      </form>\n      <div class=\"modal-backdrop show\" />\n    </div>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Subcontractor",
                "table": "Subcontractors",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons|Material+Symbols+Outlined:100\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    <link rel=\"stylesheet\" boardresource=\"datatables.min.css\"/>\n    <style>\n      #drop_dom_element {\n        border: 1px solid #000;\n        padding: 2rem;\n        width: 100%;\n        text-align: center;\n        display: block;\n        border-radius: 2rem;\n        position: relative;\n      }\n      #drop_dom_element input[type=\"file\"] {\n        z-index: 1000 !important;\n      }\n      tr.group,\n      tr.group:hover {\n          background-color: rgba(0, 0, 0, 0.1) !important;\n      }\n      :root.dark tr.group,\n      :root.dark tr.group:hover {\n          background-color: rgba(0, 0, 0, 0.75) !important;\n      }\n      .fullscreen-focus {\n        overflow: hidden;\n      }\n      .fullscreen {\n        position: fixed;\n        z-index: 1000;\n        background-color: #FFF;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        overflow-y: scroll;\n      }\n      .fullscreen hr {\n        display: none;\n      }\n      tr.group, tr.group:hover {\n        background-color: #121212 !important;\n        color: #FFF;\n      }\n      .dataTable {\n        font-size: 0.925rem;\n      }\n      .DTE_Field_Type_select select {\n        width: 100%;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABQCAYAAAC+neOMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAA5tJREFUeJzt2s9rHGUYwPHvM9lpKjYQFENBEIzSelHwPxBMeuhNJYtxAioehKyiNw8ik148CFLqtpG9WEI6G38h1EhPQgTvnjVCD4pVPBg8eKhJ5vHS3Wzipju7O+/7TuH5nmZnZncePpmEd4eAZVmWZVmWZVmWZVmWZVmWZVnWEEmRk9I0jU6fOfPYvsgD5PkfjST5RUTU9XCuaq6tPRhFk7NM5Lf3pqd/euv8+duD3nNXqDRNo5mzZxuq+o4gD3cPKD9C/m5jaemrEub2VvPatScj5ENE5nt2/6Oqn8Qn4vder9f/Pu69x0K1Wq147/6pDYQXjjtHlZU3ll66MOLcXmu22/NRrtcRua/vCarbTERzjcXFX/sd7gvVarXi3VNTnwo8P3gEvdBIkpXiI/vvyvrGOY30usDJu52ncFMieaYfVnR0R7q1Vds9NZUVQwKQ9EqWrRSc2XtFkQAEZjXX71prnz9y9NghqHRrqzbz2+/rAgvDjVNNrGGQOgnM7tX2/od1CGrm1q0PEF4cbaxqYY2C1NOjuxO7m5du3Jjs7OhCfZRlT6jy9njjVQOr2W7Pj4EEgIg8VdvZea3zOurZWBCRQuuqAZcIitVst+dF+XocpJ66f4IOfvVUHi/hg+8UBqtkJODApAslogNXp0NexCtW+Uig8G9nu/eO+qGsCxzkB8sFEoCgXZPeO+ozhZ0yL3Tnk51iuUICEGh1trtQy0myI+jLqrpf9gVdYa1m2ZwrJJSPl5Pk287LQ+uoRpJsRsLivYC1mmVzObLpBAldf+hE7c3ePX2XA6tZtpArGyIy4WCIsb8bOkeK41fr9fqhm+XYdVNVsUIgwYDnUVXDCoUEBZ5wVgUrJBIUfBQcGuvy+sazRPpNKCQoCAXhsKqABENAgX+sqiDBkFDgD6tKSDACFLjH0jz6vkpIMCIUuMVS1X1HP4SRkGAMKHB9Z5Xd6EgwJhTcK1jjIUEJUFB1rPGRoCQoqCpWOUhQIhRUDas8JCgZCqqCVS4SOICC0FjlI4EjKAiF5QYJHEKBbyx3SOAYCnxhuUUCD1Dg/LuhcyTwBAWusPwggUcoKBvLHxJ4hoKysPwiQQAoGBfLPxIEgoJRscIgQUAoGBYrHBIEhoKiWGGRoM+/T/tuOUm+EOE5Vf3r6DFV3Ud5/8/t7VdCIkEF7qhOF69enY7jyQWBp4EY+FlEv1xOkpuhZ7Msy7Isy7Isy7IsyxrcfzNeLxtxSlaeAAAAAElFTkSuQmCC);\n        background-position: right .7em top 50%;\n        background-size: .65em auto;\n      }\n      #resources_wrapper {\n        overflow-x: auto;\n      }\n      .dt-select-checkbox {\n        pointer-events: none;\n      }\n        table.dataTable th.dt-type-numeric, table.dataTable th.dt-type-date, table.dataTable td.dt-type-numeric, table.dataTable td.dt-type-date {\n          text-align: left;\n        }\n\n        select option:disabled {\n          color: white;\n          background-color: #acafb2 !important;\n        }\n    </style>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"i6904\">\n        <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\"/>\n            </div>\n            <div>\n              <h4>Add/Edit Subcontractor</h4>\n              <h6>Subcontractor Resources</h6>\n            </div>\n          </div>\n        </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n        <section class=\"form-section\" id=\"ijpok\">\n          <boardpermission name=\"Lock Record\">          \n            <div class=\"form-row bg-light\">\n              <div class=\"col-md-12 faded-grey\"><h2 class=\"section-header\">For Admin Use Only</h2></div>\n              <div class=\"form-group bmd-form-group col-md-2\" id=\"iz4sa\">\n                <div class=\"form-check\" style=\"margin: 15% 5px;\">\n                  <label class=\"form-check-label d-flex align-items-center form-label\" for=\"locked\">\n                    <input type=\"checkbox\" name=\"locked\" class=\"form-check-input form-control\" label=\"Locked\" id=\"locked\" value=\"true\"/>\n                    Lock record\n                    <span class=\"form-check-sign\">\n                      <span class=\"check\"/>\n                    </span>\n                  </label>\n                </div>\n              </div>\n              <div class=\"form-group bmd-form-group col-md-10\">\n                <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">\n                   Approval Status</label>\n                <select name=\"record_approval_status\" class=\"form-control\" label=\"Subcontractor Approval Status\" id=\"record_approval_status\"\n                   list=\"Subcontractors - Approval Status\" />\n             </div>\n            </div>\n            <div class=\"horizontal-line-break mt-3 mb-3\" />\n          </boardpermission>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i5y9w\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto;\" for=\"subcontractor_name\" id=\"iv8syl\">Subcontractor Name</label>\n              <select style=\"background-image: none;\" name=\"subcontractor_name\" class=\"form-control\" label=\"Subcontractor Name\" id=\"subcontractor_name\" required=\"required\" list=\"Subcontractors List\" defaulttext=\"\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"irllu7\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"date_submitted\" id=\"i0cj1a\">Date Submitted</label>\n              <input name=\"date_submitted\" type=\"text\" class=\"form-control dtgpickr\" fieldtype=\"datetime\" label=\"Date Submitted\" id=\"date_submitted\" value=\"_currentdatetime\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i2d6z2\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"receiving_utility\" id=\"ian0g4\">Receiving Utility</label>\n              <input name=\"receiving_utility\" type=\"text\" class=\"form-control\" label=\"Receiving Utility\" id=\"receiving_utility\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i0bc2k\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"subcontractor_lead\" id=\"irzd3u\">Subcontractor Lead</label>\n              <input name=\"subcontractor_lead\" type=\"text\" class=\"form-control\" label=\"Subcontractor Lead\" id=\"subcontractor_lead\" required=\"required\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i0bc2k\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"subcontractor_email\" >Subcontractor Email</label>\n              <input name=\"subcontractor_email\" type=\"email\" class=\"form-control\" label=\"Subcontractor Email\" id=\"subcontractor_email\" required=\"required\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ixt47g\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"subcontractor_lead_phone\" id=\"i9bqct\">Subcontractor Lead Phone</label>\n              <input name=\"subcontractor_lead_phone\" type=\"tel\" class=\"form-control\" label=\"Subcontractor Lead Phone\" id=\"subcontractor_lead_phone\" required=\"required\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"itht6g\">\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"prepared_by\" id=\"i1hpd2\">Prepared By</label>\n              <input name=\"prepared_by\" type=\"text\" class=\"form-control\" label=\"Prepared By\" id=\"prepared_by\"/>\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"i7g8gj\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"expected_arrival_date_time\" id=\"ic1lox\">Expected Arrival Date/Time</label>\n              <input name=\"expected_arrival_date_time\" type=\"text\" class=\"form-control dtgpickr\" fieldtype=\"datetime\" label=\"Expected Arrival Date/Time\" id=\"expected_arrival_date_time\" required=\"required\"/>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-12\" id=\"iiwc62\">\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\">Departing Address</label>\n              <div class=\"input-group\">\n                <input name=\"address\" type=\"text\" class=\"form-control\" required=\"required\" label=\"Departing Address\"/>\n                <div class=\"input-group-append\">\n                  <feature name=\"location\" address=\"address\" autopopulate=\"address\" type=\"button\" class=\"btn btn-sm btn-primary m-0 rounded-right\">\n                    <div class=\"d-flex justify-content-center align-items-center\">\n                      Map\n                      <i class=\"material-icons ml-1\">room</i></div>\n                  </feature>\n                </div>\n              </div>\n            </div>\n          </div>\n            <hr class=\"horizontal-line-break mt-3 mb-3\"/>\n            <div class=\"form-row\" id=\"fullscreen-section\">\n              <section class=\"form-panel col-md-12\" id=\"ibdy71\">\n                <div class=\"btn btn-sm fullscreen-button float-left pl-2 pr-2 mr-2 mb-0\">\n                  <span class=\"material-symbols-outlined\">fullscreen</span>\n                </div>\n                <div class=\"ml-auto print-hide related-button text-right\">\n                  <a boardresource=\"Response Roster Template.xlsx\" type=\"button\" class=\"btn btn-sm btn-primary scroll-link mb-0\">\n                    <span>Download Template</span>\n                    <span class=\"material-symbols-outlined\">\n                      download\n                    </span>\n                  </a>\n                </div>\n                <div class=\"form-row mt-1\" id=\"drop_dom_container\">\n                  <div class=\"form-group bmd-form-group col-md-12\" id=\"i2d6z1\">\n                    <div id=\"drop_dom_element\" style=\"z-index: 0;\">\n                      <input type=\"file\" id=\"input_dom_element\" name=\"workbook_file\" />\n                      Drop spreadsheet here\n                    </div>\n                  </div>\n                </div>\n                <div class=\"form-header\" id=\"i7xug1\">\n                  <h4>\n                    <b>Crews</b>\n                  </h4>\n                </div>\n                <div class=\"form-row\">\n                  <div class=\"form-group bmd-form-group col-md-12\" id=\"i2d6a1\">\n                    <table class=\"table related-table table-striped table-sm mt-1 percent-column\" id=\"resources\" width=\"100%\"/>\n                  </div>\n                </div>\n              </section>\n              <section class=\"form-panel col-md-12\" id=\"ibdy7z\">\n                <div class=\"form-header\" id=\"i7xugz\">\n                  <h4>\n                    <b>Equipment</b>\n                  </h4>\n                </div>\n                <div class=\"form-row\">\n                  <div class=\"form-group bmd-form-group col-md-12\" id=\"i2d6az\">\n                    <table class=\"table related-table table-striped table-sm mt-1 percent-column\" id=\"equipment\" width=\"100%\"/>\n                  </div>\n                </div>\n              </section>\n            </div> \n          <section class=\"text-right\" aria-label=\"Footer\">\n            <div class=\"progress d-none\" id=\"progress\">\n              <div id=\"progress-bar\" class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 0%;\">\n              </div>\n            </div>\n            <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n            <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n          </section>\n        </section>\n\n        <!-- ViewBase data -->\n        <div class=\"d-none\" id=\"view-data-data\">\n          <for-each select=\"/data/@*\"\n              ><attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute\n          ></for-each>\n        </div>\n      <div class=\"d-none\" id=\"view-data-session\">\n          <for-each select=\"/data/SessionDetail/Sessions/@*\"\n              ><attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute\n          ></for-each>\n      </div>\n      <div class=\"d-none\" id=\"view-data-userdetail\">\n          <for-each select=\"/data/userdetail/@*\"\n              ><attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute\n          ></for-each>\n      </div>\n      <div class=\"d-none\" id=\"view-data-agencyinfo\">\n          <for-each select=\"/data/agencyinfo/@*\"\n              ><attribute name=\"data-{name()}\"><value-of select=\".\" /></attribute\n          ></for-each>\n      </div>\n      <if test=\"/data/@dataid != 0\">\n          <div class=\"d-none\" id=\"view-data-recorddata\">\n              <for-each select=\"/data/*[starts-with(name(), 'table_')]\">\n                  <div class=\"d-none view-data-recorddata\">\n                      <for-each select=\"@*\">\n                          <attribute name=\"data-{name()}\">\n                              <value-of select=\".\" />\n                          </attribute>\n                      </for-each>\n                      <attribute name=\"data-tablename\"><value-of select=\"local-name()\" /></attribute>\n                  </div>\n              </for-each>\n          </div>\n      </if>\n      </main>\n      <div class=\"input-delete-flag\">\n        <boardpermission name=\"Delete\">\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\"/>\n        </boardpermission>\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\"/>\n      </div>\n      <grouplist/>\n      <div class=\"d-none\">  \n        <div class=\"form-row\">\n          <div class=\"form-group col-12\">\n            <label class=\"form-label\">Entity Group</label>\n            <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\n            <if test=\"not(//*[@entity_group])\">\n              <attribute name=\"value\">\n                <for-each select=\"/data/groups\">\n                  <choose>\n                    <when test=\"starts-with(@name,'Entity -')\">\n                      <value-of select=\"@name\" />\n                    </when>\n                  </choose>\n                </for-each>\n              </attribute>\n            </if>\n            </input>\n          </div>\n        </div>\n      </div>\n    </form>\n    <div class=\"d-none\">\n      <viewlink name=\"List - Subcontractors - All\" table=\"Subcontractors\">List - Subcontractors - All</viewlink>\n      <viewlink name=\"List - Team Members\" table=\"Team Members\">List - Team Members</viewlink>\n      <viewlink name=\"List - Equipment\" table=\"Equipment\">List - Equipment</viewlink>\n      <viewlink name=\"List - Crews\" table=\"Crews\">List - Crew</viewlink>\n      <viewlink name=\"Input - Crew\" table=\"Crews\">Input - Crew</viewlink>\n      <viewlink name=\"Input - Team Member\" table=\"Team Members\">Input - Team Member</viewlink>\n      <viewlink name=\"Input - Equipment\" table=\"Equipment\">Input - Equipment</viewlink>\n      <viewlink name=\"Input - Subcontractor Rates\" table=\"Subcontractors\">Input - Subcontractor Rates</viewlink>\n      <span id=\"recordId\">\n        <value-of select=\"//@dataid\"/>\n      </span>\n      <span id=\"fkSubcontractors\">\n        <foreignkeyreference table=\"Subcontractors\"/>\n      </span>\n      <span id=\"fkEquipment\">\n        <foreignkeyreference table=\"Equipment\"/>\n      </span>\n      <span id=\"fkCrew\">\n        <foreignkeyreference table=\"Crews\"/>\n      </span>\n      <span id=\"boardName\"><boardname/></span>\n    </div>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    <script src=\"https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js\"/>\n    <script src=\"https://cdn.datatables.net/2.2.2/js/dataTables.js\"/>\n    <script boardresource=\"datatables.min.js\"/>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script boardresource=\"subEntityArray.js\" type=\"text/javascript\"/>\n    <script boardresource=\"rateFields.js\" type=\"text/javascript\"/>\n\n      \n    \n    <script type=\"text/javascript\">\n      (function () {\n        const fkCrewTable = '<foreignkeyreference table=\"Crews\"/>'\n        const fkSubcontractorTable = document.querySelector('#fkSubcontractors').innerHTML\n        const view = WebEOCCXD.ViewBase.initialize();\n        const { data } = view.data;\n        const currentPositionName = data.positionname;\n        const dataId = data.dataid;\n        const currentBoardName = document.querySelector('#boardName').textContent;\n        const subbieInput = document.getElementById(\"subcontractor_name\");\n        const entityValue = document.querySelector('#entity_group');\n        let isLocked = document.getElementById('locked')?.checked;\n        let isRecordApproved = document.getElementById('record_approval_status')?.value === \"Approved\";\n        let workbook;\n        let personnelData = [];\n        let equipmentData = [];\n        let crewsUnderThisSubbie = [];\n        let currentPersonnelId;\n        let currentEquipmentId;\n        let entityGroup = entityValue.value;\n\n        subbieInput.addEventListener(\"change\", function(e){\n            var value = e.target.value\n            var entityObj = subEntityArray.filter((x) => x[value]);\n            var entityVal = Object.values(entityObj[0]);\n            entityGroup = entityVal[0];\n            entityValue.setAttribute(\"value\", entityVal[0]);\n        })\n\n        const inputSubcontractorApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Subcontractor' });\n        const inputRatesApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Subcontractor Rates' });\n        const inputCrewApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Crew' });\n        const inputTeamMemberApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Team Member' });\n        const inputEquipmentApi = new WebEOCCXD.WebEOCAPI({ inputViewName: 'Input - Equipment' });\n        const listCrewApi = new WebEOCCXD.WebEOCAPI({\n          boardName: currentBoardName,\n          displayViewName: currentPositionName == 'Bird - Admin' || currentPositionName == 'Bird - CMD' ? 'List - Crews - All' : 'List - Crews',\n        });\n        const detailsSubcontractorsApi = new WebEOCCXD.WebEOCAPI({\n          boardName: currentBoardName,\n          displayViewName: 'List - Subcontractors - All',\n        });\n        const detailsMembersApi = new WebEOCCXD.WebEOCAPI({\n          boardName: currentBoardName,\n          displayViewName: 'Details - Team Member',\n        });\n        const detailsEquipmentApi = new WebEOCCXD.WebEOCAPI({\n          boardName: currentBoardName,\n          displayViewName: 'Details - Equipment',\n        })\n        const editMemberApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Team Member\" })\n        const editEquipmentApi = new WebEOCCXD.WebEOCAPI({ boardName: currentBoardName, inputViewName: \"Input - Equipment\" })\n\n        const viewData = view.data;\n        const viewBaseDataid = viewData.data.dataid;\n\n        if(document.querySelector(\"[name=dataid]\").value == \"\" &amp;&amp; entityValue === 'Entity - Admin') {\n            subbieInput.insertAdjacentHTML('afterbegin', '<option value=\"\" selected=\"true\">Select a Subcontractor</option>');\n        }\n\n        handleSubcontractorSelect();\n\n        view.onValidSave(function (event) {\n          return new Promise(async function (resolve, reject) {\n            document.querySelector('[name=cmdSave]').disabled = true; // Disable Save button\n\n            if (dataId == 0) {\n              const { data: subDataId, error } = await createSubcontractor();\n              if (subDataId) {\n                defaultRatesZero(subDataId);\n\n                document.querySelector('[name=dataid]').value = subDataId; // Prevent creating two subbies\n                const { data, error: errorFromResource } = await createResource(subDataId);\n                if (errorFromResource) {\n                  document.querySelector('[name=cmdSave]').removeAttribute('disabled'); // Only re-enable on error\n                  reject();\n                }\n                resolve();\n              } else {\n                document.querySelector('[name=cmdSave]').removeAttribute('disabled'); // Only re-enable on error\n                reject();\n              }\n            } else {\n              const { data, error: errorFromResource } = await createResource(viewBaseDataid);\n              if (errorFromResource) {\n                document.querySelector('[name=cmdSave]').removeAttribute('disabled'); // Only re-enable on error\n                reject();\n              }\n              resolve();\n            }\n          });\n        })\n\n        view.onInvalidSave(function (event) {\n        return new Promise(async function (resolve, reject) {\n          if(subbieInput.value == \"\") {\n            subbieInput.setAttribute(\"class\", \"form-control is-invalid\");\n            reject();\n          } else {\n            resolve();\n          }\n        })\n      })\n\n        // Fullscreen button that onclick will make the section fullscreen.\n        $('.fullscreen-button').on('click', function (element) {\n          let parentElement = document.querySelector('#fullscreen-section')\n          if (parentElement.classList.contains('fullscreen')) {\n            parentElement.classList.remove('fullscreen');\n            document.body.classList.remove('fullscreen-focus');\n          } else {\n            parentElement.classList.add('fullscreen');\n            document.body.classList.add('fullscreen-focus');\n          }\n        });\n\n        async function defaultRatesZero(dataid) {\n          const defaultValue = \"0.00\"\n          \n          let updateObj = { dataid: dataid, record: {} };\n\n          rates.forEach(field => {\n            updateObj.record[field.name] = defaultValue;\n          });\n\n          const { data, error, response } = await inputRatesApi.editRecord(updateObj);\n          if (error) {\n            console.error(\"Error setting default rates to zero:\", error);\n          } else {\n            console.log(\"Default rates set to zero successfully.\");\n          }\n        }\n\n        async function createSubcontractor() {\n          const { data, error } = await inputSubcontractorApi.addRecord({\n            'subcontractor_name': document.querySelector('[name=subcontractor_name]').value,\n            'date_submitted': document.querySelector('[name=date_submitted]').value,\n            'receiving_utility': document.querySelector('[name=receiving_utility]').value,\n            'subcontractor_lead': document.querySelector('[name=subcontractor_lead]').value,\n            'subcontractor_lead_phone': document.querySelector('[name=subcontractor_lead_phone]').value,\n            'subcontractor_email': document.querySelector('[name=subcontractor_email]').value,\n            'prepared_by': document.querySelector('[name=prepared_by]').value,\n            'expected_arrival_date_time': document.querySelector('[name=expected_arrival_date_time]').value,\n            'address': document.querySelector('[name=address]').value,\n            'entity_group': entityGroup,\n          });\n          return { data, error };\n        }\n\n        async function createResource(parentDataid) {\n          // Check if the view has any data to be saved \n          if(personnelData.length == 0 &amp;&amp; equipmentData.length == 0) {\n            return { data: parentDataid, error: null };            \n          }\n          let crewIdMap = new Map(); // Track existing or newly created crews\n          let personnelIdMap = new Map(); // Track added personnel under each crew\n          let equipmentIdMap = new Map(); // Track added equipment under each crew\n          let crewsForemans = []; // Used to create data for the foreman field in the crew table to be used in batchRecord api call\n\n          let progressContainer = document.getElementById(\"progress\");\n          progressContainer.classList.remove(\"d-none\");\n\n          let totalSteps = personnelData.length + equipmentData.length; // Total number of steps for progress\n          let step = 0;\n          \n          for (const newCrew of personnelData) {\n            step++;\n            updateProgressBar(step, totalSteps);\n            let crewId = newCrew.crew_id;\n            // 1. Check if the crew already exists, if doesn't exist, create a new one and add it to the map\n            if (!crewIdMap.has(crewId)) {\n              let existingCrew = crewsUnderThisSubbie.find(crew => crew.crew_id === crewId);\n              if (!existingCrew) {\n                let newCrewData = await addNewCrew(newCrew, parentDataid);\n                if (newCrewData) {\n                  crewIdMap.set(crewId, newCrewData);\n                } else {\n                  console.log(`Skipping crew ${crewId} due to an error in creation.`);\n                  continue; // Skip processing personnel if crew creation failed\n                }\n              } else {\n                // Crew already exists, so update it with Locked record and add it to the map\n                let updatedCrew = await updateCrew(existingCrew, parentDataid);\n                if(updatedCrew) {\n                  crewIdMap.set(crewId, updatedCrew);\n                }\n              }\n            }\n\n            let crewDataId = crewIdMap.get(crewId);\n            // 2. Check if the personnel already exists under the crew, if doesn't exist, create a new one and add it to the map\n            // If the personnel already exists under the crew, update it\n            let existingPersonnel = await checkExistingPersonnel(newCrew.personnel_id, crewDataId);\n            if (!existingPersonnel) {\n              let addedPersonnel = await addNewPersonnel(newCrew, crewDataId, parentDataid);\n              if (addedPersonnel) {\n                personnelIdMap.set(newCrew.personnel_id, addedPersonnel);\n                if (newCrew.crew_lead === 'Yes') {\n                  let updateForman = {\n                  dataid: crewDataId,\n                  foreman: `${newCrew.first_name} ${newCrew.last_name}`\n                };\n                crewsForemans.push(updateForman);\n                }\n              }\n            } else {\n              // Personnel already exists under the crew so update here\n              await updatePersonnel(newCrew);\n              continue;\n            }\n          }\n\n          // 3. Check if the equipment already exists under the crew, if doesn't exist, create a new one and add it to the map\n          // If the equipment already exists under the crew, update it\n          for (const newEquipment of equipmentData) {  \n            let equipmentCrewId = newEquipment.crew_id;\n            let crewDataid = crewIdMap.get(equipmentCrewId);\n\n            step++;\n            updateProgressBar(step, totalSteps);\n\n            // Don't create equipment if the crew doesn't exist\n            if (!crewIdMap.has(equipmentCrewId)) {\n              console.log(`Skipping equipment ${newEquipment.equipment}, crew ${equipmentCrewId} does not exist.`);\n              continue;\n            }\n\n            // 4?. Check if the equipment already exists under the assigned crew\n            let existingEquipment = await checkExistingEquipment(newEquipment.equipment, equipmentCrewId);\n            if (!existingEquipment) {\n              let addedEquipment = await addNewEquipment(newEquipment, crewDataid, parentDataid);\n              if (addedEquipment) {\n                equipmentIdMap.set(`${equipmentCrewId}_${newEquipment.equipment}`, addedEquipment);\n              } else {\n                console.error('Error adding equipment', newEquipment.equipment);\n              }\n            } else {\n              const res = await updateEquipment(newEquipment, equipmentCrewId);\n            }\n          }\n          await batchUpdateCrewForemans(crewsForemans);\n          progressContainer.style.display = \"none\";\n          return { data: parentDataid, error: null };\n        }\n\n        function updateProgressBar(currentStep, totalSteps) {\n          let progress = (currentStep / totalSteps) * 100;\n          let progressBar = document.getElementById(\"progress-bar\");\n          progressBar.style.width = progress + \"%\";\n          progressBar.setAttribute(\"aria-valuenow\", progress);\n        }\n\n        async function getAllMembers() {\n          const { data, error, response } = await detailsMembersApi.getRecords().then(res => res);\n          return data;\n        } \n\n      \n        async function addNewCrew(crew, parentDataid) {\n          try {\n              const { data: crewDataId, response } = await inputCrewApi.addRecord({\n                  'crew_id': crew.crew_id,\n                  'team_type': crew.team_type,\n                  \"locked\": isLocked,\n                  \"record_approval_status\": isRecordApproved,\n                  \"entity_group\": entityGroup,\n                  '<foreignkeyreference table=\"Subcontractors\" />': parentDataid\n              });\n              return response.ok ? crewDataId : null;\n          } catch (error) {\n              console.error(`Error adding crew ${crew.crew_id}:`, error);\n              return null;\n          }\n        }\n\n        async function updateCrew(crew, parentDataid) {\n          try {\n            const { data: crewDataId, response } = await inputCrewApi.editRecord({\n              dataid: crew.dataid, record: {\n                ...crew, \n                \"locked\": isLocked,\n                \"record_approval_status\": isRecordApproved, \n                '<foreignkeyreference table=\"Subcontractors\" />': parentDataid\n              }\n            });\n            return response.ok ? crewDataId : null;\n          } catch (error) {\n            console.error(`Error adding crew ${crew.crew_id}:`, error);\n            return null;\n          }\n        }\n\n        async function batchUpdateCrewForemans(batchData) {\n          try {\n            const { data: crewDataId, response } = await inputCrewApi.batchRecords(batchData);\n            return response.ok ? crewDataId : null;\n          } catch (error) {\n            console.error(`Error updating multiple crews Foremans:`, error);\n            return null;\n          }\n        }\n\n        async function checkExistingPersonnel(personnelId, crewDataId) {\n          try {\n              // Filter personnel under the specific crew.dataid\n              const {data, error, response} = await detailsMembersApi.getRecords();\n              const filteredMembers = data.filter(member => member[fkCrewTable] == crewDataId);\n              // Check if the personnel already exists under that crew\n              return filteredMembers.some(person => person.personnel_id === personnelId);\n          } catch (error) {\n              console.error(`Error checking personnel ${personnelId} under crew ${crewDataId}:`, error);\n              return false;\n          }\n        }\n\n        async function checkExistingEquipment(equipmentId, crewId) {\n            try {\n                const { data } = await detailsEquipmentApi.getRecords();\n                const filteredEquipmentByCrewId = data.filter(equip => equip.crew_id === crewId);\n                return filteredEquipmentByCrewId.some(equip => equip.equipment === equipmentId);\n            } catch (error) {\n                console.error(`Error checking equipment ${equipmentId}:`, error);\n                return false;\n            }\n        }\n\n        async function addNewPersonnel(personnel, crewId, parentDataid) {\n          try {\n            const { data, response } = await inputTeamMemberApi.addRecord({\n              ...personnel,\n              \"locked\": isLocked,\n              \"record_approval_status\": isRecordApproved,\n              \"entity_group\": entityGroup,\n              \"<foreignkeyreference table='Crews' />\": crewId,\n              \"<foreignkeyreference table='Subcontractors' />\": parentDataid\n            });\n            return response.ok ? data : null;\n          } catch (error) {\n            console.error(`Error adding personnel ${personnel.personnel_id}:`, error);\n            return null;\n          }\n        }\n\n\n        async function updatePersonnel(person) {\n          try {\n            const { data, response } = await inputTeamMemberApi.editRecord({ dataid: person.dataid, record: { ...person, \"locked\": isLocked, \"record_approval_status\": isRecordApproved } });\n            return response.ok ? data : null;\n          } catch (error) {\n            console.error(`Error updating Person ${person.personnel_id}:`, error);\n            return null;\n          }\n        }\n\n\n        async function addNewEquipment(equipment, crewDataId, subbieDataid) {\n          try {\n            const { data, response, error } = await inputEquipmentApi.addRecord({\n                ...equipment,\n                \"locked\": isLocked,\n                \"record_approval_status\": isRecordApproved,\n                \"entity_group\": entityGroup,\n                \"<foreignkeyreference table='Crews' />\": crewDataId, \n                \"<foreignkeyreference table='Subcontractors' />\": subbieDataid\n            });\n            return response.ok ? data : null;\n          } catch (error) {\n            console.error(`Error adding equipment ${equipment.equipment}:`, error);\n            return null;\n          }\n        }\n\n        async function updateEquipment(equipment, crewId) {\n          try {\n            const { data, response } = await inputEquipmentApi.editRecord({dataid: equipment.dataid, record: {...equipment, \"locked\": isLocked, \"record_approval_status\": isRecordApproved}});\n            return response.ok ? data : null;\n          } catch (error) {\n            console.error(`Error updating equipment ${equipment.equipment}:`, error);\n            return null;\n          }\n        }\n\n        async function loadSubcontractorData() {\n          try {\n            const { data, error } = await listCrewApi.getRecords();\n            crewsUnderThisSubbie = data.filter(crew => crew[fkSubcontractorTable] === dataId);\n            const { data: allPersonnelData, error: personnelError } = await detailsMembersApi.getRecords();           \n            const { data: allEquipmentData, error: equipmentError } = await detailsEquipmentApi.getRecords();\n            if(error || personnelError || equipmentError) {\n              console.error(\"Error getting data:\", error);\n              return;\n            }\n\n            let tableData = [];\n\n            crewsUnderThisSubbie.forEach(crew => {\n              const matchingPersonnel = allPersonnelData.filter(person => person[fkCrewTable] === crew.dataid);\n              if (matchingPersonnel.length > 0) {\n                // Add each matching personnel to the table data\n                matchingPersonnel.forEach(person => {\n                  tableData.push({\n                    crew_id: crew.crew_id,\n                    team_type: crew.team_type,\n                    dataid: person.dataid,\n                    personnel_id: person.personnel_id,\n                    first_name: person.first_name,\n                    last_name: person.last_name,\n                    email: person.email || '',\n                    cell_phone: person.cell_phone || '',\n                    gender: person.gender || '',\n                    team_lead: person.team_lead || '',\n                    crew_lead: person.crew_lead || '',\n                    departure_city: person.departure_city || '',\n                    departure_state: person.departure_state || '',\n                    resource_type: person.resource_type || ''\n                  });\n                });\n              } else {\n                // If no personnel, add an empty entry with the crew's details\n                tableData.push({\n                  crew_id: crew.crew_id,\n                  team_type: crew.team_type,\n                  personnel_id: '',\n                  first_name: '',\n                  last_name: '',\n                  email: '',\n                  cell_phone: '',\n                  gender: '',\n                  team_lead: '',\n                  crew_lead: '',\n                  departure_city: '',\n                  departure_state: '',\n                  resource_type: ''\n                });\n              }\n            });\n            personnelData = [...personnelData, ...tableData];\n            initTableCrew(tableData, true);\n                    \n            equipmentData = allEquipmentData.filter(equipment =>\n              crewsUnderThisSubbie.some(crew => crew.dataid === equipment[fkCrewTable])\n            );\n\n            if (equipmentData.length > 0) {\n              initTableEquipment(equipmentData, true);\n            } else {\n              initTableEquipment([], false);\n            }\n\n          } catch (error) {\n            console.error(\"Error loading subcontractor data:\", error);\n          }\n        }\n\n\n      function addCell(tr, content, colSpan = 1) {\n        let td = document.createElement('th');\n\n        td.colSpan = colSpan;\n        td.textContent = content;\n\n        tr.appendChild(td);\n      }\n\n      function initTableCrew(tableData, useTableNames) {\n        const tableFields = [\n          {\n            name: 'Crew ID',\n            label: 'Crew ID',\n          },\n          {\n            name: 'Personnel ID',\n            label: 'Personnel ID',\n            multiEditable: false\n          },\n          {\n            name: 'Last Name',\n            label: 'Last Name',\n            multiEditable: false\n          },\n          {\n            name: 'First Name',\n            label: 'First Name',\n            multiEditable: false\n          },\n          {\n            name: 'Email',\n            label: 'Email',\n            multiEditable: false\n          },\n          {\n            name: 'Cell Phone',\n            label: 'Cell Phone',\n            multiEditable: false\n          },\n          {\n            name: 'Gender',\n            label: 'Gender',\n            type: 'select',\n            options: ['Male', 'Female'],\n            multiEditable: false\n          },\n          {\n            name: 'Crew Lead / Foreman (Y/N)',\n            label: 'Crew Lead / Foreman',\n            type: 'select',\n            options: ['No', 'Yes']\n          },\n          {\n            name: 'Team Type',\n            label: 'Team Type',\n            type: 'select',\n            options: [\"Damage Assessors\", \"Line\", \"Logisitics\", \"Network UG\", \"Other\", \"Safety\", \"Service\", \"Storm Management\", \"Substation\", \"Transmission\", \"Vegetation\"]\n          },\n            {\n            name: 'Resource Type / Classification',\n            label: 'Resource Type / Classification',\n            type: 'select',\n            options: [\n              \"Apprentice 1\",\n              \"Apprentice 2\",\n              \"Apprentice 3\",\n              \"Apprentice 4\",\n              \"Apprentice 5\",\n              \"Apprentice 6\",\n              \"Apprentice 7\",\n              \"Assessor\",\n              \"Crew Lead\",\n              \"Crew Supervisor\",\n              \"Driver\",\n              \"Foreman\",\n              \"General Foreman\",\n              \"Groundman\",\n              \"Lineman\",\n              \"Logistics Support\",\n              \"Mechanic\",\n              \"Operator\",\n              \"Safety\",\n              \"Superintendent\",\n              \"Supervisor\",\n              \"Support\",\n              \" Team Lead\",\n              \"UG Lineman\",\n              \"Vegetation Trimmer\",\n              \"Wire Guards\"\n            ]\n          },\n          {\n            name: 'Departure City',\n            label: 'Departure City',\n          },\n          {\n            name: 'Departure State',\n            label: 'Departure State',\n          }\n        ];\n        const tableColumns = [\n          {\n            data: null,\n            orderable: false,\n            render: DataTable.render.select(),\n            defaultContent: ''\n          }\n        ];\n        if (useTableNames === true) {\n          for (const tableField of tableFields) {\n            tableField.name = tableField.name.split(' / ')[0].replace(/ /g, '_').toLowerCase();\n            tableColumns.push({data: tableField.name, title: tableField.label, className: '', defaultContent: ''})\n          }\n        } else {\n          for (const tableField of tableFields) {\n            tableColumns.push({data: tableField.name, title: tableField.label, className: '', defaultContent: ''});\n          }\n        }\n        const editor = new DataTable.Editor({\n          data: tableData,\n          fields: tableFields,\n          idSrc: \"personnel_id\",\n          table: '#resources'\n        });\n\n        const groupColumn = 1;\n        const teamTypeColumn = 9;\n        $('#resources').DataTable().clear();\n        $('#resources').DataTable().destroy();\n\n        var table = $('#resources').DataTable({\n          data: tableData,\n          \"columns\": tableColumns,\n          layout: {\n            topStart: {\n              buttons: [\n                { extend: 'create', editor: editor },\n                { extend: 'edit', editor: editor },\n                { extend: 'remove', editor: editor, \n                action: function (e, dt, node, config) {\n                    let selectedRows = dt.rows({ selected: true });\n                    editor.remove(selectedRows.nodes(), {\n                        title: 'Delete Record',\n                        message: 'Are you sure you want to delete the selected record?',\n                        buttons: 'Delete'\n                    }) \n                    selectedRows.data().each(function (rowData) {\n                        let dataWithDeleteFlag = { ...rowData, _webeoc_delete_flag: \"yes\" };\n                        personnelData = personnelData.map(person =>\n                            person.personnel_id === rowData.personnel_id ? {...dataWithDeleteFlag, dataid: person.dataid} : person\n                        );\n                      });\n                  }\n                 }\n              ]\n            }\n          },\n          rowGroup: {\n            startRender: function(rows, group) {\n              const rowData = rows.data()[0];\n              let tr = document.createElement('tr');\n              tr.setAttribute('class', 'group-row resource-group');\n              \n              if(rowData.personnel_id) {\n                addCell(tr, group + ': ' + rowData.team_type, 12);\n              } else {\n                addCell(tr, group + ': ' + rowData.team_type, 12);\n                document.querySelectorAll('td').forEach(td => {\n                  // Skip cells with 'sorting_1' or 'dt-select' classes\n                  if (!td.classList.contains('sorting_1') &amp;&amp; !td.classList.contains('dt-select')) {\n                    if (!td.textContent.trim()) {\n                      td.textContent = 'N/A';\n                    }\n                  }\n                });\n              }\n              return tr;\n            },\n            dataSrc: \"crew_id\",\n          },\n          order: [[groupColumn, 'asc']],\n          displayLength: 25,\n          select: {\n              style: 'os',\n              selector: 'td:first-child'\n          }\n        });\n\n        table.on('draw.dt', function () {\n          toggleInputs(isLocked);\n        })\n        // Activate an inline edit on click of a table cell, if record is not locked:\n        table.on('click', 'tbody td:not(:first-child)', function (e) {\n          if(!isLocked) {\n            editor.inline(this, {\n              onBlur: \"submit\"\n            }).on(\"submitSuccess\", function (e, json, data) {\n              personnelData = personnelData.map(person => {\n                if (person.personnel_id === data.personnel_id) {\n                  return { ...person, ...data };\n                }\n                return person;\n              })\n            });\n          }\n        });\n\n        editor.on('preSubmit', function (e, json) {\n          if (json.action === 'create') {          \n            const newData = json.data[0];\n            const requiredFields = [\"crew_id\", \"resource_type\", \"personnel_id\", \"departure_city\", \"departure_state\"];\n            let isValid = true;\n\n            requiredFields.forEach(field => {\n              if (!newData[field] || newData[field].trim() === '') {\n                  editor.error(field, \"This field is required.\");\n                  isValid = false;\n              }\n            });\n\n            // Prevent form submission if not valid\n            if (!isValid) {\n                return false;\n            }\n\n            if(personnelData.find(person => person.personnel_id === json.data[0].personnel_id)) {\n              alert(`Personnel ID: ${json.data[0].personnel_id} already exists.`);\n              return false;\n            } else {\n              personnelData.push(json.data[0]);\n            }\n          }\n          if(json.action === 'edit') {\n            personnelData = personnelData.map(person => {\n              if (person.personnel_id === currentPersonnelId) {\n                return { ...person, ...json.data[currentPersonnelId] };\n              }\n              return person;\n            })\n          }\n        })\n        editor.on('open', function ( e, type ) {\n          currentPersonnelId = editor.get().personnel_id;\n        })\n\n        const hideCSS = `\n          #resources col[data-dt-column=\"1\"], #resources tr td:nth-child(2), #resources tr th:nth-child(2) {\n            display: none;\n          }\n        `;\n        const styleSheet = document.createElement('style');\n        styleSheet.textContent = hideCSS;\n        document.head.appendChild(styleSheet);\n      }\n\n      function initTableEquipment(tableData, useTableNames) {\n        const tableFields = [\n          {\n            name: 'equipment',\n            label: 'Equipment ID',\n          },\n          {\n            name: 'Equipment Type',\n            label: 'Equipment Type',\n            type: 'select',\n            options: ['Backhoe','Backyard Machine', 'Bucket Truck - Service', 'Bucket Truck - Distribution', 'Bucket Truck - Transmission', 'Chipper', 'Digger Derrick', 'Digger Derrick-rear lot', 'Equipment Trailer', 'Hydrovac', 'Knuckle Boom Truck', 'Pickup', 'Pole Hauler', 'Pole Trailer', 'Service Truck', 'Specialty Equipment'],\n          },\n          {\n            name: 'Equipment Description',\n            label: 'Equipment Description',\n          },\n          {\n            name: 'Equipment Fuel Type',\n            label: 'Equipment Fuel Type',\n            type: 'select',\n            options: ['Unleaded', 'Diesel', 'Other', 'Not Applicable'],\n          },\n          {\n            name: 'crew_id',\n            label: 'Crew ID',\n          }\n        ];\n        const tableColumns = [\n          {\n            data: null,\n            orderable: false,\n            defaultContent: '',\n            render: DataTable.render.select()\n          }\n        ];\n        if (useTableNames === true) {\n          for (const tableField of tableFields) {\n            tableField.name = tableField.name.split(' / ')[0].replace(/ /g, '_').toLowerCase();\n            tableColumns.push({data: tableField.name, title: tableField.label, className: '', defaultContent: ''})\n          }\n        } else {\n          for (const tableField of tableFields) {\n            tableColumns.push({data: tableField.name, title: tableField.label, className: '', defaultContent: ''});\n          }\n        }\n        const editor = new DataTable.Editor({\n          data: tableData,\n          fields: tableFields,\n          idSrc: \"equipment\",\n          table: '#equipment'\n        });\n\n        const groupColumn = 4;\n        $('#equipment').DataTable().clear();\n        $('#equipment').DataTable().destroy();\n        var table = $('#equipment').DataTable({\n          data: tableData,\n          \"columns\": tableColumns,\n          layout: {\n            topStart: {\n              buttons: [\n                { extend: 'create', editor: editor },\n                { extend: 'edit', editor: editor },\n                { extend: 'remove', editor: editor,\n                  action: function (e, dt, node, config) {\n                    let selectedRows = dt.rows({ selected: true });\n                    editor.remove(selectedRows.nodes(), {\n                        title: 'Delete Record',\n                        message: 'Are you sure you want to delete the selected record(s)?',\n                        buttons: 'Delete'\n                    }) \n                    selectedRows.data().each(function (rowData) {\n                        let dataWithDeleteFlag = { ...rowData, _webeoc_delete_flag: \"yes\" };\n                        equipmentData = equipmentData.map(equipment =>\n                            equipment.equipment === rowData.equipment ? dataWithDeleteFlag : equipment\n                        );\n                    });\n                  }\n                }\n              ]\n            }\n          },\n          rowGroup: {\n            startRender: function(rows, group) {\n              let tr = document.createElement('tr');\n              tr.setAttribute('class', 'group-row equipment-group');\n              addCell(tr, group, 5);\n              return tr;\n            },\n            dataSrc: useTableNames ? 'crew_id' : 'Assigned Equipment Crew ID'\n          },\n          order: [[0, 'asc']],\n          displayLength: 25,\n          select: {\n              style: 'os',\n              selector: 'td:first-child'\n          },\n          keys: true,\n        });\n        \n        table.on('draw.dt', function () {\n          toggleInputs(isLocked);\n        });\n        // Activate an inline edit on click of a table cell\n        table.on('click', 'tbody td:not(:first-child)', function (e) {\n          if(!isLocked) {            \n            editor.inline(this, {\n              onBlur: \"submit\"\n            }).on(\"submitSuccess\", function (e, json, data) {\n              // saving changes made via the INLINE editor\n              equipmentData = equipmentData.map(item => {\n                if (item.equipment === data.equipment) {\n                  return { ...item, ...data };\n                }\n                return item;\n              })\n            });\n          }\n        });\n        editor.on('preSubmit', function (e, json, data) {\n          if(json.action === 'create') {\n            const newData = json.data[0];\n            const requiredFields = [\"equipment\", \"crew_id\"];\n            let isValid = true;\n\n            requiredFields.forEach(field => {\n              if (!newData[field] || newData[field].trim() === '') {\n                  editor.error(field, \"This field is required.\");\n                  isValid = false;\n              }\n            });\n\n            // Prevent form submission if not valid\n            if (!isValid) {\n                return false;\n            }\n\n            // Saving changes made via the NEW button\n            if(equipmentData.find(item => item.equipment === json.data[0].equipment)) {\n              editor.error('equipment', `Equipment ID: ${json.data[0].equipment} already exists.`);\n              return false;\n            } else {\n              equipmentData.push(json.data[0]);\n            }\n          }\n          if(json.action === 'edit') {\n            // Saving changes made via the EDIT button\n            equipmentData = equipmentData.map(item => {\n              if (item.equipment === currentEquipmentId) {\n                return { ...item, ...json.data[currentEquipmentId] };\n              }\n              return item;\n            })\n          }\n        })\n        editor.on('open', function ( e, type, json, data ) {\n          currentEquipmentId = editor.get().equipment;\n        })\n\n        const hideCSS = `\n          #equipment col[data-dt-column=\"5\"], #equipment tr td:nth-child(6), #equipment tr th:nth-child(6) {\n            display: none;\n          }\n        `;\n        const styleSheet = document.createElement('style');\n        styleSheet.textContent = hideCSS;\n        document.head.appendChild(styleSheet);\n      }\n\n      async function handleSubcontractorSelect() {\n        const { data, error, response } = await detailsSubcontractorsApi.getRecords();\n        if (error || !data) return;\n\n        // Get the select element for subcontractor_name\n        const subbieInput = document.getElementById(\"subcontractor_name\");\n        if (!subbieInput) return;\n\n        // Get all existing subcontractor names from API response\n        const usedNames = data.map(item => item.subcontractor_name);\n        \n        // Get the currently selected value\n        const currentValue = subbieInput.value;\n\n        // Disable options in the select that already exist in the API response\n        Array.from(subbieInput.options).forEach(option => {\n          // Don't disable the currently selected option\n          if (usedNames.includes(option.value) &amp;&amp; option.value !== currentValue) {\n            option.disabled = true;\n          } else {\n            option.disabled = false;\n          }\n        });\n      }\n\n      function mapExcelWorkbookToResourceTable (workbook) {\n        const worksheet = workbook.Sheets[workbook.SheetNames[0]];\n        const excelData = XLSX.utils.sheet_to_json(worksheet);\n        if(!excelData || !excelData.length) return;\n        const isDuplicate = personnelData.filter(item => excelData.some(excelItem => excelItem[\"Personnel ID\"] === item.personnel_id)).length > 0;\n        if(isDuplicate){\n          alert('Duplicate Personnel ID found in Excel file. Please check the file and try again.');\n          return;\n        }\n        let mappedData = excelData.map(item => ({\n          crew_id: item[\"Crew ID\"],\n          personnel_id: item[\"Personnel ID\"],\n          team_type: item[\"Team Type\"],\n          last_name: item[\"Last Name\"],\n          first_name: item[\"First Name\"],\n          gender: item[\"Gender\"],\n          departure_city: item[\"Departure City\"],\n          departure_state: item[\"Departure State\"],\n          resource_type: item[\"Resource Type\"],\n          crew_lead: item[\"Crew Lead / Foreman(Y/N)\"],\n          email: item[\"Email\"],\n          cell_phone: item[\"Cell Phone\"]\n        }));\n        personnelData = [...personnelData, ...mappedData].filter(item => item.personnel_id != \"\");\n       initTableCrew(personnelData, true);\n      }\n      function mapExcelWorkbookToEquipmentTable (workbook) {\n        const worksheet = workbook.Sheets[workbook.SheetNames[1]];\n        const excelData = XLSX.utils.sheet_to_json(worksheet);\n        if(!excelData || !excelData.length) return;\n        const isDuplicate = equipmentData.filter(item => excelData.some(excelItem => excelItem[\"Equipment ID\"] == item.equipment)).length > 0;\n        if(isDuplicate){\n          alert('Duplicate EQUIPMENT ID found in Excel file. Please check the file and try again.');\n          return;\n        }\n     \n        let mappedData = excelData.map(item =>  ({\n          crew_id: item[\"Assigned Equipment Crew ID\"],\n          equipment: item[\"Equipment ID\"],\n          equipment_type: item[\"Equipment Type\"],\n          equipment_description: item[\"Equipment Description\"],\n          equipment_fuel_type: item[\"Equipment Fuel Type\"],\n          assigned_crew_id: item[\"Assigned Equipment Crew ID\"]\n        }));\n        equipmentData = [...equipmentData, ...mappedData];\n\n        let existingCrew = crewsUnderThisSubbie.filter(crew => { return equipmentData.some(equipment => { return equipment[fkCrewTable] == crew.dataid }) });\n          if(!existingCrew) {\n            alert(`No Crew found in the equipment list under this Subcontractor. Please check the file and try again.`);\n          } else{\n            initTableEquipment(equipmentData, true);\n          }\n       }\n\n      \n      // XLSX is a global from the standalone script\n      async function handleFileAsync(e) {\n        document.querySelector('#drop_dom_container').classList.add('d-none');\n        const file = e.target.files[0];\n        const data = await file.arrayBuffer();\n        /* data is an ArrayBuffer */\n        workbook = XLSX.read(data);\n        \n        await mapExcelWorkbookToResourceTable(workbook);\n        await mapExcelWorkbookToEquipmentTable(workbook);\n      }\n      \n      input_dom_element.addEventListener(\"change\", handleFileAsync, false);\n      loadSubcontractorData();\n\n      toggleInputs(isLocked);\n      if(isRecordApproved){ toggleInputs(isRecordApproved)};\n\n      document.getElementById('locked')?.addEventListener('change', function (e) {\n        isLocked = e.target.checked;\n        toggleInputs(isLocked);\n      });\n\n      document.getElementById('record_approval_status')?.addEventListener('change', function (e) {\n        isRecordApproved = e.target.value == \"Approved\"; \n        if(isRecordApproved){\n          document.getElementById('locked').checked = true;\n          isLocked = true;\n          toggleInputs(isRecordApproved);\n        }\n      });\n\n      function toggleInputs(isLocked) {\n        const inputs = document.querySelectorAll('input:not([name=\"cmdSave\"]), select:not([name=\"record_approval_status\"]), .dt-button, .dt-select');\n        \n        inputs.forEach(input => {\n          if (input.id !== 'locked') {\n            if(isLocked != undefined){\n              input.disabled = isLocked;\n              input.classList.toggle('disabled', isLocked);\n            }\n          }\n        });\n      }\n      \n    })();\n\n    </script>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Expense",
                "table": "Expenses",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <applytheme/>\n    <div>\n      <form>\n        <updatefields>\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\n        </updatefields>\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\n            <div class=\"modal-dialog\" role=\"document\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\"/>\n                    <i class=\"material-icons\">close</i>\n                  </returnlink>\n                </div>\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this record?</div>\n                <div class=\"modal-footer\">\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\n                </div>\n              </div>\n            </div>\n          </section>\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\"/>\n        </main>\n      </form>\n      <div class=\"modal-backdrop show\"/>\n    </div>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n  </body>\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Bulk Time Entries",
                "table": "Dummy",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n        name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\"\n        href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n        media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n        path=\"/css/material-kit.min.css\" />\n</head>\n<xsl:variable name=\"subcontractorID\">\n    <value-of select=\"/data/ViewParameter[@name = 'subcontractorID']\" />\n</xsl:variable>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n        <insertfields id=\"ilvyy\">\n            <field name=\"_webeoc_delete_flag\">'no'</field>\n        </insertfields>\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n            <header class=\"container-fluid\" aria-label=\"Header\">\n                <div class=\"flex\">\n                    <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                        <agencyinfo type=\"primarylogo\" />\n                    </div>\n                    <div>\n                        <h4>Add/Edit Record</h4>\n                        <h6>Board Record</h6>\n                    </div>\n                </div>\n            </header>\n        </nav>\n        <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n            <section class=\"form-section\" id=\"info-section\">\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-12\">\n                        <div class=\"alert alert-info\" role=\"alert\">\n                            This form will create a timesheet entry for each crew member and piece of equipment assigned\n                            to the selected crew. Please provide default values for the entries below.\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <section class=\"form-section\" id=\"impo7\">\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-6\" id=\"iutarf\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"crew\">Crew</label>\n                        <xsl:element name=\"select\">\n                            <attribute name=\"class\">form-control</attribute>\n                            <attribute name=\"id\">crew</attribute>\n                            <attribute name=\"label\">Crew</attribute>\n                            <attribute name=\"required\">required</attribute>\n                        </xsl:element>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-6\" id=\"ick3l7\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"status\"\n                            id=\"itf6en\">Status</label>\n                        <select name=\"status\" class=\"form-control\" label=\"Status\" list=\"Subcontractors - Personnel Status\"\n                            id=\"status\" />\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-6\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"job_location\">\n                            Job Location\n                        </label>\n                        <input name=\"job_location\" type=\"text\" class=\"form-control\" label=\"Job Location\" id=\"job_location\" />\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-6\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"utility_name\">\n                            Utility Name\n                        </label>\n                        <input name=\"utility_name\" type=\"text\" class=\"form-control\" label=\"Utility Name\" id=\"utility_name\" />\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-4\">\n                        <label class=\"form-label\">Lodging Provided</label>\n                        <div>\n                            <div class=\"form-check form-check-radio form-check-inline\">\n                                <label class=\"form-check-label\">\n                                    <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" value=\"yes\"\n                                        label=\"Lodging Provided\" /> Yes\n                                    <span class=\"circle\"><span class=\"check\" /></span></label>\n                            </div>\n                            <div class=\"form-check form-check-radio form-check-inline\">\n                                <label class=\"form-check-label\">\n                                    <input class=\"form-check-input\" type=\"radio\" name=\"lodging\" label=\"Lodging Provided\"\n                                        value=\"no\" /> No\n                                    <span class=\"circle\"><span class=\"check\" /></span></label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" id=\"ijyjpn\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"number_of_meals_provided\" id=\"if5ibw\">Number of Meals Provided</label>\n                        <input name=\"number_of_meals_provided\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n                            label=\"Number of Meals Provided\" id=\"number_of_meals_provided\" value=\"0\" />\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" id=\"ijyjpn\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"number_of_per_diem_meals\" id=\"ih2z56\">Number of Per Diem Meals</label>\n                        <input name=\"number_of_per_diem_meals\" type=\"number\" class=\"form-control\" fieldtype=\"int\"\n                            label=\"Number of Per Diem Meals\" id=\"number_of_per_diem_meals\" value=\"0\" />\n                    </div>\n                </div>\n                <div class=\"form-row\" id=\"basicTime\">\n                    <div class=\"form-group bmd-form-group col-md-3\" id=\"ipzljw\">\n                        <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"date\"\n                            id=\"iizac7\">Date</label>\n                        <input name=\"date\" type=\"date\" class=\"form-control dpickr\" fieldtype=\"date\" label=\"Date\" required=\"required\"\n                            id=\"date\" />\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-3\" id=\"iyg9so\">\n                        <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"start_time\"\n                            id=\"ir7hw5\">Start Time</label>\n                        <div class=\"d-flex\">\n                            <input name=\"start_time\" type=\"time\" class=\"form-control\"  label=\"Start Time\" required=\"required\"\n                            id=\"start_time\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-3\" id=\"ipaco9\">\n                        <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"end_time\"\n                            id=\"ii4i5r\">End Time</label>\n                        <div class=\"d-flex\">\n                            <input name=\"end_time\" type=\"time\" class=\"form-control\"  label=\"End Time\"\n                            id=\"end_time\" required=\"required\"/>\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-3\" >\n                        <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"total_hours\"\n                            id=\"ii4i5r\">Total Hours</label>\n                        <div class=\"d-flex\">\n                            <input name=\"total_hours\" type=\"text\" class=\"form-control\"  label=\"Total Hours\" readonly=\"readonly\"\n                            id=\"total_hours\" required=\"required\"/>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-row\" id=\"basicTime\">\n                    <div class=\"form-group bmd-form-group col-12\" id=\"ipzljw\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"notes\"\n                            id=\"iizac7\">Notes</label>\n                        <textarea name=\"notes\" class=\"form-control\" label=\"Notes\" id=\"notes\" rows=\"8\" />\n                    </div>\n                </div>\n                <div class=\"form-row\" id=\"hoursType\">\n                    <choose>\n                        <when test=\"not(/data/assignedboardpermissiontags/boardpermissiontag[@name='Bird Administrator'])\">\n                            <attribute name=\"style\">display: none;</attribute>\n                        </when>\n                        <otherwise>\n                            <attribute name=\"style\">display: flex;</attribute>\n                        </otherwise>\n                    </choose>\n                    <div class=\"form-group bmd-form-group col-md-4\" >\n                        <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"standard_hours\"\n                            >Standard Time</label>\n                        <div class=\"d-flex\">\n                            <input name=\"standard_hours\" type=\"text\" class=\"form-control\" readonly=\"readonly\" label=\"Standard Time\" id=\"standard_hours\" required=\"required\" value=\"0.00\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" >\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"double_hours\"\n                        >Over Time</label>\n                        <div class=\"d-flex\">\n                            <boardpermission name=\"Bird Administrator\">\n                                <input name=\"double_hours\" type=\"text\" class=\"form-control\" label=\"Over Time\" id=\"double_hours\" value=\"0.00\"/>\n                                <notapplied>\n                                    <input name=\"double_hours\" type=\"text\" class=\"form-control\" readonly=\"readonly\" label=\"Over Time\" id=\"double_hours\" value=\"0.00\"/>\n                                </notapplied>\n                            </boardpermission>\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" >\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"premium_hours\"\n                            >Premium Time</label>\n                        <div class=\"d-flex\">\n                            <boardpermission name=\"Bird Administrator\">\n                                <input name=\"premium_hours\" type=\"text\" class=\"form-control\" label=\"Premium Time\" id=\"premium_hours\" value=\"0.00\" />\n                                <notapplied>\n                                    <input name=\"premium_hours\" type=\"text\" class=\"form-control\" readonly=\"readonly\" label=\"Premium Time\" id=\"premium_hours\" value=\"0.00\" />\n                                </notapplied>\n                            </boardpermission>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <section class=\"text-right\" aria-label=\"Footer\">\n                <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n                <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n            </section>\n        </main>\n        <div class=\"input-delete-flag\">\n            <boardpermission name=\"Delete\">\n                <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n            </boardpermission>\n            <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n                format=\"html\" />\n        </div>\n        <div style=\"display: none;\">\n            <viewlink name=\"Input - Timesheet Entry\" table=\"Timesheet Entries\" />\n            <viewlink name=\"Input - Timesheet\" table=\"Timesheets\" />\n            <viewlink name=\"List - Crews - All\" />\n            <viewlink name=\"List - Equipment - All\" />\n            <viewlink name=\"List - Team Members - All\" />\n            <foreignkey table=\"Subcontractors\" />\n        </div>\n        <div id=\"check_bird_admin\" style=\"display: none;\">\n            <boardpermission name=\"Bird Administrator\">\n                <xsl:element name=\"input\">\n                    <xsl:attribute name=\"name\">bird_admin</xsl:attribute>\n                    <xsl:attribute name=\"id\">bird_admin</xsl:attribute>\n                    <xsl:attribute name=\"value\">true</xsl:attribute>\n                </xsl:element>\n                <notapplied>\n                    <xsl:element name=\"input\">\n                        <xsl:attribute name=\"name\">bird_admin</xsl:attribute>\n                        <xsl:attribute name=\"id\">bird_admin</xsl:attribute>\n                        <xsl:attribute name=\"value\">false</xsl:attribute>\n                    </xsl:element>\n                </notapplied>\n            </boardpermission>\n        </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"\n        path=\"/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"\n        path=\"/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n        path=\"/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n        path=\"/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n        path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n        path=\"/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n        path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n        path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n        path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n        path=\"/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n        path=\"/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n        path=\"/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n        path=\"/js/ux-webeoc-board-standards.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script type=\"text/javascript\" boardresource=\"Hours.js\"></script>\n    <!-- \n    TODO: \n        Create 1 Timesheet Record.\n        Create a Timesheet Entry record for each person and piece of equipment in the selected crew. \n    -->\n    <script>\n        window.onload = async function () {\n            const view = WebEOCCXD.ViewBase.initialize();\n\n            const listCrewApi = new WebEOCCXD.WebEOCAPI({\n                displayViewName: 'List - Crews - All'\n            });\n            const listMembersApi = new WebEOCCXD.WebEOCAPI({\n                displayViewName: 'List - Team Members - All'\n            });\n            const listEquipmentApi = new WebEOCCXD.WebEOCAPI({\n                displayViewName: 'List - Equipment - All'\n            })\n            const inputMembersApi = new WebEOCCXD.WebEOCAPI({\n                inputViewName: 'Input - Timesheet Entry'\n            });\n            const inputTimesheetApi = new WebEOCCXD.WebEOCAPI({\n                inputViewName: 'Input - Timesheet'\n            });\n            const inputCrewApi = new WebEOCCXD.WebEOCAPI({\n                inputViewName: 'Input - Crew Timesheet'\n            });\n\n            const { data: listCrewData } = await listCrewApi.getRecords({ '<foreignkeyreference table=\"Subcontractors\" />': '<value-of select=\"$subcontractorID\" />' });\n\n            const crewSelect = document.getElementById('crew');\n            const blankOption = document.createElement('option');\n            blankOption.value = '';\n            blankOption.text = '';\n            crewSelect.appendChild(blankOption);\n            \n            listCrewData.forEach(crew => {\n                const option = document.createElement('option');\n                option.value = crew.dataid;\n                option.text = crew.crew_id;\n                crewSelect.appendChild(option);\n            });\n\n\n            initHours();\n\n            \n            view.onValidSave(function () {\n                document.querySelector('[name=\"cmdSave\"]').disabled = 'true';\n\n                return new Promise(async function (resolve, reject) {\n                    const selectedCrewId = document.getElementById('crew').value;\n                    try {\n                        // Create a timesheet record first.\n                        const timesheetData = {\n                            date: document.querySelector('[name=\"date\"]').value,\n                            approval_status: '',\n                            job_location: document.querySelector('[name=\"job_location\"]').value,\n                            utility_name: document.querySelector('[name=\"utility_name\"]').value,\n                            notes: document.querySelector('[name=\"notes\"]').value,\n                            '<foreignkeyreference table=\"Crews\" />': selectedCrewId\n                        };\n\n                        const timesheetDataid = await inputTimesheetApi.addRecord(timesheetData);\n\n                        const { data: teamMemberData } = await listMembersApi.getRecords({ '<foreignkeyreference table=\"Crews\" />': selectedCrewId });\n                        const { data: equipmentData } = await listEquipmentApi.getRecords({ '<foreignkeyreference table=\"Crews\" />': selectedCrewId });\n\n                        // // Create time entry record for team members.\n                        for (const tm of teamMemberData) {\n                            let updateData = {\n                                type: 'Personnel',\n                                personnel_id: tm.personnel_id,\n                                first_name: tm.first_name,\n                                last_name: tm.last_name,\n                                status: document.querySelector('[name=\"status\"]').value,\n                                lodging: document.querySelector('[name=\"lodging\"]').value,\n                                start_time: document.querySelector('[name=\"start_time\"]').value,\n                                end_time: document.querySelector('[name=\"end_time\"]').value,\n                                classification: tm.resource_type,\n                                crew_lead: tm.crew_lead,\n                                number_of_meals_provided: document.querySelector('[name=\"number_of_meals_provided\"]').value,\n                                number_of_per_diem_meals: document.querySelector('[name=\"number_of_per_diem_meals\"]').value,\n                                total_hours: document.querySelector('[name=\"total_hours\"]').value,\n                                standard_hours: document.querySelector('[name=\"standard_hours\"]').value,\n                                double_hours: document.querySelector('[name=\"double_hours\"]').value,\n                                premium_hours: document.querySelector('[name=\"premium_hours\"]').value,\n                                '<foreignkeyreference table=\"Timesheets\" />': timesheetDataid.data\n                            };\n                            console.log(updateData);\n\n                            await inputMembersApi.addRecord(updateData);\n                        }\n\n                        // Create time entry record for equipment.\n                        equipmentData.forEach(async function (eq) {\n                            let updateData = {\n                                type: 'Equipment',\n                                equipment_description: eq.equipment_description,\n                                equipment_number: eq.equipment,\n                                equipment_fuel_type: eq.equipment_fuel_type,\n                                equipment_type: eq.equipment_type,\n                                start_time: document.querySelector('[name=\"start_time\"]').value,\n                                end_time: document.querySelector('[name=\"end_time\"]').value,\n                                total_hours: document.querySelector('[name=\"total_hours\"]').value,\n                                '<foreignkeyreference table=\"Timesheets\" />': timesheetDataid.data\n                            };\n\n                            await inputMembersApi.addRecord(updateData);\n                        });\n\n                        resolve();\n                    } catch (error) {\n                        reject(error);\n                    }\n                });\n            });\n\n\n            \n        }\n    </script>\n</body>\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Subcontractor Rates",
                "table": "Subcontractors",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n    <link rel=\"stylesheet\" boardresource=\"datatables.min.css\"/>\n\n</head>\n<style>\n  .form-row:nth-of-type(even) {\n    background-color: #f5f5f5;\n  }\n\n  #drop_dom_element {\n    border: 1px solid #000;\n    padding: 2rem;\n    width: 100%;\n    text-align: center;\n    display: block;\n    border-radius: 2rem;\n    position: relative;\n  }\n\n  #drop_dom_element input[type=\"file\"] {\n    z-index: 1000 !important;\n  }\n</style>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <applytheme />\n  <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n    <insertfields id=\"ispd9\">\n      <field name=\"_webeoc_delete_flag\">'no'</field>\n    </insertfields>\n    <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n      <header class=\"container-fluid\" aria-label=\"Header\">\n        <div class=\"flex\">\n          <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n            <agencyinfo type=\"primarylogo\" />\n          </div>\n          <div>\n            <h4>Add/Edit Record</h4>\n            <h6>Board Record</h6>\n          </div>\n        </div>\n      </header>\n    </nav>\n    <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n      <!-- Navigation Links -->\n      <nav class=\"mb-4\" aria-label=\"Section Navigation\">\n        <div class=\"row\">\n            <div class=\"col-md-6\">\n            <h5>Personnel Rates</h5>\n            <ul class=\"list-unstyled\">\n              <li><a href=\"#apprentice1\">Apprentice 1</a></li>\n              <li><a href=\"#apprentice2\">Apprentice 2</a></li>\n              <li><a href=\"#apprentice3\">Apprentice 3</a></li>\n              <li><a href=\"#apprentice4\">Apprentice 4</a></li>\n              <li><a href=\"#apprentice5\">Apprentice 5</a></li>\n              <li><a href=\"#apprentice6\">Apprentice 6</a></li>\n              <li><a href=\"#apprentice7\">Apprentice 7</a></li>\n              <li><a href=\"#crew_lead\">Crew Lead</a></li>\n              <li><a href=\"#crew_supervisor\">Crew Supervisor</a></li>\n              <li><a href=\"#assessor\">Assessor</a></li>\n              <li><a href=\"#driver\">Driver</a></li>\n              <li><a href=\"#foreman\">Foreman</a></li>\n              <li><a href=\"#supervisor\">Supervisor</a></li>\n              <li><a href=\"#general_foreman\">General Foreman</a></li>\n              <li><a href=\"#groundman\">Groundman</a></li>\n              <li><a href=\"#ug_lineman\">UG Lineman</a></li>\n              <li><a href=\"#lineman\">Lineman</a></li>\n              <li><a href=\"#logistics_support\">Logistics Support</a></li>\n              <li><a href=\"#mechanic\">Mechanic</a></li>\n              <li><a href=\"#operator\">Operator</a></li>\n              <li><a href=\"#safety\">Safety</a></li>\n              <li><a href=\"#superintendent\">Superintendent</a></li>\n              <li><a href=\"#support\">Support</a></li>\n              <li><a href=\"#team_lead\">Team Lead</a></li>\n              <li><a href=\"#vegetation_trimmer\">Vegetation Trimmer</a></li>\n              <li><a href=\"#wire_guards\">Wire Guards</a></li>\n            </ul>\n          </div>\n          <div class=\"col-md-6\">\n            <h5>Equipment Rates</h5>\n            <ul class=\"list-unstyled\">\n              <li><a href=\"#backhoe\">Backhoe</a></li>\n              <li><a href=\"#bucket_truck_distribution\">Bucket Truck - Distribution</a></li>\n              <li><a href=\"#bucket_truck_service\">Bucket Truck - Service</a></li>\n              <li><a href=\"#bucket_truck_transmission\">Bucket Truck - Transmission</a></li>\n              <li><a href=\"#chipper\">Chipper</a></li>\n              <li><a href=\"#digger_derrick\">Digger Derrick</a></li>\n              <li><a href=\"#digger_derrick_rear_lot\">Digger Derrick-rear lot</a></li>\n              <li><a href=\"#equipment_trailer\">Equipment Trailer</a></li>\n              <li><a href=\"#knuckle_boom_truck\">Knuckle Boom Truck</a></li>\n              <li><a href=\"#pickup\">Pickup</a></li>\n              <li><a href=\"#pole_hauler\">Pole Hauler</a></li>\n              <li><a href=\"#pole_trailer\">Pole Trailer</a></li>\n              <li><a href=\"#service_truck\">Service Truck</a></li>\n              <li><a href=\"#backyard_machine\">Backyard Machine</a></li>\n              <li><a href=\"#hydrovac\">Hydrovac</a></li>\n              <li><a href=\"#specialty_equipment\">Specialty Equipment</a></li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n      <div class=\"form-section mb-3\">\n         <div class=\"form-row\" id=\"fullscreen-section\">\n              <section class=\"form-panel col-md-12\" id=\"ibdy71\">\n                <div class=\"ml-auto print-hide related-button text-right\">\n                  <a boardresource=\"Rates Template.xlsx\" type=\"button\" class=\"btn btn-sm btn-primary scroll-link mb-0\">\n                    <span>Download Rates Template</span>\n                    <span class=\"material-symbols-outlined\">\n                      download\n                    </span>\n                  </a>\n                </div>\n                <div class=\"form-row mt-1\" id=\"drop_dom_container\">\n                  <div class=\"form-group bmd-form-group col-md-12\" id=\"i2d6z1\">\n                    <div id=\"drop_dom_element\" style=\"z-index: 0;\">\n                      <input type=\"file\" id=\"input_dom_element\" name=\"workbook_file\" />\n                      Drop spreadsheet here\n                    </div>\n                  </div>\n                </div>\n              </section>\n            </div> \n      </div>\n      \n      <!-- Apprentice -->\n      <section class=\"form-section\" id=\"apprentice1\">\n        <div class=\"form-header\">\n           <hr class=\"horizontal-line-break mt-3 mb-3\" />\n           <h2><b>Personnel Rates</b></h2>\n         </div>\n        <div class=\"form-header\">\n          <h4>\n            <b>Apprentice 1</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap1_std_rate\">Apprentice 1 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap1_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap1_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap1_ot_rate\">Apprentice 1 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap1_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap1_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap1_pt_rate\">Apprentice 1 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap1_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap1_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap1_std_rate\">Apprentice 1 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap1_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Utility Standard Hourly Rate\"\n              id=\"utl_ap1_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap1_ot_rate\">Apprentice 1 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap1_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Utility Overtime Hourly Rate\"\n              id=\"utl_ap1_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap1_pt_rate\">Apprentice 1 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap1_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 1 Utility Premium Hourly Rate\"\n              id=\"utl_ap1_pt_rate\" />\n          </div>\n        </div>\n      </section>\n      <!-- Apprentice 2 -->\n      <section class=\"form-section\" id=\"apprentice2\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 2</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap2_std_rate\">Apprentice 2 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap2_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap2_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap2_ot_rate\">Apprentice 2 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap2_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap2_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap2_pt_rate\">Apprentice 2 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap2_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap2_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap2_std_rate\">Apprentice 2 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap2_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Utility Standard Hourly Rate\"\n              id=\"utl_ap2_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap2_ot_rate\">Apprentice 2 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap2_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Utility Overtime Hourly Rate\"\n              id=\"utl_ap2_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap2_pt_rate\">Apprentice 2 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap2_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 2 Utility Premium Hourly Rate\"\n              id=\"utl_ap2_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Apprentice 3 -->\n      <section class=\"form-section\" id=\"apprentice3\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 3</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap3_std_rate\">Apprentice 3 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap3_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap3_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap3_ot_rate\">Apprentice 3 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap3_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap3_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap3_pt_rate\">Apprentice 3 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap3_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap3_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap3_std_rate\">Apprentice 3 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap3_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Utility Standard Hourly Rate\"\n              id=\"utl_ap3_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap3_ot_rate\">Apprentice 3 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap3_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Utility Overtime Hourly Rate\"\n              id=\"utl_ap3_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap3_pt_rate\">Apprentice 3 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap3_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 3 Utility Premium Hourly Rate\"\n              id=\"utl_ap3_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Apprentice 4 -->\n      <section class=\"form-section\" id=\"apprentice4\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 4</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap4_std_rate\">Apprentice 4 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap4_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap4_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap4_ot_rate\">Apprentice 4 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap4_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap4_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap4_pt_rate\">Apprentice 4 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap4_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap4_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap4_std_rate\">Apprentice 4 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap4_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Utility Standard Hourly Rate\"\n              id=\"utl_ap4_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap4_ot_rate\">Apprentice 4 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap4_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Utility Overtime Hourly Rate\"\n              id=\"utl_ap4_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap4_pt_rate\">Apprentice 4 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap4_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 4 Utility Premium Hourly Rate\"\n              id=\"utl_ap4_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Apprentice 5 -->\n      <section class=\"form-section\" id=\"apprentice5\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 5</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap5_std_rate\">Apprentice 5 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap5_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap5_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap5_ot_rate\">Apprentice 5 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap5_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap5_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap5_pt_rate\">Apprentice 5 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap5_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap5_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap5_std_rate\">Apprentice 5 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap5_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Utility Standard Hourly Rate\"\n              id=\"utl_ap5_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap5_ot_rate\">Apprentice 5 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap5_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Utility Overtime Hourly Rate\"\n              id=\"utl_ap5_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap5_pt_rate\">Apprentice 5 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap5_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 5 Utility Premium Hourly Rate\"\n              id=\"utl_ap5_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Apprentice 6 -->\n      <section class=\"form-section\" id=\"apprentice6\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 6</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap6_std_rate\">Apprentice 6 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap6_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap6_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap6_ot_rate\">Apprentice 6 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap6_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap6_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap6_pt_rate\">Apprentice 6 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap6_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap6_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap6_std_rate\">Apprentice 6 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap6_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Utility Standard Hourly Rate\"\n              id=\"utl_ap6_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap6_ot_rate\">Apprentice 6 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap6_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Utility Overtime Hourly Rate\"\n              id=\"utl_ap6_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap6_pt_rate\">Apprentice 6 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap6_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 6 Utility Premium Hourly Rate\"\n              id=\"utl_ap6_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Apprentice 7 -->\n      <section class=\"form-section\" id=\"apprentice7\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Apprentice 7</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap7_std_rate\">Apprentice 7 Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ap7_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Subcontractor Standard Hourly Rate\"\n              id=\"sc_ap7_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap7_ot_rate\">Apprentice 7 Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ap7_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ap7_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ap7_pt_rate\">Apprentice 7 Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ap7_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Subcontractor Premium Hourly Rate\"\n              id=\"sc_ap7_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap7_std_rate\">Apprentice 7 Utility Standard Hourly Rate</label>\n            <input name=\"utl_ap7_std_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Utility Standard Hourly Rate\"\n              id=\"utl_ap7_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap7_ot_rate\">Apprentice 7 Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ap7_ot_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Utility Overtime Hourly Rate\"\n              id=\"utl_ap7_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ap7_pt_rate\">Apprentice 7 Utility Premium Hourly Rate</label>\n            <input name=\"utl_ap7_pt_rate\" type=\"text\" class=\"form-control\" label=\"Apprentice 7 Utility Premium Hourly Rate\"\n              id=\"utl_ap7_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Crew Lead -->\n      <section class=\"form-section\" id=\"crew_lead\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Crew Lead</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cl_std_rate\">Crew Lead Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_cl_std_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Subcontractor Standard Hourly Rate\"\n              id=\"sc_cl_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cl_ot_rate\">Crew Lead Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_cl_ot_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Subcontractor Overtime Hourly Rate\"\n              id=\"sc_cl_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cl_pt_rate\">Crew Lead Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_cl_pt_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Subcontractor Premium Hourly Rate\"\n              id=\"sc_cl_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cl_std_rate\">Crew Lead Utility Standard Hourly Rate</label>\n            <input name=\"utl_cl_std_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Utility Standard Hourly Rate\"\n              id=\"utl_cl_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cl_ot_rate\">Crew Lead Utility Overtime Hourly Rate</label>\n            <input name=\"utl_cl_ot_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Utility Overtime Hourly Rate\"\n              id=\"utl_cl_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cl_pt_rate\">Crew Lead Utility Premium Hourly Rate</label>\n            <input name=\"utl_cl_pt_rate\" type=\"text\" class=\"form-control\" label=\"Crew Lead Utility Premium Hourly Rate\"\n              id=\"utl_cl_pt_rate\" />\n          </div>\n        </div>\n      </section>\n      <!-- Crew Supervisor -->\n      <section class=\"form-section\" id=\"crew_supervisor\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Crew Supervisor</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cs_std_rate\">Crew Supervisor Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_cs_std_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Subcontractor Standard Hourly Rate\"\n              id=\"sc_cs_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cs_ot_rate\">Crew Supervisor Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_cs_ot_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Subcontractor Overtime Hourly Rate\"\n              id=\"sc_cs_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_cs_pt_rate\">Crew Supervisor Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_cs_pt_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Subcontractor Premium Hourly Rate\"\n              id=\"sc_cs_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cs_std_rate\">Crew Supervisor Utility Standard Hourly Rate</label>\n            <input name=\"utl_cs_std_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Utility Standard Hourly Rate\"\n              id=\"utl_cs_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cs_ot_rate\">Crew Supervisor Utility Overtime Hourly Rate</label>\n            <input name=\"utl_cs_ot_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Utility Overtime Hourly Rate\"\n              id=\"utl_cs_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_cs_pt_rate\">Crew Supervisor Utility Premium Hourly Rate</label>\n            <input name=\"utl_cs_pt_rate\" type=\"text\" class=\"form-control\" label=\"Crew Supervisor Utility Premium Hourly Rate\"\n              id=\"utl_cs_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Assessor -->\n      <section class=\"form-section\" id=\"assessor\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Assessor</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_as_std_rate\">Assessor Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_as_std_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Subcontractor Standard Hourly Rate\"\n              id=\"sc_as_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_as_ot_rate\">Assessor Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_as_ot_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Subcontractor Overtime Hourly Rate\"\n              id=\"sc_as_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_as_pt_rate\">Assessor Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_as_pt_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Subcontractor Premium Hourly Rate\"\n              id=\"sc_as_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_as_std_rate\">Assessor Utility Standard Hourly Rate</label>\n            <input name=\"utl_as_std_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Utility Standard Hourly Rate\"\n              id=\"utl_as_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_as_ot_rate\">Assessor Utility Overtime Hourly Rate</label>\n            <input name=\"utl_as_ot_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Utility Overtime Hourly Rate\"\n              id=\"utl_as_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_as_pt_rate\">Assessor Utility Premium Hourly Rate</label>\n            <input name=\"utl_as_pt_rate\" type=\"text\" class=\"form-control\" label=\"Assessor Utility Premium Hourly Rate\"\n              id=\"utl_as_pt_rate\" />\n          </div>\n        </div>\n      </section>\n      <!-- Driver -->\n      <section class=\"form-section\" id=\"driver\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Driver</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_dr_std_rate\">Driver Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_dr_std_rate\" type=\"text\" class=\"form-control\" label=\"Driver Subcontractor Standard Hourly Rate\"\n              id=\"sc_dr_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_dr_ot_rate\">Driver Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_dr_ot_rate\" type=\"text\" class=\"form-control\" label=\"Driver Subcontractor Overtime Hourly Rate\"\n              id=\"sc_dr_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_dr_pt_rate\">Driver Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_dr_pt_rate\" type=\"text\" class=\"form-control\" label=\"Driver Subcontractor Premium Hourly Rate\"\n              id=\"sc_dr_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_dr_std_rate\">Driver Utility Standard Hourly Rate</label>\n            <input name=\"utl_dr_std_rate\" type=\"text\" class=\"form-control\" label=\"Driver Utility Standard Hourly Rate\"\n              id=\"utl_dr_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_dr_ot_rate\">Driver Utility Overtime Hourly Rate</label>\n            <input name=\"utl_dr_ot_rate\" type=\"text\" class=\"form-control\" label=\"Driver Utility Overtime Hourly Rate\"\n              id=\"utl_dr_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_dr_pt_rate\">Driver Utility Premium Hourly Rate</label>\n            <input name=\"utl_dr_pt_rate\" type=\"text\" class=\"form-control\" label=\"Driver Utility Premium Hourly Rate\"\n              id=\"utl_dr_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Foreman -->\n      <section class=\"form-section\" id=\"foreman\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Foreman</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_fm_std_rate\">Foreman Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_fm_std_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Subcontractor Standard Hourly Rate\"\n              id=\"sc_fm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_fm_ot_rate\">Foreman Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_fm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Subcontractor Overtime Hourly Rate\"\n              id=\"sc_fm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_fm_pt_rate\">Foreman Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_fm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Subcontractor Premium Hourly Rate\"\n              id=\"sc_fm_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_fm_std_rate\">Foreman Utility Standard Hourly Rate</label>\n            <input name=\"utl_fm_std_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Utility Standard Hourly Rate\"\n              id=\"utl_fm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_fm_ot_rate\">Foreman Utility Overtime Hourly Rate</label>\n            <input name=\"utl_fm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Utility Overtime Hourly Rate\"\n              id=\"utl_fm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_fm_pt_rate\">Foreman Utility Premium Hourly Rate</label>\n            <input name=\"utl_fm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Foreman Utility Premium Hourly Rate\"\n              id=\"utl_fm_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Supervisor -->\n      <section class=\"form-section\" id=\"supervisor\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Supervisor</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_sv_std_rate\">Supervisor Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_sv_std_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Subcontractor Standard Hourly Rate\"\n              id=\"sc_sv_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_sv_ot_rate\">Supervisor Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_sv_ot_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Subcontractor Overtime Hourly Rate\"\n              id=\"sc_sv_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_sv_pt_rate\">Supervisor Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_sv_pt_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Subcontractor Premium Hourly Rate\"\n              id=\"sc_sv_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_sv_std_rate\">Supervisor Utility Standard Hourly Rate</label>\n            <input name=\"utl_sv_std_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Utility Standard Hourly Rate\"\n              id=\"utl_sv_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_sv_ot_rate\">Supervisor Utility Overtime Hourly Rate</label>\n            <input name=\"utl_sv_ot_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Utility Overtime Hourly Rate\"\n              id=\"utl_sv_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_sv_pt_rate\">Supervisor Utility Premium Hourly Rate</label>\n            <input name=\"utl_sv_pt_rate\" type=\"text\" class=\"form-control\" label=\"Supervisor Utility Premium Hourly Rate\"\n              id=\"utl_sv_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- General Foreman -->\n      <section class=\"form-section\" id=\"general_foreman\">\n        <div class=\"form-header\" id=\"iwc1np\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>  \n            <b>General Foreman</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"i4y0au\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gf_std_rate\"\n              id=\"ivq22g\">General Foreman Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_gf_std_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Subcontractor Standard Hourly Rate\"\n                id=\"sc_gf_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ibhp6j\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gf_ot_rate\"\n              id=\"iht1id\">General Foreman Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_gf_ot_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Subcontractor Overtime Hourly Rate\"\n              id=\"sc_gf_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"i5tpco\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gf_pt_rate\"\n              id=\"iuh9hu\">General Foreman Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_gf_pt_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Subcontractor Premium Hourly Rate\"\n              id=\"sc_gf_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"izlef5\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gf_std_rate\"\n              id=\"iyeh3g\">General Foreman Utility Standard Hourly Rate</label>\n            <input name=\"utl_gf_std_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Utility Standard Hourly Rate\"\n              id=\"utl_gf_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"ia0047\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gf_ot_rate\"\n              id=\"i7ciil\">General Foreman Utility Overtime Hourly Rate</label>\n            <input name=\"utl_gf_ot_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Utility Overtime Hourly Rate\"\n              id=\"utl_gf_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\" id=\"iy4rdc\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gf_pt_rate\"\n              id=\"i2tul6\">General Foreman Utility Premium Hourly Rate</label>\n            <input name=\"utl_gf_pt_rate\" type=\"text\" class=\"form-control\" label=\"General Foreman Utility Premium Hourly Rate\"\n              id=\"utl_gf_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Groundman -->\n      <section class=\"form-section\" id=\"groundman\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Groundman</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gm_std_rate\">Groundman Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_gm_std_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Subcontractor Standard Hourly Rate\"\n              id=\"sc_gm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gm_ot_rate\">Groundman Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_gm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Subcontractor Overtime Hourly Rate\"\n              id=\"sc_gm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_gm_pt_rate\">Groundman Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_gm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Subcontractor Premium Hourly Rate\"\n              id=\"sc_gm_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gm_std_rate\">Groundman Utility Standard Hourly Rate</label>\n            <input name=\"utl_gm_std_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Utility Standard Hourly Rate\"\n              id=\"utl_gm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gm_ot_rate\">Groundman Utility Overtime Hourly Rate</label>\n            <input name=\"utl_gm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Utility Overtime Hourly Rate\"\n              id=\"utl_gm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_gm_pt_rate\">Groundman Utility Premium Hourly Rate</label>\n            <input name=\"utl_gm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Groundman Utility Premium Hourly Rate\"\n              id=\"utl_gm_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- UG Lineman -->\n      <section class=\"form-section\" id=\"ug_lineman\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>UG Lineman</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_uglm_std_rate\">UG Lineman Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_uglm_std_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Subcontractor Standard Hourly Rate\"\n              id=\"sc_uglm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_uglm_ot_rate\">UG Lineman Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_uglm_ot_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Subcontractor Overtime Hourly Rate\"\n              id=\"sc_uglm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_uglm_pt_rate\">UG Lineman Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_uglm_pt_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Subcontractor Premium Hourly Rate\"\n              id=\"sc_uglm_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_uglm_std_rate\">UG Lineman Utility Standard Hourly Rate</label>\n            <input name=\"utl_uglm_std_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Utility Standard Hourly Rate\"\n              id=\"utl_uglm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_uglm_ot_rate\">UG Lineman Utility Overtime Hourly Rate</label>\n            <input name=\"utl_uglm_ot_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Utility Overtime Hourly Rate\"\n              id=\"utl_uglm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_uglm_pt_rate\">UG Lineman Utility Premium Hourly Rate</label>\n            <input name=\"utl_uglm_pt_rate\" type=\"text\" class=\"form-control\" label=\"UG Lineman Utility Premium Hourly Rate\"\n              id=\"utl_uglm_pt_rate\" />\n          </div>\n        </div>\n      </section>\n      \n      <!-- Lineman -->\n      <section class=\"form-section\" id=\"lineman\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Lineman</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_lm_std_rate\">Lineman Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_lm_std_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Subcontractor Standard Hourly Rate\"\n              id=\"sc_lm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_lm_ot_rate\">Lineman Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_lm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Subcontractor Overtime Hourly Rate\"\n              id=\"sc_lm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_lm_pt_rate\">Lineman Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_lm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Subcontractor Premium Hourly Rate\"\n              id=\"sc_lm_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_lm_std_rate\">Lineman Utility Standard Hourly Rate</label>\n            <input name=\"utl_lm_std_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Utility Standard Hourly Rate\"\n              id=\"utl_lm_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_lm_ot_rate\">Lineman Utility Overtime Hourly Rate</label>\n            <input name=\"utl_lm_ot_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Utility Overtime Hourly Rate\"\n              id=\"utl_lm_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_lm_pt_rate\">Lineman Utility Premium Hourly Rate</label>\n            <input name=\"utl_lm_pt_rate\" type=\"text\" class=\"form-control\" label=\"Lineman Utility Premium Hourly Rate\"\n              id=\"utl_lm_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Logistics Support -->\n      <section class=\"form-section\" id=\"logistics_support\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Logistics Support</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ls_std_rate\">Logistics Support Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_ls_std_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Subcontractor Standard Hourly Rate\"\n              id=\"sc_ls_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ls_ot_rate\">Logistics Support Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_ls_ot_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Subcontractor Overtime Hourly Rate\"\n              id=\"sc_ls_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_ls_pt_rate\">Logistics Support Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_ls_pt_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Subcontractor Premium Hourly Rate\"\n              id=\"sc_ls_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ls_std_rate\">Logistics Support Utility Standard Hourly Rate</label>\n            <input name=\"utl_ls_std_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Utility Standard Hourly Rate\"\n              id=\"utl_ls_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ls_ot_rate\">Logistics Support Utility Overtime Hourly Rate</label>\n            <input name=\"utl_ls_ot_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Utility Overtime Hourly Rate\"\n              id=\"utl_ls_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_ls_pt_rate\">Logistics Support Utility Premium Hourly Rate</label>\n            <input name=\"utl_ls_pt_rate\" type=\"text\" class=\"form-control\" label=\"Logistics Support Utility Premium Hourly Rate\"\n              id=\"utl_ls_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Mechanic -->\n      <section class=\"form-section\" id=\"mechanic\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Mechanic</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_mech_std_rate\">Mechanic Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_mech_std_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Subcontractor Standard Hourly Rate\"\n              id=\"sc_mech_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_mech_ot_rate\">Mechanic Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_mech_ot_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Subcontractor Overtime Hourly Rate\"\n              id=\"sc_mech_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_mech_pt_rate\">Mechanic Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_mech_pt_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Subcontractor Premium Hourly Rate\"\n              id=\"sc_mech_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_mech_std_rate\">Mechanic Utility Standard Hourly Rate</label>\n            <input name=\"utl_mech_std_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Utility Standard Hourly Rate\"\n              id=\"utl_mech_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_mech_ot_rate\">Mechanic Utility Overtime Hourly Rate</label>\n            <input name=\"utl_mech_ot_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Utility Overtime Hourly Rate\"\n              id=\"utl_mech_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_mech_pt_rate\">Mechanic Utility Premium Hourly Rate</label>\n            <input name=\"utl_mech_pt_rate\" type=\"text\" class=\"form-control\" label=\"Mechanic Utility Premium Hourly Rate\"\n              id=\"utl_mech_pt_rate\" />\n          </div>\n        </div>\n      </section>\n      \n      <!-- Operator -->\n      <section class=\"form-section\" id=\"operator\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Operator</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_op_std_rate\">Operator Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_op_std_rate\" type=\"text\" class=\"form-control\" label=\"Operator Subcontractor Standard Hourly Rate\"\n              id=\"sc_op_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_op_ot_rate\">Operator Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_op_ot_rate\" type=\"text\" class=\"form-control\" label=\"Operator Subcontractor Overtime Hourly Rate\"\n              id=\"sc_op_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_op_pt_rate\">Operator Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_op_pt_rate\" type=\"text\" class=\"form-control\" label=\"Operator Subcontractor Premium Hourly Rate\"\n              id=\"sc_op_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_op_std_rate\">Operator Utility Standard Hourly Rate</label>\n            <input name=\"utl_op_std_rate\" type=\"text\" class=\"form-control\" label=\"Operator Utility Standard Hourly Rate\"\n              id=\"utl_op_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_op_ot_rate\">Operator Utility Overtime Hourly Rate</label>\n            <input name=\"utl_op_ot_rate\" type=\"text\" class=\"form-control\" label=\"Operator Utility Overtime Hourly Rate\"\n              id=\"utl_op_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_op_pt_rate\">Operator Utility Premium Hourly Rate</label>\n            <input name=\"utl_op_pt_rate\" type=\"text\" class=\"form-control\" label=\"Operator Utility Premium Hourly Rate\"\n              id=\"utl_op_pt_rate\" />\n          </div>\n        </div>\n      </section>\n     \n      <!-- Safety -->\n      <section class=\"form-section\" id=\"safety\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Safety</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_safety_std_rate\">Safety Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_safety_std_rate\" type=\"text\" class=\"form-control\" label=\"Safety Subcontractor Standard Hourly Rate\"\n              id=\"sc_safety_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_safety_ot_rate\">Safety Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_safety_ot_rate\" type=\"text\" class=\"form-control\" label=\"Safety Subcontractor Overtime Hourly Rate\"\n              id=\"sc_safety_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_safety_pt_rate\">Safety Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_safety_pt_rate\" type=\"text\" class=\"form-control\" label=\"Safety Subcontractor Premium Hourly Rate\"\n              id=\"sc_safety_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_safety_std_rate\">Safety Utility Standard Hourly Rate</label>\n            <input name=\"utl_safety_std_rate\" type=\"text\" class=\"form-control\" label=\"Safety Utility Standard Hourly Rate\"\n              id=\"utl_safety_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_safety_ot_rate\">Safety Utility Overtime Hourly Rate</label>\n            <input name=\"utl_safety_ot_rate\" type=\"text\" class=\"form-control\" label=\"Safety Utility Overtime Hourly Rate\"\n              id=\"utl_safety_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_safety_pt_rate\">Safety Utility Premium Hourly Rate</label>\n            <input name=\"utl_safety_pt_rate\" type=\"text\" class=\"form-control\" label=\"Safety Utility Premium Hourly Rate\"\n              id=\"utl_safety_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Superintendent -->\n      <section class=\"form-section\" id=\"superintendent\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Superintendent</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_superintendent_std_rate\">Superintendent Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_superintendent_std_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Subcontractor Standard Hourly Rate\"\n              id=\"sc_superintendent_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_superintendent_ot_rate\">Superintendent Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_superintendent_ot_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Subcontractor Overtime Hourly Rate\"\n              id=\"sc_superintendent_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_superintendent_pt_rate\">Superintendent Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_superintendent_pt_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Subcontractor Premium Hourly Rate\"\n              id=\"sc_superintendent_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_superintendent_std_rate\">Superintendent Utility Standard Hourly Rate</label>\n            <input name=\"utl_superintendent_std_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Utility Standard Hourly Rate\"\n              id=\"utl_superintendent_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_superintendent_ot_rate\">Superintendent Utility Overtime Hourly Rate</label>\n            <input name=\"utl_superintendent_ot_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Utility Overtime Hourly Rate\"\n              id=\"utl_superintendent_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_superintendent_pt_rate\">Superintendent Utility Premium Hourly Rate</label>\n            <input name=\"utl_superintendent_pt_rate\" type=\"text\" class=\"form-control\" label=\"Superintendent Utility Premium Hourly Rate\"\n              id=\"utl_superintendent_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Support -->\n      <section class=\"form-section\" id=\"support\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Support</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_support_std_rate\">Support Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_support_std_rate\" type=\"text\" class=\"form-control\" label=\"Support Subcontractor Standard Hourly Rate\"\n              id=\"sc_support_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_support_ot_rate\">Support Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_support_ot_rate\" type=\"text\" class=\"form-control\" label=\"Support Subcontractor Overtime Hourly Rate\"\n              id=\"sc_support_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_support_pt_rate\">Support Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_support_pt_rate\" type=\"text\" class=\"form-control\" label=\"Support Subcontractor Premium Hourly Rate\"\n              id=\"sc_support_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_support_std_rate\">Support Utility Standard Hourly Rate</label>\n            <input name=\"utl_support_std_rate\" type=\"text\" class=\"form-control\" label=\"Support Utility Standard Hourly Rate\"\n              id=\"utl_support_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_support_ot_rate\">Support Utility Overtime Hourly Rate</label>\n            <input name=\"utl_support_ot_rate\" type=\"text\" class=\"form-control\" label=\"Support Utility Overtime Hourly Rate\"\n              id=\"utl_support_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_support_pt_rate\">Support Utility Premium Hourly Rate</label>\n            <input name=\"utl_support_pt_rate\" type=\"text\" class=\"form-control\" label=\"Support Utility Premium Hourly Rate\"\n              id=\"utl_support_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Team Lead -->\n      <section class=\"form-section\" id=\"team_lead\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Team Lead</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_team_lead_std_rate\">Team Lead Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_team_lead_std_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Subcontractor Standard Hourly Rate\"\n              id=\"sc_team_lead_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_team_lead_ot_rate\">Team Lead Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_team_lead_ot_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Subcontractor Overtime Hourly Rate\"\n              id=\"sc_team_lead_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_team_lead_pt_rate\">Team Lead Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_team_lead_pt_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Subcontractor Premium Hourly Rate\"\n              id=\"sc_team_lead_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_team_lead_std_rate\">Team Lead Utility Standard Hourly Rate</label>\n            <input name=\"utl_team_lead_std_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Utility Standard Hourly Rate\"\n              id=\"utl_team_lead_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_team_lead_ot_rate\">Team Lead Utility Overtime Hourly Rate</label>\n            <input name=\"utl_team_lead_ot_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Utility Overtime Hourly Rate\"\n              id=\"utl_team_lead_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_team_lead_pt_rate\">Team Lead Utility Premium Hourly Rate</label>\n            <input name=\"utl_team_lead_pt_rate\" type=\"text\" class=\"form-control\" label=\"Team Lead Utility Premium Hourly Rate\"\n              id=\"utl_team_lead_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Vegetation Trimmer -->\n      <section class=\"form-section\" id=\"vegetation_trimmer\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Vegetation Trimmer</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_vegetation_trimmer_std_rate\">Vegetation Trimmer Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_vegetation_trimmer_std_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Subcontractor Standard Hourly Rate\"\n              id=\"sc_vegetation_trimmer_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_vegetation_trimmer_ot_rate\">Vegetation Trimmer Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_vegetation_trimmer_ot_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Subcontractor Overtime Hourly Rate\"\n              id=\"sc_vegetation_trimmer_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_vegetation_trimmer_pt_rate\">Vegetation Trimmer Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_vegetation_trimmer_pt_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Subcontractor Premium Hourly Rate\"\n              id=\"sc_vegetation_trimmer_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_vegetation_trimmer_std_rate\">Vegetation Trimmer Utility Standard Hourly Rate</label>\n            <input name=\"utl_vegetation_trimmer_std_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Utility Standard Hourly Rate\"\n              id=\"utl_vegetation_trimmer_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_vegetation_trimmer_ot_rate\">Vegetation Trimmer Utility Overtime Hourly Rate</label>\n            <input name=\"utl_vegetation_trimmer_ot_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Utility Overtime Hourly Rate\"\n              id=\"utl_vegetation_trimmer_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_vegetation_trimmer_pt_rate\">Vegetation Trimmer Utility Premium Hourly Rate</label>\n            <input name=\"utl_vegetation_trimmer_pt_rate\" type=\"text\" class=\"form-control\" label=\"Vegetation Trimmer Utility Premium Hourly Rate\"\n              id=\"utl_vegetation_trimmer_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Wire Guards -->\n      <section class=\"form-section\" id=\"wire_guards\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h4>\n            <b>Wire Guards</b>\n          </h4>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_wire_guards_std_rate\">Wire Guards Subcontractor Standard Hourly Rate</label>\n            <input name=\"sc_wire_guards_std_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Subcontractor Standard Hourly Rate\"\n              id=\"sc_wire_guards_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_wire_guards_ot_rate\">Wire Guards Subcontractor Overtime Hourly Rate</label>\n            <input name=\"sc_wire_guards_ot_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Subcontractor Overtime Hourly Rate\"\n              id=\"sc_wire_guards_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"sc_wire_guards_pt_rate\">Wire Guards Subcontractor Premium Hourly Rate</label>\n            <input name=\"sc_wire_guards_pt_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Subcontractor Premium Hourly Rate\"\n              id=\"sc_wire_guards_pt_rate\" />\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_wire_guards_std_rate\">Wire Guards Utility Standard Hourly Rate</label>\n            <input name=\"utl_wire_guards_std_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Utility Standard Hourly Rate\"\n              id=\"utl_wire_guards_std_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_wire_guards_ot_rate\">Wire Guards Utility Overtime Hourly Rate</label>\n            <input name=\"utl_wire_guards_ot_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Utility Overtime Hourly Rate\"\n              id=\"utl_wire_guards_ot_rate\" />\n          </div>\n          <div class=\"form-group bmd-form-group col-md-4\">\n            <label class=\"form-label d-flex align-items-center\" for=\"utl_wire_guards_pt_rate\">Wire Guards Utility Premium Hourly Rate</label>\n            <input name=\"utl_wire_guards_pt_rate\" type=\"text\" class=\"form-control\" label=\"Wire Guards Utility Premium Hourly Rate\"\n              id=\"utl_wire_guards_pt_rate\" />\n          </div>\n        </div>\n      </section>\n\n\n      <section class=\"form-section\" id=\"equipment_rates\">\n        <div class=\"form-header\">\n          <hr class=\"horizontal-line-break mt-3 mb-3\" />\n          <h2><b>Equipment Rates</b></h2>\n        </div>\n        <!-- Backhoe -->\n        <section class=\"form-section\" id=\"backhoe\">\n          <div class=\"form-header\">\n            <h4>\n              <b>Backhoe</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_backhoe_rate\">Backhoe Subcontractor Hourly Rate</label>\n              <input name=\"sc_backhoe_rate\" type=\"text\" class=\"form-control\"\n                label=\"Backhoe Subcontractor Hourly Rate\" id=\"sc_backhoe_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_backhoe_rate\">Backhoe Utility Hourly Rate</label>\n              <input name=\"utl_backhoe_rate\" type=\"text\" class=\"form-control\" label=\"Backhoe Utility Hourly Rate\"\n                id=\"utl_backhoe_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Bucket Truck - Distribution -->\n        <section class=\"form-section\" id=\"bucket_truck_distribution\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Bucket Truck - Distribution</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\"\n                for=\"sc_bucket_truck_distribution_rate\">Bucket Truck - Distribution Subcontractor Hourly Rate</label>\n              <input name=\"sc_bucket_truck_distribution_rate\" type=\"text\" class=\"form-control\"\n                label=\"Bucket Truck - Distribution Subcontractor Hourly Rate\" id=\"sc_bucket_truck_distribution_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_bucket_truck_distribution_rate\">Bucket Truck - Distribution Utility Hourly Rate</label>\n              <input name=\"utl_bucket_truck_distribution_rate\" type=\"text\" class=\"form-control\"\n                label=\"Bucket Truck - Distribution Utility Hourly Rate\" id=\"utl_bucket_truck_distribution_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Bucket Truck - Service -->\n        <section class=\"form-section\" id=\"bucket_truck_service\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Bucket Truck - Service</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_bucket_truck_service_rate\">Bucket Truck - Service Subcontractor Hourly Rate</label>\n              <input name=\"sc_bucket_truck_service_rate\" type=\"text\" class=\"form-control\"\n            label=\"Bucket Truck - Service Subcontractor Hourly Rate\" id=\"sc_bucket_truck_service_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_bucket_truck_service_rate\">Bucket Truck - Service Utility Hourly Rate</label>\n              <input name=\"utl_bucket_truck_service_rate\" type=\"text\" class=\"form-control\"\n            label=\"Bucket Truck - Service Utility Hourly Rate\" id=\"utl_bucket_truck_service_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Bucket Truck - Transmission -->\n        <section class=\"form-section\" id=\"bucket_truck_transmission\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Bucket Truck - Transmission</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\"\n            for=\"sc_bucket_truck_transmission_rate\">Bucket Truck - Transmission Subcontractor Hourly Rate</label>\n              <input name=\"sc_bucket_truck_transmission_rate\" type=\"text\" class=\"form-control\"\n            label=\"Bucket Truck - Transmission Subcontractor Hourly Rate\" id=\"sc_bucket_truck_transmission_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_bucket_truck_transmission_rate\">Bucket Truck - Transmission Utility Hourly Rate</label>\n              <input name=\"utl_bucket_truck_transmission_rate\" type=\"text\" class=\"form-control\"\n            label=\"Bucket Truck - Transmission Utility Hourly Rate\" id=\"utl_bucket_truck_transmission_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Chipper -->\n        <section class=\"form-section\" id=\"chipper\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Chipper</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_chipper_rate\">Chipper Subcontractor Hourly Rate</label>\n              <input name=\"sc_chipper_rate\" type=\"text\" class=\"form-control\"\n            label=\"Chipper Subcontractor Hourly Rate\" id=\"sc_chipper_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_chipper_rate\">Chipper Utility Hourly Rate</label>\n              <input name=\"utl_chipper_rate\" type=\"text\" class=\"form-control\" label=\"Chipper Utility Hourly Rate\"\n            id=\"utl_chipper_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Digger Derrick -->\n        <section class=\"form-section\" id=\"digger_derrick\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Digger Derrick</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_digger_derrick_rate\">Digger Derrick Subcontractor Hourly Rate</label>\n              <input name=\"sc_digger_derrick_rate\" type=\"text\" class=\"form-control\"\n            label=\"Digger Derrick Subcontractor Hourly Rate\" id=\"sc_digger_derrick_rate\" />\n            </div>\n           \n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_digger_derrick_rate\">Digger Derrick Utility Hourly Rate</label>\n              <input name=\"utl_digger_derrick_rate\" type=\"text\" class=\"form-control\"\n            label=\"Digger Derrick Utility Hourly Rate\" id=\"utl_digger_derrick_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Digger Derrick-rear lot -->\n        <section class=\"form-section\" id=\"digger_derrick_rear_lot\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Digger Derrick-rear lot</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\"\n            for=\"sc_digger_derrick_rear_lot_rate\">Digger Derrick-rear lot Subcontractor Hourly Rate</label>\n              <input name=\"sc_digger_derrick_rear_lot_rate\" type=\"text\" class=\"form-control\"\n            label=\"Digger Derrick-rear lot Subcontractor Hourly Rate\" id=\"sc_digger_derrick_rear_lot_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_digger_derrick_rear_lot_rate\">Digger Derrick-rear lot Utility Hourly Rate</label>\n              <input name=\"utl_digger_derrick_rear_lot_rate\" type=\"text\" class=\"form-control\"\n            label=\"Digger Derrick-rear lot Utility Hourly Rate\" id=\"utl_digger_derrick_rear_lot_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Equipment Trailer -->\n        <section class=\"form-section\" id=\"equipment_trailer\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Equipment Trailer</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_equipment_trailer_rate\">Equipment Trailer Subcontractor Hourly Rate</label>\n              <input name=\"sc_equipment_trailer_rate\" type=\"text\" class=\"form-control\"\n            label=\"Equipment Trailer Subcontractor Hourly Rate\" id=\"sc_equipment_trailer_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_equipment_trailer_rate\">Equipment Trailer Utility Hourly Rate</label>\n              <input name=\"utl_equipment_trailer_rate\" type=\"text\" class=\"form-control\"\n            label=\"Equipment Trailer Utility Hourly Rate\" id=\"utl_equipment_trailer_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Knuckle Boom Truck -->\n        <section class=\"form-section\" id=\"knuckle_boom_truck\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Knuckle Boom Truck</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_knuckle_boom_truck_rate\">Knuckle Boom Truck Subcontractor Hourly Rate</label>\n              <input name=\"sc_knuckle_boom_truck_rate\" type=\"text\" class=\"form-control\"\n            label=\"Knuckle Boom Truck Subcontractor Hourly Rate\" id=\"sc_knuckle_boom_truck_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_knuckle_boom_truck_rate\">Knuckle Boom Truck Utility Hourly Rate</label>\n              <input name=\"utl_knuckle_boom_truck_rate\" type=\"text\" class=\"form-control\"\n            label=\"Knuckle Boom Truck Utility Hourly Rate\" id=\"utl_knuckle_boom_truck_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Pickup -->\n        <section class=\"form-section\" id=\"pickup\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Pickup</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_pickup_rate\">Pickup Subcontractor Hourly Rate</label>\n              <input name=\"sc_pickup_rate\" type=\"text\" class=\"form-control\"\n            label=\"Pickup Subcontractor Hourly Rate\" id=\"sc_pickup_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_pickup_rate\">Pickup Utility Hourly Rate</label>\n              <input name=\"utl_pickup_rate\" type=\"text\" class=\"form-control\" label=\"Pickup Utility Hourly Rate\"\n            id=\"utl_pickup_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Pole Hauler -->\n        <section class=\"form-section\" id=\"pole_hauler\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Pole Hauler</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_pole_hauler_rate\">Pole Hauler Subcontractor Hourly Rate</label>\n              <input name=\"sc_pole_hauler_rate\" type=\"text\" class=\"form-control\"\n            label=\"Pole Hauler Subcontractor Hourly Rate\" id=\"sc_pole_hauler_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_pole_hauler_rate\">Pole Hauler Utility Hourly Rate</label>\n              <input name=\"utl_pole_hauler_rate\" type=\"text\" class=\"form-control\" label=\"Pole Hauler Utility Hourly Rate\"\n            id=\"utl_pole_hauler_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Pole Trailer -->\n        <section class=\"form-section\" id=\"pole_trailer\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Pole Trailer</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_pole_trailer_rate\">Pole Trailer Subcontractor Hourly Rate</label>\n              <input name=\"sc_pole_trailer_rate\" type=\"text\" class=\"form-control\"\n            label=\"Pole Trailer Subcontractor Hourly Rate\" id=\"sc_pole_trailer_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_pole_trailer_rate\">Pole Trailer Utility Hourly Rate</label>\n              <input name=\"utl_pole_trailer_rate\" type=\"text\" class=\"form-control\"\n            label=\"Pole Trailer Utility Hourly Rate\" id=\"utl_pole_trailer_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Service Truck -->\n        <section class=\"form-section\" id=\"service_truck\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Service Truck</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_service_truck_rate\">Service Truck Subcontractor Hourly Rate</label>\n              <input name=\"sc_service_truck_rate\" type=\"text\" class=\"form-control\"\n            label=\"Service Truck Subcontractor Hourly Rate\" id=\"sc_service_truck_rate\" />\n            </div>\n           \n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_service_truck_rate\">Service Truck Utility Hourly Rate</label>\n              <input name=\"utl_service_truck_rate\" type=\"text\" class=\"form-control\"\n            label=\"Service Truck Utility Hourly Rate\" id=\"utl_service_truck_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Backyard Machine -->\n        <section class=\"form-section\" id=\"backyard_machine\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Backyard Machine</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_backyard_machine_rate\">Backyard Machine Subcontractor Hourly Rate</label>\n              <input name=\"sc_backyard_machine_rate\" type=\"text\" class=\"form-control\"\n                label=\"Backyard Machine Subcontractor Hourly Rate\" id=\"sc_backyard_machine_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_backyard_machine_rate\">Backyard Machine Utility Hourly Rate</label>\n              <input name=\"utl_backyard_machine_rate\" type=\"text\" class=\"form-control\"\n                label=\"Backyard Machine Utility Hourly Rate\" id=\"utl_backyard_machine_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Hydrovac -->\n        <section class=\"form-section\" id=\"hydrovac\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Hydrovac</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_hydrovac_rate\">Hydrovac Subcontractor Hourly Rate</label>\n              <input name=\"sc_hydrovac_rate\" type=\"text\" class=\"form-control\"\n                label=\"Hydrovac Subcontractor Hourly Rate\" id=\"sc_hydrovac_rate\" />\n            </div>\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_hydrovac_rate\">Hydrovac Utility Hourly Rate</label>\n              <input name=\"utl_hydrovac_rate\" type=\"text\" class=\"form-control\"\n                label=\"Hydrovac Utility Hourly Rate\" id=\"utl_hydrovac_rate\" />\n            </div>\n          </div>\n        </section>\n\n        <!-- Specialty Equipment -->\n        <section class=\"form-section\" id=\"specialty_equipment\">\n          <div class=\"form-header\">\n            <hr class=\"horizontal-line-break mt-3 mb-3\" />\n            <h4>\n              <b>Specialty Equipment</b>\n            </h4>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"sc_specialty_equipment_rate\">Specialty Equipment Subcontractor Hourly Rate</label>\n              <input name=\"sc_specialty_equipment_rate\" type=\"text\" class=\"form-control\"\n            label=\"Specialty Equipment Subcontractor Hourly Rate\" id=\"sc_specialty_equipment_rate\" />\n            </div>\n           \n            <div class=\"form-group bmd-form-group col-md-6\">\n              <label class=\"form-label d-flex align-items-center\" for=\"utl_specialty_equipment_rate\">Specialty Equipment Utility Hourly Rate</label>\n              <input name=\"utl_specialty_equipment_rate\" type=\"text\" class=\"form-control\"\n            label=\"Specialty Equipment Utility Hourly Rate\" id=\"utl_specialty_equipment_rate\" />\n            </div>\n          </div>\n        </section>\n        </section>\n        <section class=\"text-right\" aria-label=\"Footer\">\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n        </section>\n    </main>\n    <div class=\"input-delete-flag\">\n      <boardpermission name=\"Delete\">\n        <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n      </boardpermission>\n      <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n        format=\"html\" />\n    </div>\n  </form>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\" />\n  <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n  <script src=\"https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js\"></script>\n  <script boardresource=\"datatables.min.js\"></script>\n\n\n\n    <script>\n      window.onload = async function() {\n\n      document.querySelectorAll('input[type=\"text\"]').forEach(input => {\n            input.addEventListener('input', function () {\n                filterMoneyInput(this);\n            });\n            input.addEventListener('keydown', function (event) {\n                if (!allowOnlyValidKeys(event, this)) {\n                    event.preventDefault();\n                }\n            });\n            input.addEventListener('blur', function () {\n                appendDecimalIfNeeded(this);\n            });\n        });\n\n      document.getElementById('input_dom_element').addEventListener(\"change\", handleFileAsync, false);\n\n      async function handleFileAsync(e) {\n        const file = e.target.files[0];\n        const data = await file.arrayBuffer();\n        workbook = XLSX.read(data);\n        \n        await handleImportedWorkbook(workbook);\n      }\n\n      function handleImportedWorkbook(workbook) {\n        // populate fields with data from the spreadsheet.\n        const worksheet = workbook.Sheets[workbook.SheetNames[0]];\n        const excelData = XLSX.utils.sheet_to_json(worksheet);\n\n        const formatRate = (val) => {\n            if (val === undefined || val === null || val === \"\") return \"\";\n            const num = parseFloat(val);\n            return isNaN(num) ? \"\" : num.toFixed(2);\n        };\n\n        const setFieldValue = (id, value) => {\n            const element = document.getElementById(id);\n            if (element) element.value = formatRate(value);\n        };\n\n        // Combined mappings with field patterns\n        const mappings = {\n            personnel: {\n          \"Apprentice 1\": \"ap1\",\n          \"Apprentice 2\": \"ap2\",\n          \"Apprentice 3\": \"ap3\",\n          \"Apprentice 4\": \"ap4\",\n          \"Apprentice 5\": \"ap5\",\n          \"Apprentice 6\": \"ap6\",\n          \"Apprentice 7\": \"ap7\",\n          \"Crew Lead\": \"cl\",\n          \"Crew Supervisor\": \"cs\",\n          \"Assessor\": \"as\",\n          \"Driver\": \"dr\",\n          \"Foreman\": \"fm\",\n          \"Supervisor\": \"sv\",\n          \"General Foreman\": \"gf\",\n          \"Groundman\": \"gm\",\n          \"UG Lineman\": \"uglm\",\n          \"Lineman\": \"lm\",\n          \"Logistics Support\": \"ls\",\n          \"Mechanic\": \"mech\",\n          \"Operator\": \"op\",\n          \"Safety\": \"safety\",\n          \"Superintendent\": \"superintendent\",\n          \"Support\": \"support\",\n          \"Team Lead\": \"team_lead\",\n          \"Vegetation Trimmer\": \"vegetation_trimmer\",\n          \"Wire Guards\": \"wire_guards\"\n            },\n            equipment: {\n          \"Backhoe\": \"backhoe\",\n          \"Bucket Truck ? Distribution\": \"bucket_truck_distribution\",\n          \"Bucket Truck - Distribution\": \"bucket_truck_distribution\",\n          \"Bucket Truck ? Service\": \"bucket_truck_service\",\n          \"Bucket Truck - Service\": \"bucket_truck_service\",\n          \"Bucket Truck ? Transmission\": \"bucket_truck_transmission\",\n          \"Bucket Truck - Transmission\": \"bucket_truck_transmission\",\n          \"Chipper\": \"chipper\",\n          \"Digger Derrick\": \"digger_derrick\",\n          \"Digger Derrick-rear lot\": \"digger_derrick_rear_lot\",\n          \"Equipment Trailer\": \"equipment_trailer\",\n          \"Knuckle Boom Truck\": \"knuckle_boom_truck\",\n          \"Pickup\": \"pickup\",\n          \"Pole Hauler\": \"pole_hauler\",\n          \"Pole Trailer\": \"pole_trailer\",\n          \"Service Truck\": \"service_truck\",\n          \"Backyard Machine\": \"backyard_machine\",\n          \"Hydrovac\": \"hydrovac\",\n          \"Specialty Equipment\": \"specialty_equipment\"\n            }\n        };\n\n        excelData.forEach(row => {\n            // Personnel rates\n            if (row[\"Personnel\"] &amp;&amp; mappings.personnel[row[\"Personnel\"]]) {\n                const prefix = mappings.personnel[row[\"Personnel\"]];\n                setFieldValue(`sc_${prefix}_std_rate`, row[\"Sub. ST Rate\"]);\n                setFieldValue(`sc_${prefix}_ot_rate`, row[\"Sub. OT Rate\"]);\n                setFieldValue(`sc_${prefix}_pt_rate`, row[\"Sub PT Rate\"]);\n                setFieldValue(`utl_${prefix}_std_rate`, row[\"Util. ST Rate\"]);\n                setFieldValue(`utl_${prefix}_ot_rate`, row[\"Util. OT Rate\"]);\n                setFieldValue(`utl_${prefix}_pt_rate`, row[\"Util. PT Rate\"]);\n            }\n\n            // Equipment rates  \n            if (row[\"Equipment\"] &amp;&amp; mappings.equipment[row[\"Equipment\"]]) {\n                const suffix = mappings.equipment[row[\"Equipment\"]];\n                setFieldValue(`sc_${suffix}_rate`, row[\"Sub. Rate\"]);\n                setFieldValue(`utl_${suffix}_rate`, row[\"Util. Rate\"]);\n            }\n        });\n      }\n      } \n\n        function filterMoneyInput(input) {\n            let value = input.value;\n\n            // Prevent non-numeric and multiple decimals\n            value = value.replace(/[^0-9.]/g, '');\n\n            const parts = value.split('.');\n            if (parts.length > 2) {\n                value = parts[0] + '.' + parts[1]; // remove extra decimals\n            }\n\n            // Limit to 2 decimal places\n            if (parts[1]) {\n                parts[1] = parts[1].slice(0, 2);\n                value = parts[0] + '.' + parts[1];\n            }\n\n            input.value = value;\n        }\n\n        function allowOnlyValidKeys(e, input) {\n            const key = e.key;\n            const value = input.value;\n\n            // Allow control keys\n            if (['Backspace', 'Tab', 'ArrowLeft', 'ArrowRight', 'Delete'].includes(key)) return true;\n\n            // Allow one decimal only\n            if (key === '.') {\n                return !value.includes('.');\n            }\n\n            // Allow digits\n            if (/^[0-9]$/.test(key)) {\n                // If already has decimal, limit to 2 digits after\n                const parts = value.split('.');\n                if (parts.length === 2 &amp;&amp; input.selectionStart &gt; value.indexOf('.')) {  \n                    return parts[1].length &lt; 2;\n                }\n                return true;\n            }\n\n            // Block everything else\n            return false;\n        }\n\n        function appendDecimalIfNeeded(input) {\n            let value = input.value;\n            if (value === '') return;\n            if (!value.includes('.')) {\n                input.value = value + '.00';\n            } else {\n                const parts = value.split('.');\n                if (parts.length === 2) {\n                    if (parts[1].length === 0) {\n                        input.value = parts[0] + '.00';\n                    } else if (parts[1].length === 1) {\n                        input.value = parts[0] + '.' + parts[1] + '0';\n                    } else if (parts[1].length > 2) {\n                        input.value = parts[0] + '.' + parts[1].slice(0, 2);\n                    }\n                }\n            }\n        }\n      \n\n    </script>\n</body>\n\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Equipment Time Entry",
                "table": "Timesheet Entries",
                "html": "<html>\n\n<head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n        name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\"\n        href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n        media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n        path=\"/css/material-kit.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n        <insertfields id=\"ilvyy\">\n            <field name=\"_webeoc_delete_flag\">'no'</field>\n        </insertfields>\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n            <header class=\"container-fluid\" aria-label=\"Header\">\n                <div class=\"flex\">\n                    <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                        <agencyinfo type=\"primarylogo\" />\n                    </div>\n                    <div>\n                        <h4>Add/Edit Record</h4>\n                        <h6>Board Record</h6>\n                    </div>\n                </div>\n            </header>\n        </nav>\n        <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n            <section class=\"form-section\" id=\"impo7\">\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-4\" id=\"irqmps\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"equipment_number\" id=\"iemmni\">Equipment Number</label>\n                        <input name=\"equipment_number\" type=\"text\" class=\"form-control\" label=\"Equipment Number\"\n                            id=\"equipment_number\" readonly=\"readonly\" />\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" id=\"ib23xx\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"equipment_fuel_type\" id=\"izrjhl\">Equipment Fuel Type</label>\n                        <input name=\"equipment_fuel_type\" type=\"text\" class=\"form-control\" label=\"Equipment Fuel Type\"\n                            id=\"equipment_fuel_type\" />\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-4\" id=\"isay7v\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"equipment_type\" id=\"ihits1\">Equipment Type</label>\n                        <input name=\"equipment_type\" type=\"text\" class=\"form-control\" label=\"Equipment Type\"\n                            id=\"equipment_type\" />\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-2\" id=\"iyg9so\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"start_time\"\n                            id=\"ir7hw5\">Start\n                            Time</label>\n                        <div class=\"d-flex\">\n                            <input name=\"start_time\" type=\"time\" class=\"form-control\" label=\"Start Time\" id=\"start_time\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-2\" id=\"ipaco9\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"end_time\" id=\"ii4i5r\">End\n                            Time</label>\n                        <div class=\"d-flex\">\n                            <input name=\"end_time\" type=\"time\" class=\"form-control\" label=\"End Time\" id=\"end_time\" />\n                        </div>\n                    </div>\n                    <div class=\"form-group bmd-form-group col-md-1\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"total_hours\"\n                            id=\"ii4i5r\">Total\n                            Hours</label>\n                        <div class=\"d-flex\">\n                            <input name=\"total_hours\" type=\"text\" class=\"form-control\" label=\"Total Hours\" readonly=\"readonly\"\n                                id=\"total_hours\" />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-12\" id=\"iu1gc9\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\"\n                            for=\"equipment_description\" id=\"iqj66f\">Equipment Description</label>\n                        <textarea name=\"equipment_description\" rows=\"4\" class=\"form-control\" id=\"equipment_description\"\n                            label=\"Equipment Description\" />\n                    </div>\n                </div>\n                <div class=\"form-row\">\n                    <div class=\"form-group bmd-form-group col-md-12\" id=\"inv3b7\">\n                        <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"comments\"\n                            id=\"ibk9h6\">Comments</label>\n                        <textarea name=\"comments\" rows=\"4\" class=\"form-control\" id=\"comments\" label=\"Comments\" />\n                    </div>\n                </div>\n            </section>\n            <section class=\"text-right\" aria-label=\"Footer\">\n                <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n                <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n            </section>\n        </main>\n        <div class=\"input-delete-flag\">\n            <boardpermission name=\"Delete\">\n                <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n            </boardpermission>\n            <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n                format=\"html\" />\n        </div>\n        <div>\n            <foreignkey table=\"Timesheets\" />\n        </div>\n    </form>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"\n        path=\"/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"\n        path=\"/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n        path=\"/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n        path=\"/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n        path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n        path=\"/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n        path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n        path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n        path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n        path=\"/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n        path=\"/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n        path=\"/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n        path=\"/js/ux-webeoc-board-standards.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n    <script>\n      const endTime = document.getElementById('end_time');\n            const startTime = document.getElementById('start_time');\n\n            function totalHours(startTime ,endTime) {\n                // If both start and end times are provided, calculate total hours.\n                if (endTime.value &amp;&amp; startTime.value) {\n                    \n\n                    const start = new Date(`1970-01-01T${startTime.value}`);\n                    const end = new Date(`1970-01-01T${endTime.value}`);\n                    if (end &lt; start) {\n                        end.setDate(end.getDate() + 1);\n                    }\n                    const totalHours = (end - start) / (1000 * 60 * 60); // Convert milliseconds to hours\n                    document.getElementById('total_hours').value = totalHours;\n                } else {\n                    // If either start or end time is missing, set total hours to 0.\n                    document.getElementById('total_hours').value = 0;\n                }\n            }\n\n            startTime.addEventListener('blur', function () {\n                totalHours(startTime ,endTime );\n            });\n            \n            endTime.addEventListener('blur', function () {\n                totalHours(startTime ,endTime);\n            });\n    </script>\n</body>\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Timesheet",
                "table": "Timesheets",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n   <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n   <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n      name=\"viewport\" />\n   <link rel=\"stylesheet\" media=\"all\"\n      href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n   <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n   <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n      media=\"screen\" />\n   <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n      path=\"/css/material-kit.min.css\" />\n   <link rel=\"stylesheet\" href=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/styles/index.css\" />\n</head>\n<xsl:variable name=\"partialSubbieName\" select=\"substring-after(/data/groups[starts-with(@name, 'Entity -')]/@name, 'Entity - ')\" />\n\n\n<style type=\"text/css\">\n   .signaturewrap {\n      border: 1px solid #185a7d; \n      border-width: 1px;\n      overflow: hidden;\n      height: 120px;\n      width: 655px;\n      vertical-align: bottom;\n      position: relative;\n   }\n\n   canvas {\n      cursor: crosshair;\n      height: 120px;\n      width: 655px;\n      position: absolute;\n      top: 0px;\n      left: 0px;\n   }\n</style>\n\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n   <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\n      <insertfields id=\"ilvyy\">\n         <field name=\"_webeoc_delete_flag\">'no'</field>\n      </insertfields>\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n         <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n               <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                  <agencyinfo type=\"primarylogo\" />\n               </div>\n               <div>\n                  <h4>Add/Edit Record</h4>\n                  <h6>Board Record</h6>\n               </div>\n            </div>\n         </header>\n      </nav>\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\n         <section class=\"form-section\" id=\"impo7\">\n            <boardpermission name=\"Approve Timesheet\">\n               <div class=\"form-row bg-light\">\n                  <div class=\"col-md-12 faded-grey\">\n                     <h2 class=\"section-header\">For Admin Use Only</h2>\n                  </div>\n                  <div class=\"form-group bmd-form-group col-12 d-flex align-items-center\" id=\"iz4sa\">\n                     <div class=\"col-md-2\" id=\"iz4sa\">\n                        <div class=\"form-check\">\n                           <label class=\"form-check-label  form-label\" for=\"locked\">\n                              <input type=\"checkbox\" name=\"locked\" class=\"form-check-input form-control\" label=\"Locked\" id=\"locked\"\n                                 value=\"true\" />\n                              Lock record\n                              <span class=\"form-check-sign\">\n                                 <span class=\"check\" />\n                              </span>\n                           </label>\n                        </div>\n                     </div>\n                     <div class=\"col-md-6\">\n                        <label class=\"form-label\" style=\"pointer-events: auto\">\n                           Approval Status</label>\n                        <select name=\"approval_status\" class=\"form-control bg-white\" label=\"Approval Status\" id=\"approval_status\"\n                           list=\"Subcontractors - Approval Status\" />\n                     </div>\n                  </div>\n               </div>\n            </boardpermission>\n            <div class=\"form-row\">\n               <div class=\"form-group bmd-form-group col-md-4\" id=\"datetime-group\" style=\"display: none\">\n                  <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">Foreignkey</label>\n                  <foreignkey table=\"Crews\" />\n               </div>\n               <div class=\"form-group bmd-form-group col-md-4\">\n                  <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"job_location\">\n                     Job Location\n                  </label>\n                  <input name=\"job_location\" type=\"text\" class=\"form-control\" label=\"Job Location\" id=\"job_location\" />\n               </div>\n               <div class=\"form-group bmd-form-group col-md-4\">\n                  <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"utility_name\">\n                      Utility Name\n                  </label>\n                  <input name=\"utility_name\" type=\"text\" class=\"form-control\" label=\"Utility Name\" id=\"utility_name\" />\n              </div>\n               <div class=\"form-group bmd-form-group col-md-4\" id=\"datetime-group\">\n                  <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\">Date</label>\n                  <input type=\"text\" name=\"date\" id=\"date\" class=\"form-control\" required=\"required\" label=\"Date\" />\n               </div>\n           </div>\n         <div class=\"form-row\">\n            <div class=\"form-group col-12\">\n               <label class=\"form-label\" for=\"notes\">Notes</label>\n               <textarea class=\"form-control\" name=\"notes\" id=\"notes\" rows=\"8\" />\n            </div>\n         </div>\n            <div class=\"row dst-display-row\">\n               <section class=\"col-md-12\">\n                  <div class=\"form-header\" id=\"iu5oab\">\n                     <h4>\n                        <b>\n                           Personnel Time Entries\n                        </b>\n                     </h4>\n                  </div>\n                  <div class=\"row dst-display-row\">\n                     <section aria-label=\"Table\" class=\"col mt-2\">\n                        <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                           <thead>\n                              <tr>\n                                 <th>\n                                    ID\n                                 </th>\n                                 <th>\n                                    Name\n                                 </th>\n                                 <th>\n                                    Classification\n                                 </th>\n                                 <th>\n                                    Crew Lead / Foreman\n                                 </th>\n                                 <th>\n                                    Status\n                                 </th>\n                                 <th>\n                                    In/Out\n                                 </th>\n                                 <th>\n                                    Total Hours\n                                 </th>\n                                 <th width=\"5%\" />\n                              </tr>\n                           </thead>\n                           <tbody id=\"project-data\">\n                              <relatedlist aria-label=\"Data\"\n                                 filter=\"_webeoc_delete_flag != 'Yes' and type = 'personnel'\" table=\"Timesheet Entries\"\n                                 rlid=\"1\">\n                                 <tr>\n                                    <td>\n                                       <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />\n                                    </td>\n                                    <td>\n                                       <eocfield disableclick=\"true\" name=\"last_name\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />,\n                                       <eocfield disableclick=\"true\" name=\"first_name\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />\n                                    </td>\n                                    <td>\n                                       <eocfield disableclick=\"true\" name=\"classification\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />\n                                    </td>\n                                    <td>\n                                      <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Timesheet Entries\"\n                                          type=\"rl\" /> \n                                    </td>\n                                    <td>\n                                       <eocfield disableclick=\"true\" name=\"status\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />\n                                    </td>\n                                    <td>\n                                       <value-of\n                                          select=\"concat(substring-before(@start_time, ':'), ':', substring-before(substring-after(@start_time, ':'), ':'))\" />\n                                       -\n                                       <value-of\n                                          select=\"concat(substring-before(@end_time, ':'), ':', substring-before(substring-after(@end_time, ':'), ':'))\" />\n                                    </td>\n                                    <td class=\"text-center\">\n                                       <value-of select=\"format-number(number(@total_hours), '#.##')\" />\n                                    </td>\n                                    <td class=\"text-right\">\n                                       <div class=\"dropdown cursor-pointer\">\n                                          <a data-toggle=\"dropdown\">\n                                             <b>\n                                                <i class=\"material-icons faded-grey\">\n                                                   more_horiz\n                                                </i>\n                                             </b>\n                                          </a>\n                                          <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                             <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                name=\"Details - Personnel Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                                <viewparameter name=\"timesheet_entry_type\">personnel</viewparameter>\n                                                <viewparameter name=\"locked_state\"><value-of select=\"/data//@locked\" /></viewparameter>\n                                                <span>\n                                                   View\n                                                </span>\n                                             </viewlink>\n                                             <boardpermission name=\"OPS/PLN Lead\">\n                                                <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Input - Personnel Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\"\n                                                   target=\"dialog\">\n                                                   <span>\n                                                      Edit\n                                                   </span>\n                                                </viewlink>\n                                             </boardpermission>\n                                             <boardpermission name=\"Approve Timesheet\">\n                                                <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Input - Personnel Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\"\n                                                   target=\"dialog\">\n                                                   <span>\n                                                      Edit\n                                                   </span>\n                                                </viewlink>\n                                                <div class=\"dropdown-divider\" />\n                                                <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Delete - Timesheet Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                                   Delete\n                                                </viewlink>\n                                             </boardpermission>\n                                          </div>\n                                       </div>\n                                    </td>\n                                    <td class=\"d-none\">\n                                       <eocfield disableclick=\"true\" name=\"total_hours\" table=\"Timesheet Entries\" type=\"rl\" />\n                                       <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                                       <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                                    </td>\n                                 </tr>\n                              </relatedlist>\n                           </tbody>\n                        </table>\n                     </section>\n                  </div>\n               </section>\n            </div>\n            <div class=\"row dst-display-row\">\n               <section class=\"col-md-12\">\n                  <div class=\"form-header\" id=\"iu5oab\">\n                     <h4>\n                        <b>\n                           Equipment Time Entries\n                        </b>\n                     </h4>\n                  </div>\n                  <div class=\"row dst-display-row\">\n                     <section aria-label=\"Table\" class=\"col mt-2\">\n                        <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                           <thead>\n                              <tr>\n                                 <th>\n                                    Equipment Number\n                                 </th>\n                                 <th>\n                                    Description\n                                 </th>\n                                 <th>\n                                    In/Out\n                                 </th>\n                                 <th>\n                                    Total Hours\n                                 </th>\n                                 <th width=\"5%\" />\n                              </tr>\n                           </thead>\n                           <tbody id=\"project-data\">\n                              <relatedlist aria-label=\"Data\"\n                                 filter=\"_webeoc_delete_flag != 'Yes' and type = 'equipment'\" table=\"Timesheet Entries\"\n                                 rlid=\"3\">\n                                 <tr>\n                                    <td>\n                                       <eocfield disableclick=\"true\" name=\"equipment_number\" table=\"Timesheet Entries\"\n                                          type=\"rl\" />\n                                    </td>\n                                    <td>\n                                       <if test=\"false()\">\n                                          <eocfield disableclick=\"true\" name=\"equipment_description\"\n                                             table=\"Timesheet Entries\" type=\"rl\" />\n                                       </if>\n                                       <choose>\n                                          <when test=\"string-length(@equipment_description) > 30\">\n                                             <value-of\n                                                select=\"concat(substring(@equipment_description, 1, 30), '...')\" />\n                                          </when>\n                                          <otherwise>\n                                             <value-of select=\"@equipment_description\" />\n                                          </otherwise>\n                                       </choose>\n                                    </td>\n                                    <td>\n                                       <value-of\n                                          select=\"concat(substring-before(@start_time, ':'), ':', substring-before(substring-after(@start_time, ':'), ':'))\" />\n                                       -\n                                       <value-of\n                                          select=\"concat(substring-before(@end_time, ':'), ':', substring-before(substring-after(@end_time, ':'), ':'))\" />\n                                    </td>\n                                    <td>\n                                       <value-of select=\"format-number(number(@total_hours), '#.##')\" />\n                                    </td>\n                                    <td class=\"text-right\">\n                                       <div class=\"dropdown cursor-pointer\">\n                                          <a data-toggle=\"dropdown\">\n                                             <b>\n                                                <i class=\"material-icons faded-grey\">\n                                                   more_horiz\n                                                </i>\n                                             </b>\n                                          </a>\n                                          <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                             <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                name=\"Details - Equipment Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                                <viewparameter name=\"timesheet_entry_type\">personnel</viewparameter>\n                                                <viewparameter name=\"locked_state\"><value-of select=\"/data//@locked\" /></viewparameter>\n                                                <span>\n                                                   View\n                                                </span>\n                                             </viewlink>\n                                             <boardpermission name=\"OPS/PLN Lead\">\n                                                <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Input - Equipment Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\"\n                                                   target=\"dialog\">\n                                                   <span>\n                                                      Edit\n                                                   </span>\n                                                </viewlink>\n                                             </boardpermission>\n                                             <boardpermission name=\"Approve Timesheet\">\n                                                <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Input - Equipment Time Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\"\n                                                   target=\"dialog\">\n                                                   <span>\n                                                      Edit\n                                                   </span>\n                                                </viewlink>\n                                                <div class=\"dropdown-divider\" />\n                                                <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                                   name=\"Delete - Timesheet Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                                   Delete\n                                                </viewlink>\n                                             </boardpermission>\n                                          </div>\n                                       </div>\n                                    </td>\n                                    <td class=\"d-none\">\n                                       <eocfield disableclick=\"true\" name=\"total_hours\" table=\"Timesheet Entries\" type=\"rl\" />\n                                       <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                                       <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                                    </td>\n                                 </tr>\n                              </relatedlist>\n                           </tbody>\n                        </table>\n                     </section>\n                  </div>\n               </section>\n            </div>\n            <div class=\"form-row\">\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 1</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_1_name\" name=\"attachment_1_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 1 Name\" />\n                   <input id=\"attachment_1\" name=\"attachment_1\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_1_name\" label=\"Attachment 1\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 2</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_2_name\" name=\"attachment_2_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 2 Name\" />\n                   <input id=\"attachment_2\" name=\"attachment_2\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_2_name\" label=\"Attachment 2\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 3</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_3_name\" name=\"attachment_3_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 3 Name\" />\n                   <input id=\"attachment_3\" name=\"attachment_3\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_3_name\" label=\"Attachment 3\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 4</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_4_name\" name=\"attachment_4_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 4 Name\" />\n                   <input id=\"attachment_4\" name=\"attachment_4\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_4_name\" label=\"Attachment 4\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 5</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_5_name\" name=\"attachment_5_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 5 Name\" />\n                   <input id=\"attachment_5\" name=\"attachment_5\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_5_name\" label=\"Attachment 5\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 6</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_6_name\" name=\"attachment_6_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 6 Name\" />\n                   <input id=\"attachment_6\" name=\"attachment_6\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_6_name\" label=\"Attachment 6\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 7</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_7_name\" name=\"attachment_7_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 7 Name\" />\n                   <input id=\"attachment_7\" name=\"attachment_7\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_7_name\" label=\"Attachment 7\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 8</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_8_name\" name=\"attachment_8_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 8 Name\" />\n                   <input id=\"attachment_8\" name=\"attachment_8\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_8_name\" label=\"Attachment 8\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 9</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_9_name\" name=\"attachment_9_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 9 Name\" />\n                   <input id=\"attachment_9\" name=\"attachment_9\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_9_name\" label=\"Attachment 9\" />\n                  </div>\n                </div>\n               </div>\n               <div class=\"form-group col-md-6 col-sm-12\">\n                <div class=\"form-group form-file-upload form-file-simple has-feedback\">\n                  <label class=\"form-label\">Attachment 10</label>\n                  <div class=\"input-group\">\n                   <input id=\"attachment_10_name\" name=\"attachment_10_name\" type=\"text\" class=\"form-control inputFileVisible\" placeholder=\"Click to browse\" readonly=\"readonly\" label=\"Attachment 10 Name\" />\n                   <input id=\"attachment_10\" name=\"attachment_10\" type=\"file\" class=\"inputFileHidden\" data-file-name-field=\"attachment_10_name\" label=\"Attachment 10\" />\n                  </div>\n                </div>\n               </div>   \n            </div>\n         </section>\n         <section class=\"text-right\" aria-label=\"Footer\">\n            <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\n            <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\n         </section>\n      </main>\n      <div class=\"input-delete-flag\">\n         <boardpermission name=\"Delete\">\n            <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\n         </boardpermission>\n         <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\"\n            format=\"html\" />\n      </div>\n      <grouplist/>\n      <div class=\"d-none\">  \n        <div class=\"form-row\">\n          <div class=\"form-group col-12\">\n            <label class=\"form-label\">Entity Group</label>\n            <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\n            <if test=\"not(//*[@entity_group])\">\n              <attribute name=\"value\">\n                <for-each select=\"/data/groups\">\n                  <choose>\n                    <when test=\"starts-with(@name,'Entity -')\">\n                      <value-of select=\"@name\" />\n                    </when>\n                  </choose>\n                </for-each>\n              </attribute>\n            </if>\n            </input>\n          </div>\n        </div>\n        <div class=\"form-row\">\n           <span id=\"user-data-holder\" data-dataid=\"{/data/@dataid}\" data-locked=\"{/data//@locked}\"/>\n         </div>\n      </div>\n   </form>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"\n      path=\"/js/core/jquery.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"\n      path=\"/js/core/popper.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n      path=\"/js/core/bootstrap-material-design.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n      path=\"/js/plugins/moment.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n      path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n      path=\"/js/plugins/nouislider.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n      path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n      path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n      path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n      path=\"/js/plugins/jquery.flexisel.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n      path=\"/js/plugins/jquery.sharrre.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n      path=\"/js/material-kit.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n   <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n      path=\"/js/ux-webeoc-board-standards.js\"></script>\n   <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n\n   <script type=\"text/javascript\">\n      \n      let isLockedState = $('#user-data-holder').data('locked');  \n      let isLocked = document.getElementById('locked')?.checked || Boolean(isLockedState);\n      let isRecordApproved = document.getElementById('approval_status')?.value == \"Approved\";\n      let flatpicker = flatpickr('#date', { dateFormat: 'm/d/Y' });\n      const view = WebEOCCXD.ViewBase.view;\n      \n      toggleInputs(isLocked);\n      if(isRecordApproved){ \n         toggleInputs(isRecordApproved)\n      };\n\n      document.getElementById('locked')?.addEventListener('change', function (e) {\n        isLocked = e.target.checked;\n        toggleInputs(isLocked);\n      });\n\n      document.getElementById('approval_status')?.addEventListener('change', function (e) {\n        isRecordApproved = e.target.value == \"Approved\"; \n        if(isRecordApproved){\n          document.getElementById('locked').checked = true;\n          toggleInputs(isRecordApproved);\n        } else {\n          toggleInputs(false);\n          document.getElementById('locked').checked = false;\n        }\n      });\n\n      function toggleInputs(isLockedData) {\n         let dateEl = document.getElementById('date');\n         dateEl.blur();\n        const inputs = document.querySelectorAll('input:not([name=\"cmdSave\"]), select:not([name=\"approval_status\"])');\n         const removeIcons = document.querySelectorAll('i[id*=\"_remove_ico\"]'); // The remove attachment btns next to attachment inputs.\n\n         if (isLockedData) {\n             removeIcons.forEach(ico => { ico.style.display = 'none'; });\n         } else {\n             removeIcons.forEach(ico => { ico.style.display = 'inline'; }); \n         }\n        \n        inputs.forEach(input => {\n          if (input.id !== 'locked' &amp;&amp; !input.id.includes('attachment')) {\n            input.toggleAttribute(\"readonly\", isLockedData);\n            }\n\n            if (input.id.includes('attachment')) {\n               input.disabled = isLockedData;\n            }\n         });\n\n            flatpicker.set('clickOpens', !isLockedData);\n      }\n\n        view.onValidSave(function (event) {\n            return new Promise(async function (resolve) {\n                const attachmentInputs = document.querySelectorAll('input[id*=\"attachment_\"]');\n                \n                for (input of attachmentInputs) {\n                    if (input.hasAttribute('disabled')) {\n                        input.removeAttribute('disabled'); // Remove disabled attribute to prevent nulling values on save.\n                     }\n                  }\n\n                resolve();\n            });\n        });\n   </script>\n</body>\n\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Input - Equipment",
                "table": "Equipment",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <xsl:variable name=\"partialSubbieName\" select=\"substring-after(/data/groups[starts-with(@name, 'Entity -')]/@name, 'Entity - ')\" />\r\n  <xsl:variable name=\"crewIdParam\">\r\n    <value-of select=\"/data/ViewParameter[@name = 'ownerid']\" />\r\n  </xsl:variable>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <form aria-label=\"Data\" class=\"mb-0\" id=\"input-form\">\r\n      <insertfields id=\"ilcjw\">\r\n        <field name=\"_webeoc_delete_flag\">'no'</field>\r\n      </insertfields>\r\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\r\n        <header class=\"container-fluid\" aria-label=\"Header\">\r\n          <div class=\"flex\">\r\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n              <agencyinfo type=\"primarylogo\" />\r\n            </div>\r\n            <div>\r\n              <h4>Add/Edit Equipment</h4>\r\n              <h6>Subcontractor Resources</h6>\r\n            </div>\r\n          </div>\r\n        </header>\r\n      </nav>\r\n      <main aria-label=\"Main Section\" class=\"container-fluid container-max-width pt-2 pb-2 mt-2 rounded form-border\">\r\n        <section class=\"form-section\" id=\"iwmle\">\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ie68gu\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"assigned_crew_id\" id=\"i5qn4j\">Subcontractor</label>\r\n              <foreignkey id=\"subcontractor_name\" type=\"select\" table=\"Subcontractors\"  style=\"border-radius: 4px; background-image: none; padding: 4px 12px; width:100%;\" filter=\"_webeoc_delete_flag = 'no'\">\r\n                <eocfield name=\"subcontractor_name\" type=\"fk\" table=\"Subcontractors\" />\r\n              </foreignkey>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ie68gu\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"assigned_crew_id\" id=\"i5qn4j\">Crew ID</label>\r\n              <foreignkey id=\"assigned_crew_id\" type=\"select\" table=\"Crews\"  style=\"border-radius: 4px; background-image: none; padding: 4px 12px; width:100%;\">\r\n                <eocfield name=\"crew_id\" type=\"fk\" table=\"Crews\" />\r\n              </foreignkey>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ie68gu\">\r\n              <label class=\"form-label d-flex align-items-center required\" style=\"pointer-events: auto\" for=\"equipment\" id=\"i5qn4j\">Equipment ID</label>\r\n              <input name=\"equipment\" type=\"text\" class=\"form-control\" label=\"Equipment ID\" id=\"equipment\" required=\"required\"/>\r\n            </div>\r\n            <div class=\"form-group bmd-form-group col-md-6\" id=\"ippj63\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_type\" id=\"i12ip3\">Equipment Type</label>\r\n              <select name=\"equipment_type\" class=\"form-control\" label=\"Equipment Type\" id=\"equipment_type\" list=\"Subcontractors - Equipment Type\" defaulttext=\"(Please Select)\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-12\" id=\"i4ugu2\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_fuel_type\" id=\"i5v52l\">Equipment Fuel Type</label>\r\n              <select name=\"equipment_fuel_type\" class=\"form-control\" label=\"Equipment Fuel Type\" id=\"equipment_fuel_type\" list=\"Subcontractors - Fuel Type\" defaulttext=\"(Please Select)\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group bmd-form-group col-md-12\" id=\"ihmy9x\">\r\n              <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\" for=\"equipment_description\" id=\"illkl5\">Equipment Description</label>\r\n              <input name=\"equipment_description\" type=\"text\" class=\"form-control\" label=\"Equipment Description\" id=\"equipment_description\" />\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <section class=\"text-right\" aria-label=\"Footer\">\r\n          <returnbutton button=\"return-button\" class=\"btn btn-sm btn-outline-primary mr-2\">Cancel</returnbutton>\r\n          <savebutton class=\"btn btn-sm btn-primary\">Save</savebutton>\r\n        </section>\r\n      </main>\r\n      <div class=\"d-none\">\r\n        Hidden Fields:\r\n        Subcontractor Name:<input id=\"subcontractor_name\" name=\"subcontractor_name\" type=\"text\"/>\r\n        Crew Id:<input id=\"crew_id\" name=\"crew_id\" type=\"text\"/>\r\n        <span id=\"boardName\"><boardname/></span>\r\n        <span id=\"fkSubcontractors\">\r\n          <foreignkeyreference table=\"Subcontractors\"/>\r\n        </span>\r\n        <span id=\"fkCrew\">\r\n          <foreignkeyreference table=\"Crews\"/>\r\n        </span>\r\n        <div class=\"form-row\">\r\n          <div class=\"form-group bmd-form-group col-md-12\" id=\"iz4sa\">\r\n            <div class=\"form-check\">\r\n              <label class=\"form-check-label d-flex align-items-center form-label\" for=\"locked\">\r\n                <input type=\"checkbox\" name=\"locked\" class=\"form-check-input form-control\" label=\"Locked\" id=\"locked\" value=\"true\"/>\r\n                Lock record\r\n                <span class=\"form-check-sign\">\r\n                  <span class=\"check\"/>\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group bmd-form-group col-md-10\">\r\n            <label class=\"form-label d-flex align-items-center\" style=\"pointer-events: auto\">\r\n               Approval Status</label>\r\n            <select name=\"record_approval_status\" class=\"form-control\" label=\"Subcontractor Approval Status\" id=\"record_approval_status\"\r\n               list=\"Subcontractors - Approval Status\" />\r\n         </div>\r\n        </div>\r\n        <grouplist/>\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group col-12\">\r\n              <label class=\"form-label\">Entity Group</label>\r\n              <input type=\"text\" size=\"40\" name=\"entity_group\" id=\"entity_group\" class=\"form-control\">\r\n              <if test=\"not(//*[@entity_group])\">\r\n                <attribute name=\"value\">\r\n                  <for-each select=\"/data/groups\">\r\n                    <choose>\r\n                      <when test=\"starts-with(@name,'Entity -')\">\r\n                        <value-of select=\"@name\" />\r\n                      </when>\r\n                    </choose>\r\n                  </for-each>\r\n                </attribute>\r\n              </if>\r\n              </input>\r\n            </div>\r\n            <div class=\"form-group col-12\">\r\n              <label class=\"form-label\">Viewlinks</label>\r\n              <viewlink name=\"List - Crews - All\" table=\"Crews\" />\r\n              <viewlink name=\"List - Equipment - All\" table=\"Equipment\" />\r\n            </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"input-delete-flag\">\r\n        <boardpermission name=\"Delete\">\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" value=\"no\" />\r\n        </boardpermission>\r\n        <textarea name=\"_dst_form_submission_url\" rows=\"1\" id=\"_dst_form_submission_url\" label=\"Form Submission Url\" format=\"html\" />\r\n      </div>\r\n    </form>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\r\n    <script boardresource=\"subEntityArray.js\" type=\"text/javascript\"/>\r\n\r\n    <script type=\"text/javascript\">\r\n      (function() {\r\n        const currentBoardName = document.querySelector('#boardName').textContent;\r\n        const fkSubbieTable = document.querySelector('#fkSubcontractors').textContent;  \r\n        const equipmentIdInput = document.querySelector(\"[name=equipment]\");\r\n        const view = WebEOCCXD.ViewBase.initialize();\r\n        const entityGroup = document.getElementById(\"entity_group\");\r\n        let subbieInput = document.getElementById(\"subcontractor_name\");\r\n\r\n        subbieInput.addEventListener(\"change\", function(e){\r\n            var value = subbieInput.options[subbieInput.selectedIndex].text;\r\n            var entityObj = subEntityArray.filter((x) => x[value]);\r\n            var entityVal = Object.values(entityObj[0]);\r\n            entityGroup.setAttribute(\"value\", entityVal[0]);\r\n        })\r\n\r\n        const listCrewApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Crews - All',\r\n        });\r\n        const listEquipmentApi = new WebEOCCXD.WebEOCAPI({\r\n          boardName: currentBoardName,\r\n          displayViewName: 'List - Equipment - All',\r\n        });\r\n\r\n      let crewInput = document.getElementById(\"assigned_crew_id\");\r\n      const partialSubbieName = \"<value-of select='$partialSubbieName' />\";\r\n      const crewIdParam = \"<value-of select='$crewIdParam' />\";\r\n\r\n      document.addEventListener(\"DOMContentLoaded\", async function (e) {\r\n        // on load filter our the options for Subcontractor based on entity_group name\r\n        let optionsArray = Array.from(subbieInput.options);\r\n        let matchingOption = optionsArray.filter(option => option.text.includes(partialSubbieName)).forEach(option => {\r\n          subbieInput.innerHTML = '';\r\n          option.selected = true;\r\n          subbieInput.appendChild(option);\r\n        })\r\n\r\n        let subbieDataid = subbieInput.value;\r\n        let crewsUnderThisSubbie = await getAllCrews().then(data => data.filter(crew => crew[fkSubbieTable] === subbieDataid));\r\n\r\n        if(crewInput.value) {\r\n          // have to filter out the crews that don't belong to this subcontractor\r\n          let crewOptionsArray = Array.from(crewInput.options);\r\n          let matchingOptions = crewOptionsArray.filter(option => crewsUnderThisSubbie.some(crew => crew.dataid === option.value));\r\n\r\n          // have to Clear existing options\r\n          crewInput.innerHTML = \"\";\r\n          populateCrewDropdown(matchingOptions);\r\n        } else {\r\n          populateCrewDropdown(crewsUnderThisSubbie);\r\n        }\r\n\r\n        if(crewIdParam){\r\n          crewInput.value = crewIdParam;\r\n        }\r\n        if(subbieInput.classList.contains(\"is-invalid\") &amp;&amp; subbieDataid != \"\") {\r\n          subbieInput.classList.remove(\"is-invalid\");\r\n        }\r\n      })\r\n\r\n      if(document.querySelector(\"[name=dataid]\").value == \"\") {\r\n        subbieInput.insertAdjacentHTML('afterbegin', '<option value=\"\" selected=\"true\">Select a Subcontractor</option>');\r\n        crewInput.innerHTML = '<option value=\"\">Select a Crew</option>'\r\n      }\r\n\r\n      subbieInput.addEventListener(\"change\", async function () {\r\n        crewInput.innerHTML = '<option value=\"\">Select a Crew</option>'; // Clear all options\r\n        let subbieDataid = subbieInput.value;\r\n        let subbieName = subbieInput.options[subbieInput.selectedIndex].text; // Gets the text of the selected option\r\n        let crewsUnderThisSubbie = await getAllCrews().then(data => data.filter(crew => crew[fkSubbieTable] === subbieDataid));\r\n        populateCrewDropdown(crewsUnderThisSubbie);\r\n\r\n        if(subbieInput.classList.contains(\"is-invalid\") &amp;&amp; subbieDataid != \"\") {\r\n          subbieInput.classList.remove(\"is-invalid\");\r\n        }\r\n      });\r\n\r\n      crewInput.addEventListener(\"change\", function () {\r\n        if(crewInput.classList.contains(\"is-invalid\") &amp;&amp; crewInput.value != \"\") {\r\n          crewInput.classList.remove(\"is-invalid\");\r\n        }\r\n      });\r\n\r\n      function populateCrewDropdown(crews) {\r\n        crews.forEach(crew => {\r\n          let option = document.createElement(\"option\");\r\n          option.value = crew.dataid || crew.value; \r\n          option.textContent = crew.crew_id || crew.text;\r\n          option.selected = crew.selected;\r\n          crewInput.appendChild(option);\r\n        });\r\n      }\r\n\r\n      equipmentIdInput.addEventListener(\"change\", async function (e) {\r\n        let existingEquipment = await getEquipmentByValue(e.target.value);\r\n        \r\n        if (existingEquipment.length > 0) {\r\n            alert(`Equipment with Equipment ID: ${e.target.value} already exists.`);\r\n            equipmentIdInput.value = '';\r\n        }\r\n      });\r\n\r\n      async function getAllCrews() {\r\n        const { data, error, response } = await listCrewApi.getRecords();\r\n        return response.ok ? data : null;\r\n      } \r\n\r\n      async function getEquipmentByValue(value) {\r\n        const { data, error, response } = await listEquipmentApi.getRecords({\"equipment\": value});\r\n        return response.ok ? data : null;\r\n      }\r\n\r\n      view.onInvalidSave(function (event) {\r\n        return new Promise(async function (resolve, reject) {\r\n          if(subbieInput.value == \"\") {\r\n            subbieInput.setAttribute(\"required\", \"required\");\r\n            subbieInput.setAttribute(\"class\", \"form-control is-invalid\");\r\n            subbieInput.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">Subcontactor name is required.</div>');\r\n            reject();\r\n          } \r\n          if(crewInput.value == \"\") {\r\n            crewInput.setAttribute(\"required\", \"required\");\r\n            crewInput.setAttribute(\"class\", \"form-control is-invalid\");\r\n            crewInput.insertAdjacentHTML('afterend', '<div class=\"invalid-feedback\">Crew is required.</div>');\r\n            reject();\r\n          }\r\n          resolve();\r\n        })\r\n      })\r\n\r\n      })();\r\n    </script>\r\n   \r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            },
            {
                "name": "Delete - Equipment",
                "table": "Equipment",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"></link>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <div>\r\n      <form>\r\n        <updatefields>\r\n          <field name=\"_webeoc_delete_flag\">'yes'</field>\r\n        </updatefields>\r\n        <main class=\"mt-4 mb-4\" aria-label=\"Main Section\">\r\n          <section class=\"modal\" id=\"delete-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"close-panel-modal-label\" data-backdrop=\"static\" data-keyboard=\"false\" data-show=\"true\" style=\"display: block;\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                  <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">Delete Record</h4>\r\n                  <returnlink type=\"button\" class=\"close\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" />\r\n                    <i class=\"material-icons\">close</i>\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"modal-body y-scroll\" style=\"max-height: 300px;\">Are you sure you want to delete this record?</div>\r\n                <div class=\"modal-footer\">\r\n                  <returnlink class=\"btn btn-sm btn-outline-primary mr-2\" aria-label=\"Cancel\">Cancel</returnlink>\r\n                  <savebutton class=\"btn btn-sm btn-danger\" aria-label=\"Delete\">Delete</savebutton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <input type=\"hidden\" name=\"_webeoc_delete_flag\" fieldlength=\"10\" label=\"Removed\" />\r\n        </main>\r\n      </form>\r\n      <div class=\"modal-backdrop show\" />\r\n    </div>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"></script>\r\n  </body>\r\n</html>",
                "addOnly": false,
                "lockUserInput": false,
                "lockPositionInput": false,
                "incomingDatalinks": [],
                "outgoingDatalinks": [],
                "emailNotifications": {
                    "on": false,
                    "emailAddresses": [
                        ""
                    ]
                },
                "mobileNotifications": {
                    "on": false,
                    "message": "",
                    "displayview": ""
                }
            }
        ],
        "displayViews": [
            {
                "name": "List - Subcontractors - All",
                "table": "Subcontractors",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <span class=\"media-breakpoint-state\" />\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n      </span>\n      <span button=\"export-button\">\n        <exportbutton />\n      </span>\n    </section>\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\n      <div class=\"flex flex-column flex-column-grow w-100\">\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"it1ao\">\n          <nav class=\"nav\">\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link active\">Subcontractor Roster</viewlink>\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n            <boardpermission name=\"View Reports\">\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n            </boardpermission>\n          </nav>\n        </section>\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"ix02k\">\n          <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                <agencyinfo type=\"primarylogo\" />\n              </div>\n              <div>\n                <h4>List - Subcontractor Roster</h4>\n                <h6>\n                  <incidentname />\n                </h6>\n              </div>\n            </div>\n            <div>\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                <li class=\"nav-item mr-2\">\n                  <boardpermission name=\"Create\">\n                      <viewlink name=\"Input - Subcontractor\" class=\"btn btn-sm btn-primary\">\n                        Create New\n                        <i class=\"material-icons ml-2\">add</i>\n                      </viewlink>\n                  </boardpermission>\n                </li>\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\n                <li class=\"dropdown nav-item flex flex-center\">\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </header>\n        </nav>\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n          <div class=\"flex flex-column js-target-map-move\">\n            <div class=\"bstMainMap\">\n              <if test=\"/data/@pdf = 'false'\">\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" enableheader=\"true\" map-name=\"Map\" />\n                  </div>\n                  <div class=\"flex flex-center\">\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\n                      <i class=\"material-icons\">arrow_drop_down</i>\n                    </div>\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\n                      <i class=\"material-icons\">arrow_drop_up</i>\n                    </div>\n                  </div>\n                </section>\n              </if>\n            </div>\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n                <section class=\"mt-2\" aria-label=\"Table\">\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" eocrepeatallrecordsSort=\"[object Object]\" rowcount=\"\">\n                    <thead>\n                      <tr>\n                        <th width=\"5%\" class=\"bg-white\">\n                          <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\n                          <sortlink field=\"receiving_utility\">Receiving Utility</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\n                          <sortlink field=\"address\">Departing Address</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\n                          <sortlink field=\"subcontractor_lead\">Subcontractor Lead</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\n                          <sortlink field=\"subcontractor_lead_phone\">Subcontractor Lead Phone</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white\">\n                          <sortlink field=\"date_submitted\">Date Submitted</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\n                          <sortlink field=\"expected_arrival_date_time\">Expected Arrival Date Time</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\n                          <sortlink field=\"locked\">Locked</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white\" />\n                      </tr>\n                    </thead>\n                    <tbody id=\"main-table\" updatesection=\"true\">\n                      <eocrepeatallrecords sort=\"[subcontractor_name] asc\">\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\n                          <td class=\"\">\n                            <eocfield name=\"subcontractor_name\" disableclick=\"true\" />\n                            <div class=\"d-none\">\n                              <expression name=\"subcontractor_filter\">CASE WHEN @positionname LIKE '%Administrator' OR subcontractor_name = @positionname THEN 'true' ELSE 'false' END</expression>\n                            </div>\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"receiving_utility\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"address\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"subcontractor_lead\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"subcontractor_lead_phone\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"\">\n                            <eocfield name=\"date_submitted\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"expected_arrival_date_time\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\n                            </if>\n                          </td>\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\n                            <if test=\"@record_approval_status = 'Approved'\">\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\n                            </if>\n                          </td>\n                          <td class=\"text-right\">\n                            <viewlink name=\"Details - Subcontractor\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\n                              <viewparameter name=\"presentation\">panel</viewparameter>\n                            </viewlink>\n                            <div class=\"dropdown cursor-pointer\">\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\n                              </a>\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                <viewlink name=\"Details - Subcontractor\" class=\"dropdown-item viewlink-default\">View</viewlink>\n                                  <boardpermission name=\"Update\">\n                                    <viewlink name=\"Input - Subcontractor\" class=\"dropdown-item\">Edit </viewlink>\n                                  </boardpermission>\n                                  <boardpermission name=\"Bird Administrator\" >\n                                    <if test=\"not(contains(/data//@positionname, 'Bird - CMD'))\">\n                                      <viewlink name=\"Details - Subcontractor Rates\" class=\"dropdown-item\">Rates</viewlink>\n                                    </if>\n                                  </boardpermission>\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"location\" label-field=\"subcontractor_name\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\" />\n                                 <pdflink class=\"dropdown-item scroll-link\" style=\"width: 95%; cursor: pointer\" enablemediaquery=\"true\" enablejs=\"true\"\n                                  orientation=\"landscape\" type=\"button\" view=\"Details - Bulk Subcontractor\">Download PDF</pdflink>\n                                <boardpermission name=\"Delete\">\n                                  <div class=\"dropdown-divider\" />\n                                  <viewlink name=\"Delete - Subcontractor\" class=\"dropdown-item text-danger\">Delete</viewlink>\n                                </boardpermission>\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      </eocrepeatallrecords>\n                      <div class=\"d-none\">\n                        <eocfield name=\"locked\" disableclick=\"true\" />\n                        <eocfield name=\"record_approval_status\" disableclick=\"true\" />\n                      </div>  \n                    </tbody>\n                  </table>\n                </section>\n              </div>\n            </div>\n          </div>\n        </section>\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n          <boardpermission name=\"Create\">\n            <viewlink name=\"Input - Subcontractor\" class=\"text-white\" refreshid=\"main-table\">\n                <div class=\"flex flex-col\">\n                  <i class=\"material-icons cursor-pointer\">add</i>\n                  CREATE NEW\n                </div>\n            </viewlink>\n          </boardpermission>\n          <div class=\"flex flex-col dropup\">\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n              aria-expanded=\"false\">more_horiz</i>\n            ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\">\n                <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n                <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n                <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n                <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n                <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\n                <boardpermission name=\"View Reports\">\n                  <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                </boardpermission>\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n            </div>\n          </div>\n        </footer>\n      </div>\n    </main>\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <i class=\"material-icons\">close</i>\n        </button>\n        <div class=\"modal-content\">\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n        </div>\n      </div>\n    </section>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\n  </body>\n</html>\n",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Subcontractors",
                "table": "Subcontractors",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\" />\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton />\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"it1ao\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link active\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\r\n            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"ix02k\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>List - Subcontractor Roster</h4>\r\n                <h6>\r\n                  <incidentname />\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <if test=\"false()\">\r\n                      <expression name=\"records_count\" useboardlevelfilters=\"true\">COUNT(*)</expression>\r\n                    </if>\r\n                    <choose>\r\n                      <when test=\"//@records_count &gt; 0\">\r\n                        <button class=\"btn btn-sm btn-primary disabled\">\r\n                          Create New\r\n                          <i class=\"material-icons ml-2\">add</i>\r\n                        </button>\r\n                      </when>\r\n                      <otherwise>\r\n                        <viewlink name=\"Input - Subcontractor\" class=\"btn btn-sm btn-primary\">\r\n                          Create New\r\n                          <i class=\"material-icons ml-2\">add</i>\r\n                        </viewlink>\r\n                      </otherwise>\r\n                    </choose>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" enableheader=\"true\" map-name=\"Map\" />\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" eocrepeatallrecordsSort=\"[object Object]\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"receiving_utility\">Receiving Utility</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"address\">Departing Address</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"subcontractor_lead\">Subcontractor Lead</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"subcontractor_lead_phone\">Subcontractor Lead Phone</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"date_submitted\">Date Submitted</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"expected_arrival_date_time\">Expected Arrival Date Time</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\r\n                          <sortlink field=\"locked\">Locked</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\r\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\" />\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords sort=\"[subcontractor_name] asc\">\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"\">\r\n                            <eocfield name=\"subcontractor_name\" disableclick=\"true\" />\r\n                            <div class=\"d-none\">\r\n                              <expression name=\"subcontractor_filter\">CASE WHEN @positionname LIKE '%Administrator' OR subcontractor_name = @positionname THEN 'true' ELSE 'false' END</expression>\r\n                            </div>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"receiving_utility\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"address\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"subcontractor_lead\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"subcontractor_lead_phone\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"\">\r\n                            <eocfield name=\"date_submitted\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"expected_arrival_date_time\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\r\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\r\n                            <if test=\"@record_approval_status = 'Approved'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Subcontractor\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Subcontractor\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <if test=\"/data//@locked != 'true'\">\r\n                                  <boardpermission name=\"Update\">\r\n                                    <viewlink name=\"Input - Subcontractor\" class=\"dropdown-item\">Edit</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                                <if test=\"/data//@locked != 'true'\">\r\n                                  <boardpermission name=\"Lock Record\">\r\n                                      <viewlink name=\"Input - Subcontractor\" class=\"dropdown-item\">Edit </viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"location\" label-field=\"subcontractor_name\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\" />\r\n                                <if test=\"/data//@locked != 'true'\">\r\n                                  <boardpermission name=\"Delete\">\r\n                                    <div class=\"dropdown-divider\" />\r\n                                    <viewlink name=\"Delete - Subcontractor\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      </eocrepeatallrecords>\r\n                      <div class=\"d-none\">\r\n                        <eocfield name=\"locked\" disableclick=\"true\" />\r\n                        <eocfield name=\"record_approval_status\" disableclick=\"true\" />\r\n                        <eocfield name=\"entity_group\" disableclick=\"true\" />\r\n                      </div>  \r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <choose>\r\n              <when test=\"//@records_count &gt; 0\">\r\n                <span class=\"text-grey\" refreshid=\"main-table\">\r\n                  <div class=\"flex flex-col\">\r\n                    <i class=\"material-icons cursor-pointer\">add</i>\r\n                              CREATE NEW\r\n                          </div>\r\n                </span>\r\n              </when>\r\n              <otherwise>\r\n                <viewlink name=\"Input - Subcontractor\" class=\"text-white\" refreshid=\"main-table\">\r\n                  <div class=\"flex flex-col\">\r\n                    <i class=\"material-icons cursor-pointer\">add</i>\r\n                              CREATE NEW\r\n                          </div>\r\n                </viewlink>\r\n              </otherwise>\r\n            </choose>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n              aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n             <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\r\n              <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\r\n              <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\r\n              <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                  <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a><a activate=\"pdf-button\"\r\n                class=\"dropdown-item d-md-flex\">Export to PDF</a><a activate=\"export-button\" class=\"dropdown-item\">Export to\r\n                CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    },
                    {
                        "name": "PublicEntries",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(cast(_dst_form_submission_url as nvarchar(256)),'')",
                                    "operation": "<>",
                                    "value": "''",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Equipment Time Entry",
                "table": "Timesheet Entries",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    </head>\n    <xsl:variable name=\"isLocked\">\n        <value-of select=\"/data/ViewParameter[@name = 'locked_state']\" />\n    </xsl:variable>\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n        <section class=\"d-none\">\n            <span button=\"pdf-button\">\n                <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n            </span>\n        </section>\n        <eocrepeatallrecords>\n            <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n                <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"inl2s\">\n                    <header class=\"container-fluid\" aria-label=\"Header\">\n                        <div class=\"flex\">\n                            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                                <agencyinfo type=\"primarylogo\"/>\n                            </div>\n                            <div>\n                                <h4>Record Details</h4>\n                                <h6>Board Record</h6>\n                            </div>\n                        </div>\n                        <div class=\"flex print-hide align-items-center\">\n                            <boardpermission name=\"Update\">\n                                <viewlink name=\"Input - Equipment Time Entry\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                                    <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\"/>\n                                    </viewparameter>\n                                    Edit\n                                    <i class=\"material-icons ml-2\">create</i>\n                                </viewlink>\n                            </boardpermission>\n                            <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                                <li class=\"nav-item dropdown flex flex-center\">\n                                    <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                                        <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                        <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </header>\n                </nav>\n                <div class=\"scrollable-area\">\n                    <div>\n                        <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"impo7\">\n                            <nav class=\"row print-hide my-2 \">\n                                <div class=\"col\">\n                                    <returnlink class=\"btn btn-sm btn-link text-primary\">\n                                        <i class=\"material-icons\">arrow_back_ios</i>\n                                        Return\n                                    </returnlink>\n                                </div>\n                                <boardpermission name=\"Approve Timesheet\">\n                                    <div class=\"col text-right mobile-hide\">\n                                        <viewlink name=\"Input - Equipment Time Entry\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                                            <i class=\"material-icons\">create</i>\n                                            Edit Record\n                                        </viewlink>\n                                    </div>\n                                </boardpermission>\n                            </nav>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"irrzfc\">\n                                    <span class=\"faded-grey mr-2\">Type:</span>\n                                    <span>\n                                        <eocfield name=\"type\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                               \n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"imnf59\">\n                                    <span class=\"faded-grey mr-2\">Start Time:</span>\n                                    <span>\n                                        <eocfield name=\"start_time\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i211rx\">\n                                    <span class=\"faded-grey mr-2\">End Time:</span>\n                                    <span>\n                                        <eocfield name=\"end_time\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ix32m2\">\n                                    <span class=\"faded-grey mr-2\">Equipment Number:</span>\n                                    <span>\n                                        <eocfield name=\"equipment_number\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i5cfyv\">\n                                    <span class=\"faded-grey mr-2\">Equipment Fuel Type:</span>\n                                    <span>\n                                        <eocfield name=\"equipment_fuel_type\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"izjtpz\">\n                                    <span class=\"faded-grey mr-2\">Equipment Type:</span>\n                                    <span>\n                                        <eocfield name=\"equipment_type\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ik5jso\">\n                                    <span class=\"faded-grey mr-2\">Equipment Description:</span>\n                                    <span>\n                                        <eocfield name=\"equipment_description\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"isvj8h\">\n                                    <span class=\"faded-grey mr-2\">Comments:</span>\n                                    <span>\n                                        <eocfield name=\"comments\"/>\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </div>\n                <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                    <returnlink class=\"text-white cursor-pointer\">\n                        <div class=\"flex flex-col\">\n                            <i class=\"material-icons\">keyboard_arrow_left</i>\n                            RETURN\n                        </div>\n                    </returnlink>\n                    <boardpermission name=\"Approve Timesheet\">\n                        <viewlink name=\"Input - Equipment Time Entry\" class=\"text-white cursor-pointer\">\n                            <div class=\"flex flex-col\">\n                                <i class=\"material-icons\">edit</i>\n                                EDIT\n                            </div>\n                        </viewlink>\n                    </boardpermission>\n                    <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                        <i class=\"material-icons\">more_horiz</i>\n                        ACTIONS\n                        <div class=\"dropdown-menu cursor-pointer\">\n                            <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                            <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                        </div>\n                    </div>\n                </footer>\n            </main>\n        </eocrepeatallrecords>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "UTIL - GET Timesheets",
                "table": "Timesheets",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\n        <eocrepeatallrecords>\n            <foreignkey table=\"Crews\" />\n            <eocfield name=\"approval_status\" />\n        </eocrepeatallrecords>\n    </main>\n    \n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "Removed",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "_webeoc_delete_flag",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Report - Subcontractor Hours",
                "table": "Subcontractors",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n<head>\n    <title>Subcontractor Hours Report</title>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\n    <link rel=\"stylesheet\" href=\"https://webeocboardfiles.juvare.com/board/1.0/css/material-kit.min.css\"></link>\n    <link rel=\"stylesheet\" boardresource=\"datatablesWithPlugins.css\" />\n     \n    <style>\n        .fa-spinner {\n            display: block;\n            font-size: 8vmin;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            animation: spin 2s linear infinite;\n        }\n    \n        /* Spinner Animation */\n        @keyframes spin {\n            0% {\n                transform: translate(-50%, -50%) rotate(0deg);\n            }\n    \n            100% {\n                transform: translate(-50%, -50%) rotate(360deg);\n            }\n        }\n    </style>\n\n\n</head>\n<body data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-viewid=\"{/data/@viewid}\">\n\n    <span class=\"media-breakpoint-state\" />\n    <i id=\"spinner\" class=\"fa fa-spinner\" /> <!-- Loading Spinner -->\n    <main id=\"main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\"\n        class=\"page-wrap flex flex-row report-view\">\n        <div class=\"flex flex-column flex-column-grow\">\n            <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\">\n                <header class=\"container-fluid\" aria-label=\"Header\">\n                    <div class=\"flex\">\n                        <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                            <agencyinfo type=\"primarylogo\" />\n                        </div>\n                        <div>\n                            <h1 class=\"boardname\">\n                                <b>\n                                  Subcontractor Hours Report\n                                </b>\n                            </h1>\n                            <h2 class=\"incidentname\">\n                                <incidentname />\n                            </h2>\n                        </div>\n                    </div>\n                    <div>\n                        <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                            <li class=\"nav-item mr-2\">\n                                <returnlink type=\"button\" class=\"btn btn-sm btn-outline-primary\">\n                                    <i class=\"material-icons\">arrow_back_ios</i> Return\n    \n                                </returnlink>\n                            </li>\n                        </ul>\n                    </div>\n                </header>\n            </nav>\n    \n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col\">\n                        <div class=\"row mb-3\">\n                            <div class=\"col-md-2\">\n                                <div class=\"form-group\">\n                                    <label for=\"min\">From:</label>\n                                        <xsl:element name=\"input\">\n                                            <xsl:attribute name=\"type\">text</xsl:attribute>\n                                            <xsl:attribute name=\"class\">form-control</xsl:attribute>\n                                            <xsl:attribute name=\"id\">min</xsl:attribute>\n                                            <xsl:attribute name=\"name\">min</xsl:attribute>\n                                            <xsl:attribute name=\"placeholder\">YYYY-MM-DD</xsl:attribute>\n                                            <xsl:attribute name=\"autocomplete\">off</xsl:attribute>\n                                        </xsl:element>\n                                </div>\n                            </div>\n                            <div class=\"col-md-2\">\n                                <div class=\"form-group\">\n                                    <label for=\"max\">To:</label>\n                                        <xsl:element name=\"input\">\n                                            <xsl:attribute name=\"type\">text</xsl:attribute>\n                                            <xsl:attribute name=\"class\">form-control</xsl:attribute>\n                                            <xsl:attribute name=\"id\">max</xsl:attribute>\n                                            <xsl:attribute name=\"name\">max</xsl:attribute>\n                                            <xsl:attribute name=\"placeholder\">YYYY-MM-DD</xsl:attribute>\n                                            <xsl:attribute name=\"autocomplete\">off</xsl:attribute>\n                                        </xsl:element>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n               <table id=\"report_table\" class=\"table table-striped table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>Subcontractor</th>\n                            <th>Category</th>\n                            <th>Crew</th>\n                            <th>Crew Lead</th>\n                            <th>Resource</th>\n                            <th>Classification</th>\n                            <th>Location</th>\n                            <th>Date</th>\n                            <th>ST Hours</th>\n                            <th>OT Hours</th>\n                            <th>DT Hours</th>\n                            <th>Total Hours</th>\n                        </tr>\n                    </thead>\n                    <tfoot>\n                        <tr>\n                        <th></th> <!-- 1 -->\n                        <th></th> <!-- 2 -->\n                        <th></th> <!-- 3 -->\n                        <th></th> <!-- 4 -->\n                        <th></th> <!-- 5 -->\n                        <th></th> <!-- 6 -->\n                        <th></th> <!-- 7 -->\n                        <th></th> <!-- 8 -->\n                        <th id=\"stHours-footer\"></th>     <!-- 9 -->\n                        <th id=\"otHours-footer\"></th>     <!-- 10 -->\n                        <th id=\"dtHours-footer\"></th>     <!-- 11 -->\n                        <th id=\"totalHours-footer\"></th>  <!-- 12 -->\n                        </tr>\n                    </tfoot>\n                    </table>\n            </div>\n            <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                <returnlink class=\"text-white cursor-pointer\">\n                    <div class=\"flex flex-col\">\n                        <i class=\"material-icons\">keyboard_arrow_left</i>\n                        RETURN\n                    </div>\n                </returnlink>\n                <!-- <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                    aria-expanded=\"false\">\n                    <i class=\"material-icons\">more_horiz</i>\n                    ACTIONS\n                    <div class=\"dropdown-menu cursor-pointer\">\n                        <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\n                        <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n                        <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n                        <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n                        <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n                        <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\n                        <boardpermission name=\"View Reports\">\n                            <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                        </boardpermission>\n                        <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n                        <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n                        <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n                    </div>\n                </div> -->\n            </footer>\n            <div style=\"display: none\">\n                <div id=\"viewlinks\">\n                    <viewlink name=\"Details - Subcontractor\" table=\"Subcontractors\" />\n                    <viewlink name=\"UTIL - Subcontractor Entity Filter - All\" table=\"Subcontractors\" />\n                    <viewlink name=\"Details - Crew\" table=\"Crews\" />\n                    <viewlink name=\"Details - Team Member\" table=\"Team Members\" />\n                    <viewlink name=\"Details - Timesheet\" table=\"Timesheet\" />\n                    <viewlink name=\"Details - Timesheet Entry\" table=\"Timesheet Entries\" />\n                </div>\n                <div id=\"foreignkeyReferences\">\n                    <span id=\"subcontractorsFk\">\n                        <foreignkeyreference table=\"Subcontractors\" />\n                    </span>\n                    <span id=\"crewsFk\">\n                        <foreignkeyreference table=\"Crews\" />\n                    </span>\n                    <span id=\"teamMembersFk\">\n                        <foreignkeyreference table=\"Team Members\" />\n                    </span>\n                    <span id=\"timesheetsFk\">\n                        <foreignkeyreference table=\"Timesheets\" />\n                    </span>\n                    <span id=\"timesheetEntriesFk\">\n                        <foreignkeyreference table=\"Timesheet Entries\" />\n                    </span>\n                    <span id=\"timesheetEntriesFk\">\n                        <foreignkeyreference table=\"Timesheet Entries\" />\n                    </span>\n                </div>\n                <span id=\"bird_admin\">\n                    <boardpermission name=\"Bird Administrator\">\n                        admin\n                        <notapplied>\n                            non-admin\n                        </notapplied>\n                    </boardpermission>\n                </span>\n            </div>\n        </div>\n    </main>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/popper.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/material-kit.min.js\" type=\"text/javascript\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/ux-webeoc-board-standards.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script boardresource=\"expenseTypeFieldMap.js\" type=\"text/javascript\"></script>\n    <script boardresource=\"datatablesWithPlugins.js\" type=\"text/javascript\"></script>\n\n    <script>\n\n        window.onload = async function() {\n            const admin = document.querySelector('#bird_admin').textContent.trim() === 'admin'; \n\n            const foreignKeys = {\n                crews: document.getElementById('crewsFk').textContent.trim(),\n                subcontractors: document.getElementById('subcontractorsFk').textContent.trim(),\n                teamMembers: document.getElementById('teamMembersFk').textContent.trim(),\n                timesheets: document.getElementById('timesheetsFk').textContent.trim(),\n                timesheetEntries: document.getElementById('timesheetEntriesFk').textContent.trim(),\n            };\n\n            // 1.) Get data from all tables\n            const reportData = await getAllReportData();\n\n            console.log('reportData: ', reportData)\n            \n            // 2.) Format data such that relationships are maintained\n            const mappedData = mapParentChildRelations(reportData);\n\n            console.log('mappedData: ', mappedData)\n            \n\n            // 3.) Generate datatable\n            let minDate, maxDate;\n            const currencySymbol = '$';\n\n            let table = new DataTable('#report_table', {\n                data: mappedData.map(entry => mapEntryType(entry)),\n                columns: [\n                    { data: 'subcontractor', title: 'Subcontractor', name: 'subcontractor' },\n                    { data: 'category', title: 'Category', name: 'category' },\n                    { data: 'crew', title: 'Crew', name: 'crew' },\n                    { data: 'crew_lead', title: 'Crew Lead', name: 'crewLead' },\n                    { data: 'resource', title: 'Resource', name: 'resource' },\n                    { data: 'classification', title: 'Classification', name: 'classification' },\n                    { data: 'location', title: 'Location', name: 'location' },\n                    { data: 'date', title: 'Date', name: 'date' },\n                    { data: 'stHours', title: 'ST Hours', name: 'stHours', render: (data, type, row) => row.category === 'Expense' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'otHours', title: 'OT Hours', name: 'otHours', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'dtHours', title: 'DT Hours', name: 'dtHours', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'totalHours', title: 'Total Hours', name: 'totalHours', render: (data, type, row) => row.category === 'Expense' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) }\n                    // Removed stHoursRate, otHoursRate, dtHoursRate, stCost, otCost, dtCost, totalCost columns\n                ],\n                scrollX: true,\n                layout: {\n                    topStart: {\n                        buttons: [\n                            { extend: 'copy', footer: true },\n                            { extend: 'csv', footer: true },\n                            { extend: 'print', footer: true },\n                        ]\n                    }\n                },\n                footerCallback: function (tfoot, data, start, end, display) {\n                    var api = this.api();\n                    $(api.column(`date:name`).footer()).html('Totals:');\n\n                    const hourColumns = ['stHours', 'otHours', 'dtHours', 'totalHours'];\n                    const totalsColumns = ['stCost', 'otCost', 'dtCost', 'totalCost'];\n\n                    // Sum and display totals for hours columns (only visible/filtered rows)\n                    hourColumns.forEach(col => {\n                        const total = display.reduce((sum, rowIndex) => {\n                            const value = parseFloat(data[rowIndex][col]) || 0;\n                            return sum + value;\n                        }, 0);\n\n                        $(api.column(`${col}:name`).footer()).html(\n                            total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n                        );\n                    });\n\n                    // Sum and display totals for cost columns (only visible/filtered rows)\n                    totalsColumns.forEach(col => {\n                        const total = display.reduce((sum, rowIndex) => {\n                            const value = parseFloat(data[rowIndex][col]) || 0;\n                            return sum + value;\n                        }, 0);\n\n                        $(api.column(`${col}:name`).footer()).html(\n                            currencySymbol + total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n                        );\n                    });\n                }\n            });\n\n            // Create date inputs\n            minDate = new DateTime('#min', {\n                format: 'YYYY-MM-DD',\n                buttons: {\n                    clear: true\n                }\n            });\n            maxDate = new DateTime('#max', {\n                format: 'YYYY-MM-DD',\n                buttons: {\n                    clear: true\n                }\n            });\n\n            // Custom filtering function for date range\n            DataTable.ext.search.push(function (settings, data, dataIndex) {\n                let min = minDate.val();\n                let max = maxDate.val();\n                let date = new Date(data[8]);\n\n                if (\n                    (min === null &amp;&amp; max === null) ||\n                    (min === null &amp;&amp; date &lt;= new Date(max)) ||\n                    (min &lt;= date &amp;&amp; max === null) ||\n                    (min &lt;= date &amp;&amp; date &lt;= new Date(max))\n                ) {\n                    return true;\n                }\n                return false;\n            });\n\n            // Refilter the table on date input change\n            document.querySelectorAll('#min, #max').forEach((el) => {\n                el.addEventListener('change', () => table.draw());\n            });\n\n            // 4.) Hide Spinner\n            toggleSpinner('hide')\n\n          function mapEntryType(entry) {\n              const { expense: e, expenseReport: er, timesheetEntry: t, timesheet: ts, crew: c, subcontractor: s } = entry;\n\n                let base = {\n                    type: t?.type,\n                    subcontractor: s?.subcontractor_name || \"\",\n                    crew: c?.crew_id || \"\",\n                    crew_lead: c?.foreman || \"\",\n                    location: c?.work_location_address || \"\",\n                    date: formatDateToISO(ts?.date) || \"\",\n                    resource: \"\",\n                    category: t?.type || \"\",\n                    classification: \"\",\n                    stHours: 0.00,\n                    otHours: 0.00,\n                    dtHours: 0.00,\n                    totalHours: 0.00,\n                };\n\n                \n\n                switch (entry.type) {\n                    case 'timesheet':\n                        if (t.type === 'Personnel') {\n                            base.resource = `${t.first_name} ${t.last_name}`.trim();\n                            base.classification = t.classification || \"\";\n                            base.stHours = Number(t.standard_hours || 0);\n                            base.otHours = Number(t.double_hours || 0);\n                            base.dtHours = Number(t.premium_hours || 0);\n                            base.totalHours = Number(t.total_hours || 0);\n                        } else if (t.type === 'Equipment') {\n                            base.resource = t.equipment_number || \"\";\n                            base.classification = t.equipment_type || \"\";\n                            base.stHours = Number(t.total_hours || 0);\n                            base.otHours = 0;\n                            base.dtHours = 0;\n                            base.totalHours = Number(t.total_hours || 0);\n                        }\n                        break;\n\n                    default:\n                        // Return empty-ish base if unknown type\n                        break;\n                }\n\n                return base;\n            }\n\n\n            function formatDateToISO(dateInput) {\n                // Format as YYYY-MM-DD\n                if (!dateInput) return '';\n                \n                const dateObj = new Date(dateInput);\n                if (!isNaN(dateObj)) {\n                    const yyyy = dateObj.getFullYear();\n                    const mm = String(dateObj.getMonth() + 1).padStart(2, '0');\n                    const dd = String(dateObj.getDate()).padStart(2, '0');\n                    return `${yyyy}-${mm}-${dd}`;\n                }\n                \n                const parts = String(dateInput).split('/');\n                if (parts.length === 3) {\n                    const yyyy = parts[2];\n                    const mm = parts[0].padStart(2, '0');\n                    const dd = parts[1].padStart(2, '0');\n                    return `${yyyy}-${mm}-${dd}`;\n                }\n                \n                return dateInput;\n            }\n\n\n            function mapParentChildRelations(rawData) {\n                const { subcontractors, crews, teamMembers, timesheets, timesheetEntries, expenseReports, expenses } = rawData;\n\n                // Create lookup maps\n                const lookupMaps = {\n                    subcontractors: new Map(subcontractors.map(item => [item.dataid, item])),\n                    crews: new Map(crews.map(item => [item.dataid, item])),\n                    teamMembers: new Map(teamMembers.map(item => [item.dataid, item])),\n                    timesheets: new Map(timesheets.map(item => [item.dataid, item])),\n                    timesheetEntries: new Map(timesheetEntries.map(item => [item.dataid, item])),\n                };\n\n                // Helper function to get related record\n                function getRelatedRecord(record, foreignKeyName, targetMap) {\n                    const foreignKeyValue = record[foreignKeys[foreignKeyName]];\n                    return foreignKeyValue ? targetMap.get(foreignKeyValue) : null;\n                }\n\n                // Map timesheet entries (Personnel/Equipment)\n                const timesheetRows = timesheetEntries.map(entry => {\n                    const timesheet = getRelatedRecord(entry, 'timesheets', lookupMaps.timesheets);\n                    const crew = timesheet ? getRelatedRecord(timesheet, 'crews', lookupMaps.crews) : null;\n                    const subcontractor = crew ? getRelatedRecord(crew, 'subcontractors', lookupMaps.subcontractors) : null;\n\n                    if (subcontractor === undefined || crew === undefined || timesheet === undefined) {\n                        console.warn(`Could not find parent entries for timesheet: ${entry.dataid}`);\n                        return null; // Skip if relationship could not be established\n                    }\n                    \n                    return {\n                        type: 'timesheet',\n                        timesheetEntry: entry,\n                        timesheet,\n                        crew,\n                        subcontractor\n                    };\n                });\n\n                return [...timesheetRows].filter(entry => entry !== null);\n            }\n\n\n            async function getAllReportData() {\n                const subcontractorDisplayApiView = admin ? 'Details - Subcontractor' : 'UTIL - Subcontractor Entity Filter - All';\n\n                const subcontractorsDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: subcontractorDisplayApiView }); // Subcontractors Table\n                const crewsDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Crew' }); // Crew Table\n                const teammembersDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Team Member' }); // Team Members Table\n                const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet' }) // Timesheet Table\n                const timesheetEntriesDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet Entry' }) // Timesheet Entries Table\n         \n                const promises = [\n                    subcontractorsDetailsApi.getRecords(),\n                    crewsDetailsApi.getRecords(),\n                    teammembersDetailsApi.getRecords(),\n                    timesheetDetailsApi.getRecords(),\n                    timesheetEntriesDetailsApi.getRecords(),\n                ];\n\n                const [\n                    { data: subcontractors },\n                    { data: crews },\n                    { data: teamMembers },\n                    { data: timesheets },\n                    { data: timesheetEntries },\n                ] = await Promise.all(promises);\n\n                console.log('subcontractors: ', subcontractors);\n\n                return {\n                    subcontractors,\n                    crews,\n                    teamMembers,\n                    timesheets,\n                    timesheetEntries,\n                };\n            }\n\n               function toggleSpinner(state) {\n                    var mainForm = document.getElementById(\"main-section\");\n                    var spinner = document.getElementById(\"spinner\");\n                    \n                    switch (state) {\n                        case 'show':\n                            mainForm.style.display = \"none\";\n                            spinner.style.display = \"block\";\n                            break;\n                        case 'hide':\n                            mainForm.style.display = \"block\";\n                            spinner.style.display = \"none\";\n                            break;\n                    }\n                }\n        }\n    </script>\n\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "List - Subcontractor Timesheets",
                "table": "Subcontractors",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <span class=\"media-breakpoint-state\" />\n  <section class=\"d-none\">\n    <span button=\"pdf-button\">\n      <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n    </span>\n    <span button=\"export-button\">\n      <exportbutton />\n    </span>\n  </section>\n  <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\"\n    class=\"page-wrap flex flex-row\">\n    <div class=\"flex flex-column flex-column-grow w-100\">\n      <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"it1ao\">\n        <!--navigation tabs-->\n        <nav class=\"nav\">\n          <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n          <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n          <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n          <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n          <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link active\">Timesheets</viewlink>\n          <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n          <boardpermission name=\"View Reports\">\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n          </boardpermission>\n        </nav>\n        <!--navigation tabs-->\n      </section>\n      <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"ix02k\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\" />\n            </div>\n            <div>\n              <h4>List - Subcontractor Timesheets</h4>\n              <h6>\n                <incidentname />\n              </h6>\n            </div>\n          </div>\n          <div>\n            <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n\n              <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\n              <li class=\"dropdown nav-item flex flex-center\">\n                <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                  <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                  <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                  <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </header>\n      </nav>\n      <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n        <div class=\"flex flex-column js-target-map-move\">\n          <div class=\"bstMainMap\">\n            <if test=\"/data/@pdf = 'false'\">\n              <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\n                <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\n                  <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" enableheader=\"true\"\n                    map-name=\"Map\" />\n                </div>\n                <div class=\"flex flex-center\">\n                  <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\n                    <i class=\"material-icons\">arrow_drop_down</i>\n                  </div>\n                  <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\n                    <i class=\"material-icons\">arrow_drop_up</i>\n                  </div>\n                </div>\n              </section>\n            </if>\n          </div>\n          <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n            <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n              <section class=\"mt-2\" aria-label=\"Table\">\n                <table class=\"table table-striped table-sm mt-1 sticky-header\" eocrepeatallrecordsSort=\"[object Object]\"\n                  rowcount=\"\">\n                  <thead>\n                    <tr>\n                      <th width=\"5%\" class=\"bg-white\">\n                        <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"receiving_utility\">Receiving Utility</sortlink>\n                      </th>\n\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"subcontractor_lead\">Subcontractor Lead</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"subcontractor_lead_phone\">Subcontractor Lead Phone</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white text-center\">\n                        Approved Timesheets\n                      </th>\n                      <th width=\"5%\" class=\"bg-white text-center\">\n                        Unapproved Timesheets\n                      </th>\n                      <th width=\"5%\" class=\"bg-white\" />\n                    </tr>\n                  </thead>\n                  <tbody id=\"main-table\" updatesection=\"true\">\n                    <eocrepeatallrecords sort=\"[subcontractor_name] asc\">\n                      <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\"\n                        data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\" dataid=\"{@dataid}\" rowcount=\"0\">\n                        <td class=\"\">\n                          <eocfield name=\"subcontractor_name\" disableclick=\"true\" />\n                          <div class=\"d-none\">\n                            <expression name=\"subcontractor_filter\">CASE WHEN @positionname LIKE '%Administrator' OR\n                              subcontractor_name = @positionname THEN 'true' ELSE 'false' END</expression>\n                          </div>\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"receiving_utility\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"subcontractor_lead\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"subcontractor_lead_phone\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"text-center\" data-approvedtsdataidel=\"{@dataid}\">\n                        </td>\n                        <td class=\"text-center\" data-unapprovedtsdataidel=\"{@dataid}\">\n                        </td>\n                        <td class=\"text-right\">\n                          <viewlink name=\"Details - Subcontractor Timesheet\" target=\"sidePanel\"\n                            class=\"mobile-hide-lg viewlink-panel\">\n                            <viewparameter name=\"presentation\">panel</viewparameter>\n                          </viewlink>\n                          <div class=\"dropdown cursor-pointer\">\n                            <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                              <i class=\"material-icons faded-grey\">more_horiz</i>\n                            </a>\n                            <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                              <viewlink name=\"Details - Subcontractor Timesheet\" class=\"dropdown-item\">Review</viewlink>\n                              <feature type=\"link\" class=\"dropdown-item\" name=\"location\"\n                                label-field=\"subcontractor_name\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\"\n                                data-dataid=\"{@dataid}\" target=\"\" />\n                              <pdflink class=\"dropdown-item scroll-link\" style=\"width: 95%; cursor: pointer\" enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"button\"\n                                view=\"Details - Bulk Timesheets\">Download PDF</pdflink>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                      <div style=\"display: none\">\n                        <viewlink name=\"Details - Timesheet\" />\n                        <viewlink name=\"Details - Crew\" />\n                      </div>\n                    </eocrepeatallrecords>\n                    <div class=\"d-none\">\n                      <eocfield name=\"locked\" disableclick=\"true\" />\n                    </div>\n                  </tbody>\n                </table>\n              </section>\n            </div>\n          </div>\n        </div>\n      </section>\n      <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n        <div class=\"flex flex-col dropup\" style=\"margin-left: auto;\">\n          <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n            aria-expanded=\"false\">more_horiz</i>\n          ACTIONS\n          <div class=\"dropdown-menu cursor-pointer\">\n            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\n            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\n            <boardpermission name=\"View Reports\">\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n            </boardpermission>\n            <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a><a activate=\"pdf-button\"\n              class=\"dropdown-item d-md-flex\">Export to PDF</a><a activate=\"export-button\" class=\"dropdown-item\">Export to\n              CSV</a>\n          </div>\n        </div>\n      </footer>\n    </div>\n  </main>\n  <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\"\n    aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n    <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n      <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n        <i class=\"material-icons\">close</i>\n      </button>\n      <div class=\"modal-content\">\n        <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n        <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n      </div>\n    </div>\n  </section>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n    path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n    path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n\n  <script >\n    window.onload = async function () {\n      document.querySelector('.drawer-close').addEventListener('click', displayCounts)\n\n      const { view } = WebEOCCXD.ViewBase;\n\n      view.onViewRefresh(function() {\n        displayCounts()\n      });\n      displayCounts()\n\n      async function displayCounts() {\n\n        const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet' })\n        const crewDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Crew' })\n\n        const { data: crewRcrds } = await crewDetailsApi.getRecords()\n        const { data: timesheetRcrds } = await timesheetDetailsApi.getRecords()\n\n        const subcontractorRowEl = document.querySelectorAll('tr[dataid]');\n\n        for (const row of subcontractorRowEl) {\n          // get dataid of row's subcontractor.\n          let subcontractorId = row.getAttribute('dataid');\n\n          // get the element to display the spinner\n          let unapprovedTsCountEl = document.querySelector(`td[data-unapprovedtsdataidel='${subcontractorId}']`);\n          let approvedTsCountEl = document.querySelector(`td[data-approvedtsdataidel='${subcontractorId}']`);\n          // get all crew records associated with the subcontractor\n          let associatedCrewRcrds = crewRcrds.filter(function (crew) {\n            return crew['<foreignkeyreference table=\"Subcontractors\" />'] === subcontractorId;\n          });\n\n          // sum all unapproved timesheets for the subcontractor's crews\n          let totalApprovedTimesheets = 0;\n          let totalUnapprovedTimesheets = 0;\n          for (const crew of associatedCrewRcrds) {\n            let crewId = crew.dataid;\n\n            let matchingTimesheetRcrds = timesheetRcrds.filter(function (tm) {\n              return tm['<foreignkeyreference table=\"Crews\" />'] === crewId &amp;&amp; tm.approval_status != 'Approved';\n            });\n            totalUnapprovedTimesheets += matchingTimesheetRcrds.length;\n\n            let matchingApprovedTimesheetRcrds = timesheetRcrds.filter(function (tm) {\n              return tm['<foreignkeyreference table=\"Crews\" />'] === crewId &amp;&amp; tm.approval_status == 'Approved';\n            });\n            totalApprovedTimesheets += matchingApprovedTimesheetRcrds.length;\n\n          }\n\n          // style the results with a badge and display the sum of unapproved time entries.\n          if (totalUnapprovedTimesheets > 0) {\n            unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-warning\">${totalUnapprovedTimesheets}</span>`;\n          } else {\n            unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${totalUnapprovedTimesheets}</span>`;\n          }\n\n          if (totalApprovedTimesheets > 0) {\n            approvedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${totalApprovedTimesheets}</span>`;\n          } else {\n            approvedTsCountEl.innerHTML = `<span class=\"badge badge-secondary\">${totalApprovedTimesheets}</span>`;\n          }\n\n        }\n      }\n\n      function refreshElements() {\n        window.location.reload();\n      }\n    }\n  </script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    },
                    {
                        "name": "PublicEntries",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(cast(_dst_form_submission_url as nvarchar(256)),'')",
                                    "operation": "<>",
                                    "value": "''",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Timesheet",
                "table": "Timesheets",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<style>\n  a[download] > * {\n    cursor: pointer !important;\n  }\n</style>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\"\n  data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n  <section class=\"d-none\">\n    <span button=\"pdf-button\">\n      <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\"\n        view=\"Details - Timesheet PDF\">PDF</pdflink>\n    </span>\n  </section>\n  <eocrepeatallrecords>\n    <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"if11t\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\" />\n            </div>\n            <div>\n              <h4>Timesheet Details</h4>\n              <h6>\n                <incidentname />\n              </h6>\n            </div>\n          </div>\n          <div class=\"flex print-hide align-items-center\">\n            <boardpermission name=\"Update\">\n              <viewlink name=\"Input - Timesheet\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                <viewparameter name=\"presentation\">\n                  <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                </viewparameter>\n                Edit\n                <i class=\"material-icons ml-2\">create</i>\n              </viewlink>\n            </boardpermission>\n            <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n              <li class=\"nav-item dropdown flex flex-center\">\n                <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\"\n                  x-placement=\"bottom-end\">\n                  <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                  <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </header>\n      </nav>\n      <div class=\"scrollable-area\">\n        <div>\n          <section\n            class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\"\n            id=\"impo7\">\n            <nav class=\"row print-hide my-2 \">\n              <div class=\"col\">\n                <returnlink class=\"btn btn-sm btn-link text-primary\">\n                  <i class=\"material-icons\">arrow_back_ios</i>\n                  Return\n                </returnlink>\n              </div>\n              <div class=\"col text-right mobile-hide\">\n                <boardpermission name=\"Update\">\n                  <if test=\"@approval_status != 'Approved'\">\n                    <viewlink name=\"Input - Timesheet\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                      <i class=\"material-icons\">create</i>\n                      Edit Record\n                    </viewlink>\n                  </if>\n                </boardpermission>\n              </div>\n            </nav>\n            <div class=\"row dst-display-row\">\n              <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iw1p8\">\n                <span class=\"faded-grey mr-2\">Approval Status:</span>\n                <span>\n                  <eocfield name=\"approval_status\" />\n                </span>\n              </div>\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Date:</span>\n                <span>\n                  <eocfield name=\"date\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Job Location:</span>\n                <span>\n                  <eocfield name=\"job_location\" />\n                </span>\n              </div>\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Utility Name:</span>\n                <span>\n                  <eocfield name=\"utility_name\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <div class=\"col-12 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Notes:</span>\n                <span>\n                  <eocfield name=\"notes\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <section class=\"col-md-12\">\n                <div class=\"form-header\" id=\"iu5oab\">\n                  <h4>\n                    <b>\n                      Personnel Time Entries\n                    </b>\n                  </h4>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <section aria-label=\"Table\" class=\"col mt-2\">\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                      <thead>\n                        <tr>\n                          <th class=\"mobile-hide-lg\">\n                            ID\n                          </th>\n                          <th>\n                            Name\n                          </th>\n                          <th class=\"mobile-hide-lg\">\n                            Classification\n                          </th>\n                          <th class=\"mobile-hide-lg\">\n                            Crew Lead / Foreman\n                          </th>\n                          <th>\n                            Status\n                          </th>\n                          <th>\n                            In/Out\n                          </th>\n                          <th class=\"mobile-hide-lg\">\n                            Total Hours\n                          </th>\n                          <th width=\"5%\" />\n                        </tr>\n                      </thead>\n                      <tbody id=\"project-data\">\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'personnel'\"\n                          table=\"Timesheet Entries\" rlid=\"1\">\n                          <tr>\n                            <td class=\"mobile-hide-lg\">\n                              <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"last_name\" table=\"Timesheet Entries\" type=\"rl\" />,\n                              <eocfield disableclick=\"true\" name=\"first_name\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td class=\"mobile-hide-lg\">\n                              <eocfield disableclick=\"true\" name=\"classification\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td class=\"mobile-hide-lg\">\n                              <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"status\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <value-of select=\"concat(substring-before(@start_time, ':'), ':', substring-before(substring-after(@start_time, ':'), ':'))\"/>\n                               -\n                              <value-of select=\"concat(substring-before(@end_time, ':'), ':', substring-before(substring-after(@end_time, ':'), ':'))\"/>\n                            </td>\n                            <td class=\"text-center mobile-hide-lg\">\n                              <value-of select=\"format-number(number(@total_hours), '#.##')\" />\n                            </td>\n                            <td class=\"text-right\">\n                              <div class=\"dropdown cursor-pointer\">\n                                <a data-toggle=\"dropdown\">\n                                  <b>\n                                    <i class=\"material-icons faded-grey\">\n                                      more_horiz\n                                    </i>\n                                  </b>\n                                </a>\n                                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                  <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                    name=\"Details - Personnel Time Entry\" ondialogclose=\"refreshElements()\"\n                                    table=\"Timesheet Entries\" target=\"dialog\">\n                                    <viewparameter name=\"timesheet_entry_type\">personnel</viewparameter>\n                                    <viewparameter name=\"presentation\">\n                                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                    </viewparameter>\n                                    <span>\n                                      View\n                                    </span>\n                                  </viewlink>\n                                  <boardpermission name=\"Approve Timesheet\">\n                                    <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Personnel Time Entry\"\n                                      ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                      <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                      </viewparameter>\n                                      <span>\n                                        Edit\n                                      </span>\n                                    </viewlink>\n                                    <div class=\"dropdown-divider\" />\n                                    <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                      name=\"Delete - Timesheet Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                      <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                      </viewparameter>\n                                      Delete\n                                    </viewlink>\n                                  </boardpermission>\n                                </div>\n                              </div>\n                            </td>\n                            <td class=\"d-none\">\n                              <eocfield disableclick=\"true\" name=\"total_hours\" table=\"Timesheet Entries\" type=\"rl\" />\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </section>\n                </div>\n              </section>\n            </div>\n            <div class=\"row dst-display-row\">\n              <section class=\"col-md-12\">\n                <div class=\"form-header\" id=\"iu5oab\">\n                  <h4>\n                    <b>\n                      Equipment Time Entries\n                    </b>\n                  </h4>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <section aria-label=\"Table\" class=\"col mt-2\">\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                      <thead>\n                        <tr>\n                          <th>\n                            Equipment Number\n                          </th>\n                          <th>\n                            Description\n                          </th>\n                          <th>\n                            In/Out\n                          </th>\n                          <th>\n                            Total Hours\n                          </th>\n                          <th width=\"5%\" />\n                        </tr>\n                      </thead>\n                      <tbody id=\"project-data\">\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'equipment'\"\n                          table=\"Timesheet Entries\" rlid=\"3\">\n                          <tr>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"equipment_number\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <if test=\"false()\">\n                                <eocfield disableclick=\"true\" name=\"equipment_description\" table=\"Timesheet Entries\"\n                                  type=\"rl\" />\n                              </if>\n                              <choose>\n                                <when test=\"string-length(@equipment_description) > 30\">\n                                  <value-of select=\"concat(substring(@equipment_description, 1, 30), '...')\" />\n                                </when>\n                                <otherwise>\n                                  <value-of select=\"@equipment_description\" />\n                                </otherwise>\n                              </choose>\n                            </td>\n                            <td>\n                              <value-of select=\"concat(substring-before(@start_time, ':'), ':', substring-before(substring-after(@start_time, ':'), ':'))\"/>\n                               -\n                              <value-of select=\"concat(substring-before(@end_time, ':'), ':', substring-before(substring-after(@end_time, ':'), ':'))\"/>\n                            </td>\n                            <td >\n                              <value-of select=\"format-number(number(@total_hours), '#.##')\" />\n                            </td>\n                            <td class=\"text-right\">\n                              <div class=\"dropdown cursor-pointer\">\n                                <a data-toggle=\"dropdown\">\n                                  <b>\n                                    <i class=\"material-icons faded-grey\">\n                                      more_horiz\n                                    </i>\n                                  </b>\n                                </a>\n                                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                  <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                    name=\"Details - Equipment Time Entry\" ondialogclose=\"refreshElements()\"\n                                    table=\"Timesheet Entries\" target=\"dialog\">\n                                    <viewparameter name=\"timesheet_entry_type\">personnel</viewparameter>\n                                    <viewparameter name=\"presentation\">\n                                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                    </viewparameter>\n                                    <span>\n                                      View\n                                    </span>\n                                  </viewlink>\n                                  <boardpermission name=\"Approve Timesheet\">\n                                    <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Equipment Time Entry\"\n                                      ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                      <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                      </viewparameter>\n                                      <span>\n                                        Edit\n                                      </span>\n                                    </viewlink>\n                                    <div class=\"dropdown-divider\" />\n                                    <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                      name=\"Delete - Timesheet Entry\" ondialogclose=\"refreshElements()\" table=\"Timesheet Entries\" target=\"dialog\">\n                                      <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                      </viewparameter>\n                                      Delete\n                                    </viewlink>\n                                  </boardpermission>\n                                </div>\n                              </div>\n                            </td>\n                            <td class=\"d-none\">\n                              <eocfield disableclick=\"true\" name=\"total_hours\" table=\"Timesheet Entries\" type=\"rl\" />\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </section>\n                </div>\n              </section>\n            </div>\n            <div class=\"row dst-display-row\">\n              <span class=\"faded-grey mr-2 ml-3\">Signature:</span>\n            </div>\n            <div class=\"row dst-display-row\">\n              <eocfield class=\"d-none\" style=\"display: none;\" name=\"staff_signature\" id=\"staff_signature\" />\n              <img class=\"signature-display\">\n                <attribute name=\"src\">\n                  <expression name=\"staff_signature_src\">staff_signature</expression>\n                </attribute>\n              </img>\n            </div>\n            <div class=\"row dst-display-row align-items-end mb-3\">\n              <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                <span class=\"faded-grey small\">Signature</span>\n              </div>\n              <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                <eocfield name=\"staff_signature_date\" id=\"staff_signature_date\" />\n                <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                <span class=\"faded-grey small\">Date</span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row print-hide\">\n              <if test=\"@attachment_1\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 1:</span>\n                  <attachment name=\"attachment_1\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_1_name\"/></attachment>\n                </div>\n              </if>\n              <if test=\"@attachment_2\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 2:</span>\n                  <span>\n                    <attachment name=\"attachment_2\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_2_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n              <if test=\"@attachment_3\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 3:</span>\n                  <span>\n                    <attachment name=\"attachment_3\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_3_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n            </div>\n            <div class=\"row dst-display-row\">\n              <if test=\"@attachment_4\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 4:</span>\n                  <span>\n                    <attachment name=\"attachment_4\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_4_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n              <if test=\"@attachment_5\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 5:</span>\n                  <span>\n                    <attachment name=\"attachment_5\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_5_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n              <if test=\"@attachment_6\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 6:</span>\n                  <span>\n                    <attachment name=\"attachment_6\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_6_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n            </div>\n            <div class=\"row dst-display-row\">\n              <if test=\"@attachment_7\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 7:</span>\n                  <span>\n                    <attachment name=\"attachment_7\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_7_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n              <if test=\"@attachment_8\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 8:</span>\n                  <span>\n                    <attachment name=\"attachment_8\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_8_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n              <if test=\"@attachment_9\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 9:</span>\n                  <span>\n                    <attachment name=\"attachment_9\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_9_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n            </div>\n            <div class=\"row dst-display-row\">\n              <if test=\"@attachment_10\">\n                <div class=\"col-md-12 mb-3 dst-display-group\">\n                  <span class=\"faded-grey mr-2\">Attachment 10:</span>\n                  <span>\n                    <attachment name=\"attachment_10\" class=\"img-fluid\" table=\"Timesheets\"><eocfield name=\"attachment_10_name\"/></attachment>\n                  </span>\n                </div>\n              </if>\n            </div>\n          </section>\n        </div>\n      </div>\n      <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n        <returnlink class=\"text-white cursor-pointer\">\n          <div class=\"flex flex-col\">\n            <i class=\"material-icons\">keyboard_arrow_left</i>\n            RETURN\n          </div>\n        </returnlink>\n        <boardpermission name=\"Update\">\n          <viewlink name=\"Input - Timesheet\" class=\"text-white cursor-pointer\">\n            <div class=\"flex flex-col\">\n              <i class=\"material-icons\">edit</i>\n              EDIT\n            </div>\n          </viewlink>\n        </boardpermission>\n        <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n          aria-expanded=\"false\">\n          <i class=\"material-icons\">more_horiz</i>\n          ACTIONS\n          <div class=\"dropdown-menu cursor-pointer\">\n            <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n            <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n          </div>\n        </div>\n      </footer>\n    </main>\n    <div style=\"display: none\">\n      <foreignkeyreference table=\"Crews\" />\n      <foreignkey table=\"Crews\" />\n    </div>\n  </eocrepeatallrecords>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "Removed",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "_webeoc_delete_flag",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "_blank",
                "table": "Subcontractors",
                "html": "<html lang=\"en\">\r\n  <head>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n    <link href=\"css/8.3.0.0/boards.css\" rel=\"stylesheet\" />\r\n  </head>\r\n  <body></body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "Details - Crew Timesheets",
                "table": "Crews",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n      </span>\n    </section>\n      <eocrepeatallrecords>\n        <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n          <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"is6j8\">\n            <header class=\"container-fluid\" aria-label=\"Header\">\n              <div class=\"flex\">\n                <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                  <agencyinfo type=\"primarylogo\" />\n                </div>\n                <div>\n                  <h4>Record Details</h4>\n                  <h6>Board Record</h6>\n                </div>\n              </div>\n              <div class=\"flex print-hide align-items-center\">\n                <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                  <li class=\"nav-item dropdown flex flex-center\">\n                    <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                      <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                      <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </header>\n          </nav>\n          <div class=\"scrollable-area\">\n              <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijpok\">\n                <nav class=\"row print-hide my-2\">\n                  <div class=\"col\">\n                    <returnlink class=\"btn btn-sm btn-link text-primary\">\n                      <i class=\"material-icons\">arrow_back_ios</i>\n                      Return\n                    </returnlink>\n                  </div>\n                </nav>\n                <div class=\"row dst-display-row\">\n                  <div class=\"mb-3 dst-display-group col-md-4 d-flex align-items-center justify-content-between\" id=\"ilmeef\">\n                    <div>\n                      <span class=\"faded-grey mr-2\">Crew ID:</span>\n                      <span>\n                        <eocfield name=\"crew_id\" />\n                      </span>\n                    </div>\n                  </div>\n                  <div class=\"mb-3 dst-display-group col-md-4 d-flex align-items-center justify-content-between\">\n                    <div>\n                      <span class=\"faded-grey mr-2\">Crew Lead / Foreman:</span>\n                      <span>\n                        <eocfield name=\"foreman\" />\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"form-header\" id=\"iu5oab\">\n                  <h4>\n                    <b>\n                      Timesheets\n                    </b>\n                  </h4>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <section aria-label=\"Table\" class=\"col mt-2\">\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                      <thead>\n                        <tr>\n                          <th scope=\"col\" width=\"5%\">\n                            Date\n                          </th>\n                          <th scope=\"col\" width=\"5%\">\n                            Entries\n                          </th>\n                          <th scope=\"col\" width=\"5%\">\n                            Signed on\n                          </th>\n                          <th scope=\"col\" class=\"text-center\" width=\"5%\">\n                            Locked\n                          </th>\n                          <th scope=\"col\" width=\"5%\" />\n                        </tr>\n                      </thead>\n                      <tbody id=\"project-data\">\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Timesheets\" rlid=\"1\">\n                          <tr>\n                            <td scope=\"row\">\n                              <eocfield disableclick=\"true\" name=\"date\" table=\"Timesheets\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <if test=\"false()\">\n                                <eocfield disableclick=\"true\" name=\"approval_status\" table=\"Timesheets\" type=\"rl\" />\n                                <eocfield name=\"locked\" table=\"Timesheets\" type=\"rl\" />\n                                <eocfield disableclick=\"true\" name=\"staff_signature\" table=\"Timesheets\" type=\"rl\" />\n                                <eocfield disableclick=\"true\" name=\"staff_signature_date\" table=\"Timesheets\" type=\"rl\" />\n                              </if>\n                              <choose>\n                                <when test=\"@approval_status='Approved'\">\n                                  <span class=\"badge badge-success\">Approved</span>\n                                </when>\n                                <when test=\"@approval_status = 'Rejected'\">\n                                  <span class=\"badge badge-danger\">Rejected</span>\n                                </when>\n                                <otherwise>\n                                  <span class=\"badge badge-warning\">Pending</span>\n                                </otherwise>\n                              </choose>\n                            </td>\n                            <td>\n                              <eocfield name=\"staff_signature_date\" />\n                            </td>\n                            <td style=\"text-align: center;\">\n                              <if test=\"@locked = 'true' or @locked = 'True'\">\n                                <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\n                              </if>\n                            </td>\n                            <td class=\"text-right\">\n                              <div class=\"dropdown cursor-pointer\">\n                                <a data-toggle=\"dropdown\">\n                                  <b>\n                                    <i class=\"material-icons faded-grey\">\n                                      more_horiz\n                                    </i>\n                                  </b>\n                                </a>\n                                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                  <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Details - Timesheet\"\n                                    ondialogclose=\"refreshElements()\" table=\"Timesheets\" target=\"dialog\">\n                                    <viewparameter name=\"presentation\">\n                                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                    </viewparameter>\n                                    <span>\n                                      View\n                                    </span>\n                                  </viewlink>\n                                  <boardpermission name=\"Update\">\n                                    <if test=\"(@locked != 'true' or @approval_status != 'Approved') or (/data/assignedboardpermissiontags/boardpermissiontag[@name='Bird Administrator'])\">\n                                      <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Timesheet\"\n                                        ondialogclose=\"refreshElements()\" table=\"Timesheets\" target=\"dialog\">\n                                        <span>\n                                          Review\n                                        </span>\n                                      </viewlink>\n                                    </if>\n                                  </boardpermission>\n                                  <boardpermission name=\"Signature\">\n                                    <if test=\"@staff-signature = '' or not(@staff_signature)\">\n                                      <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Signature\"\n                                        ondialogclose=\"refreshElements()\" table=\"Timesheets\" target=\"dialog\">\n                                        <span>\n                                          Sign\n                                        </span>\n                                      </viewlink>\n                                    </if>\n                                  </boardpermission>\n                                    <pdflink class=\"dropdown-item scroll-link\" style=\"width: 95%; cursor: pointer\" enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"button\"\n                                      view=\"Details - Timesheet PDF\">\n                                      <span>\n                                        Download PDF\n                                      </span>\n                                    </pdflink>\n                                  <boardpermission name=\"Approve Timesheet\">\n                                    <div class=\"dropdown-divider\" />\n                                    <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                      name=\"Delete - Timesheet\" ondialogclose=\"refreshElements()\" table=\"Timesheets\" target=\"dialog\">\n                                      Delete\n                                    </viewlink>\n                                  </boardpermission>\n                                  <boardpermission name=\"OPS/PLN Lead\">\n                                    <if test=\"(@locked != 'true' or @approval_status != 'Approved') or (/data/assignedboardpermissiontags/boardpermissiontag[@name='Bird Administrator'])\">\n                                      <div class=\"dropdown-divider\" />\n                                      <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                                        name=\"Delete - Timesheet\" ondialogclose=\"refreshElements()\" table=\"Timesheets\" target=\"dialog\">\n                                        Delete\n                                      </viewlink>\n                                    </if>\n                                  </boardpermission>\n                                </div>\n                              </div>\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </section>\n                </div>\n              </section>\n          </div>\n          <boardpermission name=\"Bird Administrator\" />\n          <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n            <returnlink class=\"text-white cursor-pointer\">\n              <div class=\"flex flex-col\">\n                <i class=\"material-icons\">keyboard_arrow_left</i>\n                RETURN\n              </div>\n            </returnlink>\n            <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n              <i class=\"material-icons\">more_horiz</i>\n              ACTIONS\n              <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\n          </footer>\n        </main>\n      </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\"></script>\n    <script type=\"text/javascript\">\n        // Refresh elements of the page.\n        function refreshElements() {\n          window.location.reload();\n        }\n        $(document).ready(function() {\n    });\n      </script>\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Equipment",
                "table": "Equipment",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\" />\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton />\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"idou4\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link active\">Equipment</viewlink>\r\n            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"i8qel\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>List - Equipment</h4>\r\n                <h6>\r\n                  <incidentname />\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <viewlink name=\"Input - Equipment\" class=\"btn btn-sm btn-primary\">\r\n                                        Create New\r\n                                        <i class=\"material-icons ml-2\">add</i></viewlink>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"false\" map-name=\"Map\" />\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"subcontractor_name\">Subcontractor</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"crew_id\">Crew ID</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"equipment\">Equipment</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"equipment_type\">Equipment Type</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"equipment_description\">Equipment Description</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"equipment_fuel_type\">Equipment Fuel Type</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg text-center\">\r\n                          <sortlink field=\"locked\">Locked</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg text-center\">\r\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\" />\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords>\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"subcontractor_name\" table=\"Subcontractors\" type=\"fk\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"\">\r\n                            <eocfield name=\"crew_id\" table=\"Crews\" type=\"fk\" disableclick=\"true\" />\r\n                            <div class=\"d-none\">\r\n                              <eocfield name=\"equipment_id\" />\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <eocfield name=\"equipment\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"\">\r\n                            <eocfield name=\"equipment_type\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"equipment_description\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"equipment_fuel_type\" disableclick=\"true\" />\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg text-center\">\r\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\r\n                            <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Equipment\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Equipment\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                                  <boardpermission name=\"Update\">\r\n                                    <viewlink name=\"Input - Equipment\" class=\"dropdown-item\">Edit</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                                <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                                  <boardpermission name=\"Delete\">\r\n                                    <div class=\"dropdown-divider\" />\r\n                                    <viewlink name=\"Delete - Equipment\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                        <div class=\"d-none\">\r\n                          <eocfield name=\"locked\" disableclick=\"true\" />\r\n                          <eocfield name=\"record_approval_status\" disableclick=\"true\" />\r\n                          <foreignkey table=\"Crews\" />\r\n                        </div>\r\n                      </eocrepeatallrecords>\r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <viewlink name=\"Input - Equipment\" class=\"text-white\" refreshid=\"main-table\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons cursor-pointer\">add</i>\r\n                            CREATE NEW\r\n                        </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n              aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n              <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\r\n              <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\r\n              <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\r\n              <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a><a activate=\"pdf-button\"\r\n                class=\"dropdown-item d-md-flex\">Export to PDF</a><a activate=\"export-button\" class=\"dropdown-item\">Export to\r\n                CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Team Members - All",
                "table": "Team Members",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\r\n    <style type=\"text/css\">\r\n      .btn.btn-primary:focus, .btn.btn-primary:active, .btn.btn-primary:hover {\r\n\t\t\t  box-shadow: 0 0 0 0;\r\n\t\t\t}\r\n    </style>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\"/>\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton/>\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"iyhmn\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link active\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\r\n            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"iejsa\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\"/>\r\n              </div>\r\n              <div>\r\n                <h4>List - Team Members</h4>\r\n                <h6>\r\n                  <incidentname/>\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <viewlink name=\"Input - Team Member\" class=\"btn btn-sm btn-primary\">\r\n                      Create New\r\n                      <i class=\"material-icons ml-2\">add</i>\r\n                    </viewlink>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\"/>\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"true\"/>\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <section aria-label=\"Expressions\" updatesection=\"true\" id=\"expression-filter\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-12 mobile-center-md text-right\" id=\"expression-div\" data-apply-class-to-children=\"button:btn btn-sm btn-round exp-wrapper mr-2\">\r\n                        <button style=\"cursor: auto;\">\r\n                          <span class=\"badge badge-pill badge-expression-dark mr-2\">\r\n                            <expression name=\"Total\" useboardlevelfilters=\"true\" usegrouplevelfilters=\"false\" useuserlevelfilters=\"false\">count(*)</expression>\r\n                          </span>\r\n                          Total Team Members\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    <script>\r\n                      (function applyExpressionButtonClasses() {\r\n                        Array.prototype.slice.call(document.querySelectorAll('#expression-div button')).forEach(function (button) {\r\n                          button.classList.add('btn', 'btn-sm', 'btn-round', 'exp-wrapper', 'mr-2');\r\n                        });\r\n                      }());\r\n                    </script>\r\n                  </section>\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"personnel_id\">Personel ID</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"last_name\">Last Name</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"first_name\">First Name</sortlink>\r\n                        </th>\r\n                        <th class=\"bg-white  mobile-hide-lg\" width=\"5%\">\r\n                          <sortlink field=\"email\">Email</sortlink>\r\n                        </th>\r\n                        <th class=\"bg-white  mobile-hide-lg\" width=\"5%\">\r\n                          <sortlink field=\"cell_phone\">Cell Phone</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"gender\">Gender</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"departure_city\">Departure City</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"departure_state\">Departure State</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"resource_type\">Resource Type/Classification</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"crew_lead\">Crew Lead / Foreman</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\"/>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords>\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"\">\r\n                            <eocfield name=\"personnel_id\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"last_name\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"first_name\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"email\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"cell_phone\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"gender\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"departure_city\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"departure_state\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"resource_type\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"crew_lead\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Team Member\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Team Member\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <boardpermission name=\"Update\">\r\n                                  <viewlink name=\"Input - Team Member\" class=\"dropdown-item\">Edit</viewlink>\r\n                                </boardpermission>\r\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"location\" label-field=\"personnel_id\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\">Map Zoom</feature>\r\n                                <boardpermission name=\"Delete\">\r\n                                  <div class=\"dropdown-divider\"/>\r\n                                  <viewlink name=\"Delete - Team Member\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                </boardpermission>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                        <div class=\"d-none\">\r\n                          <eocfield name=\"locked\" disableclick=\"true\"/>\r\n                          <eocfield name=\"record_approval_status\" disableclick=\"true\"/>\r\n                          <foreignkeyreference table=\"Crews\"/>\r\n                          <foreignkey table=\"Crews\"/>\r\n                        </div>\r\n                      </eocrepeatallrecords>\r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <viewlink name=\"Input - Team Member\" class=\"text-white\" refreshid=\"main-table\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons cursor-pointer\">add</i>\r\n                CREATE NEW\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n              <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\r\n              <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\r\n              <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\r\n              <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\r\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\r\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\"/>\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\"/>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Crew",
                "table": "Crews",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n    <style>\r\n      @media print {\r\n          .pdf-hide { display: none !important; }\r\n      }\r\n  </style>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n    </section>\r\n    <eocrepeatallrecords>\r\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\r\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>Crew Details</h4>\r\n                <h6>Board Record</h6>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex print-hide align-items-center\">\r\n              <if test=\"/data//@locked = 'false' or /data//@locked = 'False' or /data//@locked='' or not(/data//@locked)\">\r\n                <boardpermission name=\"Update\">\r\n                  <viewlink name=\"Input - Crew\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\r\n                    <viewparameter name=\"presentation\">\r\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\r\n                    </viewparameter>\r\n                    Edit\r\n                    <i class=\"material-icons ml-2\">create</i></viewlink>\r\n                </boardpermission>\r\n              </if>\r\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\r\n                <li class=\"nav-item dropdown flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <div class=\"scrollable-area\">\r\n          <div>\r\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijp36\">\r\n              <nav class=\"row print-hide my-2 mobile-hide\">\r\n                <div class=\"col\">\r\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\r\n                    <i class=\"material-icons\">arrow_back_ios</i>\r\n                    Return\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"col text-right\">\r\n                  <if test=\"/data//@locked = 'false' or /data//@locked = 'False' or /data//@locked='' or not(/data//@locked)\">\r\n                    <boardpermission name=\"Update\">\r\n                      <viewlink name=\"Input - Crew\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\r\n                        <i class=\"material-icons\">create</i>\r\n                        Edit Record\r\n                      </viewlink>\r\n                    </boardpermission>\r\n                  </if>\r\n                </div>\r\n              </nav>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor's Name:</span>\r\n                  <span>\r\n                    <eocfield name=\"subcontractor_name\" table=\"Subcontractors\"  type=\"fk\" data-label=\"Subcontractor\"/>\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Crew ID:</span>\r\n                  <span>\r\n                    <eocfield name=\"crew_id\"/>\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Team Type:</span>\r\n                  <span>\r\n                    <eocfield name=\"team_type\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Crew Lead / Foreman:</span>\r\n                  <span>\r\n                    <eocfield name=\"foreman\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Work Location:</span>\r\n                  <span>\r\n                    <eocfield name=\"work_location_address\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Approval Status:</span>\r\n                    <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                      <span>\r\n                      Approved\r\n                      </span>\r\n                    </if>\r\n                </div>\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <if test=\"/data//@locked = 'true' or /data//@locked = 'True'\">\r\n                    <div class=\"alert alert-warning\" role=\"alert\">This record is locked</div>\r\n                  </if>\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"locked\" />\r\n                    <eocfield name=\"record_approval_status\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <section class=\"col-md-12\">\r\n                  <div class=\"form-header\" id=\"iu5oab\">\r\n                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\r\n                    <if test=\"/data//@locked != 'true' and /data//@locked != 'True'\">\r\n                      <boardpermission name=\"Create\">\r\n                        <div class=\"ml-auto print-hide related-button float-right\">\r\n                          <viewlink class=\"btn btn-sm btn-primary scroll-link mb-0\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Team Member\" ondialogclose=\"refreshElements()\" table=\"Team Members\" target=\"dialog\" type=\"button\">\r\n                            <viewparameter name=\"ownerid\">\r\n                              <value-of select=\"//@dataid\" />\r\n                            </viewparameter>\r\n                            <span>\r\n                              Add Crew Member\r\n                            </span>\r\n                            <i class=\"material-icons ml-2\">\r\n                              add\r\n                            </i>\r\n                          </viewlink>\r\n                        </div>\r\n                      </boardpermission>\r\n                    </if>\r\n                    <h4>\r\n                      <b>\r\n                        Team Members\r\n                      </b>\r\n                    </h4>\r\n                  </div>\r\n                  <div class=\"row dst-display-row\">\r\n                    <section aria-label=\"Table\" class=\"col mt-2\">\r\n                      <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>\r\n                              Personnel ID\r\n                            </th>\r\n                            <th>\r\n                              Last Name\r\n                            </th>\r\n                            <th>\r\n                              First Name\r\n                            </th>\r\n                            <th>\r\n                              Departure City\r\n                            </th>\r\n                            <th>\r\n                              Departure State\r\n                            </th>\r\n                            <th>\r\n                              Resource Type\r\n                            </th>\r\n                       \r\n                            <th>\r\n                              Crew Lead / Foreman\r\n                            </th>\r\n                            <th width=\"5%\" />\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody id=\"project-data\">\r\n                          <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Team Members\">\r\n                            <tr>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"last_name\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"first_name\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"departure_city\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"departure_state\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"resource_type\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                           \r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Team Members\" type=\"rl\" />\r\n                              </td>\r\n                              <td class=\"text-right\">\r\n                                <div class=\"dropdown cursor-pointer\">\r\n                                  <a data-toggle=\"dropdown\">\r\n                                    <b>\r\n                                      <i class=\"material-icons faded-grey\">\r\n                                        more_horiz\r\n                                      </i>\r\n                                    </b>\r\n                                  </a>\r\n                                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                    <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Details - Team Member\" ondialogclose=\"refreshElements()\" table=\"Team Members\" target=\"dialog\">\r\n                                      <span>\r\n                                        View\r\n                                      </span>\r\n                                    </viewlink>\r\n                                    <if test=\"/data//@locked = 'false' or /data//@locked = 'False' or /data//@locked='' or not(/data//@locked)\">\r\n                                      <boardpermission name=\"Update\">\r\n                                        <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Team Member\" ondialogclose=\"refreshElements()\" table=\"Team Members\" target=\"dialog\">\r\n                                          <span>\r\n                                            Edit\r\n                                          </span>\r\n                                        </viewlink>\r\n                                      </boardpermission>\r\n                                    </if>\r\n                                    <boardpermission name=\"Delete\">\r\n                                      <div class=\"dropdown-divider\" />\r\n                                      <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Delete - Team Member\" ondialogclose=\"refreshElements()\" table=\"Team Members\" target=\"dialog\">\r\n                                        Delete\r\n                                      </viewlink>\r\n                                    </boardpermission>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          </relatedlist>\r\n                        </tbody>\r\n                      </table>\r\n                    </section>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <section class=\"col-md-12\">\r\n                  <div class=\"form-header\" id=\"iu5oab\">\r\n                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\r\n                    <if test=\"/data//@locked = 'false' or /data//@locked = 'False' or /data//@locked='' or not(/data//@locked)\">\r\n                      <boardpermission name=\"Create\">\r\n                        <div class=\"ml-auto print-hide related-button float-right\">\r\n                          <viewlink class=\"btn btn-sm btn-primary scroll-link mb-0\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Equipment\" ondialogclose=\"refreshElements()\" table=\"Equipment\" target=\"dialog\" type=\"button\">\r\n                            <viewparameter name=\"ownerid\">\r\n                              <value-of select=\"//@dataid\" />\r\n                            </viewparameter>\r\n                            <span>\r\n                              Add Equipment\r\n                            </span>\r\n                            <i class=\"material-icons ml-2\">\r\n                              add\r\n                            </i>\r\n                          </viewlink>\r\n                        </div>\r\n                      </boardpermission>\r\n                    </if>\r\n                    <h4>\r\n                      <b>\r\n                        Equipment\r\n                      </b>\r\n                    </h4>\r\n                  </div>\r\n                  <div class=\"row dst-display-row\">\r\n                    <section aria-label=\"Table\" class=\"col mt-2\">\r\n                      <table class=\"table related-table table-striped table-sm mt-1\" id=\"equipment-table\" width=\"100%\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>\r\n                              Equipment\r\n                            </th>\r\n                            <th>\r\n                              Type\r\n                            </th>\r\n                            <th>\r\n                              Description\r\n                            </th>\r\n                            <th>\r\n                              Fuel Type\r\n                            </th>\r\n                            <th width=\"5%\" />\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody id=\"project-data\">\r\n                          <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Equipment\">\r\n                            <tr>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"equipment\" table=\"Equipment\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"equipment_type\" table=\"Equipment\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"equipment_description\" table=\"Equipment\" type=\"rl\" />\r\n                              </td>\r\n                              <td>\r\n                                <eocfield disableclick=\"true\" name=\"equipment_fuel_type\" table=\"Equipment\" type=\"rl\" />\r\n                              </td>\r\n                              <td class=\"text-right\">\r\n                                <div class=\"dropdown cursor-pointer\">\r\n                                  <a data-toggle=\"dropdown\">\r\n                                    <b>\r\n                                      <i class=\"material-icons faded-grey\">\r\n                                        more_horiz\r\n                                      </i>\r\n                                    </b>\r\n                                  </a>\r\n                                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                    <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Details - Equipment\" ondialogclose=\"refreshElements()\" table=\"Equipment\" target=\"dialog\">\r\n                                      <span>\r\n                                        View\r\n                                      </span>\r\n                                    </viewlink>\r\n                                    <if test=\"/data//@locked = 'false' or /data//@locked = 'False' or /data//@locked='' or not(/data//@locked)\">\r\n                                      <boardpermission name=\"Update\">\r\n                                        <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Input - Equipment\" ondialogclose=\"refreshElements()\" table=\"Equipment\" target=\"dialog\">\r\n                                          <span>\r\n                                            Edit\r\n                                          </span>\r\n                                        </viewlink>\r\n                                      </boardpermission>\r\n                                    </if>\r\n                                    <boardpermission name=\"Delete\">\r\n                                      <div class=\"dropdown-divider\" />\r\n                                      <viewlink class=\"dropdown-item text-danger scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\" name=\"Delete - Equipment\" ondialogclose=\"refreshElements()\" table=\"Equipment\" target=\"dialog\">\r\n                                        Delete\r\n                                      </viewlink>\r\n                                    </boardpermission>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          </relatedlist>\r\n                        </tbody>\r\n                      </table>\r\n                    </section>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n              <section class=\"table-responsive-md pdf-hide\">\r\n                <h4>\r\n                  <b>\r\n                    History Log\r\n                  </b>\r\n                </h4>\r\n                <table id=\"crew-history\" class=\"table\"/>\r\n              </section>\r\n            </section>\r\n          </div>\r\n        </div>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\r\n          <returnlink class=\"text-white cursor-pointer\">\r\n            <div class=\"flex flex-col\">\r\n              <i class=\"material-icons\">keyboard_arrow_left</i>\r\n              RETURN\r\n            </div>\r\n          </returnlink>\r\n          <boardpermission name=\"Update\">\r\n            <viewlink name=\"Input - Crew\" class=\"text-white cursor-pointer\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons\">edit</i>\r\n                EDIT\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            <i class=\"material-icons\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\r\n        </footer>\r\n      </main>\r\n      <div style=\"display:none\">\r\n        <foreignkeyreference table=\"Subcontractors\" />\r\n        <foreignkey table=\"Subcontractors\" />\r\n      </div>\r\n    </eocrepeatallrecords>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\" ></script>\r\n\r\n    <script type=\"text/javascript\">\r\n        // Refresh elements of the page.\r\n        function refreshElements() {\r\n          window.location.reload();\r\n        }\r\n        $(document).ready(function() {\r\n      <if test=\"/data/@dataid != '0'\">\r\n        new WebEOCCXD.WebEOCHistoryLog({\r\n        parentElement: '#crew-history',\r\n        dataid: '<value-of select=\"//@dataid\"/>'\r\n      })\r\n      </if>\r\n    });\r\n      </script>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Equipment - All",
                "table": "Equipment",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\"/>\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton/>\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"idou4\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link active\">Equipment</viewlink>\r\n            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"i8qel\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\"/>\r\n              </div>\r\n              <div>\r\n                <h4>List - Equipment</h4>\r\n                <h6>\r\n                  <incidentname/>\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <viewlink name=\"Input - Equipment\" class=\"btn btn-sm btn-primary\">\r\n                      Create New\r\n                      <i class=\"material-icons ml-2\">add</i>\r\n                    </viewlink>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\"/>\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"false\" map-name=\"Map\"/>\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <section aria-label=\"Expressions\" updatesection=\"true\" id=\"expression-filter\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-12 mobile-center-md text-right\" id=\"expression-div\" data-apply-class-to-children=\"button:btn btn-sm btn-round exp-wrapper mr-2\">\r\n                        <button style=\"cursor: auto;\">\r\n                          <span class=\"badge badge-pill badge-expression-dark mr-2\">\r\n                            <expression name=\"Total\" useboardlevelfilters=\"true\" usegrouplevelfilters=\"false\" useuserlevelfilters=\"false\">count(*)</expression>\r\n                          </span>\r\n                          Total Equipment\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    <script>\r\n                      (function applyExpressionButtonClasses() {\r\n                        Array.prototype.slice.call(document.querySelectorAll('#expression-div button')).forEach(function (button) {\r\n                          button.classList.add('btn', 'btn-sm', 'btn-round', 'exp-wrapper', 'mr-2');\r\n                        });\r\n                      }());\r\n                    </script>\r\n                  </section>\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"subcontractor_name\">Subcontractor</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"crew_id\">Crew ID</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"equipment\">Equipment</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"equipment_type\">Equipment Type</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"equipment_description\">Equipment Description</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"equipment_fuel_type\">Equipment Fuel Type</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg text-center\">\r\n                          <sortlink field=\"locked\">Locked</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg text-center\">\r\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg text-center\">\r\n                          <sortlink field=\"entrydate\">Last Updated:</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\"/>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords>\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"\">\r\n                            <eocfield name=\"subcontractor_name\" table=\"Subcontractors\" type=\"fk\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"\">\r\n                            <eocfield name=\"crew_id\" table=\"Crews\" type=\"fk\" disableclick=\"true\"/>\r\n                            <div class=\"d-none\">\r\n                              <eocfield name=\"equipment_id\"/>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <eocfield name=\"equipment\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"equipment_type\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"equipment_description\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"equipment_fuel_type\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg text-center\">\r\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\r\n                            <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"entrydate\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Equipment\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Equipment\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <boardpermission name=\"Update\">\r\n                                  <viewlink name=\"Input - Equipment\" class=\"dropdown-item\">Edit</viewlink>\r\n                                </boardpermission>\r\n                                <boardpermission name=\"Delete\">\r\n                                  <div class=\"dropdown-divider\"/>\r\n                                  <viewlink name=\"Delete - Equipment\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                </boardpermission>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                        <div class=\"d-none\">\r\n                          <eocfield name=\"locked\" disableclick=\"true\"/>\r\n                          <eocfield name=\"record_approval_status\" disableclick=\"true\"/>\r\n                          <foreignkeyreference table=\"Crews\"/>\r\n                          <foreignkey table=\"Crews\"/>\r\n                        </div>\r\n                      </eocrepeatallrecords>\r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <viewlink name=\"Input - Equipment\" class=\"text-white\" refreshid=\"main-table\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons cursor-pointer\">add</i>\r\n                CREATE NEW\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n              <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\r\n              <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\r\n              <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\r\n              <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\r\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\r\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\"/>\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\"/>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Subcontractor Rates",
                "table": "Subcontractors",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n        name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\"\n        href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n        path=\"/css/material-kit.min.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\"\n    data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n    <section class=\"d-none\">\n        <span button=\"pdf-button\">\n            <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n        </span>\n         <span button=\"export-button\">\n        <exportbutton />\n      </span>\n    </section>\n    <eocrepeatallrecords>\n        <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n            <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\n                <header class=\"container-fluid\" aria-label=\"Header\">\n                    <div class=\"flex\">\n                        <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                            <agencyinfo type=\"primarylogo\" />\n                        </div>\n                        <div>\n                            <h4>Record Details</h4>\n                            <h6>Board Record</h6>\n                        </div>\n                    </div>\n                    <div class=\"flex print-hide align-items-center\">\n                            <boardpermission name=\"Bird Administrator\">\n                                <viewlink name=\"Input - Subcontractor Rates\" class=\"btn btn-sm btn-primary mobile-hide d-panel\"\n                                    type=\"button\">\n                                    <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                                    </viewparameter>\n                                    Edit\n                                    <i class=\"material-icons ml-2\">create</i>\n                                </viewlink>\n                            </boardpermission>\n                        <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                            <li class=\"nav-item dropdown flex flex-center\">\n                                <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\"\n                                    x-placement=\"bottom-end\">\n                                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </header>\n            </nav>\n            <div class=\"scrollable-area\">\n                    <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijdpg\">\n                        <nav class=\"row print-hide my-2 mobile-hide\">\n                            <div class=\"col\">\n                                <returnlink class=\"btn btn-sm btn-link text-primary\">\n                                    <i class=\"material-icons\">arrow_back_ios</i>\n                                    Return\n                                </returnlink>\n                            </div>\n                            <div class=\"col text-right\">\n                                <boardpermission name=\"Update\">\n                                    <viewlink name=\"Input - Subcontractor Rates\" type=\"link\"\n                                        class=\"btn btn-sm btn-link text-primary\">\n                                        <i class=\"material-icons\">create</i>\n                                        Edit Record\n                                    </viewlink>\n                                </boardpermission>\n                            </div>\n                        </nav>\n                        <nav class=\"mb-4\" aria-label=\"Section Navigation\">\n                            <div class=\"row\">\n                                <div class=\"col-md-6\">\n                                    <h5>Personnel Rates</h5>\n                                    <ul class=\"list-unstyled\">\n                                        <li><a href=\"#apprentice1\">Apprentice 1</a></li>\n                                        <li><a href=\"#apprentice2\">Apprentice 2</a></li>\n                                        <li><a href=\"#apprentice3\">Apprentice 3</a></li>\n                                        <li><a href=\"#apprentice4\">Apprentice 4</a></li>\n                                        <li><a href=\"#apprentice5\">Apprentice 5</a></li>\n                                        <li><a href=\"#apprentice6\">Apprentice 6</a></li>\n                                        <li><a href=\"#apprentice7\">Apprentice 7</a></li>\n                                        <li><a href=\"#crew_lead\">Crew Lead</a></li>\n                                        <li><a href=\"#crew_supervisor\">Crew Supervisor</a></li>\n                                        <li><a href=\"#assessor\">Assessor</a></li>\n                                        <li><a href=\"#driver\">Driver</a></li>\n                                        <li><a href=\"#foreman\">Foreman</a></li>\n                                        <li><a href=\"#supervisor\">Supervisor</a></li>\n                                        <li><a href=\"#general_foreman\">General Foreman</a></li>\n                                        <li><a href=\"#groundman\">Groundman</a></li>\n                                        <li><a href=\"#ug_lineman\">UG Lineman</a></li>\n                                        <li><a href=\"#lineman\">Lineman</a></li>\n                                        <li><a href=\"#logistics_support\">Logistics Support</a></li>\n                                        <li><a href=\"#mechanic\">Mechanic</a></li>\n                                        <li><a href=\"#operator\">Operator</a></li>\n                                        <li><a href=\"#safety\">Safety</a></li>\n                                        <li><a href=\"#superintendent\">Superintendent</a></li>\n                                        <li><a href=\"#support\">Support</a></li>\n                                        <li><a href=\"#team_lead\">Team Lead</a></li>\n                                        <li><a href=\"#vegetation_trimmer\">Vegetation Trimmer</a></li>\n                                        <li><a href=\"#wire_guards\">Wire Guards</a></li>\n                                    </ul>\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <h5>Equipment Rates</h5>\n                                    <ul class=\"list-unstyled\">\n                                        <li><a href=\"#backhoe\">Backhoe</a></li>\n                                        <li><a href=\"#bucket_truck_distribution\">Bucket Truck - Distribution</a></li>\n                                        <li><a href=\"#bucket_truck_service\">Bucket Truck - Service</a></li>\n                                        <li><a href=\"#bucket_truck_transmission\">Bucket Truck - Transmission</a></li>\n                                        <li><a href=\"#chipper\">Chipper</a></li>\n                                        <li><a href=\"#digger_derrick\">Digger Derrick</a></li>\n                                        <li><a href=\"#digger_derrick_rear_lot\">Digger Derrick-rear lot</a></li>\n                                        <li><a href=\"#equipment_trailer\">Equipment Trailer</a></li>\n                                        <li><a href=\"#knuckle_boom_truck\">Knuckle Boom Truck</a></li>\n                                        <li><a href=\"#pickup\">Pickup</a></li>\n                                        <li><a href=\"#pole_hauler\">Pole Hauler</a></li>\n                                        <li><a href=\"#pole_trailer\">Pole Trailer</a></li>\n                                        <li><a href=\"#service_truck\">Service Truck</a></li>\n                                        <li><a href=\"#backyard_machine\">Backyard Machine</a></li>\n                                        <li><a href=\"#hydrovac\">Hydrovac</a></li>\n                                        <li><a href=\"#specialty_equipment\">Specialty Equipment</a></li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </nav>\n\n                        <!-- Apprentice 1-->\n                        <section class=\"form-section\" id=\"apprentice1\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 1</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap1_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap1_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap1_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap1_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap1_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 1 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap1_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 2-->\n                        <section class=\"form-section\" id=\"apprentice2\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 2</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap2_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap2_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap2_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap2_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap2_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 2 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap2_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 3-->\n                        <section class=\"form-section\" id=\"apprentice3\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 3</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap3_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap3_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap3_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap3_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap3_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 3 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap3_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 4-->\n                        <section class=\"form-section\" id=\"apprentice4\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 4</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap4_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap4_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap4_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap4_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap4_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 4 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap4_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 5-->\n                        <section class=\"form-section\" id=\"apprentice5\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 5</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap5_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap5_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap5_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap5_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap5_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 5 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap5_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 6-->\n                        <section class=\"form-section\" id=\"apprentice6\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 6</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap6_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap6_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap6_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap6_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap6_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 6 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap6_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Apprentice 7-->\n                        <section class=\"form-section\" id=\"apprentice7\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Apprentice 7</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap7_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap7_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ap7_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap7_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap7_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Apprentice 7 Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ap7_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Crew Lead -->\n                        <section class=\"form-section\" id=\"crew_lead\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Crew Lead</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cl_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cl_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cl_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cl_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cl_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cl_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Crew Supervisor -->\n                        <section class=\"form-section\" id=\"crew_supervisor\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Crew Supervisor</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cs_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cs_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_cs_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cs_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cs_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Crew Supervisor Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_cs_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Assessor -->\n                        <section class=\"form-section\" id=\"assessor\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Assessor</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_as_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_as_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_as_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_as_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_as_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Assessor Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_as_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Driver -->\n                        <section class=\"form-section\" id=\"driver\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Driver</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_dr_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_dr_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_dr_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_dr_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_dr_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Driver Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_dr_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                          <!-- Foreman -->\n                        <section class=\"form-section\" id=\"foreman\">\n                            <div class=\"form-header\" id=\"ik8i1x\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Foreman</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ioox0i\">\n                                    <span class=\"faded-grey mr-2\">Foreman Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_fm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ifktx1\">\n                                    <span class=\"faded-grey mr-2\">Foreman Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_fm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ip95yx\">\n                                    <span class=\"faded-grey mr-2\">Foreman Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_fm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iuqk4a\">\n                                    <span class=\"faded-grey mr-2\">Foreman Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_fm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iv9fu1\">\n                                    <span class=\"faded-grey mr-2\">Foreman Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_fm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ieftuf\">\n                                    <span class=\"faded-grey mr-2\">Foreman Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_fm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        \n\n                        <!-- Supervisor -->\n                        <section class=\"form-section\" id=\"supervisor\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Supervisor</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_sv_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_sv_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_sv_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_sv_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_sv_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Supervisor Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_sv_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- General Foreman -->\n                        <section class=\"form-section\">\n                            <div class=\"form-header\" id=\"general_foreman\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>General Foreman</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"ih723h\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Subcontractor Standard Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gf_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"ihnqoj\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Subcontractor Overtime Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gf_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"i8qz3i\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Subcontractor Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gf_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"ifhial\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Utility Standard Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gf_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"ifj6rh\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Utility Overtime Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gf_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-4\" id=\"ikmxjh\">\n                                    <span class=\"faded-grey mr-2\">General Foreman Utility Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gf_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Groundman -->\n                        <section class=\"form-section\" id=\"groundman\">\n                            <div class=\"form-header\" id=\"i4xvrg\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Groundman</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"icwyhm\">\n                                    <span class=\"faded-grey mr-2\">Groundman Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"i0uvcs\">\n                                    <span class=\"faded-grey mr-2\">Groundman Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ih2k5h\">\n                                    <span class=\"faded-grey mr-2\">Groundman Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_gm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iy119k\">\n                                    <span class=\"faded-grey mr-2\">Groundman Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iiiy6z\">\n                                    <span class=\"faded-grey mr-2\">Groundman Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ir4rue\">\n                                    <span class=\"faded-grey mr-2\">Groundman Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_gm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- UG Lineman -->\n                        <section class=\"form-section\" id=\"ug_lineman\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>UG Lineman</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_uglm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_uglm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_uglm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_uglm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_uglm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">UG Lineman Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_uglm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Lineman -->\n                        <section class=\"form-section\" id=\"lineman\">\n                            <div class=\"form-header\" id=\"iyzo5j\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Lineman</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"i7s1dt\">\n                                    <span class=\"faded-grey mr-2\">Lineman Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_lm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ibop11\">\n                                    <span class=\"faded-grey mr-2\">Lineman Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_lm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iul3r2\">\n                                    <span class=\"faded-grey mr-2\">Lineman Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_lm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iejhpz\">\n                                    <span class=\"faded-grey mr-2\">Lineman Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_lm_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"irw59l\">\n                                    <span class=\"faded-grey mr-2\">Lineman Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_lm_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ijsemq\">\n                                    <span class=\"faded-grey mr-2\">Lineman Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_lm_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Logistics Support -->\n                        <section class=\"form-section\" id=\"logistics_support\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Logistics Support</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ls_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ls_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_ls_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ls_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ls_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Logistics Support Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_ls_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Mechanic -->\n                        <section class=\"form-section\" id=\"mechanic\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Mechanic</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_mech_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_mech_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_mech_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_mech_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_mech_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Mechanic Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_mech_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Operator -->\n                        <section class=\"form-section\" id=\"operator\">\n                            <div class=\"form-header\" id=\"i0nffl\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Operator</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"idjowt\">\n                                    <span class=\"faded-grey mr-2\">Operator Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_op_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"i8ig5i\">\n                                    <span class=\"faded-grey mr-2\">Operator Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_op_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ip4q6c\">\n                                    <span class=\"faded-grey mr-2\">Operator Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_op_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"i2bb1p\">\n                                    <span class=\"faded-grey mr-2\">Operator Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_op_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"ijfpdh\">\n                                    <span class=\"faded-grey mr-2\">Operator Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_op_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\" id=\"iu3ggl\">\n                                    <span class=\"faded-grey mr-2\">Operator Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_op_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Safety -->\n                        <section class=\"form-section\" id=\"safety\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Safety</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_safety_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_safety_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_safety_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_safety_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_safety_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Safety Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_safety_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Superintendent -->\n                        <section class=\"form-section\" id=\"superintendent\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Superintendent</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_superintendent_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_superintendent_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_superintendent_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_superintendent_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_superintendent_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Superintendent Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_superintendent_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Support -->\n                        <section class=\"form-section\" id=\"support\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Support</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_support_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_support_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_support_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_support_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_support_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Support Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_support_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Team Lead -->\n                        <section class=\"form-section\" id=\"team_lead\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Team Lead</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_team_lead_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_team_lead_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_team_lead_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_team_lead_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_team_lead_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Team Lead Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_team_lead_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Vegetation Trimmer -->\n                        <section class=\"form-section\" id=\"vegetation_trimmer\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Vegetation Trimmer</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_vegetation_trimmer_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_vegetation_trimmer_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_vegetation_trimmer_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_vegetation_trimmer_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_vegetation_trimmer_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Vegetation Trimmer Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_vegetation_trimmer_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Wire Guards -->\n                        <section class=\"form-section\" id=\"wire_guards\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Wire Guards</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Subcontractor Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_wire_guards_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Subcontractor Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_wire_guards_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Subcontractor Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_wire_guards_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Utility Standard Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_wire_guards_std_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Utility Overtime Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_wire_guards_ot_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-4 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Wire Guards Utility Premium Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_wire_guards_pt_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        \n                        <section class=\"form-section\" id=\"equipment_rates\">\n                            <div class=\"form-header\" id=\"ijgxuf\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h2>\n                                    <b>Equipment Rates</b>\n                                </h2>\n                            </div>\n                            <!-- Backhoe -->\n                            <section class=\"form-section\" id=\"backhoe\">\n                                <div class=\"form-header\" id=\"ixa9xg\">\n                                    <h4>\n                                        <b>Backhoe</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iflqg2f\">\n                                        <span class=\"faded-grey mr-2\">Backhoe Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_backhoe_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i7d85ux\">\n                                        <span class=\"faded-grey mr-2\">Backhoe Utility Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_backhoe_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Bucket Truck - Distribution -->\n                            <section class=\"form-section\" id=\"bucket_truck_distribution\">\n                                <div class=\"form-header\" id=\"iej7ai\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Bucket Truck - Distribution</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"ieqc4b8\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Distribution Subcontractor\n                                            Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_bucket_truck_distribution_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iln4i98\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Distribution Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_bucket_truck_distribution_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Bucket Truck - Service -->\n                            <section class=\"form-section\" id=\"bucket_truck_service\">\n                                <div class=\"form-header\" id=\"iiyh0p\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Bucket Truck - Service</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iqyjhy6\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Service Subcontractor\n                                            Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_bucket_truck_service_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"ilzujyg\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Service Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_bucket_truck_service_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Bucket Truck - Transmission -->\n                            <section class=\"form-section\" id=\"bucket_truck_transmission\">\n                                <div class=\"form-header\" id=\"ib4jai\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Bucket Truck - Transmission</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"isnft2k\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Transmission Subcontractor\n                                            Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_bucket_truck_transmission_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iejrg79\">\n                                        <span class=\"faded-grey mr-2\">Bucket Truck - Transmission Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_bucket_truck_transmission_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Chipper -->\n                            <section class=\"form-section\" id=\"chipper\">\n                                <div class=\"form-header\" id=\"is8b015\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Chipper</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"idtimyn\">\n                                        <span class=\"faded-grey mr-2\">Chipper Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_chipper_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"imkrq4c\">\n                                        <span class=\"faded-grey mr-2\">Chipper Utility Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_chipper_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Digger Derrick -->\n                            <section class=\"form-section\" id=\"digger_derrick\">\n                                <div class=\"form-header\" id=\"ie5aaye\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Digger Derrick</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i7i93r1\">\n                                        <span class=\"faded-grey mr-2\">Digger Derrick Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_digger_derrick_rate\" />\n                                        </span>\n                                    </div>\n                                        <span class=\"faded-grey mr-2\">Digger Derrick Utility Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_digger_derrick_rate\" />\n                                        </span>\n                                    </div>\n                            </section>\n                            <!-- Digger Derrick-rear lot -->\n                            <section class=\"form-section\" id=\"digger_derrick_rear_lot\">\n                                <div class=\"form-header\" id=\"ietf21h\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Digger Derrick-rear lot</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i2f42jl\">\n                                        <span class=\"faded-grey mr-2\">Digger Derrick-rear lot Subcontractor\n                                            Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_digger_derrick_rear_lot_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iz430h9\">\n                                        <span class=\"faded-grey mr-2\">Digger Derrick-rear lot Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_digger_derrick_rear_lot_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Equipment Trailer -->\n                            <section class=\"form-section\" id=\"equipment_trailer\">\n                                <div class=\"form-header\" id=\"if7b6y2\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Equipment Trailer</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"it9fhoy\">\n                                        <span class=\"faded-grey mr-2\">Equipment Trailer Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_equipment_trailer_rate\" />\n                                        </span>\n                                    </div>\n                                    \n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i0oxlo4\">\n                                        <span class=\"faded-grey mr-2\">Equipment Trailer Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_equipment_trailer_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Knuckle Boom Truck -->\n                            <section class=\"form-section\" id=\"knuckle_boom_truck\">\n                                <div class=\"form-header\" id=\"inaod26\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Knuckle Boom Truck</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"ia4s4zh\">\n                                        <span class=\"faded-grey mr-2\">Knuckle Boom Truck Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_knuckle_boom_truck_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i6964u9\">\n                                        <span class=\"faded-grey mr-2\">Knuckle Boom Truck Utility Hourly\n                                            Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_knuckle_boom_truck_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Pickup -->\n                            <section class=\"form-section\" id=\"pickup\">\n                                <div class=\"form-header\" id=\"icrex68\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Pickup</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iymgp1o\">\n                                        <span class=\"faded-grey mr-2\">Pickup Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_pickup_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"ia4sscg\">\n                                        <span class=\"faded-grey mr-2\">Pickup Utility Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_pickup_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Pole Hauler -->\n                            <section class=\"form-section\" id=\"pole_hauler\">\n                                <div class=\"form-header\" id=\"ir1jhqk\">\n                                    <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                    <h4>\n                                        <b>Pole Hauler</b>\n                                    </h4>\n                                </div>\n                                <div class=\"row dst-display-row\">\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i630yhe\">\n                                        <span class=\"faded-grey mr-2\">Pole Hauler Subcontractor Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"sc_pole_hauler_rate\" />\n                                        </span>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3 dst-display-group\" id=\"ilp2nva\">\n                                        <span class=\"faded-grey mr-2\">Pole Hauler Utility Hourly Rate:</span>\n                                        <span>\n                                            <eocfield name=\"utl_pole_hauler_rate\" />\n                                        </span>\n                                    </div>\n                                </div>\n                            </section>\n                            <!-- Pole Trailer -->\n                            <section class=\"form-section\" id=\"pole_trailer\">\n                            </section>\n                            <div class=\"form-header\" id=\"iczteod\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Pole Trailer</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iha7g0j\">\n                                    <span class=\"faded-grey mr-2\">Pole Trailer Subcontractor Hourl Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_pole_trailer_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iusrdqp\">\n                                    <span class=\"faded-grey mr-2\">Pole Trailer Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_pole_trailer_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Service Truck -->\n                        <section class=\"form-section\" id=\"service_truck\">\n                            <div class=\"form-header\" id=\"i2tzcdi\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Service Truck</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"icveskg\">\n                                    <span class=\"faded-grey mr-2\">Service Truck Subcontractor Hourl Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_service_truck_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iutiqjq\">\n                                    <span class=\"faded-grey mr-2\">Service Truck Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_service_truck_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Backyard Machine -->\n                        <section class=\"form-section\" id=\"backyard_machine\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Backyard Machine</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-6 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Backyard Machine Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_backyard_machine_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Backyard Machine Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_backyard_machine_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n\n                        <!-- Hydrovac -->\n                        <section class=\"form-section\" id=\"hydrovac\">\n                            <div class=\"form-header\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Hydrovac</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-6 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Hydrovac Subcontractor Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_hydrovac_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-3 dst-display-group\">\n                                    <span class=\"faded-grey mr-2\">Hydrovac Utility Hourly Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_hydrovac_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <!-- Specialty Equipment -->\n                        <section class=\"form-section\" id=\"specialty_equipment\">\n                            <div class=\"form-header\" id=\"iz1hm33\">\n                                <hr class=\"horizontal-line-break mt-3 mb-3\" />\n                                <h4>\n                                    <b>Specialty Equipment</b>\n                                </h4>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"i0fi906\">\n                                    <span class=\"faded-grey mr-2\">Specialty Equipment Subcontractor Hourl Rate:</span>\n                                    <span>\n                                        <eocfield name=\"sc_specialty_equipment_rate\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-3 dst-display-group\" id=\"immhvbu\">\n                                    <span class=\"faded-grey mr-2\">Specialty Equipment Utility Hourly\n                                        Rate:</span>\n                                    <span>\n                                        <eocfield name=\"utl_specialty_equipment_rate\" />\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                    </section>\n            </div>\n            <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                <returnlink class=\"text-white cursor-pointer\">\n                    <div class=\"flex flex-col\">\n                        <i class=\"material-icons\">keyboard_arrow_left</i>\n                        RETURN\n                    </div>\n                </returnlink>\n                <boardpermission name=\"Bird Administrator\">\n                    <viewlink name=\"Input - Subcontractor Rates\" class=\"text-white cursor-pointer\">\n                        <div class=\"flex flex-col\">\n                            <i class=\"material-icons\">edit</i>\n                            EDIT\n                        </div>\n                    </viewlink>\n                </boardpermission>\n                <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                    aria-expanded=\"false\">\n                    <i class=\"material-icons\">more_horiz</i>\n                    ACTIONS\n                    <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print\n                            Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a><a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a></div>\n                </div>\n            </footer>\n        </main>\n    </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n        path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n        path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n        path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n        path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n        path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n        path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n        path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n        path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n        path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n        path=\"/js/ux-webeoc-board-standards.js\" />\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\"></script>\n    \n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "Details - Equipment",
                "table": "Equipment",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n    </section>\r\n    <eocrepeatallrecords>\r\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\r\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"ioi1z\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>Record Details</h4>\r\n                <h6>Board Record</h6>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex print-hide align-items-center\">\r\n              <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                <boardpermission name=\"Update\">\r\n                  <viewlink name=\"Input - Equipment\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\r\n                    <viewparameter name=\"presentation\">\r\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\r\n                    </viewparameter>\r\n                    Edit\r\n                    <i class=\"material-icons ml-2\">create</i></viewlink>\r\n                </boardpermission>\r\n              </if>\r\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\r\n                <li class=\"nav-item dropdown flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <foreignkey type=\"viewlink\" table=\"Crews\" />\r\n        <div class=\"scrollable-area\">\r\n          <div>\r\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"iwmle\">\r\n              <nav class=\"row print-hide my-2 mobile-hide\">\r\n                <div class=\"col\">\r\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\r\n                    <i class=\"material-icons\">arrow_back_ios</i>\r\n                    Return\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"col text-right\">\r\n                  <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                  <boardpermission name=\"Update\">\r\n                    <viewlink name=\"Input - Equipment\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\r\n                      <i class=\"material-icons\">create</i>\r\n                      Edit Record\r\n                    </viewlink>\r\n                  </boardpermission>\r\n                  </if>\r\n                </div>\r\n              </nav>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor's Name:</span>\r\n                  <value-of select=\"/data//@subcontractor_name\" />\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"subcontractor_name\" table=\"Subcontractors\" type=\"fk\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Crew Name:</span>\r\n                  <span>\r\n                    <eocfield id=\"crew_id\" name=\"crew_id\" table=\"Crews\" type=\"fk\" data-label=\"Crews\"/>\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ie5jjy\">\r\n                  <span class=\"faded-grey mr-2\">Equipment:</span>\r\n                  <span>\r\n                    <eocfield name=\"equipment\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"i0noke\">\r\n                  <span class=\"faded-grey mr-2\">Equipment Type:</span>\r\n                  <span>\r\n                    <eocfield name=\"equipment_type\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"im7qkk\">\r\n                  <span class=\"faded-grey mr-2\">Equipment Fuel Type:</span>\r\n                  <span>\r\n                    <eocfield name=\"equipment_fuel_type\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"itj8mn\">\r\n                  <span class=\"faded-grey mr-2\">Equipment Description:</span>\r\n                  <span>\r\n                    <eocfield name=\"equipment_description\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-group\">\r\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"itj8mn\">\r\n                  <span class=\"faded-grey mr-2\">Approval Status:</span>\r\n                  <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                    <span>\r\n                      Approved\r\n                    </span>\r\n                  </if>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                    <div class=\"alert alert-warning\" role=\"alert\">This record is locked</div>\r\n                  </if>\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"locked\" />\r\n                    <eocfield name=\"record_approval_status\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <section class=\"table-responsive-md pdf-hide\">\r\n                <h4>\r\n                  <b>\r\n                    History Log\r\n                  </b>\r\n                </h4>\r\n                <table id=\"equipment-history\" class=\"table\"/>\r\n              </section>\r\n            </section>\r\n          </div>\r\n        </div>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\r\n          <returnlink class=\"text-white cursor-pointer\">\r\n            <div class=\"flex flex-col\">\r\n              <i class=\"material-icons\">keyboard_arrow_left</i>\r\n              RETURN\r\n            </div>\r\n          </returnlink>\r\n          <boardpermission name=\"Update\">\r\n            <viewlink name=\"Input - Equipment\" class=\"text-white cursor-pointer\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons\">edit</i>\r\n                EDIT\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            <i class=\"material-icons\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\r\n        </footer>\r\n      </main>\r\n    </eocrepeatallrecords>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\" ></script>\r\n  </body>\r\n  <script type=\"text/javascript\">\r\n    (function(){\r\n      <if test=\"/data/@dataid != '0'\">\r\n        new WebEOCCXD.WebEOCHistoryLog({\r\n        parentElement: '#equipment-history',\r\n        dataid: '<value-of select=\"//@dataid\"/>'\r\n      })\r\n      </if>\r\n    })();\r\n  </script>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "UTIL - Subcontractor Entity Filter - All",
                "table": "Subcontractors",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n      </span>\n    </section>\n    <eocrepeatallrecords>\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"is6j8\">\n          <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                <agencyinfo type=\"primarylogo\" />\n              </div>\n              <div>\n                <h4>Record Details</h4>\n                <h6>Board Record</h6>\n              </div>\n            </div>\n            <div class=\"flex print-hide align-items-center\">\n              <if test=\"@locked != 'true' and @locked != 'True'\">\n                <boardpermission name=\"Update\">\n                  <viewlink name=\"Input - Subcontractor\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                    <viewparameter name=\"presentation\">\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                    </viewparameter>\n                    Edit\n                    <i class=\"material-icons ml-2\">create</i></viewlink>\n                </boardpermission>\n              </if>\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                <li class=\"nav-item dropdown flex flex-center\">\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </header>\n        </nav>\n        <div class=\"scrollable-area\">\n   \n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijpok\">\n              <nav class=\"row print-hide my-2 mobile-hide\">\n                <div class=\"col\">\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\n                    <i class=\"material-icons\">arrow_back_ios</i>\n                    Return\n                  </returnlink>\n                </div>\n                <div class=\"col text-right\">\n                  <if test=\"@locked != 'true' and @locked != 'True'\">\n                    <boardpermission name=\"Update\">\n                      <viewlink name=\"Input - Subcontractor\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                        <i class=\"material-icons\">create</i>\n                        Edit Record\n                      </viewlink>\n                    </boardpermission>\n                  </if>\n                </div>\n              </nav>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilmeef\">\n                  <span class=\"faded-grey mr-2\">Subcontractor Name:</span>\n                  <span>\n                    <eocfield name=\"subcontractor_name\" />\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"il5wee\">\n                  <span class=\"faded-grey mr-2\">Date Submitted:</span>\n                  <span>\n                    <eocfield name=\"date_submitted\" />\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ig2u7q\">\n                  <span class=\"faded-grey mr-2\">Receiving Utility:</span>\n                  <span>\n                    <eocfield name=\"receiving_utility\" />\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"iv7gkl\">\n                  <span class=\"faded-grey mr-2\">Subcontractor Lead:</span>\n                  <span>\n                    <eocfield name=\"subcontractor_lead\" />\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ie34jb\">\n                  <span class=\"faded-grey mr-2\">Subcontractor Lead Phone:</span>\n                  <span>\n                    <eocfield name=\"subcontractor_lead_phone\" />\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilxe08\">\n                  <span class=\"faded-grey mr-2\">Prepared By:</span>\n                  <span>\n                    <eocfield name=\"prepared_by\" />\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\n                  <span class=\"faded-grey mr-2\">Expected Arrival Date/Time:</span>\n                  <span>\n                    <eocfield name=\"expected_arrival_date_time\" />\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\n                  <span class=\"faded-grey mr-2\">Approval Status:</span>\n                  <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True' \">\n                    <span>Approved</span>\n                  </if>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ilvs9v\">\n                  <if test=\"@locked = 'true' or @locked = 'True'\">\n                    <div class=\"alert alert-warning\" role=\"alert\">This record is locked</div>\n                  </if>\n                  <span class=\"d-none\">\n                    <eocfield name=\"locked\" />\n                    <eocfield name=\"record_approval_status\" />\n                  </span>\n                </div>\n              </div>\n              <hr class=\"horizontal-line-break mt-3 mb-3\" />\n              <div class=\"row dst-display-row\">\n                <section class=\"col-md-12\">\n                  <foreignkey table=\"Subcontractors\" type=\"fk\" class=\"d-none\"/>\n                  <if test=\"false()\">\n                    <relatedexpression name=\"crewRecords\" class=\"d-none\" table=\"Crews\">\n                      SUM(\n                        CASE\n                          WHEN (crew_id IS NOT NULL) THEN 1\n                          ELSE 0\n                        END\n                      )\n                    </relatedexpression>\n                  </if>\n                  <if test=\"@crewRecords > 0\">\n                    <div class=\"form-header\" id=\"i7xug5\">\n                      <h4>\n                        <b>Crews</b>\n                      </h4>\n                    </div>\n                  </if>\n                  <relatedlist table=\"Crews\" filter=\"_webeoc_delete_flag = 'No'\">\n                    <div class=\"mb-3 dst-display-group col-6\">\n                      <span class=\"faded-grey mr-2\">Crew ID:</span>\n                      <span>\n                        <eocfield name=\"crew_id\" table=\"Crews\" type=\"rl\" />\n                      </span>\n                    </div>\n                    <div class=\"mb-3 dst-display-group col-6\">\n                      <span class=\"faded-grey mr-2\">Crew Type:</span>\n                      <span>\n                        <eocfield name=\"team_type\" table=\"Crews\" type=\"rl\"/>\n                      </span>\n                    </div>\n                    <hr/>\n                  </relatedlist>\n                </section>\n              </div>\n              <div class=\"row dst-display-row table-responsive-md\">\n                <section class=\"pdf-hide col-md-12\">\n                  <h4>\n                    <b>\n                      History Log\n                    </b>\n                  </h4>\n                  <table id=\"subcontractors-history\" class=\"table\"/>\n                </section>\n              </div>\n            </section>\n            <div style=\"display: none;\">\n              <!-- Rates Information -->\n                <eocfield name=\"sc_ap1_std_rate\" label=\"Apprentice 1 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap1_ot_rate\" label=\"Apprentice 1 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap1_pt_rate\" label=\"Apprentice 1 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap1_std_rate\" label=\"Apprentice 1 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap1_ot_rate\" label=\"Apprentice 1 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap1_pt_rate\" label=\"Apprentice 1 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap2_std_rate\" label=\"Apprentice 2 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap2_ot_rate\" label=\"Apprentice 2 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap2_pt_rate\" label=\"Apprentice 2 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap2_std_rate\" label=\"Apprentice 2 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap2_ot_rate\" label=\"Apprentice 2 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap2_pt_rate\" label=\"Apprentice 2 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap3_std_rate\" label=\"Apprentice 3 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap3_ot_rate\" label=\"Apprentice 3 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap3_pt_rate\" label=\"Apprentice 3 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap3_std_rate\" label=\"Apprentice 3 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap3_ot_rate\" label=\"Apprentice 3 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap3_pt_rate\" label=\"Apprentice 3 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap4_std_rate\" label=\"Apprentice 4 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap4_ot_rate\" label=\"Apprentice 4 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap4_pt_rate\" label=\"Apprentice 4 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap4_std_rate\" label=\"Apprentice 4 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap4_ot_rate\" label=\"Apprentice 4 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap4_pt_rate\" label=\"Apprentice 4 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap5_std_rate\" label=\"Apprentice 5 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap5_ot_rate\" label=\"Apprentice 5 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap5_pt_rate\" label=\"Apprentice 5 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap5_std_rate\" label=\"Apprentice 5 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap5_ot_rate\" label=\"Apprentice 5 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap5_pt_rate\" label=\"Apprentice 5 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap6_std_rate\" label=\"Apprentice 6 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap6_ot_rate\" label=\"Apprentice 6 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap6_pt_rate\" label=\"Apprentice 6 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap6_std_rate\" label=\"Apprentice 6 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap6_ot_rate\" label=\"Apprentice 6 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap6_pt_rate\" label=\"Apprentice 6 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ap7_std_rate\" label=\"Apprentice 7 Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ap7_ot_rate\" label=\"Apprentice 7 Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ap7_pt_rate\" label=\"Apprentice 7 Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ap7_std_rate\" label=\"Apprentice 7 Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ap7_ot_rate\" label=\"Apprentice 7 Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ap7_pt_rate\" label=\"Apprentice 7 Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_cl_std_rate\" label=\"Crew Lead Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_cl_ot_rate\" label=\"Crew Lead Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_cl_pt_rate\" label=\"Crew Lead Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_cl_std_rate\" label=\"Crew Lead Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_cl_ot_rate\" label=\"Crew Lead Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_cl_pt_rate\" label=\"Crew Lead Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_cs_std_rate\" label=\"Crew Supervisor Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_cs_ot_rate\" label=\"Crew Supervisor Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_cs_pt_rate\" label=\"Crew Supervisor Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_cs_std_rate\" label=\"Crew Supervisor Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_cs_ot_rate\" label=\"Crew Supervisor Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_cs_pt_rate\" label=\"Crew Supervisor Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_as_std_rate\" label=\"Assessor Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_as_ot_rate\" label=\"Assessor Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_as_pt_rate\" label=\"Assessor Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_as_std_rate\" label=\"Assessor Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_as_ot_rate\" label=\"Assessor Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_as_pt_rate\" label=\"Assessor Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_dr_std_rate\" label=\"Driver Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_dr_ot_rate\" label=\"Driver Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_dr_pt_rate\" label=\"Driver Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_dr_std_rate\" label=\"Driver Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_dr_ot_rate\" label=\"Driver Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_dr_pt_rate\" label=\"Driver Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_fm_std_rate\" label=\"Foreman Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_fm_ot_rate\" label=\"Foreman Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_fm_pt_rate\" label=\"Foreman Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_fm_std_rate\" label=\"Foreman Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_fm_ot_rate\" label=\"Foreman Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_fm_pt_rate\" label=\"Foreman Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_sv_std_rate\" label=\"Supervisor Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_sv_ot_rate\" label=\"Supervisor Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_sv_pt_rate\" label=\"Supervisor Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_sv_std_rate\" label=\"Supervisor Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_sv_ot_rate\" label=\"Supervisor Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_sv_pt_rate\" label=\"Supervisor Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_gf_std_rate\" label=\"General Foreman Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_gf_ot_rate\" label=\"General Foreman Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_gf_pt_rate\" label=\"General Foreman Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_gf_std_rate\" label=\"General Foreman Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_gf_ot_rate\" label=\"General Foreman Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_gf_pt_rate\" label=\"General Foreman Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_gm_std_rate\" label=\"Groundman Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_gm_ot_rate\" label=\"Groundman Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_gm_pt_rate\" label=\"Groundman Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_gm_std_rate\" label=\"Groundman Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_gm_ot_rate\" label=\"Groundman Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_gm_pt_rate\" label=\"Groundman Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_uglm_std_rate\" label=\"UG Lineman Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_uglm_ot_rate\" label=\"UG Lineman Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_uglm_pt_rate\" label=\"UG Lineman Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_uglm_std_rate\" label=\"UG Lineman Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_uglm_ot_rate\" label=\"UG Lineman Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_uglm_pt_rate\" label=\"UG Lineman Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_lm_std_rate\" label=\"Lineman Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_lm_ot_rate\" label=\"Lineman Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_lm_pt_rate\" label=\"Lineman Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_lm_std_rate\" label=\"Lineman Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_lm_ot_rate\" label=\"Lineman Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_lm_pt_rate\" label=\"Lineman Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_ls_std_rate\" label=\"Logistics Support Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_ls_ot_rate\" label=\"Logistics Support Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_ls_pt_rate\" label=\"Logistics Support Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_ls_std_rate\" label=\"Logistics Support Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_ls_ot_rate\" label=\"Logistics Support Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_ls_pt_rate\" label=\"Logistics Support Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_mech_std_rate\" label=\"Mechanic Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_mech_ot_rate\" label=\"Mechanic Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_mech_pt_rate\" label=\"Mechanic Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_mech_std_rate\" label=\"Mechanic Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_mech_ot_rate\" label=\"Mechanic Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_mech_pt_rate\" label=\"Mechanic Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_op_std_rate\" label=\"Operator Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_op_ot_rate\" label=\"Operator Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_op_pt_rate\" label=\"Operator Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_op_std_rate\" label=\"Operator Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_op_ot_rate\" label=\"Operator Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_op_pt_rate\" label=\"Operator Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_safety_std_rate\" label=\"Safety Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_safety_ot_rate\" label=\"Safety Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_safety_pt_rate\" label=\"Safety Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_safety_std_rate\" label=\"Safety Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_safety_ot_rate\" label=\"Safety Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_safety_pt_rate\" label=\"Safety Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_superintendent_std_rate\" label=\"Superintendent Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_superintendent_ot_rate\" label=\"Superintendent Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_superintendent_pt_rate\" label=\"Superintendent Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_superintendent_std_rate\" label=\"Superintendent Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_superintendent_ot_rate\" label=\"Superintendent Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_superintendent_pt_rate\" label=\"Superintendent Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_support_std_rate\" label=\"Support Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_support_ot_rate\" label=\"Support Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_support_pt_rate\" label=\"Support Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_support_std_rate\" label=\"Support Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_support_ot_rate\" label=\"Support Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_support_pt_rate\" label=\"Support Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_team_lead_std_rate\" label=\"Team Lead Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_team_lead_ot_rate\" label=\"Team Lead Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_team_lead_pt_rate\" label=\"Team Lead Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_team_lead_std_rate\" label=\"Team Lead Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_team_lead_ot_rate\" label=\"Team Lead Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_team_lead_pt_rate\" label=\"Team Lead Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_vegetation_trimmer_std_rate\" label=\"Vegetation Trimmer Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_vegetation_trimmer_ot_rate\" label=\"Vegetation Trimmer Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_vegetation_trimmer_pt_rate\" label=\"Vegetation Trimmer Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_vegetation_trimmer_std_rate\" label=\"Vegetation Trimmer Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_vegetation_trimmer_ot_rate\" label=\"Vegetation Trimmer Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_vegetation_trimmer_pt_rate\" label=\"Vegetation Trimmer Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_wire_guards_std_rate\" label=\"Wire Guards Subcontractor Standard Hourly Rate\" />\n                <eocfield name=\"sc_wire_guards_ot_rate\" label=\"Wire Guards Subcontractor Overtime Hourly Rate\" />\n                <eocfield name=\"sc_wire_guards_pt_rate\" label=\"Wire Guards Subcontractor Premium Hourly Rate\" />\n                <eocfield name=\"utl_wire_guards_std_rate\" label=\"Wire Guards Utility Standard Hourly Rate\" />\n                <eocfield name=\"utl_wire_guards_ot_rate\" label=\"Wire Guards Utility Overtime Hourly Rate\" />\n                <eocfield name=\"utl_wire_guards_pt_rate\" label=\"Wire Guards Utility Premium Hourly Rate\" />\n                <eocfield name=\"sc_backhoe_rate\" label=\"Backhoe Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_backhoe_rate\" label=\"Backhoe Utility Hourly Rate\" />\n                <eocfield name=\"sc_bucket_truck_distribution_rate\" label=\"Bucket Truck - Distribution Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_bucket_truck_distribution_rate\" label=\"Bucket Truck - Distribution Utility Hourly Rate\" />\n                <eocfield name=\"sc_bucket_truck_service_rate\" label=\"Bucket Truck - Service Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_bucket_truck_service_rate\" label=\"Bucket Truck - Service Utility Hourly Rate\" />\n                <eocfield name=\"sc_bucket_truck_transmission_rate\" label=\"Bucket Truck - Transmission Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_bucket_truck_transmission_rate\" label=\"Bucket Truck - Transmission Utility Hourly Rate\" />\n                <eocfield name=\"sc_chipper_rate\" label=\"Chipper Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_chipper_rate\" label=\"Chipper Utility Hourly Rate\" />\n                <eocfield name=\"sc_digger_derrick_rate\" label=\"Digger Derrick Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_digger_derrick_rate\" label=\"Digger Derrick Utility Hourly Rate\" />\n                <eocfield name=\"sc_digger_derrick_rear_lot_rate\" label=\"Digger Derrick-rear lot Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_digger_derrick_rear_lot_rate\" label=\"Digger Derrick-rear lot Utility Hourly Rate\" />\n                <eocfield name=\"sc_equipment_trailer_rate\" label=\"Equipment Trailer Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_equipment_trailer_rate\" label=\"Equipment Trailer Utility Hourly Rate\" />\n                <eocfield name=\"sc_knuckle_boom_truck_rate\" label=\"Knuckle Boom Truck Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_knuckle_boom_truck_rate\" label=\"Knuckle Boom Truck Utility Hourly Rate\" />\n                <eocfield name=\"sc_pickup_rate\" label=\"Pickup Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_pickup_rate\" label=\"Pickup Utility Hourly Rate\" />\n                <eocfield name=\"sc_pole_hauler_rate\" label=\"Pole Hauler Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_pole_hauler_rate\" label=\"Pole Hauler Utility Hourly Rate\" />\n                <eocfield name=\"sc_pole_trailer_rate\" label=\"Pole Trailer Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_pole_trailer_rate\" label=\"Pole Trailer Utility Hourly Rate\" />\n                <eocfield name=\"sc_service_truck_rate\" label=\"Service Truck Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_service_truck_rate\" label=\"Service Truck Utility Hourly Rate\" />\n                <eocfield name=\"sc_backyard_machine_rate\" label=\"Backyard Machine Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_backyard_machine_rate\" label=\"Backyard Machine Utility Hourly Rate\" />\n                <eocfield name=\"sc_hydrovac_rate\" label=\"Hydrovac Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_hydrovac_rate\" label=\"Hydrovac Utility Hourly Rate\" />\n                <eocfield name=\"sc_specialty_equipment_rate\" label=\"Specialty Equipment Subcontractor Hourly Rate\" />\n                <eocfield name=\"utl_specialty_equipment_rate\" label=\"Specialty Equipment Utility Hourly Rate\" />\n              <!-- / Rates Information -->\n            </div>\n        </div>\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n          <returnlink class=\"text-white cursor-pointer\">\n            <div class=\"flex flex-col\">\n              <i class=\"material-icons\">keyboard_arrow_left</i>\n              RETURN\n            </div>\n          </returnlink>\n          <boardpermission name=\"Update\">\n            <viewlink name=\"Input - Subcontractor\" class=\"text-white cursor-pointer\">\n              <div class=\"flex flex-col\">\n                <i class=\"material-icons\">edit</i>\n                EDIT\n              </div>\n            </viewlink>\n          </boardpermission>\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            <i class=\"material-icons\">more_horiz</i>\n            ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\n        </footer>\n      </main>\n    </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\"></script>\n    <script type=\"text/javascript\">\n        // Refresh elements of the page.\n        function refreshElements() {\n          window.location.reload();\n        }\n        $(document).ready(function() {\n      <if test=\"/data/@dataid != '0'\">\n        new WebEOCCXD.WebEOCHistoryLog({\n          parentElement: '#subcontractors-history',\n          dataid: '<value-of select=\"//@dataid\"/>'\n        })\n      </if>\n    });\n      </script>\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    },
                    {
                        "name": "PublicEntries",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(cast(_dst_form_submission_url as nvarchar(256)),'')",
                                    "operation": "<>",
                                    "value": "''",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Display - Reports",
                "table": "Subcontractors",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<head>\n    <title>Reports</title>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <link rel=\"stylesheet\" type=\"text/css\"\n        href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://webeocboardfiles.juvare.com/board/1.0/css/material-kit.min.css\" />\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/jquery.min.js\" />\n    <style type=\"text/css\">\n        .container-fluid {\n            padding: 0px !important;\n        }\n\n        div[id^=\"observation-\"].collapse:not(.show) {\n            display: block;\n            max-height: 4.5rem !important;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-line-clamp: 3;\n            -webkit-box-orient: vertical;\n        }\n\n        div[id^=\"observation-\"].collapsing {\n            min-height: 4.5rem !important;\n        }\n\n        .observation-holder a.collapsed:after {\n            content: '+ Show More';\n        }\n\n        .observation-holder a:not(.collapsed):after {\n            content: '- Show Less';\n        }\n\n        div[id^=\"recommendation-\"].collapse:not(.show) {\n            display: block;\n            max-height: 4.5rem !important;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-line-clamp: 3;\n            -webkit-box-orient: vertical;\n        }\n\n        div[id^=\"recommendation-\"].collapsing {\n            min-height: 4.5rem !important;\n        }\n\n        .recommendation-holder a.collapsed:after {\n            content: '+ Show More';\n        }\n\n        .recommendation-holder a:not(.collapsed):after {\n            content: '- Show Less';\n        }\n\n        .resize-container-xs .mobile-hide-lg,\n        .resize-container-s .mobile-hide-lg,\n        .resize-container-m .mobile-hide-lg {\n            display: none;\n        }\n    </style>\n    <!--existing styles-->\n    <style>\n        input.hidden {\n            display: none;\n        }\n    </style>\n    <style>\n        /*latest*/\n        .cards-report .card {}\n\n        .cards-report .card-deck {\n            width: 100%;\n            margin: 5px;\n        }\n    </style>\n</head>\n<xsl:variable xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" name=\"filterCount\"\n    select=\"count(/data/currentfilter/viewfilters/viewfilter[@name != '' and (not(@remove) or @remove != 'true') and (not(@grouplevel) or @grouplevel != 'true')]) + count(/data/currentfilter/searchfilters/searchfilter)\" />\n\n<body data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-viewid=\"{/data/@viewid}\">\n    <span class=\"media-breakpoint-state\" />\n    <section class=\"d-none\">\n        <span button=\"search-button\">\n            <searchbutton />\n        </span>\n        <span button=\"clearsearch-button\">\n            <clearsearchbutton />\n        </span>\n        <span button=\"pdf-button\">\n            <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">\n                PDF\n            </pdflink>\n        </span>\n        <span button=\"export-button\">\n            <exportbutton />\n        </span>\n    </section>\n    <main id=\"main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\"\n        class=\"page-wrap flex flex-row\">\n        <div class=\"flex flex-column flex-column-grow\">\n            <section class=\"section-navigation-board mobile-hide print-hide pl-3 pb-2 bg-white\">\n                <nav class=\"nav\">\n                    <boardpermission name=\"Bird Administrator\">\n                        <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n                        <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n                        <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n                        <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n                        <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n                        <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n                        <boardpermission name=\"View Reports\">\n                            <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link active\">Reports</viewlink>\n                        </boardpermission>\n                        <notapplied>\n                            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n                            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n                            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n                            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n                            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n                            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n                            <boardpermission name=\"View Reports\">\n                                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link active\">Reports</viewlink>\n                            </boardpermission>\n                        </notapplied>\n                    </boardpermission>\n                </nav>\n            </section>\n            <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\">\n                <header class=\"container-fluid\" aria-label=\"Header\">\n                    <div class=\"flex\">\n                        <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                            <agencyinfo type=\"primarylogo\" />\n                        </div>\n                        <div>\n                            <h1 class=\"boardname\">\n                                <b>\n                                    Reports\n                                </b>\n                            </h1>\n                            <h2 class=\"incidentname\">\n                                <incidentname />\n                            </h2>\n                        </div>\n                    </div>\n                    <div>\n                        <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                            <!-- create and filter button -->\n                            <li class=\"dropdown nav-item flex flex-center\">\n                                <i class=\"material-icons cursor-pointer faded-grey\"\n                                    data-toggle=\"dropdown\">more_horiz</i>\n                                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </header>\n            </nav>\n            <section class=\"container-fluid scrollable-area\">\n                <div class=\"flex flex-column js-target-map-move\">\n                    <div id=\"content-wrapper\" class=\"flex-grow\">\n                        <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main pl-1\">\n                            <section class=\"col mt-2\" aria-label=\"Table\">\n                                <section aria-label=\"Expressions\" id=\"expression-filter\">\n                                    <div class=\"row\">\n                                        <div class=\"col-12 mobile-center-md text-right\" id=\"expression-div\"\n                                            data-apply-class-to-children=\"button:btn btn-sm btn-round exp-wrapper mr-2\" />\n                                    </div>\n                                </section>\n                                <div class=\"row cards-report\">\n                                    <div class=\"card-deck\">\n                                        <boardpermission name=\"View Subcontractor Expense Summary\">\n                                            <if test=\"not(/data/@positionname = 'Bird - CMD')\">\n                                                <div class=\"card\">\n                                                    <viewlink name=\"Report - Expense Summary\">\n                                                        <viewparameter name=\"rate_type\">subcontractor</viewparameter>\n                                                        <div class=\"card-body\">\n                                                            <h5 class=\"card-title\">\n                                                                <i class=\"material-icons ml-0\">summarize</i>Expense Summary Report (Contractor Rates)\n                                                            </h5>\n                                                        </div>\n                                                        <div class=\"card-footer\">\n                                                            <small class=\"text-muted print-hide\">click to view</small>\n                                                        </div>\n                                                    </viewlink>\n                                                </div>\n                                            </if>\n                                        </boardpermission>\n                                        <boardpermission name=\"View Utility Expense Summary\">\n                                            <if test=\"not(/data/@positionname = 'Bird - CMD')\">\n                                                <div class=\"card\">\n                                                    <viewlink name=\"Report - Expense Summary\">\n                                                        <viewparameter name=\"rate_type\">utility</viewparameter>\n                                                        <div class=\"card-body\">\n                                                            <h5 class=\"card-title\">\n                                                                <i class=\"material-icons ml-0\">summarize</i>Expense Summary Report (Utility Rates)\n                                                            </h5>\n                                                        </div>\n                                                        <div class=\"card-footer\">\n                                                            <small class=\"text-muted print-hide\">click to view</small>\n                                                        </div>\n                                                    </viewlink>\n                                                </div>\n                                            </if>\n                                        </boardpermission>\n                                        <boardpermission name=\"View Subcontractor Hours Report\">\n                                            <div class=\"card\">\n                                                <viewlink name=\"Report - Subcontractor Hours\">\n                                                    <div class=\"card-body\">\n                                                        <h5 class=\"card-title\">\n                                                            <i class=\"material-icons ml-0\">summarize</i>Subcontractor Hours Report\n                                                        </h5>\n                                                    </div>\n                                                    <div class=\"card-footer\">\n                                                        <small class=\"text-muted print-hide\">click to view</small>\n                                                    </div>\n                                                </viewlink>\n                                            </div>\n                                        </boardpermission>\n                                    </div>\n                                </div>\n                            </section>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n                <div class=\"flex flex-col dropup\">\n                    <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\n                    ACTIONS\n                    <div class=\"dropdown-menu cursor-pointer\">\n                        <boardpermission name=\"Bird Administrator\">\n                            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Subcontractor Roster\n                            </viewlink>\n                            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Crews\n                            </viewlink>\n                            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Crew Members\n                            </viewlink>\n                            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Equipment\n                            </viewlink>\n                            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Timesheets\n                            </viewlink>\n                            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                Expenses\n                            </viewlink>\n                            <boardpermission name=\"View Reports\">\n                                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                            </boardpermission>\n                            <notapplied>\n                                <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Subcontractor Roster\n                                </viewlink>\n                                <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Crews\n                                </viewlink>\n                                <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Crew Members\n                                </viewlink>\n                                <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Equipment\n                                </viewlink>\n                                <viewlink name=\"List - Timesheet\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Timesheets\n                                </viewlink>\n                                <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">\n                                    Expenses\n                                </viewlink>\n                                <boardpermission name=\"View Reports\">\n                                    <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                                </boardpermission>\n                            </notapplied>\n                        </boardpermission>\n                        <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n                        <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n                        <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n                    </div>\n                </div>\n            </footer>\n        </div>\n    </main>\n    <section class=\"modal fade\" id=\"filter-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"filter-modal-label\"\n        aria-hidden=\"true\">\n    </section>\n\n    <section class=\"modal fade\" id=\"close-panel-modal\" tabindex=\"-1\" role=\"dialog\"\n        aria-labelledby=\"close-panel-modal-label\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h4 class=\"modal-title text-bold\" id=\"close-panel-modal-label\">\n                        Confirmation\n                    </h4>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\" />\n                        <i class=\"material-icons\">close</i>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                    Are you sure you want to close the panel? Unsaved changes will be lost\n                </div>\n                <div class=\"modal-footer\">\n                    <a data-dismiss=\"modal\" class=\"custom-link mr-4\">Cancel</a>\n                    <div data-dismiss=\"modal\" button=\"close-detail-panel\" class=\"btn btn-sm btn-primary\">\n                        Yes\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/popper.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/material-kit.min.js\" type=\"text/javascript\"></script>\n    <script type=\"text/javascript\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/ux-webeoc-board-standards.min.js\"></script>\n\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "Details - Expenses",
                "table": "Expenses",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n  </head>\n  <xsl:variable name=\"parentDataid\">\n    <value-of select=\"/data/ViewParameter[@name = 'parentDataid']\" />\n  </xsl:variable>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n      </span>\n    </section>\n    <applytheme/>\n    <eocrepeatallrecords>\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"ifk2j\">\n          <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                <agencyinfo type=\"primarylogo\"/>\n              </div>\n              <div>\n                <h4>Record Details</h4>\n                <h6>Board Record</h6>\n              </div>\n            </div>\n            <div class=\"flex print-hide align-items-center\">\n              <boardpermission name=\"Update\">\n                <viewlink name=\"Input - Expense Entry\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                  <viewparameter name=\"presentation\">\n                    <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                  </viewparameter>\n                  Edit\n                  <i class=\"material-icons ml-2\">create</i></viewlink>\n              </boardpermission>\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                <li class=\"nav-item dropdown flex flex-center\">\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </header>\n        </nav>\n        <div class=\"scrollable-area\">\n          <div>\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ik9ez\">\n              <nav class=\"row print-hide my-2 mobile-hide\">\n                <div class=\"col\">\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\n                    <i class=\"material-icons\">arrow_back_ios</i>\n                    Return\n                  </returnlink>\n                </div>\n                <div class=\"col text-right\">\n                  <boardpermission name=\"Update\">\n                    <viewlink name=\"Input - Expense Entry\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                      <i class=\"material-icons\">create</i>\n                      Edit Record\n                      <viewparameter name=\"parentDataid\">\n                        <value-of select=\"/data/ViewParameter[@name = 'parentDataid']\" />\n                      </viewparameter>\n                    </viewlink>\n                  </boardpermission>\n                </div>\n              </nav>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"if2j4v\">\n                  <span class=\"faded-grey mr-2\">Crew Member:</span>\n                  <span>\n                    <eocfield name=\"crew_member\"/>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"if2j4v\">\n                  <span class=\"faded-grey mr-2\">Expense Type:</span>\n                  <span>\n                    <eocfield name=\"expense_type\"/>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"iab3t8\">\n                  <span class=\"faded-grey mr-2\">Store/Restaurant/Hotel:</span>\n                  <span>\n                    <eocfield name=\"store_restaurant_hotel\"/>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\">\n                  <span class=\"faded-grey mr-2\">City, State:</span>\n                  <span>\n                    <eocfield name=\"city_state\"/>\n                  </span>\n                  <span>\n                    <feature name=\"location\" address=\"city_state\" autopopulate=\"address\" type=\"button\" class=\"form-control btn btn-sm btn-primary px-2\">\n                      <div class=\"d-flex align-items-center justify-content-center\">\n                        Map\n                        <i class=\"material-icons ml-1\">room</i>\n                      </div>\n                    </feature>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"izmym3\">\n                  <span class=\"faded-grey mr-2\">Amount:</span>\n                  <span>\n                    $<eocfield name=\"amount\"/>\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"is2im1\">\n                  <span class=\"faded-grey mr-2\">Comments:</span>\n                  <span>\n                    <eocfield name=\"comments\"/>\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-12\">\n                  <span class=\"faded-grey mr-2\">Attachment:</span>\n                    <span>\n                      <attachment name=\"attachment\"><eocfield name=\"attachment_name\"/></attachment>\n                    </span>\n                </div>\n              </div>\n            </section>\n          </div>\n        </div>\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n          <returnlink class=\"text-white cursor-pointer\">\n            <div class=\"flex flex-col\">\n              <i class=\"material-icons\">keyboard_arrow_left</i>\n              RETURN\n            </div>\n          </returnlink>\n          <boardpermission name=\"Update\">\n            <viewlink name=\"Input - Expense Entry\" class=\"text-white cursor-pointer\">\n              <div class=\"flex flex-col\">\n                <i class=\"material-icons\">edit</i>\n                EDIT \n              </div>\n              <viewparameter name=\"parentDataid\">\n                <value-of select=\"/data/ViewParameter[@name = 'parentDataid']\" />\n              </viewparameter>\n            </viewlink>\n          </boardpermission>\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            <i class=\"material-icons\">more_horiz</i>\n            ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\">\n              <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n              <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n            </div>\n          </div>\n        </footer>\n      </main>\n      <div class=\"d-none\">\n        <foreignkey table=\"Expense Reports\" />\n      </div>\n    </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Bulk Timesheets",
                "table": "Subcontractors",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<style>\n  #attachments>div {\n    page-break-after: always;\n    page-break-inside: avoid;\n  }\n</style>\n\n<body class=\"bg-white\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <eocrepeatallrecords>\n    <section class=\"container-fluid mt-4 mb-5 p-4 rounded shadow-sm\" id=\"impo7\">\n      <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Crews\">\n        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Timesheets\" rlid=\"2\">\n          <div class=\"row\">\n                <h4 class=\"mb-4 font-weight-bold\">\n                  Crew ID: <eocfield name=\"crew_id\" table=\"Crews\" type=\"rl\" />\n                </h4>\n              <main aria-label=\"Main Section\" class=\"mb-5\" style=\"page-break-after: always;\">\n                <div class=\"row mb-3\">\n                  <div class=\"col-md-6 mb-2\">\n                    <span class=\"text-muted font-weight-bold mr-1\">Approval Status:</span>\n                    <span>\n                      <eocfield name=\"approval_status\" table=\"Timesheets\" type=\"rl\" />\n                    </span>\n                  </div>\n                  <div class=\"col-md-6 mb-2\">\n                    <span class=\"text-muted font-weight-bold mr-1\">Date:</span>\n                    <span>\n                      <eocfield name=\"date\" table=\"Timesheets\" type=\"rl\" />\n                    </span>\n                  </div>\n                </div>\n                <div class=\"row mb-3\">\n                  <div class=\"col-md-6 mb-2\">\n                    <span class=\"text-muted font-weight-bold mr-1\">Job Location:</span>\n                    <span>\n                      <eocfield name=\"job_location\" table=\"Timesheets\" type=\"rl\" />\n                    </span>\n                  </div>\n                  <div class=\"col-md-6 mb-2\">\n                    <span class=\"text-muted font-weight-bold mr-1\">Utility Name:</span>\n                    <span>\n                      <eocfield name=\"utility_name\" table=\"Timesheets\" type=\"rl\" />\n                    </span>\n                  </div>\n                </div>\n                <div class=\"row mb-3\">\n                  <div class=\"col-12\">\n                    <span class=\"text-muted font-weight-bold mr-1\">Notes:</span>\n                    <span>\n                      <eocfield name=\"notes\" table=\"Timesheets\" type=\"rl\" />\n                    </span>\n                  </div>\n                </div>\n                <div class=\"mb-4\">\n                  <div class=\"form-header mb-2\">\n                    <h5 class=\"font-weight-bold text-secondary\">\n                      Personnel Time Entries\n                    </h5>\n                  </div>\n                  <div class=\"table-responsive\">\n                    <table class=\"table table-bordered table-striped table-sm\">\n                      <thead class=\"thead-light\">\n                        <tr>\n                          <th>ID</th>\n                          <th>Name</th>\n                          <th>Classification</th>\n                          <th>Crew Lead / Foreman</th>\n                          <th>Status</th>\n                          <th>Lodging Provided</th>\n                          <th>Meals Provided</th>\n                          <th>Per Diem Meals</th>\n                          <th>In/Out</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'personnel'\"\n                          table=\"Timesheet Entries\" rlid=\"1\">\n                          <tr>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"last_name\" table=\"Timesheet Entries\" type=\"rl\" />,\n                              <eocfield disableclick=\"true\" name=\"first_name\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"classification\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"status\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"lodging\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"number_of_meals_provided\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"number_of_per_diem_meals\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                               -\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n                <div class=\"mb-4\">\n                  <div class=\"form-header mb-2\">\n                    <h5 class=\"font-weight-bold text-secondary\">\n                      Equipment Time Entries\n                    </h5>\n                  </div>\n                  <div class=\"table-responsive\">\n                    <table class=\"table table-bordered table-striped table-sm\">\n                      <thead class=\"thead-light\">\n                        <tr>\n                          <th>Equipment Number</th>\n                          <th>Description</th>\n                          <th>In/Out</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'equipment'\"\n                          table=\"Timesheet Entries\" rlid=\"3\">\n                          <if test=\"false()\">\n                            <ecofield name=\"equipment_description\" table=\"Timesheet Entries\" type=\"rl\" />\n                          </if>\n                          <tr>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"equipment_number\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <choose>\n                                <when test=\"string-length(@equipment_description) > 30\">\n                                </when>\n                                <otherwise>\n                                  <value-of select=\"@equipment_description\" />\n                                </otherwise>\n                              </choose>\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                               -\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <if\n                    test=\"(not(@staff_signature) or @staff_signature = '') or (not(@staff_signature_date) or @staff_signature_date = '')\">\n                    <attribute name=\"class\">row dst-display-row pb-5</attribute>\n                  </if>\n                  <span class=\"faded-grey mr-2 ml-3\">Signature:</span>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <if test=\"false()\">\n                    <eocfield name=\"staff_signature\" id=\"staff_signature\" table=\"Timesheets\" type=\"rl\" />\n                  </if>\n                  <img class=\"signature-display\" src=\"{@staff_signature}\" />\n                </div>\n                <div class=\"row dst-display-row align-items-end mb-3\">\n                  <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                    <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                    <span class=\"faded-grey small\">Signature</span>\n                  </div>\n                  <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                    <eocfield name=\"staff_signature_date\" id=\"staff_signature_date\" table=\"Timesheets\" type=\"rl\" />\n                    <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                    <span class=\"faded-grey small\">Date</span>\n                  </div>\n                  </div>\n              </main>\n            </div>\n        </relatedlist>\n      </relatedlist>\n    </section>\n  </eocrepeatallrecords>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n    path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n    path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "Details - Timesheet Entry",
                "table": "Timesheet Entries",
                "html": "<html>\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    </head>\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n        <section class=\"d-none\">\n            <span button=\"pdf-button\">\n                <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n            </span>\n        </section>\n        <eocrepeatallrecords>\n            <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n                <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"iaaof\">\n                    <header class=\"container-fluid\" aria-label=\"Header\">\n                        <div class=\"flex\">\n                            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                                <agencyinfo type=\"primarylogo\"/>\n                            </div>\n                            <div>\n                                <h4>Record Details</h4>\n                                <h6>Board Record</h6>\n                            </div>\n                        </div>\n                        <div class=\"flex print-hide align-items-center\">\n                            <boardpermission name=\"Update\">\n                                <viewlink name=\"Input - Timesheet Entry\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                                    <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\"/>\n                                    </viewparameter>\n                                    Edit\n                                    <i class=\"material-icons ml-2\">create</i>\n                                </viewlink>\n                            </boardpermission>\n                            <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                                <li class=\"nav-item dropdown flex flex-center\">\n                                    <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                                        <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                        <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </header>\n                </nav>\n                <div class=\"scrollable-area\">\n                    <div>\n                        <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"impo7\">\n                            <nav class=\"row print-hide my-2 mobile-hide\">\n                                <div class=\"col\">\n                                    <returnlink class=\"btn btn-sm btn-link text-primary\">\n                                        <i class=\"material-icons\">arrow_back_ios</i>\n                                        Return\n                                    </returnlink>\n                                </div>\n                                <div class=\"col text-right\">\n                                        <viewlink name=\"Input - Timesheet Entry\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                                            <i class=\"material-icons\">create</i>\n                                            Edit Record\n                                        </viewlink>\n                                </div>\n                            </nav>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i4cahe\">\n                                    <span class=\"faded-grey mr-2\">Type:</span>\n                                    <span>\n                                        <eocfield name=\"type\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"iew64r\">\n                                    <span class=\"faded-grey mr-2\">Personnel ID:</span>\n                                    <span>\n                                        <eocfield name=\"personnel_id\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"izovyi\">\n                                    <span class=\"faded-grey mr-2\">First Name:</span>\n                                    <span>\n                                        <eocfield name=\"first_name\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i8i2cb\">\n                                    <span class=\"faded-grey mr-2\">Last Name:</span>\n                                    <span>\n                                        <eocfield name=\"last_name\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ixs9ye\">\n                                    <span class=\"faded-grey mr-2\">Classification:</span>\n                                    <span>\n                                        <eocfield name=\"classification\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i27d5x\">\n                                    <span class=\"faded-grey mr-2\">Status:</span>\n                                    <span>\n                                        <eocfield name=\"status\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i1v1lg\">\n                                    <span class=\"faded-grey mr-2\">Number of Meals Provided:</span>\n                                    <span>\n                                        <eocfield name=\"number_of_meals_provided\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ijxcqz\">\n                                    <span class=\"faded-grey mr-2\">Number of Per Diem Meals:</span>\n                                    <span>\n                                        <eocfield name=\"number_of_per_diem_meals\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"iovs7v\">\n                                    <span class=\"faded-grey mr-2\">Start Time:</span>\n                                    <span>\n                                        <eocfield name=\"start_time\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i2h4xf\">\n                                    <span class=\"faded-grey mr-2\">End Time:</span>\n                                    <span>\n                                        <eocfield name=\"end_time\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ity3lz\">\n                                    <span class=\"faded-grey mr-2\">Comments:</span>\n                                    <span>\n                                        <eocfield name=\"comments\"/>\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                        <div style=\"display: none\">\n                            <eocfield name=\"equipment_number\"/>\n                            <eocfield name=\"equipment_type\"/>\n                            <eocfield name=\"total_hours\"/>\n                            <eocfield name=\"standard_hours\"/>\n                            <eocfield name=\"double_hours\"/>\n                            <eocfield name=\"premium_hours\"/>\n                        </div>\n                    </div>\n                </div>\n                <foreignkey table=\"Timesheets\" />\n                <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                    <returnlink class=\"text-white cursor-pointer\">\n                        <div class=\"flex flex-col\">\n                            <i class=\"material-icons\">keyboard_arrow_left</i>\n                            RETURN\n                        </div>\n                    </returnlink>\n                        <viewlink name=\"Input - Timesheet Entry\" class=\"text-white cursor-pointer\">\n                            <div class=\"flex flex-col\">\n                                <i class=\"material-icons\">edit</i>\n                                EDIT\n                            </div>\n                        </viewlink>\n                    <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                        <i class=\"material-icons\">more_horiz</i>\n                        ACTIONS\n                        <div class=\"dropdown-menu cursor-pointer\">\n                            <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                            <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                        </div>\n                    </div>\n                </footer>\n            </main>\n        </eocrepeatallrecords>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Team Member",
                "table": "Team Members",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n    </section>\r\n    <eocrepeatallrecords>\r\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\r\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>Record Details</h4>\r\n                <h6>Board Record</h6>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex print-hide align-items-center\">\r\n              <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                <boardpermission name=\"Update\">\r\n                  <viewlink name=\"Input - Team Member\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\r\n                    <viewparameter name=\"presentation\">\r\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\r\n                    </viewparameter>\r\n                    Edit\r\n                    <i class=\"material-icons ml-2\">create</i></viewlink>\r\n                </boardpermission>\r\n              </if>\r\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\r\n                <li class=\"nav-item dropdown flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <foreignkey type=\"viewlink\" table=\"Crews\" />\r\n        <div class=\"scrollable-area\">\r\n          <div>\r\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijdpg\">\r\n              <nav class=\"row print-hide my-2 mobile-hide\">\r\n                <div class=\"col\">\r\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\r\n                    <i class=\"material-icons\">arrow_back_ios</i>\r\n                    Return\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"col text-right\">\r\n                  <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                    <boardpermission name=\"Update\">\r\n                      <viewlink name=\"Input - Team Member\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\r\n                        <i class=\"material-icons\">create</i>\r\n                        Edit Record\r\n                      </viewlink>\r\n                    </boardpermission>\r\n                  </if>\r\n                </div>\r\n              </nav>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor's Name:</span>\r\n                  <value-of select=\"/data//@subcontractor_name\" />\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"subcontractor_name\" table=\"Subcontractors\" type=\"fk\"/>\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Crew Name:</span>\r\n                  <span>\r\n                    <eocfield id=\"crew_id\" name=\"crew_id\" table=\"Crews\" type=\"fk\" data-label=\"Crews\"/>\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-4 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Personnel ID:</span>\r\n                  <span>\r\n                    <eocfield name=\"personnel_id\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-4 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Last Name:</span>\r\n                  <span>\r\n                    <eocfield name=\"last_name\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-4 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">First Name:</span>\r\n                  <span>\r\n                    <eocfield name=\"first_name\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Email:</span>\r\n                  <span>\r\n                    <eocfield name=\"email\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Cell Phone:</span>\r\n                  <span>\r\n                    <eocfield name=\"cell_phone\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Gender:</span>\r\n                  <span>\r\n                    <eocfield name=\"gender\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Team Lead:</span>\r\n                  <span>\r\n                    <eocfield name=\"team_lead\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Crew Lead / Foreman:</span>\r\n                  <span>\r\n                    <eocfield name=\"crew_lead\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Resource Type:</span>\r\n                  <span>\r\n                    <eocfield name=\"resource_type\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Departure City:</span>\r\n                  <span>\r\n                    <eocfield name=\"departure_city\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Departure State:</span>\r\n                  <span>\r\n                    <eocfield name=\"departure_state\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3 dst-display-group\">\r\n                  <span class=\"faded-grey mr-2\">Approval Status:</span>\r\n                    <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                      <span>\r\n                      Approved\r\n                      </span>\r\n                    </if>\r\n                </div>\r\n                <div class=\"col-md-12 mb-3 dst-display-group\">\r\n                  <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                    <div class=\"alert alert-warning\" role=\"alert\">This record is locked</div>\r\n                  </if>\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"locked\" />\r\n                    <eocfield name=\"record_approval_status\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <section class=\"table-responsive-md pdf-hide\">\r\n                <h4>\r\n                  <b>\r\n                    History Log\r\n                  </b>\r\n                </h4>\r\n                <table id=\"team-member-history\" class=\"table\"/>\r\n              </section>\r\n            </section>\r\n          </div>\r\n        </div>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\r\n          <returnlink class=\"text-white cursor-pointer\">\r\n            <div class=\"flex flex-col\">\r\n              <i class=\"material-icons\">keyboard_arrow_left</i>\r\n              RETURN\r\n            </div>\r\n          </returnlink>\r\n          <boardpermission name=\"Update\">\r\n            <viewlink name=\"Input - Team Member\" class=\"text-white cursor-pointer\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons\">edit</i>\r\n                EDIT\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            <i class=\"material-icons\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\r\n        </footer>\r\n      </main>\r\n    </eocrepeatallrecords>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\" ></script>\r\n    <script type=\"text/javascript\">\r\n    (function(){\r\n      <if test=\"/data/@dataid != '0'\">\r\n        new WebEOCCXD.WebEOCHistoryLog({\r\n        parentElement: \"#team-member-history\",\r\n        dataid: \"<value-of select='//@dataid'/>\"\r\n      })\r\n      </if>\r\n    })();\r\n  </script>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "Removed",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "_webeoc_delete_flag",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Crews - All",
                "table": "Crews",
                "html": "<html>\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <span class=\"media-breakpoint-state\" />\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n      </span>\n      <span button=\"export-button\">\n        <exportbutton />\n      </span>\n    </section>\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\n      <div class=\"flex flex-column flex-column-grow w-100\">\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"idou4\">\n          <nav class=\"nav\">\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link active\">Crews</viewlink>\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n            <boardpermission name=\"View Reports\">\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n            </boardpermission>\n          </nav>\n        </section>\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"i8qel\">\n          <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                <agencyinfo type=\"primarylogo\" />\n              </div>\n              <div>\n                <h4>List - Crews</h4>\n                <h6>\n                  <incidentname />\n                </h6>\n              </div>\n            </div>\n            <div>\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                <li class=\"nav-item mr-2\">\n                  <boardpermission name=\"Create\">\n                    <viewlink name=\"Input - Crew\" class=\"btn btn-sm btn-primary\">\n                                      Create New\n                                      <i class=\"material-icons ml-2\">add</i></viewlink>\n                  </boardpermission>\n                </li>\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\n                <li class=\"dropdown nav-item flex flex-center\">\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </header>\n        </nav>\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n          <div class=\"flex flex-column js-target-map-move\">\n            <div class=\"bstMainMap\">\n              <if test=\"/data/@pdf = 'false'\">\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"false\" map-name=\"Map\" />\n                  </div>\n                  <div class=\"flex flex-center\">\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\n                      <i class=\"material-icons\">arrow_drop_down</i>\n                    </div>\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\n                      <i class=\"material-icons\">arrow_drop_up</i>\n                    </div>\n                  </div>\n                </section>\n              </if>\n            </div>\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n                <section class=\"mt-2\" aria-label=\"Table\">\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\n                    <thead>\n                      <tr>\n                        <th width=\"5%\" class=\"bg-white\">\n                          <sortlink field=\"subcontractor_name\">Subcontractor</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white\">\n                          <sortlink field=\"crew_id\">Crew ID</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                          <sortlink field=\"team_type\">Team Type</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white\">\n                          <sortlink field=\"foreman\">Crew Lead / Foreman</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                          <sortlink field=\"work_location\">Work Location</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\n                          <sortlink field=\"locked\">Locked</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\n                        </th>\n                        <th width=\"5%\" class=\"bg-white\" />\n                      </tr>\n                    </thead>\n                    <tbody id=\"main-table\" updatesection=\"true\">\n                      <eocrepeatallrecords>\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\n                          <td class=\"\">\n                            <foreignkey table=\"Subcontractors\" />\n                            <eocfield type=\"fk\" table=\"Subcontractors\" name=\"subcontractor_name\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"\">\n                            <eocfield name=\"crew_id\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"team_type\" disableclick=\"true\" />\n                          </td>\n                          <td>\n                            <eocfield name=\"foreman\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"work_location_address\" disableclick=\"true\" />\n                          </td>\n                          <td class=\"text-center mobile-hide-lg\">\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\n                            </if>\n                          </td>\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\n                            <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\n                            </if>\n                          </td>\n                          <td class=\"text-right\">\n                            <viewlink name=\"Details - Crew\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\n                              <viewparameter name=\"presentation\">panel</viewparameter>\n                            </viewlink>\n                            <div class=\"dropdown cursor-pointer\">\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\n                              </a>\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                <viewlink name=\"Details - Crew\" class=\"dropdown-item viewlink-default\">View</viewlink>\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"work_location\" label-field=\"Work Location\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\" />\n                                  <boardpermission name=\"Update\">\n                                    <viewlink name=\"Input - Crew\" class=\"dropdown-item\">Edit</viewlink>\n                                  </boardpermission>\n                                <boardpermission name=\"Delete\">\n                                  <div class=\"dropdown-divider\" />\n                                  <viewlink name=\"Delete - Crew\" class=\"dropdown-item text-danger\">Delete</viewlink>\n                                </boardpermission>\n                              </div>\n                              <div class=\"d-none\">\n                                <eocfield name=\"locked\" />\n                                <eocfield name=\"record_approval_status\" />\n                                <foreignkeyreference table=\"Subcontractors\" />\n                              </div>  \n                            </div>\n                          </td>\n                        </tr>\n                      </eocrepeatallrecords>\n                    </tbody>\n                  </table>\n                </section>\n              </div>\n            </div>\n          </div>\n        </section>\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n          <boardpermission name=\"Create\">\n            <viewlink name=\"Input - Crew\" class=\"text-white\" refreshid=\"main-table\">\n              <div class=\"flex flex-col\">\n                <i class=\"material-icons cursor-pointer\">add</i>\n                          CREATE NEW\n                      </div>\n            </viewlink>\n          </boardpermission>\n            <div class=\"flex flex-col dropup\">\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\n            ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\">\n              <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\n              <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n              <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n              <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n              <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\n              <boardpermission name=\"View Reports\">\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n              </boardpermission>\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n            </div>\n            </div>\n        </footer>\n      </div>\n    </main>\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <i class=\"material-icons\">close</i>\n        </button>\n        <div class=\"modal-content\">\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n        </div>\n      </div>\n    </section>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Timesheet - All",
                "table": "Subcontractors",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <span class=\"media-breakpoint-state\" />\n  <section class=\"d-none\">\n    <span button=\"pdf-button\">\n      <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n    </span>\n    <span button=\"export-button\">\n      <exportbutton />\n    </span>\n  </section>\n  <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\"\n    class=\"page-wrap flex flex-row\">\n    <div class=\"flex flex-column flex-column-grow w-100\">\n      <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"it1ao\">\n        <nav class=\"nav\">\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link active\">Timesheets</viewlink>\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\n            <boardpermission name=\"View Reports\">\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n            </boardpermission>\n          </nav>\n      </section>\n      <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"ix02k\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\" />\n            </div>\n            <div>\n              <h4>List - Subcontractor Timesheets</h4>\n              <h6>\n                <incidentname />\n              </h6>\n            </div>\n          </div>\n          <div>\n            <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n\n              <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\" />\n              <li class=\"dropdown nav-item flex flex-center\">\n                <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                  <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                  <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                  <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </header>\n      </nav>\n      <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n        <div class=\"flex flex-column js-target-map-move\">\n          <div class=\"bstMainMap\">\n            <if test=\"/data/@pdf = 'false'\">\n              <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\n                <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\n                  <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" enableheader=\"true\"\n                    map-name=\"Map\" />\n                </div>\n                <div class=\"flex flex-center\">\n                  <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\n                    <i class=\"material-icons\">arrow_drop_down</i>\n                  </div>\n                  <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\n                    <i class=\"material-icons\">arrow_drop_up</i>\n                  </div>\n                </div>\n              </section>\n            </if>\n          </div>\n          <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n            <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n              <section class=\"mt-2\" aria-label=\"Table\">\n                <table class=\"table table-striped table-sm mt-1 sticky-header\" eocrepeatallrecordsSort=\"[object Object]\"\n                  rowcount=\"\">\n                  <thead>\n                    <tr>\n                      <th width=\"5%\" class=\"bg-white\">\n                        <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"receiving_utility\">Receiving Utility</sortlink>\n                      </th>\n\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"subcontractor_lead\">Subcontractor Lead</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"subcontractor_lead_phone\">Subcontractor Lead Phone</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white text-center\">\n                        Approved Timesheets\n                      </th>\n                      <th width=\"5%\" class=\"bg-white text-center\">\n                        Unapproved Timesheets\n                      </th>\n                      <th width=\"5%\" class=\"bg-white\" />\n                    </tr>\n                  </thead>\n                  <tbody id=\"main-table\" updatesection=\"true\">\n                    <eocrepeatallrecords sort=\"[subcontractor_name] asc\">\n                      <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\"\n                        data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\" dataid=\"{@dataid}\" rowcount=\"0\">\n                        <td class=\"\">\n                          <eocfield name=\"subcontractor_name\" disableclick=\"true\" />\n                          <div class=\"d-none\">\n                            <expression name=\"subcontractor_filter\">CASE WHEN @positionname LIKE '%Administrator' OR\n                              subcontractor_name = @positionname THEN 'true' ELSE 'false' END</expression>\n                          </div>\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"receiving_utility\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"subcontractor_lead\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"mobile-hide-lg\">\n                          <eocfield name=\"subcontractor_lead_phone\" disableclick=\"true\" />\n                        </td>\n                        <td class=\"text-center\" data-approvedtsdataidel=\"{@dataid}\">\n                        </td>\n                        <td class=\"text-center\" data-unapprovedtsdataidel=\"{@dataid}\">\n                        </td>\n                        <td class=\"text-right\">\n                          <viewlink name=\"Details - Subcontractor Timesheet\" target=\"sidePanel\"\n                            class=\"mobile-hide-lg viewlink-panel\">\n                            <viewparameter name=\"presentation\">panel</viewparameter>\n                          </viewlink>\n                          <div class=\"dropdown cursor-pointer\">\n                            <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                              <i class=\"material-icons faded-grey\">more_horiz</i>\n                            </a>\n                            <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                              <viewlink name=\"Details - Subcontractor Timesheet\" class=\"dropdown-item\">Review</viewlink>\n                              <feature type=\"link\" class=\"dropdown-item\" name=\"location\"\n                                label-field=\"subcontractor_name\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\"\n                                data-dataid=\"{@dataid}\" target=\"\" />\n                                <pdflink class=\"dropdown-item scroll-link\" style=\"width: 95%; cursor: pointer\" enablemediaquery=\"true\" enablejs=\"true\"\n                                  orientation=\"landscape\" type=\"button\" view=\"Details - Bulk Timesheets\">Download PDF</pdflink>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                      <div style=\"display: none\">\n                        <viewlink name=\"Details - Timesheet\" />\n                        <viewlink name=\"Details - Crew\" />\n                      </div>\n                    </eocrepeatallrecords>\n                    <div class=\"d-none\">\n                      <eocfield name=\"locked\" disableclick=\"true\" />\n                    </div>\n                  </tbody>\n                </table>\n              </section>\n            </div>\n          </div>\n        </div>\n      </section>\n      <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n        <div class=\"flex flex-col dropup\" style=\"margin-left: auto\">\n          <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n            aria-expanded=\"false\">more_horiz</i>\n          ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\">\n            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Subcontractor Roster\n            </viewlink>\n            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Crews\n            </viewlink>\n            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Crew Members\n            </viewlink>\n            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Equipment\n            </viewlink>\n            <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Expenses\n            </viewlink>\n            <boardpermission name=\"View Reports\">\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">\n              Reports\n              </viewlink>\n            </boardpermission>\n            <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n            <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n            <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n            </div>\n        </div>\n      </footer>\n    </div>\n  </main>\n  <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\"\n    aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n    <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n      <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n        <i class=\"material-icons\">close</i>\n      </button>\n      <div class=\"modal-content\">\n        <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n        <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n      </div>\n    </div>\n  </section>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n    path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n    path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n\n  <script>\n    window.onload = async function () {\n      document.querySelector('.drawer-close').addEventListener('click', displayCounts)\n\n      const { view } = WebEOCCXD.ViewBase;\n\n      view.onViewRefresh(function() {\n        displayCounts()\n      });\n\n      displayCounts()\n\n      async function displayCounts() {\n        \n        const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet' })\n        const crewDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Crew' })\n\n        const { data: crewRcrds } = await crewDetailsApi.getRecords()\n        const { data: timesheetRcrds } = await timesheetDetailsApi.getRecords()\n\n        const subcontractorRowEl = document.querySelectorAll('tr[dataid]');\n\n        for (const row of subcontractorRowEl) {\n          // get dataid of row's subcontractor.\n          let subcontractorId = row.getAttribute('dataid');\n\n          // get the element to display the spinner\n          let unapprovedTsCountEl = document.querySelector(`td[data-unapprovedtsdataidel='${subcontractorId}']`);\n          let approvedTsCountEl = document.querySelector(`td[data-approvedtsdataidel='${subcontractorId}']`);\n          // get all crew records associated with the subcontractor\n          let associatedCrewRcrds = crewRcrds.filter(function (crew) {\n            return crew['<foreignkeyreference table=\"Subcontractors\" />'] === subcontractorId;\n          });\n\n          // sum all unapproved timesheets for the subcontractor's crews\n          let totalApprovedTimesheets = 0;\n          let totalUnapprovedTimesheets = 0;\n          for (const crew of associatedCrewRcrds) {\n            let crewId = crew.dataid;\n\n            let matchingTimesheetRcrds = timesheetRcrds.filter(function (tm) {\n              return tm['<foreignkeyreference table=\"Crews\" />'] === crewId &amp;&amp; tm.approval_status != 'Approved';\n            });\n            totalUnapprovedTimesheets += matchingTimesheetRcrds.length;\n\n            let matchingApprovedTimesheetRcrds = timesheetRcrds.filter(function (tm) {\n              return tm['<foreignkeyreference table=\"Crews\" />'] === crewId &amp;&amp; tm.approval_status == 'Approved';\n            });\n            totalApprovedTimesheets += matchingApprovedTimesheetRcrds.length;\n\n          }\n\n          // style the results with a badge and display the sum of unapproved time entries.\n          if (totalUnapprovedTimesheets > 0) {\n            unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-warning\">${totalUnapprovedTimesheets}</span>`;\n          } else {\n            unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${totalUnapprovedTimesheets}</span>`;\n          }\n\n          if (totalApprovedTimesheets > 0) {\n            approvedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${totalApprovedTimesheets}</span>`;\n          } else {\n            approvedTsCountEl.innerHTML = `<span class=\"badge badge-secondary\">${totalApprovedTimesheets}</span>`;\n          }\n\n        }\n      }\n\n      function refreshElements() {\n        window.location.reload();\n      }\n    }\n  </script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Report - Expense Summary",
                "table": "Subcontractors",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n<head>\n    <xsl:variable name=\"rate_type\" select=\"/data/ViewParameter[@name='rate_type']\" />\n    <choose>\n        <when test=\"$rate_type = 'subcontractor'\">\n            <title>Expense Summary Report ( Contractor Rates )</title>\n        </when>\n        <when test=\"$rate_type = 'utility'\">\n            <title>Expense Summary Report ( Utility Rates )</title>\n        </when>\n    </choose>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"></link>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"></link>\n    <link rel=\"stylesheet\" href=\"https://webeocboardfiles.juvare.com/board/1.0/css/material-kit.min.css\"></link>\n    <link rel=\"stylesheet\" boardresource=\"datatablesWithPlugins.css\" />\n     \n    <style>\n        .fa-spinner {\n            display: block;\n            font-size: 8vmin;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            animation: spin 2s linear infinite;\n        }\n    \n        /* Spinner Animation */\n        @keyframes spin {\n            0% {\n                transform: translate(-50%, -50%) rotate(0deg);\n            }\n    \n            100% {\n                transform: translate(-50%, -50%) rotate(360deg);\n            }\n        }\n    </style>\n\n\n</head>\n<body data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-viewid=\"{/data/@viewid}\">\n    <xsl:variable name=\"rate_type\" select=\"/data/ViewParameter[@name='rate_type']\" />\n\n    <span class=\"media-breakpoint-state\" />\n    <i id=\"spinner\" class=\"fa fa-spinner\" /> <!-- Loading Spinner -->\n    <main id=\"main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\"\n        class=\"page-wrap flex flex-row report-view\">\n        <div class=\"flex flex-column flex-column-grow\">\n            <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\">\n                <header class=\"container-fluid\" aria-label=\"Header\">\n                    <div class=\"flex\">\n                        <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                            <agencyinfo type=\"primarylogo\" />\n                        </div>\n                        <div>\n                            <h1 class=\"boardname\">\n                                <b>\n                                    <choose>\n                                        <when test=\"$rate_type = 'subcontractor'\">\n                                            Expense Summary Report (Contractor Rates)\n                                        </when>\n                                        <when test=\"$rate_type = 'utility'\">\n                                            Expense Summary Report (Utility Rates)\n                                        </when>\n                                    </choose>\n                                </b>\n                            </h1>\n                            <h2 class=\"incidentname\">\n                                <incidentname />\n                            </h2>\n                        </div>\n                    </div>\n                    <div>\n                        <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                            <li class=\"nav-item mr-2\">\n                                <returnlink type=\"button\" class=\"btn btn-sm btn-outline-primary\">\n                                    <i class=\"material-icons\">arrow_back_ios</i> Return\n    \n                                </returnlink>\n                            </li>\n                        </ul>\n                    </div>\n                </header>\n            </nav>\n    \n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col\">\n                        <div class=\"row mb-3\">\n                            <div class=\"col-md-2\">\n                                <div class=\"form-group\">\n                                    <label for=\"min\">From:</label>\n                                        <xsl:element name=\"input\">\n                                            <xsl:attribute name=\"type\">text</xsl:attribute>\n                                            <xsl:attribute name=\"class\">form-control</xsl:attribute>\n                                            <xsl:attribute name=\"id\">min</xsl:attribute>\n                                            <xsl:attribute name=\"name\">min</xsl:attribute>\n                                            <xsl:attribute name=\"placeholder\">YYYY-MM-DD</xsl:attribute>\n                                            <xsl:attribute name=\"autocomplete\">off</xsl:attribute>\n                                        </xsl:element>\n                                </div>\n                            </div>\n                            <div class=\"col-md-2\">\n                                <div class=\"form-group\">\n                                    <label for=\"max\">To:</label>\n                                        <xsl:element name=\"input\">\n                                            <xsl:attribute name=\"type\">text</xsl:attribute>\n                                            <xsl:attribute name=\"class\">form-control</xsl:attribute>\n                                            <xsl:attribute name=\"id\">max</xsl:attribute>\n                                            <xsl:attribute name=\"name\">max</xsl:attribute>\n                                            <xsl:attribute name=\"placeholder\">YYYY-MM-DD</xsl:attribute>\n                                            <xsl:attribute name=\"autocomplete\">off</xsl:attribute>\n                                        </xsl:element>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n               <table id=\"report_table\" class=\"table table-striped table-bordered\">\n                    <tfoot>\n                        <tr>\n                        <th></th> <!-- 1 -->\n                        <th></th> <!-- 2 -->\n                        <th></th> <!-- 3 -->\n                        <th></th> <!-- 4 -->\n                        <th></th> <!-- 5 -->\n                        <th></th> <!-- 6 -->\n                        <th></th> <!-- 7 -->\n                        <th></th> <!-- 8 -->\n                        <th></th> <!-- 9 -->\n                        <th id=\"stHours-footer\"></th>     <!-- 10 -->\n                        <th id=\"otHours-footer\"></th>     <!-- 11 -->\n                        <th id=\"dtHours-footer\"></th>     <!-- 12 -->\n                        <th id=\"totalHours-footer\"></th>  <!-- 13 -->\n                        <th></th> <!-- 14 -->\n                        <th></th> <!-- 15 -->\n                        <th></th> <!-- 16 -->\n                        <th></th> <!-- 17 -->\n                        <th></th> <!-- 18 -->\n                        <th></th> <!-- 19 -->\n                        <th></th> <!-- 20 -->\n                        </tr>\n                    </tfoot>\n                    </table>\n            </div>\n            <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                <returnlink class=\"text-white cursor-pointer\">\n                    <div class=\"flex flex-col\">\n                        <i class=\"material-icons\">keyboard_arrow_left</i>\n                        RETURN\n                    </div>\n                </returnlink>\n                <!-- <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                    aria-expanded=\"false\">\n                    <i class=\"material-icons\">more_horiz</i>\n                    ACTIONS\n                    <div class=\"dropdown-menu cursor-pointer\">\n                        <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\n                        <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n                        <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n                        <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n                        <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n                        <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\n                        <boardpermission name=\"View Reports\">\n                            <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                        </boardpermission>\n                        <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n                        <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n                        <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n                    </div>\n                </div> -->\n            </footer>\n            <div style=\"display: none\">\n                <div id=\"viewlinks\">\n                    <viewlink name=\"Details - Subcontractor\" table=\"Subcontractors\" />\n                    <viewlink name=\"Details - Crew\" table=\"Crews\" />\n                    <viewlink name=\"Details - Team Member\" table=\"Team Members\" />\n                    <viewlink name=\"Details - Timesheet\" table=\"Timesheet\" />\n                    <viewlink name=\"Details - Timesheet Entry\" table=\"Timesheet Entries\" />\n                    <viewlink name=\"Details - Expense Report\" table=\"Expense Reports\" />\n                    <viewlink name=\"Details - Expenses\" table=\"Expense\" />\n                </div>\n                <div id=\"foreignkeyReferences\">\n                    <span id=\"subcontractorsFk\">\n                        <foreignkeyreference table=\"Subcontractors\" />\n                    </span>\n                    <span id=\"crewsFk\">\n                        <foreignkeyreference table=\"Crews\" />\n                    </span>\n                    <span id=\"teamMembersFk\">\n                        <foreignkeyreference table=\"Team Members\" />\n                    </span>\n                    <span id=\"timesheetsFk\">\n                        <foreignkeyreference table=\"Timesheets\" />\n                    </span>\n                    <span id=\"timesheetEntriesFk\">\n                        <foreignkeyreference table=\"Timesheet Entries\" />\n                    </span>\n                    <span id=\"timesheetEntriesFk\">\n                        <foreignkeyreference table=\"Timesheet Entries\" />\n                    </span>\n                    <span id=\"expenseReportsFk\">\n                        <foreignkeyreference table=\"Expense Reports\" />\n                    </span>\n                    <span id=\"expensesFk\">\n                        <foreignkeyreference table=\"Expenses\" />\n                    </span>\n                </div>\n                <span id=\"paramRateType\"><value-of select=\"$rate_type\"/></span>\n            </div>\n        </div>\n    </main>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/popper.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/material-kit.min.js\" type=\"text/javascript\"></script>\n    <script src=\"https://webeocboardfiles.juvare.com/board/1.0/js/ux-webeoc-board-standards.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.4.1/view-base.min.js\"></script>\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n    <script boardresource=\"expenseTypeFieldMap.js\" type=\"text/javascript\"></script>\n    <script boardresource=\"datatablesWithPlugins.js\" type=\"text/javascript\"></script>\n\n    <script>\n\n        window.onload = async function() {\n            const foreignKeys = {\n                crews: document.getElementById('crewsFk').textContent.trim(),\n                subcontractors: document.getElementById('subcontractorsFk').textContent.trim(),\n                teamMembers: document.getElementById('teamMembersFk').textContent.trim(),\n                timesheets: document.getElementById('timesheetsFk').textContent.trim(),\n                timesheetEntries: document.getElementById('timesheetEntriesFk').textContent.trim(),\n                expenseReports: document.getElementById('expenseReportsFk').textContent.trim(),\n                expenses: document.getElementById('expensesFk').textContent.trim()\n            };\n\n            // 1.) Get data from all tables\n            const reportData = await getAllReportData();\n            \n\n            // 2.) Format data such that relationships are maintained\n            const mappedData = mapParentChildRelations(reportData);\n            \n\n            // 3.) Generate datatable\n            let minDate, maxDate;\n            const currencySymbol = '$';\n\n            let table = new DataTable('#report_table', {\n                data: mappedData.map(entry => mapEntryType(entry)),\n                columns: [\n                    { data: 'subcontractor', title: 'Subcontractor', name: 'subcontractor' },\n                    { data: 'category', title: 'Category', name: 'category' },\n                    { data: 'crew', title: 'Crew', name: 'crew' },\n                    { data: 'crew_lead', title: 'Crew Lead', name: 'crewLead' },\n                    { data: 'resource', title: 'Resource', name: 'resource' },\n                    { data: 'classification', title: 'Classification', name: 'classification' },\n                    { data: 'location', title: 'Location', name: 'location' },\n                    { data: 'vendor', title: 'Vendor', name: 'vendor' },\n                    { data: 'date', title: 'Date', name: 'date' },\n                    { data: 'stHours', title: 'ST Hours', name: 'stHours', render: (data, type, row) => row.category === 'Expense' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'otHours', title: 'OT Hours', name: 'otHours', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'dtHours', title: 'DT Hours', name: 'dtHours', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'totalHours', title: 'Total Hours', name: 'totalHours', render: (data, type, row) => row.category === 'Expense' ? '' : Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) },\n                    { data: 'stHoursRate', title: 'ST Hours Rate', name: 'stHoursRate', render: (data, type, row) => row.category === 'Expense' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'otHoursRate', title: 'OT Hours Rate', name: 'otHoursRate', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'dtHoursRate', title: 'DT Hours Rate', name: 'dtHoursRate', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'stCost', title: 'ST Cost', name: 'stCost', render: (data, type, row) => row.category === 'Expense' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'otCost', title: 'OT Cost', name: 'otCost', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'dtCost', title: 'DT Cost', name: 'dtCost', render: (data, type, row) => row.category === 'Expense' || row.category === 'Equipment' ? '' : `${currencySymbol}${Number(data).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },\n                    { data: 'totalCost', title: 'Total Cost', name: 'totalCost', render: function (data, type, row) {\n                        return `${currencySymbol}${data.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n                    }},\n                ],\n                scrollX: true,\n                layout: {\n                    topStart: {\n                        buttons: [\n                            { extend: 'copy', footer: true },\n                            { extend: 'csv', footer: true },\n                            { extend: 'print', footer: true },\n                        ]\n                    }\n                },\n                footerCallback: function (tfoot, data, start, end, display) {\n                    var api = this.api();\n                    $(api.column(`date:name`).footer()).html('Totals:');\n\n                    const hourColumns = ['stHours', 'otHours', 'dtHours', 'totalHours'];\n                    const totalsColumns = ['stCost', 'otCost', 'dtCost', 'totalCost'];\n\n                    // Sum and display totals for hours columns (only visible/filtered rows)\n                    hourColumns.forEach(col => {\n                        const total = display.reduce((sum, rowIndex) => {\n                            const value = parseFloat(data[rowIndex][col]) || 0;\n                            return sum + value;\n                        }, 0);\n\n                        $(api.column(`${col}:name`).footer()).html(\n                            total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n                        );\n                    });\n\n                    // Sum and display totals for cost columns (only visible/filtered rows)\n                    totalsColumns.forEach(col => {\n                        const total = display.reduce((sum, rowIndex) => {\n                            const value = parseFloat(data[rowIndex][col]) || 0;\n                            return sum + value;\n                        }, 0);\n\n                        $(api.column(`${col}:name`).footer()).html(\n                            currencySymbol + total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n                        );\n                    });\n                }\n            });\n\n            // Create date inputs\n            minDate = new DateTime('#min', {\n                format: 'YYYY-MM-DD',\n                buttons: {\n                    clear: true\n                }\n            });\n            maxDate = new DateTime('#max', {\n                format: 'YYYY-MM-DD',\n                buttons: {\n                    clear: true\n                }\n            });\n\n            // Custom filtering function for date range\n            DataTable.ext.search.push(function (settings, data, dataIndex) {\n                let min = minDate.val();\n                let max = maxDate.val();\n                let date = new Date(data[8]);\n\n                if (\n                    (min === null &amp;&amp; max === null) ||\n                    (min === null &amp;&amp; date &lt;= new Date(max)) ||\n                    (min &lt;= date &amp;&amp; max === null) ||\n                    (min &lt;= date &amp;&amp; date &lt;= new Date(max))\n                ) {\n                    return true;\n                }\n                return false;\n            });\n\n            // Refilter the table on date input change\n            document.querySelectorAll('#min, #max').forEach((el) => {\n                el.addEventListener('change', () => table.draw());\n            });\n\n            // 4.) Hide Spinner\n            toggleSpinner('hide')\n\n          function mapEntryType(entry) {\n              const { expense: e, expenseReport: er, timesheetEntry: t, timesheet: ts, crew: c, subcontractor: s } = entry;\n\n                let base = {\n                    type: t?.type,\n                    subcontractor: s?.subcontractor_name || \"\",\n                    crew: c?.crew_id || \"\",\n                    crew_lead: c?.foreman || \"\",\n                    location: c?.work_location_address || \"\",\n                    vendor: \"\",\n                    date: formatDateToISO(ts?.date) || \"\",\n                    resource: \"\",\n                    category: t?.type || \"\",\n                    classification: \"\",\n                    stHours: 0.00,\n                    otHours: 0.00,\n                    dtHours: 0.00,\n                    totalHours: 0.00,\n                    stHoursRate: 0.00,\n                    otHoursRate: 0.00,\n                    dtHoursRate: 0.00,\n                    totalHours: 0.00,\n                };\n\n                \n\n                switch (entry.type) {\n                    case 'timesheet':\n                        if (t.type === 'Personnel') {\n                            base.resource = `${t.first_name} ${t.last_name}`.trim();\n                            base.classification = t.classification || \"\";\n                            base.vendor = \"\";\n                            base.stHours = Number(t.standard_hours || 0);\n                            base.otHours = Number(t.double_hours || 0);\n                            base.dtHours = Number(t.premium_hours || 0);\n                            base.totalHours = Number(t.total_hours || 0);\n                            base.stHoursRate = getRate(s, t.classification, 'standard', s) || 0;\n                            base.otHoursRate = getRate(s, t.classification, 'overtime', s) || 0;\n                            base.dtHoursRate = getRate(s, t.classification, 'premium', s) || 0;\n                            base.stCost = (base.stHoursRate * base.stHours);\n                            base.otCost = (base.otHoursRate * base.otHours);\n                            base.dtCost = (base.dtHoursRate * base.dtHours);\n                            base.totalCost = Number(base.stCost || 0) + Number(base.otCost || 0) + Number(base.dtCost || 0);\n\n                        } else if (t.type === 'Equipment') {\n                            base.resource = t.equipment_number || \"\";\n                            base.classification = t.equipment_type || \"\";\n                            base.vendor = \"\";\n                            base.stHours = Number(t.total_hours || 0);\n                            base.otHours = 0;\n                            base.dtHours = 0;\n                            base.totalHours = Number(t.total_hours || 0);\n                            base.stHoursRate = getRate(s, t.equipment_type, 'standard', s) || 0;\n                            base.otHoursRate = 0;\n                            base.dtHoursRate = 0;\n                            base.stCost = (base.stHoursRate * base.stHours);\n                            base.otCost = 0;\n                            base.dtCost = 0;\n                            base.totalCost = Number(base.stCost || 0) + Number(base.otCost || 0) + Number(base.dtCost || 0);\n                        }\n                        break;\n                        \n                        case 'expense':\n                            {\n                                base.type = \"Expense\";\n                                base.category = \"Expense\";\n                                base.resource = e?.crew_member || \"\";\n                                base.classification = e?.expense_type || \"\";\n                                base.vendor = e?.store_restaurant_hotel || \"\";\n                                base.date = formatDateToISO(er?.expense_date) || \"\";\n                                base.stHours = \"\";\n                                base.otHours = \"\";\n                                base.dtHours = \"\";\n                                base.totalHours = \"\";\n                                base.stHoursRate = \"\";\n                                base.otHoursRate = \"\";\n                                base.dtHoursRate = \"\";\n                                base.stCost = \"\";\n                                base.otCost = \"\";\n                                base.dtCost = \"\";\n                                base.totalCost = e?.amount ? Number(e.amount) : 0;\n                        }\n                        break;\n\n                    default:\n                        // Return empty-ish base if unknown type\n                        break;\n                }\n\n                return base;\n            }\n\n\n            function formatDateToISO(dateInput) {\n                // Format as YYYY-MM-DD\n                if (!dateInput) return '';\n                \n                const dateObj = new Date(dateInput);\n                if (!isNaN(dateObj)) {\n                    const yyyy = dateObj.getFullYear();\n                    const mm = String(dateObj.getMonth() + 1).padStart(2, '0');\n                    const dd = String(dateObj.getDate()).padStart(2, '0');\n                    return `${yyyy}-${mm}-${dd}`;\n                }\n                \n                const parts = String(dateInput).split('/');\n                if (parts.length === 3) {\n                    const yyyy = parts[2];\n                    const mm = parts[0].padStart(2, '0');\n                    const dd = parts[1].padStart(2, '0');\n                    return `${yyyy}-${mm}-${dd}`;\n                }\n                \n                return dateInput;\n            }\n\n\n            function mapParentChildRelations(rawData) {\n                const { subcontractors, crews, teamMembers, timesheets, timesheetEntries, expenseReports, expenses } = rawData;\n\n                // Create lookup maps\n                const lookupMaps = {\n                    subcontractors: new Map(subcontractors.map(item => [item.dataid, item])),\n                    crews: new Map(crews.map(item => [item.dataid, item])),\n                    teamMembers: new Map(teamMembers.map(item => [item.dataid, item])),\n                    timesheets: new Map(timesheets.map(item => [item.dataid, item])),\n                    timesheetEntries: new Map(timesheetEntries.map(item => [item.dataid, item])),\n                    expenseReports: new Map(expenseReports.map(item => [item.dataid, item])),\n                    expenses: new Map(expenses.map(item => [item.dataid, item]))\n                };\n\n                // Helper function to get related record\n                function getRelatedRecord(record, foreignKeyName, targetMap) {\n                    const foreignKeyValue = record[foreignKeys[foreignKeyName]];\n                    return foreignKeyValue ? targetMap.get(foreignKeyValue) : null;\n                }\n\n                // Map timesheet entries (Personnel/Equipment)\n                const timesheetRows = timesheetEntries.map(entry => {\n                    const timesheet = getRelatedRecord(entry, 'timesheets', lookupMaps.timesheets);\n                    const crew = timesheet ? getRelatedRecord(timesheet, 'crews', lookupMaps.crews) : null;\n                    const subcontractor = crew ? getRelatedRecord(crew, 'subcontractors', lookupMaps.subcontractors) : null;\n\n                    if (subcontractor === undefined || crew === undefined || timesheet === undefined) {\n                        console.warn(`Could not find parent entries for timesheet: ${entry.dataid}`);\n                        return null; // Skip if relationship could not be established\n                    }\n                    \n                    return {\n                        type: 'timesheet',\n                        timesheetEntry: entry,\n                        timesheet,\n                        crew,\n                        subcontractor\n                    };\n                });\n                \n                // Map expense records\n                const expenseRows = expenses.map(expense => {\n                    const expenseReport = getRelatedRecord(expense, 'expenseReports', lookupMaps.expenseReports);\n                    const crew = expenseReport ? getRelatedRecord(expenseReport, 'crews', lookupMaps.crews) : null;\n                    const subcontractor = crew ? getRelatedRecord(crew, 'subcontractors', lookupMaps.subcontractors) : null;\n\n                    if (subcontractor === undefined || crew === undefined || expenseReport === undefined) {\n                        console.warn(`Could not find parent entries for expense: ${expense.dataid}`);\n                        return null; // Skip if relationship could not be established\n                    }\n\n                    return {\n                        type: 'expense',\n                        expense,\n                        expenseReport,\n                        crew,\n                        subcontractor\n                    };\n                });\n\n                return [...timesheetRows, ...expenseRows].filter(entry => entry !== null);\n            }\n\n\n            async function getAllReportData() {\n                const subcontractorsDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Subcontractor' }); // Subcontractors Table\n                const crewsDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Crew' }); // Crew Table\n                const teammembersDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Team Member' }); // Team Members Table\n                const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet' }) // Timesheet Table\n                const timesheetEntriesDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet Entry' }) // Timesheet Entries Table\n                const expenseReportsDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Expense Report' }); // Expense Reports Table\n                const expensesDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Expenses' }); // Expenses Table\n    \n                const promises = [\n                    subcontractorsDetailsApi.getRecords(),\n                    crewsDetailsApi.getRecords(),\n                    teammembersDetailsApi.getRecords(),\n                    timesheetDetailsApi.getRecords(),\n                    timesheetEntriesDetailsApi.getRecords(),\n                    expenseReportsDetailsApi.getRecords(),\n                    expensesDetailsApi.getRecords()\n                ];\n\n                const [\n                    { data: subcontractors },\n                    { data: crews },\n                    { data: teamMembers },\n                    { data: timesheets },\n                    { data: timesheetEntries },\n                    { data: expenseReports },\n                    { data: expenses }\n                ] = await Promise.all(promises);\n\n                return {\n                    subcontractors,\n                    crews,\n                    teamMembers,\n                    timesheets,\n                    timesheetEntries,\n                    expenseReports,\n                    expenses\n                };\n            }\n\n            function getRate(subcontractor, expenseType, rateType) {\n                const entityType = document.getElementById(\"paramRateType\").textContent.trim(); // subcontractor or utility\n                let type = entityType;\n                const safeExpenseType = typeof expenseType === 'string' ? expenseType.trim() : '';\n                const field = expenseTypeFieldMap?.[safeExpenseType]?.[type]?.[rateType] || null;\n                if (!field || field === null) {\n                    return 0; // Return 0 if no rate is found\n                }\n                \n                return subcontractor[field];\n            }\n\n               function toggleSpinner(state) {\n                    var mainForm = document.getElementById(\"main-section\");\n                    var spinner = document.getElementById(\"spinner\");\n                    \n                    switch (state) {\n                        case 'show':\n                            mainForm.style.display = \"none\";\n                            spinner.style.display = \"block\";\n                            break;\n                        case 'hide':\n                            mainForm.style.display = \"block\";\n                            spinner.style.display = \"none\";\n                            break;\n                    }\n                }\n        }\n    </script>\n\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "List - Expense Report - All",
                "table": "Expense Reports",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"/>\n        <link rel=\"stylesheet\" href=\"https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" />\n    </head>\n    <xsl:variable name=\"filterCount\"\n        select=\"count(/data/currentfilter/searchfilters/searchfilter)\" />\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n        <applytheme/>\n        <span class=\"media-breakpoint-state\"/>\n        <section class=\"d-none\">\n            <span button=\"pdf-button\">\n                <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n            </span>\n            <span button=\"export-button\">\n                <exportbutton>\n                    <field name=\"expense_date\" label=\"Expense Date\" />\n                    <field name=\"subcontractor_name\" label=\"Subcontractor\" />\n                    <field name=\"crew_id\" label=\"Crew\" />\n                    <field name=\"crew_lead\" label=\"Crew Lead\" />\n                    <childtable name=\"Expenses\">\n                        <field name=\"expense_date\" label=\"Expense Date\" />\n                        <field name=\"subcontractor_name\" label=\"Subcontractor\" />\n                        <field name=\"crew_id\" label=\"Crew\" />\n                        <field name=\"crew_lead\" label=\"Crew Lead\" />\n                        <field name=\"crew_member\" label=\"Crew Member\" />\n                        <field name=\"expense_type\" label=\"Expense Type\" />\n                        <field name=\"store_restaurant_hotel\" label=\"Store/Restaurant/Hotel\" />\n                        <field name=\"amount\" label=\"Amount\" />\n                        <field name=\"comments\" label=\"Comments\" />\n                    </childtable>\n                </exportbutton>\n            </span>\n        </section>\n        <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\n            <div class=\"flex flex-column flex-column-grow w-100\">\n                <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" name=\"Main Nav\">\n                    <!--navigation tabs-->\n                    <nav class=\"nav\">\n                        <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n                        <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n                        <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n                        <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n                        <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n                        <viewlink name=\"List - Expense Report - All\" ignoreerrors=\"true\" class=\"nav-link active\">Expenses</viewlink>\n                        <boardpermission name=\"View Reports\">\n                            <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n                        </boardpermission>\n                    </nav>\n                    <!--navigation tabs-->\n                </section>\n                <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\">\n                    <header class=\"container-fluid\" aria-label=\"Header\">\n                        <div class=\"flex\">\n                            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                                <agencyinfo type=\"primarylogo\"/>\n                            </div>\n                            <div>\n                                <h4>List - Expense Report</h4>\n                                <h6>\n                                    <incidentname/>\n                                </h6>\n                            </div>\n                        </div>\n                        <div>\n                            <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                                <li class=\"nav-item mr-2\">\n                                    <boardpermission name=\"Create\">\n                                        <viewlink name=\"Input - Expenses\" class=\"btn btn-sm btn-primary\">\n                                            Create New\n                                            <i class=\"material-icons ml-2\">add</i>\n                                        </viewlink>\n                                    </boardpermission>\n                                </li>\n                                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\">\n                                    <ul data-gjs-type=\"appBar-filter-and-search-button\" type=\"button\" data-toggle=\"modal\" data-target=\"#filter-modal\" class=\"btn btn-sm btn-outline-primary\">\n                                        Filter/Search\n                                        <if test=\"$filterCount &gt; 0\">\n                                            <xsl:text>(</xsl:text><value-of select=\"$filterCount\" />\n                                            <xsl:text>)</xsl:text>\n                                        </if>\n                                        <i class=\"material-icons ml-2\">filter_list</i>\n                                    </ul>\n                                </li>\n                                <li class=\"nav-item\" updatesection=\"true\" id=\"main-filter-toggle\"/>\n                                <li class=\"dropdown nav-item flex flex-center\">\n                                    <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                                        <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                        <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                        <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </header>\n                </nav>\n                <foreignkey type=\"viewlink\" table=\"Crews\"/>\n                <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n                    <div class=\"flex flex-column js-target-map-move\">\n                        <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n                            <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n                                <section class=\"mt-2\" aria-label=\"Table\">\n                                    <table class=\"table table-striped table-sm mt-1 sticky-header\">\n                                        <thead>\n                                            <tr>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"crew_id\">Crew Id</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"expense_date\">Expense Date</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\"/>\n                                            </tr>\n                                        </thead>\n                                        <tbody id=\"main-table\" updatesection=\"true\">\n                                            <eocrepeatallrecords>\n                                                <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\n                                                    <td>\n                                                        <eocfield name=\"subcontractor_name\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td>\n                                                        <eocfield name=\"crew_id\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td>\n                                                        <eocfield name=\"expense_date\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td class=\"text-right\">\n                                                        <viewlink name=\"Details - Expense Report\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\n                                                            <viewparameter name=\"presentation\">panel</viewparameter>\n                                                        </viewlink>\n                                                        <div class=\"dropdown cursor-pointer\">\n                                                            <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                                                                <i class=\"material-icons faded-grey\">more_horiz</i>\n                                                            </a>\n                                                            <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                                                <viewlink name=\"Details - Expense Report\" class=\"dropdown-item\">\n                                                                    View   \n                                                                </viewlink>\n                                                                <boardpermission name=\"Delete\">\n                                                                    <div class=\"dropdown-divider\"/>\n                                                                    <viewlink name=\"Delete - Expense Report\" class=\"dropdown-item text-danger\">Delete</viewlink>\n                                                                </boardpermission>\n                                                            </div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            </eocrepeatallrecords>\n                                        </tbody>\n                                    </table>\n                                    <div class=\"d-none\">\n                                        <eocfield name=\"crew_lead\" disableclick=\"true\"/>\n                                    </div>\n                                </section>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n                    <boardpermission name=\"Create\">\n                        <viewlink name=\"Input - Expenses\" class=\"text-white\" refreshid=\"main-table\">\n                            <div class=\"flex flex-col\">\n                                <i class=\"material-icons cursor-pointer\">add</i>\n                                CREATE NEW\n                            </div>\n                        </viewlink>\n                    </boardpermission>\n                    <div class=\"flex flex-col dropup\">\n                        <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">more_horiz</i>\n                        ACTIONS\n                        <div class=\"dropdown-menu cursor-pointer\">\n                            <viewlink name=\"List - Subcontractors - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster\n                            </viewlink>\n                            <viewlink name=\"List - Crews - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n                            <viewlink name=\"List - Team Members - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n                            <viewlink name=\"List - Equipment - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n                            <viewlink name=\"List - Timesheet - All\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n                            <boardpermission name=\"View Reports\">\n                                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                            </boardpermission>\n                            <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\n                            <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\n                            <a activate=\"export-button\" class=\"dropdown-item\">Export to CSV</a>\n                        </div>\n                    </div>\n                </footer>\n            </div>\n        </main>\n        <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\"\n            tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n            <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n                <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <i class=\"material-icons\">close</i>\n                </button>\n                <div class=\"modal-content\">\n                    <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n                    <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n                </div>\n            </div>\n        </section>\n        <section class=\"modal fade\" id=\"filter-modal\" role=\"dialog\" aria-labelledby=\"filter-modal-label\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h4 class=\"modal-title text-bold\" id=\"filter-modal-label\">Filter/Search</h4>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\"/>\n                            <i class=\"material-icons\">close</i>\n                        </button>\n                    </div>\n                    <div class=\"horizontal-line-break mt-3\"/>\n                    <div class=\"modal-body\">\n                        <div class=\"tab-pane \" id=\"search-1\">\n                            <div class=\"row\" aria-labelledby=\"search-1-heading\">\n                                <div class=\"col\">\n                                    <h4 class=\"title mt-3\" id=\"search-1-heading\">Search Criteria</h4>\n                                </div>\n                            </div>\n                            <div class=\"row\" aria-labelledby=\"search-text-0-label\">\n                                <div class=\"col-lg\" data-apply-class-to-children=\"input:form-control\">\n                                    <div class=\"form-group\">\n                                        <label class=\"form-label\" id=\"search-text-0-label\">Search</label>\n                                        <search exact=\"false\" showclear=\"false\">\n                                            <field name=\"subcontractor_name\"/>\n                                            <field name=\"crew_id\"/>\n                                            <field name=\"crewId\"/>\n                                        </search>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\" aria-labelledby=\"search-range-1-label\">\n                                <div class=\"col-lg\">\n                                    <label class=\"form-label\" id=\"search-range-1-label\">Search by date</label>\n                                    <div class=\"date-range-group\" data-apply-class-to-children=\"input:form-control dpickr cursor-pointer|p:form-text\">                                        \n                                        <search exact=\"false\" range=\"true\" rangetext=\"to\">\n                                            <field name=\"expense_date\"/>\n                                        </search>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-lg\">\n                                    <div class=\"flex flex-justify-end\">\n                                        <button type=\"link\" activate=\"clearsearch-button\" class=\"btn btn-sm btn-outline-primary\">Clear all</button>\n                                        <button class=\"btn btn-sm btn-primary\" activate=\"search-button\" id=\"filter-apply-button\">Apply</button>\n                                        <div class=\"d-none ds-utility\">\n                                            <span button=\"search-button\">\n                                                <searchbutton/>\n                                            </span>\n                                            <span button=\"clearsearch-button\">\n                                                <clearsearchbutton/>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer flex flex-justify-end\">\n                        <button data-dismiss=\"modal\" class=\"btn btn-sm btn-primary btn-link\">Dismiss</button>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"/>\n        <script src=\"https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Subcontractor Timesheet",
                "table": "Subcontractors",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\"\n  data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\" id=\"body\">\n  <section class=\"d-none\">\n    <span button=\"pdf-button\">\n      <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\n    </span>\n  </section>\n  <eocrepeatallrecords>\n    <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n      <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"is6j8\">\n        <header class=\"container-fluid\" aria-label=\"Header\">\n          <div class=\"flex\">\n            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n              <agencyinfo type=\"primarylogo\" />\n            </div>\n            <div>\n              <h4>Record Details</h4>\n              <h6>Board Record</h6>\n            </div>\n          </div>\n          <div class=\"flex print-hide align-items-center\">\n            <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n              <li class=\"nav-item dropdown flex flex-center\">\n                <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\"\n                  x-placement=\"bottom-end\">\n                  <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                  <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </header>\n      </nav>\n      <div class=\"scrollable-area\">\n        <section\n          class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\"\n          id=\"ijpok\">\n          <nav class=\"row print-hide my-2 mobile-hide\">\n            <div class=\"col\">\n              <returnlink class=\"btn btn-sm btn-link text-primary\">\n                <i class=\"material-icons\">arrow_back_ios</i>\n                Return\n              </returnlink>\n            </div>\n          </nav>\n          <div class=\"row dst-display-row\">\n            <div class=\"mb-3 dst-display-group col-md-12 d-flex align-items-center justify-content-between\" id=\"ilmeef\">\n              <div class=\"mobile-hide-lg\">\n                <span class=\"faded-grey mr-2\">Subcontractor Name:</span>\n                <span>\n                  <eocfield name=\"subcontractor_name\" />\n                </span>\n              </div>\n              <div>\n                <boardpermission name=\"Create\">\n                  <viewlink name=\"Input - Bulk Time Entries\" class=\"btn text-white btn-sm btn-primary\" table=\"Dummy\">\n                    <viewparameter name=\"subcontractorID\">\n                      <value-of select=\"/data/@dataid\" />\n                    </viewparameter>\n                    <viewparameter name=\"presentation\">\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                    </viewparameter>\n                    Add Crew Timesheet\n                  </viewlink>\n                </boardpermission>\n              </div>\n            </div>\n          </div>\n          <div class=\"form-header\" id=\"iu5oab\">\n            <h4>\n              <b>\n                Crews\n              </b>\n            </h4>\n          </div>\n          <div class=\"row dst-display-row\">\n            <section aria-label=\"Table\" class=\"col mt-2\">\n              <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">\n                      Subcontractor\n                    </th>\n                    <th scope=\"col\">\n                      Crew ID\n                    </th>\n                    <th scope=\"col\" class=\"text-center\">\n                      # Crew Members\n                    </th>\n                    <th scope=\"col\" class=\"text-center\">\n                      # of Equipment\n                    </th>\n                    <th width=\"5%\" class=\"bg-white text-center\">\n                      Approved Timesheets\n                    </th>\n                    <th scope=\"col\" class=\"text-center\">\n                      Unapproved Timesheets\n                    </th>\n                    <th scope=\"col\" width=\"5%\" />\n                  </tr>\n                </thead>\n                <tbody id=\"project-data\">\n                  <relatedlist aria-label=\"Data\" table=\"Crews\" rlid=\"1\">\n                    <tr dataid=\"{@dataid}\">\n                      <td>\n                        <foreignkey table=\"Subcontractors\" />\n                        <eocfield type=\"fk\" table=\"Subcontractors\" name=\"subcontractor_name\" disableclick=\"true\" />\n                      </td>\n                      <td scope=\"row\">\n                        <eocfield disableclick=\"true\" name=\"crew_id\" table=\"Crews\" type=\"rl\" />\n                      </td>\n                      <td scope=\"row\" class=\"text-center\" data-teammemberdataidel=\"{@dataid}\" />\n                      <td scope=\"row\" class=\"text-center\" data-equipmentdataidel=\"{@dataid}\" />\n                      <td class=\"text-center\" data-approvedtsdataidel=\"{@dataid}\"></td>\n                      <td scope=\"row\" class=\"text-center\" data-unapprovedtsdataidel=\"{@dataid}\" />\n                      <td class=\"text-right\">\n                        <div class=\"dropdown cursor-pointer\">\n                          <a data-toggle=\"dropdown\">\n                            <b>\n                              <i class=\"material-icons faded-grey\">\n                                more_horiz\n                              </i>\n                            </b>\n                          </a>\n                          <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                            <viewlink class=\"dropdown-item scroll-link\" dialogheight=\"100%\" dialogwidth=\"100%\"\n                              name=\"Details - Crew Timesheets\">\n                              <viewparameter name=\"presentation\">\n                                <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\n                              </viewparameter>\n                              <span>\n                                Timesheets\n                              </span>\n                            </viewlink>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  </relatedlist>\n                </tbody>\n              </table>\n            </section>\n          </div>\n        </section>\n      </div>\n      <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n        <returnlink class=\"text-white cursor-pointer\">\n          <div class=\"flex flex-col\">\n            <i class=\"material-icons\">keyboard_arrow_left</i>\n            RETURN\n          </div>\n        </returnlink>\n        <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n          aria-expanded=\"false\">\n          <i class=\"material-icons\">more_horiz</i>\n          ACTIONS\n          <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a\n              activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div>\n        </div>\n      </footer>\n    </main>\n    <div style=\"display: none\">\n      <viewlink name=\"Details - Team Member\" />\n      <viewlink name=\"Details - Equipment\" />\n    </div>\n  </eocrepeatallrecords>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n    path=\"/js/plugins/moment.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n    path=\"/js/material-kit.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-api/4.5.0/webeoc-api.min.js\"></script>\n  <script src=\"https://assets.juvare.com/webeoc/cxd/view-base/2.7.7/view-base.min.js\"></script>\n\n  <script type=\"text/javascript\">\n    window.onload = async function () {\n      \n      const teammembersDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Team Member' });\n      const equipmentDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Equipment' });\n      const timesheetDetailsApi = new WebEOCCXD.WebEOCAPI({ displayViewName: 'Details - Timesheet' })\n      \n      const { data: teamMemberRcrds } = await teammembersDetailsApi.getRecords()\n      const { data: equipmentRcrds } = await equipmentDetailsApi.getRecords()\n      const { data: timesheetRcrds } = await timesheetDetailsApi.getRecords()\n      \n      const crewRowEls = document.querySelectorAll('tr[dataid]');\n      const { view } = WebEOCCXD.ViewBase;\n\n      view.onViewRefresh(function() {\n        displayCounts()\n      });\n\n      displayCounts()\n\n      function displayCounts() {\n        for (const row of crewRowEls) { \n          // get dataid of row's crew.\n          let crewId = row.getAttribute('dataid');\n\n          // match Crew Records and display sum.\n          let matchingteamMemberRcrds = teamMemberRcrds.filter(function(tm) { return tm['<foreignkeyreference table=\"Crews\" />'] === crewId})\n          let teamMemberCountEl = document.querySelector(`td[data-teammemberdataidel='${crewId}']`);\n          teamMemberCountEl.innerHTML = matchingteamMemberRcrds.length;\n          \n          // match Equipments Records and display sum.\n          let matchingequipmentRcrds = equipmentRcrds.filter(function(tm) { return tm['<foreignkeyreference table=\"Crews\" />'] === crewId})\n          let equipmentCountEl = document.querySelector(`td[data-equipmentdataidel='${crewId}']`);\n          equipmentCountEl.innerHTML = matchingequipmentRcrds.length;\n          \n          // match timesheet records for this crew\n          let matchingTimesheetRcrds = timesheetRcrds.filter(function(tm) { \n        return tm['<foreignkeyreference table=\"Crews\" />'] === crewId;\n          });\n\n          // split into approved and unapproved\n          let approvedTimesheets = matchingTimesheetRcrds.filter(function(ts) {\n        return ts.approval_status === 'Approved';\n          });\n          let unapprovedTimesheets = matchingTimesheetRcrds.filter(function(ts) {\n        return ts.approval_status !== 'Approved';\n          });\n\n          // style the results with a badge and display unapproved time entries.\n          let unapprovedTsCountEl = document.querySelector(`td[data-unapprovedtsdataidel='${crewId}']`);\n          if (unapprovedTimesheets.length > 0) {\n        unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-warning\">${unapprovedTimesheets.length}</span>`;\n          } else {\n        unapprovedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${unapprovedTimesheets.length}</span>`;\n          }\n\n          // display approved timesheets count\n          let approvedTsCountEl = document.querySelector(`td[data-approvedtsdataidel='${crewId}']`);\n          if (approvedTsCountEl) {\n        if (approvedTimesheets.length > 0) {\n          approvedTsCountEl.innerHTML = `<span class=\"badge badge-success\">${approvedTimesheets.length}</span>`;\n        } else {\n          approvedTsCountEl.innerHTML = `<span class=\"badge badge-secondary\">0</span>`;\n        }\n          }\n        }\n      }\n\n      function refreshElements() {\n        window.location.reload();\n      }\n    }\n\n  </script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Personnel Time Entry",
                "table": "Timesheet Entries",
                "html": "<html lang=\"en\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\n    </head>\n    <xsl:variable name=\"isLocked\">\n        <value-of select=\"/data/ViewParameter[@name = 'locked_state']\" />\n    </xsl:variable>\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n        <section class=\"d-none\">\n            <span button=\"pdf-button\">\n                <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n            </span>\n        </section>\n        <eocrepeatallrecords>\n            <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n                <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"iaaof\">\n                    <header class=\"container-fluid\" aria-label=\"Header\">\n                        <div class=\"flex\">\n                            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                                <agencyinfo type=\"primarylogo\"/>\n                            </div>\n                            <div>\n                                <h4>Record Details</h4>\n                                <h6>Board Record</h6>\n                            </div>\n                        </div>\n                        <div class=\"flex print-hide align-items-center\">\n                            <boardpermission name=\"Update\">\n                                <viewlink name=\"Input - Timesheet Entry\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                                    <viewparameter name=\"presentation\">\n                                        <value-of select=\"/data/ViewParameter[@name = 'presentation']\"/>\n                                    </viewparameter>\n                                    Edit\n                                    <i class=\"material-icons ml-2\">create</i>\n                                </viewlink>\n                            </boardpermission>\n                            <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                                <li class=\"nav-item dropdown flex flex-center\">\n                                    <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                                        <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                        <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </header>\n                </nav>\n                <div class=\"scrollable-area\">\n                    <div>\n                        <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"impo7\">\n                            <nav class=\"row print-hide my-2 \">\n                                <div class=\"col\">\n                                    <returnlink class=\"btn btn-sm btn-link text-primary\">\n                                        <i class=\"material-icons\">arrow_back_ios</i>\n                                        Return\n                                    </returnlink>\n                                </div>\n                                <boardpermission name=\"Approve Timesheet\">\n                                    <div class=\"col text-right mobile-hide\">\n                                        <viewlink name=\"Input - Personnel Time Entry\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                                            <i class=\"material-icons\">create</i>\n                                            Edit Record\n                                        </viewlink>\n                                    </div>\n                                </boardpermission>\n                            </nav>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i4cahe\">\n                                    <span class=\"faded-grey mr-2\">Type:</span>\n                                    <span>\n                                        <eocfield name=\"type\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"iew64r\">\n                                    <span class=\"faded-grey mr-2\">Personnel ID:</span>\n                                    <span>\n                                        <eocfield name=\"personnel_id\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"izovyi\">\n                                    <span class=\"faded-grey mr-2\">First Name:</span>\n                                    <span>\n                                        <eocfield name=\"first_name\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i8i2cb\">\n                                    <span class=\"faded-grey mr-2\">Last Name:</span>\n                                    <span>\n                                        <eocfield name=\"last_name\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i8i2cb\">\n                                    <span class=\"faded-grey mr-2\">Crew Lead / Foreman:</span>\n                                    <span>\n                                        <eocfield name=\"crew_lead\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ixs9ye\">\n                                    <span class=\"faded-grey mr-2\">Classification:</span>\n                                    <span>\n                                        <eocfield name=\"classification\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i27d5x\">\n                                    <span class=\"faded-grey mr-2\">Status:</span>\n                                    <span>\n                                        <eocfield name=\"status\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i1v1lg\">\n                                    <span class=\"faded-grey mr-2\">Lodging Provided:</span>\n                                    <span>\n                                        <eocfield name=\"lodging\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i1v1lg\">\n                                    <span class=\"faded-grey mr-2\">Number of Meals Provided:</span>\n                                    <span>\n                                        <eocfield name=\"number_of_meals_provided\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ijxcqz\">\n                                    <span class=\"faded-grey mr-2\">Number of Per Diem Meals:</span>\n                                    <span>\n                                        <eocfield name=\"number_of_per_diem_meals\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ig2oe5\">\n                                    <span class=\"faded-grey mr-2\">Date:</span>\n                                    <span>\n                                        <eocfield name=\"date\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"iovs7v\">\n                                    <span class=\"faded-grey mr-2\">Start Time:</span>\n                                    <span>\n                                        <eocfield name=\"start_time\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i2h4xf\">\n                                    <span class=\"faded-grey mr-2\">End Time:</span>\n                                    <span>\n                                        <eocfield name=\"end_time\"/>\n                                    </span>\n                                </div>\n                            </div>\n                                                        <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ig2oe5\">\n                                    <span class=\"faded-grey mr-2\">Standard Time:</span>\n                                    <span>\n                                        <eocfield name=\"standard_hours\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"iovs7v\">\n                                    <span class=\"faded-grey mr-2\">Over Time:</span>\n                                    <span>\n                                        <eocfield name=\"double_hours\"/>\n                                    </span>\n                                </div>\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"i2h4xf\">\n                                    <span class=\"faded-grey mr-2\">Premium Time:</span>\n                                    <span>\n                                        <eocfield name=\"premium_hours\"/>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ity3lz\">\n                                    <span class=\"faded-grey mr-2\">Comments:</span>\n                                    <span>\n                                        <eocfield name=\"comments\"/>\n                                    </span>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </div>\n                <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n                    <returnlink class=\"text-white cursor-pointer\">\n                        <div class=\"flex flex-col\">\n                            <i class=\"material-icons\">keyboard_arrow_left</i>\n                            RETURN\n                        </div>\n                    </returnlink>\n                    <boardpermission name=\"Approve Timesheet\">\n                        <viewlink name=\"Input - Timesheet Entry\" class=\"text-white cursor-pointer\">\n                            <div class=\"flex flex-col\">\n                                <i class=\"material-icons\">edit</i>\n                                EDIT\n                            </div>\n                        </viewlink>\n                    </boardpermission>\n                    <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                        <i class=\"material-icons\">more_horiz</i>\n                        ACTIONS\n                        <div class=\"dropdown-menu cursor-pointer\">\n                            <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                            <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                        </div>\n                    </div>\n                </footer>\n            </main>\n        </eocrepeatallrecords>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\n    </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Expense Report",
                "table": "Expense Reports",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n  <head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\"/>\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"/>\n  </head>\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\n    <section class=\"d-none\">\n      <span button=\"pdf-button\">\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n      </span>\n    </section>\n    <applytheme/>\n    <eocrepeatallrecords>\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"iuprz\">\n          <header class=\"container-fluid\" aria-label=\"Header\">\n            <div class=\"flex\">\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                <agencyinfo type=\"primarylogo\"/>\n              </div>\n              <div>\n                <h4>Record Details</h4>\n                <h6>Board Record</h6>\n              </div>\n            </div>\n            <div class=\"flex print-hide align-items-center\">\n              <boardpermission name=\"Update\">\n                <viewlink name=\"Input - Expense Report\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\n                  <viewparameter name=\"presentation\">\n                    <value-of select=\"/data/ViewParameter[@name = 'presentation']\"/>\n                  </viewparameter>\n                  Edit\n                  <i class=\"material-icons ml-2\">create</i>\n                </viewlink>\n              </boardpermission>\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\n                <li class=\"nav-item dropdown flex flex-center\">\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </header>\n        </nav>\n        <foreignkey type=\"viewlink\" table=\"Crews\"/>\n        <div class=\"scrollable-area\">\n          <div>\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ioa2y\">\n              <nav class=\"row print-hide my-2 mobile-hide\">\n                <div class=\"col\">\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\n                    <i class=\"material-icons\">arrow_back_ios</i>\n                    Return\n                  </returnlink>\n                </div>\n                <div class=\"col text-right\">\n                  <boardpermission name=\"Update\">\n                    <viewlink name=\"Input - Expense Report\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\n                      <i class=\"material-icons\">create</i>\n                      Edit Record\n                    </viewlink>\n                  </boardpermission>\n                </div>\n              </nav>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"icd2fj\">\n                  <span class=\"faded-grey mr-2\">Subcontractor Name:</span>\n                  <span>\n                    <eocfield name=\"subcontractor_name\"/>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"irozoz\">\n                  <span class=\"faded-grey mr-2\">Crew ID:</span>\n                  <span>\n                    <eocfield name=\"crew_id\"/>\n                  </span>\n                </div>\n              </div>\n              <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"i0bj1n\">\n                  <span class=\"faded-grey mr-2\">Crew Lead:</span>\n                  <span>\n                    <eocfield name=\"crew_lead\"/>\n                  </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"icqs3j\">\n                  <span class=\"faded-grey mr-2\">Expense Date:</span>\n                  <span>\n                    <eocfield name=\"expense_date\"/>\n                  </span>\n                </div>\n              </div>\n              <section id=\"ipqwrv\" class=\"dst-child-view-table\">\n                \n                <div class=\"dst-child-table-header d-flex align-items-center\">\n                  <div class=\"media-body\"/>\n                  <if test=\"false()\">\n                    <relatedexpression name=\"expenseEntries\" table=\"Expenses\" where=\"_webeoc_delete_flag != 'yes'\">\n                      SUM(\n                        CASE\n                          WHEN (expense_type IS NOT NULL) THEN 1\n                          ELSE 0\n                        END\n                      )\n                    </relatedexpression>\n                  </if>\n                  <if test=\"@expenseEntries &lt; 10 or not(@expenseEntries)\">\n                    <boardpermission name=\"Create\">\n                      <viewlink name=\"Input - Expense Entry\" table=\"Expenses\">\n                          <button type=\"button\" class=\"btn btn-sm btn-primary\">\n                              Add\n                              <i class=\"material-icons ml-2\" style=\"top:-2px;\">add</i>\n                          </button>\n                      </viewlink>\n                    </boardpermission>\n                  </if>\n                </div>\n                <table class=\"table table-striped table-sm mt-1 sticky-header\">\n                  <thead data-gjs-type=\"default\">\n                    <tr>\n                      <th width=\"5%\" class=\"bg-white \">\n                        <sortlink field=\"crew_member\" type=\"rl\" table=\"Expenses\">Crew Member</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"expense_type\" type=\"rl\" table=\"Expenses\">Expense Type</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white \">\n                        <sortlink field=\"store_restaurant_hotel\" type=\"rl\" table=\"Expenses\">Store/Restaurant/Hotel</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"city_state\" type=\"rl\" table=\"Expenses\">City, State</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white \">\n                        <sortlink field=\"amount\" type=\"rl\" table=\"Expenses\">Amount</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"comments\" type=\"rl\" table=\"Expenses\">Comments</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\n                        <sortlink field=\"attachment\" type=\"rl\" table=\"Expenses\">Attachment</sortlink>\n                      </th>\n                      <th width=\"5%\" class=\"bg-white\"/>\n                    </tr>\n                  </thead>\n                    <tbody updatesection=\"true\">\n                      <relatedlist table=\"Expenses\" filter=\"ISNULL(_webeoc_delete_flag,'')&lt;&gt;'yes'\" applyIncidentFilter=\"false\" rlid=\"ipqwrv\">\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\n                          <td>\n                            <eocfield name=\"crew_member\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"expense_type\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td>\n                            <eocfield name=\"store_restaurant_hotel\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"city_state\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td>\n                            $<eocfield name=\"amount\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <eocfield name=\"comments\" type=\"rl\" table=\"Expenses\" disableclick=\"true\"/>\n                          </td>\n                          <td class=\"mobile-hide-lg\">\n                            <attachment name=\"attachment\" type=\"rl\" table=\"Expenses\" />\n                          </td>\n                          <td class=\"text-right\">\n                            <viewlink name=\"Details - Expenses\" table=\"Expenses\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel dst-viewlink-details\">\n                              <viewparameter name=\"presentation\">panel</viewparameter>\n                            </viewlink>\n                            <div class=\"dropdown cursor-pointer\">\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\n                              </a>\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                <viewlink name=\"Details - Expenses\" table=\"Expenses\" class=\"dropdown-item viewlink-default dst-viewlink-details\">View\n                                  <viewparameter name=\"parentDataid\">\n                                    <value-of select=\"/data/@dataid\" />\n                                  </viewparameter>\n                                </viewlink>\n                                <boardpermission name=\"Update\">\n                                  <viewlink name=\"Input - Expense Entry\" table=\"Expenses\" class=\"dropdown-item dst-viewlink-input\">Edit\n                                  </viewlink>\n                                </boardpermission>\n                                <boardpermission name=\"Delete\">\n                                  <div class=\"dropdown-divider\"/>\n                                  <viewlink name=\"Delete - Expense\" table=\"Expenses\" class=\"dropdown-item text-danger dst-viewlink-delete\">Delete</viewlink>\n                                </boardpermission>\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      </relatedlist>\n                    </tbody>\n                  </table>\n              </section>\n            </section>\n          </div>\n        </div>\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\n          <returnlink class=\"text-white cursor-pointer\">\n            <div class=\"flex flex-col\">\n              <i class=\"material-icons\">keyboard_arrow_left</i>\n              RETURN\n            </div>\n          </returnlink>\n          <boardpermission name=\"Update\">\n            <viewlink name=\"Input - Expense Report\" class=\"text-white cursor-pointer\">\n              <div class=\"flex flex-col\">\n                <i class=\"material-icons\">edit</i>\n                EDIT\n              </div>\n              <viewparameter name=\"parentDataid\">\n                <value-of select=\"/data/@dataid\" />\n              </viewparameter>\n            </viewlink>\n          </boardpermission>\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            <i class=\"material-icons\">more_horiz</i>\n            ACTIONS\n            <div class=\"dropdown-menu cursor-pointer\">\n              <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n              <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n            </div>\n          </div>\n        </footer>\n      </main>\n    </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"/>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"/>\n  </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Expense Report",
                "table": "Expense Reports",
                "html": "<html xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\n        <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\n        <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"/>\n        <link rel=\"stylesheet\" href=\"https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" />\n    </head>\n    <xsl:variable name=\"filterCount\"\n        select=\"count(/data/currentfilter/searchfilters/searchfilter)\" />\n    <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n        <applytheme/>\n        <span class=\"media-breakpoint-state\"/>\n        <section class=\"d-none\">\n            <span button=\"pdf-button\">\n                <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\n            </span>\n            <span button=\"export-button\">\n                <exportbutton>\n                    <field name=\"expense_date\" label=\"Expense Date\" />\n                    <field name=\"subcontractor_name\" label=\"Subcontractor\" />\n                    <field name=\"crew_id\" label=\"Crew\" />\n                    <field name=\"crew_lead\" label=\"Crew Lead\" />\n                    <childtable name=\"Expenses\">\n                        <field name=\"expense_date\" label=\"Expense Date\" />\n                        <field name=\"subcontractor_name\" label=\"Subcontractor\" />\n                        <field name=\"crew_id\" label=\"Crew\" />\n                        <field name=\"crew_lead\" label=\"Crew Lead\" />\n                        <field name=\"crew_member\" label=\"Crew Member\" />\n                        <field name=\"expense_type\" label=\"Expense Type\" />\n                        <field name=\"store_restaurant_hotel\" label=\"Store/Restaurant/Hotel\" />\n                        <field name=\"amount\" label=\"Amount\" />\n                        <field name=\"comments\" label=\"Comments\" />\n                    </childtable>\n                </exportbutton>\n            </span>\n        </section>\n        <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\n            <div class=\"flex flex-column flex-column-grow w-100\">\n                <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" name=\"Main Nav\">\n                    <!--navigation tabs-->\n                    <nav class=\"nav\">\n                        <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\n                        <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\n                        <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\n                        <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\n                        <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\n                        <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link active\">Expenses</viewlink>\n                        <boardpermission name=\"View Reports\">\n                            <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\n                        </boardpermission>\n                    </nav>\n                    <!--navigation tabs-->\n                </section>\n                <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\">\n                    <header class=\"container-fluid\" aria-label=\"Header\">\n                        <div class=\"flex\">\n                            <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\n                                <agencyinfo type=\"primarylogo\"/>\n                            </div>\n                            <div>\n                                <h4>List - Expense Report</h4>\n                                <h6>\n                                    <incidentname/>\n                                </h6>\n                            </div>\n                        </div>\n                        <div>\n                            <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\n                                <li class=\"nav-item mr-2\">\n                                    <boardpermission name=\"Create\">\n                                        <viewlink name=\"Input - Expenses\" class=\"btn btn-sm btn-primary\">\n                                            Create New\n                                            <i class=\"material-icons ml-2\">add</i>\n                                        </viewlink>\n                                    </boardpermission>\n                                </li>\n                                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\">\n                                    <ul data-gjs-type=\"appBar-filter-and-search-button\" type=\"button\" data-toggle=\"modal\" data-target=\"#filter-modal\" class=\"btn btn-sm btn-outline-primary\">\n                                        Filter/Search\n                                        <if test=\"$filterCount &gt; 0\">\n                                            <xsl:text>(</xsl:text><value-of select=\"$filterCount\" />\n                                            <xsl:text>)</xsl:text>\n                                        </if>\n                                        <i class=\"material-icons ml-2\">filter_list</i>\n                                    </ul>\n                                </li>\n                                <li class=\"nav-item\" updatesection=\"true\" id=\"main-filter-toggle\"/>\n                                <li class=\"dropdown nav-item flex flex-center\">\n                                    <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\n                                    <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\n                                        <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\n                                        <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\n                                        <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    </header>\n                </nav>\n                <foreignkey type=\"viewlink\" table=\"Crews\"/>\n                <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\n                    <div class=\"flex flex-column\">\n                        <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\n                            <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\n                                <section class=\"mt-2\" aria-label=\"Table\">\n                                    <table class=\"table table-striped table-sm mt-1 sticky-header\">\n                                        <thead>\n                                            <tr>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"subcontractor_name\">Subcontractor Name</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"crew_id\">Crew Id</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\">\n                                                    <sortlink field=\"expense_date\">Expense Date</sortlink>\n                                                </th>\n                                                <th width=\"5%\" class=\"bg-white\"/>\n                                            </tr>\n                                        </thead>\n                                        <tbody id=\"main-table\" updatesection=\"true\">\n                                            <eocrepeatallrecords>\n                                                <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\n                                                    <td>\n                                                        <eocfield name=\"subcontractor_name\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td>\n                                                        <eocfield name=\"crew_id\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td>\n                                                        <eocfield name=\"expense_date\" disableclick=\"true\"/>\n                                                    </td>\n                                                    <td class=\"text-right\">\n                                                        <viewlink name=\"Details - Expense Report\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\n                                                            <viewparameter name=\"presentation\">panel</viewparameter>\n                                                        </viewlink>\n                                                        <div class=\"dropdown cursor-pointer\">\n                                                            <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\n                                                                <i class=\"material-icons faded-grey\">more_horiz</i>\n                                                            </a>\n                                                            <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\n                                                                <viewlink name=\"Details - Expense Report\" class=\"dropdown-item\">\n                                                                    View   \n                                                                </viewlink>\n                                                                <boardpermission name=\"Delete\">\n                                                                    <div class=\"dropdown-divider\"/>\n                                                                    <viewlink name=\"Delete - Expense Report\" class=\"dropdown-item text-danger\">Delete</viewlink>\n                                                                </boardpermission>\n                                                            </div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            </eocrepeatallrecords>\n                                        </tbody>\n                                    </table>\n                                    <div class=\"d-none\">\n                                        <eocfield name=\"crew_lead\" disableclick=\"true\"/>\n                                    </div>\n                                </section>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\n                    <boardpermission name=\"Create\">\n                        <viewlink name=\"Input - Expenses\" class=\"text-white\" refreshid=\"main-table\">\n                            <div class=\"flex flex-col\">\n                                <i class=\"material-icons cursor-pointer\">add</i>\n                                CREATE NEW\n                            </div>\n                        </viewlink>\n                    </boardpermission>\n                    <div class=\"flex flex-col dropup\">\n                        <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">more_horiz</i>\n                        ACTIONS\n                        <div class=\"dropdown-menu cursor-pointer\">\n                            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\n                            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\n                            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\n                            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\n                            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\n                            <boardpermission name=\"View Reports\">\n                                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\n                            </boardpermission>\n                            <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a><a activate=\"pdf-button\"\n                                class=\"dropdown-item d-md-flex\">Export to PDF</a><a activate=\"export-button\" class=\"dropdown-item\">Export to\n                                CSV</a>\n                        </div>\n                    </div>\n                </footer>\n            </div>\n        </main>\n        <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\"\n            tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n            <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n                <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <i class=\"material-icons\">close</i>\n                </button>\n                <div class=\"modal-content\">\n                    <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\" />\n                    <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\" />\n                </div>\n            </div>\n        </section>\n        <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\n            <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\n                <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <i class=\"material-icons\">close</i>\n                </button>\n                <div class=\"modal-content\">\n                    <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\"/>\n                    <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\"/>\n                </div>\n            </div>\n        </section>\n        <section class=\"modal fade\" id=\"filter-modal\" role=\"dialog\" aria-labelledby=\"filter-modal-label\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h4 class=\"modal-title text-bold\" id=\"filter-modal-label\">Filter/Search</h4>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\"/>\n                            <i class=\"material-icons\">close</i>\n                        </button>\n                    </div>\n                    <div class=\"horizontal-line-break mt-3\"/>\n                    <div class=\"modal-body\">\n                        <div class=\"tab-pane \" id=\"search-1\">\n                            <div class=\"row\" aria-labelledby=\"search-1-heading\">\n                                <div class=\"col\">\n                                    <h4 class=\"title mt-3\" id=\"search-1-heading\">Search Criteria</h4>\n                                </div>\n                            </div>\n                            <div class=\"row\" aria-labelledby=\"search-text-0-label\">\n                                <div class=\"col-lg\" data-apply-class-to-children=\"input:form-control\">\n                                    <div class=\"form-group\">\n                                        <label class=\"form-label\" id=\"search-text-0-label\">Search</label>\n                                        <search exact=\"false\" showclear=\"false\">\n                                            <field name=\"subcontractor_name\"/>\n                                            <field name=\"crew_id\"/>\n                                            <field name=\"crewId\"/>\n                                        </search>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\" aria-labelledby=\"search-range-1-label\">\n                                <div class=\"col-lg\">\n                                    <label class=\"form-label\" id=\"search-range-1-label\">Search by date</label>\n                                    <div class=\"date-range-group\" data-apply-class-to-children=\"input:form-control dpickr cursor-pointer|p:form-text\">                                        \n                                        <search exact=\"false\" range=\"true\" rangetext=\"to\">\n                                            <field name=\"expense_date\"/>\n                                        </search>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <div class=\"col-lg\">\n                                    <div class=\"flex flex-justify-end\">\n                                        <button type=\"link\" activate=\"clearsearch-button\" class=\"btn btn-sm btn-outline-primary\">Clear all</button>\n                                        <button class=\"btn btn-sm btn-primary\" activate=\"search-button\" id=\"filter-apply-button\">Apply</button>\n                                        <div class=\"d-none ds-utility\">\n                                            <span button=\"search-button\">\n                                                <searchbutton/>\n                                            </span>\n                                            <span button=\"clearsearch-button\">\n                                                <clearsearchbutton/>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer flex flex-justify-end\">\n                        <button data-dismiss=\"modal\" class=\"btn btn-sm btn-primary btn-link\">Dismiss</button>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"/>\n        <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"/>\n        <script src=\"https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    </body>\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Subcontractor",
                "table": "Subcontractors",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\r\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\" media=\"screen\" />\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\" />\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\" data-presentation=\"{/data/ViewParameter[@name = 'presentation']}\">\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\">PDF</pdflink>\r\n      </span>\r\n    </section>\r\n    <eocrepeatallrecords>\r\n      <main aria-label=\"Main Section\" class=\"page-wrap flex flex-column\">\r\n        <nav class=\"navbar navbar-default navbar-expand-lg\" aria-label=\"Navigation\" id=\"is6j8\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\" />\r\n              </div>\r\n              <div>\r\n                <h4>Record Details</h4>\r\n                <h6>Board Record</h6>\r\n              </div>\r\n            </div>\r\n            <div class=\"flex print-hide align-items-center\">\r\n              <if test=\"@locked != 'true' and @locked != 'True'\">\r\n                <boardpermission name=\"Update\">\r\n                  <viewlink name=\"Input - Subcontractor\" class=\"btn btn-sm btn-primary mobile-hide d-panel\" type=\"button\">\r\n                    <viewparameter name=\"presentation\">\r\n                      <value-of select=\"/data/ViewParameter[@name = 'presentation']\" />\r\n                    </viewparameter>\r\n                    Edit\r\n                    <i class=\"material-icons ml-2\">create</i></viewlink>\r\n                </boardpermission>\r\n              </if>\r\n              <ul class=\"navbar-nav ml-2 print-hide d-none d-sm-flex\">\r\n                <li class=\"nav-item dropdown flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\" x-placement=\"bottom-end\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <div class=\"scrollable-area\">\r\n   \r\n            <section class=\"container-fluid container-max-width pt-2 pb-2 mt-2 form-border rounded dst-detail-view dst-display-section\" id=\"ijpok\">\r\n              <nav class=\"row print-hide my-2 mobile-hide\">\r\n                <div class=\"col\">\r\n                  <returnlink class=\"btn btn-sm btn-link text-primary\">\r\n                    <i class=\"material-icons\">arrow_back_ios</i>\r\n                    Return\r\n                  </returnlink>\r\n                </div>\r\n                <div class=\"col text-right\">\r\n                  <if test=\"@locked != 'true' and @locked != 'True'\">\r\n                    <boardpermission name=\"Update\">\r\n                      <viewlink name=\"Input - Subcontractor\" type=\"link\" class=\"btn btn-sm btn-link text-primary\">\r\n                        <i class=\"material-icons\">create</i>\r\n                        Edit Record\r\n                      </viewlink>\r\n                    </boardpermission>\r\n                  </if>\r\n                </div>\r\n              </nav>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilmeef\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor Name:</span>\r\n                  <span>\r\n                    <eocfield name=\"subcontractor_name\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"il5wee\">\r\n                  <span class=\"faded-grey mr-2\">Date Submitted:</span>\r\n                  <span>\r\n                    <eocfield name=\"date_submitted\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ig2u7q\">\r\n                  <span class=\"faded-grey mr-2\">Receiving Utility:</span>\r\n                  <span>\r\n                    <eocfield name=\"receiving_utility\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"iv7gkl\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor Lead:</span>\r\n                  <span>\r\n                    <eocfield name=\"subcontractor_lead\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ie34jb\">\r\n                  <span class=\"faded-grey mr-2\">Subcontractor Lead Phone:</span>\r\n                  <span>\r\n                    <eocfield name=\"subcontractor_lead_phone\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"row dst-display-row\">\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilxe08\">\r\n                  <span class=\"faded-grey mr-2\">Prepared By:</span>\r\n                  <span>\r\n                    <eocfield name=\"prepared_by\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\r\n                  <span class=\"faded-grey mr-2\">Expected Arrival Date/Time:</span>\r\n                  <span>\r\n                    <eocfield name=\"expected_arrival_date_time\" />\r\n                  </span>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\r\n                  <span class=\"faded-grey mr-2\">Approval Status:</span>\r\n                  <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True' \">\r\n                    <span>Approved</span>\r\n                  </if>\r\n                </div>\r\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ilvs9v\">\r\n                  <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                    <div class=\"alert alert-warning\" role=\"alert\">This record is locked</div>\r\n                  </if>\r\n                  <span class=\"d-none\">\r\n                    <eocfield name=\"locked\" />\r\n                    <eocfield name=\"record_approval_status\" />\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <hr class=\"horizontal-line-break mt-3 mb-3\" />\r\n              <div class=\"row dst-display-row\">\r\n                <section class=\"col-md-12\">\r\n                  <foreignkey table=\"Subcontractors\" type=\"fk\" class=\"d-none\"/>\r\n                  <if test=\"false()\">\r\n                    <relatedexpression name=\"crewRecords\" class=\"d-none\" table=\"Crews\">\r\n                      SUM(\r\n                        CASE\r\n                          WHEN (crew_id IS NOT NULL) THEN 1\r\n                          ELSE 0\r\n                        END\r\n                      )\r\n                    </relatedexpression>\r\n                  </if>\r\n                  <if test=\"@crewRecords > 0\">\r\n                    <div class=\"form-header\" id=\"i7xug5\">\r\n                      <h4>\r\n                        <b>Crews</b>\r\n                      </h4>\r\n                    </div>\r\n                  </if>\r\n                  <relatedlist table=\"Crews\" filter=\"_webeoc_delete_flag = 'No'\">\r\n                    <div class=\"mb-3 dst-display-group col-6\">\r\n                      <span class=\"faded-grey mr-2\">Crew ID:</span>\r\n                      <span>\r\n                        <eocfield name=\"crew_id\" table=\"Crews\" type=\"rl\" />\r\n                      </span>\r\n                    </div>\r\n                    <div class=\"mb-3 dst-display-group col-6\">\r\n                      <span class=\"faded-grey mr-2\">Crew Type:</span>\r\n                      <span>\r\n                        <eocfield name=\"team_type\" table=\"Crews\" type=\"rl\"/>\r\n                      </span>\r\n                    </div>\r\n                    <hr/>\r\n                  </relatedlist>\r\n                </section>\r\n              </div>\r\n              <div class=\"row dst-display-row table-responsive-md\">\r\n                <section class=\"pdf-hide col-md-12\">\r\n                  <h4>\r\n                    <b>\r\n                      History Log\r\n                    </b>\r\n                  </h4>\r\n                  <table id=\"subcontractors-history\" class=\"table\"/>\r\n                </section>\r\n              </div>\r\n            </section>\r\n            <div style=\"display: none;\">\r\n              <!-- Rates Information -->\r\n                <eocfield name=\"sc_ap1_std_rate\" label=\"Apprentice 1 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap1_ot_rate\" label=\"Apprentice 1 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap1_pt_rate\" label=\"Apprentice 1 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap1_std_rate\" label=\"Apprentice 1 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap1_ot_rate\" label=\"Apprentice 1 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap1_pt_rate\" label=\"Apprentice 1 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap2_std_rate\" label=\"Apprentice 2 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap2_ot_rate\" label=\"Apprentice 2 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap2_pt_rate\" label=\"Apprentice 2 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap2_std_rate\" label=\"Apprentice 2 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap2_ot_rate\" label=\"Apprentice 2 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap2_pt_rate\" label=\"Apprentice 2 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap3_std_rate\" label=\"Apprentice 3 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap3_ot_rate\" label=\"Apprentice 3 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap3_pt_rate\" label=\"Apprentice 3 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap3_std_rate\" label=\"Apprentice 3 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap3_ot_rate\" label=\"Apprentice 3 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap3_pt_rate\" label=\"Apprentice 3 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap4_std_rate\" label=\"Apprentice 4 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap4_ot_rate\" label=\"Apprentice 4 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap4_pt_rate\" label=\"Apprentice 4 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap4_std_rate\" label=\"Apprentice 4 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap4_ot_rate\" label=\"Apprentice 4 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap4_pt_rate\" label=\"Apprentice 4 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap5_std_rate\" label=\"Apprentice 5 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap5_ot_rate\" label=\"Apprentice 5 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap5_pt_rate\" label=\"Apprentice 5 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap5_std_rate\" label=\"Apprentice 5 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap5_ot_rate\" label=\"Apprentice 5 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap5_pt_rate\" label=\"Apprentice 5 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap6_std_rate\" label=\"Apprentice 6 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap6_ot_rate\" label=\"Apprentice 6 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap6_pt_rate\" label=\"Apprentice 6 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap6_std_rate\" label=\"Apprentice 6 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap6_ot_rate\" label=\"Apprentice 6 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap6_pt_rate\" label=\"Apprentice 6 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ap7_std_rate\" label=\"Apprentice 7 Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ap7_ot_rate\" label=\"Apprentice 7 Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ap7_pt_rate\" label=\"Apprentice 7 Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ap7_std_rate\" label=\"Apprentice 7 Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ap7_ot_rate\" label=\"Apprentice 7 Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ap7_pt_rate\" label=\"Apprentice 7 Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_cl_std_rate\" label=\"Crew Lead Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_cl_ot_rate\" label=\"Crew Lead Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_cl_pt_rate\" label=\"Crew Lead Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_cl_std_rate\" label=\"Crew Lead Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_cl_ot_rate\" label=\"Crew Lead Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_cl_pt_rate\" label=\"Crew Lead Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_cs_std_rate\" label=\"Crew Supervisor Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_cs_ot_rate\" label=\"Crew Supervisor Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_cs_pt_rate\" label=\"Crew Supervisor Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_cs_std_rate\" label=\"Crew Supervisor Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_cs_ot_rate\" label=\"Crew Supervisor Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_cs_pt_rate\" label=\"Crew Supervisor Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_as_std_rate\" label=\"Assessor Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_as_ot_rate\" label=\"Assessor Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_as_pt_rate\" label=\"Assessor Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_as_std_rate\" label=\"Assessor Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_as_ot_rate\" label=\"Assessor Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_as_pt_rate\" label=\"Assessor Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_dr_std_rate\" label=\"Driver Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_dr_ot_rate\" label=\"Driver Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_dr_pt_rate\" label=\"Driver Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_dr_std_rate\" label=\"Driver Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_dr_ot_rate\" label=\"Driver Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_dr_pt_rate\" label=\"Driver Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_fm_std_rate\" label=\"Foreman Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_fm_ot_rate\" label=\"Foreman Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_fm_pt_rate\" label=\"Foreman Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_fm_std_rate\" label=\"Foreman Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_fm_ot_rate\" label=\"Foreman Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_fm_pt_rate\" label=\"Foreman Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_sv_std_rate\" label=\"Supervisor Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_sv_ot_rate\" label=\"Supervisor Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_sv_pt_rate\" label=\"Supervisor Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_sv_std_rate\" label=\"Supervisor Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_sv_ot_rate\" label=\"Supervisor Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_sv_pt_rate\" label=\"Supervisor Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_gf_std_rate\" label=\"General Foreman Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_gf_ot_rate\" label=\"General Foreman Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_gf_pt_rate\" label=\"General Foreman Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_gf_std_rate\" label=\"General Foreman Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_gf_ot_rate\" label=\"General Foreman Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_gf_pt_rate\" label=\"General Foreman Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_gm_std_rate\" label=\"Groundman Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_gm_ot_rate\" label=\"Groundman Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_gm_pt_rate\" label=\"Groundman Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_gm_std_rate\" label=\"Groundman Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_gm_ot_rate\" label=\"Groundman Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_gm_pt_rate\" label=\"Groundman Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_uglm_std_rate\" label=\"UG Lineman Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_uglm_ot_rate\" label=\"UG Lineman Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_uglm_pt_rate\" label=\"UG Lineman Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_uglm_std_rate\" label=\"UG Lineman Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_uglm_ot_rate\" label=\"UG Lineman Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_uglm_pt_rate\" label=\"UG Lineman Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_lm_std_rate\" label=\"Lineman Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_lm_ot_rate\" label=\"Lineman Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_lm_pt_rate\" label=\"Lineman Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_lm_std_rate\" label=\"Lineman Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_lm_ot_rate\" label=\"Lineman Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_lm_pt_rate\" label=\"Lineman Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_ls_std_rate\" label=\"Logistics Support Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_ls_ot_rate\" label=\"Logistics Support Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_ls_pt_rate\" label=\"Logistics Support Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_ls_std_rate\" label=\"Logistics Support Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_ls_ot_rate\" label=\"Logistics Support Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_ls_pt_rate\" label=\"Logistics Support Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_mech_std_rate\" label=\"Mechanic Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_mech_ot_rate\" label=\"Mechanic Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_mech_pt_rate\" label=\"Mechanic Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_mech_std_rate\" label=\"Mechanic Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_mech_ot_rate\" label=\"Mechanic Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_mech_pt_rate\" label=\"Mechanic Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_op_std_rate\" label=\"Operator Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_op_ot_rate\" label=\"Operator Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_op_pt_rate\" label=\"Operator Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_op_std_rate\" label=\"Operator Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_op_ot_rate\" label=\"Operator Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_op_pt_rate\" label=\"Operator Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_safety_std_rate\" label=\"Safety Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_safety_ot_rate\" label=\"Safety Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_safety_pt_rate\" label=\"Safety Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_safety_std_rate\" label=\"Safety Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_safety_ot_rate\" label=\"Safety Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_safety_pt_rate\" label=\"Safety Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_superintendent_std_rate\" label=\"Superintendent Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_superintendent_ot_rate\" label=\"Superintendent Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_superintendent_pt_rate\" label=\"Superintendent Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_superintendent_std_rate\" label=\"Superintendent Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_superintendent_ot_rate\" label=\"Superintendent Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_superintendent_pt_rate\" label=\"Superintendent Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_support_std_rate\" label=\"Support Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_support_ot_rate\" label=\"Support Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_support_pt_rate\" label=\"Support Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_support_std_rate\" label=\"Support Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_support_ot_rate\" label=\"Support Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_support_pt_rate\" label=\"Support Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_team_lead_std_rate\" label=\"Team Lead Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_team_lead_ot_rate\" label=\"Team Lead Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_team_lead_pt_rate\" label=\"Team Lead Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_team_lead_std_rate\" label=\"Team Lead Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_team_lead_ot_rate\" label=\"Team Lead Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_team_lead_pt_rate\" label=\"Team Lead Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_vegetation_trimmer_std_rate\" label=\"Vegetation Trimmer Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_vegetation_trimmer_ot_rate\" label=\"Vegetation Trimmer Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_vegetation_trimmer_pt_rate\" label=\"Vegetation Trimmer Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_vegetation_trimmer_std_rate\" label=\"Vegetation Trimmer Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_vegetation_trimmer_ot_rate\" label=\"Vegetation Trimmer Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_vegetation_trimmer_pt_rate\" label=\"Vegetation Trimmer Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_wire_guards_std_rate\" label=\"Wire Guards Subcontractor Standard Hourly Rate\" />\r\n                <eocfield name=\"sc_wire_guards_ot_rate\" label=\"Wire Guards Subcontractor Overtime Hourly Rate\" />\r\n                <eocfield name=\"sc_wire_guards_pt_rate\" label=\"Wire Guards Subcontractor Premium Hourly Rate\" />\r\n                <eocfield name=\"utl_wire_guards_std_rate\" label=\"Wire Guards Utility Standard Hourly Rate\" />\r\n                <eocfield name=\"utl_wire_guards_ot_rate\" label=\"Wire Guards Utility Overtime Hourly Rate\" />\r\n                <eocfield name=\"utl_wire_guards_pt_rate\" label=\"Wire Guards Utility Premium Hourly Rate\" />\r\n                <eocfield name=\"sc_backhoe_rate\" label=\"Backhoe Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_backhoe_rate\" label=\"Backhoe Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_bucket_truck_distribution_rate\" label=\"Bucket Truck - Distribution Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_bucket_truck_distribution_rate\" label=\"Bucket Truck - Distribution Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_bucket_truck_service_rate\" label=\"Bucket Truck - Service Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_bucket_truck_service_rate\" label=\"Bucket Truck - Service Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_bucket_truck_transmission_rate\" label=\"Bucket Truck - Transmission Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_bucket_truck_transmission_rate\" label=\"Bucket Truck - Transmission Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_chipper_rate\" label=\"Chipper Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_chipper_rate\" label=\"Chipper Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_digger_derrick_rate\" label=\"Digger Derrick Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_digger_derrick_rate\" label=\"Digger Derrick Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_digger_derrick_rear_lot_rate\" label=\"Digger Derrick-rear lot Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_digger_derrick_rear_lot_rate\" label=\"Digger Derrick-rear lot Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_equipment_trailer_rate\" label=\"Equipment Trailer Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_equipment_trailer_rate\" label=\"Equipment Trailer Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_knuckle_boom_truck_rate\" label=\"Knuckle Boom Truck Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_knuckle_boom_truck_rate\" label=\"Knuckle Boom Truck Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_pickup_rate\" label=\"Pickup Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_pickup_rate\" label=\"Pickup Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_pole_hauler_rate\" label=\"Pole Hauler Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_pole_hauler_rate\" label=\"Pole Hauler Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_pole_trailer_rate\" label=\"Pole Trailer Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_pole_trailer_rate\" label=\"Pole Trailer Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_service_truck_rate\" label=\"Service Truck Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_service_truck_rate\" label=\"Service Truck Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_backyard_machine_rate\" label=\"Backyard Machine Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_backyard_machine_rate\" label=\"Backyard Machine Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_hydrovac_rate\" label=\"Hydrovac Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_hydrovac_rate\" label=\"Hydrovac Utility Hourly Rate\" />\r\n                <eocfield name=\"sc_specialty_equipment_rate\" label=\"Specialty Equipment Subcontractor Hourly Rate\" />\r\n                <eocfield name=\"utl_specialty_equipment_rate\" label=\"Specialty Equipment Utility Hourly Rate\" />\r\n              <!-- / Rates Information -->\r\n            </div>\r\n        </div>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify d-panel-none\">\r\n          <returnlink class=\"text-white cursor-pointer\">\r\n            <div class=\"flex flex-col\">\r\n              <i class=\"material-icons\">keyboard_arrow_left</i>\r\n              RETURN\r\n            </div>\r\n          </returnlink>\r\n          <boardpermission name=\"Update\">\r\n            <viewlink name=\"Input - Subcontractor\" class=\"text-white cursor-pointer\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons\">edit</i>\r\n                EDIT\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup d-md-flex cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            <i class=\"material-icons\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\"><a button=\"print-button\" class=\"dropdown-item\">Print Page</a><a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a></div></div>\r\n        </footer>\r\n      </main>\r\n    </eocrepeatallrecords>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\" />\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\" />\r\n    <script src=\"https://assets.juvare.com/webeoc/cxd/webeoc-history-log/1.1.0/webeoc-history-log.min.js\"></script>\r\n    <script type=\"text/javascript\">\r\n        // Refresh elements of the page.\r\n        function refreshElements() {\r\n          window.location.reload();\r\n        }\r\n        $(document).ready(function() {\r\n      <if test=\"/data/@dataid != '0'\">\r\n        new WebEOCCXD.WebEOCHistoryLog({\r\n          parentElement: '#subcontractors-history',\r\n          dataid: '<value-of select=\"//@dataid\"/>'\r\n        })\r\n      </if>\r\n    });\r\n      </script>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": false,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "NotDeleted",
                        "applied": false,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "Details - Bulk Subcontractor",
                "table": "Subcontractors",
                "html": "<html>\n\n<head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n        name=\"viewport\" />\n    <link rel=\"stylesheet\" media=\"all\"\n        href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n    <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n        media=\"screen\" />\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n        path=\"/css/material-kit.min.css\" />\n</head>\n\n<style>\n    #attachments>div {\n        page-break-after: always;\n        page-break-inside: avoid;\n    }\n</style>\n\n<body class=\"bg-white\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n    <eocrepeatallrecords>\n        <section class=\"container-fluid mt-4 mb-5 p-4 rounded shadow-sm\" id=\"impo8\">\n            <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilmeef\">\n                    <span class=\"faded-grey mr-2\">Subcontractor Name:</span>\n                    <span>\n                        <eocfield name=\"subcontractor_name\" />\n                    </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"il5wee\">\n                    <span class=\"faded-grey mr-2\">Date Submitted:</span>\n                    <span>\n                        <eocfield name=\"date_submitted\" />\n                    </span>\n                </div>\n            </div>\n            <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-12\" id=\"ig2u7q\">\n                    <span class=\"faded-grey mr-2\">Receiving Utility:</span>\n                    <span>\n                        <eocfield name=\"receiving_utility\" />\n                    </span>\n                </div>\n            </div>\n            <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"iv7gkl\">\n                    <span class=\"faded-grey mr-2\">Subcontractor Lead:</span>\n                    <span>\n                        <eocfield name=\"subcontractor_lead\" />\n                    </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ie34jb\">\n                    <span class=\"faded-grey mr-2\">Subcontractor Lead Phone:</span>\n                    <span>\n                        <eocfield name=\"subcontractor_lead_phone\" />\n                    </span>\n                </div>\n            </div>\n            <div class=\"row dst-display-row\">\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilxe08\">\n                    <span class=\"faded-grey mr-2\">Prepared By:</span>\n                    <span>\n                        <eocfield name=\"prepared_by\" />\n                    </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\n                    <span class=\"faded-grey mr-2\">Expected Arrival Date/Time:</span>\n                    <span>\n                        <eocfield name=\"expected_arrival_date_time\" />\n                    </span>\n                </div>\n                <div class=\"mb-3 dst-display-group col-md-6\" id=\"ilvs9v\">\n                    <span class=\"faded-grey mr-2\">Approval Status:</span>\n                    <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True' \">\n                        <span>Approved</span>\n                    </if>\n                </div>\n            </div>\n        </section>\n        <section class=\"container-fluid mt-4 mb-5 p-4 rounded shadow-sm\" id=\"impo7\">\n            <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Crews\">\n                <section style=\"page-break-after: always;\">\n                    <h4>\n                        <b>\n                            Crew Information\n                        </b>\n                    </h4>\n                    <div class=\"row dst-display-row\">\n                        <div class=\"col-md-6 mb-3 dst-display-group\">\n                            <span class=\"faded-grey mr-2\">Crew ID:</span>\n                            <span>\n                                <eocfield name=\"crew_id\" />\n                            </span>\n                        </div>\n                        <div class=\"col-md-6 mb-3 dst-display-group\">\n                            <span class=\"faded-grey mr-2\">Team Type:</span>\n                            <span>\n                                <eocfield name=\"team_type\" table=\"Crews\" type=\"rl\" />\n                            </span>\n                        </div>\n                        <div class=\"col-md-6 mb-3 dst-display-group\">\n                            <span class=\"faded-grey mr-2\">Crew Lead / Foreman:</span>\n                            <span>\n                                <eocfield name=\"foreman\" table=\"Crews\" type=\"rl\" />\n                            </span>\n                        </div>\n                        <div class=\"col-md-6 mb-3 dst-display-group\">\n                            <span class=\"faded-grey mr-2\">Work Location:</span>\n                            <span>\n                                <eocfield name=\"work_location_address\" table=\"Crews\" type=\"rl\" />\n                            </span>\n                        </div>\n                        <div class=\"col-md-6 mb-3 dst-display-group\">\n                            <span class=\"faded-grey mr-2\">Approval Status:</span>\n                            <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\n                                <span>\n                                    Approved\n                                </span>\n                            </if>\n                        </div>\n                    </div>\n                    <h4>\n                        <b>\n                            Team Members\n                        </b>\n                    </h4>\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                        <thead>\n                            <tr>\n                                <th>\n                                    Personnel ID\n                                </th>\n                                <th>\n                                    Last Name\n                                </th>\n                                <th>\n                                    First Name\n                                </th>\n                                <th>\n                                    Departure City\n                                </th>\n                                <th>\n                                    Departure State\n                                </th>\n                                <th>\n                                    Resource Type\n                                </th>\n\n                                <th>\n                                    Crew Lead / Foreman\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"project-data\">\n                            <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Team Members\"\n                                rlid=\"4\">\n                                <tr>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Team Members\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"last_name\" table=\"Team Members\" type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"first_name\" table=\"Team Members\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"departure_city\" table=\"Team Members\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"departure_state\" table=\"Team Members\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"resource_type\" table=\"Team Members\"\n                                            type=\"rl\" />\n                                    </td>\n\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Team Members\" type=\"rl\" />\n                                    </td>\n\n                                </tr>\n                            </relatedlist>\n                        </tbody>\n                    </table>\n                    <h4>\n                        <b>\n                            Equipment\n                        </b>\n                    </h4>\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"equipment-table\" width=\"100%\">\n                        <thead>\n                            <tr>\n                                <th>\n                                    Equipment\n                                </th>\n                                <th>\n                                    Type\n                                </th>\n                                <th>\n                                    Description\n                                </th>\n                                <th>\n                                    Fuel Type\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"project-data\">\n                            <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Equipment\"\n                                rlid=\"5\">\n                                <tr>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"equipment\" table=\"Equipment\" type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"equipment_type\" table=\"Equipment\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"equipment_description\" table=\"Equipment\"\n                                            type=\"rl\" />\n                                    </td>\n                                    <td>\n                                        <eocfield disableclick=\"true\" name=\"equipment_fuel_type\" table=\"Equipment\"\n                                            type=\"rl\" />\n                                    </td>\n                                </tr>\n                            </relatedlist>\n                        </tbody>\n                    </table>\n                </section>\n                <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes'\" table=\"Timesheets\" rlid=\"2\">\n                    <section>\n                        <h4 class=\"mb-4 font-weight-bold\">\n                            Crew ID:\n                            <eocfield name=\"crew_id\" table=\"Crews\" type=\"rl\" />\n                        </h4>\n                        <main aria-label=\"Main Section\" class=\"mb-5\" style=\"page-break-after: always;\">\n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6 mb-2\">\n                                    <span class=\"text-muted font-weight-bold mr-1\">Approval Status:</span>\n                                    <span>\n                                        <eocfield name=\"approval_status\" table=\"Timesheets\" type=\"rl\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-2\">\n                                    <span class=\"text-muted font-weight-bold mr-1\">Date:</span>\n                                    <span>\n                                        <eocfield name=\"date\" table=\"Timesheets\" type=\"rl\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row mb-3\">\n                                <div class=\"col-md-6 mb-2\">\n                                    <span class=\"text-muted font-weight-bold mr-1\">Job Location:</span>\n                                    <span>\n                                        <eocfield name=\"job_location\" table=\"Timesheets\" type=\"rl\" />\n                                    </span>\n                                </div>\n                                <div class=\"col-md-6 mb-2\">\n                                    <span class=\"text-muted font-weight-bold mr-1\">Utility Name:</span>\n                                    <span>\n                                        <eocfield name=\"utility_name\" table=\"Timesheets\" type=\"rl\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"row mb-3\">\n                                <div class=\"col-12\">\n                                    <span class=\"text-muted font-weight-bold mr-1\">Notes:</span>\n                                    <span>\n                                        <eocfield name=\"notes\" table=\"Timesheets\" type=\"rl\" />\n                                    </span>\n                                </div>\n                            </div>\n                            <div class=\"mb-4\">\n                                <div class=\"form-header mb-2\">\n                                    <h5 class=\"font-weight-bold text-secondary\">\n                                        Personnel Time Entries\n                                    </h5>\n                                </div>\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered table-striped table-sm\">\n                                        <thead class=\"thead-light\">\n                                            <tr>\n                                                <th class=\"mobile-hide-lg\">ID</th>\n                                                <th>Name</th>\n                                                <th>Classification</th>\n                                                <th class=\"mobile-hide-lg\">Crew Lead / Foreman</th>\n                                                <th>Status</th>\n                                                <th class=\"mobile-hide-lg\">Lodging Provided</th>\n                                                <th class=\"mobile-hide-lg\">Meals Provided</th>\n                                                <th class=\"mobile-hide-lg\">Per Diem Meals</th>\n                                                <th>In/Out</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <relatedlist aria-label=\"Data\"\n                                                filter=\"_webeoc_delete_flag != 'Yes' and type = 'personnel'\"\n                                                table=\"Timesheet Entries\" rlid=\"1\">\n                                                <tr>\n                                                    <td class=\"mobile-hide-lg\">\n                                                        <eocfield disableclick=\"true\" name=\"personnel_id\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"last_name\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />,\n                                                        <eocfield disableclick=\"true\" name=\"first_name\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"classification\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td class=\"mobile-hide-lg\">\n                                                        <eocfield disableclick=\"true\" name=\"crew_lead\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"status\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td class=\"mobile-hide-lg\">\n                                                        <eocfield disableclick=\"true\" name=\"lodging\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td class=\"mobile-hide-lg\">\n                                                        <eocfield disableclick=\"true\" name=\"number_of_meals_provided\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td class=\"mobile-hide-lg\">\n                                                        <eocfield disableclick=\"true\" name=\"number_of_per_diem_meals\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"start_time\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" /> -\n                                                        <eocfield disableclick=\"true\" name=\"end_time\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                </tr>\n                                            </relatedlist>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            <div class=\"mb-4\">\n                                <div class=\"form-header mb-2\">\n                                    <h5 class=\"font-weight-bold text-secondary\">\n                                        Equipment Time Entries\n                                    </h5>\n                                </div>\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered table-striped table-sm\">\n                                        <thead class=\"thead-light\">\n                                            <tr>\n                                                <th>Equipment Number</th>\n                                                <th>Description</th>\n                                                <th>In/Out</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <relatedlist aria-label=\"Data\"\n                                                filter=\"_webeoc_delete_flag != 'Yes' and type = 'equipment'\"\n                                                table=\"Timesheet Entries\" rlid=\"3\">\n                                                <if test=\"false()\">\n                                                    <ecofield name=\"equipment_description\" table=\"Timesheet Entries\"\n                                                        type=\"rl\" />\n                                                </if>\n                                                <tr>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"equipment_number\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                    <td>\n                                                        <choose>\n                                                            <when test=\"string-length(@equipment_description) > 30\">\n                                                            </when>\n                                                            <otherwise>\n                                                                <value-of select=\"@equipment_description\" />\n                                                            </otherwise>\n                                                        </choose>\n                                                    </td>\n                                                    <td>\n                                                        <eocfield disableclick=\"true\" name=\"start_time\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" /> -\n                                                        <eocfield disableclick=\"true\" name=\"end_time\"\n                                                            table=\"Timesheet Entries\" type=\"rl\" />\n                                                    </td>\n                                                </tr>\n                                            </relatedlist>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <if\n                                    test=\"(not(@staff_signature) or @staff_signature = '') or (not(@staff_signature_date) or @staff_signature_date = '')\">\n                                    <attribute name=\"class\">row dst-display-row pb-5</attribute>\n                                </if>\n                                <span class=\"faded-grey mr-2 ml-3\">Signature:</span>\n                            </div>\n                            <div class=\"row dst-display-row\">\n                                <if test=\"false()\">\n                                    <eocfield name=\"staff_signature\" id=\"staff_signature\" table=\"Timesheets\"\n                                        type=\"rl\" />\n                                </if>\n                                <img class=\"signature-display\" src=\"{@staff_signature}\" />\n                            </div>\n                            <div class=\"row dst-display-row align-items-end mb-3\">\n                                <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                                    <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                                    <span class=\"faded-grey small\">Signature</span>\n                                </div>\n                                <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                                    <eocfield name=\"staff_signature_date\" id=\"staff_signature_date\" table=\"Timesheets\"\n                                        type=\"rl\" />\n                                    <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                                    <span class=\"faded-grey small\">Date</span>\n                                </div>\n                            </div>\n                        </main>\n                    </section>\n                </relatedlist>\n            </relatedlist>\n        </section>\n    </eocrepeatallrecords>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\"\n        path=\"/js/core/jquery.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\"\n        path=\"/js/core/popper.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n        path=\"/js/core/bootstrap-material-design.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\"\n        path=\"/js/plugins/moment.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n        path=\"/js/plugins/bootstrap-datetimepicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n        path=\"/js/plugins/nouislider.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n        path=\"/js/plugins/bootstrap-tagsinput.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n        path=\"/js/plugins/bootstrap-selectpicker.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n        path=\"/js/plugins/jasny-bootstrap.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n        path=\"/js/plugins/jquery.flexisel.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n        path=\"/js/plugins/jquery.sharrre.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\"\n        path=\"/js/material-kit.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\"></script>\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n        path=\"/js/ux-webeoc-board-standards.js\"></script>\n</body>\n\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "Details - Timesheet PDF",
                "table": "Timesheets",
                "html": "<html>\n\n<head>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\"\n    name=\"viewport\" />\n  <link rel=\"stylesheet\" media=\"all\"\n    href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\" />\n  <link href=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css\" rel=\"stylesheet\"\n    media=\"screen\" />\n  <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\"\n    path=\"/css/material-kit.min.css\" />\n</head>\n\n<style>\n  #attachments > div {\n    page-break-after: always;\n    page-break-inside: avoid;\n  }\n</style>\n<body class=\"bg-white\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\n  <eocrepeatallrecords>\n    <main aria-label=\"Main Section\">\n          <section class=\"container-fluid mt-3\">\n            <h4>Timesheet Details</h4>\n          </section>\n          <section class=\"container-fluid mt-3\" id=\"impo7\">\n            <div class=\"row dst-display-row\">\n              <div class=\"col-md-6 mb-3 dst-display-group\" id=\"iw1p8\">\n                <span class=\"faded-grey mr-2\">Approval Status:</span>\n                <span>\n                  <eocfield name=\"approval_status\" />\n                </span>\n              </div>\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Date:</span>\n                <span>\n                  <eocfield name=\"date\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Job Location:</span>\n                <span>\n                  <eocfield name=\"job_location\" />\n                </span>\n              </div>\n              <div class=\"col-md-6 mb-3 dst-display-group\">\n                <span class=\"faded-grey mr-2\">Utility Name:</span>\n                <span>\n                  <eocfield name=\"utility_name\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <div class=\"col-12 mb-3\">\n                <span class=\"faded-grey mr-2\">Notes:</span>\n                <eocfield name=\"notes\" />\n              </div>\n            </div>\n            <div class=\"row dst-display-row\">\n              <section class=\"col-md-12\">\n                <div class=\"form-header\" id=\"iu5oab\">\n                  <h4>\n                    <b>\n                      Personnel Time Entries\n                    </b>\n                  </h4>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <section aria-label=\"Table\" class=\"col mt-2\">\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                      <thead>\n                        <tr>\n                          <th>\n                            ID\n                          </th>\n                          <th>\n                            Name\n                          </th>\n                          <th>\n                            Classification\n                          </th>\n                          <th>\n                            Crew Lead / Foreman\n                          </th>\n                          <th>\n                            Status\n                          </th>\n                          <th>\n                            Lodging Provided\n                          </th>\n                          <th>\n                            Meals Provided\n                          </th>\n                          <th>\n                            Per Diem Meals\n                          </th>\n                          <th>\n                            In/Out\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody id=\"project-data\">\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'personnel'\"\n                          table=\"Timesheet Entries\" rlid=\"1\">\n                          <tr>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"personnel_id\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"last_name\" table=\"Timesheet Entries\" type=\"rl\" />,\n                              <eocfield disableclick=\"true\" name=\"first_name\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"classification\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"crew_lead\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"status\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"lodging\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"number_of_meals_provided\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"number_of_per_diem_meals\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                               -\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                            \n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </section>\n                </div>\n              </section>\n            </div>\n            <div class=\"row dst-display-row\">\n              <section class=\"col-md-12\">\n                <div class=\"form-header\" id=\"iu5oab\">\n                  <h4>\n                    <b>\n                      Equipment Time Entries\n                    </b>\n                  </h4>\n                </div>\n                <div class=\"row dst-display-row\">\n                  <section aria-label=\"Table\" class=\"col mt-2\">\n                    <table class=\"table related-table table-striped table-sm mt-1\" id=\"project-table\" width=\"100%\">\n                      <thead>\n                        <tr>\n                          <th>\n                            Equipment Number\n                          </th>\n                          <th>\n                            Description\n                          </th>\n                          <th>\n                            In/Out\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody id=\"project-data\">\n                        <relatedlist aria-label=\"Data\" filter=\"_webeoc_delete_flag != 'Yes' and type = 'equipment'\"\n                          table=\"Timesheet Entries\" rlid=\"3\">\n                          <tr>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"equipment_number\" table=\"Timesheet Entries\"\n                                type=\"rl\" />\n                            </td>\n                            <td>\n                              <if test=\"false()\">\n                                <eocfield disableclick=\"true\" name=\"equipment_description\" table=\"Timesheet Entries\"\n                                  type=\"rl\" />\n                              </if>\n                              <choose>\n                                <when test=\"string-length(@equipment_description) > 30\">\n                                  <value-of select=\"concat(substring(@equipment_description, 1, 30), '...')\" />\n                                </when>\n                                <otherwise>\n                                  <value-of select=\"@equipment_description\" />\n                                </otherwise>\n                              </choose>\n                            </td>\n                            <td>\n                              <eocfield disableclick=\"true\" name=\"start_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                               -\n                              <eocfield disableclick=\"true\" name=\"end_time\" table=\"Timesheet Entries\" type=\"rl\" />\n                            </td>\n                          </tr>\n                        </relatedlist>\n                      </tbody>\n                    </table>\n                  </section>\n                </div>\n              </section>\n            </div>\n            <div class=\"row dst-display-row\">\n              <if test=\"(not(@staff_signature) or @staff_signature = '') or (not(@staff_signature_date) or @staff_signature_date = '')\">\n                <attribute name=\"class\">row dst-display-row pb-5</attribute>\n              </if>\n              <span class=\"faded-grey mr-2 ml-3\">Signature:</span>\n            </div>\n            <div class=\"row dst-display-row\">\n              <eocfield class=\"d-none\" style=\"display: none;\" name=\"staff_signature\" id=\"staff_signature\" />\n              <img class=\"signature-display\">\n                <attribute name=\"src\">\n                  <expression name=\"staff_signature_src\">staff_signature</expression>\n                </attribute>\n              </img>\n            </div>\n            <div class=\"row dst-display-row align-items-end mb-3\">\n              <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                <span class=\"faded-grey small\">Signature</span>\n              </div>\n              <div class=\"col-md-6 d-flex flex-column justify-content-end\">\n                <eocfield name=\"staff_signature_date\" id=\"staff_signature_date\" />\n                <hr style=\"border-top: 1px solid #000; margin: 0;\" />\n                <span class=\"faded-grey small\">Date</span>\n              </div>\n            </div>\n\n              <div class=\"row dst-display-row\" id=\"attachments\" style=\"page-break-before: always;\">\n                <if test=\"@attachment_1\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 1:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_1\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_2\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 2:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_2\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_3\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 3:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_3\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_4\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 4:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_4\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_5\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 5:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_5\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_6\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 6:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_6\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_7\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 7:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_7\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_8\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 8:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_8\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_9\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 9:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_9\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n                <if test=\"@attachment_10\">\n                  <div class=\"col-md-12 mb-3\">\n                    <span class=\"faded-grey mr-2\">Attachment 10:</span>\n                    <div class=\"img-fluid\">\n                      <attachment name=\"attachment_10\" filetype=\"image\" table=\"Timesheets\" />\n                    </div>\n                  </div>\n                </if>\n              </div>\n          </section>\n    </main>\n  </eocrepeatallrecords>\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\"\n    path=\"/js/core/bootstrap-material-design.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\"\n    path=\"/js/plugins/bootstrap-datetimepicker.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\"\n    path=\"/js/plugins/nouislider.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\"\n    path=\"/js/plugins/bootstrap-tagsinput.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\"\n    path=\"/js/plugins/bootstrap-selectpicker.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\"\n    path=\"/js/plugins/jasny-bootstrap.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\"\n    path=\"/js/plugins/jquery.flexisel.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\"\n    path=\"/js/plugins/jquery.sharrre.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js\" />\n  <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\"\n    path=\"/js/ux-webeoc-board-standards.js\" />\n</body>\n\n</html>\n",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [],
                "TabGroup": null
            },
            {
                "name": "List - Crews",
                "table": "Crews",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\"/>\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton/>\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"idou4\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link active\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\r\n            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"i8qel\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\"/>\r\n              </div>\r\n              <div>\r\n                <h4>List - Crews</h4>\r\n                <h6>\r\n                  <incidentname/>\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <viewlink name=\"Input - Crew\" class=\"btn btn-sm btn-primary\">\r\n                      Create New\r\n                      <i class=\"material-icons ml-2\">add</i>\r\n                    </viewlink>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\"/>\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"false\" map-name=\"Map\"/>\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"subcontractor_name\">Subcontractor</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"crew_id\">Crew ID</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"team_type\">Team Type</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"foreman\">Crew Lead / Foreman</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white mobile-hide-lg\">\r\n                          <sortlink field=\"work_location\">Work Location</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\r\n                          <sortlink field=\"locked\">Locked</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white text-center mobile-hide-lg\">\r\n                          <sortlink field=\"record_approval_status\">Approved</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\"/>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords>\r\n                        <if test=\"false()\">\r\n                          <foreignkeyreference table=\"Subcontractors\"/>\r\n                        </if>\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <foreignkey table=\"Subcontractors\"/>\r\n                            <eocfield type=\"fk\" table=\"Subcontractors\" name=\"subcontractor_name\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"\">\r\n                            <eocfield name=\"crew_id\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td>\r\n                            <eocfield name=\"team_type\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td>\r\n                            <eocfield name=\"foreman\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"work_location_address\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"text-center mobile-hide-lg\">\r\n                            <if test=\"@locked = 'true' or @locked = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">lock</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\" style=\"text-align: center;\">\r\n                            <if test=\"@record_approval_status = 'Approved' or @record_approval_status = 'True'\">\r\n                              <i class=\"material-icons faded-grey\" style=\"font-size: 18px\">check_circle</i>\r\n                            </if>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Crew\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Crew\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"work_location\" label-field=\"Work Location\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\"/>\r\n                                <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                                  <boardpermission name=\"Update\">\r\n                                    <viewlink name=\"Input - Crew\" class=\"dropdown-item\">Edit</viewlink>\r\n                                  </boardpermission>\r\n                                  <boardpermission name=\"Delete\">\r\n                                    <div class=\"dropdown-divider\"/>\r\n                                    <viewlink name=\"Delete - Crew\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                              </div>\r\n                              <div class=\"d-none\">\r\n                                <eocfield name=\"locked\"/>\r\n                                <eocfield name=\"record_approval_status\"/>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      </eocrepeatallrecords>\r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <viewlink name=\"Input - Crew\" class=\"text-white\" refreshid=\"main-table\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons cursor-pointer\">add</i>\r\n                CREATE NEW\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n              <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\r\n              <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"dropdown-item\">Crew Members</viewlink>\r\n              <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\r\n              <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\r\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\r\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to\r\n                CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\"/>\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\"/>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "NotDeleted",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "ISNULL(_webeoc_delete_flag,'')",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            },
            {
                "name": "List - Team Members",
                "table": "Team Members",
                "html": "<html>\r\n  <head>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\r\n    <meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no\" name=\"viewport\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\"/>\r\n    <link rel=\"stylesheet\" media=\"all\" href=\"//webeocboardfiles.juvare.com/board/latest/css/material-kit.min.css\" path=\"/css/material-kit.min.css\"/>\r\n  </head>\r\n  <body class=\"bg-faded-grey-light\" data-webeocdatetimeformat=\"{data/@webeocdatetimeformat}\">\r\n    <span class=\"media-breakpoint-state\"/>\r\n    <section class=\"d-none\">\r\n      <span button=\"pdf-button\">\r\n        <pdflink enablemediaquery=\"true\" enablejs=\"true\" orientation=\"landscape\" type=\"link\" engine=\"blink\">PDF</pdflink>\r\n      </span>\r\n      <span button=\"export-button\">\r\n        <exportbutton/>\r\n      </span>\r\n    </section>\r\n    <main id=\"list-view-main-section\" aria-label=\"Main Section\" data-activate-panel=\"detail-panel-x\" class=\"page-wrap flex flex-row\">\r\n      <div class=\"flex flex-column flex-column-grow w-100\">\r\n        <section class=\"navbar mobile-hide print-hide pl-3 pb-2\" data-bst-type=\"tabGroup\" id=\"iyhmn\">\r\n          <nav class=\"nav\">\r\n            <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"nav-link\">Subcontractor Roster</viewlink>\r\n            <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"nav-link\">Crews</viewlink>\r\n            <viewlink name=\"List - Team Members\" ignoreerrors=\"true\" class=\"nav-link active\">Crew Members</viewlink>\r\n            <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"nav-link\">Equipment</viewlink>\r\n            <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"nav-link\">Timesheets</viewlink>\r\n            <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"nav-link\">Expenses</viewlink>\r\n            <boardpermission name=\"View Reports\">\r\n              <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"nav-link\">Reports</viewlink>\r\n            </boardpermission>\r\n          </nav>\r\n        </section>\r\n        <nav class=\"navbar navbar-default navbar-expand-md px-3\" aria-label=\"Navigation\" id=\"iejsa\">\r\n          <header class=\"container-fluid\" aria-label=\"Header\">\r\n            <div class=\"flex\">\r\n              <div class=\"img-agencyinfo mr-3 mobile-hide-lg\">\r\n                <agencyinfo type=\"primarylogo\"/>\r\n              </div>\r\n              <div>\r\n                <h4>List - Crew Members</h4>\r\n                <h6>\r\n                  <incidentname/>\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"navbar-nav ml-auto print-hide d-none d-md-flex\">\r\n                <li class=\"nav-item mr-2\">\r\n                  <boardpermission name=\"Create\">\r\n                    <viewlink name=\"Input - Team Member\" class=\"btn btn-sm btn-primary\">\r\n                      Create New\r\n                      <i class=\"material-icons ml-2\">add</i>\r\n                    </viewlink>\r\n                  </boardpermission>\r\n                </li>\r\n                <li class=\"nav-item mr-2\" updatesection=\"true\" id=\"main-filter-toggle\"/>\r\n                <li class=\"dropdown nav-item flex flex-center\">\r\n                  <i class=\"material-icons cursor-pointer faded-grey\" data-toggle=\"dropdown\">more_horiz</i>\r\n                  <div class=\"dropdown-menu dropdown-menu-right cursor-pointer navbar-dropdown-override\">\r\n                    <a button=\"print-button\" class=\"dropdown-item\">Print Page</a>\r\n                    <a activate=\"pdf-button\" class=\"dropdown-item\">Export to PDF</a>\r\n                    <a activate=\"export-button\" class=\"dropdown-item\">Export to Excel</a>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </header>\r\n        </nav>\r\n        <section class=\"container-fluid scrollable-area dst-list-view dst-display-section\">\r\n          <div class=\"flex flex-column js-target-map-move\">\r\n            <div class=\"bstMainMap\">\r\n              <if test=\"/data/@pdf = 'false'\">\r\n                <section id=\"map-panel-y-wrapper\" class=\"map-panel-y-wrapper\" aria-label=\"Map\">\r\n                  <div id=\"map-panel-y\" class=\"d-none\" data-panel-type=\"map-panel\" data-panel-axis=\"y\">\r\n                    <embedmap id=\"mainMap\" scrolling=\"no\" height=\"350px\" width=\"100%\" page-data=\"enabled\" side-menu=\"disabled\" enableheader=\"true\"/>\r\n                  </div>\r\n                  <div class=\"flex flex-center\">\r\n                    <div button=\"open-map-panel-y\" class=\"map-panel-button map-panel-button-y\">\r\n                      <i class=\"material-icons\">arrow_drop_down</i>\r\n                    </div>\r\n                    <div button=\"close-map-panel-y\" class=\"map-panel-button map-panel-button-y d-none\">\r\n                      <i class=\"material-icons\">arrow_drop_up</i>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </if>\r\n            </div>\r\n            <div id=\"content-wrapper\" class=\"flex-grow\" updatesection=\"true\">\r\n              <div id=\"detail-panel-x-main\" class=\"detail-panel-x-main\">\r\n                <section class=\"mt-2\" aria-label=\"Table\">\r\n                  <table class=\"table table-striped table-sm mt-1 sticky-header\" rowcount=\"\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th width=\"5%\" class=\"bg-white\">\r\n                          <sortlink field=\"personnel_id\">Personel ID</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"last_name\">Last Name</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"first_name\">First Name</sortlink>\r\n                        </th>\r\n                        <th class=\"bg-white  mobile-hide-lg\" width=\"5%\">\r\n                          <sortlink field=\"email\">Email</sortlink>\r\n                        </th>\r\n                        <th class=\"bg-white  mobile-hide-lg\" width=\"5%\">\r\n                          <sortlink field=\"cell_phone\">Cell Phone</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"gender\">Gender</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"departure_city\">Departure City</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"departure_state\">Departure State</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"resource_type\">Resource Type/Classification</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white  mobile-hide-lg\">\r\n                          <sortlink field=\"crew_lead\">Crew Lead / Foreman</sortlink>\r\n                        </th>\r\n                        <th width=\"5%\" class=\"bg-white\"/>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody id=\"main-table\" updatesection=\"true\">\r\n                      <eocrepeatallrecords>\r\n                        <tr class=\"cursor-pointer js-viewlink-delegate\" data-panel-id=\"detail-panel\" data-panel-default-viewname=\"_blank\" data-panel-ignore-clicks=\".dropdown\">\r\n                          <td class=\"\">\r\n                            <eocfield name=\"personnel_id\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"last_name\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"first_name\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"email\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"cell_phone\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"gender\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"departure_city\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"departure_state\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"resource_type\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"mobile-hide-lg\">\r\n                            <eocfield name=\"crew_lead\" disableclick=\"true\"/>\r\n                          </td>\r\n                          <td class=\"text-right\">\r\n                            <viewlink name=\"Details - Team Member\" target=\"sidePanel\" class=\"mobile-hide-lg viewlink-panel\">\r\n                              <viewparameter name=\"presentation\">panel</viewparameter>\r\n                            </viewlink>\r\n                            <div class=\"dropdown cursor-pointer\">\r\n                              <a class=\"custom-link d-block print-hide\" data-toggle=\"dropdown\">\r\n                                <i class=\"material-icons faded-grey\">more_horiz</i>\r\n                              </a>\r\n                              <div class=\"dropdown-menu dropdown-menu-right cursor-pointer\">\r\n                                <viewlink name=\"Details - Team Member\" class=\"dropdown-item viewlink-default\">View</viewlink>\r\n                                <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                                  <boardpermission name=\"Update\">\r\n                                    <viewlink name=\"Input - Team Member\" class=\"dropdown-item\">Edit</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                                <feature type=\"link\" class=\"dropdown-item\" name=\"location\" label-field=\"personnel_id\" data-map-move=\"#mainMap\" data-toggle=\"feature-map-move\" data-dataid=\"{@dataid}\" target=\"\">Map Zoom</feature>\r\n                                <if test=\"@locked = 'false' or @locked = 'False' or @locked='' or not(@locked)\">\r\n                                  <boardpermission name=\"Delete\">\r\n                                    <div class=\"dropdown-divider\"/>\r\n                                    <viewlink name=\"Delete - Team Member\" class=\"dropdown-item text-danger\">Delete</viewlink>\r\n                                  </boardpermission>\r\n                                </if>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                        <div class=\"d-none\">\r\n                          <eocfield name=\"locked\" disableclick=\"true\"/>\r\n                          <eocfield name=\"record_approval_status\" disableclick=\"true\"/>\r\n                          <foreignkey table=\"Crews\"/>\r\n                        </div>\r\n                      </eocrepeatallrecords>\r\n                    </tbody>\r\n                  </table>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <footer class=\"mobile-banner bg-primary text-white mobile-flex-md flex-justify\" aria-label=\"Mobile Menu\">\r\n          <boardpermission name=\"Create\">\r\n            <viewlink name=\"Input - Team Member\" class=\"text-white\" refreshid=\"main-table\">\r\n              <div class=\"flex flex-col\">\r\n                <i class=\"material-icons cursor-pointer\">add</i>\r\n                CREATE NEW\r\n              </div>\r\n            </viewlink>\r\n          </boardpermission>\r\n          <div class=\"flex flex-col dropup\">\r\n            <i class=\"material-icons cursor-pointer\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">more_horiz</i>\r\n            ACTIONS\r\n            <div class=\"dropdown-menu cursor-pointer\">\r\n              <viewlink name=\"List - Subcontractors\" ignoreerrors=\"true\" class=\"dropdown-item\">Subcontractor Roster</viewlink>\r\n              <viewlink name=\"List - Crews\" ignoreerrors=\"true\" class=\"dropdown-item\">Crews</viewlink>\r\n              <viewlink name=\"List - Equipment\" ignoreerrors=\"true\" class=\"dropdown-item\">Equipment</viewlink>\r\n              <viewlink name=\"List - Subcontractor Timesheets\" ignoreerrors=\"true\" class=\"dropdown-item\">Timesheets</viewlink>\r\n              <viewlink name=\"List - Expense Report\" ignoreerrors=\"true\" class=\"dropdown-item\">Expenses</viewlink>\r\n              <boardpermission name=\"View Reports\">\r\n                <viewlink name=\"Display - Reports\" ignoreerrors=\"true\" class=\"dropdown-item\">Reports</viewlink>\r\n              </boardpermission>\r\n              <a button=\"print-button\" class=\"dropdown-item d-md-flex\">Print Page</a>\r\n              <a activate=\"pdf-button\" class=\"dropdown-item d-md-flex\">Export to PDF</a>\r\n              <a activate=\"export-button\" class=\"dropdown-item\">Export to\r\n                CSV</a>\r\n            </div>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    </main>\r\n    <section id=\"detail-panel\" class=\"modal fade drawer click-through right-align mobile-hide-lg\" aria-label=\"Detail Panel\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" data-backdrop=\"false\" data-keyboard=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\" style=\"max-width: 600px\">\r\n        <button type=\"button\" class=\"close drawer-close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <i class=\"material-icons\">close</i>\r\n        </button>\r\n        <div class=\"modal-content\">\r\n          <embedview view=\"_blank\" id=\"sidePanel\" width=\"100%\" height=\"100%\"/>\r\n          <viewlink name=\"_blank\" target=\"sidePanel\" type=\"hidden\"/>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/jquery.min.js\" path=\"/js/core/jquery.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/popper.min.js\" path=\"/js/core/popper.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/core/bootstrap-material-design.min.js\" path=\"/js/core/bootstrap-material-design.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/moment.min.js\" path=\"/js/plugins/moment.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-datetimepicker.js\" path=\"/js/plugins/bootstrap-datetimepicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/nouislider.min.js\" path=\"/js/plugins/nouislider.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-tagsinput.js\" path=\"/js/plugins/bootstrap-tagsinput.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/bootstrap-selectpicker.js\" path=\"/js/plugins/bootstrap-selectpicker.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jasny-bootstrap.min.js\" path=\"/js/plugins/jasny-bootstrap.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.flexisel.js\" path=\"/js/plugins/jquery.flexisel.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/plugins/jquery.sharrre.js\" path=\"/js/plugins/jquery.sharrre.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/material-kit.min.js\" path=\"/js/material-kit.min.js\"/>\r\n    <script src=\"//webeocboardfiles.juvare.com/board/latest/js/ux-webeoc-board-standards.js\" path=\"/js/ux-webeoc-board-standards.js\"/>\r\n  </body>\r\n</html>",
                "global": false,
                "lockUserView": false,
                "lockPositionView": false,
                "assignable": true,
                "mobileOptimized": false,
                "viewFilters": [
                    {
                        "name": "FilterByEntity",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "entity_group",
                                    "operation": "in",
                                    "value": "groups",
                                    "specialValue": true,
                                    "processPermissionName": "Entity"
                                }
                            ]
                        }
                    },
                    {
                        "name": "Removed",
                        "applied": true,
                        "viewFilterGroup": {
                            "all": true,
                            "viewFilterGroups": [],
                            "viewFilterCriteria": [
                                {
                                    "field": "_webeoc_delete_flag",
                                    "operation": "<>",
                                    "value": "'yes'",
                                    "specialValue": false
                                }
                            ]
                        }
                    }
                ],
                "TabGroup": null
            }
        ],
        "resources": [
            {
                "name": "loader.css",
                "description": "",
                "contentType": "text/css",
                "contents": "ICAubG9hZGVyLW92ZXJsYXkgewogICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOwogICAgICAgIHotaW5kZXg6IDk5OTk7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIHBhZGRpbmctdG9wOiAyMDBweDsKICAgIH0KCiAgICAubG9hZGVyLXNwaW5uZXIgewogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB3aWR0aDogNTBweDsKICAgICAgICBoZWlnaHQ6IDUwcHg7CiAgICAgICAgYm9yZGVyOiA2cHggc29saWQgI2YzZjNmMzsKICAgICAgICBib3JkZXItdG9wOiA2cHggc29saWQgIzMzN2FiNzsKICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgIH0KCiAgICBAa2V5ZnJhbWVzIHNwaW4gewogICAgICAgIDAlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgICAgICAgfQoKICAgICAgICAxMDAlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICAgICAgICB9CiAgICB9"
            },
            {
                "name": "rateFields.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "Ly8gVGhpcyBpcyBhIGxpc3Qgb2Ygc3ViY29udHJhY3RvciBhbmQgdXRpbGl0eSByYXRlcyBmaWVsZHMgdXNlZCBpbiB0aGlzIGJvYXJkLiBVc2VkIGZvciBlc3RhYmxpc2hpbmcgZGVmYXVsdCB2YWx1ZXMuCgpjb25zdCByYXRlcyA9IFsKICAgIHsgbmFtZTogJ3NjX2FwMV9zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAxIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDFfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAxIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDFfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAxIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDFfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgMSBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwMV9vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDEgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDFfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAxIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwMl9zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAyIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDJfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAyIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDJfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAyIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDJfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgMiBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwMl9vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDIgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDJfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAyIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwM19zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAzIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDNfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAzIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDNfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAzIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDNfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgMyBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwM19vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDMgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDNfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSAzIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwNF9zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA0IFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDRfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA0IFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDRfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA0IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDRfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgNCBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwNF9vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDQgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDRfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA0IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwNV9zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA1IFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDVfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA1IFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDVfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA1IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDVfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgNSBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwNV9vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDUgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDVfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA1IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwNl9zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA2IFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDZfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA2IFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDZfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA2IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDZfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgNiBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwNl9vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDYgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDZfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA2IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FwN19zdGRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA3IFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDdfb3RfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA3IFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19hcDdfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA3IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDdfc3RkX3JhdGUnLCBsYWJlbDogJ0FwcHJlbnRpY2UgNyBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FwN19vdF9yYXRlJywgbGFiZWw6ICdBcHByZW50aWNlIDcgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hcDdfcHRfcmF0ZScsIGxhYmVsOiAnQXBwcmVudGljZSA3IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2NsX3N0ZF9yYXRlJywgbGFiZWw6ICdDcmV3IExlYWQgU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2NsX290X3JhdGUnLCBsYWJlbDogJ0NyZXcgTGVhZCBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfY2xfcHRfcmF0ZScsIGxhYmVsOiAnQ3JldyBMZWFkIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9jbF9zdGRfcmF0ZScsIGxhYmVsOiAnQ3JldyBMZWFkIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfY2xfb3RfcmF0ZScsIGxhYmVsOiAnQ3JldyBMZWFkIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfY2xfcHRfcmF0ZScsIGxhYmVsOiAnQ3JldyBMZWFkIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2NzX3N0ZF9yYXRlJywgbGFiZWw6ICdDcmV3IFN1cGVydmlzb3IgU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2NzX290X3JhdGUnLCBsYWJlbDogJ0NyZXcgU3VwZXJ2aXNvciBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfY3NfcHRfcmF0ZScsIGxhYmVsOiAnQ3JldyBTdXBlcnZpc29yIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9jc19zdGRfcmF0ZScsIGxhYmVsOiAnQ3JldyBTdXBlcnZpc29yIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfY3Nfb3RfcmF0ZScsIGxhYmVsOiAnQ3JldyBTdXBlcnZpc29yIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfY3NfcHRfcmF0ZScsIGxhYmVsOiAnQ3JldyBTdXBlcnZpc29yIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FzX3N0ZF9yYXRlJywgbGFiZWw6ICdBc3Nlc3NvciBTdWJjb250cmFjdG9yIFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfYXNfb3RfcmF0ZScsIGxhYmVsOiAnQXNzZXNzb3IgU3ViY29udHJhY3RvciBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2FzX3B0X3JhdGUnLCBsYWJlbDogJ0Fzc2Vzc29yIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hc19zdGRfcmF0ZScsIGxhYmVsOiAnQXNzZXNzb3IgVXRpbGl0eSBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9hc19vdF9yYXRlJywgbGFiZWw6ICdBc3Nlc3NvciBVdGlsaXR5IE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2FzX3B0X3JhdGUnLCBsYWJlbDogJ0Fzc2Vzc29yIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2RyX3N0ZF9yYXRlJywgbGFiZWw6ICdEcml2ZXIgU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2RyX290X3JhdGUnLCBsYWJlbDogJ0RyaXZlciBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZHJfcHRfcmF0ZScsIGxhYmVsOiAnRHJpdmVyIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9kcl9zdGRfcmF0ZScsIGxhYmVsOiAnRHJpdmVyIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZHJfb3RfcmF0ZScsIGxhYmVsOiAnRHJpdmVyIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZHJfcHRfcmF0ZScsIGxhYmVsOiAnRHJpdmVyIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2ZtX3N0ZF9yYXRlJywgbGFiZWw6ICdGb3JlbWFuIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19mbV9vdF9yYXRlJywgbGFiZWw6ICdGb3JlbWFuIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19mbV9wdF9yYXRlJywgbGFiZWw6ICdGb3JlbWFuIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9mbV9zdGRfcmF0ZScsIGxhYmVsOiAnRm9yZW1hbiBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2ZtX290X3JhdGUnLCBsYWJlbDogJ0ZvcmVtYW4gVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9mbV9wdF9yYXRlJywgbGFiZWw6ICdGb3JlbWFuIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3N2X3N0ZF9yYXRlJywgbGFiZWw6ICdTdXBlcnZpc29yIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19zdl9vdF9yYXRlJywgbGFiZWw6ICdTdXBlcnZpc29yIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19zdl9wdF9yYXRlJywgbGFiZWw6ICdTdXBlcnZpc29yIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zdl9zdGRfcmF0ZScsIGxhYmVsOiAnU3VwZXJ2aXNvciBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3N2X290X3JhdGUnLCBsYWJlbDogJ1N1cGVydmlzb3IgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zdl9wdF9yYXRlJywgbGFiZWw6ICdTdXBlcnZpc29yIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2dmX3N0ZF9yYXRlJywgbGFiZWw6ICdHZW5lcmFsIEZvcmVtYW4gU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2dmX290X3JhdGUnLCBsYWJlbDogJ0dlbmVyYWwgRm9yZW1hbiBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZ2ZfcHRfcmF0ZScsIGxhYmVsOiAnR2VuZXJhbCBGb3JlbWFuIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9nZl9zdGRfcmF0ZScsIGxhYmVsOiAnR2VuZXJhbCBGb3JlbWFuIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZ2Zfb3RfcmF0ZScsIGxhYmVsOiAnR2VuZXJhbCBGb3JlbWFuIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZ2ZfcHRfcmF0ZScsIGxhYmVsOiAnR2VuZXJhbCBGb3JlbWFuIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2dtX3N0ZF9yYXRlJywgbGFiZWw6ICdHcm91bmRtYW4gU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2dtX290X3JhdGUnLCBsYWJlbDogJ0dyb3VuZG1hbiBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZ21fcHRfcmF0ZScsIGxhYmVsOiAnR3JvdW5kbWFuIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9nbV9zdGRfcmF0ZScsIGxhYmVsOiAnR3JvdW5kbWFuIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZ21fb3RfcmF0ZScsIGxhYmVsOiAnR3JvdW5kbWFuIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfZ21fcHRfcmF0ZScsIGxhYmVsOiAnR3JvdW5kbWFuIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3VnbG1fc3RkX3JhdGUnLCBsYWJlbDogJ1VHIExpbmVtYW4gU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3VnbG1fb3RfcmF0ZScsIGxhYmVsOiAnVUcgTGluZW1hbiBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfdWdsbV9wdF9yYXRlJywgbGFiZWw6ICdVRyBMaW5lbWFuIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF91Z2xtX3N0ZF9yYXRlJywgbGFiZWw6ICdVRyBMaW5lbWFuIFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfdWdsbV9vdF9yYXRlJywgbGFiZWw6ICdVRyBMaW5lbWFuIFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfdWdsbV9wdF9yYXRlJywgbGFiZWw6ICdVRyBMaW5lbWFuIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2xtX3N0ZF9yYXRlJywgbGFiZWw6ICdMaW5lbWFuIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19sbV9vdF9yYXRlJywgbGFiZWw6ICdMaW5lbWFuIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19sbV9wdF9yYXRlJywgbGFiZWw6ICdMaW5lbWFuIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9sbV9zdGRfcmF0ZScsIGxhYmVsOiAnTGluZW1hbiBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2xtX290X3JhdGUnLCBsYWJlbDogJ0xpbmVtYW4gVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9sbV9wdF9yYXRlJywgbGFiZWw6ICdMaW5lbWFuIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2xzX3N0ZF9yYXRlJywgbGFiZWw6ICdMb2dpc3RpY3MgU3VwcG9ydCBTdWJjb250cmFjdG9yIFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfbHNfb3RfcmF0ZScsIGxhYmVsOiAnTG9naXN0aWNzIFN1cHBvcnQgU3ViY29udHJhY3RvciBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2xzX3B0X3JhdGUnLCBsYWJlbDogJ0xvZ2lzdGljcyBTdXBwb3J0IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9sc19zdGRfcmF0ZScsIGxhYmVsOiAnTG9naXN0aWNzIFN1cHBvcnQgVXRpbGl0eSBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9sc19vdF9yYXRlJywgbGFiZWw6ICdMb2dpc3RpY3MgU3VwcG9ydCBVdGlsaXR5IE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2xzX3B0X3JhdGUnLCBsYWJlbDogJ0xvZ2lzdGljcyBTdXBwb3J0IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX21lY2hfc3RkX3JhdGUnLCBsYWJlbDogJ01lY2hhbmljIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19tZWNoX290X3JhdGUnLCBsYWJlbDogJ01lY2hhbmljIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19tZWNoX3B0X3JhdGUnLCBsYWJlbDogJ01lY2hhbmljIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9tZWNoX3N0ZF9yYXRlJywgbGFiZWw6ICdNZWNoYW5pYyBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX21lY2hfb3RfcmF0ZScsIGxhYmVsOiAnTWVjaGFuaWMgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9tZWNoX3B0X3JhdGUnLCBsYWJlbDogJ01lY2hhbmljIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX29wX3N0ZF9yYXRlJywgbGFiZWw6ICdPcGVyYXRvciBTdWJjb250cmFjdG9yIFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfb3Bfb3RfcmF0ZScsIGxhYmVsOiAnT3BlcmF0b3IgU3ViY29udHJhY3RvciBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX29wX3B0X3JhdGUnLCBsYWJlbDogJ09wZXJhdG9yIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9vcF9zdGRfcmF0ZScsIGxhYmVsOiAnT3BlcmF0b3IgVXRpbGl0eSBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9vcF9vdF9yYXRlJywgbGFiZWw6ICdPcGVyYXRvciBVdGlsaXR5IE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX29wX3B0X3JhdGUnLCBsYWJlbDogJ09wZXJhdG9yIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3NhZmV0eV9zdGRfcmF0ZScsIGxhYmVsOiAnU2FmZXR5IFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19zYWZldHlfb3RfcmF0ZScsIGxhYmVsOiAnU2FmZXR5IFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19zYWZldHlfcHRfcmF0ZScsIGxhYmVsOiAnU2FmZXR5IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zYWZldHlfc3RkX3JhdGUnLCBsYWJlbDogJ1NhZmV0eSBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3NhZmV0eV9vdF9yYXRlJywgbGFiZWw6ICdTYWZldHkgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zYWZldHlfcHRfcmF0ZScsIGxhYmVsOiAnU2FmZXR5IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3N1cGVyaW50ZW5kZW50X3N0ZF9yYXRlJywgbGFiZWw6ICdTdXBlcmludGVuZGVudCBTdWJjb250cmFjdG9yIFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfc3VwZXJpbnRlbmRlbnRfb3RfcmF0ZScsIGxhYmVsOiAnU3VwZXJpbnRlbmRlbnQgU3ViY29udHJhY3RvciBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3N1cGVyaW50ZW5kZW50X3B0X3JhdGUnLCBsYWJlbDogJ1N1cGVyaW50ZW5kZW50IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zdXBlcmludGVuZGVudF9zdGRfcmF0ZScsIGxhYmVsOiAnU3VwZXJpbnRlbmRlbnQgVXRpbGl0eSBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zdXBlcmludGVuZGVudF9vdF9yYXRlJywgbGFiZWw6ICdTdXBlcmludGVuZGVudCBVdGlsaXR5IE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3N1cGVyaW50ZW5kZW50X3B0X3JhdGUnLCBsYWJlbDogJ1N1cGVyaW50ZW5kZW50IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3N1cHBvcnRfc3RkX3JhdGUnLCBsYWJlbDogJ1N1cHBvcnQgU3ViY29udHJhY3RvciBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3N1cHBvcnRfb3RfcmF0ZScsIGxhYmVsOiAnU3VwcG9ydCBTdWJjb250cmFjdG9yIE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfc3VwcG9ydF9wdF9yYXRlJywgbGFiZWw6ICdTdXBwb3J0IFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9zdXBwb3J0X3N0ZF9yYXRlJywgbGFiZWw6ICdTdXBwb3J0IFV0aWxpdHkgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfc3VwcG9ydF9vdF9yYXRlJywgbGFiZWw6ICdTdXBwb3J0IFV0aWxpdHkgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfc3VwcG9ydF9wdF9yYXRlJywgbGFiZWw6ICdTdXBwb3J0IFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3RlYW1fbGVhZF9zdGRfcmF0ZScsIGxhYmVsOiAnVGVhbSBMZWFkIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY190ZWFtX2xlYWRfb3RfcmF0ZScsIGxhYmVsOiAnVGVhbSBMZWFkIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY190ZWFtX2xlYWRfcHRfcmF0ZScsIGxhYmVsOiAnVGVhbSBMZWFkIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF90ZWFtX2xlYWRfc3RkX3JhdGUnLCBsYWJlbDogJ1RlYW0gTGVhZCBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3RlYW1fbGVhZF9vdF9yYXRlJywgbGFiZWw6ICdUZWFtIExlYWQgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF90ZWFtX2xlYWRfcHRfcmF0ZScsIGxhYmVsOiAnVGVhbSBMZWFkIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3ZlZ2V0YXRpb25fdHJpbW1lcl9zdGRfcmF0ZScsIGxhYmVsOiAnVmVnZXRhdGlvbiBUcmltbWVyIFN1YmNvbnRyYWN0b3IgU3RhbmRhcmQgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY192ZWdldGF0aW9uX3RyaW1tZXJfb3RfcmF0ZScsIGxhYmVsOiAnVmVnZXRhdGlvbiBUcmltbWVyIFN1YmNvbnRyYWN0b3IgT3ZlcnRpbWUgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY192ZWdldGF0aW9uX3RyaW1tZXJfcHRfcmF0ZScsIGxhYmVsOiAnVmVnZXRhdGlvbiBUcmltbWVyIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF92ZWdldGF0aW9uX3RyaW1tZXJfc3RkX3JhdGUnLCBsYWJlbDogJ1ZlZ2V0YXRpb24gVHJpbW1lciBVdGlsaXR5IFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3ZlZ2V0YXRpb25fdHJpbW1lcl9vdF9yYXRlJywgbGFiZWw6ICdWZWdldGF0aW9uIFRyaW1tZXIgVXRpbGl0eSBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF92ZWdldGF0aW9uX3RyaW1tZXJfcHRfcmF0ZScsIGxhYmVsOiAnVmVnZXRhdGlvbiBUcmltbWVyIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3dpcmVfZ3VhcmRzX3N0ZF9yYXRlJywgbGFiZWw6ICdXaXJlIEd1YXJkcyBTdWJjb250cmFjdG9yIFN0YW5kYXJkIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfd2lyZV9ndWFyZHNfb3RfcmF0ZScsIGxhYmVsOiAnV2lyZSBHdWFyZHMgU3ViY29udHJhY3RvciBPdmVydGltZSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3dpcmVfZ3VhcmRzX3B0X3JhdGUnLCBsYWJlbDogJ1dpcmUgR3VhcmRzIFN1YmNvbnRyYWN0b3IgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF93aXJlX2d1YXJkc19zdGRfcmF0ZScsIGxhYmVsOiAnV2lyZSBHdWFyZHMgVXRpbGl0eSBTdGFuZGFyZCBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF93aXJlX2d1YXJkc19vdF9yYXRlJywgbGFiZWw6ICdXaXJlIEd1YXJkcyBVdGlsaXR5IE92ZXJ0aW1lIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3dpcmVfZ3VhcmRzX3B0X3JhdGUnLCBsYWJlbDogJ1dpcmUgR3VhcmRzIFV0aWxpdHkgUHJlbWl1bSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2JhY2tob2VfcmF0ZScsIGxhYmVsOiAnQmFja2hvZSBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2JhY2tob2VfcmF0ZScsIGxhYmVsOiAnQmFja2hvZSBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfYnVja2V0X3RydWNrX2Rpc3RyaWJ1dGlvbl9yYXRlJywgbGFiZWw6ICdCdWNrZXQgVHJ1Y2sgLSBEaXN0cmlidXRpb24gU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9idWNrZXRfdHJ1Y2tfZGlzdHJpYnV0aW9uX3JhdGUnLCBsYWJlbDogJ0J1Y2tldCBUcnVjayAtIERpc3RyaWJ1dGlvbiBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfYnVja2V0X3RydWNrX3NlcnZpY2VfcmF0ZScsIGxhYmVsOiAnQnVja2V0IFRydWNrIC0gU2VydmljZSBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2J1Y2tldF90cnVja19zZXJ2aWNlX3JhdGUnLCBsYWJlbDogJ0J1Y2tldCBUcnVjayAtIFNlcnZpY2UgVXRpbGl0eSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2J1Y2tldF90cnVja190cmFuc21pc3Npb25fcmF0ZScsIGxhYmVsOiAnQnVja2V0IFRydWNrIC0gVHJhbnNtaXNzaW9uIFN1YmNvbnRyYWN0b3IgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfYnVja2V0X3RydWNrX3RyYW5zbWlzc2lvbl9yYXRlJywgbGFiZWw6ICdCdWNrZXQgVHJ1Y2sgLSBUcmFuc21pc3Npb24gVXRpbGl0eSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2NoaXBwZXJfcmF0ZScsIGxhYmVsOiAnQ2hpcHBlciBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2NoaXBwZXJfcmF0ZScsIGxhYmVsOiAnQ2hpcHBlciBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZGlnZ2VyX2RlcnJpY2tfcmF0ZScsIGxhYmVsOiAnRGlnZ2VyIERlcnJpY2sgU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9kaWdnZXJfZGVycmlja19yYXRlJywgbGFiZWw6ICdEaWdnZXIgRGVycmljayBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZGlnZ2VyX2RlcnJpY2tfcmVhcl9sb3RfcmF0ZScsIGxhYmVsOiAnRGlnZ2VyIERlcnJpY2stcmVhciBsb3QgU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9kaWdnZXJfZGVycmlja19yZWFyX2xvdF9yYXRlJywgbGFiZWw6ICdEaWdnZXIgRGVycmljay1yZWFyIGxvdCBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2NfZXF1aXBtZW50X3RyYWlsZXJfcmF0ZScsIGxhYmVsOiAnRXF1aXBtZW50IFRyYWlsZXIgU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9lcXVpcG1lbnRfdHJhaWxlcl9yYXRlJywgbGFiZWw6ICdFcXVpcG1lbnQgVHJhaWxlciBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfa251Y2tsZV9ib29tX3RydWNrX3JhdGUnLCBsYWJlbDogJ0tudWNrbGUgQm9vbSBUcnVjayBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX2tudWNrbGVfYm9vbV90cnVja19yYXRlJywgbGFiZWw6ICdLbnVja2xlIEJvb20gVHJ1Y2sgVXRpbGl0eSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3BpY2t1cF9yYXRlJywgbGFiZWw6ICdQaWNrdXAgU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9waWNrdXBfcmF0ZScsIGxhYmVsOiAnUGlja3VwIFV0aWxpdHkgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19wb2xlX2hhdWxlcl9yYXRlJywgbGFiZWw6ICdQb2xlIEhhdWxlciBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3BvbGVfaGF1bGVyX3JhdGUnLCBsYWJlbDogJ1BvbGUgSGF1bGVyIFV0aWxpdHkgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19wb2xlX3RyYWlsZXJfcmF0ZScsIGxhYmVsOiAnUG9sZSBUcmFpbGVyIFN1YmNvbnRyYWN0b3IgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfcG9sZV90cmFpbGVyX3JhdGUnLCBsYWJlbDogJ1BvbGUgVHJhaWxlciBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAnc2Nfc2VydmljZV90cnVja19yYXRlJywgbGFiZWw6ICdTZXJ2aWNlIFRydWNrIFN1YmNvbnRyYWN0b3IgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfc2VydmljZV90cnVja19yYXRlJywgbGFiZWw6ICdTZXJ2aWNlIFRydWNrIFV0aWxpdHkgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICdzY19iYWNreWFyZF9tYWNoaW5lX3JhdGUnLCBsYWJlbDogJ0JhY2t5YXJkIE1hY2hpbmUgU3ViY29udHJhY3RvciBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3V0bF9iYWNreWFyZF9tYWNoaW5lX3JhdGUnLCBsYWJlbDogJ0JhY2t5YXJkIE1hY2hpbmUgVXRpbGl0eSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX2h5ZHJvdmFjX3JhdGUnLCBsYWJlbDogJ0h5ZHJvdmFjIFN1YmNvbnRyYWN0b3IgSG91cmx5IFJhdGUnIH0sCiAgICB7IG5hbWU6ICd1dGxfaHlkcm92YWNfcmF0ZScsIGxhYmVsOiAnSHlkcm92YWMgVXRpbGl0eSBIb3VybHkgUmF0ZScgfSwKICAgIHsgbmFtZTogJ3NjX3NwZWNpYWx0eV9lcXVpcG1lbnRfcmF0ZScsIGxhYmVsOiAnU3BlY2lhbHR5IEVxdWlwbWVudCBTdWJjb250cmFjdG9yIEhvdXJseSBSYXRlJyB9LAogICAgeyBuYW1lOiAndXRsX3NwZWNpYWx0eV9lcXVpcG1lbnRfcmF0ZScsIGxhYmVsOiAnU3BlY2lhbHR5IEVxdWlwbWVudCBVdGlsaXR5IEhvdXJseSBSYXRlJyB9LApdOwo="
            },
            {
                "name": "datatables.min.css",
                "description": "",
                "contentType": "text/css",
                "contents": "LyoKICogVGhpcyBjb21iaW5lZCBmaWxlIHdhcyBjcmVhdGVkIGJ5IHRoZSBEYXRhVGFibGVzIGRvd25sb2FkZXIgYnVpbGRlcjoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkCiAqCiAqIFRvIHJlYnVpbGQgb3IgbW9kaWZ5IHRoaXMgZmlsZSB3aXRoIHRoZSBsYXRlc3QgdmVyc2lvbnMgb2YgdGhlIGluY2x1ZGVkCiAqIHNvZnR3YXJlIHBsZWFzZSB2aXNpdDoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkLyNkdC9kdC0yLjEuOC9lLTIuMy4yL2ItMy4xLjIvYi1odG1sNS0zLjEuMi9maC00LjAuMS9rdC0yLjEyLjEvci0zLjAuMy9yZy0xLjUuMC9zYy0yLjQuMy9zYi0xLjguMS9zbC0yLjEuMAogKgogKiBJbmNsdWRlZCBsaWJyYXJpZXM6CiAqICAgRGF0YVRhYmxlcyAyLjEuOCwgRWRpdG9yIDIuMy4yLCBCdXR0b25zIDMuMS4yLCBIVE1MNSBleHBvcnQgMy4xLjIsIEZpeGVkSGVhZGVyIDQuMC4xLCBLZXlUYWJsZSAyLjEyLjEsIFJlc3BvbnNpdmUgMy4wLjMsIFJvd0dyb3VwIDEuNS4wLCBTY3JvbGxlciAyLjQuMywgU2VhcmNoQnVpbGRlciAxLjguMSwgU2VsZWN0IDIuMS4wCiAqLwoKOnJvb3QgewogICAgLS1kdC1yb3ctc2VsZWN0ZWQ6IDEzLCAxMTAsIDI1MzsKICAgIC0tZHQtcm93LXNlbGVjdGVkLXRleHQ6IDI1NSwgMjU1LCAyNTU7CiAgICAtLWR0LXJvdy1zZWxlY3RlZC1saW5rOiA5LCAxMCwgMTE7CiAgICAtLWR0LXJvdy1zdHJpcGU6IDAsIDAsIDA7CiAgICAtLWR0LXJvdy1ob3ZlcjogMCwgMCwgMDsKICAgIC0tZHQtY29sdW1uLW9yZGVyaW5nOiAwLCAwLCAwOwogICAgLS1kdC1odG1sLWJhY2tncm91bmQ6IHdoaXRlOwp9Cjpyb290LmRhcmsgewogICAgLS1kdC1odG1sLWJhY2tncm91bmQ6IHJnYigzMywgMzcsIDQxKTsKfQp0YWJsZS5kYXRhVGFibGUgdGQuZHQtY29udHJvbCB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KdGFibGUuZGF0YVRhYmxlIHRkLmR0LWNvbnRyb2w6YmVmb3JlIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBjb250ZW50OiAnJzsKICAgIGJvcmRlci10b3A6IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1sZWZ0OiAxMHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGJvcmRlci1ib3R0b206IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50Owp9CnRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSB7CiAgICBib3JkZXItdG9wOiAxMHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItYm90dG9tOiAwcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItcmlnaHQ6IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKfQpodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlIHRkLmR0LWNvbnRyb2w6YmVmb3JlLAo6cm9vdFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gdGFibGUuZGF0YVRhYmxlIHRkLmR0LWNvbnRyb2w6YmVmb3JlLAo6cm9vdFtkYXRhLXRoZW1lPSdkYXJrJ10gdGFibGUuZGF0YVRhYmxlIHRkLmR0LWNvbnRyb2w6YmVmb3JlIHsKICAgIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSwKOnJvb3RbZGF0YS1icy10aGVtZT0nZGFyayddIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSwKOnJvb3RbZGF0YS10aGVtZT0nZGFyayddIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSB7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KZGl2LmR0LXNjcm9sbCB7CiAgICB3aWR0aDogMTAwJTsKfQpkaXYuZHQtc2Nyb2xsLWJvZHkgdGhlYWQgdHIsCmRpdi5kdC1zY3JvbGwtYm9keSB0Zm9vdCB0ciB7CiAgICBoZWlnaHQ6IDA7Cn0KZGl2LmR0LXNjcm9sbC1ib2R5IHRoZWFkIHRyIHRoLApkaXYuZHQtc2Nyb2xsLWJvZHkgdGhlYWQgdHIgdGQsCmRpdi5kdC1zY3JvbGwtYm9keSB0Zm9vdCB0ciB0aCwKZGl2LmR0LXNjcm9sbC1ib2R5IHRmb290IHRyIHRkIHsKICAgIGhlaWdodDogMCAhaW1wb3J0YW50OwogICAgcGFkZGluZy10b3A6IDBweCAhaW1wb3J0YW50OwogICAgcGFkZGluZy1ib3R0b206IDBweCAhaW1wb3J0YW50OwogICAgYm9yZGVyLXRvcC13aWR0aDogMHB4ICFpbXBvcnRhbnQ7CiAgICBib3JkZXItYm90dG9tLXdpZHRoOiAwcHggIWltcG9ydGFudDsKfQpkaXYuZHQtc2Nyb2xsLWJvZHkgdGhlYWQgdHIgdGggZGl2LmR0LXNjcm9sbC1zaXppbmcsCmRpdi5kdC1zY3JvbGwtYm9keSB0aGVhZCB0ciB0ZCBkaXYuZHQtc2Nyb2xsLXNpemluZywKZGl2LmR0LXNjcm9sbC1ib2R5IHRmb290IHRyIHRoIGRpdi5kdC1zY3JvbGwtc2l6aW5nLApkaXYuZHQtc2Nyb2xsLWJvZHkgdGZvb3QgdHIgdGQgZGl2LmR0LXNjcm9sbC1zaXppbmcgewogICAgaGVpZ2h0OiAwICFpbXBvcnRhbnQ7CiAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aDphY3RpdmUsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQ6YWN0aXZlIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyYWJsZS1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgZGlzcGxheTogYmxvY2s7CiAgICBib3R0b206IDUwJTsKICAgIGNvbnRlbnQ6ICfilrInOwogICAgY29udGVudDogJ+KWsicvJyc7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyYWJsZS1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyaW5nLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgZGlzcGxheTogYmxvY2s7CiAgICB0b3A6IDUwJTsKICAgIGNvbnRlbnQ6ICfilrwnOwogICAgY29udGVudDogJ+KWvCcvJyc7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtYXNjLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyYWJsZS1kZXNjLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyaW5nLWFzYywKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmluZy1kZXNjLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyYWJsZS1hc2MsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJhYmxlLWRlc2MsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJpbmctYXNjLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyaW5nLWRlc2MgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgcGFkZGluZy1yaWdodDogMzBweDsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyYWJsZS1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyaW5nLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMTJweDsKICAgIHRvcDogMDsKICAgIGJvdHRvbTogMDsKICAgIHdpZHRoOiAxMnB4Owp9CnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyYWJsZS1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyIHsKICAgIGxlZnQ6IDA7CiAgICBvcGFjaXR5OiAwLjEyNTsKICAgIGxpbmUtaGVpZ2h0OiA5cHg7CiAgICBmb250LXNpemU6IDAuOGVtOwp9CnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWFzYywKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtZGVzYywKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtYXNjLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyYWJsZS1kZXNjIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyYWJsZS1hc2M6aG92ZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJhYmxlLWFzYzpob3ZlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtZGVzYzpob3ZlciB7CiAgICBvdXRsaW5lOiAycHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjA1KTsKICAgIG91dGxpbmUtb2Zmc2V0OiAtMnB4Owp9CnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciB7CiAgICBvcGFjaXR5OiAwLjY7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5zb3J0aW5nX2Rlc2NfZGlzYWJsZWQgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguc29ydGluZ19hc2NfZGlzYWJsZWQgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRkLnNvcnRpbmdfZGVzY19kaXNhYmxlZCBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlciwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5zb3J0aW5nX2FzY19kaXNhYmxlZCBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUgewogICAgZGlzcGxheTogbm9uZTsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoOmFjdGl2ZSwKdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZDphY3RpdmUgewogICAgb3V0bGluZTogbm9uZTsKfQpkaXYuZHQtc2Nyb2xsLWJvZHkgPiB0YWJsZS5kYXRhVGFibGUgPiB0aGVhZCA+IHRyID4gdGgsCmRpdi5kdC1zY3JvbGwtYm9keSA+IHRhYmxlLmRhdGFUYWJsZSA+IHRoZWFkID4gdHIgPiB0ZCB7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9Cjpyb290LmRhcmsgdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0aC5kdC1vcmRlcmFibGUtYXNjOmhvdmVyLAo6cm9vdC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGguZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXIsCjpyb290LmRhcmsgdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtYXNjOmhvdmVyLAo6cm9vdC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0aGVhZCA+IHRyID4gdGQuZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXIsCjpyb290W2RhdGEtYnMtdGhlbWU9J2RhcmsnXSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyYWJsZS1hc2M6aG92ZXIsCjpyb290W2RhdGEtYnMtdGhlbWU9J2RhcmsnXSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgPiB0ciA+IHRoLmR0LW9yZGVyYWJsZS1kZXNjOmhvdmVyLAo6cm9vdFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtYXNjOmhvdmVyLAo6cm9vdFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gdGFibGUuZGF0YVRhYmxlIHRoZWFkID4gdHIgPiB0ZC5kdC1vcmRlcmFibGUtZGVzYzpob3ZlciB7CiAgICBvdXRsaW5lOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKfQpkaXYuZHQtcHJvY2Vzc2luZyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDUwJTsKICAgIGxlZnQ6IDUwJTsKICAgIHdpZHRoOiAyMDBweDsKICAgIG1hcmdpbi1sZWZ0OiAtMTAwcHg7CiAgICBtYXJnaW4tdG9wOiAtMjJweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHBhZGRpbmc6IDJweDsKICAgIHotaW5kZXg6IDEwOwp9CmRpdi5kdC1wcm9jZXNzaW5nID4gZGl2Omxhc3QtY2hpbGQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgd2lkdGg6IDgwcHg7CiAgICBoZWlnaHQ6IDE1cHg7CiAgICBtYXJnaW46IDFlbSBhdXRvOwp9CmRpdi5kdC1wcm9jZXNzaW5nID4gZGl2Omxhc3QtY2hpbGQgPiBkaXYgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgd2lkdGg6IDEzcHg7CiAgICBoZWlnaHQ6IDEzcHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBiYWNrZ3JvdW5kOiByZ2IoMTMsIDExMCwgMjUzKTsKICAgIGJhY2tncm91bmQ6IHJnYih2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpKTsKICAgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLCAxLCAxLCAwKTsKfQpkaXYuZHQtcHJvY2Vzc2luZyA+IGRpdjpsYXN0LWNoaWxkID4gZGl2Om50aC1jaGlsZCgxKSB7CiAgICBsZWZ0OiA4cHg7CiAgICBhbmltYXRpb246IGRhdGF0YWJsZXMtbG9hZGVyLTEgMC42cyBpbmZpbml0ZTsKfQpkaXYuZHQtcHJvY2Vzc2luZyA+IGRpdjpsYXN0LWNoaWxkID4gZGl2Om50aC1jaGlsZCgyKSB7CiAgICBsZWZ0OiA4cHg7CiAgICBhbmltYXRpb246IGRhdGF0YWJsZXMtbG9hZGVyLTIgMC42cyBpbmZpbml0ZTsKfQpkaXYuZHQtcHJvY2Vzc2luZyA+IGRpdjpsYXN0LWNoaWxkID4gZGl2Om50aC1jaGlsZCgzKSB7CiAgICBsZWZ0OiAzMnB4OwogICAgYW5pbWF0aW9uOiBkYXRhdGFibGVzLWxvYWRlci0yIDAuNnMgaW5maW5pdGU7Cn0KZGl2LmR0LXByb2Nlc3NpbmcgPiBkaXY6bGFzdC1jaGlsZCA+IGRpdjpudGgtY2hpbGQoNCkgewogICAgbGVmdDogNTZweDsKICAgIGFuaW1hdGlvbjogZGF0YXRhYmxlcy1sb2FkZXItMyAwLjZzIGluZmluaXRlOwp9CkBrZXlmcmFtZXMgZGF0YXRhYmxlcy1sb2FkZXItMSB7CiAgICAwJSB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgIH0KICAgIDEwMCUgewogICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICB9Cn0KQGtleWZyYW1lcyBkYXRhdGFibGVzLWxvYWRlci0zIHsKICAgIDAlIHsKICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpOwogICAgfQogICAgMTAwJSB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgIH0KfQpAa2V5ZnJhbWVzIGRhdGF0YWJsZXMtbG9hZGVyLTIgewogICAgMCUgewogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApOwogICAgfQogICAgMTAwJSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMjRweCwgMCk7CiAgICB9Cn0KdGFibGUuZGF0YVRhYmxlLm5vd3JhcCB0aCwKdGFibGUuZGF0YVRhYmxlLm5vd3JhcCB0ZCB7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CnRhYmxlLmRhdGFUYWJsZSB0aCwKdGFibGUuZGF0YVRhYmxlIHRkIHsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LWxlZnQsCnRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1sZWZ0IHsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LWNlbnRlciwKdGFibGUuZGF0YVRhYmxlIHRkLmR0LWNlbnRlciB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LXJpZ2h0LAp0YWJsZS5kYXRhVGFibGUgdGQuZHQtcmlnaHQgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LWp1c3RpZnksCnRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1qdXN0aWZ5IHsKICAgIHRleHQtYWxpZ246IGp1c3RpZnk7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LW5vd3JhcCwKdGFibGUuZGF0YVRhYmxlIHRkLmR0LW5vd3JhcCB7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CnRhYmxlLmRhdGFUYWJsZSB0aC5kdC1lbXB0eSwKdGFibGUuZGF0YVRhYmxlIHRkLmR0LWVtcHR5IHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7Cn0KdGFibGUuZGF0YVRhYmxlIHRoLmR0LXR5cGUtbnVtZXJpYywKdGFibGUuZGF0YVRhYmxlIHRoLmR0LXR5cGUtZGF0ZSwKdGFibGUuZGF0YVRhYmxlIHRkLmR0LXR5cGUtbnVtZXJpYywKdGFibGUuZGF0YVRhYmxlIHRkLmR0LXR5cGUtZGF0ZSB7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGgsCnRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZCwKdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQgewogICAgdGV4dC1hbGlnbjogbGVmdDsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1sZWZ0LAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1sZWZ0LAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1sZWZ0LAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1sZWZ0IHsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLmR0LWhlYWQtY2VudGVyLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1jZW50ZXIsCnRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLWNlbnRlciwKdGFibGUuZGF0YVRhYmxlIHRmb290IHRkLmR0LWhlYWQtY2VudGVyIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1yaWdodCwKdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRkLmR0LWhlYWQtcmlnaHQsCnRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLXJpZ2h0LAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1yaWdodCB7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1qdXN0aWZ5LAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1qdXN0aWZ5LAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1qdXN0aWZ5LAp0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1qdXN0aWZ5IHsKICAgIHRleHQtYWxpZ246IGp1c3RpZnk7Cn0KdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLmR0LWhlYWQtbm93cmFwLAp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1ub3dyYXAsCnRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLW5vd3JhcCwKdGFibGUuZGF0YVRhYmxlIHRmb290IHRkLmR0LWhlYWQtbm93cmFwIHsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KdGFibGUuZGF0YVRhYmxlIHRib2R5IHRoLmR0LWJvZHktbGVmdCwKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktbGVmdCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CnRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aC5kdC1ib2R5LWNlbnRlciwKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktY2VudGVyIHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQp0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZHQtYm9keS1yaWdodCwKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktcmlnaHQgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KdGFibGUuZGF0YVRhYmxlIHRib2R5IHRoLmR0LWJvZHktanVzdGlmeSwKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktanVzdGlmeSB7CiAgICB0ZXh0LWFsaWduOiBqdXN0aWZ5Owp9CnRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aC5kdC1ib2R5LW5vd3JhcCwKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktbm93cmFwIHsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KdGFibGUuZGF0YVRhYmxlIHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBib3JkZXItc3BhY2luZzogMDsKfQp0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGgsCnRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aCB7CiAgICBmb250LXdlaWdodDogYm9sZDsKfQp0YWJsZS5kYXRhVGFibGUgPiB0aGVhZCA+IHRyID4gdGgsCnRhYmxlLmRhdGFUYWJsZSA+IHRoZWFkID4gdHIgPiB0ZCB7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKfQp0YWJsZS5kYXRhVGFibGUgPiB0aGVhZCA+IHRyID4gdGg6YWN0aXZlLAp0YWJsZS5kYXRhVGFibGUgPiB0aGVhZCA+IHRyID4gdGQ6YWN0aXZlIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGZvb3QgPiB0ciA+IHRoLAp0YWJsZS5kYXRhVGFibGUgPiB0Zm9vdCA+IHRyID4gdGQgewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgIHBhZGRpbmc6IDEwcHggMTBweCA2cHggMTBweDsKfQp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHI6Zmlyc3QtY2hpbGQgPiAqIHsKICAgIGJvcmRlci10b3A6IG5vbmU7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0cjpsYXN0LWNoaWxkID4gKiB7CiAgICBib3JkZXItYm90dG9tOiBub25lOwp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuc2VsZWN0ZWQgPiAqIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKDEzLCAxMTAsIDI1MywgMC45KTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKHZhcigtLWR0LXJvdy1zZWxlY3RlZCksIDAuOSk7CiAgICBjb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOwogICAgY29sb3I6IHJnYih2YXIoLS1kdC1yb3ctc2VsZWN0ZWQtdGV4dCkpOwp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuc2VsZWN0ZWQgYSB7CiAgICBjb2xvcjogcmdiKDksIDEwLCAxMSk7CiAgICBjb2xvcjogcmdiKHZhcigtLWR0LXJvdy1zZWxlY3RlZC1saW5rKSk7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ciA+IHRoLAp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyID4gdGQgewogICAgcGFkZGluZzogOHB4IDEwcHg7Cn0KdGFibGUuZGF0YVRhYmxlLnJvdy1ib3JkZXIgPiB0Ym9keSA+IHRyID4gKiwKdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyID4gKiB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjE1KTsKfQp0YWJsZS5kYXRhVGFibGUucm93LWJvcmRlciA+IHRib2R5ID4gdHI6Zmlyc3QtY2hpbGQgPiAqLAp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5ID4gdHI6Zmlyc3QtY2hpbGQgPiAqIHsKICAgIGJvcmRlci10b3A6IG5vbmU7Cn0KdGFibGUuZGF0YVRhYmxlLnJvdy1ib3JkZXIgPiB0Ym9keSA+IHRyLnNlbGVjdGVkICsgdHIuc2VsZWN0ZWQgPiB0ZCwKdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLnNlbGVjdGVkICsgdHIuc2VsZWN0ZWQgPiB0ZCB7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKDEzLCAxMTAsIDI1MywgMC42NSk7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKHZhcigtLWR0LXJvdy1zZWxlY3RlZCksIDAuNjUpOwp9CnRhYmxlLmRhdGFUYWJsZS5jZWxsLWJvcmRlciA+IHRib2R5ID4gdHIgPiAqIHsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjE1KTsKfQp0YWJsZS5kYXRhVGFibGUuY2VsbC1ib3JkZXIgPiB0Ym9keSA+IHRyID4gKjpmaXJzdC1jaGlsZCB7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xNSk7Cn0KdGFibGUuZGF0YVRhYmxlLmNlbGwtYm9yZGVyID4gdGJvZHkgPiB0cjpmaXJzdC1jaGlsZCA+ICogewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKfQp0YWJsZS5kYXRhVGFibGUuc3RyaXBlID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKSA+ICosCnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKSA+ICogewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMCwgMCwgMCwgMC4wMjMpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtcm93LXN0cmlwZSksIDAuMDIzKTsKfQp0YWJsZS5kYXRhVGFibGUuc3RyaXBlID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKS5zZWxlY3RlZCA+ICosCnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKS5zZWxlY3RlZCA+ICogewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkyMyk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkyMyk7Cn0KdGFibGUuZGF0YVRhYmxlLmhvdmVyID4gdGJvZHkgPiB0cjpob3ZlciA+ICosCnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgPiB0cjpob3ZlciA+ICogewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMCwgMCwgMCwgMC4wMzUpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtcm93LWhvdmVyKSwgMC4wMzUpOwp9CnRhYmxlLmRhdGFUYWJsZS5ob3ZlciA+IHRib2R5ID4gdHIuc2VsZWN0ZWQ6aG92ZXIgPiAqLAp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5ID4gdHIuc2VsZWN0ZWQ6aG92ZXIgPiAqIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCAjMGQ2ZWZkICFpbXBvcnRhbnQ7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAxKSAhaW1wb3J0YW50Owp9CnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ciA+IC5zb3J0aW5nXzEsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ciA+IC5zb3J0aW5nXzIsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ciA+IC5zb3J0aW5nXzMsCnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgdHIgPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5IHRyID4gLnNvcnRpbmdfMiwKdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSB0ciA+IC5zb3J0aW5nXzMgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMCwgMCwgMCwgMC4wMTkpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtY29sdW1uLW9yZGVyaW5nKSwgMC4wMTkpOwp9CnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ci5zZWxlY3RlZCA+IC5zb3J0aW5nXzEsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ci5zZWxlY3RlZCA+IC5zb3J0aW5nXzIsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4gPiB0Ym9keSB0ci5zZWxlY3RlZCA+IC5zb3J0aW5nXzMsCnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgdHIuc2VsZWN0ZWQgPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5IHRyLnNlbGVjdGVkID4gLnNvcnRpbmdfMiwKdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSB0ci5zZWxlY3RlZCA+IC5zb3J0aW5nXzMgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkxOSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkxOSk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMSwKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5zdHJpcGUgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMSB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjA1NCk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1jb2x1bW4tb3JkZXJpbmcpLCAwLjA1NCk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMiwKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5zdHJpcGUgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMiB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjA0Nyk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1jb2x1bW4tb3JkZXJpbmcpLCAwLjA0Nyk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMywKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5zdHJpcGUgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gLnNvcnRpbmdfMyB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjAzOSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1jb2x1bW4tb3JkZXJpbmcpLCAwLjAzOSk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpLnNlbGVjdGVkID4gLnNvcnRpbmdfMSwKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5zdHJpcGUgPiB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpLnNlbGVjdGVkID4gLnNvcnRpbmdfMSB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgxMywgMTEwLCAyNTMsIDAuOTU0KTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKHZhcigtLWR0LXJvdy1zZWxlY3RlZCksIDAuOTU0KTsKfQp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5ID4gdHI6bnRoLWNoaWxkKG9kZCkuc2VsZWN0ZWQgPiAuc29ydGluZ18yLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLnN0cmlwZSA+IHRib2R5ID4gdHI6bnRoLWNoaWxkKG9kZCkuc2VsZWN0ZWQgPiAuc29ydGluZ18yIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKDEzLCAxMTAsIDI1MywgMC45NDcpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtcm93LXNlbGVjdGVkKSwgMC45NDcpOwp9CnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKS5zZWxlY3RlZCA+IC5zb3J0aW5nXzMsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4uc3RyaXBlID4gdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKS5zZWxlY3RlZCA+IC5zb3J0aW5nXzMgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkzOSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkzOSk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLmV2ZW4gPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLnN0cmlwZSA+IHRib2R5ID4gdHIuZXZlbiA+IC5zb3J0aW5nXzEgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMCwgMCwgMCwgMC4wMTkpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtY29sdW1uLW9yZGVyaW5nKSwgMC4wMTkpOwp9CnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5ID4gdGJvZHkgPiB0ci5ldmVuID4gLnNvcnRpbmdfMiwKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5zdHJpcGUgPiB0Ym9keSA+IHRyLmV2ZW4gPiAuc29ydGluZ18yIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKDAsIDAsIDAsIDAuMDExKTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKHZhcigtLWR0LWNvbHVtbi1vcmRlcmluZyksIDAuMDExKTsKfQp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSA+IHRib2R5ID4gdHIuZXZlbiA+IC5zb3J0aW5nXzMsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4uc3RyaXBlID4gdGJvZHkgPiB0ci5ldmVuID4gLnNvcnRpbmdfMyB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjAwMyk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1jb2x1bW4tb3JkZXJpbmcpLCAwLjAwMyk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLmV2ZW4uc2VsZWN0ZWQgPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLnN0cmlwZSA+IHRib2R5ID4gdHIuZXZlbi5zZWxlY3RlZCA+IC5zb3J0aW5nXzEgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkxOSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkxOSk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLmV2ZW4uc2VsZWN0ZWQgPiAuc29ydGluZ18yLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLnN0cmlwZSA+IHRib2R5ID4gdHIuZXZlbi5zZWxlY3RlZCA+IC5zb3J0aW5nXzIgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkxMSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkxMSk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLmV2ZW4uc2VsZWN0ZWQgPiAuc29ydGluZ18zLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLnN0cmlwZSA+IHRib2R5ID4gdHIuZXZlbi5zZWxlY3RlZCA+IC5zb3J0aW5nXzMgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkwMyk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjkwMyk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgdGJvZHkgdHI6aG92ZXIgPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLmhvdmVyIHRib2R5IHRyOmhvdmVyID4gLnNvcnRpbmdfMSB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjA4Mik7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctaG92ZXIpLCAwLjA4Mik7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgdGJvZHkgdHI6aG92ZXIgPiAuc29ydGluZ18yLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLmhvdmVyIHRib2R5IHRyOmhvdmVyID4gLnNvcnRpbmdfMiB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjA3NCk7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctaG92ZXIpLCAwLjA3NCk7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgdGJvZHkgdHI6aG92ZXIgPiAuc29ydGluZ18zLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLmhvdmVyIHRib2R5IHRyOmhvdmVyID4gLnNvcnRpbmdfMyB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgwLCAwLCAwLCAwLjA2Mik7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctaG92ZXIpLCAwLjA2Mik7Cn0KdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgdGJvZHkgdHI6aG92ZXIuc2VsZWN0ZWQgPiAuc29ydGluZ18xLAp0YWJsZS5kYXRhVGFibGUub3JkZXItY29sdW1uLmhvdmVyIHRib2R5IHRyOmhvdmVyLnNlbGVjdGVkID4gLnNvcnRpbmdfMSB7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSgxMywgMTEwLCAyNTMsIDAuOTgyKTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKHZhcigtLWR0LXJvdy1zZWxlY3RlZCksIDAuOTgyKTsKfQp0YWJsZS5kYXRhVGFibGUuZGlzcGxheSB0Ym9keSB0cjpob3Zlci5zZWxlY3RlZCA+IC5zb3J0aW5nXzIsCnRhYmxlLmRhdGFUYWJsZS5vcmRlci1jb2x1bW4uaG92ZXIgdGJvZHkgdHI6aG92ZXIuc2VsZWN0ZWQgPiAuc29ydGluZ18yIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDk5OTlweCByZ2JhKDEzLCAxMTAsIDI1MywgMC45NzQpOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtcm93LXNlbGVjdGVkKSwgMC45NzQpOwp9CnRhYmxlLmRhdGFUYWJsZS5kaXNwbGF5IHRib2R5IHRyOmhvdmVyLnNlbGVjdGVkID4gLnNvcnRpbmdfMywKdGFibGUuZGF0YVRhYmxlLm9yZGVyLWNvbHVtbi5ob3ZlciB0Ym9keSB0cjpob3Zlci5zZWxlY3RlZCA+IC5zb3J0aW5nXzMgewogICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEoMTMsIDExMCwgMjUzLCAwLjk2Mik7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjk2Mik7Cn0KdGFibGUuZGF0YVRhYmxlLmNvbXBhY3QgdGhlYWQgdGgsCnRhYmxlLmRhdGFUYWJsZS5jb21wYWN0IHRoZWFkIHRkLAp0YWJsZS5kYXRhVGFibGUuY29tcGFjdCB0Zm9vdCB0aCwKdGFibGUuZGF0YVRhYmxlLmNvbXBhY3QgdGZvb3QgdGQsCnRhYmxlLmRhdGFUYWJsZS5jb21wYWN0IHRib2R5IHRoLAp0YWJsZS5kYXRhVGFibGUuY29tcGFjdCB0Ym9keSB0ZCB7CiAgICBwYWRkaW5nOiA0cHg7Cn0KZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXJvdyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luOiAwLjc1ZW0gMDsKfQpkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtcm93IGRpdi5kdC1sYXlvdXQtY2VsbCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQpkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtcm93IGRpdi5kdC1sYXlvdXQtY2VsbC5kdC1sYXlvdXQtc3RhcnQgewogICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwogICAgbWFyZ2luLXJpZ2h0OiBhdXRvOwp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1yb3cgZGl2LmR0LWxheW91dC1jZWxsLmR0LWxheW91dC1lbmQgewogICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1yb3cgZGl2LmR0LWxheW91dC1jZWxsOmVtcHR5IHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY3cHgpIHsKICAgIGRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1yb3c6bm90KC5kdC1sYXlvdXQtdGFibGUpIHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgIH0KICAgIGRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1yb3c6bm90KC5kdC1sYXlvdXQtdGFibGUpIGRpdi5kdC1sYXlvdXQtY2VsbCB7CiAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgfQogICAgZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXJvdzpub3QoLmR0LWxheW91dC10YWJsZSkgZGl2LmR0LWxheW91dC1jZWxsID4gKiB7CiAgICAgICAgbWFyZ2luOiAwLjVlbSAwOwogICAgfQogICAgZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXJvdzpub3QoLmR0LWxheW91dC10YWJsZSkgZGl2LmR0LWxheW91dC1jZWxsLmR0LWxheW91dC1zdGFydCB7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwOwogICAgfQogICAgZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXJvdzpub3QoLmR0LWxheW91dC10YWJsZSkgZGl2LmR0LWxheW91dC1jZWxsLmR0LWxheW91dC1lbmQgewogICAgICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgfQp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1zdGFydCA+ICo6bm90KDpsYXN0LWNoaWxkKSB7CiAgICBtYXJnaW4tcmlnaHQ6IDFlbTsKfQpkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtZW5kID4gKjpub3QoOmZpcnN0LWNoaWxkKSB7CiAgICBtYXJnaW4tbGVmdDogMWVtOwp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1mdWxsIHsKICAgIHdpZHRoOiAxMDAlOwp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1mdWxsID4gKjpvbmx5LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgbWFyZ2luLXJpZ2h0OiBhdXRvOwp9CmRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC10YWJsZSA+IGRpdiB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50Owp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2N3B4KSB7CiAgICBkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtc3RhcnQgPiAqOm5vdCg6bGFzdC1jaGlsZCkgewogICAgICAgIG1hcmdpbi1yaWdodDogMDsKICAgIH0KICAgIGRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1lbmQgPiAqOm5vdCg6Zmlyc3QtY2hpbGQpIHsKICAgICAgICBtYXJnaW4tbGVmdDogMDsKICAgIH0KfQpkaXYuZHQtY29udGFpbmVyIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGNsZWFyOiBib3RoOwp9CmRpdi5kdC1jb250YWluZXIgLmR0LXNlYXJjaCBpbnB1dCB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjYWFhOwogICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgcGFkZGluZzogNXB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBjb2xvcjogaW5oZXJpdDsKICAgIG1hcmdpbi1sZWZ0OiAzcHg7Cn0KZGl2LmR0LWNvbnRhaW5lciAuZHQtaW5wdXQgewogICAgYm9yZGVyOiAxcHggc29saWQgI2FhYTsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIHBhZGRpbmc6IDVweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgY29sb3I6IGluaGVyaXQ7Cn0KZGl2LmR0LWNvbnRhaW5lciBzZWxlY3QuZHQtaW5wdXQgewogICAgcGFkZGluZzogNHB4Owp9CmRpdi5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbiB7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWluLXdpZHRoOiAxLjVlbTsKICAgIHBhZGRpbmc6IDAuNWVtIDFlbTsKICAgIG1hcmdpbi1sZWZ0OiAycHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7CiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Owp9CmRpdi5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5jdXJyZW50LApkaXYuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgLmR0LXBhZ2luZy1idXR0b24uY3VycmVudDpob3ZlciB7CiAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50OwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsKICAgIGJhY2tncm91bmQ6IC13ZWJraXQtZ3JhZGllbnQoCiAgICAgICAgbGluZWFyLAogICAgICAgIGxlZnQgdG9wLAogICAgICAgIGxlZnQgYm90dG9tLAogICAgICAgIGNvbG9yLXN0b3AoMCUsIHJnYmEoMjMwLCAyMzAsIDIzMCwgMC4wNSkpLAogICAgICAgIGNvbG9yLXN0b3AoMTAwJSwgcmdiYSgwLCAwLCAwLCAwLjA1KSkKICAgICk7CiAgICBiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIHJnYmEoMjMwLCAyMzAsIDIzMCwgMC4wNSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4wNSkgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsIHJnYmEoMjMwLCAyMzAsIDIzMCwgMC4wNSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4wNSkgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtbXMtbGluZWFyLWdyYWRpZW50KHRvcCwgcmdiYSgyMzAsIDIzMCwgMjMwLCAwLjA1KSAwJSwgcmdiYSgwLCAwLCAwLCAwLjA1KSAxMDAlKTsKICAgIGJhY2tncm91bmQ6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsIHJnYmEoMjMwLCAyMzAsIDIzMCwgMC4wNSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4wNSkgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCByZ2JhKDIzMCwgMjMwLCAyMzAsIDAuMDUpIDAlLCByZ2JhKDAsIDAsIDAsIDAuMDUpIDEwMCUpOwp9CmRpdi5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5kaXNhYmxlZCwKZGl2LmR0LWNvbnRhaW5lciAuZHQtcGFnaW5nIC5kdC1wYWdpbmctYnV0dG9uLmRpc2FibGVkOmhvdmVyLApkaXYuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgLmR0LXBhZ2luZy1idXR0b24uZGlzYWJsZWQ6YWN0aXZlIHsKICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSkgIWltcG9ydGFudDsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICBib3gtc2hhZG93OiBub25lOwp9CmRpdi5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbjpob3ZlciB7CiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMxMTE7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCBsZWZ0IGJvdHRvbSwgY29sb3Itc3RvcCgwJSwgIzU4NTg1OCksIGNvbG9yLXN0b3AoMTAwJSwgIzExMSkpOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjNTg1ODU4IDAlLCAjMTExIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjNTg1ODU4IDAlLCAjMTExIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICM1ODU4NTggMCUsICMxMTEgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjNTg1ODU4IDAlLCAjMTExIDEwMCUpOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzU4NTg1OCAwJSwgIzExMSAxMDAlKTsKfQpkaXYuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgLmR0LXBhZ2luZy1idXR0b246YWN0aXZlIHsKICAgIG91dGxpbmU6IG5vbmU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGMwYzBjOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCBsZWZ0IGJvdHRvbSwgY29sb3Itc3RvcCgwJSwgIzJiMmIyYiksIGNvbG9yLXN0b3AoMTAwJSwgIzBjMGMwYykpOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjMmIyYjJiIDAlLCAjMGMwYzBjIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjMmIyYjJiIDAlLCAjMGMwYzBjIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW1zLWxpbmVhci1ncmFkaWVudCh0b3AsICMyYjJiMmIgMCUsICMwYzBjMGMgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjMmIyYjJiIDAlLCAjMGMwYzBjIDEwMCUpOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzJiMmIyYiAwJSwgIzBjMGMwYyAxMDAlKTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAzcHggIzExMTsKfQpkaXYuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgLmVsbGlwc2lzIHsKICAgIHBhZGRpbmc6IDAgMWVtOwp9CmRpdi5kdC1jb250YWluZXIgLmR0LWxlbmd0aCwKZGl2LmR0LWNvbnRhaW5lciAuZHQtc2VhcmNoLApkaXYuZHQtY29udGFpbmVyIC5kdC1pbmZvLApkaXYuZHQtY29udGFpbmVyIC5kdC1wcm9jZXNzaW5nLApkaXYuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgewogICAgY29sb3I6IGluaGVyaXQ7Cn0KZGl2LmR0LWNvbnRhaW5lciAuZGF0YVRhYmxlc19zY3JvbGwgewogICAgY2xlYXI6IGJvdGg7Cn0KZGl2LmR0LWNvbnRhaW5lciAuZGF0YVRhYmxlc19zY3JvbGwgZGl2LmR0LXNjcm9sbC1ib2R5IHsKICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDsKfQpkaXYuZHQtY29udGFpbmVyIC5kYXRhVGFibGVzX3Njcm9sbCBkaXYuZHQtc2Nyb2xsLWJvZHkgPiB0YWJsZSA+IHRoZWFkID4gdHIgPiB0aCwKZGl2LmR0LWNvbnRhaW5lciAuZGF0YVRhYmxlc19zY3JvbGwgZGl2LmR0LXNjcm9sbC1ib2R5ID4gdGFibGUgPiB0aGVhZCA+IHRyID4gdGQsCmRpdi5kdC1jb250YWluZXIgLmRhdGFUYWJsZXNfc2Nyb2xsIGRpdi5kdC1zY3JvbGwtYm9keSA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRoLApkaXYuZHQtY29udGFpbmVyIC5kYXRhVGFibGVzX3Njcm9sbCBkaXYuZHQtc2Nyb2xsLWJvZHkgPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCB7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CmRpdi5kdC1jb250YWluZXIgLmRhdGFUYWJsZXNfc2Nyb2xsIGRpdi5kdC1zY3JvbGwtYm9keSA+IHRhYmxlID4gdGhlYWQgPiB0ciA+IHRoID4gZGl2LmRhdGFUYWJsZXNfc2l6aW5nLApkaXYuZHQtY29udGFpbmVyIC5kYXRhVGFibGVzX3Njcm9sbCBkaXYuZHQtc2Nyb2xsLWJvZHkgPiB0YWJsZSA+IHRoZWFkID4gdHIgPiB0ZCA+IGRpdi5kYXRhVGFibGVzX3NpemluZywKZGl2LmR0LWNvbnRhaW5lciAuZGF0YVRhYmxlc19zY3JvbGwgZGl2LmR0LXNjcm9sbC1ib2R5ID4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGggPiBkaXYuZGF0YVRhYmxlc19zaXppbmcsCmRpdi5kdC1jb250YWluZXIgLmRhdGFUYWJsZXNfc2Nyb2xsIGRpdi5kdC1zY3JvbGwtYm9keSA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkID4gZGl2LmRhdGFUYWJsZXNfc2l6aW5nIHsKICAgIGhlaWdodDogMDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKfQpkaXYuZHQtY29udGFpbmVyLmR0LWVtcHR5LWZvb3RlciB0Ym9keSA+IHRyOmxhc3QtY2hpbGQgPiAqIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KZGl2LmR0LWNvbnRhaW5lci5kdC1lbXB0eS1mb290ZXIgLmR0LXNjcm9sbC1ib2R5IHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KZGl2LmR0LWNvbnRhaW5lci5kdC1lbXB0eS1mb290ZXIgLmR0LXNjcm9sbC1ib2R5IHRib2R5ID4gdHI6bGFzdC1jaGlsZCA+ICogewogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsKfQpodG1sLmRhcmsgewogICAgLS1kdC1yb3ctaG92ZXI6IDI1NSwgMjU1LCAyNTU7CiAgICAtLWR0LXJvdy1zdHJpcGU6IDI1NSwgMjU1LCAyNTU7CiAgICAtLWR0LWNvbHVtbi1vcmRlcmluZzogMjU1LCAyNTUsIDI1NTsKfQpodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlID4gdGhlYWQgPiB0ciA+IHRoLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlID4gdGhlYWQgPiB0ciA+IHRkIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoODksIDkxLCA5NCk7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSA+IHRoZWFkID4gdHIgPiB0aDphY3RpdmUsCmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUgPiB0aGVhZCA+IHRyID4gdGQ6YWN0aXZlIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSA+IHRmb290ID4gdHIgPiB0aCwKaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSA+IHRmb290ID4gdHIgPiB0ZCB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDg5LCA5MSwgOTQpOwp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUucm93LWJvcmRlciA+IHRib2R5ID4gdHIgPiAqLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyID4gKiB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDY0LCA2NywgNzApOwp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUucm93LWJvcmRlciA+IHRib2R5ID4gdHI6Zmlyc3QtY2hpbGQgPiAqLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyOmZpcnN0LWNoaWxkID4gKiB7CiAgICBib3JkZXItdG9wOiBub25lOwp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUucm93LWJvcmRlciA+IHRib2R5ID4gdHIuc2VsZWN0ZWQgKyB0ci5zZWxlY3RlZCA+IHRkLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlLmRpc3BsYXkgPiB0Ym9keSA+IHRyLnNlbGVjdGVkICsgdHIuc2VsZWN0ZWQgPiB0ZCB7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKDEzLCAxMTAsIDI1MywgMC42NSk7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKHZhcigtLWR0LXJvdy1zZWxlY3RlZCksIDAuNjUpOwp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUuY2VsbC1ib3JkZXIgPiB0Ym9keSA+IHRyID4gdGgsCmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUuY2VsbC1ib3JkZXIgPiB0Ym9keSA+IHRyID4gdGQgewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYig2NCwgNjcsIDcwKTsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYig2NCwgNjcsIDcwKTsKfQpodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlLmNlbGwtYm9yZGVyID4gdGJvZHkgPiB0ciA+IHRoOmZpcnN0LWNoaWxkLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlLmNlbGwtYm9yZGVyID4gdGJvZHkgPiB0ciA+IHRkOmZpcnN0LWNoaWxkIHsKICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgcmdiKDY0LCA2NywgNzApOwp9Cmh0bWwuZGFyayAuZHQtY29udGFpbmVyLmR0LWVtcHR5LWZvb3RlciB0YWJsZS5kYXRhVGFibGUgewogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYig4OSwgOTEsIDk0KTsKfQpodG1sLmRhcmsgLmR0LWNvbnRhaW5lciAuZHQtc2VhcmNoIGlucHV0LApodG1sLmRhcmsgLmR0LWNvbnRhaW5lciAuZHQtbGVuZ3RoIHNlbGVjdCB7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kdC1odG1sLWJhY2tncm91bmQpOwp9Cmh0bWwuZGFyayAuZHQtY29udGFpbmVyIC5kdC1wYWdpbmcgLmR0LXBhZ2luZy1idXR0b24uY3VycmVudCwKaHRtbC5kYXJrIC5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5jdXJyZW50OmhvdmVyIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYig4OSwgOTEsIDk0KTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIC5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5kaXNhYmxlZCwKaHRtbC5kYXJrIC5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5kaXNhYmxlZDpob3ZlciwKaHRtbC5kYXJrIC5kdC1jb250YWluZXIgLmR0LXBhZ2luZyAuZHQtcGFnaW5nLWJ1dHRvbi5kaXNhYmxlZDphY3RpdmUgewogICAgY29sb3I6ICM2NjYgIWltcG9ydGFudDsKfQpodG1sLmRhcmsgLmR0LWNvbnRhaW5lciAuZHQtcGFnaW5nIC5kdC1wYWdpbmctYnV0dG9uOmhvdmVyIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYig1MywgNTMsIDUzKTsKICAgIGJhY2tncm91bmQ6IHJnYig1MywgNTMsIDUzKTsKfQpodG1sLmRhcmsgLmR0LWNvbnRhaW5lciAuZHQtcGFnaW5nIC5kdC1wYWdpbmctYnV0dG9uOmFjdGl2ZSB7CiAgICBiYWNrZ3JvdW5kOiAjM2EzYTNhOwp9CipbZGlyPSdydGwnXSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGgsCipbZGlyPSdydGwnXSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQsCipbZGlyPSdydGwnXSB0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGgsCipbZGlyPSdydGwnXSB0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KKltkaXI9J3J0bCddIHRhYmxlLmRhdGFUYWJsZSB0aC5kdC10eXBlLW51bWVyaWMsCipbZGlyPSdydGwnXSB0YWJsZS5kYXRhVGFibGUgdGguZHQtdHlwZS1kYXRlLAoqW2Rpcj0ncnRsJ10gdGFibGUuZGF0YVRhYmxlIHRkLmR0LXR5cGUtbnVtZXJpYywKKltkaXI9J3J0bCddIHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC10eXBlLWRhdGUgewogICAgdGV4dC1hbGlnbjogbGVmdDsKfQoqW2Rpcj0ncnRsJ10gZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LWNlbGwuZHQtc3RhcnQgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KKltkaXI9J3J0bCddIGRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1jZWxsLmR0LWVuZCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CipbZGlyPSdydGwnXSBkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1zZWFyY2ggaW5wdXQgewogICAgbWFyZ2luOiAwIDNweCAwIDA7Cn0KCmh0bWwuZGFyayBkaXYuRFRFRF9MaWdodGJveF9DbG9zZTphZnRlciB7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpICFpbXBvcnRhbnQ7Cn0KaHRtbC5kYXJrIGRpdi5EVEVEX0xpZ2h0Ym94X0Nsb3NlOmhvdmVyOmFmdGVyIHsKICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Owp9CmRpdi5EVEUgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CmRpdi5EVEUgZGl2LkRURV9IZWFkZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIGhlaWdodDogNTJweDsKICAgIHdpZHRoOiAxMDAlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZTllYjsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgcGFkZGluZzogMTZweCAxMHB4IDJweCAxNnB4OwogICAgZm9udC1zaXplOiAxLjNlbTsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KZGl2LkRURSBkaXYuRFRFX0JvZHkgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CmRpdi5EVEUgZGl2LkRURV9Gb290ZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwOwogICAgbGVmdDogMDsKICAgIGhlaWdodDogNTJweDsKICAgIHdpZHRoOiAxMDAlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZTllYjsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgcGFkZGluZzogMTBweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KZGl2LkRURSBkaXYuRFRFX0Zvcm1fSW5mbyB7CiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KZGl2LkRURSBkaXYuRFRFX0Zvcm1fQ29udGVudCB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBwYWRkaW5nOiAxZW07Cn0KZGl2LkRURSBkaXYuRFRFX0Zvcm1fRXJyb3IgewogICAgZmxvYXQ6IGxlZnQ7CiAgICBwYWRkaW5nOiA1cHg7CiAgICBkaXNwbGF5OiBub25lOwogICAgY29sb3I6IHJnYigyMjAsIDUzLCA2OSk7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9CmRpdi5EVEUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Cn0KZGl2LkRURSBidXR0b24uYnRuLApkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbiB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1hcmdpbi10b3A6IDA7CiAgICBwYWRkaW5nOiAwLjVlbSAxZW07CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBtYXJnaW4tbGVmdDogMC43NWVtOwogICAgY29sb3I6ICMxMTE7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBsaW5lLWhlaWdodDogMWVtOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAjY2NjOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2RjZGNkYzsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZmZmZmZiAwJSwgI2RjZGNkYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZmZmZmZiAwJSwgI2RjZGNkYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQodG9wLCAjZmZmZmZmIDAlLCAjZGNkY2RjIDEwMCUpOwogICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZmZmZmZiAwJSwgI2RjZGNkYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNmZmZmZmYgMCUsICNkY2RjZGMgMTAwJSk7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChHcmFkaWVudFR5cGU9MCxTdGFydENvbG9yU3RyPSIjZmZmZmZmIiwgRW5kQ29sb3JTdHI9IiNkY2RjZGMiKTsKfQpkaXYuRFRFIGJ1dHRvbi5idG46aG92ZXIsCmRpdi5EVEUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgYnV0dG9uOmhvdmVyIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM2NjY7CiAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAjOTk5OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2VhZWFlYSAwJSwgI2NjY2NjYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2VhZWFlYSAwJSwgI2NjY2NjYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQodG9wLCAjZWFlYWVhIDAlLCAjY2NjY2NjIDEwMCUpOwogICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI2VhZWFlYSAwJSwgI2NjY2NjYyAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNlYWVhZWEgMCUsICNjY2NjY2MgMTAwJSk7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChHcmFkaWVudFR5cGU9MCxTdGFydENvbG9yU3RyPSIjZWFlYWVhIiwgRW5kQ29sb3JTdHI9IiNjY2NjY2MiKTsKfQpkaXYuRFRFIGJ1dHRvbi5idG46YWN0aXZlLApkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbjphY3RpdmUgewogICAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAzcHggIzk5OTsKfQpkaXYuRFRFIGJ1dHRvbi5idG46Zm9jdXMsCmRpdi5EVEUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgYnV0dG9uOmZvY3VzIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM0MjZjOWU7CiAgICB0ZXh0LXNoYWRvdzogMCAxcHggMCAjYzRkZWYxOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzc5YWNlOTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2JkZGVmNCAwJSwgIzc5YWNlOSAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2JkZGVmNCAwJSwgIzc5YWNlOSAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQodG9wLCAjYmRkZWY0IDAlLCAjNzlhY2U5IDEwMCUpOwogICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI2JkZGVmNCAwJSwgIzc5YWNlOSAxMDAlKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNiZGRlZjQgMCUsICM3OWFjZTkgMTAwJSk7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChHcmFkaWVudFR5cGU9MCxTdGFydENvbG9yU3RyPSIjYmRkZWY0IiwgRW5kQ29sb3JTdHI9IiM3OWFjZTkiKTsKICAgIG91dGxpbmU6IG5vbmU7Cn0KZGl2LkRURSBidXR0b24uYnRuOmZvY3VzOmFmdGVyLApkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbjpmb2N1czphZnRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDA7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgY29udGVudDogJyAnOwogICAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDFzOwogICAgLXdlYmtpdC1hbmltYXRpb24tbmFtZTogYnV0dG9uUHVsc2U7CiAgICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzOwogICAgLXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTsKICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyOwogICAgLXdlYmtpdC1hbmltYXRpb24tZGlyZWN0aW9uOiBhbHRlcm5hdGU7CiAgICAtbW96LWFuaW1hdGlvbi1kdXJhdGlvbjogMXM7CiAgICAtbW96LWFuaW1hdGlvbi1uYW1lOiBidXR0b25QdWxzZTsKICAgIC1tb3otYW5pbWF0aW9uLWZpbGwtbW9kZTogZm9yd2FyZHM7CiAgICAtbW96LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOwogICAgLW1vei1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7CiAgICAtbW96LWFuaW1hdGlvbi1kaXJlY3Rpb246IGFsdGVybmF0ZTsKICAgIC1vLWFuaW1hdGlvbi1kdXJhdGlvbjogMXM7CiAgICAtby1hbmltYXRpb24tbmFtZTogYnV0dG9uUHVsc2U7CiAgICAtby1hbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkczsKICAgIC1vLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOwogICAgLW8tYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyOwogICAgLW8tYW5pbWF0aW9uLWRpcmVjdGlvbjogYWx0ZXJuYXRlOwogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxczsKICAgIGFuaW1hdGlvbi1uYW1lOiBidXR0b25QdWxzZTsKICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzOwogICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7CiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7CiAgICBhbmltYXRpb24tZGlyZWN0aW9uOiBhbHRlcm5hdGU7Cn0KZGl2LkRURS5EVEVfQWN0aW9uX1JlbW92ZSBkaXYuRFRFX0JvZHlfQ29udGVudCB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAyMHB4IDA7Cn0KQC13ZWJraXQta2V5ZnJhbWVzIGJ1dHRvblB1bHNlIHsKICAgIDAlIHsKICAgICAgICBvcGFjaXR5OiAwOwogICAgfQogICAgMTAwJSB7CiAgICAgICAgb3BhY2l0eTogMC4yOwogICAgfQp9CkAtbW96LWtleWZyYW1lcyBidXR0b25QdWxzZSB7CiAgICAwJSB7CiAgICAgICAgb3BhY2l0eTogMDsKICAgIH0KICAgIDEwMCUgewogICAgICAgIG9wYWNpdHk6IDAuMjsKICAgIH0KfQpALW8ta2V5ZnJhbWVzIGJ1dHRvblB1bHNlIHsKICAgIDAlIHsKICAgICAgICBvcGFjaXR5OiAwOwogICAgfQogICAgMTAwJSB7CiAgICAgICAgb3BhY2l0eTogMC4yOwogICAgfQp9CkBrZXlmcmFtZXMgYnV0dG9uUHVsc2UgewogICAgMCUgewogICAgICAgIG9wYWNpdHk6IDA7CiAgICB9CiAgICAxMDAlIHsKICAgICAgICBvcGFjaXR5OiAwLjI7CiAgICB9Cn0KZGl2LkRUVFRfY29udGFpbmVyIHsKICAgIGZsb2F0OiBsZWZ0Owp9Cmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfSGVhZGVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwp9Cmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfRm9vdGVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwp9Cmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfRm9ybV9FcnJvciB7CiAgICBjb2xvcjogcmdiKDIyMCwgNTMsIDY5KTsKfQpodG1sLmRhcmsgZGl2LkRURSBidXR0b24uYnRuLApodG1sLmRhcmsgZGl2LkRURSBkaXYuRFRFX0Zvcm1fQnV0dG9ucyBidXR0b24gewogICAgYm94LXNoYWRvdzogbm9uZTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKICAgIGNvbG9yOiBpbmhlcml0Owp9Cmh0bWwuZGFyayBkaXYuRFRFIGJ1dHRvbi5idG46aG92ZXIsCmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7Cn0KaHRtbC5kYXJrIGRpdi5EVEUgYnV0dG9uLmJ0bjphY3RpdmUsCmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbjphY3RpdmUgewogICAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAzcHggIzFkMWQxZDsKfQpodG1sLmRhcmsgZGl2LkRURSBidXR0b24uYnRuOmZvY3VzLApodG1sLmRhcmsgZGl2LkRURSBkaXYuRFRFX0Zvcm1fQnV0dG9ucyBidXR0b246Zm9jdXMgewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI1KTsKICAgIHRleHQtc2hhZG93OiBub25lOwogICAgYmFja2dyb3VuZDogcmdiKDAsIDgxLCAyMDIpOwogICAgY29sb3I6IHdoaXRlOwp9Cmh0bWwuZGFyayBkaXYuRFRFIGJ1dHRvbi5idG46Zm9jdXM6YWZ0ZXIsCmh0bWwuZGFyayBkaXYuRFRFIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbjpmb2N1czphZnRlciB7CiAgICBiYWNrZ3JvdW5kOiBub25lOwp9CmRpdi5EVEVfRmllbGQgaW5wdXQsCmRpdi5EVEVfRmllbGQgdGV4dGFyZWEgewogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIGVhc2UtaW4tb3V0IDAuMTVzOwogICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciBlYXNlLWluLW91dCAwLjE1czsKfQpkaXYuRFRFX0ZpZWxkIGlucHV0OmZvY3VzLApkaXYuRFRFX0ZpZWxkIHRleHRhcmVhOmZvY3VzIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmU7Cn0KZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdjb2xvciddLApkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGUnXSwKZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdkYXRldGltZSddLApkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sCmRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZW1haWwnXSwKZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdtb250aCddLApkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J251bWJlciddLApkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sCmRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nc2VhcmNoJ10sCmRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGVsJ10sCmRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGV4dCddLApkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3RpbWUnXSwKZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd1cmwnXSwKZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd3ZWVrJ10gewogICAgcGFkZGluZzogNXB4IDRweDsKICAgIHdpZHRoOiAxMDAlOwogICAgYm9yZGVyOiAxcHggc29saWQgI2FhYTsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQpkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2NoZWNrYm94J10sCmRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ncmFkaW8nXSB7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CmRpdi5EVEVfRmllbGQgc2VsZWN0IHsKICAgIHBhZGRpbmc6IDVweCA0cHg7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjYWFhOwogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBjb2xvcjogaW5oZXJpdDsKfQpkaXYuRFRFX0ZpZWxkIGxhYmVsIGRpdi5EVEVfTGFiZWxfSW5mbyB7CiAgICBmb250LXNpemU6IDAuODVlbTsKICAgIG1hcmdpbi10b3A6IDAuMjVlbTsKfQpkaXYuRFRFX0ZpZWxkIGxhYmVsIGRpdi5EVEVfTGFiZWxfSW5mbzplbXB0eSB7CiAgICBtYXJnaW4tdG9wOiAwOwp9CmRpdi5EVEVfRmllbGQgZGl2LkRURV9GaWVsZF9JbmZvLApkaXYuRFRFX0ZpZWxkIGRpdi5EVEVfRmllbGRfTWVzc2FnZSwKZGl2LkRURV9GaWVsZCBkaXYuRFRFX0ZpZWxkX0Vycm9yIHsKICAgIGZvbnQtc2l6ZTogMTFweDsKICAgIGxpbmUtaGVpZ2h0OiAxZW07CiAgICBtYXJnaW4tdG9wOiA1cHg7Cn0KZGl2LkRURV9GaWVsZCBkaXYuRFRFX0ZpZWxkX0luZm86ZW1wdHksCmRpdi5EVEVfRmllbGQgZGl2LkRURV9GaWVsZF9NZXNzYWdlOmVtcHR5LApkaXYuRFRFX0ZpZWxkIGRpdi5EVEVfRmllbGRfRXJyb3I6ZW1wdHkgewogICAgbWFyZ2luLXRvcDogMDsKfQpkaXYuRFRFX0ZpZWxkIGRpdi5EVEVfRmllbGRfRXJyb3IgewogICAgZGlzcGxheTogbm9uZTsKICAgIGNvbG9yOiAjYjExZjFmOwp9CmRpdi5EVEVfRmllbGQgZGl2Lm11bHRpLXZhbHVlIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgICBib3JkZXI6IDFweCBkb3R0ZWQgIzY2NjsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIHBhZGRpbmc6IDVweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KZGl2LkRURV9GaWVsZCBkaXYubXVsdGktdmFsdWUgc3BhbiB7CiAgICBmb250LXNpemU6IDAuOGVtOwogICAgbGluZS1oZWlnaHQ6IDEuMjVlbTsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgY29sb3I6ICM2NjY7Cn0KZGl2LkRURV9GaWVsZCBkaXYubXVsdGktdmFsdWUubXVsdGktbm9FZGl0IHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7CiAgICBjdXJzb3I6IGF1dG87CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmY2ZjOwp9CmRpdi5EVEVfRmllbGQgZGl2Lm11bHRpLXZhbHVlLm11bHRpLW5vRWRpdDpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmY2ZjOwp9CmRpdi5EVEVfRmllbGQgZGl2Lm11bHRpLXZhbHVlOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7Cn0KZGl2LkRURV9GaWVsZC5kaXNhYmxlZCB7CiAgICBjb2xvcjogZ3JleTsKfQpkaXYuRFRFX0ZpZWxkLmRpc2FibGVkIGRpdi5tdWx0aS12YWx1ZSB7CiAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICBib3JkZXI6IDFweCBkb3R0ZWQgI2FhYTsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CmRpdi5EVEVfRmllbGQgZGl2Lm11bHRpLXJlc3RvcmUgewogICAgZGlzcGxheTogbm9uZTsKICAgIG1hcmdpbi10b3A6IDAuNWVtOwogICAgZm9udC1zaXplOiAwLjhlbTsKICAgIGxpbmUtaGVpZ2h0OiAxLjI1ZW07CiAgICBjb2xvcjogIzM4NzlkOTsKfQpkaXYuRFRFX0ZpZWxkIGRpdi5tdWx0aS1yZXN0b3JlOmhvdmVyIHsKICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CmRpdi5EVEVfRmllbGRfVHlwZV90ZXh0YXJlYSB0ZXh0YXJlYSB7CiAgICBwYWRkaW5nOiAzcHg7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogODBweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBtYXgtaGVpZ2h0OiA3NXZoOwp9CmRpdi5EVEVfRmllbGQuRFRFX0ZpZWxkX1R5cGVfZGF0ZSBpbWcgewogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfY2hlY2tib3ggZGl2LkRURV9GaWVsZF9JbnB1dCwKZGl2LkRURV9GaWVsZF9UeXBlX3JhZGlvIGRpdi5EVEVfRmllbGRfSW5wdXQgewogICAgcGFkZGluZy10b3A6IDFweDsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfY2hlY2tib3ggZGl2LkRURV9GaWVsZF9JbnB1dCA+IGRpdiA+IGRpdiwKZGl2LkRURV9GaWVsZF9UeXBlX3JhZGlvIGRpdi5EVEVfRmllbGRfSW5wdXQgPiBkaXYgPiBkaXYgewogICAgbWFyZ2luLWJvdHRvbTogMC4yNWVtOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9jaGVja2JveCBkaXYuRFRFX0ZpZWxkX0lucHV0ID4gZGl2ID4gZGl2Omxhc3QtY2hpbGQsCmRpdi5EVEVfRmllbGRfVHlwZV9yYWRpbyBkaXYuRFRFX0ZpZWxkX0lucHV0ID4gZGl2ID4gZGl2Omxhc3QtY2hpbGQgewogICAgbWFyZ2luLWJvdHRvbTogMDsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfY2hlY2tib3ggZGl2LkRURV9GaWVsZF9JbnB1dCA+IGRpdiA+IGRpdiBsYWJlbCwKZGl2LkRURV9GaWVsZF9UeXBlX3JhZGlvIGRpdi5EVEVfRmllbGRfSW5wdXQgPiBkaXYgPiBkaXYgbGFiZWwgewogICAgbWFyZ2luLWxlZnQ6IDAuNzVlbTsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZHQtbGF5b3V0LXJvdzpudGgtY2hpbGQoMikgPiBkaXYuZHQtbGF5b3V0LWNlbGwgewogICAgcGFkZGluZy10b3A6IDA7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZHQtaW5mbywKZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZGF0YVRhYmxlc19pbmZvIHsKICAgIGZvbnQtc2l6ZTogMC44ZW07CiAgICBsaW5lLWhlaWdodDogMS4zZW07CiAgICBwYWRkaW5nLXJpZ2h0OiAxZW07CiAgICBwYWRkaW5nLWJvdHRvbTogMC41ZW07CiAgICBvcGFjaXR5OiAwLjg7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZHQtaW5mbyBzcGFuLnNlbGVjdC1pbmZvLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX2luZm8gc3Bhbi5zZWxlY3QtaW5mbyB7CiAgICBkaXNwbGF5OiBibG9jazsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kdC1zZWFyY2ggewogICAgbWFyZ2luLXRvcDogNHB4Owp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmR0LXNlYXJjaCwKZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZGF0YVRhYmxlc19maWx0ZXIgewogICAgcGFkZGluZy1yaWdodDogMWVtOwogICAgcGFkZGluZy1ib3R0b206IDAuNWVtOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmR0LXNlYXJjaCBpbnB1dCwKZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZGF0YVRhYmxlc19maWx0ZXIgaW5wdXQgewogICAgd2lkdGg6IDEwMCU7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZHQtYnV0dG9ucyB7CiAgICBwYWRkaW5nLXJpZ2h0OiAxZW07CiAgICBwYWRkaW5nLWJvdHRvbTogMC41ZW07CiAgICBmbG9hdDogbm9uZTsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kdC1idXR0b25zIGJ1dHRvbiB7CiAgICB3aWR0aDogMTAwJTsKICAgIG1hcmdpbi1sZWZ0OiAwOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmR0LWJ1dHRvbnM6ZW1wdHkgewogICAgcGFkZGluZy1ib3R0b206IDA7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZGF0YVRhYmxlc19wYWdpbmF0ZSB7CiAgICBmbG9hdDogbm9uZTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogMC44ZW07Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUubm8tZm9vdGVyIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjYWFhICFpbXBvcnRhbnQ7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGgsCmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRkIHsKICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICBwYWRkaW5nLXRvcDogM3B4OwogICAgcGFkZGluZy1ib3R0b206IDNweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjYWFhOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRib2R5IHsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRib2R5IHRoOmZpcnN0LWNoaWxkLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZDpmaXJzdC1jaGlsZCB7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNhYWE7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGg6bGFzdC1jaGlsZCwKZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQ6bGFzdC1jaGlsZCB7CiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjYWFhOwp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZCB7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgcGFkZGluZy10b3A6IDNweDsKICAgIHBhZGRpbmctYm90dG9tOiAzcHg7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2FhYTsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX3Njcm9sbEhlYWQgdGFibGUuZGF0YVRhYmxlLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX3Njcm9sbEhlYWQgdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX3Njcm9sbEhlYWQgdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRkIHsKICAgIGJvcmRlci1ib3R0b206IG5vbmUgIWltcG9ydGFudDsKfQpkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHkgewogICAgYm9yZGVyOiAxcHggc29saWQgI2FhYSAhaW1wb3J0YW50OwogICAgYm9yZGVyLXJhZGl1czogM3B4Owp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB0YWJsZS5kYXRhVGFibGUgewogICAgYm9yZGVyLWJvdHRvbTogbm9uZSAhaW1wb3J0YW50Owp9CmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGg6Zmlyc3QtY2hpbGQsCmRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQ6Zmlyc3QtY2hpbGQgewogICAgYm9yZGVyLWxlZnQ6IG5vbmU7Cn0KZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSBkaXYuZGF0YVRhYmxlc19zY3JvbGxCb2R5IHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aDpsYXN0LWNoaWxkLApkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIGRpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHkgdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkOmxhc3QtY2hpbGQgewogICAgYm9yZGVyLXJpZ2h0OiBub25lOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0LApodG1sLmRhcmsgZGl2LkRURV9GaWVsZCB0ZXh0YXJlYSB7CiAgICBjb2xvcjogaW5oZXJpdDsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigzMywgMzcsIDQxKTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBpbnB1dDpmb2N1cywKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgdGV4dGFyZWE6Zm9jdXMgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0LCAzMCwgMzYpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2NvbG9yJ10sCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGUnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZGF0ZXRpbWUnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZW1haWwnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nbW9udGgnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nbnVtYmVyJ10sCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3NlYXJjaCddLApodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd0ZWwnXSwKaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGV4dCddLApodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd0aW1lJ10sCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3VybCddLApodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd3ZWVrJ10gewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBzZWxlY3QgewogICAgYmFja2dyb3VuZDogcmdiKDMzLCAzNywgNDEpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGRpdi5EVEVfRmllbGRfRXJyb3IgewogICAgY29sb3I6ICNiMTFmMWY7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGQgZGl2Lm11bHRpLXZhbHVlIHsKICAgIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBkaXYubXVsdGktdmFsdWUgc3BhbiB7CiAgICBjb2xvcjogI2I5YjliOTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBkaXYubXVsdGktdmFsdWUubXVsdGktbm9FZGl0IHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkIGRpdi5tdWx0aS12YWx1ZS5tdWx0aS1ub0VkaXQ6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBkaXYubXVsdGktdmFsdWU6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkLmRpc2FibGVkIHsKICAgIGNvbG9yOiBncmV5Owp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkLmRpc2FibGVkIGRpdi5tdWx0aS12YWx1ZSB7CiAgICBib3JkZXI6IDFweCBkb3R0ZWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZCBkaXYubXVsdGktcmVzdG9yZSB7CiAgICBjb2xvcjogcmdiKDExMCwgMTY4LCAyNTQpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkX1R5cGVfdGV4dGFyZWEgdGV4dGFyZWEgewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUubm8tZm9vdGVyIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpICFpbXBvcnRhbnQ7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLApodG1sLmRhcmsgZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQgewogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRib2R5IHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigzMywgMzcsIDQxKTsKfQpodG1sLmRhcmsgZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGg6Zmlyc3QtY2hpbGQsCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZDpmaXJzdC1jaGlsZCB7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRib2R5IHRoOmxhc3QtY2hpbGQsCmh0bWwuZGFyayBkaXYuRFRFX0ZpZWxkX1R5cGVfZGF0YXRhYmxlIHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZDpsYXN0LWNoaWxkIHsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLApodG1sLmRhcmsgZGl2LkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZSB0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQgewogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfRmllbGRfVHlwZV9kYXRhdGFibGUgZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpICFpbXBvcnRhbnQ7Cn0KZGl2LkRURV9Cb2R5IHsKICAgIHBhZGRpbmc6IDUycHggMDsKfQpkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgb3ZlcmZsb3c6IGF1dG87Cn0KZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRm9ybV9JbmZvIHsKICAgIHBhZGRpbmc6IDFlbSAxZW0gMCAxZW07CiAgICBtYXJnaW46IDA7Cn0KZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgY2xlYXI6IGJvdGg7CiAgICBwYWRkaW5nOiA1cHggMTAlOwogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQ6YWZ0ZXIgewogICAgZGlzcGxheTogYmxvY2s7CiAgICBjb250ZW50OiAnLic7CiAgICBoZWlnaHQ6IDA7CiAgICBsaW5lLWhlaWdodDogMDsKICAgIGNsZWFyOiBib3RoOwogICAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CmRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZjNmM2YzOwp9CmRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkID4gbGFiZWwgewogICAgZmxvYXQ6IGxlZnQ7CiAgICB3aWR0aDogMzMlOwogICAgcGFkZGluZy10b3A6IDNweDsKfQpkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCA+IGRpdi5EVEVfRmllbGRfSW5wdXQgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgd2lkdGg6IDY2JTsKfQpkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZC5mdWxsIHsKICAgIHBhZGRpbmc6IDVweCAwOwp9CmRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkLmJsb2NrID4gZGl2LkRURV9GaWVsZF9JbnB1dCB7CiAgICBmbG9hdDogbm9uZTsKICAgIGNsZWFyOiBib3RoOwogICAgd2lkdGg6IDEwMCU7Cn0KaHRtbFtkaXI9J3J0bCddIGRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkID4gbGFiZWwgewogICAgZmxvYXQ6IHJpZ2h0Owp9Cmh0bWxbZGlyPSdydGwnXSBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCA+IGRpdi5EVEVfRmllbGRfSW5wdXQgewogICAgZmxvYXQ6IGxlZnQ7Cn0KaHRtbFtkaXI9J3J0bCddIGRpdi5EVEUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgYnV0dG9uIHsKICAgIGZsb2F0OiBsZWZ0Owp9Cmh0bWwuZGFyayBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZDpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDEpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsKfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCB7CiAgICAgICAgcGFkZGluZzogNXB4IDEwJTsKICAgIH0KICAgIGRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkLmZ1bGwgewogICAgICAgIHBhZGRpbmc6IDVweCAwOwogICAgfQogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuZnVsbCA+IGxhYmVsIHsKICAgICAgICB3aWR0aDogMzUuNSU7CiAgICB9CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZC5mdWxsID4gZGl2LkRURV9GaWVsZF9JbnB1dCB7CiAgICAgICAgd2lkdGg6IDY0LjUlOwogICAgfQogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuYmxvY2sgPiBkaXYuRFRFX0ZpZWxkX0lucHV0IHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDY0MHB4KSB7CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCB7CiAgICAgICAgcGFkZGluZzogNXB4IDA7CiAgICB9CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZC5mdWxsIHsKICAgICAgICBwYWRkaW5nOiA1cHggMDsKICAgIH0KICAgIGRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkLmZ1bGwgPiBsYWJlbCB7CiAgICAgICAgd2lkdGg6IDQwJTsKICAgIH0KICAgIGRpdi5EVEVfQm9keSBkaXYuRFRFX0JvZHlfQ29udGVudCBkaXYuRFRFX0ZpZWxkLmZ1bGwgPiBkaXYuRFRFX0ZpZWxkX0lucHV0IHsKICAgICAgICB3aWR0aDogNjAlOwogICAgfQogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuYmxvY2sgPiBkaXYuRFRFX0ZpZWxkX0lucHV0IHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU4MHB4KSB7CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCB7CiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIGNsZWFyOiBib3RoOwogICAgICAgIHBhZGRpbmc6IDVweCAwOwogICAgfQogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQgPiBsYWJlbCB7CiAgICAgICAgZmxvYXQ6IG5vbmU7CiAgICAgICAgd2lkdGg6IGF1dG87CiAgICAgICAgcGFkZGluZy10b3A6IDA7CiAgICB9CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZCA+IGRpdi5EVEVfRmllbGRfSW5wdXQgewogICAgICAgIGZsb2F0OiBub25lOwogICAgICAgIHdpZHRoOiBhdXRvOwogICAgICAgIG1hcmdpbi10b3A6IDRweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICB9CiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZC5mdWxsLAogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuYmxvY2sgewogICAgICAgIHBhZGRpbmc6IDVweCAwOwogICAgfQogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuZnVsbCA+IGxhYmVsLAogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuZnVsbCA+IGRpdi5EVEVfRmllbGRfSW5wdXQsCiAgICBkaXYuRFRFX0JvZHkgZGl2LkRURV9Cb2R5X0NvbnRlbnQgZGl2LkRURV9GaWVsZC5ibG9jayA+IGxhYmVsLAogICAgZGl2LkRURV9Cb2R5IGRpdi5EVEVfQm9keV9Db250ZW50IGRpdi5EVEVfRmllbGQuYmxvY2sgPiBkaXYuRFRFX0ZpZWxkX0lucHV0IHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgIH0KfQpkaXYuRFRFX0J1YmJsZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB6LWluZGV4OiAxMTsKICAgIG1hcmdpbi10b3A6IC02cHg7CiAgICBvcGFjaXR5OiAwOwogICAgdHJhbnNpdGlvbjogdG9wIDAuNXMgZWFzZS1pbi1vdXQgMHM7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgYm90dG9tOiAwOwogICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7CiAgICBtaW4td2lkdGg6IDMwMHB4OwogICAgbWFyZ2luLWxlZnQ6IC0xNTBweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgYm94LXNoYWRvdzogMCAxMnB4IDMwcHggMCByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNjY2OwogICAgcGFkZGluZzogMWVtOwogICAgYmFja2dyb3VuZDogI2ZjZmNmYzsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgewogICAgd2lkdGg6IDEwMCU7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgPiBmb3JtIGRpdi5EVEVfRm9ybV9Db250ZW50IHsKICAgIHBhZGRpbmc6IDA7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgPiBmb3JtIGRpdi5EVEVfRm9ybV9Db250ZW50IGRpdi5EVEVfRmllbGQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgbWFyZ2luLWJvdHRvbTogMC41ZW07Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgPiBmb3JtIGRpdi5EVEVfRm9ybV9Db250ZW50IGRpdi5EVEVfRmllbGQ6bGFzdC1jaGlsZCB7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9CmRpdi5EVEVfQnViYmxlIGRpdi5EVEVfQnViYmxlX0xpbmVyIGRpdi5EVEVfQnViYmxlX1RhYmxlID4gZm9ybSBkaXYuRFRFX0Zvcm1fQ29udGVudCBkaXYuRFRFX0ZpZWxkID4gbGFiZWwgewogICAgcGFkZGluZy10b3A6IDA7CiAgICBtYXJnaW4tYm90dG9tOiAwOwp9CmRpdi5EVEVfQnViYmxlIGRpdi5EVEVfQnViYmxlX0xpbmVyIGRpdi5EVEVfQnViYmxlX1RhYmxlID4gZm9ybSBkaXYuRFRFX0Zvcm1fQ29udGVudCBkaXYuRFRFX0ZpZWxkID4gZGl2IHsKICAgIHBhZGRpbmc6IDA7CiAgICBtYXJnaW4tdG9wOiAwLjVlbTsKfQpkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0J1YmJsZV9UYWJsZSA+IGZvcm0gZGl2LkRURV9Gb3JtX0NvbnRlbnQgZGl2LkRURV9GaWVsZCA+IGRpdiBpbnB1dCB7CiAgICBtYXJnaW46IDA7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICBtYXJnaW4tdG9wOiAxZW07Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfVGFibGUgZGl2LkRURV9Gb3JtX0J1dHRvbnMgYnV0dG9uIHsKICAgIG1hcmdpbi1ib3R0b206IDA7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9IZWFkZXIgewogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNXB4OwogICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDVweDsKfQpkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0hlYWRlciArIGRpdi5EVEVfRm9ybV9JbmZvLApkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0hlYWRlciArIGRpdi5EVEVfQnViYmxlX1RhYmxlIHsKICAgIHBhZGRpbmctdG9wOiAxZW07Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9Gb3JtX0Vycm9yIHsKICAgIGZsb2F0OiBub25lOwogICAgZGlzcGxheTogbm9uZTsKICAgIHBhZGRpbmc6IDA7CiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsKfQpkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0J1YmJsZV9DbG9zZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDE5cHg7CiAgICByaWdodDogMTlweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHotaW5kZXg6IDEyOwogICAgdG9wOiA2cHg7CiAgICByaWdodDogNnB4OwogICAgbGluZS1oZWlnaHQ6IDE4cHg7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfQ2xvc2U6YWZ0ZXIgewogICAgY29udGVudDogJ8OXJzsKICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGZvbnQtc2l6ZTogMjJweDsKICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBDb3VyaWVyLCBtb25vc3BhY2U7Cn0KZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfQ2xvc2U6aG92ZXI6YWZ0ZXIgewogICAgY29sb3I6IGJsYWNrOwp9CmRpdi5EVEVfQnViYmxlIGRpdi5EVEVfQnViYmxlX1RyaWFuZ2xlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGhlaWdodDogMTBweDsKICAgIHdpZHRoOiAxMHB4OwogICAgdG9wOiAtNnB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNjY2OwogICAgYm9yZGVyLXRvcDogbm9uZTsKICAgIGJvcmRlci1yaWdodDogbm9uZTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsKICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsKICAgIC1tcy10cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpOwogICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsKICAgIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7Cn0KZGl2LkRURV9CdWJibGUuYmVsb3cgZGl2LkRURV9CdWJibGVfTGluZXIgewogICAgdG9wOiAxMHB4OwogICAgYm90dG9tOiBhdXRvOwp9CmRpdi5EVEVfQnViYmxlLmJlbG93IGRpdi5EVEVfQnViYmxlX1RyaWFuZ2xlIHsKICAgIHRvcDogNHB4OwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgxMzVkZWcpOwogICAgLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgxMzVkZWcpOwogICAgLW1zLXRyYW5zZm9ybTogcm90YXRlKDEzNWRlZyk7CiAgICAtby10cmFuc2Zvcm06IHJvdGF0ZSgxMzVkZWcpOwogICAgdHJhbnNmb3JtOiByb3RhdGUoMTM1ZGVnKTsKfQpkaXYuRFRFX0J1YmJsZV9CYWNrZ3JvdW5kIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTsKICAgIGJhY2tncm91bmQ6IC1tcy1yYWRpYWwtZ3JhZGllbnQoY2VudGVyLCBlbGxpcHNlIGZhcnRoZXN0LWNvcm5lciwgcmdiYSgwLCAwLCAwLCAwLjMpIDAlLCByZ2JhKDAsIDAsIDAsIDAuNykgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtbW96LXJhZGlhbC1ncmFkaWVudChjZW50ZXIsIGVsbGlwc2UgZmFydGhlc3QtY29ybmVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIGJhY2tncm91bmQ6IC1vLXJhZGlhbC1ncmFkaWVudChjZW50ZXIsIGVsbGlwc2UgZmFydGhlc3QtY29ybmVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIGJhY2tncm91bmQ6IC13ZWJraXQtZ3JhZGllbnQoCiAgICAgICAgcmFkaWFsLAogICAgICAgIGNlbnRlciBjZW50ZXIsCiAgICAgICAgMCwKICAgICAgICBjZW50ZXIgY2VudGVyLAogICAgICAgIDQ5NywKICAgICAgICBjb2xvci1zdG9wKDAsIHJnYmEoMCwgMCwgMCwgMC4zKSksCiAgICAgICAgY29sb3Itc3RvcCgxLCByZ2JhKDAsIDAsIDAsIDAuNykpCiAgICApOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1yYWRpYWwtZ3JhZGllbnQoY2VudGVyLCBlbGxpcHNlIGZhcnRoZXN0LWNvcm5lciwgcmdiYSgwLCAwLCAwLCAwLjMpIDAlLCByZ2JhKDAsIDAsIDAsIDAuNykgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIgYXQgY2VudGVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIHotaW5kZXg6IDEwOwp9CmRpdi5EVEVfQnViYmxlX0JhY2tncm91bmQgPiBkaXYgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgcmlnaHQ6IDA7CiAgICBsZWZ0OiAwOwogICAgYm90dG9tOiAwOwogICAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0jOTkwMDAwMDAsIGVuZENvbG9yc3RyPSM5OTAwMDAwMCk7CiAgICAtbXMtZmlsdGVyOiAncHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9Izk5MDAwMDAwLCBlbmRDb2xvcnN0cj0jOTkwMDAwMDApJzsKfQpkaXYuRFRFX0J1YmJsZV9CYWNrZ3JvdW5kID4gZGl2Om5vdChbZHVtbXldKSB7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChlbmFibGVkPSJmYWxzZSIpOwp9Cmh0bWwuZGFyayBkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciwKaHRtbFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZHQtaHRtbC1iYWNrZ3JvdW5kKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfQnViYmxlIGRpdi5EVEVfQnViYmxlX0xpbmVyIGRpdi5EVEVfQnViYmxlX0Nsb3NlOjphZnRlciwKaHRtbFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gZGl2LkRURV9CdWJibGUgZGl2LkRURV9CdWJibGVfTGluZXIgZGl2LkRURV9CdWJibGVfQ2xvc2U6OmFmdGVyIHsKICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7Cn0KaHRtbC5kYXJrIGRpdi5EVEVfQnViYmxlIGRpdi5EVEVfQnViYmxlX1RyaWFuZ2xlLApodG1sW2RhdGEtYnMtdGhlbWU9J2RhcmsnXSBkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9UcmlhbmdsZSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kdC1odG1sLWJhY2tncm91bmQpOwogICAgYm9yZGVyLWxlZnQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgICBib3JkZXItYm90dG9tLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwp9CmRpdi5EVEVfSW5saW5lIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGRpc3BsYXk6IHRhYmxlOwogICAgd2lkdGg6IDEwMCU7Cn0KZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQsCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0J1dHRvbnMgewogICAgZGlzcGxheTogdGFibGUtY2VsbDsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIHsKICAgIHBhZGRpbmc6IDA7Cn0KZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCA+IGxhYmVsLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgPiBsYWJlbCB7CiAgICBkaXNwbGF5OiBub25lOwp9CmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0ZpZWxkIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nY29sb3InXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdkYXRlJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0ZpZWxkIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZGF0ZXRpbWUnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdkYXRldGltZS1sb2NhbCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9GaWVsZCBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2VtYWlsJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0ZpZWxkIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nbW9udGgnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdudW1iZXInXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdwYXNzd29yZCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9GaWVsZCBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3NlYXJjaCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9GaWVsZCBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3RlbCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9GaWVsZCBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3RleHQnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd0aW1lJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0ZpZWxkIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndXJsJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0ZpZWxkIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nd2VlayddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nY29sb3InXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGUnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGV0aW1lJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0J1dHRvbnMgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdkYXRldGltZS1sb2NhbCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZW1haWwnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J21vbnRoJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0J1dHRvbnMgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdudW1iZXInXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0J1dHRvbnMgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdzZWFyY2gnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfQnV0dG9ucyBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3RlbCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGV4dCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGltZSddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndXJsJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfSW5saW5lX0J1dHRvbnMgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd3ZWVrJ10gewogICAgd2lkdGg6IDEwMCU7Cn0KZGl2LkRURV9JbmxpbmUgZGl2LkRURV9JbmxpbmVfRmllbGQgZGl2LkRURV9Gb3JtX0J1dHRvbnMgYnV0dG9uLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0lubGluZV9CdXR0b25zIGRpdi5EVEVfRm9ybV9CdXR0b25zIGJ1dHRvbiB7CiAgICBtYXJnaW46IC02cHggMCAtNnB4IDRweDsKICAgIHBhZGRpbmc6IDVweDsKfQpkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2NvbG9yJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZGF0ZSddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J2RhdGV0aW1lJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdlbWFpbCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J21vbnRoJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0nbnVtYmVyJ10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ncGFzc3dvcmQnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSdzZWFyY2gnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd0ZWwnXSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9GaWVsZCBpbnB1dFt0eXBlPSd0ZXh0J10sCmRpdi5EVEVfSW5saW5lIGRpdi5EVEVfRmllbGQgaW5wdXRbdHlwZT0ndGltZSddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3VybCddLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkIGlucHV0W3R5cGU9J3dlZWsnXSB7CiAgICBtYXJnaW46IC02cHggMDsKfQpkaXYuRFRFX0lubGluZSBkaXYuRFRFX0ZpZWxkX0Vycm9yLApkaXYuRFRFX0lubGluZSBkaXYuRFRFX0Zvcm1fRXJyb3IgewogICAgZm9udC1zaXplOiAxMXB4OwogICAgbGluZS1oZWlnaHQ6IDEuMmVtOwogICAgcGFkZGluZzogMDsKICAgIG1hcmdpbi10b3A6IDEwcHg7Cn0KZGl2LkRURV9JbmxpbmUgZGl2LkRURV9GaWVsZF9FcnJvcjplbXB0eSwKZGl2LkRURV9JbmxpbmUgZGl2LkRURV9Gb3JtX0Vycm9yOmVtcHR5IHsKICAgIG1hcmdpbi10b3A6IDA7Cn0Kc3Bhbi5kdHItZGF0YSBkaXYuRFRFX0lubGluZSB7CiAgICBkaXNwbGF5OiBpbmxpbmUtdGFibGU7Cn0KZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiA1MCU7CiAgICBtYXJnaW4tbGVmdDogLTM5MHB4OwogICAgd2lkdGg6IDc4MHB4OwogICAgaGVpZ2h0OiAxMDAlOwogICAgei1pbmRleDogMTE7Cn0KZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIgewogICAgZGlzcGxheTogdGFibGU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogMTAwJTsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lciBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIgewogICAgZGlzcGxheTogdGFibGUtY2VsbDsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICB3aWR0aDogMTAwJTsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lciBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudCB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBib3gtc2hhZG93OiAwIDEycHggMzBweCAwIHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnQgZGl2LkRURSB7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM2NjY7CiAgICBiYWNrZ3JvdW5kOiAjZmNmY2ZjOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lciBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudCBkaXYuRFRFIGRpdi5EVEVfSGVhZGVyIHsKICAgIHJpZ2h0OiAwOwogICAgd2lkdGg6IGF1dG87CiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA2cHg7CiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNnB4Owp9CmRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50CiAgICBkaXYuRFRFCiAgICBkaXYuRFRFX0JvZHlfQ29udGVudCB7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgYmFja2dyb3VuZDogI2ZjZmNmYzsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lciBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudCBkaXYuRFRFIGRpdi5EVEVfRm9vdGVyIHsKICAgIHJpZ2h0OiAwOwogICAgd2lkdGg6IGF1dG87CiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA2cHg7CiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNnB4Owp9CmRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGFpbmVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnRfV3JhcHBlciBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50IGRpdi5EVEVEX0xpZ2h0Ym94X0Nsb3NlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMTlweDsKICAgIHJpZ2h0OiAxOXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgei1pbmRleDogMTI7Cn0KZGl2LkRURURfTGlnaHRib3hfV3JhcHBlcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGFpbmVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnQKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0Nsb3NlOmFmdGVyIHsKICAgIGNvbnRlbnQ6ICfDlyc7CiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICBmb250LXNpemU6IDIycHg7CiAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlOwp9CmRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50CiAgICBkaXYuRFRFRF9MaWdodGJveF9DbG9zZTpob3ZlcjphZnRlciB7CiAgICBjb2xvcjogYmxhY2s7Cn0KZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciBkaXYuRFRFX0Zvb3RlciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEVfRm9vdGVyX0NvbnRlbnQgewogICAgZGlzcGxheTogbm9uZTsKfQpkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIGRpdi5EVEUuaW5Gb3JtRXJyb3IgZGl2LkRURV9Gb290ZXIgewogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwp9CmRpdi5EVEVEX0xpZ2h0Ym94X0JhY2tncm91bmQgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjcpOwogICAgYmFja2dyb3VuZDogLW1zLXJhZGlhbC1ncmFkaWVudChjZW50ZXIsIGVsbGlwc2UgZmFydGhlc3QtY29ybmVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIGJhY2tncm91bmQ6IC1tb3otcmFkaWFsLWdyYWRpZW50KGNlbnRlciwgZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIsIHJnYmEoMCwgMCwgMCwgMC4zKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjcpIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW8tcmFkaWFsLWdyYWRpZW50KGNlbnRlciwgZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIsIHJnYmEoMCwgMCwgMCwgMC4zKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjcpIDEwMCUpOwogICAgYmFja2dyb3VuZDogLXdlYmtpdC1ncmFkaWVudCgKICAgICAgICByYWRpYWwsCiAgICAgICAgY2VudGVyIGNlbnRlciwKICAgICAgICAwLAogICAgICAgIGNlbnRlciBjZW50ZXIsCiAgICAgICAgNDk3LAogICAgICAgIGNvbG9yLXN0b3AoMCwgcmdiYSgwLCAwLCAwLCAwLjMpKSwKICAgICAgICBjb2xvci1zdG9wKDEsIHJnYmEoMCwgMCwgMCwgMC43KSkKICAgICk7CiAgICBiYWNrZ3JvdW5kOiAtd2Via2l0LXJhZGlhbC1ncmFkaWVudChjZW50ZXIsIGVsbGlwc2UgZmFydGhlc3QtY29ybmVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIGJhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGZhcnRoZXN0LWNvcm5lciBhdCBjZW50ZXIsIHJnYmEoMCwgMCwgMCwgMC4zKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjcpIDEwMCUpOwogICAgei1pbmRleDogMTA7Cn0KZGl2LkRURURfTGlnaHRib3hfQmFja2dyb3VuZCA+IGRpdiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICByaWdodDogMDsKICAgIGxlZnQ6IDA7CiAgICBib3R0b206IDA7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPSM5OTAwMDAwMCwgZW5kQ29sb3JzdHI9Izk5MDAwMDAwKTsKICAgIC1tcy1maWx0ZXI6ICdwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0jOTkwMDAwMDAsIGVuZENvbG9yc3RyPSM5OTAwMDAwMCknOwp9CmRpdi5EVEVEX0xpZ2h0Ym94X0JhY2tncm91bmQgPiBkaXY6bm90KFtkdW1teV0pIHsKICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGVuYWJsZWQ9ImZhbHNlIik7Cn0KYm9keS5EVEVEX0xpZ2h0Ym94X01vYmlsZSBkaXYuRFRFRF9MaWdodGJveF9CYWNrZ3JvdW5kIHsKICAgIGhlaWdodDogMDsKfQpib2R5LkRURURfTGlnaHRib3hfTW9iaWxlIGRpdi5EVEVEX0xpZ2h0Ym94X1Nob3duIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KYm9keS5EVEVEX0xpZ2h0Ym94X01vYmlsZSBkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogMHB4OwogICAgbGVmdDogMHB4OwogICAgcmlnaHQ6IDBweDsKICAgIGJvdHRvbTogMHB4OwogICAgd2lkdGg6IGF1dG87CiAgICBoZWlnaHQ6IGF1dG87CiAgICBtYXJnaW4tbGVmdDogMDsKICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDsKfQpib2R5LkRURURfTGlnaHRib3hfTW9iaWxlIGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGFpbmVyIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgaGVpZ2h0OiAxMDAlOwp9CmJvZHkuRFRFRF9MaWdodGJveF9Nb2JpbGUgZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgaGVpZ2h0OiAxMDAlOwp9CmJvZHkuRFRFRF9MaWdodGJveF9Nb2JpbGUKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50IHsKICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICBib3gtc2hhZG93OiBub25lOwogICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7Cn0KYm9keS5EVEVEX0xpZ2h0Ym94X01vYmlsZQogICAgZGl2LkRURURfTGlnaHRib3hfV3JhcHBlcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGFpbmVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnQKICAgIGRpdi5EVEUgewogICAgYm9yZGVyLXJhZGl1czogMDsKICAgIGhlaWdodDogMTAwJTsKfQpib2R5LkRURURfTGlnaHRib3hfTW9iaWxlCiAgICBkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnRfV3JhcHBlcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudAogICAgZGl2LkRURQogICAgZGl2LkRURV9IZWFkZXIgewogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDsKICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwOwp9CmJvZHkuRFRFRF9MaWdodGJveF9Nb2JpbGUKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50CiAgICBkaXYuRFRFCiAgICBkaXYuRFRFX0JvZHlfQ29udGVudCB7CiAgICBwYWRkaW5nLWJvdHRvbTogNTJweDsKfQpib2R5LkRURURfTGlnaHRib3hfTW9iaWxlCiAgICBkaXYuRFRFRF9MaWdodGJveF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnRfV3JhcHBlcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudAogICAgZGl2LkRURQogICAgZGl2LkRURV9Gb290ZXIgewogICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDsKICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwOwp9CmJvZHkuRFRFRF9MaWdodGJveF9Nb2JpbGUKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50CiAgICBkaXYuRFRFRF9MaWdodGJveF9DbG9zZSB7CiAgICB0b3A6IDExcHg7CiAgICByaWdodDogMTVweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgYm9yZGVyOiBub25lOwogICAgYm94LXNoYWRvdzogbm9uZTsKfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc4MHB4KSB7CiAgICBib2R5IGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIgewogICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICB3aWR0aDogOTAlOwogICAgICAgIG1hcmdpbi1sZWZ0OiA1JTsKICAgIH0KfQpAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU4MHB4KSB7CiAgICBib2R5IGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIgewogICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBtYXJnaW4tbGVmdDogMDsKICAgIH0KfQpodG1sLmRhcmsgZGl2LkRURURfTGlnaHRib3hfV3JhcHBlciBkaXYuRFRFRF9MaWdodGJveF9Db250YWluZXIgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnQgZGl2LkRURSB7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYmFja2dyb3VuZDogdmFyKC0tZHQtaHRtbC1iYWNrZ3JvdW5kKTsKfQpodG1sLmRhcmsKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X1dyYXBwZXIKICAgIGRpdi5EVEVEX0xpZ2h0Ym94X0NvbnRhaW5lcgogICAgZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyCiAgICBkaXYuRFRFRF9MaWdodGJveF9Db250ZW50CiAgICBkaXYuRFRFCiAgICBkaXYuRFRFX0JvZHlfQ29udGVudCB7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1kdC1odG1sLWJhY2tncm91bmQpOwp9CmRpdi5EVEVEX0VudmVsb3BlX1dyYXBwZXIgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgYm90dG9tOiAwOwogICAgbGVmdDogNTAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgei1pbmRleDogMTE7CiAgICBkaXNwbGF5OiBub25lOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKfQpkaXYuRFRFRF9FbnZlbG9wZV9XcmFwcGVyIGRpdi5EVEVEX0VudmVsb3BlX1NoYWRvdyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IC0xMHB4OwogICAgbGVmdDogMTBweDsKICAgIHJpZ2h0OiAxMHB4OwogICAgaGVpZ2h0OiAxMHB4OwogICAgei1pbmRleDogMTA7CiAgICBib3gtc2hhZG93OiAwIDAgMjBweCBibGFjazsKfQpkaXYuRFRFRF9FbnZlbG9wZV9XcmFwcGVyIGRpdi5EVEVEX0VudmVsb3BlX0NvbnRhaW5lciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiA1JTsKICAgIHdpZHRoOiA5MCU7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICM3Nzc7CiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNzc3OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM3Nzc7CiAgICBib3gtc2hhZG93OiAzcHggM3B4IDEwcHggIzU1NTsKICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDVweDsKICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKfQpkaXYuRFRFRF9FbnZlbG9wZV9XcmFwcGVyIGRpdi5EVEVEX0VudmVsb3BlX0NvbnRhaW5lciBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yIHsKICAgIHJpZ2h0OiAzNnB4Owp9CmRpdi5EVEVEX0VudmVsb3BlX1dyYXBwZXIgZGl2LkRURURfRW52ZWxvcGVfQ29udGFpbmVyIGRpdi5EVEVfRm9vdGVyIHsKICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDVweDsKICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7Cn0KZGl2LkRURURfRW52ZWxvcGVfV3JhcHBlciBkaXYuRFRFRF9FbnZlbG9wZV9Db250YWluZXIgZGl2LkRURURfRW52ZWxvcGVfQ2xvc2UgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAxOXB4OwogICAgcmlnaHQ6IDE5cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMjsKfQpkaXYuRFRFRF9FbnZlbG9wZV9XcmFwcGVyIGRpdi5EVEVEX0VudmVsb3BlX0NvbnRhaW5lciBkaXYuRFRFRF9FbnZlbG9wZV9DbG9zZTphZnRlciB7CiAgICBjb250ZW50OiAnw5cnOwogICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgZm9udC1zaXplOiAyMnB4OwogICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZTsKfQpkaXYuRFRFRF9FbnZlbG9wZV9XcmFwcGVyIGRpdi5EVEVEX0VudmVsb3BlX0NvbnRhaW5lciBkaXYuRFRFRF9FbnZlbG9wZV9DbG9zZTpob3ZlcjphZnRlciB7CiAgICBjb2xvcjogYmxhY2s7Cn0KZGl2LkRURURfRW52ZWxvcGVfQmFja2dyb3VuZCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNyk7CiAgICBiYWNrZ3JvdW5kOiAtbXMtcmFkaWFsLWdyYWRpZW50KGNlbnRlciwgZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIsIHJnYmEoMCwgMCwgMCwgMC4zKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjcpIDEwMCUpOwogICAgYmFja2dyb3VuZDogLW1vei1yYWRpYWwtZ3JhZGllbnQoY2VudGVyLCBlbGxpcHNlIGZhcnRoZXN0LWNvcm5lciwgcmdiYSgwLCAwLCAwLCAwLjMpIDAlLCByZ2JhKDAsIDAsIDAsIDAuNykgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtby1yYWRpYWwtZ3JhZGllbnQoY2VudGVyLCBlbGxpcHNlIGZhcnRoZXN0LWNvcm5lciwgcmdiYSgwLCAwLCAwLCAwLjMpIDAlLCByZ2JhKDAsIDAsIDAsIDAuNykgMTAwJSk7CiAgICBiYWNrZ3JvdW5kOiAtd2Via2l0LWdyYWRpZW50KAogICAgICAgIHJhZGlhbCwKICAgICAgICBjZW50ZXIgY2VudGVyLAogICAgICAgIDAsCiAgICAgICAgY2VudGVyIGNlbnRlciwKICAgICAgICA0OTcsCiAgICAgICAgY29sb3Itc3RvcCgwLCByZ2JhKDAsIDAsIDAsIDAuMykpLAogICAgICAgIGNvbG9yLXN0b3AoMSwgcmdiYSgwLCAwLCAwLCAwLjcpKQogICAgKTsKICAgIGJhY2tncm91bmQ6IC13ZWJraXQtcmFkaWFsLWdyYWRpZW50KGNlbnRlciwgZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIsIHJnYmEoMCwgMCwgMCwgMC4zKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjcpIDEwMCUpOwogICAgYmFja2dyb3VuZDogcmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgZmFydGhlc3QtY29ybmVyIGF0IGNlbnRlciwgcmdiYSgwLCAwLCAwLCAwLjMpIDAlLCByZ2JhKDAsIDAsIDAsIDAuNykgMTAwJSk7CiAgICB6LWluZGV4OiAxMDsKfQpkaXYuRFRFRF9FbnZlbG9wZV9CYWNrZ3JvdW5kID4gZGl2IHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIHJpZ2h0OiAwOwogICAgbGVmdDogMDsKICAgIGJvdHRvbTogMDsKICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9Izk5MDAwMDAwLCBlbmRDb2xvcnN0cj0jOTkwMDAwMDApOwogICAgLW1zLWZpbHRlcjogJ3Byb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPSM5OTAwMDAwMCwgZW5kQ29sb3JzdHI9Izk5MDAwMDAwKSc7Cn0KZGl2LkRURURfRW52ZWxvcGVfQmFja2dyb3VuZCA+IGRpdjpub3QoW2R1bW15XSkgewogICAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoZW5hYmxlZD0iZmFsc2UiKTsKfQpodG1sLmRhcmsgZGl2LkRURURfRW52ZWxvcGVfV3JhcHBlciBkaXYuRFRFRF9FbnZlbG9wZV9Db250YWluZXIgewogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYm94LXNoYWRvdzogM3B4IDNweCAxMHB4ICMwMDA7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kdC1odG1sLWJhY2tncm91bmQpOwp9CnRhYmxlLmRhdGFUYWJsZSB0ci5kdGUtaGlnaGxpZ2h0IHsKICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMXM7CiAgICBhbmltYXRpb24tbmFtZTogZHRlLWhpZ2hsaWdodDsKfQp0YWJsZS5kYXRhVGFibGUgdHIuZHRlLWlubGluZUFkZCB0ZCwKdGFibGUuZGF0YVRhYmxlIHRyLmR0ZS1pbmxpbmVBZGQgdGggewogICAgdmVydGljYWwtYWxpZ246IHRvcDsKfQpAa2V5ZnJhbWVzIGR0ZS1oaWdobGlnaHQgewogICAgZnJvbSB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgcmdiKDIzNSwgMTIxLCAxNSk7CiAgICB9CiAgICA1MCUgewogICAgICAgIGJveC1zaGFkb3c6IDAgMCA1cHggcmdiKDIzNSwgMTIxLCAxNSk7CiAgICB9CiAgICB0byB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgyMzUsIDEyMSwgMTUsIDApOwogICAgfQp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgewogICAgcGFkZGluZy10b3A6IDRweDsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkIGRpdi5ldV90YWJsZSB7CiAgICBkaXNwbGF5OiB0YWJsZTsKICAgIHdpZHRoOiAxMDAlOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgZGl2LnJvdyB7CiAgICBkaXNwbGF5OiB0YWJsZS1yb3c7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBkaXYuY2VsbCB7CiAgICBkaXNwbGF5OiB0YWJsZS1jZWxsOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgd2lkdGg6IDUwJTsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBkaXYuY2VsbCArIGRpdi5jZWxsIHsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkIGRpdi5yb3cgKyBkaXYucm93IGRpdi5jZWxsIHsKICAgIHBhZGRpbmctdG9wOiAxMHB4Owp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgYnV0dG9uLmJ0biwKZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBpbnB1dFt0eXBlPSdmaWxlJ10gewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDIuM2VtOwogICAgZm9udC1zaXplOiAwLjhlbTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGxpbmUtaGVpZ2h0OiAxZW07CiAgICBtYXJnaW46IDA7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBpbnB1dFt0eXBlPSdmaWxlJ10gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgb3BhY2l0eTogMDsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkIGRpdi5kcm9wIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJvcmRlcjogM3B4IGRhc2hlZCAjY2NjOwogICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgbWluLWhlaWdodDogNGVtOwogICAgY29sb3I6ICM5OTk7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAxZW0gMmVtOwogICAgbGluZS1oZWlnaHQ6IDEuMWVtOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgZGl2LmRyb3Aub3ZlciB7CiAgICBib3JkZXI6IDNweCBkYXNoZWQgIzExMTsKICAgIGNvbG9yOiAjMTExOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgZGl2LmRyb3Agc3BhbiB7CiAgICBtYXgtd2lkdGg6IDc1JTsKICAgIGZvbnQtc2l6ZTogMC44NWVtOwogICAgbGluZS1oZWlnaHQ6IDFlbTsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkIGRpdi5yZW5kZXJlZCBpbWcgewogICAgbWF4LXdpZHRoOiA4ZW07CiAgICBtYXJnaW46IDAgYXV0bzsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkLm5vRHJvcCBkaXYuZHJvcCB7CiAgICBkaXNwbGF5OiBub25lOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQubm9Ecm9wIGRpdi5yb3cuc2Vjb25kIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZC5ub0Ryb3AgZGl2LnJlbmRlcmVkIHsKICAgIG1hcmdpbi10b3A6IDEwcHg7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZC5ub0NsZWFyIGRpdi5jbGVhclZhbHVlIGJ1dHRvbiB7CiAgICBkaXNwbGF5OiBub25lOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQubXVsdGkgZGl2LmNlbGwgewogICAgZGlzcGxheTogYmxvY2s7CiAgICB3aWR0aDogMTAwJTsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkLm11bHRpIGRpdi5jZWxsIGRpdi5kcm9wIHsKICAgIG1pbi1oZWlnaHQ6IDA7Cn0KZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZC5tdWx0aSBkaXYuY2xlYXJWYWx1ZSB7CiAgICBkaXNwbGF5OiBub25lOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQubXVsdGkgdWwgewogICAgbGlzdC1zdHlsZS10eXBlOiBub25lOwogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMDsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkLm11bHRpIHVsIGxpIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIG1hcmdpbi10b3A6IDAuNWVtOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQubXVsdGkgdWwgbGk6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLXRvcDogMDsKfQpkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkLm11bHRpIHVsIGxpIGltZyB7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CmRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQubXVsdGkgdWwgbGkgYnV0dG9uIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiA0MHB4OwogICAgcmlnaHQ6IDA7CiAgICB0b3A6IDUwJTsKICAgIG1hcmdpbi10b3A6IC0xLjVlbTsKfQpodG1sLmRhcmsgZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBkaXYuZHJvcCwKaHRtbFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gZGl2LkRURSBkaXYuZWRpdG9yX3VwbG9hZCBkaXYuZHJvcCB7CiAgICBib3JkZXI6IDNweCBkYXNoZWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKICAgIGNvbG9yOiBpbmhlcml0Owp9Cmh0bWwuZGFyayBkaXYuRFRFIGRpdi5lZGl0b3JfdXBsb2FkIGRpdi5kcm9wLm92ZXIsCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIGRpdi5EVEUgZGl2LmVkaXRvcl91cGxvYWQgZGl2LmRyb3Aub3ZlciB7CiAgICBib3JkZXI6IDNweCBkYXNoZWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwp9CmRpdi5EVEUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDE3cHg7CiAgICByaWdodDogNDJweDsKICAgIGhlaWdodDogMmVtOwogICAgd2lkdGg6IDJlbTsKICAgIHotaW5kZXg6IDIwOwogICAgZm9udC1zaXplOiAxMnB4OwogICAgZGlzcGxheTogbm9uZTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApOwogICAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTsKfQpkaXYuRFRFLnByb2Nlc3NpbmcgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvciB7CiAgICBkaXNwbGF5OiBibG9jazsKfQpkaXYuRFRFLnByb2Nlc3NpbmcgZGl2LkRURV9GaWVsZCBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KZGl2LkRURSBkaXYuRFRFX0ZpZWxkIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3IgewogICAgdG9wOiAxM3B4OwogICAgcmlnaHQ6IDA7CiAgICBmb250LXNpemU6IDhweDsKfQpkaXYuRFRFLkRURV9JbmxpbmUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvciB7CiAgICB0b3A6IDVweDsKICAgIHJpZ2h0OiA2cHg7CiAgICBmb250LXNpemU6IDZweDsKfQpkaXYuRFRFLkRURV9CdWJibGUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvciB7CiAgICB0b3A6IDEwcHg7CiAgICByaWdodDogMTRweDsKICAgIGZvbnQtc2l6ZTogOHB4Owp9CmRpdi5EVEUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvciBzcGFuLApkaXYuRFRFIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3I6YmVmb3JlLApkaXYuRFRFIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3I6YWZ0ZXIgewogICAgZGlzcGxheTogYmxvY2s7CiAgICBiYWNrZ3JvdW5kOiBibGFjazsKICAgIHdpZHRoOiAwLjVlbTsKICAgIGhlaWdodDogMS41ZW07CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNCk7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAtd2Via2l0LWFuaW1hdGlvbjogZWRpdG9yUHJvY2Vzc2luZyAwLjlzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogICAgYW5pbWF0aW9uOiBlZGl0b3JQcm9jZXNzaW5nIDAuOXMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7Cn0KZGl2LkRURSBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yOmJlZm9yZSwKZGl2LkRURSBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yOmFmdGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGNvbnRlbnQ6ICcnOwp9CmRpdi5EVEUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvcjpiZWZvcmUgewogICAgbGVmdDogLTFlbTsKICAgIC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4zczsKICAgIGFuaW1hdGlvbi1kZWxheTogLTAuM3M7Cn0KZGl2LkRURSBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yIHNwYW4gewogICAgLXdlYmtpdC1hbmltYXRpb24tZGVsYXk6IC0wLjE1czsKICAgIGFuaW1hdGlvbi1kZWxheTogLTAuMTVzOwp9CmRpdi5EVEUgZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvcjphZnRlciB7CiAgICBsZWZ0OiAxZW07Cn0KQC13ZWJraXQta2V5ZnJhbWVzIGVkaXRvclByb2Nlc3NpbmcgewogICAgMCUsCiAgICA4MCUsCiAgICAxMDAlIHsKICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEsIDEpOwogICAgfQogICAgNDAlIHsKICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEsIDEuNSk7CiAgICB9Cn0KQGtleWZyYW1lcyBlZGl0b3JQcm9jZXNzaW5nIHsKICAgIDAlLAogICAgODAlLAogICAgMTAwJSB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLCAxKTsKICAgIH0KICAgIDQwJSB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLCAxLjUpOwogICAgfQp9Cmh0bWwuZGFyayBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yIHNwYW4sCmh0bWwuZGFyayBkaXYuRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yOmJlZm9yZSwKaHRtbC5kYXJrIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3I6YWZ0ZXIsCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3Igc3BhbiwKaHRtbFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gZGl2LkRURV9Qcm9jZXNzaW5nX0luZGljYXRvcjpiZWZvcmUsCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIGRpdi5EVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3I6YWZ0ZXIgewogICAgZGlzcGxheTogYmxvY2s7CiAgICB3aWR0aDogMC41ZW07CiAgICBoZWlnaHQ6IDEuNWVtOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI1KTsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKfQpkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0hlYWRlciArIGRpdi5EVEVfRm9ybV9JbmZvLApkaXYuRFRFX0J1YmJsZSBkaXYuRFRFX0J1YmJsZV9MaW5lciBkaXYuRFRFX0hlYWRlciArIGRpdi5EVEVfQnViYmxlX1RhYmxlIHsKICAgIHBhZGRpbmctdG9wOiA1MHB4Owp9CgpAa2V5ZnJhbWVzIGR0Yi1zcGlubmVyIHsKICAgIDEwMCUgewogICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICB9Cn0KQC1vLWtleWZyYW1lcyBkdGItc3Bpbm5lciB7CiAgICAxMDAlIHsKICAgICAgICAtby10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICB9Cn0KQC1tcy1rZXlmcmFtZXMgZHRiLXNwaW5uZXIgewogICAgMTAwJSB7CiAgICAgICAgLW1zLXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICAgIH0KfQpALXdlYmtpdC1rZXlmcmFtZXMgZHRiLXNwaW5uZXIgewogICAgMTAwJSB7CiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICB9Cn0KQC1tb3ota2V5ZnJhbWVzIGR0Yi1zcGlubmVyIHsKICAgIDEwMCUgewogICAgICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogICAgfQp9CmRpdi5kYXRhVGFibGVzX3dyYXBwZXIgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CmRpdi5kdC1idXR0b25zIHsKICAgIHBvc2l0aW9uOiBpbml0aWFsOwp9CmRpdi5kdC1idXR0b25zIC5kdC1idXR0b24gewogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQpkaXYuZHQtYnV0dG9uLWluZm8gewogICAgcG9zaXRpb246IGZpeGVkOwogICAgdG9wOiA1MCU7CiAgICBsZWZ0OiA1MCU7CiAgICB3aWR0aDogNDAwcHg7CiAgICBtYXJnaW4tdG9wOiAtMTAwcHg7CiAgICBtYXJnaW4tbGVmdDogLTIwMHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBib3JkZXItcmFkaXVzOiAwLjc1ZW07CiAgICBib3gtc2hhZG93OiAzcHggNHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC44KTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHotaW5kZXg6IDIwMDM7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9CmRpdi5kdC1idXR0b24taW5mbyBoMiB7CiAgICBwYWRkaW5nOiAycmVtIDJyZW0gMXJlbSAycmVtOwogICAgbWFyZ2luOiAwOwogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKfQpkaXYuZHQtYnV0dG9uLWluZm8gPiBkaXYgewogICAgcGFkZGluZzogMWVtIDJlbSAyZW0gMmVtOwp9CmRpdi5kdGItcG9wb3Zlci1jbG9zZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDZweDsKICAgIHJpZ2h0OiA2cHg7CiAgICB3aWR0aDogMjJweDsKICAgIGhlaWdodDogMjJweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHotaW5kZXg6IDIwMDM7Cn0KYnV0dG9uLmR0Yi1oaWRlLWRyb3AgewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi10aXRsZSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAwLjNlbSAwLjVlbSAwLjVlbTsKICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTsKICAgIG1hcmdpbi1yaWdodDogMC41ZW07CiAgICBmb250LXNpemU6IDAuOWVtOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24tdGl0bGU6ZW1wdHkgewogICAgZGlzcGxheTogbm9uZTsKfQpzcGFuLmR0LWJ1dHRvbi1zcGFjZXIgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWFyZ2luOiAwLjVlbTsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0Kc3Bhbi5kdC1idXR0b24tc3BhY2VyLmJhciB7CiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICBwYWRkaW5nLWxlZnQ6IDAuNWVtOwp9CnNwYW4uZHQtYnV0dG9uLXNwYWNlci5iYXI6ZW1wdHkgewogICAgaGVpZ2h0OiAxZW07CiAgICB3aWR0aDogMXB4OwogICAgcGFkZGluZy1sZWZ0OiAwOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLWFjdGl2ZSB7CiAgICBwYWRkaW5nLXJpZ2h0OiAzZW07Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlOmFmdGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNTAlOwogICAgbWFyZ2luLXRvcDogLTEwcHg7CiAgICByaWdodDogMWVtOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgY29udGVudDogJ+Kckyc7CiAgICBjb2xvcjogaW5oZXJpdDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbi1hY3RpdmUuZHQtYnV0dG9uLXNwbGl0IHsKICAgIHBhZGRpbmctcmlnaHQ6IDA7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLmR0LWJ1dHRvbi1zcGxpdDphZnRlciB7CiAgICBkaXNwbGF5OiBub25lOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLWFjdGl2ZS5kdC1idXR0b24tc3BsaXQgPiAqOmZpcnN0LWNoaWxkIHsKICAgIHBhZGRpbmctcmlnaHQ6IDNlbTsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbi1hY3RpdmUuZHQtYnV0dG9uLXNwbGl0ID4gKjpmaXJzdC1jaGlsZDphZnRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDUwJTsKICAgIG1hcmdpbi10b3A6IC0xMHB4OwogICAgcmlnaHQ6IDFlbTsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGNvbnRlbnQ6ICfinJMnOwogICAgY29sb3I6IGluaGVyaXQ7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLWEgYSB7CiAgICBwYWRkaW5nLXJpZ2h0OiAzZW07Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLWEgYTphZnRlciB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMWVtOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgY29udGVudDogJ+Kckyc7CiAgICBjb2xvcjogaW5oZXJpdDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gc3Bhbi5kdC1idXR0b24tc3BhY2VyIHsKICAgIHdpZHRoOiAxMDAlOwogICAgZm9udC1zaXplOiAwLjllbTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIG1hcmdpbjogMC41ZW0gMDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gc3Bhbi5kdC1idXR0b24tc3BhY2VyOmVtcHR5IHsKICAgIGhlaWdodDogMDsKICAgIHdpZHRoOiAxMDAlOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiBzcGFuLmR0LWJ1dHRvbi1zcGFjZXIuYmFyIHsKICAgIGJvcmRlci1sZWZ0OiBub25lOwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIHBhZGRpbmctbGVmdDogMDsKfQpAbWVkaWEgcHJpbnQgewogICAgdGFibGUuZGF0YVRhYmxlIHRyID4gKiB7CiAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgfQp9Cmh0bWwuZGFyayBkaXYuZHQtYnV0dG9uLWluZm8gewogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZHQtaHRtbC1iYWNrZ3JvdW5kKTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLApkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbiB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgbWFyZ2luLWxlZnQ6IDAuMTY3ZW07CiAgICBtYXJnaW4tcmlnaHQ6IDAuMTY3ZW07CiAgICBtYXJnaW4tYm90dG9tOiAwLjMzM2VtOwogICAgcGFkZGluZzogMC41ZW0gMWVtOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYm9yZGVyLXJhZGl1czogMnB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAwLjg4ZW07CiAgICBsaW5lLWhlaWdodDogMS42ZW07CiAgICBjb2xvcjogaW5oZXJpdDsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgcmdiYSgyMzAsIDIzMCwgMjMwLCAwLjEpIDAlLCByZ2JhKDAsIDAsIDAsIDAuMSkgMTAwJSk7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChHcmFkaWVudFR5cGU9MCxTdGFydENvbG9yU3RyPSJyZ2JhKDIzMCwgMjMwLCAyMzAsIDAuMSkiLCBFbmRDb2xvclN0cj0icmdiYSgwLCAwLCAwLCAwLjEpIik7CiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgb3V0bGluZTogbm9uZTsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9CmRpdi5kdC1idXR0b25zID4gLmR0LWJ1dHRvbjpmaXJzdC1jaGlsZCwKZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDA7Cn0KZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLmRpc2FibGVkLApkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbi5kaXNhYmxlZCB7CiAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICBvcGFjaXR5OiAwLjQ7Cn0KZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLmR0LWJ1dHRvbi1hY3RpdmU6bm90KC5kaXNhYmxlZCksCmRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uLmR0LWJ1dHRvbi1hY3RpdmU6bm90KC5kaXNhYmxlZCkgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgcmdiYSgxNzksIDE3OSwgMTc5LCAwLjEpIDAlLCByZ2JhKDAsIDAsIDAsIDAuMSkgMTAwJSk7CiAgICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChHcmFkaWVudFR5cGU9MCxTdGFydENvbG9yU3RyPSJyZ2JhKDE3OSwgMTc5LCAxNzksIDAuMSkiLCBFbmRDb2xvclN0cj0icmdiYSgwLCAwLCAwLCAwLjEpIik7CiAgICBib3gtc2hhZG93OiBpbnNldCAxcHggMXB4IDNweCAjOTk5Owp9CmRpdi5kdC1idXR0b25zID4gLmR0LWJ1dHRvbi5kdC1idXR0b24tYWN0aXZlOm5vdCguZGlzYWJsZWQpOmhvdmVyOm5vdCguZGlzYWJsZWQpLApkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbi5kdC1idXR0b24tYWN0aXZlOm5vdCguZGlzYWJsZWQpOmhvdmVyOm5vdCguZGlzYWJsZWQpIHsKICAgIGJveC1zaGFkb3c6IGluc2V0IDFweCAxcHggM3B4ICM5OTk7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4xKSAxMDAlKTsKICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KEdyYWRpZW50VHlwZT0wLFN0YXJ0Q29sb3JTdHI9InJnYmEoMTI4LCAxMjgsIDEyOCwgMC4xKSIsIEVuZENvbG9yU3RyPSJyZ2JhKDAsIDAsIDAsIDAuMSkiKTsKfQpkaXYuZHQtYnV0dG9ucyA+IC5kdC1idXR0b246aG92ZXIsCmRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uOmhvdmVyIHsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQpkaXYuZHQtYnV0dG9ucyA+IC5kdC1idXR0b246aG92ZXI6bm90KC5kaXNhYmxlZCksCmRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uOmhvdmVyOm5vdCguZGlzYWJsZWQpIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM2NjY7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCByZ2JhKDE1MywgMTUzLCAxNTMsIDAuMSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4xKSAxMDAlKTsKICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KEdyYWRpZW50VHlwZT0wLFN0YXJ0Q29sb3JTdHI9InJnYmEoMTUzLCAxNTMsIDE1MywgMC4xKSIsIEVuZENvbG9yU3RyPSJyZ2JhKDAsIDAsIDAsIDAuMSkiKTsKfQpkaXYuZHQtYnV0dG9ucyA+IC5kdC1idXR0b246Zm9jdXM6bm90KC5kaXNhYmxlZCksCmRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uOmZvY3VzOm5vdCguZGlzYWJsZWQpIHsKICAgIG91dGxpbmU6IDJweCBzb2xpZCByZ2IoNTMsIDEzMiwgMjI4KTsKfQpkaXYuZHQtYnV0dG9ucyA+IC5kdC1idXR0b24gZW1iZWQsCmRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uIGVtYmVkIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246Zmlyc3QtY2hpbGQgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjE1KTsKICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwOwogICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7Cn0KZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246Zmlyc3QtY2hpbGQ6aG92ZXIgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzY2NjsKfQpkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbjpsYXN0LWNoaWxkIHsKICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwOwogICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDsKfQpkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbjpsYXN0LWNoaWxkOmhvdmVyIHsKICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzY2NjsKfQpkaXYuZHQtYnV0dG9ucyBzcGFuLmR0LWJ1dHRvbi1kb3duLWFycm93IHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHRvcDogLTJweDsKICAgIGZvbnQtc2l6ZTogMTBweDsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgIGxpbmUtaGVpZ2h0OiAxZW07CiAgICBvcGFjaXR5OiAwLjY7Cn0KZGl2LmR0LWJ1dHRvbnMgZGl2LmR0LWJ1dHRvbi1zcGxpdCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KZGl2LmR0LWJ1dHRvbnMgZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1yaWdodDogMDsKfQpkaXYuZHQtYnV0dG9ucyBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246bGFzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogLTFweDsKICAgIHBhZGRpbmctbGVmdDogMC43NWVtOwogICAgcGFkZGluZy1yaWdodDogMC43NWVtOwogICAgei1pbmRleDogMjsKfQpkaXYuZHQtYnV0dG9ucyBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246bGFzdC1jaGlsZCBzcGFuIHsKICAgIHBhZGRpbmctbGVmdDogMDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIHdpZHRoOiAyMDBweDsKICAgIG1hcmdpbi10b3A6IDNweDsKICAgIG1hcmdpbi1ib3R0b206IDNweDsKICAgIHBhZGRpbmc6IDAuNzVlbSAwOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjQpOwogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgei1pbmRleDogMjAwMjsKICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgIGJveC1zaGFkb3c6IDNweCA0cHggMTBweCAxcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbiB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICB3aWR0aDogMTAwJTsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgZmxvYXQ6IG5vbmU7CiAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMC41ZW0gMWVtOwogICAgYm9yZGVyOiBub25lOwogICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGNvbG9yOiBpbmhlcml0Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLmR0LWJ1dHRvbi1hY3RpdmUgewogICAgYmFja2dyb3VuZDogbm9uZTsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24uZGlzYWJsZWQgewogICAgY3Vyc29yOiBkZWZhdWx0OwogICAgb3BhY2l0eTogMC40Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uOmhvdmVyOm5vdCguZGlzYWJsZWQpIHsKICAgIGJvcmRlcjogbm9uZTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMTUzLCAxNTMsIDE1MywgMC4xKTsKICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIGRpdi5kdC1idXR0b24tc3BsaXQgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7CiAgICBhbGlnbi1jb250ZW50OiBmbGV4LXN0YXJ0OwogICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIGRpdi5kdC1idXR0b24tc3BsaXQgYnV0dG9uLmR0LWJ1dHRvbiB7CiAgICBtYXJnaW46IDA7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB3aWR0aDogMDsKICAgIGZsZXgtZ3JvdzogMTsKICAgIGZsZXgtc2hyaW5rOiAwOwogICAgZmxleC1iYXNpczogNTBweDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gZGl2LmR0LWJ1dHRvbi1zcGxpdCBidXR0b24uZHQtYnV0dG9uLXNwbGl0LWRyb3AgewogICAgbWluLXdpZHRoOiAzM3B4OwogICAgZmxleDogMDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZml4ZWQgLmR0LWJ1dHRvbiB7CiAgICBib3JkZXItcmFkaXVzOiAwLjI1ZW07CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVkIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgdG9wOiA1MCU7CiAgICBsZWZ0OiA1MCU7CiAgICBtYXJnaW4tbGVmdDogLTc1cHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIHBhZGRpbmc6IDAuNWVtOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC50d28tY29sdW1uIHsKICAgIG1hcmdpbi1sZWZ0OiAtMjAwcHg7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVkLnRocmVlLWNvbHVtbiB7CiAgICBtYXJnaW4tbGVmdDogLTIyNXB4Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC5mb3VyLWNvbHVtbiB7CiAgICBtYXJnaW4tbGVmdDogLTMwMHB4Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC5jb2x1bW5zIHsKICAgIG1hcmdpbi1sZWZ0OiAtNDA5cHg7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAyNHB4KSB7CiAgICBkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZml4ZWQuY29sdW1ucyB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IC0zMDhweDsKICAgIH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NDBweCkgewogICAgZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVkLmNvbHVtbnMgewogICAgICAgIG1hcmdpbi1sZWZ0OiAtMjAzcHg7CiAgICB9Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDYwcHgpIHsKICAgIGRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC5jb2x1bW5zIHsKICAgICAgICBtYXJnaW4tbGVmdDogLTEwMHB4OwogICAgfQp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZCA+IDpsYXN0LWNoaWxkIHsKICAgIG1heC1oZWlnaHQ6IDEwMHZoOwogICAgb3ZlcmZsb3c6IGF1dG87Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnR3by1jb2x1bW4gPiA6bGFzdC1jaGlsZCwKZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnRocmVlLWNvbHVtbiA+IDpsYXN0LWNoaWxkLApkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZm91ci1jb2x1bW4gPiA6bGFzdC1jaGlsZCB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgLXdlYmtpdC1jb2x1bW4tZ2FwOiA4cHg7CiAgICAtbW96LWNvbHVtbi1nYXA6IDhweDsKICAgIC1tcy1jb2x1bW4tZ2FwOiA4cHg7CiAgICAtby1jb2x1bW4tZ2FwOiA4cHg7CiAgICBjb2x1bW4tZ2FwOiA4cHg7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnR3by1jb2x1bW4gPiA6bGFzdC1jaGlsZCA+ICosCmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi50aHJlZS1jb2x1bW4gPiA6bGFzdC1jaGlsZCA+ICosCmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5mb3VyLWNvbHVtbiA+IDpsYXN0LWNoaWxkID4gKiB7CiAgICAtd2Via2l0LWNvbHVtbi1icmVhay1pbnNpZGU6IGF2b2lkOwogICAgYnJlYWstaW5zaWRlOiBhdm9pZDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24udHdvLWNvbHVtbiB7CiAgICB3aWR0aDogNDAwcHg7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnR3by1jb2x1bW4gPiA6bGFzdC1jaGlsZCB7CiAgICBwYWRkaW5nLWJvdHRvbTogMXB4OwogICAgY29sdW1uLWNvdW50OiAyOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi50aHJlZS1jb2x1bW4gewogICAgd2lkdGg6IDQ1MHB4Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi50aHJlZS1jb2x1bW4gPiA6bGFzdC1jaGlsZCB7CiAgICBwYWRkaW5nLWJvdHRvbTogMXB4OwogICAgY29sdW1uLWNvdW50OiAzOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5mb3VyLWNvbHVtbiB7CiAgICB3aWR0aDogNjAwcHg7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZvdXItY29sdW1uID4gOmxhc3QtY2hpbGQgewogICAgcGFkZGluZy1ib3R0b206IDFweDsKICAgIGNvbHVtbi1jb3VudDogNDsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbiB7CiAgICBib3JkZXItcmFkaXVzOiAwOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zIHsKICAgIHdpZHRoOiBhdXRvOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zID4gOmxhc3QtY2hpbGQgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBnYXA6IDZweDsKICAgIHdpZHRoOiA4MThweDsKICAgIHBhZGRpbmctYm90dG9tOiAxcHg7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnMgPiA6bGFzdC1jaGlsZCAuZHQtYnV0dG9uIHsKICAgIG1pbi13aWR0aDogMjAwcHg7CiAgICBmbGV4OiAwIDE7CiAgICBtYXJnaW46IDA7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnMuZHRiLWIzID4gOmxhc3QtY2hpbGQsCmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMiA+IDpsYXN0LWNoaWxkLApkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucy5kdGItYjEgPiA6bGFzdC1jaGlsZCB7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnMuZHRiLWIzIC5kdC1idXR0b24gewogICAgZmxleDogMSAxIDMyJTsKfQpkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucy5kdGItYjIgLmR0LWJ1dHRvbiB7CiAgICBmbGV4OiAxIDEgNDglOwp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMSAuZHQtYnV0dG9uIHsKICAgIGZsZXg6IDEgMSAxMDAlOwp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMjRweCkgewogICAgZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnMgPiA6bGFzdC1jaGlsZCB7CiAgICAgICAgd2lkdGg6IDYxMnB4OwogICAgfQp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDY0MHB4KSB7CiAgICBkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucyA+IDpsYXN0LWNoaWxkIHsKICAgICAgICB3aWR0aDogNDA2cHg7CiAgICB9CiAgICBkaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucy5kdGItYjMgLmR0LWJ1dHRvbiB7CiAgICAgICAgZmxleDogMCAxIDMyJTsKICAgIH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0NjBweCkgewogICAgZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnMgPiA6bGFzdC1jaGlsZCB7CiAgICAgICAgd2lkdGg6IDIwMHB4OwogICAgfQp9CmRpdi5kdC1idXR0b24tYmFja2dyb3VuZCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNyk7CiAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBmYXJ0aGVzdC1jb3JuZXIgYXQgY2VudGVyLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHJnYmEoMCwgMCwgMCwgMC43KSAxMDAlKTsKICAgIHotaW5kZXg6IDIwMDE7Cn0KLmR0LWJ1dHRvbi5wcm9jZXNzaW5nIHsKICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7Cn0KLmR0LWJ1dHRvbi5wcm9jZXNzaW5nOmFmdGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNTAlOwogICAgbGVmdDogNTAlOwogICAgd2lkdGg6IDE2cHg7CiAgICBoZWlnaHQ6IDE2cHg7CiAgICBtYXJnaW46IC04cHggMCAwIC04cHg7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgZGlzcGxheTogYmxvY2s7CiAgICBjb250ZW50OiAnICc7CiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoNDAsIDQwLCA0MCk7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItcmlnaHQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgYW5pbWF0aW9uOiBkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOwogICAgLW8tYW5pbWF0aW9uOiBkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOwogICAgLW1zLWFuaW1hdGlvbjogZHRiLXNwaW5uZXIgMTUwMG1zIGluZmluaXRlIGxpbmVhcjsKICAgIC13ZWJraXQtYW5pbWF0aW9uOiBkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOwogICAgLW1vei1hbmltYXRpb246IGR0Yi1zcGlubmVyIDE1MDBtcyBpbmZpbml0ZSBsaW5lYXI7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNjQwcHgpIHsKICAgIGRpdi5kdC1idXR0b25zIHsKICAgICAgICBmbG9hdDogbm9uZSAhaW1wb3J0YW50OwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIH0KfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLApodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b24gewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiKDg5LCA5MSwgOTQpOwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLmR0LWJ1dHRvbi1hY3RpdmU6bm90KC5kaXNhYmxlZCksCmh0bWwuZGFyayBkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbi5kdC1idXR0b24tYWN0aXZlOm5vdCguZGlzYWJsZWQpIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMTc5LCAxNzksIDE3OSwgMC4xNSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAxcHggMXB4IDJweCBibGFjazsKfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uLmR0LWJ1dHRvbi1hY3RpdmU6bm90KC5kaXNhYmxlZCk6aG92ZXI6bm90KC5kaXNhYmxlZCksCmh0bWwuZGFyayBkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbi5kdC1idXR0b24tYWN0aXZlOm5vdCguZGlzYWJsZWQpOmhvdmVyOm5vdCguZGlzYWJsZWQpIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC4xNSk7CiAgICBib3gtc2hhZG93OiBpbnNldCAxcHggMXB4IDNweCBibGFjazsKfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uOmhvdmVyOm5vdCguZGlzYWJsZWQpLApodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246aG92ZXI6bm90KC5kaXNhYmxlZCkgewogICAgYmFja2dyb3VuZDogcmdiYSgxNzksIDE3OSwgMTc5LCAwLjE1KTsKfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiAuZHQtYnV0dG9uOmZvY3VzOm5vdCguZGlzYWJsZWQpLApodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246Zm9jdXM6bm90KC5kaXNhYmxlZCkgewogICAgb3V0bGluZTogMnB4IHNvbGlkIHJnYigxMTAsIDE2OCwgMjU0KTsKfQpodG1sLmRhcmsgZGl2LmR0LWJ1dHRvbnMgPiBkaXYuZHQtYnV0dG9uLXNwbGl0IC5kdC1idXR0b246Zmlyc3QtY2hpbGQgewogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwp9Cmh0bWwuZGFyayBkaXYuZHQtYnV0dG9ucyA+IGRpdi5kdC1idXR0b24tc3BsaXQgLmR0LWJ1dHRvbjpmaXJzdC1jaGlsZDpob3ZlciB7CiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCByZ2IoODksIDkxLCA5NCk7Cn0KaHRtbC5kYXJrIGRpdi5kdC1idXR0b25zID4gZGl2LmR0LWJ1dHRvbi1zcGxpdCAuZHQtYnV0dG9uOmxhc3QtY2hpbGQ6aG92ZXIgewogICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCByZ2IoODksIDkxLCA5NCk7Cn0KaHRtbC5kYXJrIGRpdi5kdC1idXR0b24tY29sbGVjdGlvbiB7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDMzLCAzNywgNDEpOwogICAgYm94LXNoYWRvdzogM3B4IDRweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuOCk7Cn0KCnRhYmxlLmZpeGVkSGVhZGVyLWZsb2F0aW5nLAp0YWJsZS5maXhlZEhlYWRlci1sb2NrZWQgewogICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kdC1odG1sLWJhY2tncm91bmQpOwogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZHQtaHRtbC1iYWNrZ3JvdW5kKTsKfQpAbWVkaWEgcHJpbnQgewogICAgdGFibGUuZml4ZWRIZWFkZXItZmxvYXRpbmcgewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9Cn0KCnRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aC5mb2N1cywKdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmZvY3VzIHsKICAgIG91dGxpbmU6IDJweCBzb2xpZCAjMzZmOwogICAgb3V0bGluZS1vZmZzZXQ6IC0ycHg7Cn0KdGFibGUuZGF0YVRhYmxlIHRib2R5IHRyLnNlbGVjdGVkIHRoLmZvY3VzLAp0YWJsZS5kYXRhVGFibGUgdGJvZHkgdHIuc2VsZWN0ZWQgdGQuZm9jdXMgewogICAgb3V0bGluZS1jb2xvcjogIzAzYzsKfQpkaXYuZHRrLWZvY3VzLWFsdCB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZm9jdXMsCmRpdi5kdGstZm9jdXMtYWx0IHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZC5mb2N1cyB7CiAgICBvdXRsaW5lOiAycHggc29saWQgI2ZmOGIzMzsKICAgIG91dGxpbmUtb2Zmc2V0OiAtMnB4Owp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZm9jdXMsCmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQuZm9jdXMgewogICAgb3V0bGluZS1jb2xvcjogcmdiKDEzLCAxMTAsIDI1Myk7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ci5zZWxlY3RlZCB0aC5mb2N1cywKaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ci5zZWxlY3RlZCB0ZC5mb2N1cyB7CiAgICBvdXRsaW5lLWNvbG9yOiAjMDE0M2EzOwp9Cmh0bWwuZGFyayBkaXYuZHRrLWZvY3VzLWFsdCB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZm9jdXMsCmh0bWwuZGFyayBkaXYuZHRrLWZvY3VzLWFsdCB0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQuZm9jdXMgewogICAgb3V0bGluZS1jb2xvcjogI2ZmOGIzMzsKfQoKdGFibGUuZGF0YVRhYmxlLmR0ci1pbmxpbmUuY29sbGFwc2VkID4gdGJvZHkgPiB0ciA+IHRkLmNoaWxkLAp0YWJsZS5kYXRhVGFibGUuZHRyLWlubGluZS5jb2xsYXBzZWQgPiB0Ym9keSA+IHRyID4gdGguY2hpbGQsCnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0ZC5kYXRhVGFibGVzX2VtcHR5IHsKICAgIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50Owp9CnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0ZC5jaGlsZDpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0aC5jaGlsZDpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0ZC5kYXRhVGFibGVzX2VtcHR5OmJlZm9yZSB7CiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0KdGFibGUuZGF0YVRhYmxlLmR0ci1pbmxpbmUuY29sbGFwc2VkID4gdGJvZHkgPiB0ciA+IHRkLmR0ci1jb250cm9sLAp0YWJsZS5kYXRhVGFibGUuZHRyLWlubGluZS5jb2xsYXBzZWQgPiB0Ym9keSA+IHRyID4gdGguZHRyLWNvbnRyb2wgewogICAgY3Vyc29yOiBwb2ludGVyOwp9CnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0ZC5kdHItY29udHJvbDpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0aC5kdHItY29udHJvbDpiZWZvcmUgewogICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBjb250ZW50OiAnJzsKICAgIGJvcmRlci10b3A6IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1sZWZ0OiAxMHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIGJvcmRlci1ib3R0b206IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50Owp9CnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZCA+IHRib2R5ID4gdHIgPiB0ZC5kdHItY29udHJvbC5hcnJvdy1yaWdodDo6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUuZHRyLWlubGluZS5jb2xsYXBzZWQgPiB0Ym9keSA+IHRyID4gdGguZHRyLWNvbnRyb2wuYXJyb3ctcmlnaHQ6OmJlZm9yZSB7CiAgICBib3JkZXItdG9wOiA1cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICBib3JkZXItbGVmdDogMHB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLWJvdHRvbTogNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLXJpZ2h0OiAxMHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC41KTsKfQp0YWJsZS5kYXRhVGFibGUuZHRyLWlubGluZS5jb2xsYXBzZWQgPiB0Ym9keSA+IHRyLmR0ci1leHBhbmRlZCA+IHRkLmR0ci1jb250cm9sOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmR0ci1pbmxpbmUuY29sbGFwc2VkID4gdGJvZHkgPiB0ci5kdHItZXhwYW5kZWQgPiB0aC5kdHItY29udHJvbDpiZWZvcmUgewogICAgYm9yZGVyLXRvcDogMTBweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLWJvdHRvbTogMHB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLXJpZ2h0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7Cn0KdGFibGUuZGF0YVRhYmxlLmR0ci1pbmxpbmUuY29sbGFwc2VkLmNvbXBhY3QgPiB0Ym9keSA+IHRyID4gdGQuZHRyLWNvbnRyb2wsCnRhYmxlLmRhdGFUYWJsZS5kdHItaW5saW5lLmNvbGxhcHNlZC5jb21wYWN0ID4gdGJvZHkgPiB0ciA+IHRoLmR0ci1jb250cm9sIHsKICAgIHBhZGRpbmctbGVmdDogMC4zMzNlbTsKfQp0YWJsZS5kYXRhVGFibGUuZHRyLWNvbHVtbiA+IHRib2R5ID4gdHIgPiB0ZC5kdHItY29udHJvbCwKdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGguZHRyLWNvbnRyb2wsCnRhYmxlLmRhdGFUYWJsZS5kdHItY29sdW1uID4gdGJvZHkgPiB0ciA+IHRkLmNvbnRyb2wsCnRhYmxlLmRhdGFUYWJsZS5kdHItY29sdW1uID4gdGJvZHkgPiB0ciA+IHRoLmNvbnRyb2wgewogICAgY3Vyc29yOiBwb2ludGVyOwp9CnRhYmxlLmRhdGFUYWJsZS5kdHItY29sdW1uID4gdGJvZHkgPiB0ciA+IHRkLmR0ci1jb250cm9sOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGguZHRyLWNvbnRyb2w6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUuZHRyLWNvbHVtbiA+IHRib2R5ID4gdHIgPiB0ZC5jb250cm9sOmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGguY29udHJvbDpiZWZvcmUgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGNvbnRlbnQ6ICcnOwogICAgYm9yZGVyLXRvcDogNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLWxlZnQ6IDEwcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjUpOwogICAgYm9yZGVyLWJvdHRvbTogNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLXJpZ2h0OiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Cn0KdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGQuZHRyLWNvbnRyb2wuYXJyb3ctcmlnaHQ6OmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGguZHRyLWNvbnRyb2wuYXJyb3ctcmlnaHQ6OmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyID4gdGQuY29udHJvbC5hcnJvdy1yaWdodDo6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUuZHRyLWNvbHVtbiA+IHRib2R5ID4gdHIgPiB0aC5jb250cm9sLmFycm93LXJpZ2h0OjpiZWZvcmUgewogICAgYm9yZGVyLXRvcDogNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgYm9yZGVyLWxlZnQ6IDBweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1ib3R0b206IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1yaWdodDogMTBweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNSk7Cn0KdGFibGUuZGF0YVRhYmxlLmR0ci1jb2x1bW4gPiB0Ym9keSA+IHRyLmR0ci1leHBhbmRlZCB0ZC5kdHItY29udHJvbDpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZS5kdHItY29sdW1uID4gdGJvZHkgPiB0ci5kdHItZXhwYW5kZWQgdGguZHRyLWNvbnRyb2w6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUuZHRyLWNvbHVtbiA+IHRib2R5ID4gdHIuZHRyLWV4cGFuZGVkIHRkLmNvbnRyb2w6YmVmb3JlLAp0YWJsZS5kYXRhVGFibGUuZHRyLWNvbHVtbiA+IHRib2R5ID4gdHIuZHRyLWV4cGFuZGVkIHRoLmNvbnRyb2w6YmVmb3JlIHsKICAgIGJvcmRlci10b3A6IDEwcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjUpOwogICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJvcmRlci1yaWdodDogNXB4IHNvbGlkIHRyYW5zcGFyZW50Owp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuY2hpbGQgewogICAgcGFkZGluZzogMC41ZW0gMWVtOwp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuY2hpbGQ6aG92ZXIgewogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsKfQp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyLmNoaWxkIHVsLmR0ci1kZXRhaWxzIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKICAgIG1hcmdpbjogMDsKICAgIHBhZGRpbmc6IDA7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ci5jaGlsZCB1bC5kdHItZGV0YWlscyA+IGxpIHsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWZlZmVmOwogICAgcGFkZGluZzogMC41ZW0gMDsKfQp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyLmNoaWxkIHVsLmR0ci1kZXRhaWxzID4gbGk6Zmlyc3QtY2hpbGQgewogICAgcGFkZGluZy10b3A6IDA7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ci5jaGlsZCB1bC5kdHItZGV0YWlscyA+IGxpOmxhc3QtY2hpbGQgewogICAgcGFkZGluZy1ib3R0b206IDA7CiAgICBib3JkZXItYm90dG9tOiBub25lOwp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuY2hpbGQgc3Bhbi5kdHItdGl0bGUgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgbWluLXdpZHRoOiA3NXB4OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KZGl2LmR0ci1tb2RhbCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIGhlaWdodDogMTAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgei1pbmRleDogMTAwOwogICAgcGFkZGluZzogMTBlbSAxZW07Cn0KZGl2LmR0ci1tb2RhbCBkaXYuZHRyLW1vZGFsLWRpc3BsYXkgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogMDsKICAgIGJvdHRvbTogMDsKICAgIHJpZ2h0OiAwOwogICAgd2lkdGg6IDUwJTsKICAgIGhlaWdodDogZml0LWNvbnRlbnQ7CiAgICBtYXgtaGVpZ2h0OiA3NSU7CiAgICBvdmVyZmxvdzogYXV0bzsKICAgIG1hcmdpbjogYXV0bzsKICAgIHotaW5kZXg6IDEwMjsKICAgIG92ZXJmbG93OiBhdXRvOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNzsKICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwogICAgYm9yZGVyLXJhZGl1czogMC41ZW07CiAgICBib3gtc2hhZG93OiAwIDEycHggMzBweCByZ2JhKDAsIDAsIDAsIDAuNik7Cn0KZGl2LmR0ci1tb2RhbCBkaXYuZHRyLW1vZGFsLWNvbnRlbnQgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgcGFkZGluZzogMi41ZW07Cn0KZGl2LmR0ci1tb2RhbCBkaXYuZHRyLW1vZGFsLWNvbnRlbnQgaDIgewogICAgbWFyZ2luLXRvcDogMDsKfQpkaXYuZHRyLW1vZGFsIGRpdi5kdHItbW9kYWwtY2xvc2UgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiA2cHg7CiAgICByaWdodDogNnB4OwogICAgd2lkdGg6IDIycHg7CiAgICBoZWlnaHQ6IDIycHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB6LWluZGV4OiAxMjsKfQpkaXYuZHRyLW1vZGFsIGRpdi5kdHItbW9kYWwtYmFja2dyb3VuZCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDA7CiAgICB6LWluZGV4OiAxMDE7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNik7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY3cHgpIHsKICAgIGRpdi5kdHItbW9kYWwgZGl2LmR0ci1tb2RhbC1kaXNwbGF5IHsKICAgICAgICB3aWR0aDogOTUlOwogICAgfQp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyID4gdGQuZHRyLWNvbnRyb2w6YmVmb3JlLApodG1sW2RhdGEtYnMtdGhlbWU9J2RhcmsnXSB0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyID4gdGQuZHRyLWNvbnRyb2w6YmVmb3JlIHsKICAgIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSkgIWltcG9ydGFudDsKfQpodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ciA+IHRkLmR0ci1jb250cm9sLmFycm93LXJpZ2h0OjpiZWZvcmUsCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIHRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIgPiB0ZC5kdHItY29udHJvbC5hcnJvdy1yaWdodDo6YmVmb3JlIHsKICAgIGJvcmRlci1yaWdodC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpICFpbXBvcnRhbnQ7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuZHRyLWV4cGFuZGVkID4gdGQuZHRyLWNvbnRyb2w6YmVmb3JlLApodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ci5kdHItZXhwYW5kZWQgPiB0aC5kdHItY29udHJvbDpiZWZvcmUsCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIHRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuZHRyLWV4cGFuZGVkID4gdGQuZHRyLWNvbnRyb2w6YmVmb3JlLApodG1sW2RhdGEtYnMtdGhlbWU9J2RhcmsnXSB0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyLmR0ci1leHBhbmRlZCA+IHRoLmR0ci1jb250cm9sOmJlZm9yZSB7CiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSkgIWltcG9ydGFudDsKICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Owp9Cmh0bWwuZGFyayB0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyLmNoaWxkIHVsLmR0ci1kZXRhaWxzID4gbGksCmh0bWxbZGF0YS1icy10aGVtZT0nZGFyayddIHRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuY2hpbGQgdWwuZHRyLWRldGFpbHMgPiBsaSB7CiAgICBib3JkZXItYm90dG9tLWNvbG9yOiByZ2IoNjQsIDY3LCA3MCk7Cn0KaHRtbC5kYXJrIGRpdi5kdHItbW9kYWwgZGl2LmR0ci1tb2RhbC1kaXNwbGF5LApodG1sW2RhdGEtYnMtdGhlbWU9J2RhcmsnXSBkaXYuZHRyLW1vZGFsIGRpdi5kdHItbW9kYWwtZGlzcGxheSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMzMsIDM3LCA0MSk7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpOwp9Cgp0YWJsZS5kYXRhVGFibGUgdHIuZHRyZy1ncm91cCB0aCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICB0ZXh0LWFsaWduOiBsZWZ0Owp9CnRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtMCB0aCB7CiAgICBmb250LXdlaWdodDogYm9sZDsKfQp0YWJsZS5kYXRhVGFibGUgdHIuZHRyZy1ncm91cC5kdHJnLWxldmVsLTEgdGgsCnRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtMiB0aCwKdGFibGUuZGF0YVRhYmxlIHRyLmR0cmctZ3JvdXAuZHRyZy1sZXZlbC0zIHRoLAp0YWJsZS5kYXRhVGFibGUgdHIuZHRyZy1ncm91cC5kdHJnLWxldmVsLTQgdGgsCnRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtNSB0aCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDUpOwogICAgcGFkZGluZy10b3A6IDAuMjVlbTsKICAgIHBhZGRpbmctYm90dG9tOiAwLjI1ZW07CiAgICBwYWRkaW5nLWxlZnQ6IDJlbTsKICAgIGZvbnQtc2l6ZTogMC45ZW07Cn0KdGFibGUuZGF0YVRhYmxlIHRyLmR0cmctZ3JvdXAuZHRyZy1sZXZlbC0yIHRoIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wMSk7CiAgICBwYWRkaW5nLWxlZnQ6IDIuNWVtOwp9CnRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtMyB0aCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDEpOwogICAgcGFkZGluZy1sZWZ0OiAzZW07Cn0KdGFibGUuZGF0YVRhYmxlIHRyLmR0cmctZ3JvdXAuZHRyZy1sZXZlbC00IHRoIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wMSk7CiAgICBwYWRkaW5nLWxlZnQ6IDMuNWVtOwp9CnRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtNSB0aCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDEpOwogICAgcGFkZGluZy1sZWZ0OiA0ZW07Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwIHRoIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKfQpodG1sLmRhcmsgdGFibGUuZGF0YVRhYmxlIHRyLmR0cmctZ3JvdXAuZHRyZy1sZXZlbC0xIHRoIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtMiB0aCwKaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtMyB0aCwKaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtNCB0aCwKaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdHJnLWdyb3VwLmR0cmctbGV2ZWwtNSB0aCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDEpOwp9CgpkaXYuZHRzIHsKICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7Cn0KZGl2LmR0cyB0Ym9keSB0aCwKZGl2LmR0cyB0Ym9keSB0ZCB7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CmRpdi5kdHMgZGl2LmR0c19sb2FkaW5nIHsKICAgIHotaW5kZXg6IDE7Cn0KZGl2LmR0cyBkaXYuZHRzX2xhYmVsIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAyMHB4OwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjgpOwogICAgY29sb3I6IHdoaXRlOwogICAgYm94LXNoYWRvdzogM3B4IDNweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgcGFkZGluZzogMC40ZW07CiAgICB6LWluZGV4OiAyOwogICAgZGlzcGxheTogbm9uZTsKfQpkaXYuZHRzIGRpdi5kdC1zY3JvbGwtYm9keSwKZGl2LmR0cyBkaXYuZGF0YVRhYmxlc19zY3JvbGxCb2R5IHsKICAgIGJhY2tncm91bmQ6IHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoCiAgICAgICAgNDVkZWcsCiAgICAgICAgcmdiYSgwLCAwLCAwLCAwLjAyNSksCiAgICAgICAgcmdiYSgwLCAwLCAwLCAwLjAyNSkgMTBweCwKICAgICAgICByZ2JhKDAsIDAsIDAsIDApIDEwcHgsCiAgICAgICAgcmdiYSgwLCAwLCAwLCAwKSAyMHB4CiAgICApOwp9CmRpdi5kdHMgZGl2LmR0LXNjcm9sbC1ib2R5IHRhYmxlLApkaXYuZHRzIGRpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHkgdGFibGUgewogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICB6LWluZGV4OiAyOwp9CmRpdi5kdHMgZGl2LmR0LWxlbmd0aCwKZGl2LmR0cyBkaXYuZHQtcGFnaW5nLApkaXYuZHRzIGRpdi5kYXRhVGFibGVzX3BhZ2luYXRlLApkaXYuZHRzIGRpdi5kYXRhVGFibGVzX2xlbmd0aCB7CiAgICBkaXNwbGF5OiBub25lOwp9Cmh0bWwuZGFyayBkaXYuZHRzIGRpdi5kdHNfbGFiZWwgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpOwogICAgY29sb3I6IGJsYWNrOwp9Cmh0bWwuZGFyayBkaXYuZHRzIGRpdi5kdC1zY3JvbGwtYm9keSwKaHRtbC5kYXJrIGRpdi5kdHMgZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSB7CiAgICBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KAogICAgICAgIDQ1ZGVnLAogICAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wMjUpLAogICAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wMjUpIDEwcHgsCiAgICAgICAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwKSAxMHB4LAogICAgICAgIHJnYmEoMjU1LCAyNTUsIDI1NSwgMCkgMjBweAogICAgKTsKfQpodG1sLmRhcmsgZGl2LmR0cyBkaXYuZHQtc2Nyb2xsLWJvZHkgdGFibGUsCmh0bWwuZGFyayBkaXYuZHRzIGRpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHkgdGFibGUgewogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZHQtaHRtbC1iYWNrZ3JvdW5kKTsKICAgIHotaW5kZXg6IDI7Cn0KCmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiB7CiAgICBvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OwogICAgei1pbmRleDogMjAwMiAhaW1wb3J0YW50Owp9CmRpdi5kdC1idXR0b24tY29sbGVjdGlvbiBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIHsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBwYWRkaW5nLWxlZnQ6IDFlbSAhaW1wb3J0YW50OwogICAgcGFkZGluZy1yaWdodDogMWVtICFpbXBvcnRhbnQ7Cn0KZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmR0Yi1jb2xsZWN0aW9uLWNsb3NlYWJsZSBkaXYuZHRzYi10aXRsZVJvdyB7CiAgICBwYWRkaW5nLXJpZ2h0OiA0MHB4Owp9Ci5kdHNiLWdyZXlzY2FsZSB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VjZWNlICFpbXBvcnRhbnQ7Cn0KZGl2LmR0c2ItbG9naWNDb250YWluZXIgLmR0c2ItZ3JleXNjYWxlIHsKICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgewogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7CiAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICBtYXJnaW4tYm90dG9tOiAxZW07CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgd2lkdGg6IDEwMCU7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBidXR0b24uZHRzYi1idXR0b24sCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgc2VsZWN0IHsKICAgIGZvbnQtc2l6ZTogMWVtOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItdGl0bGVSb3cgewogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7CiAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLXRpdGxlUm93IGRpdi5kdHNiLXRpdGxlIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHBhZGRpbmctdG9wOiAxNHB4Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItdGl0bGVSb3cgZGl2LmR0c2ItdGl0bGU6ZW1wdHkgewogICAgZGlzcGxheTogaW5saW5lOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItdGl0bGVSb3cgYnV0dG9uLmR0c2ItY2xlYXJBbGwgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgbWFyZ2luLWJvdHRvbTogMC44ZW07Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi12ZXJ0aWNhbCAuZHRzYi12YWx1ZSwKZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi12ZXJ0aWNhbCAuZHRzYi1kYXRhLApkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLXZlcnRpY2FsIC5kdHNiLWNvbmRpdGlvbiB7CiAgICBkaXNwbGF5OiBibG9jazsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGNsZWFyOiBib3RoOwogICAgbWFyZ2luLWJvdHRvbTogMC44ZW07Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBidXR0b24uZHRzYi1zZWFyY2ggewogICAgZmxvYXQ6IHJpZ2h0Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgYnV0dG9uLmR0c2ItY2xlYXJHcm91cCB7CiAgICBtYXJnaW46IDJweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHBhZGRpbmc6IDA7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1sb2dpY0NvbnRhaW5lciB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsKICAgIC1tb3otdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwogICAgLW8tdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwogICAgLW1zLXRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsKICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIG1hcmdpbi10b3A6IDAuOGVtOwogICAgbWFyZ2luLXJpZ2h0OiAwLjhlbTsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIHsKICAgIG1hcmdpbi1ib3R0b206IDAuOGVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7CiAgICBmbGV4LWZsb3c6IHJvdyB3cmFwOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgc2VsZWN0LmR0c2ItZHJvcERvd24sCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgaW5wdXQuZHRzYi1pbnB1dCB7CiAgICBwYWRkaW5nOiAwLjRlbTsKICAgIG1hcmdpbi1yaWdodDogMC44ZW07CiAgICBtaW4td2lkdGg6IDVlbTsKICAgIG1heC13aWR0aDogMjBlbTsKICAgIGNvbG9yOiBpbmhlcml0OwogICAgZm9udC1zaXplOiAxZW07Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBzZWxlY3QuZHRzYi1kcm9wRG93biBvcHRpb24uZHRzYi1ub3RJdGFsaWMsCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgaW5wdXQuZHRzYi1pbnB1dCBvcHRpb24uZHRzYi1ub3RJdGFsaWMgewogICAgZm9udC1zdHlsZTogbm9ybWFsOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgc2VsZWN0LmR0c2ItaXRhbGljIHsKICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGRpdi5kdHNiLWlucHV0Q29udCB7CiAgICBmbGV4OiAxOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGRpdi5kdHNiLWlucHV0Q29udCBzcGFuLmR0c2Itam9pbmVyIHsKICAgIG1hcmdpbi1yaWdodDogMC44ZW07Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBkaXYuZHRzYi1pbnB1dENvbnQgaW5wdXQuZHRzYi12YWx1ZSB7CiAgICB3aWR0aDogMzMlOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgZGl2LmR0c2ItaW5wdXRDb250IHNlbGVjdCwKZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBkaXYuZHRzYi1pbnB1dENvbnQgaW5wdXQgewogICAgaGVpZ2h0OiAxMDAlOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGRpdi5kdHNiLWJ1dHRvbkNvbnRhaW5lciB7CiAgICBtYXJnaW4tbGVmdDogYXV0bzsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGRpdi5kdHNiLWJ1dHRvbkNvbnRhaW5lciBidXR0b24uZHRzYi1kZWxldGUsCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgZGl2LmR0c2ItYnV0dG9uQ29udGFpbmVyIGJ1dHRvbi5kdHNiLXJpZ2h0LApkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGRpdi5kdHNiLWJ1dHRvbkNvbnRhaW5lciBidXR0b24uZHRzYi1sZWZ0IHsKICAgIG1hcmdpbi1yaWdodDogMC44ZW07Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBkaXYuZHRzYi1idXR0b25Db250YWluZXIgYnV0dG9uLmR0c2ItZGVsZXRlOmxhc3QtY2hpbGQsCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgZGl2LmR0c2ItYnV0dG9uQ29udGFpbmVyIGJ1dHRvbi5kdHNiLXJpZ2h0Omxhc3QtY2hpbGQsCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgZGl2LmR0c2ItYnV0dG9uQ29udGFpbmVyIGJ1dHRvbi5kdHNiLWxlZnQ6bGFzdC1jaGlsZCB7CiAgICBtYXJnaW4tcmlnaHQ6IDA7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTUwcHgpIHsKICAgIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZmxleC1mbG93OiBub25lOwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzdGFydDsKICAgICAgICBwYWRkaW5nLXJpZ2h0OiBjYWxjKDM1cHggKyAwLjhlbSk7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4OwogICAgfQogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYTpub3QoOmZpcnN0LWNoaWxkKSwKICAgIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWE6bm90KDpudGgtY2hpbGQoMikpLAogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYTpub3QoOmxhc3QtY2hpbGQpIHsKICAgICAgICBwYWRkaW5nLXRvcDogMC44ZW07CiAgICB9CiAgICBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhOmZpcnN0LWNoaWxkLAogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYTpudGgtY2hpbGQoMiksCiAgICBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhOmxhc3QtY2hpbGQgewogICAgICAgIHBhZGRpbmctdG9wOiAwZW07CiAgICB9CiAgICBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIHNlbGVjdC5kdHNiLWRyb3BEb3duLAogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBpbnB1dC5kdHNiLWlucHV0IHsKICAgICAgICBtYXgtd2lkdGg6IG5vbmU7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC44ZW07CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjhlbTsKICAgIH0KICAgIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgZGl2LmR0c2ItaW5wdXRDb250IHsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuOGVtOwogICAgfQogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBkaXYuZHRzYi1idXR0b25Db250YWluZXIgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB3aWR0aDogMzVweDsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtd3JhcDogd3JhcC1yZXZlcnNlOwogICAgICAgIHJpZ2h0OiAwOwogICAgfQogICAgZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBkaXYuZHRzYi1idXR0b25Db250YWluZXIgYnV0dG9uIHsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweCAhaW1wb3J0YW50OwogICAgfQp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgYnV0dG9uLApkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIHNlbGVjdC5kdHNiLWRyb3BEb3duLApkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGlucHV0IHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBidXR0b24uZHRzYi1idXR0b24gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIHBhZGRpbmc6IDAuNWVtIDFlbTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGZvbnQtc2l6ZTogMC44OGVtOwogICAgbGluZS1oZWlnaHQ6IDEuNmVtOwogICAgY29sb3I6IGluaGVyaXQ7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYmEoMjMwLCAyMzAsIDIzMCwgMC4xKSAwJSwgcmdiYSgwLCAwLCAwLCAwLjEpIDEwMCUpOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIG91dGxpbmU6IG5vbmU7CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGJ1dHRvbi5kdHNiLWJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2VjZWNlOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItbG9naWNDb250YWluZXIgewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDIzMCwgMjMwLCAyMzAsIDAuMSkgMCUsIHJnYmEoMCwgMCwgMCwgMC4xKSAxMDAlKTsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWxvZ2ljQ29udGFpbmVyIGJ1dHRvbiB7CiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgYnV0dG9uLmR0c2ItY2xlYXJHcm91cCB7CiAgICBtaW4td2lkdGg6IDJlbTsKICAgIHBhZGRpbmc6IDA7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBidXR0b24uZHRzYi1pcHRidG4gewogICAgbWluLXdpZHRoOiAxMDBweDsKICAgIHRleHQtYWxpZ246IGxlZnQ7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1sb2dpY0NvbnRhaW5lciB7CiAgICBib3JkZXI6IDFweCBzb2xpZDsKICAgIGJvcmRlci1jb2xvcjogI2NlY2VjZTsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgZmxleC13cmFwOiB3cmFwOwogICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwogICAgYWxpZ24tY29udGVudDogZmxleC1zdGFydDsKICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItbG9naWNDb250YWluZXIgYnV0dG9uLmR0c2ItbG9naWMgewogICAgYm9yZGVyOiBub25lOwogICAgYm9yZGVyLXJhZGl1czogMHB4OwogICAgZmxleC1ncm93OiAxOwogICAgZmxleC1zaHJpbms6IDA7CiAgICBmbGV4LWJhc2lzOiAzZW07CiAgICBtYXJnaW46IDBweDsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWxvZ2ljQ29udGFpbmVyIGJ1dHRvbi5kdHNiLWNsZWFyR3JvdXAgewogICAgYm9yZGVyOiBub25lOwogICAgYm9yZGVyLXJhZGl1czogMHB4OwogICAgd2lkdGg6IDJlbTsKICAgIG1hcmdpbjogMHB4Owp9CmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgc2VsZWN0LmR0c2ItZHJvcERvd24sCmRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItZ3JvdXAgZGl2LmR0c2ItY3JpdGVyaWEgaW5wdXQuZHRzYi1pbnB1dCB7CiAgICBib3JkZXI6IDFweCBzb2xpZDsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIHNlbGVjdC5kdHNiLWNvbmRpdGlvbiB7CiAgICBib3JkZXItY29sb3I6ICM0OGIxM2M7Cn0KZGl2LmR0c2Itc2VhcmNoQnVpbGRlciBkaXYuZHRzYi1ncm91cCBkaXYuZHRzYi1jcml0ZXJpYSBzZWxlY3QuZHRzYi1kYXRhIHsKICAgIGJvcmRlci1jb2xvcjogI2U3MGYwMDsKfQpkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIHNlbGVjdC5kdHNiLXZhbHVlLApkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGRpdi5kdHNiLWdyb3VwIGRpdi5kdHNiLWNyaXRlcmlhIGlucHV0LmR0c2ItdmFsdWUgewogICAgYm9yZGVyLWNvbG9yOiAjMDA2OWJhOwp9Cmh0bWwuZGFyayBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGJ1dHRvbi5kdHNiLWJ1dHRvbiwKaHRtbC5kYXJrIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgc2VsZWN0LmR0c2ItZHJvcERvd24sCmh0bWwuZGFyayBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIGlucHV0LmR0c2ItaW5wdXQgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDY2LCA2OSwgNzMpICFpbXBvcnRhbnQ7CiAgICBjb2xvci1zY2hlbWU6IGRhcms7Cn0KaHRtbC5kYXJrIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgYnV0dG9uLmR0c2ItYnV0dG9uIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYig4OSwgOTEsIDk0KTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgYnV0dG9uLmR0c2ItYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMTc5LCAxNzksIDE3OSwgMC4xNSk7Cn0KaHRtbC5kYXJrIGRpdi5kdHNiLXNlYXJjaEJ1aWxkZXIgZGl2LmR0c2ItbG9naWNDb250YWluZXIgewogICAgYm9yZGVyOiAxcHggc29saWQgcmdiKDg5LCA5MSwgOTQpOwp9Cmh0bWwuZGFyayBkaXYuZHRzYi1zZWFyY2hCdWlsZGVyIC5kdHNiLWdyZXlzY2FsZSB7CiAgICBib3JkZXItY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSAhaW1wb3J0YW50Owp9Cgp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyID4gLnNlbGVjdGVkIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTMsIDExMCwgMjUzLCAwLjkpOwogICAgY29sb3I6IHdoaXRlOwp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIgPiAuZHQtc2VsZWN0IHsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGhlYWQgPiB0ciA+IC5kdC1zZWxlY3QgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9CnRhYmxlLmRhdGFUYWJsZSBpbnB1dC5kdC1zZWxlY3QtY2hlY2tib3ggewogICAgYXBwZWFyYW5jZTogbm9uZTsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHdpZHRoOiAxMnB4OwogICAgaGVpZ2h0OiAxMnB4OwogICAgYm9yZGVyOiAxcHggc29saWQ7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgbWFyZ2luLXRvcDogMXB4OwogICAgY29sb3I6IGluaGVyaXQ7CiAgICBmb250LXNpemU6IDIwcHg7CiAgICBsaW5lLWhlaWdodDogMWVtOwp9CnRhYmxlLmRhdGFUYWJsZSBpbnB1dC5kdC1zZWxlY3QtY2hlY2tib3g6Y2hlY2tlZDphZnRlciB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGNvbnRlbnQ6ICfinJMnOwogICAgbWFyZ2luLXRvcDogLThweDsKfQp0YWJsZS5kYXRhVGFibGUgaW5wdXQuZHQtc2VsZWN0LWNoZWNrYm94OmluZGV0ZXJtaW5hdGU6YWZ0ZXIgewogICAgZGlzcGxheTogYmxvY2s7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBjb250ZW50OiAnICc7CiAgICB0b3A6IDNweDsKICAgIGxlZnQ6IDNweDsKICAgIGhlaWdodDogNHB4OwogICAgd2lkdGg6IDRweDsKICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOwogICAgYm9yZGVyLXJhZGl1czogMnB4Owp9CnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIuc2VsZWN0ZWQgaW5wdXQuZHQtc2VsZWN0LWNoZWNrYm94OmNoZWNrZWQgewogICAgYm9yZGVyOiAxcHggc29saWQ7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ciA+IHRkLnNlbGVjdC1jaGVja2JveCwKdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ciA+IHRoLnNlbGVjdC1jaGVja2JveCB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ciA+IHRkLnNlbGVjdC1jaGVja2JveDpiZWZvcmUsCnRhYmxlLmRhdGFUYWJsZSA+IHRib2R5ID4gdHIgPiB0aC5zZWxlY3QtY2hlY2tib3g6YmVmb3JlIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiA1MCU7CiAgICBsZWZ0OiA1MCU7CiAgICB3aWR0aDogMTJweDsKICAgIGhlaWdodDogMTJweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBjb250ZW50OiAnICc7CiAgICBtYXJnaW4tdG9wOiAtNnB4OwogICAgbWFyZ2luLWxlZnQ6IC02cHg7CiAgICBib3JkZXI6IDFweCBzb2xpZDsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQp0YWJsZS5kYXRhVGFibGUgPiB0Ym9keSA+IHRyLnNlbGVjdGVkID4gdGQuc2VsZWN0LWNoZWNrYm94OmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlID4gdGJvZHkgPiB0ci5zZWxlY3RlZCA+IHRoLnNlbGVjdC1jaGVja2JveDpiZWZvcmUgewogICAgYm9yZGVyOiAxcHggc29saWQ7CiAgICBjb250ZW50OiAn4pyTJzsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIGxpbmUtaGVpZ2h0OiA2cHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KdGFibGUuZGF0YVRhYmxlLmNvbXBhY3QgPiB0Ym9keSA+IHRyID4gdGQuc2VsZWN0LWNoZWNrYm94OmJlZm9yZSwKdGFibGUuZGF0YVRhYmxlLmNvbXBhY3QgPiB0Ym9keSA+IHRyID4gdGguc2VsZWN0LWNoZWNrYm94OmJlZm9yZSB7CiAgICBtYXJnaW4tdG9wOiAtMTJweDsKfQp0YWJsZS5kYXRhVGFibGUuY29tcGFjdCA+IHRib2R5ID4gdHIuc2VsZWN0ZWQgPiB0ZC5zZWxlY3QtY2hlY2tib3g6YWZ0ZXIsCnRhYmxlLmRhdGFUYWJsZS5jb21wYWN0ID4gdGJvZHkgPiB0ci5zZWxlY3RlZCA+IHRoLnNlbGVjdC1jaGVja2JveDphZnRlciB7CiAgICBtYXJnaW4tdG9wOiAtMTZweDsKfQpkaXYuZHQtY29udGFpbmVyIHNwYW4uc2VsZWN0LWluZm8sCmRpdi5kdC1jb250YWluZXIgc3Bhbi5zZWxlY3QtaXRlbSB7CiAgICBtYXJnaW4tbGVmdDogMC41ZW07Cn0KaHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSBpbnB1dC5kdC1zZWxlY3QtY2hlY2tib3g6aW5kZXRlcm1pbmF0ZTphZnRlciwKaHRtbFtkYXRhLWJzLXRoZW1lPSdkYXJrJ10gdGFibGUuZGF0YVRhYmxlIGlucHV0LmR0LXNlbGVjdC1jaGVja2JveDppbmRldGVybWluYXRlOmFmdGVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDY0MHB4KSB7CiAgICBkaXYuZHQtY29udGFpbmVyIHNwYW4uc2VsZWN0LWluZm8sCiAgICBkaXYuZHQtY29udGFpbmVyIHNwYW4uc2VsZWN0LWl0ZW0gewogICAgICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgfQp9Cg=="
            },
            {
                "name": "subEntityArray.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "Y29uc3Qgc3ViRW50aXR5QXJyYXkgPSBbCiAgICB7CiAgICAgICAgIiI6ICJFbnRpdHkgLSBBZG1pbiIKICAgIH0sCiAgICB7CiAgICAgICAgIkRBVCAtIEUtSiBFbGVjdHJpYyBUJkQiOiAiRW50aXR5IC0gRS1KIEVsZWN0cmljIFQmRCIKICAgIH0sCiAgICB7CiAgICAgICAgIkRBVCAtIFRlY2ggU2VydiI6ICJFbnRpdHkgLSBUZWNoIFNlcnYiCiAgICB9LAogICAgewogICAgICAgICJEQVQgLSBCZWFjaHZpZXciOiAiRW50aXR5IC0gQmVhY2h2aWV3IgogICAgfSwKICAgIHsKICAgICAgICAiREFUIC0gVERDMiwgTExDIEVuZ2luZWVyaW5nIEZpcm0iOiAiRW50aXR5IC0gVERDMiwgTExDIEVuZ2luZWVyaW5nIEZpcm0iCiAgICB9LAogICAgewogICAgICAgICJEQVQgLSBQQ0EgU2VydmljZXMiOiAiRW50aXR5IC0gUENBIFNlcnZpY2VzIgogICAgfSwKICAgIHsKICAgICAgICAiREFUIC0gRG91YmxlIERpYW1vbmQgVXRpbGl0eSI6ICJFbnRpdHkgLSBEb3VibGUgRGlhbW9uZCBVdGlsaXR5IgogICAgfSwKICAgIHsKICAgICAgICAiREFUIC0gUG93ZXJsaW5lIFNvbHV0aW9ucyI6ICJFbnRpdHkgLSBQb3dlcmxpbmUgU29sdXRpb25zIgogICAgfSwKICAgIHsKICAgICAgICAiREFUIC0gVGl0YW4gVXRpbGl0eSI6ICJFbnRpdHkgLSBUaXRhbiBVdGlsaXR5IgogICAgfSwKICAgIHsKICAgICAgICAiREFUIC0gQmxhY2tvdXQiOiAiRW50aXR5IC0gQmxhY2tvdXQiCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gSzIgSW5kdXN0cmlhbCI6ICJFbnRpdHkgLSBLMiBJbmR1c3RyaWFsIgogICAgfSwKICAgIHsKICAgICAgICAiSFZBQyAtIEFybWFkYSI6ICJFbnRpdHkgLSBBcm1hZGEiCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gQnVsbHkiOiAiRW50aXR5IC0gQnVsbHkiCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gQmVudG9uIjogIkVudGl0eSAtIEJlbnRvbiIKICAgIH0sCiAgICB7CiAgICAgICAgIkhWQUMgLSBWYW50YWdlIjogIkVudGl0eSAtIFZhbnRhZ2UiCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gTWVyaWRpYW4iOiAiRW50aXR5IC0gTWVyaWRpYW4iCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gVmVjdHJhIEh5ZHJvdmFjIjogIkVudGl0eSAtIFZlY3RyYSBIeWRyb3ZhYyIKICAgIH0sCiAgICB7CiAgICAgICAgIkhWQUMgLSBUaGUgU3VwZXJpb3IgSHlkcm92YWMiOiAiRW50aXR5IC0gVGhlIFN1cGVyaW9yIEh5ZHJvdmFjIgogICAgfSwKICAgIHsKICAgICAgICAiSFZBQyAtIERlbHRhIERheWxpZ2h0aW5nIjogIkVudGl0eSAtIERlbHRhIERheWxpZ2h0aW5nIgogICAgfSwKICAgIHsKICAgICAgICAiSFZBQyAtIFRlcnJhSmV0IFNvbHV0aW9ucyI6ICJFbnRpdHkgLSBUZXJyYUpldCBTb2x1dGlvbnMiCiAgICB9LAogICAgewogICAgICAgICJIVkFDIC0gUHJvIFZhYy9DeWNsb25lIjogIkVudGl0eSAtIFBybyBWYWMvQ3ljbG9uZSIKICAgIH0sCiAgICB7CiAgICAgICAgIkhWQUMgLSBTdHJlYW1UZWNoIEluYyI6ICJFbnRpdHkgLSBTdHJlYW1UZWNoIEluYyIKICAgIH0sCiAgICB7CiAgICAgICAgIkxvZ2lzdGljcyAtIERSRyBMb2dpc3RpY3MiOiAiRW50aXR5IC0gRFJHIExvZ2lzdGljcyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIE1hdmVyaWNrIjogIkVudGl0eSAtIE1hdmVyaWNrIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gSiZMIHN0b3JtIHNlcnZpY2VzIjogIkVudGl0eSAtIEomTCBzdG9ybSBzZXJ2aWNlcyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEIgJiBCIjogIkVudGl0eSAtIEIgJiBCIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUyAmIFMiOiAiRW50aXR5IC0gUyAmIFMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBVdGlsaXR5IFN0b3JtIFJlc3BvbnNlIjogIkVudGl0eSAtIFV0aWxpdHkgU3Rvcm0gUmVzcG9uc2UiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBFYXN0IEJheSBFbGVjdHJpYyI6ICJFbnRpdHkgLSBFYXN0IEJheSBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEVDUE5MIjogIkVudGl0eSAtIEVDUE5MIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gR29sZHNtaXRoIFVuaXQgU2VydmljZXMiOiAiRW50aXR5IC0gR29sZHNtaXRoIFVuaXQgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBNYXJ0aW4gSW5jIFBvd2VybGluZSBDb25zdHJ1Y3Rpb24iOiAiRW50aXR5IC0gTWFydGluIEluYyBQb3dlcmxpbmUgQ29uc3RydWN0aW9uIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gU2NvdHQgUG9sZSBMaW5lIjogIkVudGl0eSAtIFNjb3R0IFBvbGUgTGluZSIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFByZW1pZXIgUG93ZXIiOiAiRW50aXR5IC0gUHJlbWllciBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFByaW9yaXR5IEVsZWN0cmljIjogIkVudGl0eSAtIFByaW9yaXR5IEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQ29yYml0dCBQb3dlciI6ICJFbnRpdHkgLSBDb3JiaXR0IFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gVGF5bG9yIEVsZWN0cmljIjogIkVudGl0eSAtIFRheWxvciBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIERqIFBvd2VyIjogIkVudGl0eSAtIERqIFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gTW91bnRpYW5zaWRlIFBvd2VyIjogIkVudGl0eSAtIE1vdW50aWFuc2lkZSBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFNoZWx0b24gRW5lcmd5IjogIkVudGl0eSAtIFNoZWx0b24gRW5lcmd5IgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUGhhc2UgMyI6ICJFbnRpdHkgLSBQaGFzZSAzIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gRXhvZHVzZSBFbmVyZ3kiOiAiRW50aXR5IC0gRXhvZHVzZSBFbmVyZ3kiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBGdXNpb24gUG93ZXIiOiAiRW50aXR5IC0gRnVzaW9uIFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUXVhbGl0eSBQb3dlcmxpbmUgTExDIjogIkVudGl0eSAtIFF1YWxpdHkgUG93ZXJsaW5lIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFJhaW5lcyBFbGVjdHJpYyI6ICJFbnRpdHkgLSBSYWluZXMgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBBUEVYIjogIkVudGl0eSAtIEFQRVgiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBHcmlwIFBvd2VybGluZSI6ICJFbnRpdHkgLSBHcmlwIFBvd2VybGluZSIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEJyYXZlcyI6ICJFbnRpdHkgLSBCcmF2ZXMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBRdWFpbCBFbmVyZ3kiOiAiRW50aXR5IC0gUXVhaWwgRW5lcmd5IgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gVG9wIG9mIHRoZSBMaW5lIEVsZWN0aWMiOiAiRW50aXR5IC0gVG9wIG9mIHRoZSBMaW5lIEVsZWN0aWMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBMb25lc3RhciI6ICJFbnRpdHkgLSBMb25lc3RhciIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFBvd2VyIFN0YW5kYXJkIjogIkVudGl0eSAtIFBvd2VyIFN0YW5kYXJkIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQkxTIEVsZWN0cmljIjogIkVudGl0eSAtIEJMUyBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIDNTIjogIkVudGl0eSAtIDNTIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gRy1Qb3dlciI6ICJFbnRpdHkgLSBHLVBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gR290IFV0aWxpdGllcywgTExDIjogIkVudGl0eSAtIEdvdCBVdGlsaXRpZXMsIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEJsb2VjaGVyIEVsZWN0cmljIjogIkVudGl0eSAtIEJsb2VjaGVyIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQml4YnkiOiAiRW50aXR5IC0gQml4YnkiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBUICYgIFQiOiAiRW50aXR5IC0gVCAmICBUIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUmVuZWdhZGUgR3JvdXAiOiAiRW50aXR5IC0gUmVuZWdhZGUgR3JvdXAiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBCYXR0ZSBQb2xlIExpbmUgTFREIjogIkVudGl0eSAtIEJhdHRlIFBvbGUgTGluZSBMVEQiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBCJk4gVHJlZSBhbmQgRGVicmlzIExMQyI6ICJFbnRpdHkgLSBCJk4gVHJlZSBhbmQgRGVicmlzIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIFBMQyI6ICJFbnRpdHkgLSBQTEMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBTdGFyZmlyZSBFbmVyZ3kiOiAiRW50aXR5IC0gU3RhcmZpcmUgRW5lcmd5IgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gNEcgRWxlY3RyaWMiOiAiRW50aXR5IC0gNEcgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBIUlQgUG93ZXIgU2VydmljZXMiOiAiRW50aXR5IC0gSFJUIFBvd2VyIFNlcnZpY2VzIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQ29ybmVyc3RvbmUiOiAiRW50aXR5IC0gQ29ybmVyc3RvbmUiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSA1RSBQb3dlcmxpbmUiOiAiRW50aXR5IC0gNUUgUG93ZXJsaW5lIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gVmFybmVsbCBQb3dlciI6ICJFbnRpdHkgLSBWYXJuZWxsIFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUiAmIFIgUG93ZXJsaW5lIjogIkVudGl0eSAtIFIgJiBSIFBvd2VybGluZSIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIENIVS1DT04gSU5DIjogIkVudGl0eSAtIENIVS1DT04gSU5DIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gRGFyayBIb3JzZSI6ICJFbnRpdHkgLSBEYXJrIEhvcnNlIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gVCZSIjogIkVudGl0eSAtIFQmUiIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEtpbGxlbiI6ICJFbnRpdHkgLSBLaWxsZW4iCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBYT0ggUG93ZXJsaW5lIjogIkVudGl0eSAtIFhPSCBQb3dlcmxpbmUiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBDZW50cmFsIFBvd2VybGluZSBMVEQiOiAiRW50aXR5IC0gQ2VudHJhbCBQb3dlcmxpbmUgTFREIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gVHJpLU1ncm91cCI6ICJFbnRpdHkgLSBUcmktTWdyb3VwIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gTExDIEludGVybmF0aW9uYWwiOiAiRW50aXR5IC0gTExDIEludGVybmF0aW9uYWwiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBUcmFkZXdpbmQsIFRXQyI6ICJFbnRpdHkgLSBUcmFkZXdpbmQsIFRXQyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEVsZWN0cmljb20iOiAiRW50aXR5IC0gRWxlY3RyaWNvbSIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIExCTlAgUmVzdG9yYXRpb24gYW5kIENvbnN0cnVjdGlvbiwgTExDIjogIkVudGl0eSAtIExCTlAgUmVzdG9yYXRpb24gYW5kIENvbnN0cnVjdGlvbiwgTExDIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gUiZNICBQb2xlbGluZSI6ICJFbnRpdHkgLSBSJk0gIFBvbGVsaW5lIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQnJleGFuIjogIkVudGl0eSAtIEJyZXhhbiIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEJsYWNrZmllbGQgSW5kdXN0cmllcyBMTEMiOiAiRW50aXR5IC0gQmxhY2tmaWVsZCBJbmR1c3RyaWVzIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIk5vbi1VbmlvbiAtIEZvcmNlIjogIkVudGl0eSAtIEZvcmNlIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gR3JlZW4gQ291bnRyeSI6ICJFbnRpdHkgLSBHcmVlbiBDb3VudHJ5IgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQ3VycmVudCBVdGlsaXR5IFNlcnZpY2VzIExMQyI6ICJFbnRpdHkgLSBDdXJyZW50IFV0aWxpdHkgU2VydmljZXMgTExDIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQ292aW4iOiAiRW50aXR5IC0gQ292aW4iCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBXaGl0ZSBXb2xmIFV0aWxpdHkiOiAiRW50aXR5IC0gV2hpdGUgV29sZiBVdGlsaXR5IgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gQnVybGluIFBvd2VybGluZSI6ICJFbnRpdHkgLSBCdXJsaW4gUG93ZXJsaW5lIgogICAgfSwKICAgIHsKICAgICAgICAiTm9uLVVuaW9uIC0gT3ZlciBhbmQgVW5kZXIiOiAiRW50aXR5IC0gT3ZlciBhbmQgVW5kZXIiCiAgICB9LAogICAgewogICAgICAgICJOb24tVW5pb24gLSBKQUIiOiAiRW50aXR5IC0gSkFCIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBEaXZlcnNpZmllZCBVdGlsaXR5IFNlcnZpY2VzIjogIkVudGl0eSAtIERpdmVyc2lmaWVkIFV0aWxpdHkgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFRyYXZvbHQiOiAiRW50aXR5IC0gVHJhdm9sdCIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQWdvc3Rpbm8gVXRpbGl0aWVzIjogIkVudGl0eSAtIEFnb3N0aW5vIFV0aWxpdGllcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUGxhdGludW0iOiAiRW50aXR5IC0gUGxhdGludW0iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFZhbnRhZ2UgQ29udHJhY3RvcnMiOiAiRW50aXR5IC0gVmFudGFnZSBDb250cmFjdG9ycyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gSHlkYWtlci1XaGVhdGxha2UgQ29tcGFueSI6ICJFbnRpdHkgLSBIeWRha2VyLVdoZWF0bGFrZSBDb21wYW55IgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBXaWxsZXkgQ29uc3RydWN0aW9uIjogIkVudGl0eSAtIFdpbGxleSBDb25zdHJ1Y3Rpb24iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIER1Qm9pcyBFbGVjdHJpYyI6ICJFbnRpdHkgLSBEdUJvaXMgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFByZW1pZXIgVm9sdGFnZSI6ICJFbnRpdHkgLSBQcmVtaWVyIFZvbHRhZ2UiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEpKTSBQb3dlciBMTEMiOiAiRW50aXR5IC0gSkpNIFBvd2VyIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQy1waGFzZSI6ICJFbnRpdHkgLSBDLXBoYXNlIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBUaW1iZXIgRWxlY3RyaWMgSW5jIjogIkVudGl0eSAtIFRpbWJlciBFbGVjdHJpYyBJbmMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEFkdmVudCI6ICJFbnRpdHkgLSBBZHZlbnQiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFBvd2VyIFByb3MiOiAiRW50aXR5IC0gUG93ZXIgUHJvcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gVzIgRW5lcmd5IjogIkVudGl0eSAtIFcyIEVuZXJneSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gTGluZSBFbGVjdHJpYyI6ICJFbnRpdHkgLSBMaW5lIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBNaWR3ZXN0IFBvd2VybGluZSI6ICJFbnRpdHkgLSBNaWR3ZXN0IFBvd2VybGluZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQWVxdWl0YXMgUG93ZXIiOiAiRW50aXR5IC0gQWVxdWl0YXMgUG93ZXIiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFdBUkQiOiAiRW50aXR5IC0gV0FSRCIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQmFpbGV5IGFuZCBCYWlsZXkiOiAiRW50aXR5IC0gQmFpbGV5IGFuZCBCYWlsZXkiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEFwcGFsYWNoaWFuIFV0aWx0aXkiOiAiRW50aXR5IC0gQXBwYWxhY2hpYW4gVXRpbHRpeSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gRHluYW1pYyBVdGlsaXR5IFNvbHV0aW9ucyI6ICJFbnRpdHkgLSBEeW5hbWljIFV0aWxpdHkgU29sdXRpb25zIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBFYXN0IENvYXN0IFBvd2VybGluZSI6ICJFbnRpdHkgLSBFYXN0IENvYXN0IFBvd2VybGluZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gU3RhdGUgTGluZSBDb25zdHJ1Y3Rpb24iOiAiRW50aXR5IC0gU3RhdGUgTGluZSBDb25zdHJ1Y3Rpb24iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEguUi4gUmljaGFyZHNvbiI6ICJFbnRpdHkgLSBILlIuIFJpY2hhcmRzb24iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFZFQyI6ICJFbnRpdHkgLSBWRUMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEsyVyBVdGlsaXRpZXMiOiAiRW50aXR5IC0gSzJXIFV0aWxpdGllcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQXJ0aXMgUG93ZXIiOiAiRW50aXR5IC0gQXJ0aXMgUG93ZXIiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEpGIEVsZWN0cmljIjogIkVudGl0eSAtIEpGIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBQb3dlciBEZWxpdmVyeSBBbGxpYW5jZSI6ICJFbnRpdHkgLSBQb3dlciBEZWxpdmVyeSBBbGxpYW5jZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gVVBJIjogIkVudGl0eSAtIFVQSSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gS2F0ZXJpIHBvd2VybGluZSI6ICJFbnRpdHkgLSBLYXRlcmkgcG93ZXJsaW5lIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBCcmlnaHQgU3RhciI6ICJFbnRpdHkgLSBCcmlnaHQgU3RhciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gTGliZXJ0eSBFbGVjdHJpYyBMaW5lIEJ1aWxkZXJzIjogIkVudGl0eSAtIExpYmVydHkgRWxlY3RyaWMgTGluZSBCdWlsZGVycyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gSGF3a2xpbmUgQ29udHJ1Y3Rpb24iOiAiRW50aXR5IC0gSGF3a2xpbmUgQ29udHJ1Y3Rpb24iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFZhbGxleSBTdG9ybSBTZXJ2aWNlcyI6ICJFbnRpdHkgLSBWYWxsZXkgU3Rvcm0gU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIDNQaGFzZSBQb3dlciI6ICJFbnRpdHkgLSAzUGhhc2UgUG93ZXIiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEdyaWQgUG93ZXIiOiAiRW50aXR5IC0gR3JpZCBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gTWFjIFBvd2VyIjogIkVudGl0eSAtIE1hYyBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUmVkIFJvdmVyIjogIkVudGl0eSAtIFJlZCBSb3ZlciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gVGhvbXBzb24gSFYgU3Rvcm0gUmVzdG9yYXRpb24iOiAiRW50aXR5IC0gVGhvbXBzb24gSFYgU3Rvcm0gUmVzdG9yYXRpb24iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIExvY2tlJ3MgRWxlY3RyaWNhbCBMaW1pdGVkIjogIkVudGl0eSAtIExvY2tlJ3MgRWxlY3RyaWNhbCBMaW1pdGVkIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBHcmV5IFN0b25lIjogIkVudGl0eSAtIEdyZXkgU3RvbmUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEphY2tzb24gJiBKYWNrc29uIjogIkVudGl0eSAtIEphY2tzb24gJiBKYWNrc29uIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBCYWNrYm9uZSI6ICJFbnRpdHkgLSBCYWNrYm9uZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gRUVBIjogIkVudGl0eSAtIEVFQSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gSTgwIjogIkVudGl0eSAtIEk4MCIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gRm9yY2UgRWxlY3RyaWMiOiAiRW50aXR5IC0gRm9yY2UgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEZVU0UgRWxlY3RyaWMgTExDIjogIkVudGl0eSAtIEZVU0UgRWxlY3RyaWMgTExDIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBIb2xsYW5kIFBvd2VyIjogIkVudGl0eSAtIEhvbGxhbmQgUG93ZXIiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIE1hcGxlIENpdHkgRWxlY3RyaWMiOiAiRW50aXR5IC0gTWFwbGUgQ2l0eSBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gSGFtcHRvbiBUZWRkZXIgRWxlY3RyaWMiOiAiRW50aXR5IC0gSGFtcHRvbiBUZWRkZXIgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEt1aGFyY2hpY2sgQ29uc3RydWN0aW9uIjogIkVudGl0eSAtIEt1aGFyY2hpY2sgQ29uc3RydWN0aW9uIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBBbHN1cCAmIEJyb3RoZXJzIExMQyI6ICJFbnRpdHkgLSBBbHN1cCAmIEJyb3RoZXJzIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQWxwaGEgT21lZ2EiOiAiRW50aXR5IC0gQWxwaGEgT21lZ2EiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEVkZ2FyIEVsZWN0cmljIjogIkVudGl0eSAtIEVkZ2FyIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBFeGN1cnNpb24gTGluZSBDb25zdHJ1Y3Rpb24iOiAiRW50aXR5IC0gRXhjdXJzaW9uIExpbmUgQ29uc3RydWN0aW9uIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBQb3dlciBTb3VyY2UgT25lIjogIkVudGl0eSAtIFBvd2VyIFNvdXJjZSBPbmUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEtlc3MgTGluZSI6ICJFbnRpdHkgLSBLZXNzIExpbmUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFByYXhlbCBMaW5lIFNlcnZpY2VzIjogIkVudGl0eSAtIFByYXhlbCBMaW5lIFNlcnZpY2VzIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBMaW5lIENyYWZ0IjogIkVudGl0eSAtIExpbmUgQ3JhZnQiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIERhbmVsbGEgQ29uc3RydWN0aW9uIjogIkVudGl0eSAtIERhbmVsbGEgQ29uc3RydWN0aW9uIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBWaXNpb24gVXRpbGl0aWVzIjogIkVudGl0eSAtIFZpc2lvbiBVdGlsaXRpZXMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFNXIFBvd2VyIExMQyI6ICJFbnRpdHkgLSBTVyBQb3dlciBMTEMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEJIIEVsZWN0cmljIjogIkVudGl0eSAtIEJIIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBFbGVjbm9yIEhhd2tleWUiOiAiRW50aXR5IC0gRWxlY25vciBIYXdrZXllIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBHUEMiOiAiRW50aXR5IC0gR1BDIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBHTUIiOiAiRW50aXR5IC0gR01CIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBVVEVDIjogIkVudGl0eSAtIFVURUMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEtSIFV0aWxpdGllcyBMTEMiOiAiRW50aXR5IC0gS1IgVXRpbGl0aWVzIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQWx0aXR1ZGUgRW5lcmd5IjogIkVudGl0eSAtIEFsdGl0dWRlIEVuZXJneSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gU2FmZSBab25lIExpbmUiOiAiRW50aXR5IC0gU2FmZSBab25lIExpbmUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEdvb2QgT+KAmWwgQm95cyI6ICJFbnRpdHkgLSBHb29kIE/igJlsIEJveXMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIDcgVXRpbGl0eSBTZXJ2aWNlcyI6ICJFbnRpdHkgLSA3IFV0aWxpdHkgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEhvb3NpZXIiOiAiRW50aXR5IC0gSG9vc2llciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gR3JheXMgUG93ZXIgU3VwcGx5IjogIkVudGl0eSAtIEdyYXlzIFBvd2VyIFN1cHBseSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUGlwZXMgVXRpbGl0eSI6ICJFbnRpdHkgLSBQaXBlcyBVdGlsaXR5IgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBEZWx0YSBTZXJ2aWNlcyI6ICJFbnRpdHkgLSBEZWx0YSBTZXJ2aWNlcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gVW5pdGVkIFBvd2VybGluZSBTb2x1dGlvbnMiOiAiRW50aXR5IC0gVW5pdGVkIFBvd2VybGluZSBTb2x1dGlvbnMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFRMSCBQb3dlciI6ICJFbnRpdHkgLSBUTEggUG93ZXIiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFNQRSI6ICJFbnRpdHkgLSBTUEUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIERvbWluYW50IFBvd2VyIjogIkVudGl0eSAtIERvbWluYW50IFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBKTlIgU29sdXRpb25zLCBMTEMiOiAiRW50aXR5IC0gSk5SIFNvbHV0aW9ucywgTExDIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBDYXBpdGFsIExpbmUgRWxlY3RyaWMiOiAiRW50aXR5IC0gQ2FwaXRhbCBMaW5lIEVsZWN0cmljIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBCbGFjayZNY2RvbmFsZCI6ICJFbnRpdHkgLSBCbGFjayZNY2RvbmFsZCIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUGF0cmlvdCBQb3dlciI6ICJFbnRpdHkgLSBQYXRyaW90IFBvd2VyIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBQaW5uYWNsZSBVbmlmaWVkIExMQyI6ICJFbnRpdHkgLSBQaW5uYWNsZSBVbmlmaWVkIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQnJvdGhlcnMgQnJvdGhlcnMiOiAiRW50aXR5IC0gQnJvdGhlcnMgQnJvdGhlcnMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFJlYWQgRWxlY3RyaWMiOiAiRW50aXR5IC0gUmVhZCBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gRGl2ZXJnZW50IEFsbGlhbmNlIjogIkVudGl0eSAtIERpdmVyZ2VudCBBbGxpYW5jZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gT3Jpb24gVXRpbGl0eSBDb250cmFjdG9ycywgTExDIjogIkVudGl0eSAtIE9yaW9uIFV0aWxpdHkgQ29udHJhY3RvcnMsIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQkVTQ08iOiAiRW50aXR5IC0gQkVTQ08iCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEF0a2lucyI6ICJFbnRpdHkgLSBBdGtpbnMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIENvbm5lY3QgQXRsYW50aWMgVXRpbGl0aWVzIjogIkVudGl0eSAtIENvbm5lY3QgQXRsYW50aWMgVXRpbGl0aWVzIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBGZXJyaWVyYSBXZXN0IjogIkVudGl0eSAtIEZlcnJpZXJhIFdlc3QiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEhhc3RpbmdzIjogIkVudGl0eSAtIEhhc3RpbmdzIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBBbGxpYW5jZSBQb3dlcmxpbmUiOiAiRW50aXR5IC0gQWxsaWFuY2UgUG93ZXJsaW5lIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBTTSBFbGVjdHJpYyI6ICJFbnRpdHkgLSBTTSBFbGVjdHJpYyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUHJlbWl1bSBVdGlsaXR5IjogIkVudGl0eSAtIFByZW1pdW0gVXRpbGl0eSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gSG9iYnMgRWxlY3RyaWMgTExDIjogIkVudGl0eSAtIEhvYmJzIEVsZWN0cmljIExMQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQ29wcGVyIGFuZCBjYWJsZSI6ICJFbnRpdHkgLSBDb3BwZXIgYW5kIGNhYmxlIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBXYXJyaW9yIEVsZWN0cmljIjogIkVudGl0eSAtIFdhcnJpb3IgRWxlY3RyaWMiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFBlYWNoZXMgUG93ZXIiOiAiRW50aXR5IC0gUGVhY2hlcyBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gUG93ZXJsaW5lIENvbnN0cnVjdGlvbiBTZXJ2aWNlcyI6ICJFbnRpdHkgLSBQb3dlcmxpbmUgQ29uc3RydWN0aW9uIFNlcnZpY2VzIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBGbG9yeSBMaW5lIjogIkVudGl0eSAtIEZsb3J5IExpbmUiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIFBSSCI6ICJFbnRpdHkgLSBQUkgiCiAgICB9LAogICAgewogICAgICAgICJVbmlvbiAtIEExIFV0aWxpdHkiOiAiRW50aXR5IC0gQTEgVXRpbGl0eSIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gRCZUIFBvd2VyIjogIkVudGl0eSAtIEQmVCBQb3dlciIKICAgIH0sCiAgICB7CiAgICAgICAgIlVuaW9uIC0gQVZPIEVsZWN0cmljIExMQyI6ICJFbnRpdHkgLSBBVk8gRWxlY3RyaWMgTExDIgogICAgfSwKICAgIHsKICAgICAgICAiVW5pb24gLSBHcmlkIFNlcnZpY2VzIjogIkVudGl0eSAtIEdyaWQgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBBbWVyaWNhbiBGb3Jlc3RyeSBTZXJ2aWNlcyI6ICJFbnRpdHkgLSBBbWVyaWNhbiBGb3Jlc3RyeSBTZXJ2aWNlcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIFRyZWUgUHJvIjogIkVudGl0eSAtIFRyZWUgUHJvIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gUGxhdGludW0gTGFuZCAmIERpcnQgU2VydmljZXMiOiAiRW50aXR5IC0gUGxhdGludW0gTGFuZCAmIERpcnQgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBXaXRjaGl0YSBUcmVlIFNlcnZpY2UiOiAiRW50aXR5IC0gV2l0Y2hpdGEgVHJlZSBTZXJ2aWNlIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gTW9ycmlzIFRyZWUgU2VydmljZXMiOiAiRW50aXR5IC0gTW9ycmlzIFRyZWUgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBOb3J0aCBFYXN0ZXJuIFRyZWUgU2VydmljZSBJbmMiOiAiRW50aXR5IC0gTm9ydGggRWFzdGVybiBUcmVlIFNlcnZpY2UgSW5jIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gR3Vubmlzb24vV2VzdCBUcmVlIjogIkVudGl0eSAtIEd1bm5pc29uL1dlc3QgVHJlZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIE1jQ295IFRyZWUgU3VyZ2VyeSBDby4iOiAiRW50aXR5IC0gTWNDb3kgVHJlZSBTdXJnZXJ5IENvLiIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIFRvdGFsIFNvbHV0aW9ucyI6ICJFbnRpdHkgLSBUb3RhbCBTb2x1dGlvbnMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBLZW5kYWxsIFZlZyBTZXJ2aWNlcyI6ICJFbnRpdHkgLSBLZW5kYWxsIFZlZyBTZXJ2aWNlcyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIE1CSSBUcmVlIFNlcnZpY2UiOiAiRW50aXR5IC0gTUJJIFRyZWUgU2VydmljZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIExvb2tzIEdyZWF0IFRyZWUiOiAiRW50aXR5IC0gTG9va3MgR3JlYXQgVHJlZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIEomSiBUcmVlIjogIkVudGl0eSAtIEomSiBUcmVlIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gQ0tXIjogIkVudGl0eSAtIENLVyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIDI0NyBJTkMiOiAiRW50aXR5IC0gMjQ3IElOQyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIFBhdHJpb3QgVHJlZSBTdXJnZW9ucyI6ICJFbnRpdHkgLSBQYXRyaW90IFRyZWUgU3VyZ2VvbnMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBCICYgQyBUcmVlIFNlcnZpY2VzIjogIkVudGl0eSAtIEIgJiBDIFRyZWUgU2VydmljZXMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBHb29kIEhvcGUgSU5DIjogIkVudGl0eSAtIEdvb2QgSG9wZSBJTkMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBTd2FydHogTW93aW5nIjogIkVudGl0eSAtIFN3YXJ0eiBNb3dpbmciCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBEaWNrc29uIFRyZWUgU2VydmljZSI6ICJFbnRpdHkgLSBEaWNrc29uIFRyZWUgU2VydmljZSIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIFRoZSBQYXRyaW90IEdyb3VwIjogIkVudGl0eSAtIFRoZSBQYXRyaW90IEdyb3VwIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gTW9vcmVoZWFkIEJyb3RoZXJzIjogIkVudGl0eSAtIE1vb3JlaGVhZCBCcm90aGVycyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIENvbXBhc3MgQ3JlZWsiOiAiRW50aXR5IC0gQ29tcGFzcyBDcmVlayIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIEFkbGVyIFRyZWUgU2VydmljZSwgSW5jLiI6ICJFbnRpdHkgLSBBZGxlciBUcmVlIFNlcnZpY2UsIEluYy4iCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBBbWVyaWNhbiBNYWRlIFRyZWUgU2VydmljZSwgSW5jLiI6ICJFbnRpdHkgLSBBbWVyaWNhbiBNYWRlIFRyZWUgU2VydmljZSwgSW5jLiIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIEhhbHRlciBHcm91cCI6ICJFbnRpdHkgLSBIYWx0ZXIgR3JvdXAiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBQYW5uZWxsIENPIjogIkVudGl0eSAtIFBhbm5lbGwgQ08iCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBUcmVlcyBSIFVTIjogIkVudGl0eSAtIFRyZWVzIFIgVVMiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBUcmktIFN0YXRlIFNlcnZpY2VzICYgQ2xlYW5pbmciOiAiRW50aXR5IC0gVHJpLSBTdGF0ZSBTZXJ2aWNlcyAmIENsZWFuaW5nIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gVGhvbWFzIENvbnRyYWN0aW5nIjogIkVudGl0eSAtIFRob21hcyBDb250cmFjdGluZyIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIEFjZSBUcmVlIEVudGVycHJpc2UgSW5jIjogIkVudGl0eSAtIEFjZSBUcmVlIEVudGVycHJpc2UgSW5jIgogICAgfSwKICAgIHsKICAgICAgICAiVmVnIC0gQmFjY29zIFRyZWUiOiAiRW50aXR5IC0gQmFjY29zIFRyZWUiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBRdWFsaXR5IENob2ljZSBDb250cnVjdGlvbiI6ICJFbnRpdHkgLSBRdWFsaXR5IENob2ljZSBDb250cnVjdGlvbiIKICAgIH0sCiAgICB7CiAgICAgICAgIlZlZyAtIFByaW1lcmEgVHJlZSI6ICJFbnRpdHkgLSBQcmltZXJhIFRyZWUiCiAgICB9LAogICAgewogICAgICAgICJWZWcgLSBUcmVlcyBVbmxpbWl0ZWQiOiAiRW50aXR5IC0gVHJlZXMgVW5saW1pdGVkIgogICAgfQpd"
            },
            {
                "name": "moneyInputNormalizer.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25hbWVePSJhbW91bnQiXScpLmZvckVhY2goaW5wdXQgPT4gewogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZmlsdGVyTW9uZXlJbnB1dCh0aGlzKTsKICAgIH0pOwogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmICghYWxsb3dPbmx5VmFsaWRLZXlzKGV2ZW50LCB0aGlzKSkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0KICAgIH0pOwogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICBhcHBlbmREZWNpbWFsSWZOZWVkZWQodGhpcyk7CiAgICB9KTsKfSk7CgpmdW5jdGlvbiBmaWx0ZXJNb25leUlucHV0KGlucHV0KSB7CiAgICBsZXQgdmFsdWUgPSBpbnB1dC52YWx1ZTsKICAgIC8vIFByZXZlbnQgbm9uLW51bWVyaWMgYW5kIG11bHRpcGxlIGRlY2ltYWxzCiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgJycpOwogICAgY29uc3QgcGFydHMgPSB2YWx1ZS5zcGxpdCgnLicpOwogICAgaWYgKHBhcnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICB2YWx1ZSA9IHBhcnRzWzBdICsgJy4nICsgcGFydHNbMV07IC8vIHJlbW92ZSBleHRyYSBkZWNpbWFscwogICAgfQogICAgLy8gTGltaXQgdG8gMiBkZWNpbWFsIHBsYWNlcwogICAgaWYgKHBhcnRzWzFdKSB7CiAgICAgICAgcGFydHNbMV0gPSBwYXJ0c1sxXS5zbGljZSgwLCAyKTsKICAgICAgICB2YWx1ZSA9IHBhcnRzWzBdICsgJy4nICsgcGFydHNbMV07CiAgICB9CiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlOwp9CgpmdW5jdGlvbiBhbGxvd09ubHlWYWxpZEtleXMoZSwgaW5wdXQpIHsKICAgIGNvbnN0IGtleSA9IGUua2V5OwogICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZTsKICAgIC8vIEFsbG93IGNvbnRyb2wga2V5cwogICAgaWYgKFsnQmFja3NwYWNlJywgJ1RhYicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCcsICdEZWxldGUnXS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdHJ1ZTsKICAgIC8vIEFsbG93IG9uZSBkZWNpbWFsIG9ubHkKICAgIGlmIChrZXkgPT09ICcuJykgewogICAgICAgIHJldHVybiAhdmFsdWUuaW5jbHVkZXMoJy4nKTsKICAgIH0KICAgIC8vIEFsbG93IGRpZ2l0cwogICAgaWYgKC9eWzAtOV0kLy50ZXN0KGtleSkpIHsKICAgICAgICAvLyBJZiBhbHJlYWR5IGhhcyBkZWNpbWFsLCBsaW1pdCB0byAyIGRpZ2l0cyBhZnRlcgogICAgICAgIGNvbnN0IHBhcnRzID0gdmFsdWUuc3BsaXQoJy4nKTsKICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyICYmIGlucHV0LnNlbGVjdGlvblN0YXJ0ID4gdmFsdWUuaW5kZXhPZignLicpKSB7ICAKICAgICAgICAgICAgcmV0dXJuIHBhcnRzWzFdLmxlbmd0aCA8IDI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gQmxvY2sgZXZlcnl0aGluZyBlbHNlCiAgICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGFwcGVuZERlY2ltYWxJZk5lZWRlZChpbnB1dCkgewogICAgbGV0IHZhbHVlID0gaW5wdXQudmFsdWU7CiAgICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm47CiAgICBpZiAoIXZhbHVlLmluY2x1ZGVzKCcuJykpIHsKICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlICsgJy4wMCc7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHBhcnRzID0gdmFsdWUuc3BsaXQoJy4nKTsKICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgIGlmIChwYXJ0c1sxXS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFydHNbMF0gKyAnLjAwJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0c1sxXS5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFydHNbMF0gKyAnLicgKyBwYXJ0c1sxXSArICcwJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0c1sxXS5sZW5ndGggPiAyKSB7CiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhcnRzWzBdICsgJy4nICsgcGFydHNbMV0uc2xpY2UoMCwgMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"
            },
            {
                "name": "datatablesWithPlugins.css",
                "description": "",
                "contentType": "text/css",
                "contents": "LyoKICogVGhpcyBjb21iaW5lZCBmaWxlIHdhcyBjcmVhdGVkIGJ5IHRoZSBEYXRhVGFibGVzIGRvd25sb2FkZXIgYnVpbGRlcjoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkCiAqCiAqIFRvIHJlYnVpbGQgb3IgbW9kaWZ5IHRoaXMgZmlsZSB3aXRoIHRoZSBsYXRlc3QgdmVyc2lvbnMgb2YgdGhlIGluY2x1ZGVkCiAqIHNvZnR3YXJlIHBsZWFzZSB2aXNpdDoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkLyNiczQvZHQtMi4zLjIvYi0zLjIuNC9iLWh0bWw1LTMuMi40L2ItcHJpbnQtMy4yLjQvZGF0ZS0xLjUuNgogKgogKiBJbmNsdWRlZCBsaWJyYXJpZXM6CiAqICAgRGF0YVRhYmxlcyAyLjMuMiwgQnV0dG9ucyAzLjIuNCwgSFRNTDUgZXhwb3J0IDMuMi40LCBQcmludCB2aWV3IDMuMi40LCBEYXRlVGltZSAxLjUuNgogKi8KCjpyb290ey0tZHQtcm93LXNlbGVjdGVkOiAyLCAxMTcsIDIxNjstLWR0LXJvdy1zZWxlY3RlZC10ZXh0OiAyNTUsIDI1NSwgMjU1Oy0tZHQtcm93LXNlbGVjdGVkLWxpbms6IDksIDEwLCAxMTstLWR0LXJvdy1zdHJpcGU6IDAsIDAsIDA7LS1kdC1yb3ctaG92ZXI6IDAsIDAsIDA7LS1kdC1jb2x1bW4tb3JkZXJpbmc6IDAsIDAsIDA7LS1kdC1oZWFkZXItYWxpZ24taXRlbXM6IGNlbnRlcjstLWR0LWh0bWwtYmFja2dyb3VuZDogd2hpdGV9OnJvb3QuZGFya3stLWR0LWh0bWwtYmFja2dyb3VuZDogcmdiKDMzLCAzNywgNDEpfXRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZC5kdC1jb250cm9se3RleHQtYWxpZ246Y2VudGVyO2N1cnNvcjpwb2ludGVyfXRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZC5kdC1jb250cm9sOmJlZm9yZXtkaXNwbGF5OmlubGluZS1ibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7Y29udGVudDoiIjtib3JkZXItdG9wOjVweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDoxMHB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC41KTtib3JkZXItYm90dG9tOjVweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6MHB4IHNvbGlkIHRyYW5zcGFyZW50fXRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZXtib3JkZXItdG9wOjEwcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjUpO2JvcmRlci1sZWZ0OjVweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOjBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6NXB4IHNvbGlkIHRyYW5zcGFyZW50fXRhYmxlLmRhdGFUYWJsZSB0Zm9vdDplbXB0eXtkaXNwbGF5Om5vbmV9aHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1jb250cm9sOmJlZm9yZSw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1jb250cm9sOmJlZm9yZSw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1jb250cm9sOmJlZm9yZXtib3JkZXItbGVmdC1jb2xvcjpyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSl9aHRtbC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZSw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIHRhYmxlLmRhdGFUYWJsZSB0ci5kdC1oYXNDaGlsZCB0ZC5kdC1jb250cm9sOmJlZm9yZXtib3JkZXItdG9wLWNvbG9yOnJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtib3JkZXItbGVmdC1jb2xvcjp0cmFuc3BhcmVudH1kaXYuZHQtc2Nyb2xse3dpZHRoOjEwMCV9ZGl2LmR0LXNjcm9sbC1ib2R5IHRoZWFkIHRyLGRpdi5kdC1zY3JvbGwtYm9keSB0Zm9vdCB0cntoZWlnaHQ6MH1kaXYuZHQtc2Nyb2xsLWJvZHkgdGhlYWQgdHIgdGgsZGl2LmR0LXNjcm9sbC1ib2R5IHRoZWFkIHRyIHRkLGRpdi5kdC1zY3JvbGwtYm9keSB0Zm9vdCB0ciB0aCxkaXYuZHQtc2Nyb2xsLWJvZHkgdGZvb3QgdHIgdGR7aGVpZ2h0OjAgIWltcG9ydGFudDtwYWRkaW5nLXRvcDowcHggIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTowcHggIWltcG9ydGFudDtib3JkZXItdG9wLXdpZHRoOjBweCAhaW1wb3J0YW50O2JvcmRlci1ib3R0b20td2lkdGg6MHB4ICFpbXBvcnRhbnR9ZGl2LmR0LXNjcm9sbC1ib2R5IHRoZWFkIHRyIHRoIGRpdi5kdC1zY3JvbGwtc2l6aW5nLGRpdi5kdC1zY3JvbGwtYm9keSB0aGVhZCB0ciB0ZCBkaXYuZHQtc2Nyb2xsLXNpemluZyxkaXYuZHQtc2Nyb2xsLWJvZHkgdGZvb3QgdHIgdGggZGl2LmR0LXNjcm9sbC1zaXppbmcsZGl2LmR0LXNjcm9sbC1ib2R5IHRmb290IHRyIHRkIGRpdi5kdC1zY3JvbGwtc2l6aW5ne2hlaWdodDowICFpbXBvcnRhbnQ7b3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnR9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoOmFjdGl2ZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQ6YWN0aXZle291dGxpbmU6bm9uZX10YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkLmR0LW9yZGVyYWJsZS1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7Ym90dG9tOjUwJTtjb250ZW50OiLilrIiO2NvbnRlbnQ6IuKWsiIvIiJ9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyYWJsZS1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO3RvcDo1MCU7Y29udGVudDoi4pa8Ijtjb250ZW50OiLilrwiLyIifXRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVye3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEycHg7aGVpZ2h0OjIwcHh9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyYWJsZS1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjpiZWZvcmUsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyYWJsZS1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyaW5nLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJpbmctYXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcntsZWZ0OjA7b3BhY2l0eTouMTI1O2xpbmUtaGVpZ2h0OjlweDtmb250LXNpemU6LjhlbX10YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguZHQtb3JkZXJhYmxlLWFzYyx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguZHQtb3JkZXJhYmxlLWRlc2MsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkLmR0LW9yZGVyYWJsZS1hc2MsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkLmR0LW9yZGVyYWJsZS1kZXNje2N1cnNvcjpwb2ludGVyfXRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtYXNjOmhvdmVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtZGVzYzpob3Zlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWFzYzpob3Zlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXJ7b3V0bGluZToycHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjA1KTtvdXRsaW5lLW9mZnNldDotMnB4fXRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmluZy1hc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmluZy1kZXNjIHNwYW4uZHQtY29sdW1uLW9yZGVyOmFmdGVye29wYWNpdHk6LjZ9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLnNvcnRpbmdfZGVzY19kaXNhYmxlZCBzcGFuLmR0LWNvbHVtbi1vcmRlcjphZnRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguc29ydGluZ19hc2NfZGlzYWJsZWQgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YmVmb3JlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5zb3J0aW5nX2Rlc2NfZGlzYWJsZWQgc3Bhbi5kdC1jb2x1bW4tb3JkZXI6YWZ0ZXIsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkLnNvcnRpbmdfYXNjX2Rpc2FibGVkIHNwYW4uZHQtY29sdW1uLW9yZGVyOmJlZm9yZXtkaXNwbGF5Om5vbmV9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoOmFjdGl2ZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQ6YWN0aXZle291dGxpbmU6bm9uZX10YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGggZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoIGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZCBkaXYuZHQtY29sdW1uLWhlYWRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRmb290PnRyPnRoIGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdD50cj50aCBkaXYuZHQtY29sdW1uLWZvb3Rlcix0YWJsZS5kYXRhVGFibGUgdGZvb3Q+dHI+dGQgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRmb290PnRyPnRkIGRpdi5kdC1jb2x1bW4tZm9vdGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczp2YXIoLS1kdC1oZWFkZXItYWxpZ24taXRlbXMpO2dhcDo0cHh9dGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoIGRpdi5kdC1jb2x1bW4taGVhZGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlLHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aCBkaXYuZHQtY29sdW1uLWZvb3RlciBzcGFuLmR0LWNvbHVtbi10aXRsZSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQgZGl2LmR0LWNvbHVtbi1oZWFkZXIgc3Bhbi5kdC1jb2x1bW4tdGl0bGUsdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkIGRpdi5kdC1jb2x1bW4tZm9vdGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdD50cj50aCBkaXYuZHQtY29sdW1uLWhlYWRlciBzcGFuLmR0LWNvbHVtbi10aXRsZSx0YWJsZS5kYXRhVGFibGUgdGZvb3Q+dHI+dGggZGl2LmR0LWNvbHVtbi1mb290ZXIgc3Bhbi5kdC1jb2x1bW4tdGl0bGUsdGFibGUuZGF0YVRhYmxlIHRmb290PnRyPnRkIGRpdi5kdC1jb2x1bW4taGVhZGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdD50cj50ZCBkaXYuZHQtY29sdW1uLWZvb3RlciBzcGFuLmR0LWNvbHVtbi10aXRsZXtmbGV4LWdyb3c6MX10YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGggZGl2LmR0LWNvbHVtbi1oZWFkZXIgc3Bhbi5kdC1jb2x1bW4tdGl0bGU6ZW1wdHksdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoIGRpdi5kdC1jb2x1bW4tZm9vdGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlOmVtcHR5LHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZCBkaXYuZHQtY29sdW1uLWhlYWRlciBzcGFuLmR0LWNvbHVtbi10aXRsZTplbXB0eSx0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQgZGl2LmR0LWNvbHVtbi1mb290ZXIgc3Bhbi5kdC1jb2x1bW4tdGl0bGU6ZW1wdHksdGFibGUuZGF0YVRhYmxlIHRmb290PnRyPnRoIGRpdi5kdC1jb2x1bW4taGVhZGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlOmVtcHR5LHRhYmxlLmRhdGFUYWJsZSB0Zm9vdD50cj50aCBkaXYuZHQtY29sdW1uLWZvb3RlciBzcGFuLmR0LWNvbHVtbi10aXRsZTplbXB0eSx0YWJsZS5kYXRhVGFibGUgdGZvb3Q+dHI+dGQgZGl2LmR0LWNvbHVtbi1oZWFkZXIgc3Bhbi5kdC1jb2x1bW4tdGl0bGU6ZW1wdHksdGFibGUuZGF0YVRhYmxlIHRmb290PnRyPnRkIGRpdi5kdC1jb2x1bW4tZm9vdGVyIHNwYW4uZHQtY29sdW1uLXRpdGxlOmVtcHR5e2Rpc3BsYXk6bm9uZX1kaXYuZHQtc2Nyb2xsLWJvZHk+dGFibGUuZGF0YVRhYmxlPnRoZWFkPnRyPnRoLGRpdi5kdC1zY3JvbGwtYm9keT50YWJsZS5kYXRhVGFibGU+dGhlYWQ+dHI+dGR7b3ZlcmZsb3c6aGlkZGVufTpyb290LmRhcmsgdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyYWJsZS1hc2M6aG92ZXIsOnJvb3QuZGFyayB0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGguZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXIsOnJvb3QuZGFyayB0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWFzYzpob3Zlciw6cm9vdC5kYXJrIHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50ZC5kdC1vcmRlcmFibGUtZGVzYzpob3Zlciw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIHRhYmxlLmRhdGFUYWJsZSB0aGVhZD50cj50aC5kdC1vcmRlcmFibGUtYXNjOmhvdmVyLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRoLmR0LW9yZGVyYWJsZS1kZXNjOmhvdmVyLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gdGFibGUuZGF0YVRhYmxlIHRoZWFkPnRyPnRkLmR0LW9yZGVyYWJsZS1hc2M6aG92ZXIsOnJvb3RbZGF0YS1icy10aGVtZT1kYXJrXSB0YWJsZS5kYXRhVGFibGUgdGhlYWQ+dHI+dGQuZHQtb3JkZXJhYmxlLWRlc2M6aG92ZXJ7b3V0bGluZToycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KX1kaXYuZHQtcHJvY2Vzc2luZ3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlO2xlZnQ6NTAlO3dpZHRoOjIwMHB4O21hcmdpbi1sZWZ0Oi0xMDBweDttYXJnaW4tdG9wOi0yMnB4O3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MnB4O3otaW5kZXg6MTB9ZGl2LmR0LXByb2Nlc3Npbmc+ZGl2Omxhc3QtY2hpbGR7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6ODBweDtoZWlnaHQ6MTVweDttYXJnaW46MWVtIGF1dG99ZGl2LmR0LXByb2Nlc3Npbmc+ZGl2Omxhc3QtY2hpbGQ+ZGl2e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3dpZHRoOjEzcHg7aGVpZ2h0OjEzcHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDpyZ2IoMiwgMTE3LCAyMTYpO2JhY2tncm91bmQ6cmdiKHZhcigtLWR0LXJvdy1zZWxlY3RlZCkpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAsIDEsIDEsIDApfWRpdi5kdC1wcm9jZXNzaW5nPmRpdjpsYXN0LWNoaWxkPmRpdjpudGgtY2hpbGQoMSl7bGVmdDo4cHg7YW5pbWF0aW9uOmRhdGF0YWJsZXMtbG9hZGVyLTEgLjZzIGluZmluaXRlfWRpdi5kdC1wcm9jZXNzaW5nPmRpdjpsYXN0LWNoaWxkPmRpdjpudGgtY2hpbGQoMil7bGVmdDo4cHg7YW5pbWF0aW9uOmRhdGF0YWJsZXMtbG9hZGVyLTIgLjZzIGluZmluaXRlfWRpdi5kdC1wcm9jZXNzaW5nPmRpdjpsYXN0LWNoaWxkPmRpdjpudGgtY2hpbGQoMyl7bGVmdDozMnB4O2FuaW1hdGlvbjpkYXRhdGFibGVzLWxvYWRlci0yIC42cyBpbmZpbml0ZX1kaXYuZHQtcHJvY2Vzc2luZz5kaXY6bGFzdC1jaGlsZD5kaXY6bnRoLWNoaWxkKDQpe2xlZnQ6NTZweDthbmltYXRpb246ZGF0YXRhYmxlcy1sb2FkZXItMyAuNnMgaW5maW5pdGV9QGtleWZyYW1lcyBkYXRhdGFibGVzLWxvYWRlci0xezAle3RyYW5zZm9ybTpzY2FsZSgwKX0xMDAle3RyYW5zZm9ybTpzY2FsZSgxKX19QGtleWZyYW1lcyBkYXRhdGFibGVzLWxvYWRlci0zezAle3RyYW5zZm9ybTpzY2FsZSgxKX0xMDAle3RyYW5zZm9ybTpzY2FsZSgwKX19QGtleWZyYW1lcyBkYXRhdGFibGVzLWxvYWRlci0yezAle3RyYW5zZm9ybTp0cmFuc2xhdGUoMCwgMCl9MTAwJXt0cmFuc2Zvcm06dHJhbnNsYXRlKDI0cHgsIDApfX10YWJsZS5kYXRhVGFibGUubm93cmFwIHRoLHRhYmxlLmRhdGFUYWJsZS5ub3dyYXAgdGR7d2hpdGUtc3BhY2U6bm93cmFwfXRhYmxlLmRhdGFUYWJsZSB0aCx0YWJsZS5kYXRhVGFibGUgdGR7Ym94LXNpemluZzpib3JkZXItYm94fXRhYmxlLmRhdGFUYWJsZSB0aC5kdC10eXBlLW51bWVyaWMsdGFibGUuZGF0YVRhYmxlIHRoLmR0LXR5cGUtZGF0ZSx0YWJsZS5kYXRhVGFibGUgdGQuZHQtdHlwZS1udW1lcmljLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC10eXBlLWRhdGV7dGV4dC1hbGlnbjpyaWdodH10YWJsZS5kYXRhVGFibGUgdGguZHQtdHlwZS1udW1lcmljIGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aC5kdC10eXBlLW51bWVyaWMgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRoLmR0LXR5cGUtZGF0ZSBkaXYuZHQtY29sdW1uLWhlYWRlcix0YWJsZS5kYXRhVGFibGUgdGguZHQtdHlwZS1kYXRlIGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC10eXBlLW51bWVyaWMgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRkLmR0LXR5cGUtbnVtZXJpYyBkaXYuZHQtY29sdW1uLWZvb3Rlcix0YWJsZS5kYXRhVGFibGUgdGQuZHQtdHlwZS1kYXRlIGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC10eXBlLWRhdGUgZGl2LmR0LWNvbHVtbi1mb290ZXJ7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2V9dGFibGUuZGF0YVRhYmxlIHRoLmR0LWxlZnQsdGFibGUuZGF0YVRhYmxlIHRkLmR0LWxlZnR7dGV4dC1hbGlnbjpsZWZ0fXRhYmxlLmRhdGFUYWJsZSB0aC5kdC1sZWZ0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aC5kdC1sZWZ0IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1sZWZ0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1sZWZ0IGRpdi5kdC1jb2x1bW4tZm9vdGVye2ZsZXgtZGlyZWN0aW9uOnJvd310YWJsZS5kYXRhVGFibGUgdGguZHQtY2VudGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9dGFibGUuZGF0YVRhYmxlIHRoLmR0LXJpZ2h0LHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1yaWdodHt0ZXh0LWFsaWduOnJpZ2h0fXRhYmxlLmRhdGFUYWJsZSB0aC5kdC1yaWdodCBkaXYuZHQtY29sdW1uLWhlYWRlcix0YWJsZS5kYXRhVGFibGUgdGguZHQtcmlnaHQgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRkLmR0LXJpZ2h0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1yaWdodCBkaXYuZHQtY29sdW1uLWZvb3RlcntmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZX10YWJsZS5kYXRhVGFibGUgdGguZHQtanVzdGlmeSx0YWJsZS5kYXRhVGFibGUgdGQuZHQtanVzdGlmeXt0ZXh0LWFsaWduOmp1c3RpZnl9dGFibGUuZGF0YVRhYmxlIHRoLmR0LWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRoLmR0LWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRkLmR0LWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRkLmR0LWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1mb290ZXJ7ZmxleC1kaXJlY3Rpb246cm93fXRhYmxlLmRhdGFUYWJsZSB0aC5kdC1ub3dyYXAsdGFibGUuZGF0YVRhYmxlIHRkLmR0LW5vd3JhcHt3aGl0ZS1zcGFjZTpub3dyYXB9dGFibGUuZGF0YVRhYmxlIHRoLmR0LWVtcHR5LHRhYmxlLmRhdGFUYWJsZSB0ZC5kdC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjt2ZXJ0aWNhbC1hbGlnbjp0b3B9dGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZCx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGgsdGFibGUuZGF0YVRhYmxlIHRmb290IHRke3RleHQtYWxpZ246bGVmdH10YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1sZWZ0LHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZC5kdC1oZWFkLWxlZnQsdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLmR0LWhlYWQtbGVmdCx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1sZWZ0e3RleHQtYWxpZ246bGVmdH10YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1sZWZ0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLWxlZnQgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRkLmR0LWhlYWQtbGVmdCBkaXYuZHQtY29sdW1uLWhlYWRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1sZWZ0IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLWxlZnQgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLmR0LWhlYWQtbGVmdCBkaXYuZHQtY29sdW1uLWZvb3Rlcix0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1sZWZ0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLWxlZnQgZGl2LmR0LWNvbHVtbi1mb290ZXJ7ZmxleC1kaXJlY3Rpb246cm93fXRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLWNlbnRlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1jZW50ZXIsdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLmR0LWhlYWQtY2VudGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLWNlbnRlcnt0ZXh0LWFsaWduOmNlbnRlcn10YWJsZS5kYXRhVGFibGUgdGhlYWQgdGguZHQtaGVhZC1yaWdodCx0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1yaWdodCx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1yaWdodCx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGQuZHQtaGVhZC1yaWdodHt0ZXh0LWFsaWduOnJpZ2h0fXRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0aC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLXJpZ2h0IGRpdi5kdC1jb2x1bW4tZm9vdGVye2ZsZXgtZGlyZWN0aW9uOnJvdy1yZXZlcnNlfXRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLWp1c3RpZnksdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRkLmR0LWhlYWQtanVzdGlmeSx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1qdXN0aWZ5LHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLWp1c3RpZnl7dGV4dC1hbGlnbjpqdXN0aWZ5fXRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0aC5kdC1oZWFkLWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLmR0LWhlYWQtanVzdGlmeSBkaXYuZHQtY29sdW1uLWZvb3Rlcix0YWJsZS5kYXRhVGFibGUgdGhlYWQgdGQuZHQtaGVhZC1qdXN0aWZ5IGRpdi5kdC1jb2x1bW4taGVhZGVyLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZC5kdC1oZWFkLWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1mb290ZXIsdGFibGUuZGF0YVRhYmxlIHRmb290IHRoLmR0LWhlYWQtanVzdGlmeSBkaXYuZHQtY29sdW1uLWhlYWRlcix0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1qdXN0aWZ5IGRpdi5kdC1jb2x1bW4tZm9vdGVyLHRhYmxlLmRhdGFUYWJsZSB0Zm9vdCB0ZC5kdC1oZWFkLWp1c3RpZnkgZGl2LmR0LWNvbHVtbi1oZWFkZXIsdGFibGUuZGF0YVRhYmxlIHRmb290IHRkLmR0LWhlYWQtanVzdGlmeSBkaXYuZHQtY29sdW1uLWZvb3RlcntmbGV4LWRpcmVjdGlvbjpyb3d9dGFibGUuZGF0YVRhYmxlIHRoZWFkIHRoLmR0LWhlYWQtbm93cmFwLHRhYmxlLmRhdGFUYWJsZSB0aGVhZCB0ZC5kdC1oZWFkLW5vd3JhcCx0YWJsZS5kYXRhVGFibGUgdGZvb3QgdGguZHQtaGVhZC1ub3dyYXAsdGFibGUuZGF0YVRhYmxlIHRmb290IHRkLmR0LWhlYWQtbm93cmFwe3doaXRlLXNwYWNlOm5vd3JhcH10YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZHQtYm9keS1sZWZ0LHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZC5kdC1ib2R5LWxlZnR7dGV4dC1hbGlnbjpsZWZ0fXRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aC5kdC1ib2R5LWNlbnRlcix0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQuZHQtYm9keS1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9dGFibGUuZGF0YVRhYmxlIHRib2R5IHRoLmR0LWJvZHktcmlnaHQsdGFibGUuZGF0YVRhYmxlIHRib2R5IHRkLmR0LWJvZHktcmlnaHR7dGV4dC1hbGlnbjpyaWdodH10YWJsZS5kYXRhVGFibGUgdGJvZHkgdGguZHQtYm9keS1qdXN0aWZ5LHRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0ZC5kdC1ib2R5LWp1c3RpZnl7dGV4dC1hbGlnbjpqdXN0aWZ5fXRhYmxlLmRhdGFUYWJsZSB0Ym9keSB0aC5kdC1ib2R5LW5vd3JhcCx0YWJsZS5kYXRhVGFibGUgdGJvZHkgdGQuZHQtYm9keS1ub3dyYXB7d2hpdGUtc3BhY2U6bm93cmFwfTpyb290ey0tZHQtaGVhZGVyLWFsaWduLWl0ZW1zOiBmbGV4LWVuZH10YWJsZS5kYXRhVGFibGUudGFibGV7Y2xlYXI6Ym90aDttYXgtd2lkdGg6bm9uZTtib3JkZXItc3BhY2luZzowO21hcmdpbi1ib3R0b206MH10YWJsZS5kYXRhVGFibGUudGFibGUudGFibGUtc3RyaXBlZD50Ym9keT50cjpudGgtb2YtdHlwZSgybisxKXtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fXRhYmxlLmRhdGFUYWJsZS50YWJsZT50Ym9keT50cntiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fXRhYmxlLmRhdGFUYWJsZS50YWJsZT50Ym9keT50ci5zZWxlY3RlZD4qe2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgOTk5OXB4IHJnYigyLCAxMTcsIDIxNik7Ym94LXNoYWRvdzppbnNldCAwIDAgMCA5OTk5cHggcmdiKHZhcigtLWR0LXJvdy1zZWxlY3RlZCkpO2NvbG9yOnJnYigyNTUsIDI1NSwgMjU1KTtjb2xvcjpyZ2IodmFyKC0tZHQtcm93LXNlbGVjdGVkLXRleHQpKX10YWJsZS5kYXRhVGFibGUudGFibGU+dGJvZHk+dHIuc2VsZWN0ZWQgYXtjb2xvcjpyZ2IoOSwgMTAsIDExKTtjb2xvcjpyZ2IodmFyKC0tZHQtcm93LXNlbGVjdGVkLWxpbmspKX10YWJsZS5kYXRhVGFibGUudGFibGUudGFibGUtc3RyaXBlZD50Ym9keT50cjpudGgtb2YtdHlwZSgybisxKT4qe2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgOTk5OXB4IHJnYmEodmFyKC0tZHQtcm93LXN0cmlwZSksIDAuMDUpfXRhYmxlLmRhdGFUYWJsZS50YWJsZS50YWJsZS1zdHJpcGVkPnRib2R5PnRyOm50aC1vZi10eXBlKDJuKzEpLnNlbGVjdGVkPip7Ym94LXNoYWRvdzppbnNldCAwIDAgMCA5OTk5cHggcmdiYSgyLCAxMTcsIDIxNiwgMC45NSk7Ym94LXNoYWRvdzppbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjk1KX10YWJsZS5kYXRhVGFibGUudGFibGUudGFibGUtaG92ZXI+dGJvZHk+dHI6aG92ZXI+Kntib3gtc2hhZG93Omluc2V0IDAgMCAwIDk5OTlweCByZ2JhKHZhcigtLWR0LXJvdy1ob3ZlciksIDAuMDc1KX10YWJsZS5kYXRhVGFibGUudGFibGUudGFibGUtaG92ZXI+dGJvZHk+dHIuc2VsZWN0ZWQ6aG92ZXI+Kntib3gtc2hhZG93Omluc2V0IDAgMCAwIDk5OTlweCByZ2JhKDIsIDExNywgMjE2LCAwLjk3NSk7Ym94LXNoYWRvdzppbnNldCAwIDAgMCA5OTk5cHggcmdiYSh2YXIoLS1kdC1yb3ctc2VsZWN0ZWQpLCAwLjk3NSl9ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXN0YXJ0Pio6bm90KDpsYXN0LWNoaWxkKXttYXJnaW4tcmlnaHQ6MWVtfWRpdi5kdC1jb250YWluZXIgZGl2LmR0LWxheW91dC1lbmQ+Kjpub3QoOmZpcnN0LWNoaWxkKXttYXJnaW4tbGVmdDoxZW19ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LWZ1bGx7d2lkdGg6MTAwJX1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtZnVsbD4qOm9ubHktY2hpbGR7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0b31kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtdGFibGU+ZGl2e2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCl7ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGF5b3V0LXN0YXJ0Pio6bm90KDpsYXN0LWNoaWxkKXttYXJnaW4tcmlnaHQ6MH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sYXlvdXQtZW5kPio6bm90KDpmaXJzdC1jaGlsZCl7bWFyZ2luLWxlZnQ6MH19ZGl2LmR0LWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZX1kaXYuZHQtY29udGFpbmVyPmRpdi5yb3d7bWFyZ2luLWJvdHRvbTouNXJlbX1kaXYuZHQtY29udGFpbmVyPmRpdi5yb3c6bGFzdC1jaGlsZHttYXJnaW4tYm90dG9tOjB9ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGVuZ3RoIGxhYmVse2ZvbnQtd2VpZ2h0Om5vcm1hbDt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6bm93cmFwO21hcmdpbi1ib3R0b206MH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1sZW5ndGggc2VsZWN0e3dpZHRoOmF1dG87ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLXJpZ2h0Oi41ZW19ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtc2VhcmNoIGxhYmVse2ZvbnQtd2VpZ2h0Om5vcm1hbDt3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpsZWZ0O21hcmdpbi1ib3R0b206MH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1zZWFyY2ggaW5wdXR7bWFyZ2luLWxlZnQ6LjVlbTtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDphdXRvfWRpdi5kdC1jb250YWluZXIgZGl2LmR0LWluZm97d2hpdGUtc3BhY2U6bm93cmFwfWRpdi5kdC1jb250YWluZXIgZGl2LmR0LXBhZ2luZ3ttYXJnaW46MH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1wYWdpbmcgdWwucGFnaW5hdGlvbnttYXJnaW46MDtmbGV4LXdyYXA6d3JhcH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1wcm9jZXNzaW5ne3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7bGVmdDo1MCU7d2lkdGg6MjAwcHg7bWFyZ2luLWxlZnQ6LTEwMHB4O21hcmdpbi10b3A6LTI2cHg7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzoxZW0gMH1kaXYuZHQtY29udGFpbmVyIGRpdi5kdC1zY3JvbGwtYm9keXtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGVlMmU2fWRpdi5kdC1jb250YWluZXIgZGl2LmR0LXNjcm9sbC1ib2R5IHRhYmxlLGRpdi5kdC1jb250YWluZXIgZGl2LmR0LXNjcm9sbC1ib2R5IHRib2R5PnRyOmxhc3QtY2hpbGQ+Kntib3JkZXItYm90dG9tOm5vbmV9ZGl2LmR0LXNjcm9sbC1oZWFkIHRhYmxlLmRhdGFUYWJsZXttYXJnaW4tYm90dG9tOjAgIWltcG9ydGFudH1kaXYuZHQtc2Nyb2xsLWJvZHk+dGFibGV7Ym9yZGVyLXRvcDpub25lO21hcmdpbi10b3A6MCAhaW1wb3J0YW50O21hcmdpbi1ib3R0b206MCAhaW1wb3J0YW50fWRpdi5kdC1zY3JvbGwtYm9keT50YWJsZSB0aGVhZCAuZHQtb3JkZXJhYmxlLWFzYzpiZWZvcmUsZGl2LmR0LXNjcm9sbC1ib2R5PnRhYmxlIHRoZWFkIC5kdC1vcmRlcmFibGUtZGVzYzphZnRlcntkaXNwbGF5Om5vbmV9ZGl2LmR0LXNjcm9sbC1ib2R5PnRhYmxlPnRib2R5IHRyOmZpcnN0LWNoaWxkIHRoLGRpdi5kdC1zY3JvbGwtYm9keT50YWJsZT50Ym9keSB0cjpmaXJzdC1jaGlsZCB0ZHtib3JkZXItdG9wOm5vbmV9ZGl2LmR0LXNjcm9sbC1mb290Pi5kdC1zY3JvbGwtZm9vdElubmVye2JveC1zaXppbmc6Y29udGVudC1ib3h9ZGl2LmR0LXNjcm9sbC1mb290Pi5kdC1zY3JvbGwtZm9vdElubmVyPnRhYmxle21hcmdpbi10b3A6MCAhaW1wb3J0YW50O2JvcmRlci10b3A6bm9uZX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCl7ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtbGVuZ3RoLGRpdi5kdC1jb250YWluZXIgZGl2LmR0LXNlYXJjaCxkaXYuZHQtY29udGFpbmVyIGRpdi5kdC1pbmZvLGRpdi5kdC1jb250YWluZXIgZGl2LmR0LXBhZ2luZ3t0ZXh0LWFsaWduOmNlbnRlcn1kaXYuZHQtY29udGFpbmVyIGRpdi5yb3d7bWFyZ2luLWJvdHRvbTowfWRpdi5kdC1jb250YWluZXIgZGl2LnJvdz4qe21hcmdpbi1ib3R0b206LjVyZW19ZGl2LmR0LWNvbnRhaW5lciBkaXYuZHQtcGFnaW5nIHVsLnBhZ2luYXRpb257anVzdGlmeS1jb250ZW50OmNlbnRlciAhaW1wb3J0YW50fX10YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJhYmxlLWFzYyx0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJhYmxlLWRlc2MsdGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRoLmR0LW9yZGVyaW5nLWFzYyx0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJpbmctZGVzYyx0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJhYmxlLWFzYyx0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJhYmxlLWRlc2MsdGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRkLmR0LW9yZGVyaW5nLWFzYyx0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJpbmctZGVzY3twYWRkaW5nLXJpZ2h0OjRweH10YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJhYmxlLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsdGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRoLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJhYmxlLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJhYmxlLWRlc2Mgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsdGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRkLmR0LW9yZGVyaW5nLWFzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGQuZHQtb3JkZXJpbmctZGVzYyBzcGFuLmR0LWNvbHVtbi1vcmRlcntyaWdodDo0cHh9dGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRoLmR0LXR5cGUtZGF0ZSBzcGFuLmR0LWNvbHVtbi1vcmRlcix0YWJsZS5kYXRhVGFibGUudGFibGUtc20+dGhlYWQ+dHIgdGguZHQtdHlwZS1udW1lcmljIHNwYW4uZHQtY29sdW1uLW9yZGVyLHRhYmxlLmRhdGFUYWJsZS50YWJsZS1zbT50aGVhZD50ciB0ZC5kdC10eXBlLWRhdGUgc3Bhbi5kdC1jb2x1bW4tb3JkZXIsdGFibGUuZGF0YVRhYmxlLnRhYmxlLXNtPnRoZWFkPnRyIHRkLmR0LXR5cGUtbnVtZXJpYyBzcGFuLmR0LWNvbHVtbi1vcmRlcntsZWZ0OjRweH1kaXYuZHQtc2Nyb2xsLWhlYWQgdGFibGUudGFibGUtYm9yZGVyZWR7Ym9yZGVyLWJvdHRvbS13aWR0aDowfWRpdi50YWJsZS1yZXNwb25zaXZlPmRpdi5kdC1jb250YWluZXI+ZGl2LnJvd3ttYXJnaW46MH1kaXYudGFibGUtcmVzcG9uc2l2ZT5kaXYuZHQtY29udGFpbmVyPmRpdi5yb3c+ZGl2W2NsYXNzXj1jb2wtXTpmaXJzdC1jaGlsZHtwYWRkaW5nLWxlZnQ6MH1kaXYudGFibGUtcmVzcG9uc2l2ZT5kaXYuZHQtY29udGFpbmVyPmRpdi5yb3c+ZGl2W2NsYXNzXj1jb2wtXTpsYXN0LWNoaWxke3BhZGRpbmctcmlnaHQ6MH0KCgpAa2V5ZnJhbWVzIGR0Yi1zcGlubmVyezEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1ALW8ta2V5ZnJhbWVzIGR0Yi1zcGlubmVyezEwMCV7LW8tdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QC1tcy1rZXlmcmFtZXMgZHRiLXNwaW5uZXJ7MTAwJXstbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIGR0Yi1zcGlubmVyezEwMCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDM2MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1ALW1vei1rZXlmcmFtZXMgZHRiLXNwaW5uZXJ7MTAwJXstbW96LXRyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fWRpdi5kYXRhVGFibGVzX3dyYXBwZXJ7cG9zaXRpb246cmVsYXRpdmV9ZGl2LmR0LWJ1dHRvbnN7cG9zaXRpb246aW5pdGlhbH1kaXYuZHQtYnV0dG9ucyAuZHQtYnV0dG9ue292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcH1kaXYuZHQtYnV0dG9uLWluZm97cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt3aWR0aDo0MDBweDttYXJnaW4tdG9wOi0xMDBweDttYXJnaW4tbGVmdDotMjAwcHg7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOi43NWVtO2JveC1zaGFkb3c6M3B4IDRweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuOCk7dGV4dC1hbGlnbjpjZW50ZXI7ei1pbmRleDoyMDAzO292ZXJmbG93OmhpZGRlbn1kaXYuZHQtYnV0dG9uLWluZm8gaDJ7cGFkZGluZzoycmVtIDJyZW0gMXJlbSAycmVtO21hcmdpbjowO2ZvbnQtd2VpZ2h0Om5vcm1hbH1kaXYuZHQtYnV0dG9uLWluZm8+ZGl2e3BhZGRpbmc6MWVtIDJlbSAyZW0gMmVtfWRpdi5kdGItcG9wb3Zlci1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NnB4O3JpZ2h0OjZweDt3aWR0aDoyMnB4O2hlaWdodDoyMnB4O3RleHQtYWxpZ246Y2VudGVyO2JvcmRlci1yYWRpdXM6M3B4O2N1cnNvcjpwb2ludGVyO3otaW5kZXg6MjAwM31idXR0b24uZHRiLWhpZGUtZHJvcHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24tdGl0bGV7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzouM2VtIC41ZW0gLjVlbTttYXJnaW4tbGVmdDouNWVtO21hcmdpbi1yaWdodDouNWVtO2ZvbnQtc2l6ZTouOWVtO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc31kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24tdGl0bGU6ZW1wdHl7ZGlzcGxheTpub25lfXNwYW4uZHQtYnV0dG9uLXNwYWNlcntkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW46LjVlbTt3aGl0ZS1zcGFjZTpub3dyYXB9c3Bhbi5kdC1idXR0b24tc3BhY2VyLmJhcntib3JkZXItbGVmdDoxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjMpO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwYWRkaW5nLWxlZnQ6LjVlbX1zcGFuLmR0LWJ1dHRvbi1zcGFjZXIuYmFyOmVtcHR5e2hlaWdodDoxZW07d2lkdGg6MXB4O3BhZGRpbmctbGVmdDowfWRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLWFjdGl2ZXtwYWRkaW5nLXJpZ2h0OjNlbX1kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbi1hY3RpdmU6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTttYXJnaW4tdG9wOi0xMHB4O3JpZ2h0OjFlbTtkaXNwbGF5OmlubGluZS1ibG9jaztjb250ZW50OiLinJMiO2NvbG9yOmluaGVyaXR9ZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLmR0LWJ1dHRvbi1zcGxpdHtwYWRkaW5nLXJpZ2h0OjB9ZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLmR0LWJ1dHRvbi1zcGxpdDphZnRlcntkaXNwbGF5Om5vbmV9ZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b24tYWN0aXZlLmR0LWJ1dHRvbi1zcGxpdD4qOmZpcnN0LWNoaWxke3BhZGRpbmctcmlnaHQ6M2VtfWRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLWFjdGl2ZS5kdC1idXR0b24tc3BsaXQ+KjpmaXJzdC1jaGlsZDphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlO21hcmdpbi10b3A6LTEwcHg7cmlnaHQ6MWVtO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2NvbnRlbnQ6IuKckyI7Y29sb3I6aW5oZXJpdH1kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbi1hY3RpdmUtYSBhe3BhZGRpbmctcmlnaHQ6M2VtfWRpdi5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLWFjdGl2ZS1hIGE6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MWVtO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2NvbnRlbnQ6IuKckyI7Y29sb3I6aW5oZXJpdH1kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gc3Bhbi5kdC1idXR0b24tc3BhY2Vye3dpZHRoOjEwMCU7Zm9udC1zaXplOi45ZW07dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luOi41ZW0gMH1kaXYuZHQtYnV0dG9uLWNvbGxlY3Rpb24gc3Bhbi5kdC1idXR0b24tc3BhY2VyOmVtcHR5e2hlaWdodDowO3dpZHRoOjEwMCV9ZGl2LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIHNwYW4uZHQtYnV0dG9uLXNwYWNlci5iYXJ7Ym9yZGVyLWxlZnQ6bm9uZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7cGFkZGluZy1sZWZ0OjB9QG1lZGlhIHByaW50e3RhYmxlLmRhdGFUYWJsZSB0cj4qe2JveC1zaGFkb3c6bm9uZSAhaW1wb3J0YW50fX1kaXYuZHQtYnV0dG9ucyBkaXYuYnRuLWdyb3Vwe3Bvc2l0aW9uOmluaXRpYWx9ZGl2LmR0LWJ1dHRvbnMgc3Bhbi5kdC1idXR0b24tc3BhY2VyLmVtcHR5e21hcmdpbjoxcHh9ZGl2LmR0LWJ1dHRvbnMgc3Bhbi5kdC1idXR0b24tc3BhY2VyLmJhcjplbXB0eXtoZWlnaHQ6aW5oZXJpdH1kaXYuZHQtYnV0dG9ucyAuYnRuLnByb2Nlc3Npbmd7Y29sb3I6cmdiYSgwLCAwLCAwLCAwLjIpfWRpdi5kdC1idXR0b25zIC5idG4ucHJvY2Vzc2luZzphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlO2xlZnQ6NTAlO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7bWFyZ2luOi04cHggMCAwIC04cHg7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7Y29udGVudDoiICI7Ym9yZGVyOjJweCBzb2xpZCByZ2IoNDAsIDQwLCA0MCk7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O2FuaW1hdGlvbjpkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOy1vLWFuaW1hdGlvbjpkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOy1tcy1hbmltYXRpb246ZHRiLXNwaW5uZXIgMTUwMG1zIGluZmluaXRlIGxpbmVhcjstd2Via2l0LWFuaW1hdGlvbjpkdGItc3Bpbm5lciAxNTAwbXMgaW5maW5pdGUgbGluZWFyOy1tb3otYW5pbWF0aW9uOmR0Yi1zcGlubmVyIDE1MDBtcyBpbmZpbml0ZSBsaW5lYXJ9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb257bWFyZ2luLXRvcDo0cHg7d2lkdGg6MjAwcHh9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24gLmR0LWJ1dHRvbntwb3NpdGlvbjpyZWxhdGl2ZX1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbiAuZHQtYnV0dG9uLmRyb3Bkb3duLXRvZ2dsZTo6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MTJweDt0b3A6MTRweH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbiBkaXYuZHQtYnV0dG9uLXNwbGl0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC13cmFwOndyYXA7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7YWxpZ24tY29udGVudDpmbGV4LXN0YXJ0O2FsaWduLWl0ZW1zOnN0cmV0Y2h9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24gZGl2LmR0LWJ1dHRvbi1zcGxpdCBhOmZpcnN0LWNoaWxke21pbi13aWR0aDphdXRvO2ZsZXg6MSAwIDUwcHg7cGFkZGluZy1yaWdodDowfWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIGRpdi5kdC1idXR0b24tc3BsaXQgYnV0dG9uOmxhc3QtY2hpbGR7bWluLXdpZHRoOjMzcHg7ZmxleDowO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7bGluZS1oZWlnaHQ6MXJlbTtjb2xvcjpyZ2IoMzMsIDM3LCA0MSk7cGFkZGluZzowIDE2cHg7b3ZlcmZsb3c6dmlzaWJsZX1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbiBkaXYuZHQtYnV0dG9uLXNwbGl0IGJ1dHRvbjpsYXN0LWNoaWxkOmhvdmVye2NvbG9yOiMxNjE4MWI7YmFja2dyb3VuZC1jb2xvcjojZjhmOWZhfWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVke3Bvc2l0aW9uOmZpeGVkO2Rpc3BsYXk6YmxvY2s7dG9wOjUwJTtsZWZ0OjUwJTttYXJnaW4tbGVmdDotNzVweDtib3JkZXItcmFkaXVzOjVweDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO3BhZGRpbmc6LjVlbX1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC50d28tY29sdW1ue21hcmdpbi1sZWZ0Oi0yMDBweH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC50aHJlZS1jb2x1bW57bWFyZ2luLWxlZnQ6LTIyNXB4fWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVkLmZvdXItY29sdW1ue21hcmdpbi1sZWZ0Oi0zMDBweH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC5jb2x1bW5ze21hcmdpbi1sZWZ0Oi00MDlweH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDI0cHgpe2Rpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZpeGVkLmNvbHVtbnN7bWFyZ2luLWxlZnQ6LTMwOHB4fX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NDBweCl7ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZml4ZWQuY29sdW1uc3ttYXJnaW4tbGVmdDotMjAzcHh9fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ2MHB4KXtkaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5maXhlZC5jb2x1bW5ze21hcmdpbi1sZWZ0Oi0xMDBweH19ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZml4ZWQ+Omxhc3QtY2hpbGR7bWF4LWhlaWdodDoxMDB2aDtvdmVyZmxvdzphdXRvfWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnR3by1jb2x1bW4+Omxhc3QtY2hpbGQsZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24udGhyZWUtY29sdW1uPjpsYXN0LWNoaWxkLGRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmZvdXItY29sdW1uPjpsYXN0LWNoaWxke2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudDtjb2x1bW4tZ2FwOjhweH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi50d28tY29sdW1uPjpsYXN0LWNoaWxkPiosZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24udGhyZWUtY29sdW1uPjpsYXN0LWNoaWxkPiosZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZm91ci1jb2x1bW4+Omxhc3QtY2hpbGQ+Knstd2Via2l0LWNvbHVtbi1icmVhay1pbnNpZGU6YXZvaWQ7YnJlYWstaW5zaWRlOmF2b2lkfWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnR3by1jb2x1bW57d2lkdGg6NDAwcHh9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24udHdvLWNvbHVtbj46bGFzdC1jaGlsZHtwYWRkaW5nLWJvdHRvbToxcHg7Y29sdW1uLWNvdW50OjJ9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24udGhyZWUtY29sdW1ue3dpZHRoOjQ1MHB4fWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLnRocmVlLWNvbHVtbj46bGFzdC1jaGlsZHtwYWRkaW5nLWJvdHRvbToxcHg7Y29sdW1uLWNvdW50OjN9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZm91ci1jb2x1bW57d2lkdGg6NjAwcHh9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uZm91ci1jb2x1bW4+Omxhc3QtY2hpbGR7cGFkZGluZy1ib3R0b206MXB4O2NvbHVtbi1jb3VudDo0fWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uIC5kdC1idXR0b257Ym9yZGVyLXJhZGl1czowfWRpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnN7d2lkdGg6YXV0b31kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zPjpsYXN0LWNoaWxke2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDt3aWR0aDo4MThweDtwYWRkaW5nLWJvdHRvbToxcHh9ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucz46bGFzdC1jaGlsZCAuZHQtYnV0dG9ue21pbi13aWR0aDoyMDBweDtmbGV4OjAgMTttYXJnaW46MH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMz46bGFzdC1jaGlsZCxkaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMj46bGFzdC1jaGlsZCxkaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMT46bGFzdC1jaGlsZHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMyAuZHQtYnV0dG9ue2ZsZXg6MSAxIDMyJX1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMiAuZHQtYnV0dG9ue2ZsZXg6MSAxIDQ4JX1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMSAuZHQtYnV0dG9ue2ZsZXg6MSAxIDEwMCV9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAyNHB4KXtkaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zPjpsYXN0LWNoaWxke3dpZHRoOjYxMnB4fX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NDBweCl7ZGl2LmRyb3Bkb3duLW1lbnUuZHQtYnV0dG9uLWNvbGxlY3Rpb24uY29sdW1ucz46bGFzdC1jaGlsZHt3aWR0aDo0MDZweH1kaXYuZHJvcGRvd24tbWVudS5kdC1idXR0b24tY29sbGVjdGlvbi5jb2x1bW5zLmR0Yi1iMyAuZHQtYnV0dG9ue2ZsZXg6MCAxIDMyJX19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDYwcHgpe2Rpdi5kcm9wZG93bi1tZW51LmR0LWJ1dHRvbi1jb2xsZWN0aW9uLmNvbHVtbnM+Omxhc3QtY2hpbGR7d2lkdGg6MjAwcHh9fWRpdi5kdC1idXR0b24tYmFja2dyb3VuZHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt6LWluZGV4Ojk5OX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCl7ZGl2LmR0LWJ1dHRvbnN7ZmxvYXQ6bm9uZTt3aWR0aDoxMDAlO3RleHQtYWxpZ246Y2VudGVyO21hcmdpbi1ib3R0b206LjVlbX1kaXYuZHQtYnV0dG9ucyBhLmJ0bntmbG9hdDpub25lfX0KCgpkaXYuZHQtZGF0ZXRpbWV7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTt6LWluZGV4OjIwNTA7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JveC1zaGFkb3c6MCA1cHggMTVweCAtNXB4IHJnYmEoMCwgMCwgMCwgMC41KTtwYWRkaW5nOjZweCAyMHB4O3dpZHRoOjI3NXB4O2JvcmRlci1yYWRpdXM6NXB4fWRpdi5kdC1kYXRldGltZS5pbmxpbmV7cG9zaXRpb246cmVsYXRpdmU7Ym94LXNoYWRvdzpub25lfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtdGl0bGV7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo1cHggMHB4IDNweH1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWJ1dHRvbnN7dGV4dC1hbGlnbjpjZW50ZXJ9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1idXR0b25zIGF7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIC41ZW0gLjVlbSAuNWVtO21hcmdpbjowO2ZvbnQtc2l6ZTouOWVtfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtYnV0dG9ucyBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9ZGl2LmR0LWRhdGV0aW1lIHRhYmxle2JvcmRlci1zcGFjaW5nOjA7bWFyZ2luOjEycHggMDt3aWR0aDoxMDAlfWRpdi5kdC1kYXRldGltZSB0YWJsZS5kdC1kYXRldGltZS10YWJsZS1ub3NwYWNle21hcmdpbi10b3A6LTEycHh9ZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRoe2ZvbnQtc2l6ZTouOGVtO2NvbG9yOiM3Nzc7Zm9udC13ZWlnaHQ6bm9ybWFsO3dpZHRoOjE0LjI4NTcxNDI4NiU7cGFkZGluZzowIDAgNHB4IDA7dGV4dC1hbGlnbjpjZW50ZXJ9ZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRke2ZvbnQtc2l6ZTouOWVtO2NvbG9yOiM0NDQ7cGFkZGluZzowfWRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxle3RleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQ6I2Y1ZjVmNX1kaXYuZHQtZGF0ZXRpbWUgdGFibGUgdGQuc2VsZWN0YWJsZS5kaXNhYmxlZHtjb2xvcjojYWFhO2JhY2tncm91bmQ6d2hpdGV9ZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUuZGlzYWJsZWQgYnV0dG9uOmhvdmVye2NvbG9yOiNhYWE7YmFja2dyb3VuZDp3aGl0ZX1kaXYuZHQtZGF0ZXRpbWUgdGFibGUgdGQuc2VsZWN0YWJsZS5ub3d7YmFja2dyb3VuZC1jb2xvcjojZGRkfWRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLm5vdyBidXR0b257Zm9udC13ZWlnaHQ6Ym9sZH1kaXYuZHQtZGF0ZXRpbWUgdGFibGUgdGQuc2VsZWN0YWJsZS5zZWxlY3RlZCBidXR0b257YmFja2dyb3VuZDojNGU2Y2EzO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6MnB4fWRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmZjgwMDA7Y29sb3I6d2hpdGU7Ym9yZGVyLXJhZGl1czoycHh9ZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLmR0LWRhdGV0aW1lLXdlZWt7Zm9udC1zaXplOi43ZW19ZGl2LmR0LWRhdGV0aW1lIHRhYmxlIGJ1dHRvbnt3aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2ZvbnQtc2l6ZTppbmhlcml0O2NvbG9yOmluaGVyaXQ7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo0cHggMDtjdXJzb3I6cG9pbnRlcjttYXJnaW46MH1kaXYuZHQtZGF0ZXRpbWUgdGFibGUgYnV0dG9uIHNwYW57ZGlzcGxheTppbmxpbmUtYmxvY2s7bWluLXdpZHRoOjE0cHg7dGV4dC1hbGlnbjpyaWdodH1kaXYuZHQtZGF0ZXRpbWUgdGFibGUud2Vla051bWJlciB0aHt3aWR0aDoxMi41JX1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWNhbGVuZGFyIHRhYmxle21hcmdpbi10b3A6MH1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWxhYmVse3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2hlaWdodDozMHB4O3BhZGRpbmc6NXB4IDZweDtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JveC1zaXppbmc6Ym9yZGVyLWJveDtjdXJzb3I6cG9pbnRlcn1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWxhYmVsOmhvdmVye2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjJweDtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1sYWJlbCBzZWxlY3R7cG9zaXRpb246YWJzb2x1dGU7dG9wOjZweDtsZWZ0OjA7Y3Vyc29yOnBvaW50ZXI7b3BhY2l0eTowfWRpdi5kdC1kYXRldGltZS5ob3Jpem9udGFse3dpZHRoOjU1MHB4fWRpdi5kdC1kYXRldGltZS5ob3Jpem9udGFsIGRpdi5kdC1kYXRldGltZS1kYXRlLGRpdi5kdC1kYXRldGltZS5ob3Jpem9udGFsIGRpdi5kdC1kYXRldGltZS10aW1le3dpZHRoOjQ4JX1kaXYuZHQtZGF0ZXRpbWUuaG9yaXpvbnRhbCBkaXYuZHQtZGF0ZXRpbWUtdGltZXttYXJnaW4tbGVmdDo0JX1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWRhdGV7cG9zaXRpb246cmVsYXRpdmU7ZmxvYXQ6bGVmdDt3aWR0aDoxMDAlfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtdGltZXtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpsZWZ0O3dpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXJ9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS10aW1lPnNwYW57dmVydGljYWwtYWxpZ246bWlkZGxlfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtdGltZSB0aHt0ZXh0LWFsaWduOmxlZnR9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS10aW1lIGRpdi5kdC1kYXRldGltZS10aW1lYmxvY2t7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnQsZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uUmlnaHR7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7b3BhY2l0eTouMztvdmVyZmxvdzpoaWRkZW47Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnR9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uTGVmdDpob3ZlcixkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodDpob3Zlcntib3JkZXI6MXB4IHNvbGlkICNjY2M7Ym9yZGVyLXJhZGl1czoycHg7YmFja2dyb3VuZC1jb2xvcjojZjBmMGYwO29wYWNpdHk6LjZ9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uTGVmdCBidXR0b24sZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uUmlnaHQgYnV0dG9ue2JvcmRlcjpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7dGV4dC1pbmRlbnQ6MzBweDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2N1cnNvcjpwb2ludGVyfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjVweDtsZWZ0OjVweH1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25MZWZ0IGJ1dHRvbntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjF9ZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uTGVmdDphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6N3B4O2xlZnQ6MTBweDtkaXNwbGF5OmJsb2NrO2NvbnRlbnQ6IiI7Ym9yZGVyLXRvcDo3cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjdweCBzb2xpZCBibGFjaztib3JkZXItYm90dG9tOjdweCBzb2xpZCB0cmFuc3BhcmVudH1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NXB4O3JpZ2h0OjVweH1kaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodCBidXR0b257cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxfWRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvblJpZ2h0OmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDo3cHg7bGVmdDoxMnB4O2Rpc3BsYXk6YmxvY2s7Y29udGVudDoiIjtib3JkZXItdG9wOjdweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo3cHggc29saWQgYmxhY2s7Ym9yZGVyLWJvdHRvbTo3cHggc29saWQgdHJhbnNwYXJlbnR9ZGl2LmR0LWRhdGV0aW1lLWVycm9ye2NsZWFyOmJvdGg7cGFkZGluZzowIDFlbTttYXgtd2lkdGg6MjQwcHg7Zm9udC1zaXplOjExcHg7bGluZS1oZWlnaHQ6MS4yNWVtO3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiMTFmMWZ9aHRtbC5kYXJrIGlucHV0LmR0LWRhdGV0aW1lLDpyb290W2RhdGEtdGhlbWU9ZGFya10gaW5wdXQuZHQtZGF0ZXRpbWUsOnJvb3RbZGF0YS1icy10aGVtZT1kYXJrXSBpbnB1dC5kdC1kYXRldGltZXtjb2xvci1zY2hlbWU6ZGFya31odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1le2JvcmRlcjoxcHggc29saWQgIzU5NWI1ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyMTI1Mjk7Ym94LXNoYWRvdzozcHggNHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC44KX1odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRoLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRoLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRoe2NvbG9yOiNjY2N9aHRtbC5kYXJrIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZCw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZCw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZHtjb2xvcjojZWVlfWh0bWwuZGFyayBkaXYuZHQtZGF0ZXRpbWUgdGFibGUgdGQuc2VsZWN0YWJsZSw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGV7YmFja2dyb3VuZDojMzczYzQxfWh0bWwuZGFyayBkaXYuZHQtZGF0ZXRpbWUgdGFibGUgdGQuc2VsZWN0YWJsZS5kaXNhYmxlZCw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLmRpc2FibGVkLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUuZGlzYWJsZWR7Y29sb3I6I2FhYTtiYWNrZ3JvdW5kOiMxNzFiMWZ9aHRtbC5kYXJrIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLmRpc2FibGVkIGJ1dHRvbjpob3Zlciw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLmRpc2FibGVkIGJ1dHRvbjpob3Zlciw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSB0YWJsZSB0ZC5zZWxlY3RhYmxlLmRpc2FibGVkIGJ1dHRvbjpob3Zlcntjb2xvcjojYWFhO2JhY2tncm91bmQ6IzE3MWIxZn1odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUubm93LDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUubm93LDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUubm93e2JhY2tncm91bmQ6IzRiNTA1NX1odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUuc2VsZWN0ZWQgYnV0dG9uLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUuc2VsZWN0ZWQgYnV0dG9uLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUuc2VsZWN0ZWQgYnV0dG9ue2JhY2tncm91bmQ6IzZlYThmZTtjb2xvcjpibGFja31odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUgYnV0dG9uOmhvdmVyLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUgYnV0dG9uOmhvdmVyLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHRhYmxlIHRkLnNlbGVjdGFibGUgYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6I2ZmODAwMDtjb2xvcjpibGFja31odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1sYWJlbDpob3Zlciw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtbGFiZWw6aG92ZXIsOnJvb3RbZGF0YS1icy10aGVtZT1kYXJrXSBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWxhYmVsOmhvdmVye2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSl9aHRtbC5kYXJrIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnQ6aG92ZXIsaHRtbC5kYXJrIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvblJpZ2h0OmhvdmVyLGh0bWwuZGFyayBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25VcDpob3ZlcixodG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uRG93bjpob3Zlciw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnQ6aG92ZXIsOnJvb3RbZGF0YS10aGVtZT1kYXJrXSBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodDpob3Zlciw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvblVwOmhvdmVyLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uRG93bjpob3Zlciw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnQ6aG92ZXIsOnJvb3RbZGF0YS1icy10aGVtZT1kYXJrXSBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodDpob3Zlciw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvblVwOmhvdmVyLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uRG93bjpob3Zlcntib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50O2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpfWh0bWwuZGFyayBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25MZWZ0OmFmdGVyLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uTGVmdDphZnRlciw6cm9vdFtkYXRhLWJzLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvbkxlZnQ6YWZ0ZXJ7Ym9yZGVyLXJpZ2h0LWNvbG9yOndoaXRlfWh0bWwuZGFyayBkaXYuZHQtZGF0ZXRpbWUgZGl2LmR0LWRhdGV0aW1lLWljb25SaWdodDphZnRlciw6cm9vdFtkYXRhLXRoZW1lPWRhcmtdIGRpdi5kdC1kYXRldGltZSBkaXYuZHQtZGF0ZXRpbWUtaWNvblJpZ2h0OmFmdGVyLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIGRpdi5kdC1kYXRldGltZS1pY29uUmlnaHQ6YWZ0ZXJ7Ym9yZGVyLWxlZnQtY29sb3I6d2hpdGV9aHRtbC5kYXJrIGRpdi5kdC1kYXRldGltZSBzZWxlY3QsOnJvb3RbZGF0YS10aGVtZT1kYXJrXSBkaXYuZHQtZGF0ZXRpbWUgc2VsZWN0LDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lIHNlbGVjdHtjb2xvci1zY2hlbWU6ZGFya31odG1sLmRhcmsgZGl2LmR0LWRhdGV0aW1lLWVycm9yLDpyb290W2RhdGEtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lLWVycm9yLDpyb290W2RhdGEtYnMtdGhlbWU9ZGFya10gZGl2LmR0LWRhdGV0aW1lLWVycm9ye2NvbG9yOiNiMTFmMWZ9CgoK"
            },
            {
                "name": "Hours.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "ZnVuY3Rpb24gaW5pdEhvdXJzKCkgewogICAgY29uc3QgYmlyZEFkbWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpcmRfYWRtaW4nKS52YWx1ZSA9PT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgY29uc3QgZW5kVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmRfdGltZScpOwogICAgY29uc3Qgc3RhcnRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0X3RpbWUnKTsKICAgIGNvbnN0IHN0YW5kYXJkVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFuZGFyZF9ob3VycycpOwogICAgY29uc3QgZG91YmxlVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3VibGVfaG91cnMnKTsKICAgIGNvbnN0IHByZW1pdW1UaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZW1pdW1faG91cnMnKTsKICAgIGNvbnN0IHRvdGFsSG91cnNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3RhbF9ob3VycycpOwoKICAgIGxldCBsYXN0RWRpdGVkRmllbGQgPSBudWxsOwoKICAgIGZ1bmN0aW9uIGdldFNhZmVGbG9hdCh2YWwpIHsKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWwpIHx8IDA7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxIb3VycyhzdGFydEVsLCBlbmRFbCkgewogICAgICAgIGlmIChzdGFydEVsLnZhbHVlICYmIGVuZEVsLnZhbHVlKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoYDE5NzAtMDEtMDFUJHtzdGFydEVsLnZhbHVlfWApOwogICAgICAgICAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShgMTk3MC0wMS0wMVQke2VuZEVsLnZhbHVlfWApOwogICAgICAgICAgICBpZiAoZW5kIDwgc3RhcnQpIGVuZC5zZXREYXRlKGVuZC5nZXREYXRlKCkgKyAxKTsKCiAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSAoZW5kIC0gc3RhcnQpIC8gKDEwMDAgKiA2MCAqIDYwKTsKICAgICAgICAgICAgdG90YWxIb3Vyc0lucHV0LnZhbHVlID0gdG90YWxIb3Vycy50b0ZpeGVkKDIpOwoKICAgICAgICAgICAgLy8gUmVzZXQgYnJlYWtkb3duIHRvIGRlZmF1bHQKICAgICAgICAgICAgc3RhbmRhcmRUaW1lLnZhbHVlID0gdG90YWxIb3Vycy50b0ZpeGVkKDIpOwogICAgICAgICAgICBkb3VibGVUaW1lLnZhbHVlID0gJzAuMDAnOwogICAgICAgICAgICBwcmVtaXVtVGltZS52YWx1ZSA9ICcwLjAwJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b3RhbEhvdXJzSW5wdXQudmFsdWUgPSAnMC4wMCc7CiAgICAgICAgICAgIHN0YW5kYXJkVGltZS52YWx1ZSA9ICcwLjAwJzsKICAgICAgICAgICAgZG91YmxlVGltZS52YWx1ZSA9ICcwLjAwJzsKICAgICAgICAgICAgcHJlbWl1bVRpbWUudmFsdWUgPSAnMC4wMCc7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUhvdXJUeXBlcyhlKSB7CiAgICAgICAgY29uc3QgcyA9IGdldFNhZmVGbG9hdChzdGFuZGFyZFRpbWUudmFsdWUpOwogICAgICAgIGNvbnN0IGQgPSBnZXRTYWZlRmxvYXQoZG91YmxlVGltZS52YWx1ZSk7CiAgICAgICAgY29uc3QgcCA9IGdldFNhZmVGbG9hdChwcmVtaXVtVGltZS52YWx1ZSk7CiAgICAgICAgY29uc3QgdG90YWwgPSBnZXRTYWZlRmxvYXQodG90YWxIb3Vyc0lucHV0LnZhbHVlKTsKCiAgICAgICAgbGV0IHVwZGF0ZWRTID0gczsKICAgICAgICBsZXQgdXBkYXRlZEQgPSBkOwogICAgICAgIGxldCB1cGRhdGVkUCA9IHA7CgogICAgICAgIHN3aXRjaCAoZS50YXJnZXQubmFtZSkgewogICAgICAgICAgICBjYXNlICdzdGFuZGFyZF9ob3Vycyc6CiAgICAgICAgICAgICAgICBpZiAobGFzdEVkaXRlZEZpZWxkICE9PSAnc3RhbmRhcmRfaG91cnMnKSBicmVhazsKICAgICAgICAgICAgICAgIGlmIChwID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEQgPSBNYXRoLm1heCh0b3RhbCAtIHMsIDApOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQID0gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEQgPSBkOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQID0gTWF0aC5tYXgodG90YWwgLSBzIC0gZCwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnZG91YmxlX2hvdXJzJzoKICAgICAgICAgICAgICAgIGlmIChsYXN0RWRpdGVkRmllbGQgIT09ICdkb3VibGVfaG91cnMnKSBicmVhazsKICAgICAgICAgICAgICAgIHVwZGF0ZWRTID0gTWF0aC5tYXgodG90YWwgLSBkIC0gcCwgMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncHJlbWl1bV9ob3Vycyc6CiAgICAgICAgICAgICAgICBpZiAobGFzdEVkaXRlZEZpZWxkICE9PSAncHJlbWl1bV9ob3VycycpIGJyZWFrOwogICAgICAgICAgICAgICAgdXBkYXRlZFMgPSBNYXRoLm1heCh0b3RhbCAtIGQgLSBwLCAwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgbmV3VG90YWwgPSB1cGRhdGVkUyArIHVwZGF0ZWREICsgdXBkYXRlZFA7CiAgICAgICAgaWYgKG5ld1RvdGFsID4gdG90YWwpIHsKICAgICAgICAgICAgYWxlcnQoJ1RpbWVzaGVldCBob3VycyBjYW5ub3QgZXhjZWVkIFRvdGFsIEhvdXJzLicpOwogICAgICAgICAgICBzdGFuZGFyZFRpbWUudmFsdWUgPSB0b3RhbC50b0ZpeGVkKDIpOwogICAgICAgICAgICBkb3VibGVUaW1lLnZhbHVlID0gJzAuMDAnOwogICAgICAgICAgICBwcmVtaXVtVGltZS52YWx1ZSA9ICcwLjAwJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdGFuZGFyZFRpbWUudmFsdWUgPSB1cGRhdGVkUy50b0ZpeGVkKDIpOwogICAgICAgICAgICBkb3VibGVUaW1lLnZhbHVlID0gdXBkYXRlZEQudG9GaXhlZCgyKTsKICAgICAgICAgICAgcHJlbWl1bVRpbWUudmFsdWUgPSB1cGRhdGVkUC50b0ZpeGVkKDIpOwogICAgICAgIH0KCiAgICAgICAgbGFzdEVkaXRlZEZpZWxkID0gbnVsbDsKICAgIH0KCiAgICAvLyAtLS0gRXZlbnQgTGlzdGVuZXJzIC0tLQogICAgc3RhcnRUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiBjYWxjdWxhdGVUb3RhbEhvdXJzKHN0YXJ0VGltZSwgZW5kVGltZSkpOwogICAgZW5kVGltZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gY2FsY3VsYXRlVG90YWxIb3VycyhzdGFydFRpbWUsIGVuZFRpbWUpKTsKCiAgICBpZiAoYmlyZEFkbWluKSB7CiAgICAgICAgW3N0YW5kYXJkVGltZSwgZG91YmxlVGltZSwgcHJlbWl1bVRpbWVdLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IGxhc3RFZGl0ZWRGaWVsZCA9IGVsLm5hbWUpOwogICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdXBkYXRlSG91clR5cGVzKTsKICAgICAgICB9KTsKICAgIH0KfQo="
            },
            {
                "name": "expenseTypeFieldMap.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "Ly8gVGhpcyBmaWxlIG1hcHMgY2xhc3NpZmljYXRpb24gbmFtZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyByYXRlIGZpZWxkcyBmb3Igc3ViY29udHJhY3RvcnMgYW5kIHV0aWxpdGllcy4KY29uc3QgZGVmYXVsdFJhdGUgPSAwLjAwOwoKY29uc3QgZXhwZW5zZVR5cGVGaWVsZE1hcCA9IHsKICAgICJBcHByZW50aWNlIDEiOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2FwMV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfYXAxX290X3JhdGUnLCBwcmVtaXVtOiAnc2NfYXAxX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9hcDFfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9hcDFfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfYXAxX3B0X3JhdGUnIH0sCiAgICB9LAogICAgIkFwcHJlbnRpY2UgMiI6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfYXAyX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19hcDJfb3RfcmF0ZScsIHByZW1pdW06ICdzY19hcDJfcHRfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2FwMl9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2FwMl9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF9hcDJfcHRfcmF0ZScgfSwKICAgIH0sCiAgICAiQXBwcmVudGljZSAzIjogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19hcDNfc3RkX3JhdGUnLCBvdmVydGltZTogJ3NjX2FwM19vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2FwM19wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfYXAzX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfYXAzX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2FwM19wdF9yYXRlJyB9LAogICAgfSwKICAgICJBcHByZW50aWNlIDQiOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2FwNF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfYXA0X290X3JhdGUnLCBwcmVtaXVtOiAnc2NfYXA0X3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9hcDRfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9hcDRfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfYXA0X3B0X3JhdGUnIH0sCiAgICB9LAogICAgIkFwcHJlbnRpY2UgNSI6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfYXA1X3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19hcDVfb3RfcmF0ZScsIHByZW1pdW06ICdzY19hcDVfcHRfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2FwNV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2FwNV9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF9hcDVfcHRfcmF0ZScgfSwKICAgIH0sCiAgICAiQXBwcmVudGljZSA2IjogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19hcDZfc3RkX3JhdGUnLCBvdmVydGltZTogJ3NjX2FwNl9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2FwNl9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfYXA2X3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfYXA2X290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2FwNl9wdF9yYXRlJyB9LAogICAgfSwKICAgICJBcHByZW50aWNlIDciOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2FwN19zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfYXA3X290X3JhdGUnLCBwcmVtaXVtOiAnc2NfYXA3X3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9hcDdfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9hcDdfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfYXA3X3B0X3JhdGUnIH0sCiAgICB9LAogICAgQXNzZXNzb3I6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfYXNfc3RkX3JhdGUnLCBvdmVydGltZTogJ3NjX2FzX290X3JhdGUnLCBwcmVtaXVtOiAnc2NfYXNfcHRfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2FzX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfYXNfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfYXNfcHRfcmF0ZScgfSwKICAgIH0sCiAgICAnQ3JldyBMZWFkJzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19jbF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfY2xfb3RfcmF0ZScsIHByZW1pdW06ICdzY19jbF9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfY2xfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9jbF9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF9jbF9wdF9yYXRlJyB9LAogICAgfSwKICAgICdDcmV3IFN1cGVydmlzb3InOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2NzX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19jc19vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2NzX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9jc19zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2NzX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2NzX3B0X3JhdGUnIH0sCiAgICB9LAogICAgRHJpdmVyOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2RyX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19kcl9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2RyX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9kcl9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2RyX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2RyX3B0X3JhdGUnIH0sCiAgICB9LAogICAgRm9yZW1hbjogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19mbV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfZm1fb3RfcmF0ZScsIHByZW1pdW06ICdzY19mbV9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfZm1fc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9mbV9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF9mbV9wdF9yYXRlJyB9LAogICAgfSwKICAgICdHZW5lcmFsIEZvcmVtYW4nOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2dmX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19nZl9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2dmX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9nZl9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2dmX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2dmX3B0X3JhdGUnIH0sCiAgICB9LAogICAgR3JvdW5kbWFuOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2dtX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19nbV9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX2dtX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9nbV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX2dtX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX2dtX3B0X3JhdGUnIH0sCiAgICB9LAogICAgTGluZW1hbjogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19sbV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfbG1fb3RfcmF0ZScsIHByZW1pdW06ICdzY19sbV9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfbG1fc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9sbV9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF9sbV9wdF9yYXRlJyB9LAogICAgfSwKICAgICdMb2dpc3RpY3MgU3VwcG9ydCc6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfbHNfc3RkX3JhdGUnLCBvdmVydGltZTogJ3NjX2xzX290X3JhdGUnLCBwcmVtaXVtOiAnc2NfbHNfcHRfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2xzX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfbHNfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfbHNfcHRfcmF0ZScgfSwKICAgIH0sCiAgICBNZWNoYW5pYzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19tZWNoX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19tZWNoX290X3JhdGUnLCBwcmVtaXVtOiAnc2NfbWVjaF9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfbWVjaF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX21lY2hfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfbWVjaF9wdF9yYXRlJyB9LAogICAgfSwKICAgIE9wZXJhdG9yOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX29wX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19vcF9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX29wX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9vcF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX29wX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX29wX3B0X3JhdGUnIH0sCiAgICB9LAogICAgU2FmZXR5OiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX3NhZmV0eV9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2Nfc2FmZXR5X290X3JhdGUnLCBwcmVtaXVtOiAnc2Nfc2FmZXR5X3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9zYWZldHlfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF9zYWZldHlfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfc2FmZXR5X3B0X3JhdGUnIH0sCiAgICB9LAogICAgU3VwZXJpbnRlbmRlbnQ6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7CiAgICAgICAgICAgIHN0YW5kYXJkOiAnc2Nfc3VwZXJpbnRlbmRlbnRfc3RkX3JhdGUnLAogICAgICAgICAgICBvdmVydGltZTogJ3NjX3N1cGVyaW50ZW5kZW50X290X3JhdGUnLAogICAgICAgICAgICBwcmVtaXVtOiAnc2Nfc3VwZXJpbnRlbmRlbnRfcHRfcmF0ZScsCiAgICAgICAgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX3N1cGVyaW50ZW5kZW50X3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfc3VwZXJpbnRlbmRlbnRfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfc3VwZXJpbnRlbmRlbnRfcHRfcmF0ZScgfSwKICAgIH0sCiAgICBTdXBlcnZpc29yOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX3N2X3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19zdl9vdF9yYXRlJywgcHJlbWl1bTogJ3NjX3N2X3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9zdl9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX3N2X290X3JhdGUnLCBwcmVtaXVtOiAndXRsX3N2X3B0X3JhdGUnIH0sCiAgICB9LAogICAgU3VwcG9ydDogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19zdXBwb3J0X3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY19zdXBwb3J0X290X3JhdGUnLCBwcmVtaXVtOiAnc2Nfc3VwcG9ydF9wdF9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfc3VwcG9ydF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX3N1cHBvcnRfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfc3VwcG9ydF9wdF9yYXRlJyB9LAogICAgfSwKICAgICdUZWFtIExlYWQnOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX3RlYW1fbGVhZF9zdGRfcmF0ZScsIG92ZXJ0aW1lOiAnc2NfdGVhbV9sZWFkX290X3JhdGUnLCBwcmVtaXVtOiAnc2NfdGVhbV9sZWFkX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF90ZWFtX2xlYWRfc3RkX3JhdGUnLCBvdmVydGltZTogJ3V0bF90ZWFtX2xlYWRfb3RfcmF0ZScsIHByZW1pdW06ICd1dGxfdGVhbV9sZWFkX3B0X3JhdGUnIH0sCiAgICB9LAogICAgJ1VHIExpbmVtYW4nOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX3VnbG1fc3RkX3JhdGUnLCBvdmVydGltZTogJ3NjX3VnbG1fb3RfcmF0ZScsIHByZW1pdW06ICdzY191Z2xtX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF91Z2xtX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICd1dGxfdWdsbV9vdF9yYXRlJywgcHJlbWl1bTogJ3V0bF91Z2xtX3B0X3JhdGUnIH0sCiAgICB9LAogICAgJ1ZlZ2V0YXRpb24gVHJpbW1lcic6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7CiAgICAgICAgICAgIHN0YW5kYXJkOiAnc2NfdmVnZXRhdGlvbl90cmltbWVyX3N0ZF9yYXRlJywKICAgICAgICAgICAgb3ZlcnRpbWU6ICdzY192ZWdldGF0aW9uX3RyaW1tZXJfb3RfcmF0ZScsCiAgICAgICAgICAgIHByZW1pdW06ICdzY192ZWdldGF0aW9uX3RyaW1tZXJfcHRfcmF0ZScsCiAgICAgICAgfSwKICAgICAgICB1dGlsaXR5OiB7CiAgICAgICAgICAgIHN0YW5kYXJkOiAndXRsX3ZlZ2V0YXRpb25fdHJpbW1lcl9zdGRfcmF0ZScsCiAgICAgICAgICAgIG92ZXJ0aW1lOiAndXRsX3ZlZ2V0YXRpb25fdHJpbW1lcl9vdF9yYXRlJywKICAgICAgICAgICAgcHJlbWl1bTogJ3V0bF92ZWdldGF0aW9uX3RyaW1tZXJfcHRfcmF0ZScsCiAgICAgICAgfSwKICAgIH0sCiAgICAnV2lyZSBHdWFyZHMnOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX3dpcmVfZ3VhcmRzX3N0ZF9yYXRlJywgb3ZlcnRpbWU6ICdzY193aXJlX2d1YXJkc19vdF9yYXRlJywgcHJlbWl1bTogJ3NjX3dpcmVfZ3VhcmRzX3B0X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF93aXJlX2d1YXJkc19zdGRfcmF0ZScsIG92ZXJ0aW1lOiAndXRsX3dpcmVfZ3VhcmRzX290X3JhdGUnLCBwcmVtaXVtOiAndXRsX3dpcmVfZ3VhcmRzX3B0X3JhdGUnIH0sCiAgICB9LAogICAgQmFja2hvZTogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19iYWNraG9lX3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9iYWNraG9lX3JhdGUnIH0sCiAgICB9LAogICAgJ0JhY2t5YXJkIE1hY2hpbmUnOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2JhY2t5YXJkX21hY2hpbmVfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2JhY2t5YXJkX21hY2hpbmVfcmF0ZScgfSwKICAgIH0sCiAgICAnQnVja2V0IFRydWNrIC0gRGlzdHJpYnV0aW9uJzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19idWNrZXRfdHJ1Y2tfZGlzdHJpYnV0aW9uX3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9idWNrZXRfdHJ1Y2tfZGlzdHJpYnV0aW9uX3JhdGUnIH0sCiAgICB9LAogICAgJ0J1Y2tldCBUcnVjayAtIFNlcnZpY2UnOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2J1Y2tldF90cnVja19zZXJ2aWNlX3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9idWNrZXRfdHJ1Y2tfc2VydmljZV9yYXRlJyB9LAogICAgfSwKICAgICdCdWNrZXQgVHJ1Y2sgLSBUcmFuc21pc3Npb24nOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2J1Y2tldF90cnVja190cmFuc21pc3Npb25fcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2J1Y2tldF90cnVja190cmFuc21pc3Npb25fcmF0ZScgfSwKICAgIH0sCiAgICBDaGlwcGVyOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2NoaXBwZXJfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2NoaXBwZXJfcmF0ZScgfSwKICAgIH0sCiAgICAnRGlnZ2VyIERlcnJpY2snOiB7CiAgICAgICAgc3ViY29udHJhY3RvcjogeyBzdGFuZGFyZDogJ3NjX2RpZ2dlcl9kZXJyaWNrX3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9kaWdnZXJfZGVycmlja19yYXRlJyB9LAogICAgfSwKICAgICdEaWdnZXIgRGVycmljay1yZWFyIGxvdCc6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfZGlnZ2VyX2RlcnJpY2tfcmVhcl9sb3RfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2RpZ2dlcl9kZXJyaWNrX3JlYXJfbG90X3JhdGUnIH0sCiAgICB9LAogICAgJ0VxdWlwbWVudCBUcmFpbGVyJzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19lcXVpcG1lbnRfdHJhaWxlcl9yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfZXF1aXBtZW50X3RyYWlsZXJfcmF0ZScgfSwKICAgIH0sCiAgICBIeWRyb3ZhYzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19oeWRyb3ZhY19yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfaHlkcm92YWNfcmF0ZScgfSwKICAgIH0sCiAgICAnS251Y2tsZSBCb29tIFRydWNrJzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19rbnVja2xlX2Jvb21fdHJ1Y2tfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX2tudWNrbGVfYm9vbV90cnVja19yYXRlJyB9LAogICAgfSwKICAgIFBpY2t1cDogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19waWNrdXBfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX3BpY2t1cF9yYXRlJyB9LAogICAgfSwKICAgICdQb2xlIEhhdWxlcic6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfcG9sZV9oYXVsZXJfcmF0ZScgfSwKICAgICAgICB1dGlsaXR5OiB7IHN0YW5kYXJkOiAndXRsX3BvbGVfaGF1bGVyX3JhdGUnIH0sCiAgICB9LAogICAgJ1BvbGUgVHJhaWxlcic6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2NfcG9sZV90cmFpbGVyX3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9wb2xlX3RyYWlsZXJfcmF0ZScgfSwKICAgIH0sCiAgICAnU2VydmljZSBUcnVjayc6IHsKICAgICAgICBzdWJjb250cmFjdG9yOiB7IHN0YW5kYXJkOiAnc2Nfc2VydmljZV90cnVja19yYXRlJyB9LAogICAgICAgIHV0aWxpdHk6IHsgc3RhbmRhcmQ6ICd1dGxfc2VydmljZV90cnVja19yYXRlJyB9LAogICAgfSwKICAgICdTcGVjaWFsdHkgRXF1aXBtZW50JzogewogICAgICAgIHN1YmNvbnRyYWN0b3I6IHsgc3RhbmRhcmQ6ICdzY19zcGVjaWFsdHlfZXF1aXBtZW50X3JhdGUnIH0sCiAgICAgICAgdXRpbGl0eTogeyBzdGFuZGFyZDogJ3V0bF9zcGVjaWFsdHlfZXF1aXBtZW50X3JhdGUnIH0sCiAgICB9LAp9Owo="
            },
            {
                "name": "datatablesWithPlugins.js",
                "description": "",
                "contentType": "application/javascript",
                "contents": "LyoKICogVGhpcyBjb21iaW5lZCBmaWxlIHdhcyBjcmVhdGVkIGJ5IHRoZSBEYXRhVGFibGVzIGRvd25sb2FkZXIgYnVpbGRlcjoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkCiAqCiAqIFRvIHJlYnVpbGQgb3IgbW9kaWZ5IHRoaXMgZmlsZSB3aXRoIHRoZSBsYXRlc3QgdmVyc2lvbnMgb2YgdGhlIGluY2x1ZGVkCiAqIHNvZnR3YXJlIHBsZWFzZSB2aXNpdDoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkLyNiczQvZHQtMi4zLjIvYi0zLjIuNC9iLWh0bWw1LTMuMi40L2ItcHJpbnQtMy4yLjQvZGF0ZS0xLjUuNgogKgogKiBJbmNsdWRlZCBsaWJyYXJpZXM6CiAqICAgRGF0YVRhYmxlcyAyLjMuMiwgQnV0dG9ucyAzLjIuNCwgSFRNTDUgZXhwb3J0IDMuMi40LCBQcmludCB2aWV3IDMuMi40LCBEYXRlVGltZSAxLjUuNgogKi8KCi8qISBEYXRhVGFibGVzIDIuMy4yCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohZnVuY3Rpb24obil7InVzZSBzdHJpY3QiO3ZhciByOyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5Il0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx3aW5kb3csZG9jdW1lbnQpfSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzPyhyPXJlcXVpcmUoImpxdWVyeSIpLCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93P21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZXx8d2luZG93LHQ9dHx8cihlKSxuKHQsZSxlLmRvY3VtZW50KX06bW9kdWxlLmV4cG9ydHM9bihyLHdpbmRvdyx3aW5kb3cuZG9jdW1lbnQpKTp3aW5kb3cuRGF0YVRhYmxlPW4oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCl9KGZ1bmN0aW9uKEgsVyxTKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZihlKXt2YXIgdD1wYXJzZUludChlLDEwKTtyZXR1cm4haXNOYU4odCkmJmlzRmluaXRlKGUpP3Q6bnVsbH1mdW5jdGlvbiBjKGUsdCxuLHIpe3ZhciBhPXR5cGVvZiBlLG89InN0cmluZyI9PWE7cmV0dXJuIm51bWJlciI9PWF8fCJiaWdpbnQiPT1hfHwhKCFyfHwhXyhlKSl8fCh0JiZvJiYoZT1FKGUsdCkpLG4mJm8mJihlPWUucmVwbGFjZShQLCIiKSksIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKSl9ZnVuY3Rpb24gbihlLHQsbixyKXt2YXIgYTtyZXR1cm4hKCFyfHwhXyhlKSl8fCgic3RyaW5nIiE9dHlwZW9mIGV8fCFlLm1hdGNoKC88KGlucHV0fHNlbGVjdCkvaSkpJiYoXyhhPWUpfHwic3RyaW5nIj09dHlwZW9mIGEpJiYhIWModyhlKSx0LG4scil8fG51bGx9ZnVuY3Rpb24gdihlLHQsbixyKXt2YXIgYT1bXSxvPTAsaT10Lmxlbmd0aDtpZih2b2lkIDAhPT1yKWZvcig7bzxpO28rKyllW3Rbb11dJiZlW3Rbb11dW25dJiZhLnB1c2goZVt0W29dXVtuXVtyXSk7ZWxzZSBmb3IoO288aTtvKyspZVt0W29dXSYmYS5wdXNoKGVbdFtvXV1bbl0pO3JldHVybiBhfWZ1bmN0aW9uIGgoZSx0KXt2YXIgbixyPVtdO3ZvaWQgMD09PXQ/KHQ9MCxuPWUpOihuPXQsdD1lKTtmb3IodmFyIGE9dDthPG47YSsrKXIucHVzaChhKTtyZXR1cm4gcn1mdW5jdGlvbiBBKGUpe2Zvcih2YXIgdD1bXSxuPTAscj1lLmxlbmd0aDtuPHI7bisrKWVbbl0mJnQucHVzaChlW25dKTtyZXR1cm4gdH12YXIgVCxYLHIsZSxWPWZ1bmN0aW9uKGUsUCl7dmFyIEUsayxNO3JldHVybiBWLmZhY3RvcnkoZSxQKT9WOnRoaXMgaW5zdGFuY2VvZiBWP0goZSkuRGF0YVRhYmxlKFApOihrPXZvaWQgMD09PShQPWUpLE09KEU9dGhpcykubGVuZ3RoLGsmJihQPXt9KSx0aGlzLmFwaT1mdW5jdGlvbigpe3JldHVybiBuZXcgWCh0aGlzKX0sdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9MTxNP3R0KHt9LFAsITApOlAsZT0wLG49dGhpcy5nZXRBdHRyaWJ1dGUoImlkIikscj1WLmRlZmF1bHRzLGE9SCh0aGlzKTtpZigidGFibGUiIT10aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeihudWxsLDAsIk5vbi10YWJsZSBub2RlIGluaXRpYWxpc2F0aW9uICgiK3RoaXMubm9kZU5hbWUrIikiLDIpO2Vsc2V7dC5vbiYmdC5vbi5vcHRpb25zJiZsdChhLCJvcHRpb25zIix0Lm9uLm9wdGlvbnMpLGEudHJpZ2dlcigib3B0aW9ucy5kdCIsdCksUShyKSxLKHIuY29sdW1uKSxCKHIsciwhMCksQihyLmNvbHVtbixyLmNvbHVtbiwhMCksQihyLEguZXh0ZW5kKHQsc3QoYS5kYXRhKCkpKSwhMCk7dmFyIG89Vi5zZXR0aW5ncztmb3IoZT0wLGo9by5sZW5ndGg7ZTxqO2UrKyl7dmFyIGk9b1tlXTtpZihpLm5UYWJsZT09dGhpc3x8aS5uVEhlYWQmJmkublRIZWFkLnBhcmVudE5vZGU9PXRoaXN8fGkublRGb290JiZpLm5URm9vdC5wYXJlbnROb2RlPT10aGlzKXt2YXIgbD0odm9pZCAwIT09dC5iUmV0cmlldmU/dDpyKS5iUmV0cmlldmUscz0odm9pZCAwIT09dC5iRGVzdHJveT90OnIpLmJEZXN0cm95O2lmKGt8fGwpcmV0dXJuIGkub0luc3RhbmNlO2lmKHMpe25ldyBWLkFwaShpKS5kZXN0cm95KCk7YnJlYWt9cmV0dXJuIHZvaWQgeihpLDAsIkNhbm5vdCByZWluaXRpYWxpc2UgRGF0YVRhYmxlIiwzKX1pZihpLnNUYWJsZUlkPT10aGlzLmlkKXtvLnNwbGljZShlLDEpO2JyZWFrfX1udWxsIT09biYmIiIhPT1ufHwobj0iRGF0YVRhYmxlc19UYWJsZV8iK1YuZXh0Ll91bmlxdWUrKyx0aGlzLmlkPW4pO3ZhciB1LGM9SC5leHRlbmQoITAse30sVi5tb2RlbHMub1NldHRpbmdzLHtzRGVzdHJveVdpZHRoOmFbMF0uc3R5bGUud2lkdGgsc0luc3RhbmNlOm4sc1RhYmxlSWQ6bixjb2xncm91cDpIKCI8Y29sZ3JvdXA+IikucHJlcGVuZFRvKHRoaXMpLGZhc3REYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcShjLGUsdCxuKX19KSxuPShjLm5UYWJsZT10aGlzLGMub0luaXQ9dCxvLnB1c2goYyksYy5hcGk9bmV3IFgoYyksYy5vSW5zdGFuY2U9MT09PUUubGVuZ3RoP0U6YS5kYXRhVGFibGUoKSxRKHQpLHQuYUxlbmd0aE1lbnUmJiF0LmlEaXNwbGF5TGVuZ3RoJiYodC5pRGlzcGxheUxlbmd0aD1BcnJheS5pc0FycmF5KHQuYUxlbmd0aE1lbnVbMF0pP3QuYUxlbmd0aE1lbnVbMF1bMF06SC5pc1BsYWluT2JqZWN0KHQuYUxlbmd0aE1lbnVbMF0pP3QuYUxlbmd0aE1lbnVbMF0udmFsdWU6dC5hTGVuZ3RoTWVudVswXSksdD10dChILmV4dGVuZCghMCx7fSxyKSx0KSwkKGMub0ZlYXR1cmVzLHQsWyJiUGFnaW5hdGUiLCJiTGVuZ3RoQ2hhbmdlIiwiYkZpbHRlciIsImJTb3J0IiwiYlNvcnRNdWx0aSIsImJJbmZvIiwiYlByb2Nlc3NpbmciLCJiQXV0b1dpZHRoIiwiYlNvcnRDbGFzc2VzIiwiYlNlcnZlclNpZGUiLCJiRGVmZXJSZW5kZXIiXSksJChjLHQsWyJhamF4IiwiZm5Gb3JtYXROdW1iZXIiLCJzU2VydmVyTWV0aG9kIiwiYWFTb3J0aW5nIiwiYWFTb3J0aW5nRml4ZWQiLCJhTGVuZ3RoTWVudSIsInNQYWdpbmF0aW9uVHlwZSIsImlTdGF0ZUR1cmF0aW9uIiwiYlNvcnRDZWxsc1RvcCIsImlUYWJJbmRleCIsInNEb20iLCJmblN0YXRlTG9hZENhbGxiYWNrIiwiZm5TdGF0ZVNhdmVDYWxsYmFjayIsInJlbmRlcmVyIiwic2VhcmNoRGVsYXkiLCJyb3dJZCIsImNhcHRpb24iLCJsYXlvdXQiLCJvcmRlckRlc2NSZXZlcnNlIiwib3JkZXJJbmRpY2F0b3JzIiwib3JkZXJIYW5kbGVyIiwidGl0bGVSb3ciLCJ0eXBlRGV0ZWN0IixbImlDb29raWVEdXJhdGlvbiIsImlTdGF0ZUR1cmF0aW9uIl0sWyJvU2VhcmNoIiwib1ByZXZpb3VzU2VhcmNoIl0sWyJhb1NlYXJjaENvbHMiLCJhb1ByZVNlYXJjaENvbHMiXSxbImlEaXNwbGF5TGVuZ3RoIiwiX2lEaXNwbGF5TGVuZ3RoIl1dKSwkKGMub1Njcm9sbCx0LFtbInNTY3JvbGxYIiwic1giXSxbInNTY3JvbGxYSW5uZXIiLCJzWElubmVyIl0sWyJzU2Nyb2xsWSIsInNZIl0sWyJiU2Nyb2xsQ29sbGFwc2UiLCJiQ29sbGFwc2UiXV0pLCQoYy5vTGFuZ3VhZ2UsdCwiZm5JbmZvQ2FsbGJhY2siKSxZKGMsImFvRHJhd0NhbGxiYWNrIix0LmZuRHJhd0NhbGxiYWNrKSxZKGMsImFvU3RhdGVTYXZlUGFyYW1zIix0LmZuU3RhdGVTYXZlUGFyYW1zKSxZKGMsImFvU3RhdGVMb2FkUGFyYW1zIix0LmZuU3RhdGVMb2FkUGFyYW1zKSxZKGMsImFvU3RhdGVMb2FkZWQiLHQuZm5TdGF0ZUxvYWRlZCksWShjLCJhb1Jvd0NhbGxiYWNrIix0LmZuUm93Q2FsbGJhY2spLFkoYywiYW9Sb3dDcmVhdGVkQ2FsbGJhY2siLHQuZm5DcmVhdGVkUm93KSxZKGMsImFvSGVhZGVyQ2FsbGJhY2siLHQuZm5IZWFkZXJDYWxsYmFjayksWShjLCJhb0Zvb3RlckNhbGxiYWNrIix0LmZuRm9vdGVyQ2FsbGJhY2spLFkoYywiYW9Jbml0Q29tcGxldGUiLHQuZm5Jbml0Q29tcGxldGUpLFkoYywiYW9QcmVEcmF3Q2FsbGJhY2siLHQuZm5QcmVEcmF3Q2FsbGJhY2spLGMucm93SWRGbj1VKHQucm93SWQpLHQub24mJk9iamVjdC5rZXlzKHQub24pLmZvckVhY2goZnVuY3Rpb24oZSl7bHQoYSxlLHQub25bZV0pfSksYyksZD0oVi5fX2Jyb3dzZXJ8fChmPXt9LFYuX19icm93c2VyPWYscD1IKCI8ZGl2Lz4iKS5jc3Moe3Bvc2l0aW9uOiJmaXhlZCIsdG9wOjAsbGVmdDotMSpXLnBhZ2VYT2Zmc2V0LGhlaWdodDoxLHdpZHRoOjEsb3ZlcmZsb3c6ImhpZGRlbiJ9KS5hcHBlbmQoSCgiPGRpdi8+IikuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDoxLGxlZnQ6MSx3aWR0aDoxMDAsb3ZlcmZsb3c6InNjcm9sbCJ9KS5hcHBlbmQoSCgiPGRpdi8+IikuY3NzKHt3aWR0aDoiMTAwJSIsaGVpZ2h0OjEwfSkpKS5hcHBlbmRUbygiYm9keSIpLGQ9cC5jaGlsZHJlbigpLHU9ZC5jaGlsZHJlbigpLGYuYmFyV2lkdGg9ZFswXS5vZmZzZXRXaWR0aC1kWzBdLmNsaWVudFdpZHRoLGYuYlNjcm9sbGJhckxlZnQ9MSE9PU1hdGgucm91bmQodS5vZmZzZXQoKS5sZWZ0KSxwLnJlbW92ZSgpKSxILmV4dGVuZChuLm9Ccm93c2VyLFYuX19icm93c2VyKSxuLm9TY3JvbGwuaUJhcldpZHRoPVYuX19icm93c2VyLmJhcldpZHRoLGMub0NsYXNzZXMpLGY9KEguZXh0ZW5kKGQsVi5leHQuY2xhc3Nlcyx0Lm9DbGFzc2VzKSxhLmFkZENsYXNzKGQudGFibGUpLGMub0ZlYXR1cmVzLmJQYWdpbmF0ZXx8KHQuaURpc3BsYXlTdGFydD0wKSx2b2lkIDA9PT1jLmlJbml0RGlzcGxheVN0YXJ0JiYoYy5pSW5pdERpc3BsYXlTdGFydD10LmlEaXNwbGF5U3RhcnQsYy5faURpc3BsYXlTdGFydD10LmlEaXNwbGF5U3RhcnQpLHQuaURlZmVyTG9hZGluZyksaD0obnVsbCE9PWYmJihjLmRlZmVyTG9hZGluZz0hMCx1PUFycmF5LmlzQXJyYXkoZiksYy5faVJlY29yZHNEaXNwbGF5PXU/ZlswXTpmLGMuX2lSZWNvcmRzVG90YWw9dT9mWzFdOmYpLFtdKSxwPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRoZWFkIiksbj1OZShjLHBbMF0pO2lmKHQuYW9Db2x1bW5zKWg9dC5hb0NvbHVtbnM7ZWxzZSBpZihuLmxlbmd0aClmb3Ioaj1uW2U9MF0ubGVuZ3RoO2U8ajtlKyspaC5wdXNoKG51bGwpO2ZvcihlPTAsaj1oLmxlbmd0aDtlPGo7ZSsrKWVlKGMpO3ZhciBnLG0sdixiLHksRCx4LFM9Yyx3PXQuYW9Db2x1bW5EZWZzLFQ9aCxfPW4sQz1mdW5jdGlvbihlLHQpe3RlKGMsZSx0KX0sST1TLmFvQ29sdW1ucztpZihUKWZvcihnPTAsbT1ULmxlbmd0aDtnPG07ZysrKVRbZ10mJlRbZ10ubmFtZSYmKElbZ10uc05hbWU9VFtnXS5uYW1lKTtpZih3KWZvcihnPXcubGVuZ3RoLTE7MDw9ZztnLS0pe3ZhciBMPXZvaWQgMCE9PSh4PXdbZ10pLnRhcmdldD94LnRhcmdldDp2b2lkIDAhPT14LnRhcmdldHM/eC50YXJnZXRzOnguYVRhcmdldHM7Zm9yKEFycmF5LmlzQXJyYXkoTCl8fChMPVtMXSksdj0wLGI9TC5sZW5ndGg7djxiO3YrKyl7dmFyIEE9TFt2XTtpZigibnVtYmVyIj09dHlwZW9mIEEmJjA8PUEpe2Zvcig7SS5sZW5ndGg8PUE7KWVlKFMpO0MoQSx4KX1lbHNlIGlmKCJudW1iZXIiPT10eXBlb2YgQSYmQTwwKUMoSS5sZW5ndGgrQSx4KTtlbHNlIGlmKCJzdHJpbmciPT10eXBlb2YgQSlmb3IoeT0wLEQ9SS5sZW5ndGg7eTxEO3krKykiX2FsbCI9PT1BP0MoeSx4KTotMSE9PUEuaW5kZXhPZigiOm5hbWUiKT9JW3ldLnNOYW1lPT09QS5yZXBsYWNlKCI6bmFtZSIsIiIpJiZDKHkseCk6Xy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2VbeV0mJihlPUgoZVt5XS5jZWxsKSxBLm1hdGNoKC9eW2Etel1bXHctXSokL2kpJiYoQT0iLiIrQSksZS5pcyhBKSkmJkMoeSx4KX0pfX1pZihUKWZvcihnPTAsbT1ULmxlbmd0aDtnPG07ZysrKUMoZyxUW2ddKTt2YXIgTixuPWEuY2hpbGRyZW4oInRib2R5IikuZmluZCgidHI6Zmlyc3QtY2hpbGQiKS5lcSgwKSxGPShuLmxlbmd0aCYmKE49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJkYXRhLSIrdCk/dDpudWxsfSxIKG5bMF0pLmNoaWxkcmVuKCJ0aCwgdGQiKS5lYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG4scj1jLmFvQ29sdW1uc1tlXTtyfHx6KGMsMCwiSW5jb3JyZWN0IGNvbHVtbiBjb3VudCIsMTgpLHIubURhdGE9PT1lJiYobj1OKHQsInNvcnQiKXx8Tih0LCJvcmRlciIpLHQ9Tih0LCJmaWx0ZXIiKXx8Tih0LCJzZWFyY2giKSxudWxsPT09biYmbnVsbD09PXR8fChyLm1EYXRhPXtfOmUrIi5kaXNwbGF5Iixzb3J0Om51bGwhPT1uP2UrIi5AZGF0YS0iK246dm9pZCAwLHR5cGU6bnVsbCE9PW4/ZSsiLkBkYXRhLSIrbjp2b2lkIDAsZmlsdGVyOm51bGwhPT10P2UrIi5AZGF0YS0iK3Q6dm9pZCAwfSxyLl9pc0FycmF5SG9zdD0hMCx0ZShjLGUpKSl9KSksWShjLCJhb0RyYXdDYWxsYmFjayIsS2UpLGMub0ZlYXR1cmVzKTtpZih0LmJTdGF0ZVNhdmUmJihGLmJTdGF0ZVNhdmU9ITApLHZvaWQgMD09PXQuYWFTb3J0aW5nKWZvcih2YXIgTz1jLmFhU29ydGluZyxlPTAsaj1PLmxlbmd0aDtlPGo7ZSsrKU9bZV1bMV09Yy5hb0NvbHVtbnNbZV0uYXNTb3J0aW5nWzBdO1FlKGMpLFkoYywiYW9EcmF3Q2FsbGJhY2siLGZ1bmN0aW9uKCl7KGMuYlNvcnRlZHx8InNzcCI9PT1KKGMpfHxGLmJEZWZlclJlbmRlcikmJlFlKGMpfSk7dmFyIG49YS5jaGlsZHJlbigiY2FwdGlvbiIpLG49KGMuY2FwdGlvbiYmKG49MD09PW4ubGVuZ3RoP0goIjxjYXB0aW9uLz4iKS5hcHBlbmRUbyhhKTpuKS5odG1sKGMuY2FwdGlvbiksbi5sZW5ndGgmJihuWzBdLl9jYXB0aW9uU2lkZT1uLmNzcygiY2FwdGlvbi1zaWRlIiksYy5jYXB0aW9uTm9kZT1uWzBdKSwwPT09cC5sZW5ndGgmJihwPUgoIjx0aGVhZC8+IikuYXBwZW5kVG8oYSkpLGMublRIZWFkPXBbMF0sYS5jaGlsZHJlbigidGJvZHkiKSksbj0oMD09PW4ubGVuZ3RoJiYobj1IKCI8dGJvZHkvPiIpLmluc2VydEFmdGVyKHApKSxjLm5UQm9keT1uWzBdLGEuY2hpbGRyZW4oInRmb290IikpLFI9KDA9PT1uLmxlbmd0aCYmKG49SCgiPHRmb290Lz4iKS5hcHBlbmRUbyhhKSksYy5uVEZvb3Q9blswXSxjLmFpRGlzcGxheT1jLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpLGMuYkluaXRpYWxpc2VkPSEwLGMub0xhbmd1YWdlKTtILmV4dGVuZCghMCxSLHQub0xhbmd1YWdlKSxSLnNVcmw/SC5hamF4KHtkYXRhVHlwZToianNvbiIsdXJsOlIuc1VybCxzdWNjZXNzOmZ1bmN0aW9uKGUpe0Ioci5vTGFuZ3VhZ2UsZSksSC5leHRlbmQoITAsUixlLGMub0luaXQub0xhbmd1YWdlKSxHKGMsbnVsbCwiaTE4biIsW2NdLCEwKSxIZShjKX0sZXJyb3I6ZnVuY3Rpb24oKXt6KGMsMCwiaTE4biBmaWxlIGxvYWRpbmcgZXJyb3IiLDIxKSxIZShjKX19KTooRyhjLG51bGwsImkxOG4iLFtjXSwhMCksSGUoYykpfX0pLEU9bnVsbCx0aGlzKX0sZD0oVi5leHQ9VD17YnVpbGRlcjoiYnM0L2R0LTIuMy4yL2ItMy4yLjQvYi1odG1sNS0zLjIuNC9iLXByaW50LTMuMi40L2RhdGUtMS41LjYiLGJ1dHRvbnM6e30sY2NDb250ZW50Ont9LGNsYXNzZXM6e30sZXJyTW9kZToiYWxlcnQiLGVzY2FwZTp7YXR0cmlidXRlczohMX0sZmVhdHVyZTpbXSxmZWF0dXJlczp7fSxzZWFyY2g6W10sc2VsZWN0b3I6e2NlbGw6W10sY29sdW1uOltdLHJvdzpbXX0sbGVnYWN5OnthamF4Om51bGx9LHBhZ2VyOnt9LHJlbmRlcmVyOntwYWdlQnV0dG9uOnt9LGhlYWRlcjp7fX0sb3JkZXI6e30sdHlwZTp7Y2xhc3NOYW1lOnt9LGRldGVjdDpbXSxyZW5kZXI6e30sc2VhcmNoOnt9LG9yZGVyOnt9fSxfdW5pcXVlOjAsZm5WZXJzaW9uQ2hlY2s6Vi5mblZlcnNpb25DaGVjayxpQXBpSW5kZXg6MCxzVmVyc2lvbjpWLnZlcnNpb259LEguZXh0ZW5kKFQse2FmbkZpbHRlcmluZzpULnNlYXJjaCxhVHlwZXM6VC50eXBlLmRldGVjdCxvZm5TZWFyY2g6VC50eXBlLnNlYXJjaCxvU29ydDpULnR5cGUub3JkZXIsYWZuU29ydERhdGE6VC5vcmRlcixhb0ZlYXR1cmVzOlQuZmVhdHVyZSxvU3RkQ2xhc3NlczpULmNsYXNzZXMsb1BhZ2luYXRpb246VC5wYWdlcn0pLEguZXh0ZW5kKFYuZXh0LmNsYXNzZXMse2NvbnRhaW5lcjoiZHQtY29udGFpbmVyIixlbXB0eTp7cm93OiJkdC1lbXB0eSJ9LGluZm86e2NvbnRhaW5lcjoiZHQtaW5mbyJ9LGxheW91dDp7cm93OiJkdC1sYXlvdXQtcm93IixjZWxsOiJkdC1sYXlvdXQtY2VsbCIsdGFibGVSb3c6ImR0LWxheW91dC10YWJsZSIsdGFibGVDZWxsOiIiLHN0YXJ0OiJkdC1sYXlvdXQtc3RhcnQiLGVuZDoiZHQtbGF5b3V0LWVuZCIsZnVsbDoiZHQtbGF5b3V0LWZ1bGwifSxsZW5ndGg6e2NvbnRhaW5lcjoiZHQtbGVuZ3RoIixzZWxlY3Q6ImR0LWlucHV0In0sb3JkZXI6e2NhbkFzYzoiZHQtb3JkZXJhYmxlLWFzYyIsY2FuRGVzYzoiZHQtb3JkZXJhYmxlLWRlc2MiLGlzQXNjOiJkdC1vcmRlcmluZy1hc2MiLGlzRGVzYzoiZHQtb3JkZXJpbmctZGVzYyIsbm9uZToiZHQtb3JkZXJhYmxlLW5vbmUiLHBvc2l0aW9uOiJzb3J0aW5nXyJ9LHByb2Nlc3Npbmc6e2NvbnRhaW5lcjoiZHQtcHJvY2Vzc2luZyJ9LHNjcm9sbGluZzp7Ym9keToiZHQtc2Nyb2xsLWJvZHkiLGNvbnRhaW5lcjoiZHQtc2Nyb2xsIixmb290ZXI6e3NlbGY6ImR0LXNjcm9sbC1mb290Iixpbm5lcjoiZHQtc2Nyb2xsLWZvb3RJbm5lciJ9LGhlYWRlcjp7c2VsZjoiZHQtc2Nyb2xsLWhlYWQiLGlubmVyOiJkdC1zY3JvbGwtaGVhZElubmVyIn19LHNlYXJjaDp7Y29udGFpbmVyOiJkdC1zZWFyY2giLGlucHV0OiJkdC1pbnB1dCJ9LHRhYmxlOiJkYXRhVGFibGUiLHRib2R5OntjZWxsOiIiLHJvdzoiIn0sdGhlYWQ6e2NlbGw6IiIscm93OiIifSx0Zm9vdDp7Y2VsbDoiIixyb3c6IiJ9LHBhZ2luZzp7YWN0aXZlOiJjdXJyZW50IixidXR0b246ImR0LXBhZ2luZy1idXR0b24iLGNvbnRhaW5lcjoiZHQtcGFnaW5nIixkaXNhYmxlZDoiZGlzYWJsZWQiLG5hdjoiIn19KSx7fSksTj0vW1xyXG5cdTIwMjhdL2csRj0vPChbXj5dKj4pL2csTz1NYXRoLnBvdygyLDI4KSxqPS9eXGR7Miw0fVsuLy1dXGR7MSwyfVsuLy1dXGR7MSwyfShbVCBdezF9XGR7MSwyfVs6Ll1cZHsyfShbLjpdXGR7Mn0pPyk/JC8sUj1uZXcgUmVnRXhwKCIoXFwiK1siLyIsIi4iLCIqIiwiKyIsIj8iLCJ8IiwiKCIsIikiLCJbIiwiXSIsInsiLCJ9IiwiXFwiLCIkIiwiXiIsIi0iXS5qb2luKCJ8XFwiKSsiKSIsImciKSxQPS9bJ1x1MDBBMCwkwqPigqzCpSVcdTIwMDlcdTIwMkZcdTIwQkRcdTIwYTlcdTIwQkFyZmvJg86eXS9naSxfPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwhMD09PWV8fCItIj09PWV9LEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZFt0XXx8KGRbdF09bmV3IFJlZ0V4cChFZSh0KSwiZyIpKSwic3RyaW5nIj09dHlwZW9mIGUmJiIuIiE9PXQ/ZS5yZXBsYWNlKC9cLi9nLCIiKS5yZXBsYWNlKGRbdF0sIi4iKTplfSxiPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxhPTAsbz1lLmxlbmd0aDtpZih2b2lkIDAhPT1uKWZvcig7YTxvO2ErKyllW2FdJiZlW2FdW3RdJiZyLnB1c2goZVthXVt0XVtuXSk7ZWxzZSBmb3IoO2E8bzthKyspZVthXSYmci5wdXNoKGVbYV1bdF0pO3JldHVybiByfSx3PWZ1bmN0aW9uKGUpe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIGU7aWYoZS5sZW5ndGg+Tyl0aHJvdyBuZXcgRXJyb3IoIkV4Y2VlZGVkIG1heCBzdHIgbGVuIik7dmFyIHQ7Zm9yKGU9ZS5yZXBsYWNlKEYsIiIpOyhlPSh0PWUpLnJlcGxhY2UoLzxzY3JpcHQvaSwiIikpIT09dDspO3JldHVybiB0fSx1PWZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YoZT1BcnJheS5pc0FycmF5KGUpP2Uuam9pbigiLCIpOmUpP2UucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7Iik6ZX0saz1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9lOihuPWUubm9ybWFsaXplP2Uubm9ybWFsaXplKCJORkQiKTplKS5sZW5ndGghPT1lLmxlbmd0aD8oITA9PT10P2UrIiAiOiIiKStuLnJlcGxhY2UoL1tcdTAzMDAtXHUwMzZmXS9nLCIiKTpufSxDPWZ1bmN0aW9uKGUpe2lmKEFycmF5LmZyb20mJlNldClyZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGUpKTtpZihmdW5jdGlvbihlKXtpZighKGUubGVuZ3RoPDIpKWZvcih2YXIgdD1lLnNsaWNlKCkuc29ydCgpLG49dFswXSxyPTEsYT10Lmxlbmd0aDtyPGE7cisrKXtpZih0W3JdPT09bilyZXR1cm4hMTtuPXRbcl19cmV0dXJuITB9KGUpKXJldHVybiBlLnNsaWNlKCk7dmFyIHQsbixyLGE9W10sbz1lLmxlbmd0aCxpPTA7ZTpmb3Iobj0wO248bztuKyspe2Zvcih0PWVbbl0scj0wO3I8aTtyKyspaWYoYVtyXT09PXQpY29udGludWUgZTthLnB1c2godCksaSsrfXJldHVybiBhfSxNPWZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylNKGUsdFtuXSk7ZWxzZSBlLnB1c2godCk7cmV0dXJuIGV9O2Z1bmN0aW9uIHkodCxlKXtlJiZlLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbihlKXtlJiZ0LmNsYXNzTGlzdC5hZGQoZSl9KX1mdW5jdGlvbiBaKHQpe3ZhciBuLHIsYT17fTtILmVhY2godCxmdW5jdGlvbihlKXsobj1lLm1hdGNoKC9eKFteQS1aXSs/KShbQS1aXSkvKSkmJi0xIT09ImEgYWEgYWkgYW8gYXMgYiBmbiBpIG0gbyBzICIuaW5kZXhPZihuWzFdKyIgIikmJihyPWUucmVwbGFjZShuWzBdLG5bMl0udG9Mb3dlckNhc2UoKSksYVtyXT1lLCJvIj09PW5bMV0pJiZaKHRbZV0pfSksdC5faHVuZ2FyaWFuTWFwPWF9ZnVuY3Rpb24gQih0LG4scil7dmFyIGE7dC5faHVuZ2FyaWFuTWFwfHxaKHQpLEguZWFjaChuLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PShhPXQuX2h1bmdhcmlhbk1hcFtlXSl8fCFyJiZ2b2lkIDAhPT1uW2FdfHwoIm8iPT09YS5jaGFyQXQoMCk/KG5bYV18fChuW2FdPXt9KSxILmV4dGVuZCghMCxuW2FdLG5bZV0pLEIodFthXSxuW2FdLHIpKTpuW2FdPW5bZV0pfSl9Vi51dGlsPXtkaWFjcml0aWNzOmZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpcmV0dXJuIGsoZSx0KTtrPWV9LGRlYm91bmNlOmZ1bmN0aW9uKG4scil7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cztjbGVhclRpbWVvdXQoYSksYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5hcHBseShlLHQpfSxyfHwyNTApfX0sdGhyb3R0bGU6ZnVuY3Rpb24ocixlKXt2YXIgYSxvLGk9dm9pZCAwIT09ZT9lOjIwMDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9K25ldyBEYXRlLG49YXJndW1lbnRzO2EmJnQ8YStpPyhjbGVhclRpbWVvdXQobyksbz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YT12b2lkIDAsci5hcHBseShlLG4pfSxpKSk6KGE9dCxyLmFwcGx5KGUsbikpfX0sZXNjYXBlUmVnZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShSLCJcXCQxIil9LHNldDpmdW5jdGlvbihyKXt2YXIgZjtyZXR1cm4gSC5pc1BsYWluT2JqZWN0KHIpP1YudXRpbC5zZXQoci5fKTpudWxsPT09cj9mdW5jdGlvbigpe306ImZ1bmN0aW9uIj09dHlwZW9mIHI/ZnVuY3Rpb24oZSx0LG4pe3IoZSwic2V0Iix0LG4pfToic3RyaW5nIiE9dHlwZW9mIHJ8fC0xPT09ci5pbmRleE9mKCIuIikmJi0xPT09ci5pbmRleE9mKCJbIikmJi0xPT09ci5pbmRleE9mKCIoIik/ZnVuY3Rpb24oZSx0KXtlW3JdPXR9OihmPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHIsYSxvLGksbD1nZShuKSxuPWxbbC5sZW5ndGgtMV0scz0wLHU9bC5sZW5ndGgtMTtzPHU7cysrKXtpZigiX19wcm90b19fIj09PWxbc118fCJjb25zdHJ1Y3RvciI9PT1sW3NdKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHNldCBwcm90b3R5cGUgdmFsdWVzIik7aWYocj1sW3NdLm1hdGNoKHBlKSxhPWxbc10ubWF0Y2gocCkscil7aWYobFtzXT1sW3NdLnJlcGxhY2UocGUsIiIpLGVbbFtzXV09W10sKHI9bC5zbGljZSgpKS5zcGxpY2UoMCxzKzEpLGk9ci5qb2luKCIuIiksQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGM9MCxkPXQubGVuZ3RoO2M8ZDtjKyspZihvPXt9LHRbY10saSksZVtsW3NdXS5wdXNoKG8pO2Vsc2UgZVtsW3NdXT10O3JldHVybn1hJiYobFtzXT1sW3NdLnJlcGxhY2UocCwiIiksZT1lW2xbc11dKHQpKSxudWxsIT09ZVtsW3NdXSYmdm9pZCAwIT09ZVtsW3NdXXx8KGVbbFtzXV09e30pLGU9ZVtsW3NdXX1uLm1hdGNoKHApP2Vbbi5yZXBsYWNlKHAsIiIpXSh0KTplW24ucmVwbGFjZShwZSwiIildPXR9LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGYoZSx0LHIpfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgbyxmO3JldHVybiBILmlzUGxhaW5PYmplY3QoYSk/KG89e30sSC5lYWNoKGEsZnVuY3Rpb24oZSx0KXt0JiYob1tlXT1WLnV0aWwuZ2V0KHQpKX0pLGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBhPW9bdF18fG8uXztyZXR1cm4gdm9pZCAwIT09YT9hKGUsdCxuLHIpOmV9KTpudWxsPT09YT9mdW5jdGlvbihlKXtyZXR1cm4gZX06ImZ1bmN0aW9uIj09dHlwZW9mIGE/ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGEoZSx0LG4scil9OiJzdHJpbmciIT10eXBlb2YgYXx8LTE9PT1hLmluZGV4T2YoIi4iKSYmLTE9PT1hLmluZGV4T2YoIlsiKSYmLTE9PT1hLmluZGV4T2YoIigiKT9mdW5jdGlvbihlKXtyZXR1cm4gZVthXX06KGY9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGEsbztpZigiIiE9PW4pZm9yKHZhciBpPWdlKG4pLGw9MCxzPWkubGVuZ3RoO2w8cztsKyspe2lmKGQ9aVtsXS5tYXRjaChwZSkscj1pW2xdLm1hdGNoKHApLGQpe2lmKGlbbF09aVtsXS5yZXBsYWNlKHBlLCIiKSwiIiE9PWlbbF0mJihlPWVbaVtsXV0pLGE9W10saS5zcGxpY2UoMCxsKzEpLG89aS5qb2luKCIuIiksQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHU9MCxjPWUubGVuZ3RoO3U8Yzt1KyspYS5wdXNoKGYoZVt1XSx0LG8pKTt2YXIgZD1kWzBdLnN1YnN0cmluZygxLGRbMF0ubGVuZ3RoLTEpO2U9IiI9PT1kP2E6YS5qb2luKGQpO2JyZWFrfWlmKHIpaVtsXT1pW2xdLnJlcGxhY2UocCwiIiksZT1lW2lbbF1dKCk7ZWxzZXtpZihudWxsPT09ZXx8bnVsbD09PWVbaVtsXV0pcmV0dXJuIG51bGw7aWYodm9pZCAwPT09ZXx8dm9pZCAwPT09ZVtpW2xdXSlyZXR1cm47ZT1lW2lbbF1dfX1yZXR1cm4gZX0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gZihlLHQsYSl9KX0sc3RyaXBIdG1sOmZ1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO2lmKCJmdW5jdGlvbiIhPXQpcmV0dXJuInN0cmluZyI9PXQ/dyhlKTplO3c9ZX0sZXNjYXBlSHRtbDpmdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZTtpZigiZnVuY3Rpb24iIT10KXJldHVybiJzdHJpbmciPT10fHxBcnJheS5pc0FycmF5KGUpP3UoZSk6ZTt1PWV9LHVuaXF1ZTpDfTt2YXIgYT1mdW5jdGlvbihlLHQsbil7dm9pZCAwIT09ZVt0XSYmKGVbbl09ZVt0XSl9O2Z1bmN0aW9uIFEoZSl7YShlLCJvcmRlcmluZyIsImJTb3J0IiksYShlLCJvcmRlck11bHRpIiwiYlNvcnRNdWx0aSIpLGEoZSwib3JkZXJDbGFzc2VzIiwiYlNvcnRDbGFzc2VzIiksYShlLCJvcmRlckNlbGxzVG9wIiwiYlNvcnRDZWxsc1RvcCIpLGEoZSwib3JkZXIiLCJhYVNvcnRpbmciKSxhKGUsIm9yZGVyRml4ZWQiLCJhYVNvcnRpbmdGaXhlZCIpLGEoZSwicGFnaW5nIiwiYlBhZ2luYXRlIiksYShlLCJwYWdpbmdUeXBlIiwic1BhZ2luYXRpb25UeXBlIiksYShlLCJwYWdlTGVuZ3RoIiwiaURpc3BsYXlMZW5ndGgiKSxhKGUsInNlYXJjaGluZyIsImJGaWx0ZXIiKSwiYm9vbGVhbiI9PXR5cGVvZiBlLnNTY3JvbGxYJiYoZS5zU2Nyb2xsWD1lLnNTY3JvbGxYPyIxMDAlIjoiIiksImJvb2xlYW4iPT10eXBlb2YgZS5zY3JvbGxYJiYoZS5zY3JvbGxYPWUuc2Nyb2xsWD8iMTAwJSI6IiIpLCJvYmplY3QiPT10eXBlb2YgZS5iU29ydD8oZS5vcmRlckluZGljYXRvcnM9dm9pZCAwPT09ZS5iU29ydC5pbmRpY2F0b3JzfHxlLmJTb3J0LmluZGljYXRvcnMsZS5vcmRlckhhbmRsZXI9dm9pZCAwPT09ZS5iU29ydC5oYW5kbGVyfHxlLmJTb3J0LmhhbmRsZXIsZS5iU29ydD0hMCk6ITE9PT1lLmJTb3J0PyhlLm9yZGVySW5kaWNhdG9ycz0hMSxlLm9yZGVySGFuZGxlcj0hMSk6ITA9PT1lLmJTb3J0JiYoZS5vcmRlckluZGljYXRvcnM9ITAsZS5vcmRlckhhbmRsZXI9ITApLCJib29sZWFuIj09dHlwZW9mIGUuYlNvcnRDZWxsc1RvcCYmKGUudGl0bGVSb3c9ZS5iU29ydENlbGxzVG9wKTt2YXIgdD1lLmFvU2VhcmNoQ29scztpZih0KWZvcih2YXIgbj0wLHI9dC5sZW5ndGg7bjxyO24rKyl0W25dJiZCKFYubW9kZWxzLm9TZWFyY2gsdFtuXSk7ZS5zZXJ2ZXJTaWRlJiYhZS5zZWFyY2hEZWxheSYmKGUuc2VhcmNoRGVsYXk9NDAwKX1mdW5jdGlvbiBLKGUpe2EoZSwib3JkZXJhYmxlIiwiYlNvcnRhYmxlIiksYShlLCJvcmRlckRhdGEiLCJhRGF0YVNvcnQiKSxhKGUsIm9yZGVyU2VxdWVuY2UiLCJhc1NvcnRpbmciKSxhKGUsIm9yZGVyRGF0YVR5cGUiLCJzb3J0RGF0YVR5cGUiKTt2YXIgdD1lLmFEYXRhU29ydDsibnVtYmVyIiE9dHlwZW9mIHR8fEFycmF5LmlzQXJyYXkodCl8fChlLmFEYXRhU29ydD1bdF0pfWZ1bmN0aW9uIGVlKGUpe3ZhciB0PVYuZGVmYXVsdHMuY29sdW1uLG49ZS5hb0NvbHVtbnMubGVuZ3RoLHQ9SC5leHRlbmQoe30sVi5tb2RlbHMub0NvbHVtbix0LHthRGF0YVNvcnQ6dC5hRGF0YVNvcnR8fFtuXSxtRGF0YTp0Lm1EYXRhfHxuLGlkeDpuLHNlYXJjaEZpeGVkOnt9LGNvbEVsOkgoIjxjb2w+IikuYXR0cigiZGF0YS1kdC1jb2x1bW4iLG4pfSksdD0oZS5hb0NvbHVtbnMucHVzaCh0KSxlLmFvUHJlU2VhcmNoQ29scyk7dFtuXT1ILmV4dGVuZCh7fSxWLm1vZGVscy5vU2VhcmNoLHRbbl0pfWZ1bmN0aW9uIHRlKGUsdCxuKXtmdW5jdGlvbiByKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmLTEhPT1lLmluZGV4T2YoIkAiKX12YXIgYT1lLmFvQ29sdW1uc1t0XSxvPShudWxsIT1uJiYoSyhuKSxCKFYuZGVmYXVsdHMuY29sdW1uLG4sITApLHZvaWQgMD09PW4ubURhdGFQcm9wfHxuLm1EYXRhfHwobi5tRGF0YT1uLm1EYXRhUHJvcCksbi5zVHlwZSYmKGEuX3NNYW51YWxUeXBlPW4uc1R5cGUpLG4uY2xhc3NOYW1lJiYhbi5zQ2xhc3MmJihuLnNDbGFzcz1uLmNsYXNzTmFtZSksdD1hLnNDbGFzcyxILmV4dGVuZChhLG4pLCQoYSxuLCJzV2lkdGgiLCJzV2lkdGhPcmlnIiksdCE9PWEuc0NsYXNzJiYoYS5zQ2xhc3M9dCsiICIrYS5zQ2xhc3MpLHZvaWQgMCE9PW4uaURhdGFTb3J0JiYoYS5hRGF0YVNvcnQ9W24uaURhdGFTb3J0XSksJChhLG4sImFEYXRhU29ydCIpKSxhLm1EYXRhKSxpPVUobyk7YS5tUmVuZGVyJiZBcnJheS5pc0FycmF5KGEubVJlbmRlcikmJihuPSh0PWEubVJlbmRlci5zbGljZSgpKS5zaGlmdCgpLGEubVJlbmRlcj1WLnJlbmRlcltuXS5hcHBseShXLHQpKSxhLl9yZW5kZXI9YS5tUmVuZGVyP1UoYS5tUmVuZGVyKTpudWxsO2EuX2JBdHRyU3JjPUguaXNQbGFpbk9iamVjdChvKSYmKHIoby5zb3J0KXx8cihvLnR5cGUpfHxyKG8uZmlsdGVyKSksYS5fc2V0dGVyPW51bGwsYS5mbkdldERhdGE9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkoZSx0LHZvaWQgMCxuKTtyZXR1cm4gYS5fcmVuZGVyJiZ0P2EuX3JlbmRlcihyLHQsZSxuKTpyfSxhLmZuU2V0RGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG0obykoZSx0LG4pfSwibnVtYmVyIj09dHlwZW9mIG98fGEuX2lzQXJyYXlIb3N0fHwoZS5fcm93UmVhZE9iamVjdD0hMCksZS5vRmVhdHVyZXMuYlNvcnR8fChhLmJTb3J0YWJsZT0hMSl9ZnVuY3Rpb24gbmUoZSl7IWZ1bmN0aW9uKHQpe2lmKHQub0ZlYXR1cmVzLmJBdXRvV2lkdGgpe3ZhciBlLG4scj10Lm5UYWJsZSxhPXQuYW9Db2x1bW5zLG89dC5vU2Nyb2xsLGk9by5zWSxsPW8uc1gsbz1vLnNYSW5uZXIscz1pZSh0LCJiVmlzaWJsZSIpLHU9ci5nZXRBdHRyaWJ1dGUoIndpZHRoIiksYz1yLnBhcmVudE5vZGUsZD1yLnN0eWxlLndpZHRoLGY9emUodCk7aWYoZj09PXQuY29udGFpbmVyV2lkdGgpcmV0dXJuO3QuY29udGFpbmVyV2lkdGg9ZixkfHx1fHwoci5zdHlsZS53aWR0aD0iMTAwJSIsZD0iMTAwJSIpLGQmJi0xIT09ZC5pbmRleE9mKCIlIikmJih1PWQpLEcodCxudWxsLCJjb2x1bW4tY2FsYyIse3Zpc2libGU6c30sITEpO3ZhciBmPUgoci5jbG9uZU5vZGUoKSkuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIikucmVtb3ZlQXR0cigiaWQiKSxoPShmLmFwcGVuZCgiPHRib2R5PiIpLEgoIjx0ci8+IikuYXBwZW5kVG8oZi5maW5kKCJ0Ym9keSIpKSk7Zm9yKGYuYXBwZW5kKEgodC5uVEhlYWQpLmNsb25lKCkpLmFwcGVuZChIKHQublRGb290KS5jbG9uZSgpKSxmLmZpbmQoInRmb290IHRoLCB0Zm9vdCB0ZCIpLmNzcygid2lkdGgiLCIiKSxmLmZpbmQoInRoZWFkIHRoLCB0aGVhZCB0ZCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1jZSh0LHRoaXMsITAsITEpO2U/KHRoaXMuc3R5bGUud2lkdGg9ZSxsJiYodGhpcy5zdHlsZS5taW5XaWR0aD1lLEgodGhpcykuYXBwZW5kKEgoIjxkaXYvPiIpLmNzcyh7d2lkdGg6ZSxtYXJnaW46MCxwYWRkaW5nOjAsYm9yZGVyOjAsaGVpZ2h0OjF9KSkpKTp0aGlzLnN0eWxlLndpZHRoPSIifSksZT0wO2U8cy5sZW5ndGg7ZSsrKXtwPXNbZV0sbj1hW3BdO3ZhciBwPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5hb0NvbHVtbnNbdF07aWYoIW4ubWF4TGVuU3RyaW5nKXtmb3IodmFyIHIsYT0iIixvPS0xLGk9MCxsPWUuYWlEaXNwbGF5TWFzdGVyLmxlbmd0aDtpPGw7aSsrKXt2YXIgcz1lLmFpRGlzcGxheU1hc3RlcltpXSxzPURlKGUscylbdF0scz1zJiYib2JqZWN0Ij09dHlwZW9mIHMmJnMubm9kZVR5cGU/cy5pbm5lckhUTUw6cysiIjtzPXMucmVwbGFjZSgvaWQ9Ii4qPyIvZywiIikucmVwbGFjZSgvbmFtZT0iLio/Ii9nLCIiKSwocj13KHMpLnJlcGxhY2UoLyZuYnNwOy9nLCIgIikpLmxlbmd0aD5vJiYoYT1zLG89ci5sZW5ndGgpfW4ubWF4TGVuU3RyaW5nPWF9cmV0dXJuIG4ubWF4TGVuU3RyaW5nfSh0LHApLGc9VC50eXBlLmNsYXNzTmFtZVtuLnNUeXBlXSxtPXArbi5zQ29udGVudFBhZGRpbmcscD0tMT09PXAuaW5kZXhPZigiPCIpP1MuY3JlYXRlVGV4dE5vZGUobSk6bTtIKCI8dGQvPiIpLmFkZENsYXNzKGcpLmFkZENsYXNzKG4uc0NsYXNzKS5hcHBlbmQocCkuYXBwZW5kVG8oaCl9SCgiW25hbWVdIixmKS5yZW1vdmVBdHRyKCJuYW1lIik7dmFyIHYsYixkPUgoIjxkaXYvPiIpLmNzcyhsfHxpP3twb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDowLGxlZnQ6MCxoZWlnaHQ6MSxyaWdodDowLG92ZXJmbG93OiJoaWRkZW4ifTp7fSkuYXBwZW5kKGYpLmFwcGVuZFRvKGMpLHk9KGwmJm8/Zi53aWR0aChvKTpsPyhmLmNzcygid2lkdGgiLCJhdXRvIiksZi5yZW1vdmVBdHRyKCJ3aWR0aCIpLGYub3V0ZXJXaWR0aCgpPGMuY2xpZW50V2lkdGgmJnUmJmYub3V0ZXJXaWR0aChjLmNsaWVudFdpZHRoKSk6aT9mLm91dGVyV2lkdGgoYy5jbGllbnRXaWR0aCk6dSYmZi5vdXRlcldpZHRoKHUpLDApLEQ9Zi5maW5kKCJ0Ym9keSB0ciIpLmVxKDApLmNoaWxkcmVuKCk7Zm9yKGU9MDtlPHMubGVuZ3RoO2UrKyl7dmFyIHg9RFtlXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDt5Kz14LGFbc1tlXV0uc1dpZHRoPUwoeCl9ci5zdHlsZS53aWR0aD1MKHkpLGQucmVtb3ZlKCksdSYmKHIuc3R5bGUud2lkdGg9TCh1KSksIXUmJiFsfHx0Ll9yZXN6RXZ0fHwodj1WLnV0aWwudGhyb3R0bGUoZnVuY3Rpb24oKXt2YXIgZT16ZSh0KTt0LmJEZXN0cm95aW5nfHwwPT09ZXx8bmUodCl9KSxXLlJlc2l6ZU9ic2VydmVyPyhiPUgodC5uVGFibGVXcmFwcGVyKS5pcygiOnZpc2libGUiKSxvPUgoIjxkaXY+IikuY3NzKHt3aWR0aDoiMTAwJSIsaGVpZ2h0OjB9KS5hZGRDbGFzcygiZHQtYXV0b3NpemUiKS5hcHBlbmRUbyh0Lm5UYWJsZVdyYXBwZXIpLHQucmVzaXplT2JzZXJ2ZXI9bmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uKGUpe2I/Yj0hMTp2KCl9KSx0LnJlc2l6ZU9ic2VydmVyLm9ic2VydmUob1swXSkpOkgoVykub24oInJlc2l6ZS5EVC0iK3Quc0luc3RhbmNlLHYpLHQuX3Jlc3pFdnQ9ITApfX0oZSk7Zm9yKHZhciB0PWUsbj10LmFvQ29sdW1ucyxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBhPWNlKHQsW3JdLCExLCExKTtuW3JdLmNvbEVsLmNzcygid2lkdGgiLGEpLHQub1Njcm9sbC5zWCYmbltyXS5jb2xFbC5jc3MoIm1pbi13aWR0aCIsYSl9dmFyIG89ZS5vU2Nyb2xsOyIiPT09by5zWSYmIiI9PT1vLnNYfHxVZShlKSxHKGUsbnVsbCwiY29sdW1uLXNpemluZyIsW2VdKX1mdW5jdGlvbiByZShlLHQpe2U9aWUoZSwiYlZpc2libGUiKTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGVbdF0/ZVt0XTpudWxsfWZ1bmN0aW9uIGFlKGUsdCl7ZT1pZShlLCJiVmlzaWJsZSIpLmluZGV4T2YodCk7cmV0dXJuLTEhPT1lP2U6bnVsbH1mdW5jdGlvbiBvZShlKXt2YXIgdD1lLmFvSGVhZGVyLG49ZS5hb0NvbHVtbnMscj0wO2lmKHQubGVuZ3RoKWZvcih2YXIgYT0wLG89dFswXS5sZW5ndGg7YTxvO2ErKyluW2FdLmJWaXNpYmxlJiYibm9uZSIhPT1IKHRbMF1bYV0uY2VsbCkuY3NzKCJkaXNwbGF5IikmJnIrKztyZXR1cm4gcn1mdW5jdGlvbiBpZShlLG4pe3ZhciByPVtdO3JldHVybiBlLmFvQ29sdW1ucy5tYXAoZnVuY3Rpb24oZSx0KXtlW25dJiZyLnB1c2godCl9KSxyfWZ1bmN0aW9uIGxlKGUsdCl7cmV0dXJuITA9PT10P2UuX25hbWU6dH1mdW5jdGlvbiBzZShlKXtmb3IodmFyIHQsbixyLGEsbyxpLGw9ZS5hb0NvbHVtbnMscz1lLmFvRGF0YSx1PVYuZXh0LnR5cGUuZGV0ZWN0LGM9MCxkPWwubGVuZ3RoO2M8ZDtjKyspe2lmKGk9W10sIShvPWxbY10pLnNUeXBlJiZvLl9zTWFudWFsVHlwZSlvLnNUeXBlPW8uX3NNYW51YWxUeXBlO2Vsc2UgaWYoIW8uc1R5cGUpe2lmKCFlLnR5cGVEZXRlY3QpcmV0dXJuO2Zvcih0PTAsbj11Lmxlbmd0aDt0PG47dCsrKXt2YXIgZj11W3RdLGg9Zi5vbmVPZixwPWYuYWxsT2Z8fGYsZz1mLmluaXQsbT0hMSx2PW51bGw7aWYoZyYmKHY9bGUoZixnKGUsbyxjKSkpKXtvLnNUeXBlPXY7YnJlYWt9Zm9yKHI9MCxhPXMubGVuZ3RoO3I8YTtyKyspaWYoc1tyXSl7aWYodm9pZCAwPT09aVtyXSYmKGlbcl09cShlLHIsYywidHlwZSIpKSxoJiYhbSYmKG09bGUoZixoKGlbcl0sZSkpKSwhKHY9bGUoZixwKGlbcl0sZSkpKSYmdCE9PXUubGVuZ3RoLTMpYnJlYWs7aWYoImh0bWwiPT09diYmIV8oaVtyXSkpYnJlYWt9aWYoaCYmbSYmdnx8IWgmJnYpe28uc1R5cGU9djticmVha319by5zVHlwZXx8KG8uc1R5cGU9InN0cmluZyIpfXZhciBiPVQudHlwZS5jbGFzc05hbWVbby5zVHlwZV0sYj0oYiYmKHVlKGUuYW9IZWFkZXIsYyxiKSx1ZShlLmFvRm9vdGVyLGMsYikpLFQudHlwZS5yZW5kZXJbby5zVHlwZV0pO2lmKGImJiFvLl9yZW5kZXIpe28uX3JlbmRlcj1WLnV0aWwuZ2V0KGIpLHk9dz1TPXg9RD12b2lkIDA7Zm9yKHZhciB5LEQ9ZSx4PWMsUz1ELmFvRGF0YSx3PTA7dzxTLmxlbmd0aDt3KyspU1t3XS5uVHImJih5PXEoRCx3LHgsImRpc3BsYXkiKSxTW3ddLmRpc3BsYXlEYXRhW3hdPXksaGUoU1t3XS5hbkNlbGxzW3hdLHkpKX19fWZ1bmN0aW9uIHVlKGUsdCxuKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZVt0XSYmZVt0XS51bmlxdWUmJnkoZVt0XS5jZWxsLG4pfSl9ZnVuY3Rpb24gY2UoZSx0LG4scil7QXJyYXkuaXNBcnJheSh0KXx8KHQ9ZGUodCkpO2Zvcih2YXIgYSxvPTAsaT1lLmFvQ29sdW1ucyxsPTAscz10Lmxlbmd0aDtsPHM7bCsrKXt2YXIgdT1pW3RbbF1dLGM9bj91LnNXaWR0aE9yaWc6dS5zV2lkdGg7aWYocnx8ITEhPT11LmJWaXNpYmxlKXtpZihudWxsPT1jKXJldHVybiBudWxsOyJudW1iZXIiPT10eXBlb2YgYz8oYT0icHgiLG8rPWMpOih1PWMubWF0Y2goLyhbXGRcLl0rKShbXlxkXSopLykpJiYobys9K3VbMV0sYT0zPT09dS5sZW5ndGg/dVsyXToicHgiKX19cmV0dXJuIG8rYX1mdW5jdGlvbiBkZShlKXtlPUgoZSkuY2xvc2VzdCgiW2RhdGEtZHQtY29sdW1uXSIpLmF0dHIoImRhdGEtZHQtY29sdW1uIik7cmV0dXJuIGU/ZS5zcGxpdCgiLCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4rZX0pOltdfWZ1bmN0aW9uIEQoZSx0LG4scil7Zm9yKHZhciBhPWUuYW9EYXRhLmxlbmd0aCxvPUguZXh0ZW5kKCEwLHt9LFYubW9kZWxzLm9Sb3cse3NyYzpuPyJkb20iOiJkYXRhIixpZHg6YX0pLGk9KG8uX2FEYXRhPXQsZS5hb0RhdGEucHVzaChvKSxlLmFvQ29sdW1ucyksbD0wLHM9aS5sZW5ndGg7bDxzO2wrKylpW2xdLnNUeXBlPW51bGw7ZS5haURpc3BsYXlNYXN0ZXIucHVzaChhKTt0PWUucm93SWRGbih0KTtyZXR1cm4gdm9pZCAwIT09dCYmKGUuYUlkc1t0XT1vKSwhbiYmZS5vRmVhdHVyZXMuYkRlZmVyUmVuZGVyfHx4ZShlLGEsbixyKSxhfWZ1bmN0aW9uIGZlKG4sZSl7dmFyIHI7cmV0dXJuKGU9ZSBpbnN0YW5jZW9mIEg/ZTpIKGUpKS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gcj15ZShuLHQpLEQobixyLmRhdGEsdCxyLmNlbGxzKX0pfWZ1bmN0aW9uIHEoZSx0LG4scil7InNlYXJjaCI9PT1yP3I9ImZpbHRlciI6Im9yZGVyIj09PXImJihyPSJzb3J0Iik7dmFyIGE9ZS5hb0RhdGFbdF07aWYoYSl7dmFyIG89ZS5pRHJhdyxpPWUuYW9Db2x1bW5zW25dLGE9YS5fYURhdGEsbD1pLnNEZWZhdWx0Q29udGVudCxzPWkuZm5HZXREYXRhKGEscix7c2V0dGluZ3M6ZSxyb3c6dCxjb2w6bn0pO2lmKHZvaWQgMD09PShzPSJkaXNwbGF5IiE9PXImJnMmJiJvYmplY3QiPT10eXBlb2YgcyYmcy5ub2RlTmFtZT9zLmlubmVySFRNTDpzKSlyZXR1cm4gZS5pRHJhd0Vycm9yIT1vJiZudWxsPT09bCYmKHooZSwwLCJSZXF1ZXN0ZWQgdW5rbm93biBwYXJhbWV0ZXIgIisoImZ1bmN0aW9uIj09dHlwZW9mIGkubURhdGE/IntmdW5jdGlvbn0iOiInIitpLm1EYXRhKyInIikrIiBmb3Igcm93ICIrdCsiLCBjb2x1bW4gIituLDQpLGUuaURyYXdFcnJvcj1vKSxsO2lmKHMhPT1hJiZudWxsIT09c3x8bnVsbD09PWx8fHZvaWQgMD09PXIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBzKXJldHVybiBzLmNhbGwoYSl9ZWxzZSBzPWw7cmV0dXJuIG51bGw9PT1zJiYiZGlzcGxheSI9PT1yPyIiOnM9ImZpbHRlciI9PT1yJiYodD1WLmV4dC50eXBlLnNlYXJjaClbaS5zVHlwZV0/dFtpLnNUeXBlXShzKTpzfX1mdW5jdGlvbiBoZShlLHQpe3QmJiJvYmplY3QiPT10eXBlb2YgdCYmdC5ub2RlTmFtZT9IKGUpLmVtcHR5KCkuYXBwZW5kKHQpOmUuaW5uZXJIVE1MPXR9dmFyIHBlPS9cWy4qP1xdJC8scD0vXChcKSQvO2Z1bmN0aW9uIGdlKGUpe3JldHVybihlLm1hdGNoKC8oXFwufFteLl0pKy9nKXx8WyIiXSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xcXC4vZywiLiIpfSl9dmFyIFU9Vi51dGlsLmdldCxtPVYudXRpbC5zZXQ7ZnVuY3Rpb24gbWUoZSl7cmV0dXJuIGIoZS5hb0RhdGEsIl9hRGF0YSIpfWZ1bmN0aW9uIHZlKGUpe2UuYW9EYXRhLmxlbmd0aD0wLGUuYWlEaXNwbGF5TWFzdGVyLmxlbmd0aD0wLGUuYWlEaXNwbGF5Lmxlbmd0aD0wLGUuYUlkcz17fX1mdW5jdGlvbiBiZShlLHQsbixyKXt2YXIgYSxvLGk9ZS5hb0RhdGFbdF07aWYoaS5fYVNvcnREYXRhPW51bGwsaS5fYUZpbHRlckRhdGE9bnVsbCxpLmRpc3BsYXlEYXRhPW51bGwsImRvbSIhPT1uJiYobiYmImF1dG8iIT09bnx8ImRvbSIhPT1pLnNyYykpe3ZhciBsPWkuYW5DZWxscyxzPURlKGUsdCk7aWYobClpZih2b2lkIDAhPT1yKWhlKGxbcl0sc1tyXSk7ZWxzZSBmb3IoYT0wLG89bC5sZW5ndGg7YTxvO2ErKyloZShsW2FdLHNbYV0pfWVsc2UgaS5fYURhdGE9eWUoZSxpLHIsdm9pZCAwPT09cj92b2lkIDA6aS5fYURhdGEpLmRhdGE7dmFyIHU9ZS5hb0NvbHVtbnM7aWYodm9pZCAwIT09cil1W3JdLnNUeXBlPW51bGwsdVtyXS5tYXhMZW5TdHJpbmc9bnVsbDtlbHNle2ZvcihhPTAsbz11Lmxlbmd0aDthPG87YSsrKXVbYV0uc1R5cGU9bnVsbCx1W2FdLm1heExlblN0cmluZz1udWxsO1NlKGUsaSl9fWZ1bmN0aW9uIHllKGUsdCxuLHIpe2Z1bmN0aW9uIGEoZSx0KXt2YXIgbjsic3RyaW5nIj09dHlwZW9mIGUmJi0xIT09KG49ZS5pbmRleE9mKCJAIikpJiYobj1lLnN1YnN0cmluZyhuKzEpLG0oZSkocix0LmdldEF0dHJpYnV0ZShuKSkpfWZ1bmN0aW9uIG8oZSl7dm9pZCAwIT09biYmbiE9PWR8fChsPWZbZF0scz1lLmlubmVySFRNTC50cmltKCksbCYmbC5fYkF0dHJTcmM/KG0obC5tRGF0YS5fKShyLHMpLGEobC5tRGF0YS5zb3J0LGUpLGEobC5tRGF0YS50eXBlLGUpLGEobC5tRGF0YS5maWx0ZXIsZSkpOmg/KGwuX3NldHRlcnx8KGwuX3NldHRlcj1tKGwubURhdGEpKSxsLl9zZXR0ZXIocixzKSk6cltkXT1zKSxkKyt9dmFyIGksbCxzLHU9W10sYz10LmZpcnN0Q2hpbGQsZD0wLGY9ZS5hb0NvbHVtbnMsaD1lLl9yb3dSZWFkT2JqZWN0O3I9dm9pZCAwIT09cj9yOmg/e306W107aWYoYylmb3IoO2M7KSJURCIhPShpPWMubm9kZU5hbWUudG9VcHBlckNhc2UoKSkmJiJUSCIhPWl8fChvKGMpLHUucHVzaChjKSksYz1jLm5leHRTaWJsaW5nO2Vsc2UgZm9yKHZhciBwPTAsZz0odT10LmFuQ2VsbHMpLmxlbmd0aDtwPGc7cCsrKW8odVtwXSk7dmFyIHQ9dC5maXJzdENoaWxkP3Q6dC5uVHI7cmV0dXJuIHQmJih0PXQuZ2V0QXR0cmlidXRlKCJpZCIpKSYmbShlLnJvd0lkKShyLHQpLHtkYXRhOnIsY2VsbHM6dX19ZnVuY3Rpb24gRGUoZSx0KXt2YXIgbj1lLmFvRGF0YVt0XSxyPWUuYW9Db2x1bW5zO2lmKCFuLmRpc3BsYXlEYXRhKXtuLmRpc3BsYXlEYXRhPVtdO2Zvcih2YXIgYT0wLG89ci5sZW5ndGg7YTxvO2ErKyluLmRpc3BsYXlEYXRhLnB1c2gocShlLHQsYSwiZGlzcGxheSIpKX1yZXR1cm4gbi5kaXNwbGF5RGF0YX1mdW5jdGlvbiB4ZShlLHQsbixyKXt2YXIgYSxvLGksbCxzLHUsYz1lLmFvRGF0YVt0XSxkPWMuX2FEYXRhLGY9W10saD1lLm9DbGFzc2VzLnRib2R5LnJvdztpZihudWxsPT09Yy5uVHIpe2ZvcihhPW58fFMuY3JlYXRlRWxlbWVudCgidHIiKSxjLm5Ucj1hLGMuYW5DZWxscz1mLHkoYSxoKSxhLl9EVF9Sb3dJbmRleD10LFNlKGUsYyksbD0wLHM9ZS5hb0NvbHVtbnMubGVuZ3RoO2w8cztsKyspe2k9ZS5hb0NvbHVtbnNbbF0sKG89KHU9IW58fCFyW2xdKT9TLmNyZWF0ZUVsZW1lbnQoaS5zQ2VsbFR5cGUpOnJbbF0pfHx6KGUsMCwiSW5jb3JyZWN0IGNvbHVtbiBjb3VudCIsMTgpLG8uX0RUX0NlbGxJbmRleD17cm93OnQsY29sdW1uOmx9LGYucHVzaChvKTt2YXIgcD1EZShlLHQpOyF1JiYoIWkubVJlbmRlciYmaS5tRGF0YT09PWx8fEguaXNQbGFpbk9iamVjdChpLm1EYXRhKSYmaS5tRGF0YS5fPT09bCsiLmRpc3BsYXkiKXx8aGUobyxwW2xdKSx5KG8saS5zQ2xhc3MpLGkuYlZpc2libGUmJnU/YS5hcHBlbmRDaGlsZChvKTppLmJWaXNpYmxlfHx1fHxvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyksaS5mbkNyZWF0ZWRDZWxsJiZpLmZuQ3JlYXRlZENlbGwuY2FsbChlLm9JbnN0YW5jZSxvLHEoZSx0LGwpLGQsdCxsKX1HKGUsImFvUm93Q3JlYXRlZENhbGxiYWNrIiwicm93LWNyZWF0ZWQiLFthLGQsdCxmXSl9ZWxzZSB5KGMublRyLGgpfWZ1bmN0aW9uIFNlKGUsdCl7dmFyIG49dC5uVHIscj10Ll9hRGF0YTtuJiYoKGU9ZS5yb3dJZEZuKHIpKSYmKG4uaWQ9ZSksci5EVF9Sb3dDbGFzcyYmKGU9ci5EVF9Sb3dDbGFzcy5zcGxpdCgiICIpLHQuX19yb3djPXQuX19yb3djP0ModC5fX3Jvd2MuY29uY2F0KGUpKTplLEgobikucmVtb3ZlQ2xhc3ModC5fX3Jvd2Muam9pbigiICIpKS5hZGRDbGFzcyhyLkRUX1Jvd0NsYXNzKSksci5EVF9Sb3dBdHRyJiZIKG4pLmF0dHIoci5EVF9Sb3dBdHRyKSxyLkRUX1Jvd0RhdGEpJiZIKG4pLmRhdGEoci5EVF9Sb3dEYXRhKX1mdW5jdGlvbiB3ZShlLHQpe3ZhciBuLHIsYSxvPWUub0NsYXNzZXMsaT1lLmFvQ29sdW1ucyxsPSJoZWFkZXIiPT09dD9lLm5USGVhZDplLm5URm9vdCxzPSJoZWFkZXIiPT09dD8ic1RpdGxlIjp0O2lmKGwpe2lmKCgiaGVhZGVyIj09PXR8fGIoZS5hb0NvbHVtbnMscykuam9pbigiIikpJiYxPT09KGE9KGE9SCgidHIiLGwpKS5sZW5ndGg/YTpIKCI8dHIvPiIpLmFwcGVuZFRvKGwpKS5sZW5ndGgpe3ZhciB1PTA7Zm9yKEgoInRkLCB0aCIsYSkuZWFjaChmdW5jdGlvbigpe3UrPXRoaXMuY29sU3Bhbn0pLG49dSxyPWkubGVuZ3RoO248cjtuKyspSCgiPHRoLz4iKS5odG1sKGlbbl1bc118fCIiKS5hcHBlbmRUbyhhKX12YXIgYz1OZShlLGwsITApOyJoZWFkZXIiPT09dD8oZS5hb0hlYWRlcj1jLEgoInRyIixsKS5hZGRDbGFzcyhvLnRoZWFkLnJvdykpOihlLmFvRm9vdGVyPWMsSCgidHIiLGwpLmFkZENsYXNzKG8udGZvb3Qucm93KSksSChsKS5jaGlsZHJlbigidHIiKS5jaGlsZHJlbigidGgsIHRkIikuZWFjaChmdW5jdGlvbigpe2F0KGUsdCkoZSxIKHRoaXMpLG8pfSl9fWZ1bmN0aW9uIFRlKGUsdCxuKXt2YXIgcixhLG8saSxsLHM9W10sdT1bXSxjPWUuYW9Db2x1bW5zLGU9Yy5sZW5ndGg7aWYodCl7Zm9yKG49bnx8aChlKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGNbZV0uYlZpc2libGV9KSxyPTA7cjx0Lmxlbmd0aDtyKyspc1tyXT10W3JdLnNsaWNlKCkuZmlsdGVyKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uaW5jbHVkZXModCl9KSx1LnB1c2goW10pO2ZvcihyPTA7cjxzLmxlbmd0aDtyKyspZm9yKGE9MDthPHNbcl0ubGVuZ3RoO2ErKylpZihsPWk9MSx2b2lkIDA9PT11W3JdW2FdKXtmb3Iobz1zW3JdW2FdLmNlbGw7dm9pZCAwIT09c1tyK2ldJiZzW3JdW2FdLmNlbGw9PXNbcitpXVthXS5jZWxsOyl1W3IraV1bYV09bnVsbCxpKys7Zm9yKDt2b2lkIDAhPT1zW3JdW2ErbF0mJnNbcl1bYV0uY2VsbD09c1tyXVthK2xdLmNlbGw7KXtmb3IodmFyIGQ9MDtkPGk7ZCsrKXVbcitkXVthK2xdPW51bGw7bCsrfXZhciBmPUgoInNwYW4uZHQtY29sdW1uLXRpdGxlIixvKTt1W3JdW2FdPXtjZWxsOm8sY29sc3BhbjpsLHJvd3NwYW46aSx0aXRsZTooZi5sZW5ndGg/ZjpIKG8pKS5odG1sKCl9fXJldHVybiB1fX1mdW5jdGlvbiBfZShlLHQpe2Zvcih2YXIgbixyLGE9VGUoZSx0KSxvPTA7bzx0Lmxlbmd0aDtvKyspe2lmKG49dFtvXS5yb3cpZm9yKDtyPW4uZmlyc3RDaGlsZDspbi5yZW1vdmVDaGlsZChyKTtmb3IodmFyIGk9MDtpPGFbb10ubGVuZ3RoO2krKyl7dmFyIGw9YVtvXVtpXTtsJiZIKGwuY2VsbCkuYXBwZW5kVG8obikuYXR0cigicm93c3BhbiIsbC5yb3dzcGFuKS5hdHRyKCJjb2xzcGFuIixsLmNvbHNwYW4pfX19ZnVuY3Rpb24geChlLHQpe2lmKGE9InNzcCI9PUoocz1lKSx2b2lkIDAhPT0oaT1zLmlJbml0RGlzcGxheVN0YXJ0KSYmLTEhPT1pJiYocy5faURpc3BsYXlTdGFydD0hYSYmaT49cy5mblJlY29yZHNEaXNwbGF5KCk/MDppLHMuaUluaXREaXNwbGF5U3RhcnQ9LTEpLC0xIT09RyhlLCJhb1ByZURyYXdDYWxsYmFjayIsInByZURyYXciLFtlXSkuaW5kZXhPZighMSkpSShlLCExKTtlbHNle3ZhciBsLG49W10scj0wLGE9InNzcCI9PUooZSksbz1lLmFpRGlzcGxheSxpPWUuX2lEaXNwbGF5U3RhcnQscz1lLmZuRGlzcGxheUVuZCgpLHU9ZS5hb0NvbHVtbnMsYz1IKGUublRCb2R5KTtpZihlLmJEcmF3aW5nPSEwLGUuZGVmZXJMb2FkaW5nKWUuZGVmZXJMb2FkaW5nPSExLGUuaURyYXcrKyxJKGUsITEpO2Vsc2UgaWYoYSl7aWYoIWUuYkRlc3Ryb3lpbmcmJiF0KXJldHVybiAwPT09ZS5pRHJhdyYmYy5lbXB0eSgpLmFwcGVuZChJZShlKSksKGw9ZSkuaURyYXcrKyxJKGwsITApLHZvaWQgRmUobCxmdW5jdGlvbih0KXtmdW5jdGlvbiBuKGUsdCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHJbZV1bdF0/ImZ1bmN0aW9uIjpyW2VdW3RdfXZhciByPXQuYW9Db2x1bW5zLGU9dC5vRmVhdHVyZXMsYT10Lm9QcmV2aW91c1NlYXJjaCxvPXQuYW9QcmVTZWFyY2hDb2xzO3JldHVybntkcmF3OnQuaURyYXcsY29sdW1uczpyLm1hcChmdW5jdGlvbih0LGUpe3JldHVybntkYXRhOm4oZSwibURhdGEiKSxuYW1lOnQuc05hbWUsc2VhcmNoYWJsZTp0LmJTZWFyY2hhYmxlLG9yZGVyYWJsZTp0LmJTb3J0YWJsZSxzZWFyY2g6e3ZhbHVlOm9bZV0uc2VhcmNoLHJlZ2V4Om9bZV0ucmVnZXgsZml4ZWQ6T2JqZWN0LmtleXModC5zZWFyY2hGaXhlZCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOmUsdGVybTp0LnNlYXJjaEZpeGVkW2VdLnRvU3RyaW5nKCl9fSl9fX0pLG9yZGVyOkplKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmUuY29sLGRpcjplLmRpcixuYW1lOm4oZS5jb2wsInNOYW1lIil9fSksc3RhcnQ6dC5faURpc3BsYXlTdGFydCxsZW5ndGg6ZS5iUGFnaW5hdGU/dC5faURpc3BsYXlMZW5ndGg6LTEsc2VhcmNoOnt2YWx1ZTphLnNlYXJjaCxyZWdleDphLnJlZ2V4LGZpeGVkOk9iamVjdC5rZXlzKHQuc2VhcmNoRml4ZWQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bmFtZTplLHRlcm06dC5zZWFyY2hGaXhlZFtlXS50b1N0cmluZygpfX0pfX19KGwpLGZ1bmN0aW9uKGUpe3ZhciB0PWwsbj1PZSh0LGU9ZSkscj1qZSh0LCJkcmF3IixlKSxhPWplKHQsInJlY29yZHNUb3RhbCIsZSksZT1qZSh0LCJyZWNvcmRzRmlsdGVyZWQiLGUpO2lmKHZvaWQgMCE9PXIpe2lmKCtyPHQuaURyYXcpcmV0dXJuO3QuaURyYXc9K3J9bj1ufHxbXSx2ZSh0KSx0Ll9pUmVjb3Jkc1RvdGFsPXBhcnNlSW50KGEsMTApLHQuX2lSZWNvcmRzRGlzcGxheT1wYXJzZUludChlLDEwKTtmb3IodmFyIG89MCxpPW4ubGVuZ3RoO288aTtvKyspRCh0LG5bb10pO3QuYWlEaXNwbGF5PXQuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCksc2UodCkseCh0LCEwKSxXZSh0KSxJKHQsITEpfSl9ZWxzZSBlLmlEcmF3Kys7aWYoMCE9PW8ubGVuZ3RoKWZvcih2YXIgZD1hP2UuYW9EYXRhLmxlbmd0aDpzLGY9YT8wOmk7ZjxkO2YrKyl7Zm9yKHZhciBoPW9bZl0scD1lLmFvRGF0YVtoXSxnPShudWxsPT09cC5uVHImJnhlKGUsaCkscC5uVHIpLG09MDttPHUubGVuZ3RoO20rKyl7dmFyIHY9dVttXSxiPXAuYW5DZWxsc1ttXTt5KGIsVC50eXBlLmNsYXNzTmFtZVt2LnNUeXBlXSkseShiLGUub0NsYXNzZXMudGJvZHkuY2VsbCl9RyhlLCJhb1Jvd0NhbGxiYWNrIixudWxsLFtnLHAuX2FEYXRhLHIsZixoXSksbi5wdXNoKGcpLHIrK31lbHNlIG5bMF09SWUoZSk7RyhlLCJhb0hlYWRlckNhbGxiYWNrIiwiaGVhZGVyIixbSChlLm5USGVhZCkuY2hpbGRyZW4oInRyIilbMF0sbWUoZSksaSxzLG9dKSxHKGUsImFvRm9vdGVyQ2FsbGJhY2siLCJmb290ZXIiLFtIKGUublRGb290KS5jaGlsZHJlbigidHIiKVswXSxtZShlKSxpLHMsb10pLGNbMF0ucmVwbGFjZUNoaWxkcmVuP2NbMF0ucmVwbGFjZUNoaWxkcmVuLmFwcGx5KGNbMF0sbik6KGMuY2hpbGRyZW4oKS5kZXRhY2goKSxjLmFwcGVuZChIKG4pKSksSChlLm5UYWJsZVdyYXBwZXIpLnRvZ2dsZUNsYXNzKCJkdC1lbXB0eS1mb290ZXIiLDA9PT1IKCJ0ciIsZS5uVEZvb3QpLmxlbmd0aCksRyhlLCJhb0RyYXdDYWxsYmFjayIsImRyYXciLFtlXSwhMCksZS5iU29ydGVkPSExLGUuYkZpbHRlcmVkPSExLGUuYkRyYXdpbmc9ITF9fWZ1bmN0aW9uIENlKGUsdCxuKXt2YXIgcj1lLm9GZWF0dXJlcyxhPXIuYlNvcnQscj1yLmJGaWx0ZXI7dm9pZCAwIT09biYmITAhPT1ufHwoc2UoZSksYSYmWmUoZSkscj9SZShlLGUub1ByZXZpb3VzU2VhcmNoKTplLmFpRGlzcGxheT1lLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpKSwhMCE9PXQmJihlLl9pRGlzcGxheVN0YXJ0PTApLGUuX2RyYXdIb2xkPXQseChlKSxlLmFwaS5vbmUoImRyYXciLGZ1bmN0aW9uKCl7ZS5fZHJhd0hvbGQ9ITF9KX1mdW5jdGlvbiBJZShlKXt2YXIgdD1lLm9MYW5ndWFnZSxuPXQuc1plcm9SZWNvcmRzLHI9SihlKTtyZXR1cm4ic3NwIiE9PXImJiJhamF4IiE9PXJ8fGUuanNvbj90LnNFbXB0eVRhYmxlJiYwPT09ZS5mblJlY29yZHNUb3RhbCgpJiYobj10LnNFbXB0eVRhYmxlKTpuPXQuc0xvYWRpbmdSZWNvcmRzLEgoIjx0ci8+IikuYXBwZW5kKEgoIjx0ZCAvPiIse2NvbFNwYW46b2UoZSksY2xhc3M6ZS5vQ2xhc3Nlcy5lbXB0eS5yb3d9KS5odG1sKG4pKVswXX1mdW5jdGlvbiBMZShlLHQsYSl7dmFyIG89W107SC5lYWNoKHQsZnVuY3Rpb24oZSx0KXt2YXIgbixyO251bGwhPT10JiYobj0oZT1lLm1hdGNoKC9eKFthLXpdKykoWzAtOV0qKShbQS1aYS16XSopJC8pKVsyXT8rZVsyXTowLHI9ZVszXT9lWzNdLnRvTG93ZXJDYXNlKCk6ImZ1bGwiLGVbMV09PT1hKSYmZnVuY3Rpb24gZSh0LG4scil7aWYoQXJyYXkuaXNBcnJheShyKSlmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKyllKHQsbixyW2FdKTtlbHNle3ZhciBvPXRbbl07SC5pc1BsYWluT2JqZWN0KHIpP3IuZmVhdHVyZXM/KHIucm93SWQmJih0LmlkPXIucm93SWQpLHIucm93Q2xhc3MmJih0LmNsYXNzTmFtZT1yLnJvd0NsYXNzKSxvLmlkPXIuaWQsby5jbGFzc05hbWU9ci5jbGFzc05hbWUsZSh0LG4sci5mZWF0dXJlcykpOk9iamVjdC5rZXlzKHIpLm1hcChmdW5jdGlvbihlKXtvLmNvbnRlbnRzLnB1c2goe2ZlYXR1cmU6ZSxvcHRzOnJbZV19KX0pOm8uY29udGVudHMucHVzaChyKX19KGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHIsYT0wO2E8ZS5sZW5ndGg7YSsrKWlmKChyPWVbYV0pLnJvd051bT09PXQmJigiZnVsbCI9PT1uJiZyLmZ1bGx8fCgic3RhcnQiPT09bnx8ImVuZCI9PT1uKSYmKHIuc3RhcnR8fHIuZW5kKSkpcmV0dXJuIHJbbl18fChyW25dPXtjb250ZW50czpbXX0pLHI7cmV0dXJuKHI9e3Jvd051bTp0fSlbbl09e2NvbnRlbnRzOltdfSxlLnB1c2gocikscn0obyxuLHIpLHIsdCl9KSxvLnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnJvd051bSxyPXQucm93TnVtO3JldHVybiBuPT09cj8oZT1lLmZ1bGwmJiF0LmZ1bGw/LTE6MSwiYm90dG9tIj09PWE/LTEqZTplKTpyLW59KSwiYm90dG9tIj09PWEmJm8ucmV2ZXJzZSgpO2Zvcih2YXIgbj0wO248by5sZW5ndGg7bisrKWRlbGV0ZSBvW25dLnJvd051bSwhZnVuY3Rpb24obyxpKXtmdW5jdGlvbiBsKGUsdCl7cmV0dXJuIFQuZmVhdHVyZXNbZV18fHoobywwLCJVbmtub3duIGZlYXR1cmU6ICIrZSksVC5mZWF0dXJlc1tlXS5hcHBseSh0aGlzLFtvLHRdKX1mdW5jdGlvbiBlKGUpe2lmKGlbZV0pZm9yKHZhciB0LG49aVtlXS5jb250ZW50cyxyPTAsYT1uLmxlbmd0aDtyPGE7cisrKW5bcl0mJigic3RyaW5nIj09dHlwZW9mIG5bcl0/bltyXT1sKG5bcl0sbnVsbCk6SC5pc1BsYWluT2JqZWN0KG5bcl0pP25bcl09bChuW3JdLmZlYXR1cmUsbltyXS5vcHRzKToiZnVuY3Rpb24iPT10eXBlb2YgbltyXS5ub2RlP25bcl09bltyXS5ub2RlKG8pOiJmdW5jdGlvbiI9PXR5cGVvZiBuW3JdJiYodD1uW3JdKG8pLG5bcl09ImZ1bmN0aW9uIj09dHlwZW9mIHQubm9kZT90Lm5vZGUoKTp0KSl9ZSgic3RhcnQiKSxlKCJlbmQiKSxlKCJmdWxsIil9KGUsb1tuXSk7cmV0dXJuIG99ZnVuY3Rpb24gQWUodCl7dmFyIHIsZT10Lm9DbGFzc2VzLG49SCh0Lm5UYWJsZSksYT1IKCI8ZGl2Lz4iKS5hdHRyKHtpZDp0LnNUYWJsZUlkKyJfd3JhcHBlciIsY2xhc3M6ZS5jb250YWluZXJ9KS5pbnNlcnRCZWZvcmUobik7aWYodC5uVGFibGVXcmFwcGVyPWFbMF0sdC5zRG9tKWZvcih2YXIgbyxpLGwscyx1LGMsZD10LGU9dC5zRG9tLGY9YSxoPWUubWF0Y2goLygiLio/Iil8KCcuKj8nKXwuL2cpLHA9MDtwPGgubGVuZ3RoO3ArKylvPW51bGwsIjwiPT0oaT1oW3BdKT8obD1IKCI8ZGl2Lz4iKSwiJyIhPShzPWhbcCsxXSlbMF0mJiciJyE9c1swXXx8KHM9cy5yZXBsYWNlKC9bJyJdL2csIiIpLHU9IiIsLTEhPXMuaW5kZXhPZigiLiIpPyhjPXMuc3BsaXQoIi4iKSx1PWNbMF0sYz1jWzFdKToiIyI9PXNbMF0/dT1zOmM9cyxsLmF0dHIoImlkIix1LnN1YnN0cmluZygxKSkuYWRkQ2xhc3MoYykscCsrKSxmLmFwcGVuZChsKSxmPWwpOiI+Ij09aT9mPWYucGFyZW50KCk6InQiPT1pP289cWUoZCk6Vi5leHQuZmVhdHVyZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2k9PWUuY0ZlYXR1cmUmJihvPWUuZm5Jbml0KGQpKX0pLG8mJmYuYXBwZW5kKG8pO2Vsc2V7dmFyIG49TGUodCx0LmxheW91dCwidG9wIiksZT1MZSh0LHQubGF5b3V0LCJib3R0b20iKSxnPWF0KHQsImxheW91dCIpO24uZm9yRWFjaChmdW5jdGlvbihlKXtnKHQsYSxlKX0pLGcodCxhLHtmdWxsOnt0YWJsZTohMCxjb250ZW50czpbcWUodCldfX0pLGUuZm9yRWFjaChmdW5jdGlvbihlKXtnKHQsYSxlKX0pfXZhciBuPXQsZT1uLm5UYWJsZSxtPSIiIT09bi5vU2Nyb2xsLnNYfHwiIiE9PW4ub1Njcm9sbC5zWTtuLm9GZWF0dXJlcy5iUHJvY2Vzc2luZyYmKHI9SCgiPGRpdi8+Iix7aWQ6bi5zVGFibGVJZCsiX3Byb2Nlc3NpbmciLGNsYXNzOm4ub0NsYXNzZXMucHJvY2Vzc2luZy5jb250YWluZXIscm9sZToic3RhdHVzIn0pLmh0bWwobi5vTGFuZ3VhZ2Uuc1Byb2Nlc3NpbmcpLmFwcGVuZCgiPGRpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PiIpLG0/ci5wcmVwZW5kVG8oSCgiZGl2LmR0LXNjcm9sbCIsbi5uVGFibGVXcmFwcGVyKSk6ci5pbnNlcnRCZWZvcmUoZSksSChlKS5vbigicHJvY2Vzc2luZy5kdC5EVCIsZnVuY3Rpb24oZSx0LG4pe3IuY3NzKCJkaXNwbGF5IixuPyJibG9jayI6Im5vbmUiKX0pKX1mdW5jdGlvbiBOZShlLHQsbil7Zm9yKHZhciByLGEsbyxpLGwscyx1PWUuYW9Db2x1bW5zLGM9SCh0KS5jaGlsZHJlbigidHIiKSxkPWUudGl0bGVSb3csZj10JiYidGhlYWQiPT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGg9W10scD0wLGc9Yy5sZW5ndGg7cDxnO3ArKyloLnB1c2goW10pO2ZvcihwPTAsZz1jLmxlbmd0aDtwPGc7cCsrKWZvcihhPShyPWNbcF0pLmZpcnN0Q2hpbGQ7YTspe2lmKCJURCI9PWEubm9kZU5hbWUudG9VcHBlckNhc2UoKXx8IlRIIj09YS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKXt2YXIgbSx2LGIseSxELHg9W10sUz1IKGEpO2Zvcih5PSh5PSthLmdldEF0dHJpYnV0ZSgiY29sc3BhbiIpKSYmMCE9eSYmMSE9eT95OjEsRD0oRD0rYS5nZXRBdHRyaWJ1dGUoInJvd3NwYW4iKSkmJjAhPUQmJjEhPUQ/RDoxLGw9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1lW3RdO3Jbbl07KW4rKztyZXR1cm4gbn0oaCxwLDApLHM9MT09eSxuJiYocyYmKHRlKGUsbCxzdChTLmRhdGEoKSkpLG09dVtsXSx2PWEuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpfHxudWxsLChiPWEuc3R5bGUud2lkdGgubWF0Y2goL3dpZHRoOlxzKihcZCtbcHhlbSVdKykvKSkmJih2PWJbMV0pLG0uc1dpZHRoT3JpZz1tLnNXaWR0aHx8dixmPyhudWxsPT09bS5zVGl0bGV8fG0uYXV0b1RpdGxlfHwoITA9PT1kJiYwPT09cHx8ITE9PT1kJiZwPT09Yy5sZW5ndGgtMXx8ZD09PXB8fG51bGw9PT1kKSYmKGEuaW5uZXJIVE1MPW0uc1RpdGxlKSwhbS5zVGl0bGUmJnMmJihtLnNUaXRsZT13KGEuaW5uZXJIVE1MKSxtLmF1dG9UaXRsZT0hMCkpOm0uZm9vdGVyJiYoYS5pbm5lckhUTUw9bS5mb290ZXIpLG0uYXJpYVRpdGxlfHwobS5hcmlhVGl0bGU9Uy5hdHRyKCJhcmlhLWxhYmVsIil8fG0uc1RpdGxlKSxtLmNsYXNzTmFtZSkmJlMuYWRkQ2xhc3MobS5jbGFzc05hbWUpLDA9PT1IKCJzcGFuLmR0LWNvbHVtbi10aXRsZSIsYSkubGVuZ3RoJiZIKCI8c3Bhbj4iKS5hZGRDbGFzcygiZHQtY29sdW1uLXRpdGxlIikuYXBwZW5kKGEuY2hpbGROb2RlcykuYXBwZW5kVG8oYSksZS5vcmRlckluZGljYXRvcnMmJmYmJjAhPT1TLmZpbHRlcigiOm5vdChbZGF0YS1kdC1vcmRlcj1kaXNhYmxlXSkiKS5sZW5ndGgmJjAhPT1TLnBhcmVudCgiOm5vdChbZGF0YS1kdC1vcmRlcj1kaXNhYmxlXSkiKS5sZW5ndGgmJjA9PT1IKCJzcGFuLmR0LWNvbHVtbi1vcmRlciIsYSkubGVuZ3RoJiZIKCI8c3Bhbj4iKS5hZGRDbGFzcygiZHQtY29sdW1uLW9yZGVyIikuYXBwZW5kVG8oYSksMD09PUgoInNwYW4uZHQtY29sdW1uLSIrKGI9Zj8iaGVhZGVyIjoiZm9vdGVyIiksYSkubGVuZ3RoKSYmSCgiPGRpdj4iKS5hZGRDbGFzcygiZHQtY29sdW1uLSIrYikuYXBwZW5kKGEuY2hpbGROb2RlcykuYXBwZW5kVG8oYSksaT0wO2k8eTtpKyspe2ZvcihvPTA7bzxEO28rKyloW3Arb11bbCtpXT17Y2VsbDphLHVuaXF1ZTpzfSxoW3Arb10ucm93PXI7eC5wdXNoKGwraSl9YS5zZXRBdHRyaWJ1dGUoImRhdGEtZHQtY29sdW1uIixDKHgpLmpvaW4oIiwiKSl9YT1hLm5leHRTaWJsaW5nfXJldHVybiBofWZ1bmN0aW9uIEZlKG4sZSxyKXtmdW5jdGlvbiB0KGUpe3ZhciB0PW4uanFYSFI/bi5qcVhIUi5zdGF0dXM6bnVsbDtpZigobnVsbD09PWV8fCJudW1iZXIiPT10eXBlb2YgdCYmMjA0PT10KSYmT2UobixlPXt9LFtdKSwodD1lLmVycm9yfHxlLnNFcnJvcikmJnoobiwwLHQpLGUuZCYmInN0cmluZyI9PXR5cGVvZiBlLmQpdHJ5e2U9SlNPTi5wYXJzZShlLmQpfWNhdGNoKGUpe31uLmpzb249ZSxHKG4sbnVsbCwieGhyIixbbixlLG4uanFYSFJdLCEwKSxyKGUpfXZhciBhLG89bi5hamF4LGk9bi5vSW5zdGFuY2UsbD0oSC5pc1BsYWluT2JqZWN0KG8pJiZvLmRhdGEmJihsPSJmdW5jdGlvbiI9PXR5cGVvZihhPW8uZGF0YSk/YShlLG4pOmEsZT0iZnVuY3Rpb24iPT10eXBlb2YgYSYmbD9sOkguZXh0ZW5kKCEwLGUsbCksZGVsZXRlIG8uZGF0YSkse3VybDoic3RyaW5nIj09dHlwZW9mIG8/bzoiIixkYXRhOmUsc3VjY2Vzczp0LGRhdGFUeXBlOiJqc29uIixjYWNoZTohMSx0eXBlOm4uc1NlcnZlck1ldGhvZCxlcnJvcjpmdW5jdGlvbihlLHQpey0xPT09RyhuLG51bGwsInhociIsW24sbnVsbCxuLmpxWEhSXSwhMCkuaW5kZXhPZighMCkmJigicGFyc2VyZXJyb3IiPT10P3oobiwwLCJJbnZhbGlkIEpTT04gcmVzcG9uc2UiLDEpOjQ9PT1lLnJlYWR5U3RhdGUmJnoobiwwLCJBamF4IGVycm9yIiw3KSksSShuLCExKX19KTtILmlzUGxhaW5PYmplY3QobykmJkguZXh0ZW5kKGwsbyksbi5vQWpheERhdGE9ZSxHKG4sbnVsbCwicHJlWGhyIixbbixlLGxdLCEwKSwianNvbiI9PT1sLnN1Ym1pdEFzJiYib2JqZWN0Ij09dHlwZW9mIGUmJihsLmRhdGE9SlNPTi5zdHJpbmdpZnkoZSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvP24uanFYSFI9by5jYWxsKGksZSx0LG4pOiIiPT09by51cmw/KE9lKG4saT17fSxbXSksdChpKSk6bi5qcVhIUj1ILmFqYXgobCksYSYmKG8uZGF0YT1hKX1mdW5jdGlvbiBPZShlLHQsbil7dmFyIHI9ImRhdGEiO2lmKEguaXNQbGFpbk9iamVjdChlLmFqYXgpJiZ2b2lkIDAhPT1lLmFqYXguZGF0YVNyYyYmKCJzdHJpbmciPT10eXBlb2YoZT1lLmFqYXguZGF0YVNyYyl8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP3I9ZTp2b2lkIDAhPT1lLmRhdGEmJihyPWUuZGF0YSkpLCFuKXJldHVybiJkYXRhIj09PXI/dC5hYURhdGF8fHRbcl06IiIhPT1yP1UocikodCk6dDttKHIpKHQsbil9ZnVuY3Rpb24gamUoZSx0LG4pe3ZhciBlPUguaXNQbGFpbk9iamVjdChlLmFqYXgpP2UuYWpheC5kYXRhU3JjOm51bGw7cmV0dXJuIGUmJmVbdF0/VShlW3RdKShuKTooZT0iIiwiZHJhdyI9PT10P2U9InNFY2hvIjoicmVjb3Jkc1RvdGFsIj09PXQ/ZT0iaVRvdGFsUmVjb3JkcyI6InJlY29yZHNGaWx0ZXJlZCI9PT10JiYoZT0iaVRvdGFsRGlzcGxheVJlY29yZHMiKSx2b2lkIDAhPT1uW2VdP25bZV06blt0XSl9ZnVuY3Rpb24gUmUobixlKXt2YXIgdD1uLmFvUHJlU2VhcmNoQ29scztpZigic3NwIiE9SihuKSl7Zm9yKHZhciByLGEsbyxpLGwscz1uLHU9cy5hb0NvbHVtbnMsYz1zLmFvRGF0YSxkPTA7ZDxjLmxlbmd0aDtkKyspaWYoY1tkXSYmIShsPWNbZF0pLl9hRmlsdGVyRGF0YSl7Zm9yKG89W10scj0wLGE9dS5sZW5ndGg7cjxhO3IrKyl1W3JdLmJTZWFyY2hhYmxlPyJzdHJpbmciIT10eXBlb2YoaT1udWxsPT09KGk9cShzLGQsciwiZmlsdGVyIikpPyIiOmkpJiZpLnRvU3RyaW5nJiYoaT1pLnRvU3RyaW5nKCkpOmk9IiIsaS5pbmRleE9mJiYtMSE9PWkuaW5kZXhPZigiJiIpJiYoa2UuaW5uZXJIVE1MPWksaT1NZT9rZS50ZXh0Q29udGVudDprZS5pbm5lclRleHQpLGkucmVwbGFjZSYmKGk9aS5yZXBsYWNlKC9bXHJcblx1MjAyOF0vZywiIikpLG8ucHVzaChpKTtsLl9hRmlsdGVyRGF0YT1vLGwuX3NGaWx0ZXJSb3c9by5qb2luKCIgICIpLDB9bi5haURpc3BsYXk9bi5haURpc3BsYXlNYXN0ZXIuc2xpY2UoKSxQZShuLmFpRGlzcGxheSxuLGUuc2VhcmNoLGUpLEguZWFjaChuLnNlYXJjaEZpeGVkLGZ1bmN0aW9uKGUsdCl7UGUobi5haURpc3BsYXksbix0LHt9KX0pO2Zvcih2YXIgZj0wO2Y8dC5sZW5ndGg7ZisrKXt2YXIgaD10W2ZdO1BlKG4uYWlEaXNwbGF5LG4saC5zZWFyY2gsaCxmKSxILmVhY2gobi5hb0NvbHVtbnNbZl0uc2VhcmNoRml4ZWQsZnVuY3Rpb24oZSx0KXtQZShuLmFpRGlzcGxheSxuLHQse30sZil9KX1mb3IodmFyIHAsZyxtPW4sdj1WLmV4dC5zZWFyY2gsYj1tLmFpRGlzcGxheSx5PTAsRD12Lmxlbmd0aDt5PEQ7eSsrKXtmb3IodmFyIHg9W10sUz0wLHc9Yi5sZW5ndGg7Uzx3O1MrKylnPWJbU10scD1tLmFvRGF0YVtnXSx2W3ldKG0scC5fYUZpbHRlckRhdGEsZyxwLl9hRGF0YSxTKSYmeC5wdXNoKGcpO2IubGVuZ3RoPTAsaXQoYix4KX19bi5iRmlsdGVyZWQ9ITAsRyhuLG51bGwsInNlYXJjaCIsW25dKX1mdW5jdGlvbiBQZShlLHQsbixyLGEpe2lmKCIiIT09bil7Zm9yKHZhciBvPTAsaT1bXSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBuP246bnVsbCxzPW4gaW5zdGFuY2VvZiBSZWdFeHA/bjpsP251bGw6ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXSx0PUguZXh0ZW5kKHt9LHtib3VuZGFyeTohMSxjYXNlSW5zZW5zaXRpdmU6ITAsZXhhY3Q6ITEscmVnZXg6ITEsc21hcnQ6ITB9LHQpOyJzdHJpbmciIT10eXBlb2YgZSYmKGU9ZS50b1N0cmluZygpKTtpZihlPWsoZSksdC5leGFjdClyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrRWUoZSkrIiQiLHQuY2FzZUluc2Vuc2l0aXZlPyJpIjoiIik7e3ZhciBuLGEsbztlPXQucmVnZXg/ZTpFZShlKSx0LnNtYXJ0JiYobj0oZS5tYXRjaCgvIT9bIlx1MjAxQ11bXiJcdTIwMURdK1siXHUyMDFEXXxbXiBdKy9nKXx8WyIiXSkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0LG49ITE7cmV0dXJuIiEiPT09ZS5jaGFyQXQoMCkmJihuPSEwLGU9ZS5zdWJzdHJpbmcoMSkpLCciJz09PWUuY2hhckF0KDApP2U9KHQ9ZS5tYXRjaCgvXiIoLiopIiQvKSk/dFsxXTplOiLigJwiPT09ZS5jaGFyQXQoMCkmJihlPSh0PWUubWF0Y2goL15cdTIwMUMoLiopXHUyMDFEJC8pKT90WzFdOmUpLG4mJigxPGUubGVuZ3RoJiZyLnB1c2goIig/ISIrZSsiKSIpLGU9IiIpLGUucmVwbGFjZSgvIi9nLCIiKX0pLGE9ci5sZW5ndGg/ci5qb2luKCIiKToiIixvPXQuYm91bmRhcnk/IlxcYiI6IiIsZT0iXig/PS4qPyIrbytuLmpvaW4oIikoPz0uKj8iK28pKyIpKCIrYSsiLikqJCIpfXJldHVybiBuZXcgUmVnRXhwKGUsdC5jYXNlSW5zZW5zaXRpdmU/ImkiOiIiKX0obixyKSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciB1PXQuYW9EYXRhW2Vbb11dLGM9dm9pZCAwPT09YT91Ll9zRmlsdGVyUm93OnUuX2FGaWx0ZXJEYXRhW2FdOyhsJiZsKGMsdS5fYURhdGEsZVtvXSxhKXx8cyYmcy50ZXN0KGMpKSYmaS5wdXNoKGVbb10pfWZvcihlLmxlbmd0aD1pLmxlbmd0aCxvPTA7bzxpLmxlbmd0aDtvKyspZVtvXT1pW29dfX12YXIgRWU9Vi51dGlsLmVzY2FwZVJlZ2V4LGtlPUgoIjxkaXY+IilbMF0sTWU9dm9pZCAwIT09a2UudGV4dENvbnRlbnQ7ZnVuY3Rpb24gSGUoaSl7dmFyIGwsdCxuLGUscz1pLm9Jbml0LHU9aS5kZWZlckxvYWRpbmcsYz1KKGkpO2kuYkluaXRpYWxpc2VkPyh3ZShpLCJoZWFkZXIiKSx3ZShpLCJmb290ZXIiKSxuPWZ1bmN0aW9uKCl7X2UoaSxpLmFvSGVhZGVyKSxfZShpLGkuYW9Gb290ZXIpO3ZhciBuPWkuaUluaXREaXNwbGF5U3RhcnQ7aWYocy5hYURhdGEpZm9yKGw9MDtsPHMuYWFEYXRhLmxlbmd0aDtsKyspRChpLHMuYWFEYXRhW2xdKTtlbHNlIXUmJiJkb20iIT1jfHxmZShpLEgoaS5uVEJvZHkpLmNoaWxkcmVuKCJ0ciIpKTtpLmFpRGlzcGxheT1pLmFpRGlzcGxheU1hc3Rlci5zbGljZSgpLEFlKGkpO3ZhciBlPWksdD1lLm5USGVhZCxyPXQucXVlcnlTZWxlY3RvckFsbCgidHIiKSxhPWUudGl0bGVSb3csbz0nOm5vdChbZGF0YS1kdC1vcmRlcj0iZGlzYWJsZSJdKTpub3QoW2RhdGEtZHQtb3JkZXI9Imljb24tb25seSJdKSc7ITA9PT1hP3Q9clswXTohMT09PWE/dD1yW3IubGVuZ3RoLTFdOm51bGwhPT1hJiYodD1yW2FdKSxlLm9yZGVySGFuZGxlciYmWWUoZSx0LHQ9PT1lLm5USGVhZD8idHIiK28rIiB0aCIrbysiLCB0ciIrbysiIHRkIitvOiJ0aCIrbysiLCB0ZCIrbyksZyhlLHI9W10sZS5hYVNvcnRpbmcpLGUuYWFTb3J0aW5nPXIsJGUoaSksSShpLCEwKSxHKGksbnVsbCwicHJlSW5pdCIsW2ldLCEwKSxDZShpKSwic3NwIj09YyYmIXV8fCgiYWpheCI9PWM/RmUoaSx7fSxmdW5jdGlvbihlKXt2YXIgdD1PZShpLGUpO2ZvcihsPTA7bDx0Lmxlbmd0aDtsKyspRChpLHRbbF0pO2kuaUluaXREaXNwbGF5U3RhcnQ9bixDZShpKSxJKGksITEpLFdlKGkpfSk6KFdlKGkpLEkoaSwhMSkpKX0sKHQ9aSkub0ZlYXR1cmVzLmJTdGF0ZVNhdmU/dm9pZCAwIT09KGU9dC5mblN0YXRlTG9hZENhbGxiYWNrLmNhbGwodC5vSW5zdGFuY2UsdCxmdW5jdGlvbihlKXtldCh0LGUsbil9KSkmJmV0KHQsZSxuKTpuKCkpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtIZShpKX0sMjAwKX1mdW5jdGlvbiBXZShlKXt2YXIgdDtlLl9iSW5pdENvbXBsZXRlfHwodD1bZSxlLmpzb25dLGUuX2JJbml0Q29tcGxldGU9ITAsbmUoZSksRyhlLG51bGwsInBsdWdpbi1pbml0Iix0LCEwKSxHKGUsImFvSW5pdENvbXBsZXRlIiwiaW5pdCIsdCwhMCkpfWZ1bmN0aW9uIFhlKGUsdCl7dD1wYXJzZUludCh0LDEwKTtlLl9pRGlzcGxheUxlbmd0aD10LHJ0KGUpLEcoZSxudWxsLCJsZW5ndGgiLFtlLHRdKX1mdW5jdGlvbiBWZShlLHQsbil7dmFyIHI9ZS5faURpc3BsYXlTdGFydCxhPWUuX2lEaXNwbGF5TGVuZ3RoLG89ZS5mblJlY29yZHNEaXNwbGF5KCk7aWYoMD09PW98fC0xPT09YSlyPTA7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIHQpbzwocj10KmEpJiYocj0wKTtlbHNlIGlmKCJmaXJzdCI9PXQpcj0wO2Vsc2UgaWYoInByZXZpb3VzIj09dCkocj0wPD1hP3ItYTowKTwwJiYocj0wKTtlbHNlIGlmKCJuZXh0Ij09dClyK2E8byYmKHIrPWEpO2Vsc2UgaWYoImxhc3QiPT10KXI9TWF0aC5mbG9vcigoby0xKS9hKSphO2Vsc2V7aWYoImVsbGlwc2lzIj09PXQpcmV0dXJuO3ooZSwwLCJVbmtub3duIHBhZ2luZyBhY3Rpb246ICIrdCw1KX1vPWUuX2lEaXNwbGF5U3RhcnQhPT1yO2UuX2lEaXNwbGF5U3RhcnQ9cixHKGUsbnVsbCxvPyJwYWdlIjoicGFnZS1uYyIsW2VdKSxvJiZuJiZ4KGUpfWZ1bmN0aW9uIEkoZSx0KXtlLmJEcmF3aW5nJiYhMT09PXR8fEcoZSxudWxsLCJwcm9jZXNzaW5nIixbZSx0XSl9ZnVuY3Rpb24gQmUoZSx0LG4pe3Q/KEkoZSwhMCksc2V0VGltZW91dChmdW5jdGlvbigpe24oKSxJKGUsITEpfSwwKSk6bigpfWZ1bmN0aW9uIHFlKGUpe3ZhciB0LG4scixhLG8saSxsLHMsdSxjLGQsZixoLHA9SChlLm5UYWJsZSksZz1lLm9TY3JvbGw7cmV0dXJuIiI9PT1nLnNYJiYiIj09PWcuc1k/ZS5uVGFibGU6KHQ9Zy5zWCxuPWcuc1kscj1lLm9DbGFzc2VzLnNjcm9sbGluZyxvPShhPWUuY2FwdGlvbk5vZGUpP2EuX2NhcHRpb25TaWRlOm51bGwsdT1IKHBbMF0uY2xvbmVOb2RlKCExKSksaT1IKHBbMF0uY2xvbmVOb2RlKCExKSksYz1mdW5jdGlvbihlKXtyZXR1cm4gZT9MKGUpOm51bGx9LChsPXAuY2hpbGRyZW4oInRmb290IikpLmxlbmd0aHx8KGw9bnVsbCksdT1IKHM9IjxkaXYvPiIse2NsYXNzOnIuY29udGFpbmVyfSkuYXBwZW5kKEgocyx7Y2xhc3M6ci5oZWFkZXIuc2VsZn0pLmNzcyh7b3ZlcmZsb3c6ImhpZGRlbiIscG9zaXRpb246InJlbGF0aXZlIixib3JkZXI6MCx3aWR0aDp0P2ModCk6IjEwMCUifSkuYXBwZW5kKEgocyx7Y2xhc3M6ci5oZWFkZXIuaW5uZXJ9KS5jc3MoeyJib3gtc2l6aW5nIjoiY29udGVudC1ib3giLHdpZHRoOmcuc1hJbm5lcnx8IjEwMCUifSkuYXBwZW5kKHUucmVtb3ZlQXR0cigiaWQiKS5jc3MoIm1hcmdpbi1sZWZ0IiwwKS5hcHBlbmQoInRvcCI9PT1vP2E6bnVsbCkuYXBwZW5kKHAuY2hpbGRyZW4oInRoZWFkIikpKSkpLmFwcGVuZChIKHMse2NsYXNzOnIuYm9keX0pLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIixvdmVyZmxvdzoiYXV0byIsd2lkdGg6Yyh0KX0pLmFwcGVuZChwKSksbCYmdS5hcHBlbmQoSChzLHtjbGFzczpyLmZvb3Rlci5zZWxmfSkuY3NzKHtvdmVyZmxvdzoiaGlkZGVuIixib3JkZXI6MCx3aWR0aDp0P2ModCk6IjEwMCUifSkuYXBwZW5kKEgocyx7Y2xhc3M6ci5mb290ZXIuaW5uZXJ9KS5hcHBlbmQoaS5yZW1vdmVBdHRyKCJpZCIpLmNzcygibWFyZ2luLWxlZnQiLDApLmFwcGVuZCgiYm90dG9tIj09PW8/YTpudWxsKS5hcHBlbmQocC5jaGlsZHJlbigidGZvb3QiKSkpKSksYz11LmNoaWxkcmVuKCksZD1jWzBdLGY9Y1sxXSxoPWw/Y1syXTpudWxsLEgoZikub24oInNjcm9sbC5EVCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNjcm9sbExlZnQ7ZC5zY3JvbGxMZWZ0PWUsbCYmKGguc2Nyb2xsTGVmdD1lKX0pLEgoInRoLCB0ZCIsZCkub24oImZvY3VzIixmdW5jdGlvbigpe3ZhciBlPWQuc2Nyb2xsTGVmdDtmLnNjcm9sbExlZnQ9ZSxsJiYoZi5zY3JvbGxMZWZ0PWUpfSksSChmKS5jc3MoIm1heC1oZWlnaHQiLG4pLGcuYkNvbGxhcHNlfHxIKGYpLmNzcygiaGVpZ2h0IixuKSxlLm5TY3JvbGxIZWFkPWQsZS5uU2Nyb2xsQm9keT1mLGUublNjcm9sbEZvb3Q9aCxlLmFvRHJhd0NhbGxiYWNrLnB1c2goVWUpLHVbMF0pfWZ1bmN0aW9uIFVlKHQpe3ZhciBlPXQub1Njcm9sbCxuPWUuaUJhcldpZHRoLHI9SCh0Lm5TY3JvbGxIZWFkKS5jaGlsZHJlbigiZGl2IiksYT1yLmNoaWxkcmVuKCJ0YWJsZSIpLG89dC5uU2Nyb2xsQm9keSxpPUgobyksbD1IKHQublNjcm9sbEZvb3QpLmNoaWxkcmVuKCJkaXYiKSxzPWwuY2hpbGRyZW4oInRhYmxlIiksdT1IKHQublRIZWFkKSxjPUgodC5uVGFibGUpLGQ9dC5uVEZvb3QmJkgoInRoLCB0ZCIsdC5uVEZvb3QpLmxlbmd0aD9IKHQublRGb290KTpudWxsLGY9dC5vQnJvd3NlcixoPW8uc2Nyb2xsSGVpZ2h0Pm8uY2xpZW50SGVpZ2h0O2lmKHQuc2Nyb2xsQmFyVmlzIT09aCYmdm9pZCAwIT09dC5zY3JvbGxCYXJWaXMpdC5zY3JvbGxCYXJWaXM9aCxuZSh0KTtlbHNle2lmKHQuc2Nyb2xsQmFyVmlzPWgsYy5jaGlsZHJlbigidGhlYWQsIHRmb290IikucmVtb3ZlKCksKGg9dS5jbG9uZSgpLnByZXBlbmRUbyhjKSkuZmluZCgidGgsIHRkIikucmVtb3ZlQXR0cigidGFiaW5kZXgiKSxoLmZpbmQoIltpZF0iKS5yZW1vdmVBdHRyKCJpZCIpLGQmJihEPWQuY2xvbmUoKS5wcmVwZW5kVG8oYykpLmZpbmQoIltpZF0iKS5yZW1vdmVBdHRyKCJpZCIpLHQuYWlEaXNwbGF5Lmxlbmd0aCl7Zm9yKHZhciBwPW51bGwsZz0ic3NwIiE9PUoodCk/dC5faURpc3BsYXlTdGFydDowLG09ZzttPGcrdC5haURpc3BsYXkubGVuZ3RoO20rKyl7dmFyIHY9dC5haURpc3BsYXlbbV0sdj10LmFvRGF0YVt2XS5uVHI7aWYodil7cD12O2JyZWFrfX1pZihwKWZvcih2YXIgYj1IKHApLmNoaWxkcmVuKCJ0aCwgdGQiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2lkeDpyZSh0LGUpLHdpZHRoOkgodGhpcykub3V0ZXJXaWR0aCgpfX0pLG09MDttPGIubGVuZ3RoO20rKyl7dmFyIHk9dC5hb0NvbHVtbnNbYlttXS5pZHhdLmNvbEVsWzBdO3kuc3R5bGUud2lkdGgucmVwbGFjZSgicHgiLCIiKSE9PWJbbV0ud2lkdGgmJih5LnN0eWxlLndpZHRoPWJbbV0ud2lkdGgrInB4IixlLnNYKSYmKHkuc3R5bGUubWluV2lkdGg9YlttXS53aWR0aCsicHgiKX19YS5maW5kKCJjb2xncm91cCIpLnJlbW92ZSgpLGEuYXBwZW5kKHQuY29sZ3JvdXAuY2xvbmUoKSksZCYmKHMuZmluZCgiY29sZ3JvdXAiKS5yZW1vdmUoKSxzLmFwcGVuZCh0LmNvbGdyb3VwLmNsb25lKCkpKSxIKCJ0aCwgdGQiLGgpLmVhY2goZnVuY3Rpb24oKXtIKHRoaXMuY2hpbGROb2Rlcykud3JhcEFsbCgnPGRpdiBjbGFzcz0iZHQtc2Nyb2xsLXNpemluZyI+Jyl9KSxkJiZIKCJ0aCwgdGQiLEQpLmVhY2goZnVuY3Rpb24oKXtIKHRoaXMuY2hpbGROb2Rlcykud3JhcEFsbCgnPGRpdiBjbGFzcz0iZHQtc2Nyb2xsLXNpemluZyI+Jyl9KTt2YXIgdT1NYXRoLmZsb29yKGMuaGVpZ2h0KCkpPm8uY2xpZW50SGVpZ2h0fHwic2Nyb2xsIj09aS5jc3MoIm92ZXJmbG93LXkiKSxoPSJwYWRkaW5nIisoZi5iU2Nyb2xsYmFyTGVmdD8iTGVmdCI6IlJpZ2h0IiksRD1jLm91dGVyV2lkdGgoKTthLmNzcygid2lkdGgiLEwoRCkpLHIuY3NzKCJ3aWR0aCIsTChEKSkuY3NzKGgsdT9uKyJweCI6IjBweCIpLGQmJihzLmNzcygid2lkdGgiLEwoRCkpLGwuY3NzKCJ3aWR0aCIsTChEKSkuY3NzKGgsdT9uKyJweCI6IjBweCIpKSxjLmNoaWxkcmVuKCJjb2xncm91cCIpLnByZXBlbmRUbyhjKSxpLnRyaWdnZXIoInNjcm9sbCIpLCF0LmJTb3J0ZWQmJiF0LmJGaWx0ZXJlZHx8dC5fZHJhd0hvbGR8fChvLnNjcm9sbFRvcD0wKX19ZnVuY3Rpb24gemUoZSl7cmV0dXJuIEgoZS5uVGFibGVXcmFwcGVyKS5pcygiOnZpc2libGUiKT9IKGUublRhYmxlV3JhcHBlcikud2lkdGgoKTowfWZ1bmN0aW9uIEwoZSl7cmV0dXJuIG51bGw9PT1lPyIwcHgiOiJudW1iZXIiPT10eXBlb2YgZT9lPDA/IjBweCI6ZSsicHgiOmUubWF0Y2goL1xkJC8pP2UrInB4IjplfWZ1bmN0aW9uICRlKGUpe3ZhciB0PWUuYW9Db2x1bW5zO2ZvcihlLmNvbGdyb3VwLmVtcHR5KCksbD0wO2w8dC5sZW5ndGg7bCsrKXRbbF0uYlZpc2libGUmJmUuY29sZ3JvdXAuYXBwZW5kKHRbbF0uY29sRWwpfWZ1bmN0aW9uIFllKG8sZSx0LGksbCl7bnQoZSx0LGZ1bmN0aW9uKGUpe3ZhciB0PSExLG49dm9pZCAwPT09aT9kZShlLnRhcmdldCk6ImZ1bmN0aW9uIj09dHlwZW9mIGk/aSgpOkFycmF5LmlzQXJyYXkoaSk/aTpbaV07aWYobi5sZW5ndGgpe2Zvcih2YXIgcj0wLGE9bi5sZW5ndGg7cjxhO3IrKylpZighMSE9PWZ1bmN0aW9uKGUsdCxuLHIpe2Z1bmN0aW9uIGEoZSx0KXt2YXIgbj1lLl9pZHg7cmV0dXJuKG49dm9pZCAwPT09bj9zLmluZGV4T2YoZVsxXSk6bikrMTxzLmxlbmd0aD9uKzE6dD9udWxsOjB9dmFyIG8saT1lLmFvQ29sdW1uc1t0XSxsPWUuYWFTb3J0aW5nLHM9aS5hc1NvcnRpbmc7aWYoIWkuYlNvcnRhYmxlKXJldHVybiExOyJudW1iZXIiPT10eXBlb2YgbFswXSYmKGw9ZS5hYVNvcnRpbmc9W2xdKTsocnx8bikmJmUub0ZlYXR1cmVzLmJTb3J0TXVsdGk/LTEhPT0oaT1iKGwsIjAiKS5pbmRleE9mKHQpKT9udWxsPT09KG89bnVsbD09PShvPWEobFtpXSwhMCkpJiYxPT09bC5sZW5ndGg/MDpvKT9sLnNwbGljZShpLDEpOihsW2ldWzFdPXNbb10sbFtpXS5faWR4PW8pOihyP2wucHVzaChbdCxzWzBdLDBdKTpsLnB1c2goW3QsbFswXVsxXSwwXSksbFtsLmxlbmd0aC0xXS5faWR4PTApOmwubGVuZ3RoJiZsWzBdWzBdPT10PyhvPWEobFswXSksbC5sZW5ndGg9MSxsWzBdWzFdPXNbb10sbFswXS5faWR4PW8pOihsLmxlbmd0aD0wLGwucHVzaChbdCxzWzBdXSksbFswXS5faWR4PTApfShvLG5bcl0scixlLnNoaWZ0S2V5KSYmKHQ9ITApLDE9PT1vLmFhU29ydGluZy5sZW5ndGgmJiIiPT09by5hYVNvcnRpbmdbMF1bMV0pYnJlYWs7dCYmQmUobywhMCxmdW5jdGlvbigpe1plKG8pLEdlKG8sby5haURpc3BsYXkpLENlKG8sITEsITEpLGwmJmwoKX0pfX0pfWZ1bmN0aW9uIEdlKGUsdCl7aWYoISh0Lmxlbmd0aDwyKSl7Zm9yKHZhciBuPWUuYWlEaXNwbGF5TWFzdGVyLHI9e30sYT17fSxvPTA7bzxuLmxlbmd0aDtvKyspcltuW29dXT1vO2ZvcihvPTA7bzx0Lmxlbmd0aDtvKyspYVt0W29dXT1yW3Rbb11dO3Quc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBhW2VdLWFbdF19KX19ZnVuY3Rpb24gZyhuLHIsZSl7ZnVuY3Rpb24gdChlKXt2YXIgdDtILmlzUGxhaW5PYmplY3QoZSk/dm9pZCAwIT09ZS5pZHg/ci5wdXNoKFtlLmlkeCxlLmRpcl0pOmUubmFtZSYmLTEhPT0odD1iKG4uYW9Db2x1bW5zLCJzTmFtZSIpLmluZGV4T2YoZS5uYW1lKSkmJnIucHVzaChbdCxlLmRpcl0pOnIucHVzaChlKX1pZihILmlzUGxhaW5PYmplY3QoZSkpdChlKTtlbHNlIGlmKGUubGVuZ3RoJiYibnVtYmVyIj09dHlwZW9mIGVbMF0pdChlKTtlbHNlIGlmKGUubGVuZ3RoKWZvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXQoZVthXSl9ZnVuY3Rpb24gSmUoZSl7dmFyIHQsbixyLGEsbyxpLGwscz1bXSx1PVYuZXh0LnR5cGUub3JkZXIsYz1lLmFvQ29sdW1ucyxkPWUuYWFTb3J0aW5nRml4ZWQsZj1ILmlzUGxhaW5PYmplY3QoZCksaD1bXTtpZihlLm9GZWF0dXJlcy5iU29ydClmb3IoQXJyYXkuaXNBcnJheShkKSYmZyhlLGgsZCksZiYmZC5wcmUmJmcoZSxoLGQucHJlKSxnKGUsaCxlLmFhU29ydGluZyksZiYmZC5wb3N0JiZnKGUsaCxkLnBvc3QpLHQ9MDt0PGgubGVuZ3RoO3QrKylpZihjW2w9aFt0XVswXV0pZm9yKG49MCxyPShhPWNbbF0uYURhdGFTb3J0KS5sZW5ndGg7bjxyO24rKylpPWNbbz1hW25dXS5zVHlwZXx8InN0cmluZyIsdm9pZCAwPT09aFt0XS5faWR4JiYoaFt0XS5faWR4PWNbb10uYXNTb3J0aW5nLmluZGV4T2YoaFt0XVsxXSkpLGhbdF1bMV0mJnMucHVzaCh7c3JjOmwsY29sOm8sZGlyOmhbdF1bMV0saW5kZXg6aFt0XS5faWR4LHR5cGU6aSxmb3JtYXR0ZXI6dVtpKyItcHJlIl0sc29ydGVyOnVbaSsiLSIraFt0XVsxXV19KTtyZXR1cm4gc31mdW5jdGlvbiBaZShlLHQsbil7dmFyIHIsYSxvLGksbCxjLGQ9W10scz1WLmV4dC50eXBlLm9yZGVyLGY9ZS5hb0RhdGEsdT1lLmFpRGlzcGxheU1hc3Rlcjtmb3Ioc2UoZSksdm9pZCAwIT09dD8obD1lLmFvQ29sdW1uc1t0XSxjPVt7c3JjOnQsY29sOnQsZGlyOm4saW5kZXg6MCx0eXBlOmwuc1R5cGUsZm9ybWF0dGVyOnNbbC5zVHlwZSsiLXByZSJdLHNvcnRlcjpzW2wuc1R5cGUrIi0iK25dfV0sdT11LnNsaWNlKCkpOmM9SmUoZSkscj0wLGE9Yy5sZW5ndGg7cjxhO3IrKyl7aT1jW3JdLFM9eD1EPWc9cD1oPXk9Yj12PW09dm9pZCAwO3ZhciBoLHAsZyxtPWUsdj1pLmNvbCxiPW0uYW9Db2x1bW5zW3ZdLHk9Vi5leHQub3JkZXJbYi5zU29ydERhdGFUeXBlXTt5JiYoaD15LmNhbGwobS5vSW5zdGFuY2UsbSx2LGFlKG0sdikpKTtmb3IodmFyIEQ9Vi5leHQudHlwZS5vcmRlcltiLnNUeXBlKyItcHJlIl0seD1tLmFvRGF0YSxTPTA7Uzx4Lmxlbmd0aDtTKyspeFtTXSYmKChwPXhbU10pLl9hU29ydERhdGF8fChwLl9hU29ydERhdGE9W10pLHAuX2FTb3J0RGF0YVt2XSYmIXl8fChnPXk/aFtTXTpxKG0sUyx2LCJzb3J0IikscC5fYVNvcnREYXRhW3ZdPUQ/RChnLG0pOmcpKX1pZigic3NwIiE9SihlKSYmMCE9PWMubGVuZ3RoKXtmb3Iocj0wLG89dS5sZW5ndGg7cjxvO3IrKylkW3JdPXI7Yy5sZW5ndGgmJiJkZXNjIj09PWNbMF0uZGlyJiZlLm9yZGVyRGVzY1JldmVyc2UmJmQucmV2ZXJzZSgpLHUuc29ydChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGEsbyxpPWMubGVuZ3RoLGw9ZltlXS5fYVNvcnREYXRhLHM9Zlt0XS5fYVNvcnREYXRhLHU9MDt1PGk7dSsrKWlmKG49bFsobz1jW3VdKS5jb2xdLHI9c1tvLmNvbF0sby5zb3J0ZXIpe2lmKDAhPT0oYT1vLnNvcnRlcihuLHIpKSlyZXR1cm4gYX1lbHNlIGlmKDAhPT0oYT1uPHI/LTE6cjxuPzE6MCkpcmV0dXJuImFzYyI9PT1vLmRpcj9hOi1hO3JldHVybihuPWRbZV0pPChyPWRbdF0pPy0xOnI8bj8xOjB9KX1lbHNlIDA9PT1jLmxlbmd0aCYmdS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU8dD8tMTp0PGU/MTowfSk7cmV0dXJuIHZvaWQgMD09PXQmJihlLmJTb3J0ZWQ9ITAsZS5zb3J0RGV0YWlscz1jLEcoZSxudWxsLCJvcmRlciIsW2UsY10pKSx1fWZ1bmN0aW9uIFFlKGUpe3ZhciB0LG4scixhPWUuYUxhc3RTb3J0LG89ZS5vQ2xhc3Nlcy5vcmRlci5wb3NpdGlvbixpPUplKGUpLGw9ZS5vRmVhdHVyZXM7aWYobC5iU29ydCYmbC5iU29ydENsYXNzZXMpe2Zvcih0PTAsbj1hLmxlbmd0aDt0PG47dCsrKXI9YVt0XS5zcmMsSChiKGUuYW9EYXRhLCJhbkNlbGxzIixyKSkucmVtb3ZlQ2xhc3MobysodDwyP3QrMTozKSk7Zm9yKHQ9MCxuPWkubGVuZ3RoO3Q8bjt0Kyspcj1pW3RdLnNyYyxIKGIoZS5hb0RhdGEsImFuQ2VsbHMiLHIpKS5hZGRDbGFzcyhvKyh0PDI/dCsxOjMpKX1lLmFMYXN0U29ydD1pfWZ1bmN0aW9uIEtlKG4pe3ZhciB0LGU7bi5fYkxvYWRpbmdTdGF0ZXx8KGcobixlPVtdLG4uYWFTb3J0aW5nKSx0PW4uYW9Db2x1bW5zLGU9e3RpbWU6K25ldyBEYXRlLHN0YXJ0Om4uX2lEaXNwbGF5U3RhcnQsbGVuZ3RoOm4uX2lEaXNwbGF5TGVuZ3RoLG9yZGVyOmUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VbMF1dJiZ0W2VbMF1dLnNOYW1lP1t0W2VbMF1dLnNOYW1lLGVbMV1dOmUuc2xpY2UoKX0pLHNlYXJjaDpILmV4dGVuZCh7fSxuLm9QcmV2aW91c1NlYXJjaCksY29sdW1uczpuLmFvQ29sdW1ucy5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm57bmFtZTplLnNOYW1lLHZpc2libGU6ZS5iVmlzaWJsZSxzZWFyY2g6SC5leHRlbmQoe30sbi5hb1ByZVNlYXJjaENvbHNbdF0pfX0pfSxuLm9TYXZlZFN0YXRlPWUsRyhuLCJhb1N0YXRlU2F2ZVBhcmFtcyIsInN0YXRlU2F2ZVBhcmFtcyIsW24sZV0pLG4ub0ZlYXR1cmVzLmJTdGF0ZVNhdmUmJiFuLmJEZXN0cm95aW5nJiZuLmZuU3RhdGVTYXZlQ2FsbGJhY2suY2FsbChuLm9JbnN0YW5jZSxuLGUpKX1mdW5jdGlvbiBldChyLGUsdCl7dmFyIG4sYSxvPXIuYW9Db2x1bW5zLGk9YihyLmFvQ29sdW1ucywic05hbWUiKSxsPShyLl9iTG9hZGluZ1N0YXRlPSEwLHIuX2JJbml0Q29tcGxldGU/bmV3IFYuQXBpKHIpOm51bGwpO2lmKGUmJmUudGltZSl7dmFyIHM9ci5pU3RhdGVEdXJhdGlvbjtpZigwPHMmJmUudGltZTwrbmV3IERhdGUtMWUzKnMpci5fYkxvYWRpbmdTdGF0ZT0hMTtlbHNlIGlmKC0xIT09RyhyLCJhb1N0YXRlTG9hZFBhcmFtcyIsInN0YXRlTG9hZFBhcmFtcyIsW3IsZV0pLmluZGV4T2YoITEpKXIuX2JMb2FkaW5nU3RhdGU9ITE7ZWxzZXtpZihyLm9Mb2FkZWRTdGF0ZT1ILmV4dGVuZCghMCx7fSxlKSxHKHIsbnVsbCwic3RhdGVMb2FkSW5pdCIsW3IsZV0sITApLHZvaWQgMCE9PWUubGVuZ3RoJiYobD9sLnBhZ2UubGVuKGUubGVuZ3RoKTpyLl9pRGlzcGxheUxlbmd0aD1lLmxlbmd0aCksdm9pZCAwIT09ZS5zdGFydCYmKG51bGw9PT1sPyhyLl9pRGlzcGxheVN0YXJ0PWUuc3RhcnQsci5pSW5pdERpc3BsYXlTdGFydD1lLnN0YXJ0KTpWZShyLGUuc3RhcnQvci5faURpc3BsYXlMZW5ndGgpKSx2b2lkIDAhPT1lLm9yZGVyJiYoci5hYVNvcnRpbmc9W10sSC5lYWNoKGUub3JkZXIsZnVuY3Rpb24oZSx0KXt2YXIgbj1bdFswXSx0WzFdXTtpZigic3RyaW5nIj09dHlwZW9mIHRbMF0pe3Q9aS5pbmRleE9mKHRbMF0pO2lmKHQ8MClyZXR1cm47blswXT10fWVsc2UgaWYoblswXT49by5sZW5ndGgpcmV0dXJuO3IuYWFTb3J0aW5nLnB1c2gobil9KSksdm9pZCAwIT09ZS5zZWFyY2gmJkguZXh0ZW5kKHIub1ByZXZpb3VzU2VhcmNoLGUuc2VhcmNoKSxlLmNvbHVtbnMpe3ZhciB1LGM9ZS5jb2x1bW5zLGQ9YihlLmNvbHVtbnMsIm5hbWUiKTtpZihkLmpvaW4oIiIpLmxlbmd0aCYmZC5qb2luKCIiKSE9PWkuam9pbigiIikpZm9yKGM9W10sbj0wO248aS5sZW5ndGg7bisrKSIiIT1pW25dJiYwPD0odT1kLmluZGV4T2YoaVtuXSkpP2MucHVzaChlLmNvbHVtbnNbdV0pOmMucHVzaCh7fSk7aWYoYy5sZW5ndGg9PT1vLmxlbmd0aCl7Zm9yKG49MCxhPWMubGVuZ3RoO248YTtuKyspe3ZhciBmPWNbbl07dm9pZCAwIT09Zi52aXNpYmxlJiYobD9sLmNvbHVtbihuKS52aXNpYmxlKGYudmlzaWJsZSwhMSk6b1tuXS5iVmlzaWJsZT1mLnZpc2libGUpLHZvaWQgMCE9PWYuc2VhcmNoJiZILmV4dGVuZChyLmFvUHJlU2VhcmNoQ29sc1tuXSxmLnNlYXJjaCl9bCYmbC5jb2x1bW5zLmFkanVzdCgpfX1yLl9iTG9hZGluZ1N0YXRlPSExLEcociwiYW9TdGF0ZUxvYWRlZCIsInN0YXRlTG9hZGVkIixbcixlXSl9fWVsc2Ugci5fYkxvYWRpbmdTdGF0ZT0hMTt0KCl9ZnVuY3Rpb24geihlLHQsbixyKXtpZihuPSJEYXRhVGFibGVzIHdhcm5pbmc6ICIrKGU/InRhYmxlIGlkPSIrZS5zVGFibGVJZCsiIC0gIjoiIikrbixyJiYobis9Ii4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBlcnJvciwgcGxlYXNlIHNlZSBodHRwczovL2RhdGF0YWJsZXMubmV0L3RuLyIrciksdClXLmNvbnNvbGUmJmNvbnNvbGUubG9nJiZjb25zb2xlLmxvZyhuKTtlbHNle3Q9Vi5leHQsdD10LnNFcnJNb2RlfHx0LmVyck1vZGU7aWYoZSYmRyhlLG51bGwsImR0LWVycm9yIixbZSxyLG5dLCEwKSwiYWxlcnQiPT10KWFsZXJ0KG4pO2Vsc2V7aWYoInRocm93Ij09dCl0aHJvdyBuZXcgRXJyb3Iobik7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQoZSxyLG4pfX19ZnVuY3Rpb24gJChuLHIsZSx0KXtBcnJheS5pc0FycmF5KGUpP0guZWFjaChlLGZ1bmN0aW9uKGUsdCl7QXJyYXkuaXNBcnJheSh0KT8kKG4scix0WzBdLHRbMV0pOiQobixyLHQpfSk6KHZvaWQgMD09PXQmJih0PWUpLHZvaWQgMCE9PXJbZV0mJihuW3RdPXJbZV0pKX1mdW5jdGlvbiB0dChlLHQsbil7dmFyIHIsYTtmb3IoYSBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGEpJiYocj10W2FdLEguaXNQbGFpbk9iamVjdChyKT8oSC5pc1BsYWluT2JqZWN0KGVbYV0pfHwoZVthXT17fSksSC5leHRlbmQoITAsZVthXSxyKSk6biYmImRhdGEiIT09YSYmImFhRGF0YSIhPT1hJiZBcnJheS5pc0FycmF5KHIpP2VbYV09ci5zbGljZSgpOmVbYV09cik7cmV0dXJuIGV9ZnVuY3Rpb24gbnQoZSx0LG4pe0goZSkub24oImNsaWNrLkRUIix0LGZ1bmN0aW9uKGUpe24oZSl9KS5vbigia2V5cHJlc3MuRFQiLHQsZnVuY3Rpb24oZSl7MTM9PT1lLndoaWNoJiYoZS5wcmV2ZW50RGVmYXVsdCgpLG4oZSkpfSkub24oInNlbGVjdHN0YXJ0LkRUIix0LGZ1bmN0aW9uKCl7cmV0dXJuITF9KX1mdW5jdGlvbiBZKGUsdCxuKXtuJiZlW3RdLnB1c2gobil9ZnVuY3Rpb24gRyh0LGUsbixyLGEpe3ZhciBvPVtdO3JldHVybiBlJiYobz10W2VdLnNsaWNlKCkucmV2ZXJzZSgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBseSh0Lm9JbnN0YW5jZSxyKX0pKSxudWxsIT09biYmKGU9SC5FdmVudChuKyIuZHQiKSxuPUgodC5uVGFibGUpLGUuZHQ9dC5hcGksblthPyJ0cmlnZ2VyIjoidHJpZ2dlckhhbmRsZXIiXShlLHIpLGEmJjA9PT1uLnBhcmVudHMoImJvZHkiKS5sZW5ndGgmJkgoImJvZHkiKS50cmlnZ2VyKGUsciksby5wdXNoKGUucmVzdWx0KSksb31mdW5jdGlvbiBydChlKXt2YXIgdD1lLl9pRGlzcGxheVN0YXJ0LG49ZS5mbkRpc3BsYXlFbmQoKSxyPWUuX2lEaXNwbGF5TGVuZ3RoO248PXQmJih0PW4tciksdC09dCVyLGUuX2lEaXNwbGF5U3RhcnQ9dD0tMT09PXJ8fHQ8MD8wOnR9ZnVuY3Rpb24gYXQoZSx0KXt2YXIgZT1lLnJlbmRlcmVyLG49Vi5leHQucmVuZGVyZXJbdF07cmV0dXJuIEguaXNQbGFpbk9iamVjdChlKSYmZVt0XT9uW2VbdF1dfHxuLl86InN0cmluZyI9PXR5cGVvZiBlJiZuW2VdfHxuLl99ZnVuY3Rpb24gSihlKXtyZXR1cm4gZS5vRmVhdHVyZXMuYlNlcnZlclNpZGU/InNzcCI6ZS5hamF4PyJhamF4IjoiZG9tIn1mdW5jdGlvbiBvdChlLHQsbil7dmFyIHI9ZS5mbkZvcm1hdE51bWJlcixhPWUuX2lEaXNwbGF5U3RhcnQrMSxvPWUuX2lEaXNwbGF5TGVuZ3RoLGk9ZS5mblJlY29yZHNEaXNwbGF5KCksbD1lLmZuUmVjb3Jkc1RvdGFsKCkscz0tMT09PW87cmV0dXJuIHQucmVwbGFjZSgvX1NUQVJUXy9nLHIuY2FsbChlLGEpKS5yZXBsYWNlKC9fRU5EXy9nLHIuY2FsbChlLGUuZm5EaXNwbGF5RW5kKCkpKS5yZXBsYWNlKC9fTUFYXy9nLHIuY2FsbChlLGwpKS5yZXBsYWNlKC9fVE9UQUxfL2csci5jYWxsKGUsaSkpLnJlcGxhY2UoL19QQUdFXy9nLHIuY2FsbChlLHM/MTpNYXRoLmNlaWwoYS9vKSkpLnJlcGxhY2UoL19QQUdFU18vZyxyLmNhbGwoZSxzPzE6TWF0aC5jZWlsKGkvbykpKS5yZXBsYWNlKC9fRU5UUklFU18vZyxlLmFwaS5pMThuKCJlbnRyaWVzIiwiIixuKSkucmVwbGFjZSgvX0VOVFJJRVMtTUFYXy9nLGUuYXBpLmkxOG4oImVudHJpZXMiLCIiLGwpKS5yZXBsYWNlKC9fRU5UUklFUy1UT1RBTF8vZyxlLmFwaS5pMThuKCJlbnRyaWVzIiwiIixpKSl9ZnVuY3Rpb24gaXQoZSx0KXtpZih0KWlmKHQubGVuZ3RoPDFlNCllLnB1c2guYXBwbHkoZSx0KTtlbHNlIGZvcihsPTA7bDx0Lmxlbmd0aDtsKyspZS5wdXNoKHRbbF0pfWZ1bmN0aW9uIGx0KGUsdCxuKXtmb3IoQXJyYXkuaXNBcnJheShuKXx8KG49W25dKSxsPTA7bDxuLmxlbmd0aDtsKyspZS5vbih0KyIuZHQiLG5bbF0pfWZ1bmN0aW9uIHN0KG4pe3JldHVybiBWLmV4dC5lc2NhcGUuYXR0cmlidXRlcyYmSC5lYWNoKG4sZnVuY3Rpb24oZSx0KXtuW2VdPXUodCl9KSxufXZhciB1dD1bXSx0PUFycmF5LnByb3RvdHlwZTtYPWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgWCkpcmV0dXJuIG5ldyBYKGUsdCk7ZnVuY3Rpb24gbihlKXtlPWUsdD1WLnNldHRpbmdzLHI9Yih0LCJuVGFibGUiKTt2YXIgbix0LHIsYT1lP2UublRhYmxlJiZlLm9GZWF0dXJlcz9bZV06ZS5ub2RlTmFtZSYmInRhYmxlIj09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT8tMSE9PShhPXIuaW5kZXhPZihlKSk/W3RbYV1dOm51bGw6ZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuc2V0dGluZ3M/ZS5zZXR0aW5ncygpLnRvQXJyYXkoKTooInN0cmluZyI9PXR5cGVvZiBlP249SChlKS5nZXQoKTplIGluc3RhbmNlb2YgSCYmKG49ZS5nZXQoKSksbj90LmZpbHRlcihmdW5jdGlvbihlLHQpe3JldHVybiBuLmluY2x1ZGVzKHJbdF0pfSk6dm9pZCAwKTpbXTthJiZvLnB1c2guYXBwbHkobyxhKX12YXIgcixvPVtdO2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHI9MDtyPGUubGVuZ3RoO3IrKyluKGVbcl0pO2Vsc2UgbihlKTt0aGlzLmNvbnRleHQ9MTxvLmxlbmd0aD9DKG8pOm8saXQodGhpcyx0KSx0aGlzLnNlbGVjdG9yPXtyb3dzOm51bGwsY29sczpudWxsLG9wdHM6bnVsbH0sWC5leHRlbmQodGhpcyx0aGlzLHV0KX0sVi5BcGk9WCxILmV4dGVuZChYLnByb3RvdHlwZSx7YW55OmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNvdW50KCl9LGNvbnRleHQ6W10sY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mbGF0dGVuKCkubGVuZ3RofSxlYWNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49dGhpcy5sZW5ndGg7dDxuO3QrKyllLmNhbGwodGhpcyx0aGlzW3RdLHQsdGhpcyk7cmV0dXJuIHRoaXN9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGV4dDtyZXR1cm4gdC5sZW5ndGg+ZT9uZXcgWCh0W2VdLHRoaXNbZV0pOm51bGx9LGZpbHRlcjpmdW5jdGlvbihlKXtlPXQuZmlsdGVyLmNhbGwodGhpcyxlLHRoaXMpO3JldHVybiBuZXcgWCh0aGlzLmNvbnRleHQsZSl9LGZsYXR0ZW46ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LGUuY29uY2F0LmFwcGx5KGUsdGhpcy50b0FycmF5KCkpKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfSxqb2luOnQuam9pbixpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4tMSE9PXRoaXMuaW5kZXhPZihlKX0saW5kZXhPZjp0LmluZGV4T2YsaXRlcmF0b3I6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGEsbyxpLGwscyx1LGMsZCxmPVtdLGg9dGhpcy5jb250ZXh0LHA9dGhpcy5zZWxlY3Rvcjtmb3IoInN0cmluZyI9PXR5cGVvZiBlJiYocj1uLG49dCx0PWUsZT0hMSksbz0wLGk9aC5sZW5ndGg7bzxpO28rKyl7dmFyIGc9bmV3IFgoaFtvXSk7aWYoInRhYmxlIj09PXQpdm9pZCAwIT09KGE9bi5jYWxsKGcsaFtvXSxvKSkmJmYucHVzaChhKTtlbHNlIGlmKCJjb2x1bW5zIj09PXR8fCJyb3dzIj09PXQpdm9pZCAwIT09KGE9bi5jYWxsKGcsaFtvXSx0aGlzW29dLG8pKSYmZi5wdXNoKGEpO2Vsc2UgaWYoImV2ZXJ5Ij09PXR8fCJjb2x1bW4iPT09dHx8ImNvbHVtbi1yb3dzIj09PXR8fCJyb3ciPT09dHx8ImNlbGwiPT09dClmb3IoYz10aGlzW29dLCJjb2x1bW4tcm93cyI9PT10JiYodT14dChoW29dLHAub3B0cykpLGw9MCxzPWMubGVuZ3RoO2w8cztsKyspZD1jW2xdLHZvaWQgMCE9PShhPSJjZWxsIj09PXQ/bi5jYWxsKGcsaFtvXSxkLnJvdyxkLmNvbHVtbixvLGwpOm4uY2FsbChnLGhbb10sZCxvLGwsdSkpJiZmLnB1c2goYSl9cmV0dXJuIGYubGVuZ3RofHxyPygoZT0ocj1uZXcgWChoLGU/Zi5jb25jYXQuYXBwbHkoW10sZik6ZikpLnNlbGVjdG9yKS5yb3dzPXAucm93cyxlLmNvbHM9cC5jb2xzLGUub3B0cz1wLm9wdHMscik6dGhpc30sbGFzdEluZGV4T2Y6dC5sYXN0SW5kZXhPZixsZW5ndGg6MCxtYXA6ZnVuY3Rpb24oZSl7ZT10Lm1hcC5jYWxsKHRoaXMsZSx0aGlzKTtyZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LGUpfSxwbHVjazpmdW5jdGlvbihlKXt2YXIgdD1WLnV0aWwuZ2V0KGUpO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSxwb3A6dC5wb3AscHVzaDp0LnB1c2gscmVkdWNlOnQucmVkdWNlLHJlZHVjZVJpZ2h0OnQucmVkdWNlUmlnaHQscmV2ZXJzZTp0LnJldmVyc2Usc2VsZWN0b3I6bnVsbCxzaGlmdDp0LnNoaWZ0LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYKHRoaXMuY29udGV4dCx0aGlzKX0sc29ydDp0LnNvcnQsc3BsaWNlOnQuc3BsaWNlLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zbGljZS5jYWxsKHRoaXMpfSx0byQ6ZnVuY3Rpb24oKXtyZXR1cm4gSCh0aGlzKX0sdG9KUXVlcnk6ZnVuY3Rpb24oKXtyZXR1cm4gSCh0aGlzKX0sdW5pcXVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYKHRoaXMuY29udGV4dCxDKHRoaXMudG9BcnJheSgpKSl9LHVuc2hpZnQ6dC51bnNoaWZ0fSksVy5fX2FwaVN0cnVjdD11dCxYLmV4dGVuZD1mdW5jdGlvbihlLHQsbil7aWYobi5sZW5ndGgmJnQmJih0IGluc3RhbmNlb2YgWHx8dC5fX2R0X3dyYXBwZXIpKWZvcih2YXIgcixhPTAsbz1uLmxlbmd0aDthPG87YSsrKSJfX3Byb3RvX18iIT09KHI9blthXSkubmFtZSYmKHRbci5uYW1lXT0iZnVuY3Rpb24iPT09ci50eXBlP2Z1bmN0aW9uKHQsbixyKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1uLmFwcGx5KHR8fHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gWC5leHRlbmQoZSxlLHIubWV0aG9kRXh0KSxlfX0oZSxyLnZhbCxyKToib2JqZWN0Ij09PXIudHlwZT97fTpyLnZhbCx0W3IubmFtZV0uX19kdF93cmFwcGVyPSEwLFguZXh0ZW5kKGUsdFtyLm5hbWVdLHIucHJvcEV4dCkpfSxYLnJlZ2lzdGVyPXI9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylYLnJlZ2lzdGVyKGVbbl0sdCk7ZWxzZSBmb3IodmFyIGE9ZS5zcGxpdCgiLiIpLG89dXQsaT0wLGw9YS5sZW5ndGg7aTxsO2krKyl7dmFyIHMsdSxjPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKWlmKGVbbl0ubmFtZT09PXQpcmV0dXJuIGVbbl07cmV0dXJuIG51bGx9KG8sdT0ocz0tMSE9PWFbaV0uaW5kZXhPZigiKCkiKSk/YVtpXS5yZXBsYWNlKCIoKSIsIiIpOmFbaV0pO2N8fG8ucHVzaChjPXtuYW1lOnUsdmFsOnt9LG1ldGhvZEV4dDpbXSxwcm9wRXh0OltdLHR5cGU6Im9iamVjdCJ9KSxpPT09bC0xPyhjLnZhbD10LGMudHlwZT0iZnVuY3Rpb24iPT10eXBlb2YgdD8iZnVuY3Rpb24iOkguaXNQbGFpbk9iamVjdCh0KT8ib2JqZWN0Ijoib3RoZXIiKTpvPXM/Yy5tZXRob2RFeHQ6Yy5wcm9wRXh0fX0sWC5yZWdpc3RlclBsdXJhbD1lPWZ1bmN0aW9uKGUsdCxuKXtYLnJlZ2lzdGVyKGUsbiksWC5yZWdpc3Rlcih0LGZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGU9PT10aGlzP3RoaXM6ZSBpbnN0YW5jZW9mIFg/ZS5sZW5ndGg/QXJyYXkuaXNBcnJheShlWzBdKT9uZXcgWChlLmNvbnRleHQsZVswXSk6ZVswXTp2b2lkIDA6ZX0pfTtmdW5jdGlvbiBjdChlLHQpe3ZhciBuLHI7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/KG49W10sZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2U9Y3QoZSx0KTtpdChuLGUpfSksbi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSk6Im51bWJlciI9PXR5cGVvZiBlP1t0W2VdXToocj10Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5uVGFibGV9KSxIKHIpLmZpbHRlcihlKS5tYXAoZnVuY3Rpb24oKXt2YXIgZT1yLmluZGV4T2YodGhpcyk7cmV0dXJuIHRbZV19KS50b0FycmF5KCkpfWZ1bmN0aW9uIGR0KGEsbyxlKXt2YXIgdCxuO2UmJih0PW5ldyBYKGEpKS5vbmUoImRyYXciLGZ1bmN0aW9uKCl7ZSh0LmFqYXguanNvbigpKX0pLCJzc3AiPT1KKGEpP0NlKGEsbyk6KEkoYSwhMCksKG49YS5qcVhIUikmJjQhPT1uLnJlYWR5U3RhdGUmJm4uYWJvcnQoKSxGZShhLHt9LGZ1bmN0aW9uKGUpe3ZlKGEpO2Zvcih2YXIgdD1PZShhLGUpLG49MCxyPXQubGVuZ3RoO248cjtuKyspRChhLHRbbl0pO0NlKGEsbyksV2UoYSksSShhLCExKX0pKX1mdW5jdGlvbiBmdChlLHQsbixyLGEpe2Zvcih2YXIgbyxpPVtdLGw9dHlwZW9mIHQscz0wLHU9KHQ9dCYmInN0cmluZyIhPWwmJiJmdW5jdGlvbiIhPWwmJnZvaWQgMCE9PXQubGVuZ3RoP3Q6W3RdKS5sZW5ndGg7czx1O3MrKykobz0obz1uKCJzdHJpbmciPT10eXBlb2YgdFtzXT90W3NdLnRyaW0oKTp0W3NdKSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lfSkpJiZvLmxlbmd0aCYmKGk9aS5jb25jYXQobykpO3ZhciBjPVQuc2VsZWN0b3JbZV07aWYoYy5sZW5ndGgpZm9yKHM9MCx1PWMubGVuZ3RoO3M8dTtzKyspaT1jW3NdKHIsYSxpKTtyZXR1cm4gQyhpKX1mdW5jdGlvbiBodChlKXtyZXR1cm4oZT1lfHx7fSkuZmlsdGVyJiZ2b2lkIDA9PT1lLnNlYXJjaCYmKGUuc2VhcmNoPWUuZmlsdGVyKSxILmV4dGVuZCh7Y29sdW1uT3JkZXI6ImltcGxpZWQiLHNlYXJjaDoibm9uZSIsb3JkZXI6ImN1cnJlbnQiLHBhZ2U6ImFsbCJ9LGUpfWZ1bmN0aW9uIHB0KGUpe3ZhciB0PW5ldyBYKGUuY29udGV4dFswXSk7cmV0dXJuIGUubGVuZ3RoJiZ0LnB1c2goZVswXSksdC5zZWxlY3Rvcj1lLnNlbGVjdG9yLHQubGVuZ3RoJiYxPHRbMF0ubGVuZ3RoJiZ0WzBdLnNwbGljZSgxKSx0fXIoInRhYmxlcygpIixmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9uZXcgWChjdChlLHRoaXMuY29udGV4dCkpOnRoaXN9KSxyKCJ0YWJsZSgpIixmdW5jdGlvbihlKXt2YXIgZT10aGlzLnRhYmxlcyhlKSx0PWUuY29udGV4dDtyZXR1cm4gdC5sZW5ndGg/bmV3IFgodFswXSk6ZX0pLFtbIm5vZGVzIiwibm9kZSIsIm5UYWJsZSJdLFsiYm9keSIsImJvZHkiLCJuVEJvZHkiXSxbImhlYWRlciIsImhlYWRlciIsIm5USGVhZCJdLFsiZm9vdGVyIiwiZm9vdGVyIiwiblRGb290Il1dLmZvckVhY2goZnVuY3Rpb24odCl7ZSgidGFibGVzKCkuIit0WzBdKyIoKSIsInRhYmxlKCkuIit0WzFdKyIoKSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlW3RbMl1dfSwxKX0pfSksW1siaGVhZGVyIiwiYW9IZWFkZXIiXSxbImZvb3RlciIsImFvRm9vdGVyIl1dLmZvckVhY2goZnVuY3Rpb24odCl7cigidGFibGUoKS4iK3RbMF0rIi5zdHJ1Y3R1cmUoKSIsZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5jb2x1bW5zKGUpLmluZGV4ZXMoKS5mbGF0dGVuKCkudG9BcnJheSgpLGU9dGhpcy5jb250ZXh0WzBdLGU9VGUoZSxlW3RbMV1dLG4pLHI9bi5zbGljZSgpLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSk7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdFtyLmluZGV4T2YoZSldfSl9KX0pfSksZSgidGFibGVzKCkuY29udGFpbmVycygpIiwidGFibGUoKS5jb250YWluZXIoKSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3JldHVybiBlLm5UYWJsZVdyYXBwZXJ9LDEpfSkscigidGFibGVzKCkuZXZlcnkoKSIsZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUsdCl7bi5jYWxsKHIudGFibGUodCksdCl9KX0pLHIoImNhcHRpb24oKSIsZnVuY3Rpb24oYSxvKXt2YXIgZSx0PXRoaXMuY29udGV4dDtyZXR1cm4gdm9pZCAwPT09YT8oZT10WzBdLmNhcHRpb25Ob2RlKSYmdC5sZW5ndGg/ZS5pbm5lckhUTUw6bnVsbDp0aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7dmFyIHQ9SChlLm5UYWJsZSksbj1IKGUuY2FwdGlvbk5vZGUpLHI9SChlLm5UYWJsZVdyYXBwZXIpO24ubGVuZ3RofHwobj1IKCI8Y2FwdGlvbi8+IikuaHRtbChhKSxlLmNhcHRpb25Ob2RlPW5bMF0sbyl8fCh0LnByZXBlbmQobiksbz1uLmNzcygiY2FwdGlvbi1zaWRlIikpLG4uaHRtbChhKSxvJiYobi5jc3MoImNhcHRpb24tc2lkZSIsbyksblswXS5fY2FwdGlvblNpZGU9byksKHIuZmluZCgiZGl2LmRhdGFUYWJsZXNfc2Nyb2xsIikubGVuZ3RoPyhlPSJ0b3AiPT09bz8iSGVhZCI6IkZvb3QiLHIuZmluZCgiZGl2LmRhdGFUYWJsZXNfc2Nyb2xsIitlKyIgdGFibGUiKSk6dCkucHJlcGVuZChuKX0sMSl9KSxyKCJjYXB0aW9uLm5vZGUoKSIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRleHQ7cmV0dXJuIGUubGVuZ3RoP2VbMF0uY2FwdGlvbk5vZGU6bnVsbH0pLHIoImRyYXcoKSIsZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXsicGFnZSI9PT10P3goZSk6Q2UoZSwhMT09PSh0PSJzdHJpbmciPT10eXBlb2YgdD8iZnVsbC1ob2xkIiE9PXQ6dCkpfSl9KSxyKCJwYWdlKCkiLGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10P3RoaXMucGFnZS5pbmZvKCkucGFnZTp0aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7VmUoZSx0KX0pfSkscigicGFnZS5pbmZvKCkiLGZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsYTtpZigwIT09dGhpcy5jb250ZXh0Lmxlbmd0aClyZXR1cm4gdD0oZT10aGlzLmNvbnRleHRbMF0pLl9pRGlzcGxheVN0YXJ0LG49ZS5vRmVhdHVyZXMuYlBhZ2luYXRlP2UuX2lEaXNwbGF5TGVuZ3RoOi0xLHI9ZS5mblJlY29yZHNEaXNwbGF5KCkse3BhZ2U6KGE9LTE9PT1uKT8wOk1hdGguZmxvb3IodC9uKSxwYWdlczphPzE6TWF0aC5jZWlsKHIvbiksc3RhcnQ6dCxlbmQ6ZS5mbkRpc3BsYXlFbmQoKSxsZW5ndGg6bixyZWNvcmRzVG90YWw6ZS5mblJlY29yZHNUb3RhbCgpLHJlY29yZHNEaXNwbGF5OnIsc2VydmVyU2lkZToic3NwIj09PUooZSl9fSkscigicGFnZS5sZW4oKSIsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQ/MCE9PXRoaXMuY29udGV4dC5sZW5ndGg/dGhpcy5jb250ZXh0WzBdLl9pRGlzcGxheUxlbmd0aDp2b2lkIDA6dGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe1hlKGUsdCl9KX0pLHIoImFqYXguanNvbigpIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dDtpZigwPGUubGVuZ3RoKXJldHVybiBlWzBdLmpzb259KSxyKCJhamF4LnBhcmFtcygpIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dDtpZigwPGUubGVuZ3RoKXJldHVybiBlWzBdLm9BamF4RGF0YX0pLHIoImFqYXgucmVsb2FkKCkiLGZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtkdChlLCExPT09bix0KX0pfSkscigiYWpheC51cmwoKSIsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZXh0O3JldHVybiB2b2lkIDA9PT10PzA9PT1lLmxlbmd0aD92b2lkIDA6KGU9ZVswXSxILmlzUGxhaW5PYmplY3QoZS5hamF4KT9lLmFqYXgudXJsOmUuYWpheCk6dGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe0guaXNQbGFpbk9iamVjdChlLmFqYXgpP2UuYWpheC51cmw9dDplLmFqYXg9dH0pfSkscigiYWpheC51cmwoKS5sb2FkKCkiLGZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtkdChlLCExPT09bix0KX0pfSk7ZnVuY3Rpb24gZ3QobyxpLGUsdCl7ZnVuY3Rpb24gbChlLHQpe3ZhciBuO2lmKEFycmF5LmlzQXJyYXkoZSl8fGUgaW5zdGFuY2VvZiBIKWZvcih2YXIgcj0wLGE9ZS5sZW5ndGg7cjxhO3IrKylsKGVbcl0sdCk7ZWxzZSBlLm5vZGVOYW1lJiYidHIiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPyhlLnNldEF0dHJpYnV0ZSgiZGF0YS1kdC1yb3ciLGkuaWR4KSxzLnB1c2goZSkpOihuPUgoIjx0cj48dGQ+PC90ZD48L3RyPiIpLmF0dHIoImRhdGEtZHQtcm93IixpLmlkeCkuYWRkQ2xhc3ModCksSCgidGQiLG4pLmFkZENsYXNzKHQpLmh0bWwoZSlbMF0uY29sU3Bhbj1vZShvKSxzLnB1c2goblswXSkpfXZhciBzPVtdO2woZSx0KSxpLl9kZXRhaWxzJiZpLl9kZXRhaWxzLmRldGFjaCgpLGkuX2RldGFpbHM9SChzKSxpLl9kZXRhaWxzU2hvdyYmaS5fZGV0YWlscy5pbnNlcnRBZnRlcihpLm5Ucil9ZnVuY3Rpb24gbXQoZSx0KXt2YXIgbj1lLmNvbnRleHQ7aWYobi5sZW5ndGgmJmUubGVuZ3RoKXt2YXIgcj1uWzBdLmFvRGF0YVtlWzBdXTtpZihyLl9kZXRhaWxzKXsoci5fZGV0YWlsc1Nob3c9dCk/KHIuX2RldGFpbHMuaW5zZXJ0QWZ0ZXIoci5uVHIpLEgoci5uVHIpLmFkZENsYXNzKCJkdC1oYXNDaGlsZCIpKTooci5fZGV0YWlscy5kZXRhY2goKSxIKHIublRyKS5yZW1vdmVDbGFzcygiZHQtaGFzQ2hpbGQiKSksRyhuWzBdLG51bGwsImNoaWxkUm93IixbdCxlLnJvdyhlWzBdKV0pO3ZhciBpPW5bMF0sYT1uZXcgWChpKSxyPSIuZHQuRFRfZGV0YWlscyIsdD0iZHJhdyIrcixlPSJjb2x1bW4tc2l6aW5nIityLHI9ImRlc3Ryb3kiK3IsbD1pLmFvRGF0YTtpZihhLm9mZih0KyIgIitlKyIgIityKSxiKGwsIl9kZXRhaWxzIikubGVuZ3RoPjApe2Eub24odCxmdW5jdGlvbihlLHQpe2lmKGkhPT10KXJldHVybjthLnJvd3Moe3BhZ2U6ImN1cnJlbnQifSkuZXEoMCkuZWFjaChmdW5jdGlvbihlKXt2YXIgdD1sW2VdO2lmKHQuX2RldGFpbHNTaG93KXQuX2RldGFpbHMuaW5zZXJ0QWZ0ZXIodC5uVHIpfSl9KTthLm9uKGUsZnVuY3Rpb24oZSx0KXtpZihpIT09dClyZXR1cm47dmFyIG4scj1vZSh0KTtmb3IodmFyIGE9MCxvPWwubGVuZ3RoO2E8bzthKyspe249bFthXTtpZihuJiZuLl9kZXRhaWxzKW4uX2RldGFpbHMuZWFjaChmdW5jdGlvbigpe3ZhciBlPUgodGhpcykuY2hpbGRyZW4oInRkIik7aWYoZS5sZW5ndGg9PTEpZS5hdHRyKCJjb2xzcGFuIixyKX0pfX0pO2Eub24ocixmdW5jdGlvbihlLHQpe2lmKGkhPT10KXJldHVybjtmb3IodmFyIG49MCxyPWwubGVuZ3RoO248cjtuKyspaWYobFtuXSYmbFtuXS5fZGV0YWlscylUdChhLG4pfSl9d3Qobil9fX1mdW5jdGlvbiB2dChlLHQsbixyLGEsbyl7Zm9yKHZhciBpPVtdLGw9MCxzPWEubGVuZ3RoO2w8cztsKyspaS5wdXNoKHEoZSxhW2xdLHQsbykpO3JldHVybiBpfWZ1bmN0aW9uIGJ0KGUsdCxuKXt2YXIgcj1lLmFvSGVhZGVyLGU9ZS50aXRsZVJvdyxhPW51bGw7aWYodm9pZCAwIT09bilhPW47ZWxzZSBpZighMD09PWUpYT0wO2Vsc2UgaWYoITE9PT1lKWE9ci5sZW5ndGgtMTtlbHNlIGlmKG51bGwhPT1lKWE9ZTtlbHNle2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXJbb11bdF0udW5pcXVlJiZIKCJzcGFuLmR0LWNvbHVtbi10aXRsZSIscltvXVt0XS5jZWxsKS50ZXh0KCkmJihhPW8pO251bGw9PT1hJiYoYT0wKX1yZXR1cm4gclthXVt0XS5jZWxsfXZhciB5dCxEdCx4dD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10sYT1lLmFpRGlzcGxheSxvPWUuYWlEaXNwbGF5TWFzdGVyLGk9dC5zZWFyY2gsbD10Lm9yZGVyLHQ9dC5wYWdlO2lmKCJzc3AiPT1KKGUpKXJldHVybiJyZW1vdmVkIj09PWk/W106aCgwLG8ubGVuZ3RoKTtpZigiY3VycmVudCI9PXQpZm9yKHU9ZS5faURpc3BsYXlTdGFydCxjPWUuZm5EaXNwbGF5RW5kKCk7dTxjO3UrKylyLnB1c2goYVt1XSk7ZWxzZSBpZigiY3VycmVudCI9PWx8fCJhcHBsaWVkIj09bCl7aWYoIm5vbmUiPT1pKXI9by5zbGljZSgpO2Vsc2UgaWYoImFwcGxpZWQiPT1pKXI9YS5zbGljZSgpO2Vsc2UgaWYoInJlbW92ZWQiPT1pKXtmb3IodmFyIHM9e30sdT0wLGM9YS5sZW5ndGg7dTxjO3UrKylzW2FbdV1dPW51bGw7by5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLGUpfHxyLnB1c2goZSl9KX19ZWxzZSBpZigiaW5kZXgiPT1sfHwib3JpZ2luYWwiPT1sKWZvcih1PTAsYz1lLmFvRGF0YS5sZW5ndGg7dTxjO3UrKyllLmFvRGF0YVt1XSYmKCJub25lIj09aXx8LTE9PT0obj1hLmluZGV4T2YodSkpJiYicmVtb3ZlZCI9PWl8fDA8PW4mJiJhcHBsaWVkIj09aSkmJnIucHVzaCh1KTtlbHNlIGlmKCJudW1iZXIiPT10eXBlb2YgbCl7dmFyIGQ9WmUoZSxsLCJhc2MiKTtpZigibm9uZSI9PT1pKXI9ZDtlbHNlIGZvcih1PTA7dTxkLmxlbmd0aDt1KyspKC0xPT09KG49YS5pbmRleE9mKGRbdV0pKSYmInJlbW92ZWQiPT1pfHwwPD1uJiYiYXBwbGllZCI9PWkpJiZyLnB1c2goZFt1XSl9cmV0dXJuIHJ9LFN0PShyKCJyb3dzKCkiLGZ1bmN0aW9uKG4scil7dm9pZCAwPT09bj9uPSIiOkguaXNQbGFpbk9iamVjdChuKSYmKHI9bixuPSIiKSxyPWh0KHIpO3ZhciBlPXRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtyZXR1cm4gdD1mdCgicm93Iix0PW4sZnVuY3Rpb24obil7dmFyIGU9ZihuKSxyPWEuYW9EYXRhO2lmKG51bGwhPT1lJiYhbylyZXR1cm5bZV07aWYoaT1pfHx4dChhLG8pLG51bGwhPT1lJiYtMSE9PWkuaW5kZXhPZihlKSlyZXR1cm5bZV07aWYobnVsbD09bnx8IiI9PT1uKXJldHVybiBpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiBpLm1hcChmdW5jdGlvbihlKXt2YXIgdD1yW2VdO3JldHVybiBuKGUsdC5fYURhdGEsdC5uVHIpP2U6bnVsbH0pO2lmKG4ubm9kZU5hbWUpcmV0dXJuIGU9bi5fRFRfUm93SW5kZXgsdD1uLl9EVF9DZWxsSW5kZXgsdm9pZCAwIT09ZT9yW2VdJiZyW2VdLm5Ucj09PW4/W2VdOltdOnQ/clt0LnJvd10mJnJbdC5yb3ddLm5Ucj09PW4ucGFyZW50Tm9kZT9bdC5yb3ddOltdOihlPUgobikuY2xvc2VzdCgiKltkYXRhLWR0LXJvd10iKSkubGVuZ3RoP1tlLmRhdGEoImR0LXJvdyIpXTpbXTtpZigic3RyaW5nIj09dHlwZW9mIG4mJiIjIj09PW4uY2hhckF0KDApKXt2YXIgdD1hLmFJZHNbbi5yZXBsYWNlKC9eIy8sIiIpXTtpZih2b2lkIDAhPT10KXJldHVyblt0LmlkeF19ZT1BKHYoYS5hb0RhdGEsaSwiblRyIikpO3JldHVybiBIKGUpLmZpbHRlcihuKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fRFRfUm93SW5kZXh9KS50b0FycmF5KCl9LGE9ZSxvPXIpLCJjdXJyZW50IiE9PW8ub3JkZXImJiJhcHBsaWVkIiE9PW8ub3JkZXJ8fEdlKGEsdCksdDt2YXIgYSx0LG8saX0sMSk7cmV0dXJuIGUuc2VsZWN0b3Iucm93cz1uLGUuc2VsZWN0b3Iub3B0cz1yLGV9KSxyKCJyb3dzKCkubm9kZXMoKSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigicm93IixmdW5jdGlvbihlLHQpe3JldHVybiBlLmFvRGF0YVt0XS5uVHJ8fHZvaWQgMH0sMSl9KSxyKCJyb3dzKCkuZGF0YSgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCEwLCJyb3dzIixmdW5jdGlvbihlLHQpe3JldHVybiB2KGUuYW9EYXRhLHQsIl9hRGF0YSIpfSwxKX0pLGUoInJvd3MoKS5jYWNoZSgpIiwicm93KCkuY2FjaGUoKSIsZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInJvdyIsZnVuY3Rpb24oZSx0KXtlPWUuYW9EYXRhW3RdO3JldHVybiJzZWFyY2giPT09bj9lLl9hRmlsdGVyRGF0YTplLl9hU29ydERhdGF9LDEpfSksZSgicm93cygpLmludmFsaWRhdGUoKSIsInJvdygpLmludmFsaWRhdGUoKSIsZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInJvdyIsZnVuY3Rpb24oZSx0KXtiZShlLHQsbil9KX0pLGUoInJvd3MoKS5pbmRleGVzKCkiLCJyb3coKS5pbmRleCgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJyb3ciLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9LDEpfSksZSgicm93cygpLmlkcygpIiwicm93KCkuaWQoKSIsZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49dGhpcy5jb250ZXh0LHI9MCxhPW4ubGVuZ3RoO3I8YTtyKyspZm9yKHZhciBvPTAsaT10aGlzW3JdLmxlbmd0aDtvPGk7bysrKXt2YXIgbD1uW3JdLnJvd0lkRm4obltyXS5hb0RhdGFbdGhpc1tyXVtvXV0uX2FEYXRhKTt0LnB1c2goKCEwPT09ZT8iIyI6IiIpK2wpfXJldHVybiBuZXcgWChuLHQpfSksZSgicm93cygpLnJlbW92ZSgpIiwicm93KCkucmVtb3ZlKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInJvdyIsZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmFvRGF0YSxyPW5bdF0sYT1lLmFpRGlzcGxheU1hc3Rlci5pbmRleE9mKHQpLGE9KC0xIT09YSYmZS5haURpc3BsYXlNYXN0ZXIuc3BsaWNlKGEsMSksMDxlLl9pUmVjb3Jkc0Rpc3BsYXkmJmUuX2lSZWNvcmRzRGlzcGxheS0tLHJ0KGUpLGUucm93SWRGbihyLl9hRGF0YSkpO3ZvaWQgMCE9PWEmJmRlbGV0ZSBlLmFJZHNbYV0sblt0XT1udWxsfSksdGhpc30pLHIoInJvd3MuYWRkKCkiLGZ1bmN0aW9uKG8pe3ZhciBlPXRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxyPTAsYT1vLmxlbmd0aDtyPGE7cisrKSh0PW9bcl0pLm5vZGVOYW1lJiYiVFIiPT09dC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpP24ucHVzaChmZShlLHQpWzBdKTpuLnB1c2goRChlLHQpKTtyZXR1cm4gbn0sMSksdD10aGlzLnJvd3MoLTEpO3JldHVybiB0LnBvcCgpLGl0KHQsZSksdH0pLHIoInJvdygpIixmdW5jdGlvbihlLHQpe3JldHVybiBwdCh0aGlzLnJvd3MoZSx0KSl9KSxyKCJyb3coKS5kYXRhKCkiLGZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5jb250ZXh0O3JldHVybiB2b2lkIDA9PT1lP24ubGVuZ3RoJiZ0aGlzLmxlbmd0aCYmdGhpc1swXS5sZW5ndGg/blswXS5hb0RhdGFbdGhpc1swXV0uX2FEYXRhOnZvaWQgMDooKHQ9blswXS5hb0RhdGFbdGhpc1swXV0pLl9hRGF0YT1lLEFycmF5LmlzQXJyYXkoZSkmJnQublRyJiZ0Lm5Uci5pZCYmbShuWzBdLnJvd0lkKShlLHQublRyLmlkKSxiZShuWzBdLHRoaXNbMF0sImRhdGEiKSx0aGlzKX0pLHIoInJvdygpLm5vZGUoKSIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbnRleHQ7aWYoZS5sZW5ndGgmJnRoaXMubGVuZ3RoJiZ0aGlzWzBdLmxlbmd0aCl7ZT1lWzBdLmFvRGF0YVt0aGlzWzBdXTtpZihlJiZlLm5UcilyZXR1cm4gZS5uVHJ9cmV0dXJuIG51bGx9KSxyKCJyb3cuYWRkKCkiLGZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBIJiZ0Lmxlbmd0aCYmKHQ9dFswXSk7dmFyIGU9dGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3JldHVybiB0Lm5vZGVOYW1lJiYiVFIiPT09dC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpP2ZlKGUsdClbMF06RChlLHQpfSk7cmV0dXJuIHRoaXMucm93KGVbMF0pfSksSChTKS5vbigicGx1Z2luLWluaXQuZHQiLGZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFgodCk7ci5vbigic3RhdGVTYXZlUGFyYW1zLkRUIixmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPXQucm93SWRGbixhPXQuYWlEaXNwbGF5TWFzdGVyLG89W10saT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgbD1hW2ldLGw9dC5hb0RhdGFbbF07bC5fZGV0YWlsc1Nob3cmJm8ucHVzaCgiIyIrcihsLl9hRGF0YSkpfW4uY2hpbGRSb3dzPW99KSxyLm9uKCJzdGF0ZUxvYWRlZC5EVCIsZnVuY3Rpb24oZSx0LG4pe1N0KHIsbil9KSxTdChyLHIuc3RhdGUubG9hZGVkKCkpfSksZnVuY3Rpb24oZSx0KXt0JiZ0LmNoaWxkUm93cyYmZS5yb3dzKHQuY2hpbGRSb3dzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8oW146XFxdKig/OlxcLlteOlxcXSopKik6L2csIiQxXFw6Iil9KSkuZXZlcnkoZnVuY3Rpb24oKXtHKGUuc2V0dGluZ3MoKVswXSxudWxsLCJyZXF1ZXN0Q2hpbGQiLFt0aGlzXSl9KX0pLHd0PVYudXRpbC50aHJvdHRsZShmdW5jdGlvbihlKXtLZShlWzBdKX0sNTAwKSxUdD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udGV4dDtuLmxlbmd0aCYmKHQ9blswXS5hb0RhdGFbdm9pZCAwIT09dD90OmVbMF1dKSYmdC5fZGV0YWlscyYmKHQuX2RldGFpbHMucmVtb3ZlKCksdC5fZGV0YWlsc1Nob3c9dm9pZCAwLHQuX2RldGFpbHM9dm9pZCAwLEgodC5uVHIpLnJlbW92ZUNsYXNzKCJkdC1oYXNDaGlsZCIpLHd0KG4pKX0sX3Q9InJvdygpLmNoaWxkIixDdD1fdCsiKCkiLEl0PShyKEN0LGZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jb250ZXh0O3JldHVybiB2b2lkIDA9PT1lP24ubGVuZ3RoJiZ0aGlzLmxlbmd0aCYmblswXS5hb0RhdGFbdGhpc1swXV0/blswXS5hb0RhdGFbdGhpc1swXV0uX2RldGFpbHM6dm9pZCAwOighMD09PWU/dGhpcy5jaGlsZC5zaG93KCk6ITE9PT1lP1R0KHRoaXMpOm4ubGVuZ3RoJiZ0aGlzLmxlbmd0aCYmZ3QoblswXSxuWzBdLmFvRGF0YVt0aGlzWzBdXSxlLHQpLHRoaXMpfSkscihbX3QrIi5zaG93KCkiLEN0KyIuc2hvdygpIl0sZnVuY3Rpb24oKXtyZXR1cm4gbXQodGhpcywhMCksdGhpc30pLHIoW190KyIuaGlkZSgpIixDdCsiLmhpZGUoKSJdLGZ1bmN0aW9uKCl7cmV0dXJuIG10KHRoaXMsITEpLHRoaXN9KSxyKFtfdCsiLnJlbW92ZSgpIixDdCsiLnJlbW92ZSgpIl0sZnVuY3Rpb24oKXtyZXR1cm4gVHQodGhpcyksdGhpc30pLHIoX3QrIi5pc1Nob3duKCkiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0O3JldHVybiBlLmxlbmd0aCYmdGhpcy5sZW5ndGgmJmVbMF0uYW9EYXRhW3RoaXNbMF1dJiZlWzBdLmFvRGF0YVt0aGlzWzBdXS5fZGV0YWlsc1Nob3d8fCExfSksL14oW146XSspPzoobmFtZXx0aXRsZXx2aXNJZHh8dmlzaWJsZSkkLyk7cigiY29sdW1ucygpIixmdW5jdGlvbihuLHIpe3ZvaWQgMD09PW4/bj0iIjpILmlzUGxhaW5PYmplY3QobikmJihyPW4sbj0iIikscj1odChyKTt2YXIgZT10aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9bixsPXIsYz0oaT1lKS5hb0NvbHVtbnMsZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7bisrKWZvcih2YXIgcj0wO3I8ZVtuXS5sZW5ndGg7cisrKXt2YXIgYT1lW25dW3JdLmNlbGw7dC5pbmNsdWRlcyhhKXx8dC5wdXNoKGEpfXJldHVybiB0fShpLmFvSGVhZGVyKSx0PWZ0KCJjb2x1bW4iLHQsZnVuY3Rpb24obil7dmFyIHIsZT1mKG4pO2lmKCIiPT09bilyZXR1cm4gaChjLmxlbmd0aCk7aWYobnVsbCE9PWUpcmV0dXJuWzA8PWU/ZTpjLmxlbmd0aCtlXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgbilyZXR1cm4gcj14dChpLGwpLGMubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4odCx2dChpLHQsMCwwLHIpLGJ0KGksdCkpP3Q6bnVsbH0pO3ZhciB0LGEsbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5tYXRjaChJdCk6IiI7aWYobylzd2l0Y2gob1syXSl7Y2FzZSJ2aXNJZHgiOmNhc2UidmlzaWJsZSI6cmV0dXJuIG9bMV0mJm9bMV0ubWF0Y2goL15cZCskLyk/KHQ9cGFyc2VJbnQob1sxXSwxMCkpPDA/WyhhPWMubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYlZpc2libGU/dDpudWxsfSkpW2EubGVuZ3RoK3RdXTpbcmUoaSx0KV06Yy5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5iVmlzaWJsZSYmKCFvWzFdfHwwPEgoZFt0XSkuZmlsdGVyKG9bMV0pLmxlbmd0aCk/dDpudWxsfSk7Y2FzZSJuYW1lIjpyZXR1cm4ocz1zfHxiKGMsInNOYW1lIikpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBlPT09b1sxXT90Om51bGx9KTtjYXNlInRpdGxlIjpyZXR1cm4odT11fHxiKGMsInNUaXRsZSIpKS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PW9bMV0/dDpudWxsfSk7ZGVmYXVsdDpyZXR1cm5bXX1yZXR1cm4gbi5ub2RlTmFtZSYmbi5fRFRfQ2VsbEluZGV4P1tuLl9EVF9DZWxsSW5kZXguY29sdW1uXTooZT1IKGQpLmZpbHRlcihuKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZGUodGhpcyl9KS50b0FycmF5KCkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLXR9KSkubGVuZ3RofHwhbi5ub2RlTmFtZT9lOihlPUgobikuY2xvc2VzdCgiKltkYXRhLWR0LWNvbHVtbl0iKSkubGVuZ3RoP1tlLmRhdGEoImR0LWNvbHVtbiIpXTpbXX0saSxsKSxsLmNvbHVtbk9yZGVyJiYiaW5kZXgiPT09bC5jb2x1bW5PcmRlcj90LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSk6dDt2YXIgaSx0LGwscyx1LGMsZH0sMSk7cmV0dXJuIGUuc2VsZWN0b3IuY29scz1uLGUuc2VsZWN0b3Iub3B0cz1yLGV9KSxlKCJjb2x1bW5zKCkuaGVhZGVyKCkiLCJjb2x1bW4oKS5oZWFkZXIoKSIsZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gYnQoZSx0LG4pfSwxKX0pLGUoImNvbHVtbnMoKS5mb290ZXIoKSIsImNvbHVtbigpLmZvb3RlcigpIixmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigiY29sdW1uIixmdW5jdGlvbihlLHQpe3JldHVybiBlLmFvRm9vdGVyLmxlbmd0aD9lLmFvRm9vdGVyW3ZvaWQgMCE9PW4/bjowXVt0XS5jZWxsOm51bGx9LDEpfSksZSgiY29sdW1ucygpLmRhdGEoKSIsImNvbHVtbigpLmRhdGEoKSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigiY29sdW1uLXJvd3MiLHZ0LDEpfSksZSgiY29sdW1ucygpLnJlbmRlcigpIiwiY29sdW1uKCkucmVuZGVyKCkiLGZ1bmN0aW9uKG8pe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjb2x1bW4tcm93cyIsZnVuY3Rpb24oZSx0LG4scixhKXtyZXR1cm4gdnQoZSx0LDAsMCxhLG8pfSwxKX0pLGUoImNvbHVtbnMoKS5kYXRhU3JjKCkiLCJjb2x1bW4oKS5kYXRhU3JjKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hb0NvbHVtbnNbdF0ubURhdGF9LDEpfSksZSgiY29sdW1ucygpLmNhY2hlKCkiLCJjb2x1bW4oKS5jYWNoZSgpIixmdW5jdGlvbihvKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigiY29sdW1uLXJvd3MiLGZ1bmN0aW9uKGUsdCxuLHIsYSl7cmV0dXJuIHYoZS5hb0RhdGEsYSwic2VhcmNoIj09PW8/Il9hRmlsdGVyRGF0YSI6Il9hU29ydERhdGEiLHQpfSwxKX0pLGUoImNvbHVtbnMoKS5pbml0KCkiLCJjb2x1bW4oKS5pbml0KCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hb0NvbHVtbnNbdF19LDEpfSksZSgiY29sdW1ucygpLm5hbWVzKCkiLCJjb2x1bW4oKS5uYW1lKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hb0NvbHVtbnNbdF0uc05hbWV9LDEpfSksZSgiY29sdW1ucygpLm5vZGVzKCkiLCJjb2x1bW4oKS5ub2RlcygpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjb2x1bW4tcm93cyIsZnVuY3Rpb24oZSx0LG4scixhKXtyZXR1cm4gdihlLmFvRGF0YSxhLCJhbkNlbGxzIix0KX0sMSl9KSxlKCJjb2x1bW5zKCkudGl0bGVzKCkiLCJjb2x1bW4oKS50aXRsZSgpIixmdW5jdGlvbihuLHIpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjb2x1bW4iLGZ1bmN0aW9uKGUsdCl7Im51bWJlciI9PXR5cGVvZiBuJiYocj1uLG49dm9pZCAwKTt0PUgoInNwYW4uZHQtY29sdW1uLXRpdGxlIix0aGlzLmNvbHVtbih0KS5oZWFkZXIocikpO3JldHVybiB2b2lkIDAhPT1uPyh0Lmh0bWwobiksdGhpcyk6dC5odG1sKCl9LDEpfSksZSgiY29sdW1ucygpLnR5cGVzKCkiLCJjb2x1bW4oKS50eXBlKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXt0PWUuYW9Db2x1bW5zW3RdLnNUeXBlO3JldHVybiB0fHxzZShlKSx0fSwxKX0pLGUoImNvbHVtbnMoKS52aXNpYmxlKCkiLCJjb2x1bW4oKS52aXNpYmxlKCkiLGZ1bmN0aW9uKG4scil7dmFyIHQ9dGhpcyxhPVtdLGU9dGhpcy5pdGVyYXRvcigiY29sdW1uIixmdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PW4pcmV0dXJuIGUuYW9Db2x1bW5zW3RdLmJWaXNpYmxlOyFmdW5jdGlvbihlLHQsbil7dmFyIHIsYSxvPWUuYW9Db2x1bW5zLGk9b1t0XSxsPWUuYW9EYXRhO2lmKHZvaWQgMD09PW4pcmV0dXJuIGkuYlZpc2libGU7aWYoaS5iVmlzaWJsZT09PW4pcmV0dXJuITE7aWYobilmb3IodmFyIHM9YihvLCJiVmlzaWJsZSIpLmluZGV4T2YoITAsdCsxKSx1PTAsYz1sLmxlbmd0aDt1PGM7dSsrKWxbdV0mJihhPWxbdV0ublRyLHI9bFt1XS5hbkNlbGxzLGEpJiZhLmluc2VydEJlZm9yZShyW3RdLHJbc118fG51bGwpO2Vsc2UgSChiKGUuYW9EYXRhLCJhbkNlbGxzIix0KSkuZGV0YWNoKCk7cmV0dXJuIGkuYlZpc2libGU9biwkZShlKSwhMH0oZSx0LG4pfHxhLnB1c2godCl9KTtyZXR1cm4gdm9pZCAwIT09biYmdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe19lKGUsZS5hb0hlYWRlciksX2UoZSxlLmFvRm9vdGVyKSxlLmFpRGlzcGxheS5sZW5ndGh8fEgoZS5uVEJvZHkpLmZpbmQoInRkW2NvbHNwYW5dIikuYXR0cigiY29sc3BhbiIsb2UoZSkpLEtlKGUpLHQuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXthLmluY2x1ZGVzKHQpJiZHKGUsbnVsbCwiY29sdW1uLXZpc2liaWxpdHkiLFtlLHQsbixyXSl9KSxhLmxlbmd0aCYmKHZvaWQgMD09PXJ8fHIpJiZ0LmNvbHVtbnMuYWRqdXN0KCl9KSxlfSksZSgiY29sdW1ucygpLndpZHRocygpIiwiY29sdW1uKCkud2lkdGgoKSIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbHVtbnMoIjp2aXNpYmxlIikuY291bnQoKSxlPUgoIjx0cj4iKS5odG1sKCI8dGQ+IitBcnJheShlKS5qb2luKCI8L3RkPjx0ZD4iKSsiPC90ZD4iKSxuPShIKHRoaXMudGFibGUoKS5ib2R5KCkpLmFwcGVuZChlKSxlLmNoaWxkcmVuKCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIEgodGhpcykub3V0ZXJXaWR0aCgpfSkpO3JldHVybiBlLnJlbW92ZSgpLHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtlPWFlKGUsdCk7cmV0dXJuIG51bGwhPT1lP25bZV06MH0sMSl9KSxlKCJjb2x1bW5zKCkuaW5kZXhlcygpIiwiY29sdW1uKCkuaW5kZXgoKSIsZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXtyZXR1cm4idmlzaWJsZSI9PT1uP2FlKGUsdCk6dH0sMSl9KSxyKCJjb2x1bW5zLmFkanVzdCgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7ZS5jb250YWluZXJXaWR0aD0tMSxuZShlKX0sMSl9KSxyKCJjb2x1bW4uaW5kZXgoKSIsZnVuY3Rpb24oZSx0KXt2YXIgbjtpZigwIT09dGhpcy5jb250ZXh0Lmxlbmd0aClyZXR1cm4gbj10aGlzLmNvbnRleHRbMF0sImZyb21WaXNpYmxlIj09PWV8fCJ0b0RhdGEiPT09ZT9yZShuLHQpOiJmcm9tRGF0YSI9PT1lfHwidG9WaXNpYmxlIj09PWU/YWUobix0KTp2b2lkIDB9KSxyKCJjb2x1bW4oKSIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gcHQodGhpcy5jb2x1bW5zKGUsdCkpfSk7ZnVuY3Rpb24gTHQoZSx0KXtIKGUpLmZpbmQoInNwYW4uZHQtY29sdW1uLW9yZGVyIikucmVtb3ZlKCksSChlKS5maW5kKCJzcGFuLmR0LWNvbHVtbi10aXRsZSIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1IKHRoaXMpLmh0bWwoKTtIKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFwcGVuZChlKSxIKHRoaXMpLnJlbW92ZSgpfSksSChlKS5maW5kKCJkaXYuZHQtY29sdW1uLSIrdCkucmVtb3ZlKCksSCgidGgsIHRkIixlKS5yZW1vdmVBdHRyKCJkYXRhLWR0LWNvbHVtbiIpfXIoImNlbGxzKCkiLGZ1bmN0aW9uKGcsZSxtKXt2YXIgcixhLG8saSxsLHMsdDtyZXR1cm4gSC5pc1BsYWluT2JqZWN0KGcpJiYodm9pZCAwPT09Zy5yb3c/KG09ZyxnPW51bGwpOihtPWUsZT1udWxsKSksSC5pc1BsYWluT2JqZWN0KGUpJiYobT1lLGU9bnVsbCksbnVsbD09ZT90aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7cmV0dXJuIHI9ZSxlPWcsdD1odChtKSxkPXIuYW9EYXRhLGY9eHQocix0KSxuPUEodihkLGYsImFuQ2VsbHMiKSksaD1IKE0oW10sbikpLHA9ci5hb0NvbHVtbnMubGVuZ3RoLGZ0KCJjZWxsIixlLGZ1bmN0aW9uKGUpe3ZhciB0LG49ImZ1bmN0aW9uIj09dHlwZW9mIGU7aWYobnVsbD09ZXx8bil7Zm9yKG89W10saT0wLGw9Zi5sZW5ndGg7aTxsO2krKylmb3IoYT1mW2ldLHM9MDtzPHA7cysrKXU9e3JvdzphLGNvbHVtbjpzfSwoIW58fChjPWRbYV0sZSh1LHEocixhLHMpLGMuYW5DZWxscz9jLmFuQ2VsbHNbc106bnVsbCkpKSYmby5wdXNoKHUpO3JldHVybiBvfXJldHVybiBILmlzUGxhaW5PYmplY3QoZSk/dm9pZCAwIT09ZS5jb2x1bW4mJnZvaWQgMCE9PWUucm93JiYtMSE9PWYuaW5kZXhPZihlLnJvdyk/W2VdOltdOih0PWguZmlsdGVyKGUpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybntyb3c6dC5fRFRfQ2VsbEluZGV4LnJvdyxjb2x1bW46dC5fRFRfQ2VsbEluZGV4LmNvbHVtbn19KS50b0FycmF5KCkpLmxlbmd0aHx8IWUubm9kZU5hbWU/dDooYz1IKGUpLmNsb3Nlc3QoIipbZGF0YS1kdC1yb3ddIikpLmxlbmd0aD9be3JvdzpjLmRhdGEoImR0LXJvdyIpLGNvbHVtbjpjLmRhdGEoImR0LWNvbHVtbiIpfV06W119LHIsdCk7dmFyIHIsdCxhLG8saSxsLHMsdSxjLGQsZixuLGgscH0pOih0PW0/e3BhZ2U6bS5wYWdlLG9yZGVyOm0ub3JkZXIsc2VhcmNoOm0uc2VhcmNofTp7fSxyPXRoaXMuY29sdW1ucyhlLHQpLGE9dGhpcy5yb3dzKGcsdCksdD10aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtmb3Iobz0wLGk9YVt0XS5sZW5ndGg7bzxpO28rKylmb3IobD0wLHM9clt0XS5sZW5ndGg7bDxzO2wrKyluLnB1c2goe3JvdzphW3RdW29dLGNvbHVtbjpyW3RdW2xdfSk7cmV0dXJuIG59LDEpLHQ9bSYmbS5zZWxlY3RlZD90aGlzLmNlbGxzKHQsbSk6dCxILmV4dGVuZCh0LnNlbGVjdG9yLHtjb2xzOmUscm93czpnLG9wdHM6bX0pLHQpfSksZSgiY2VsbHMoKS5ub2RlcygpIiwiY2VsbCgpLm5vZGUoKSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigiY2VsbCIsZnVuY3Rpb24oZSx0LG4pe2U9ZS5hb0RhdGFbdF07cmV0dXJuIGUmJmUuYW5DZWxscz9lLmFuQ2VsbHNbbl06dm9pZCAwfSwxKX0pLHIoImNlbGxzKCkuZGF0YSgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjZWxsIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIHEoZSx0LG4pfSwxKX0pLGUoImNlbGxzKCkuY2FjaGUoKSIsImNlbGwoKS5jYWNoZSgpIixmdW5jdGlvbihyKXtyZXR1cm4gcj0ic2VhcmNoIj09PXI/Il9hRmlsdGVyRGF0YSI6Il9hU29ydERhdGEiLHRoaXMuaXRlcmF0b3IoImNlbGwiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5hb0RhdGFbdF1bcl1bbl19LDEpfSksZSgiY2VsbHMoKS5yZW5kZXIoKSIsImNlbGwoKS5yZW5kZXIoKSIsZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNlbGwiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcShlLHQsbixyKX0sMSl9KSxlKCJjZWxscygpLmluZGV4ZXMoKSIsImNlbGwoKS5pbmRleCgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjZWxsIixmdW5jdGlvbihlLHQsbil7cmV0dXJue3Jvdzp0LGNvbHVtbjpuLGNvbHVtblZpc2libGU6YWUoZSxuKX19LDEpfSksZSgiY2VsbHMoKS5pbnZhbGlkYXRlKCkiLCJjZWxsKCkuaW52YWxpZGF0ZSgpIixmdW5jdGlvbihyKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigiY2VsbCIsZnVuY3Rpb24oZSx0LG4pe2JlKGUsdCxyLG4pfSl9KSxyKCJjZWxsKCkiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcHQodGhpcy5jZWxscyhlLHQsbikpfSkscigiY2VsbCgpLmRhdGEoKSIsZnVuY3Rpb24oZSl7dmFyIHQsbixyLGEsbyxpPXRoaXMuY29udGV4dCxsPXRoaXNbMF07cmV0dXJuIHZvaWQgMD09PWU/aS5sZW5ndGgmJmwubGVuZ3RoP3EoaVswXSxsWzBdLnJvdyxsWzBdLmNvbHVtbik6dm9pZCAwOih0PWlbMF0sbj1sWzBdLnJvdyxyPWxbMF0uY29sdW1uLGE9dC5hb0NvbHVtbnNbcl0sbz10LmFvRGF0YVtuXS5fYURhdGEsYS5mblNldERhdGEobyxlLHtzZXR0aW5nczp0LHJvdzpuLGNvbDpyfSksYmUoaVswXSxsWzBdLnJvdywiZGF0YSIsbFswXS5jb2x1bW4pLHRoaXMpfSkscigib3JkZXIoKSIsZnVuY3Rpb24obixlKXt2YXIgdD10aGlzLmNvbnRleHQscj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiB2b2lkIDA9PT1uPzAhPT10Lmxlbmd0aD90WzBdLmFhU29ydGluZzp2b2lkIDA6KCJudW1iZXIiPT10eXBlb2Ygbj9uPVtbbixlXV06MTxyLmxlbmd0aCYmKG49ciksdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3ZhciB0PVtdO2coZSx0LG4pLGUuYWFTb3J0aW5nPXR9KSl9KSxyKCJvcmRlci5saXN0ZW5lcigpIixmdW5jdGlvbih0LG4scil7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtZZShlLHQse30sbixyKX0pfSkscigib3JkZXIuZml4ZWQoKSIsZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHQ/dGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe2UuYWFTb3J0aW5nRml4ZWQ9SC5leHRlbmQoITAse30sdCl9KTooZT0oZT10aGlzLmNvbnRleHQpLmxlbmd0aD9lWzBdLmFhU29ydGluZ0ZpeGVkOnZvaWQgMCxBcnJheS5pc0FycmF5KGUpP3twcmU6ZX06ZSl9KSxyKFsiY29sdW1ucygpLm9yZGVyKCkiLCJjb2x1bW4oKS5vcmRlcigpIl0sZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gbj90aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSx0KXtlLmFhU29ydGluZz1yW3RdLm1hcChmdW5jdGlvbihlKXtyZXR1cm5bZSxuXX0pfSk6dGhpcy5pdGVyYXRvcigiY29sdW1uIixmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1KZShlKSxyPTAsYT1uLmxlbmd0aDtyPGE7cisrKWlmKG5bcl0uY29sPT09dClyZXR1cm4gbltyXS5kaXI7cmV0dXJuIG51bGx9LDEpfSksZSgiY29sdW1ucygpLm9yZGVyYWJsZSgpIiwiY29sdW1uKCkub3JkZXJhYmxlKCkiLGZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLml0ZXJhdG9yKCJjb2x1bW4iLGZ1bmN0aW9uKGUsdCl7ZT1lLmFvQ29sdW1uc1t0XTtyZXR1cm4gbj9lLmFzU29ydGluZzplLmJTb3J0YWJsZX0sMSl9KSxyKCJwcm9jZXNzaW5nKCkiLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7SShlLHQpfSl9KSxyKCJzZWFyY2goKSIsZnVuY3Rpb24odCxuLHIsYSl7dmFyIGU9dGhpcy5jb250ZXh0O3JldHVybiB2b2lkIDA9PT10PzAhPT1lLmxlbmd0aD9lWzBdLm9QcmV2aW91c1NlYXJjaC5zZWFyY2g6dm9pZCAwOnRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtlLm9GZWF0dXJlcy5iRmlsdGVyJiZSZShlLCJvYmplY3QiPT10eXBlb2Ygbj9ILmV4dGVuZChlLm9QcmV2aW91c1NlYXJjaCxuLHtzZWFyY2g6dH0pOkguZXh0ZW5kKGUub1ByZXZpb3VzU2VhcmNoLHtzZWFyY2g6dCxyZWdleDpudWxsIT09biYmbixzbWFydDpudWxsPT09cnx8cixjYXNlSW5zZW5zaXRpdmU6bnVsbD09PWF8fGF9KSl9KX0pLHIoInNlYXJjaC5maXhlZCgpIixmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXMuaXRlcmF0b3IoITAsInRhYmxlIixmdW5jdGlvbihlKXtlPWUuc2VhcmNoRml4ZWQ7cmV0dXJuIHQ/dm9pZCAwPT09bj9lW3RdOihudWxsPT09bj9kZWxldGUgZVt0XTplW3RdPW4sdGhpcyk6T2JqZWN0LmtleXMoZSl9KTtyZXR1cm4gdm9pZCAwIT09dCYmdm9pZCAwPT09bj9lWzBdOmV9KSxlKCJjb2x1bW5zKCkuc2VhcmNoKCkiLCJjb2x1bW4oKS5zZWFyY2goKSIsZnVuY3Rpb24ocixhLG8saSl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImNvbHVtbiIsZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmFvUHJlU2VhcmNoQ29scztpZih2b2lkIDA9PT1yKXJldHVybiBuW3RdLnNlYXJjaDtlLm9GZWF0dXJlcy5iRmlsdGVyJiYoIm9iamVjdCI9PXR5cGVvZiBhP0guZXh0ZW5kKG5bdF0sYSx7c2VhcmNoOnJ9KTpILmV4dGVuZChuW3RdLHtzZWFyY2g6cixyZWdleDpudWxsIT09YSYmYSxzbWFydDpudWxsPT09b3x8byxjYXNlSW5zZW5zaXRpdmU6bnVsbD09PWl8fGl9KSxSZShlLGUub1ByZXZpb3VzU2VhcmNoKSl9KX0pLHIoWyJjb2x1bW5zKCkuc2VhcmNoLmZpeGVkKCkiLCJjb2x1bW4oKS5zZWFyY2guZml4ZWQoKSJdLGZ1bmN0aW9uKG4scil7dmFyIGU9dGhpcy5pdGVyYXRvcighMCwiY29sdW1uIixmdW5jdGlvbihlLHQpe2U9ZS5hb0NvbHVtbnNbdF0uc2VhcmNoRml4ZWQ7cmV0dXJuIG4/dm9pZCAwPT09cj9lW25dfHxudWxsOihudWxsPT09cj9kZWxldGUgZVtuXTplW25dPXIsdGhpcyk6T2JqZWN0LmtleXMoZSl9KTtyZXR1cm4gdm9pZCAwIT09biYmdm9pZCAwPT09cj9lWzBdOmV9KSxyKCJzdGF0ZSgpIixmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBlPyhuPUguZXh0ZW5kKCEwLHt9LGUpLHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXshMSE9PXQmJihuLnRpbWU9K25ldyBEYXRlKzEwMCksZXQoZSxuLGZ1bmN0aW9uKCl7fSl9KSk6dGhpcy5jb250ZXh0Lmxlbmd0aD90aGlzLmNvbnRleHRbMF0ub1NhdmVkU3RhdGU6bnVsbH0pLHIoInN0YXRlLmNsZWFyKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtlLmZuU3RhdGVTYXZlQ2FsbGJhY2suY2FsbChlLm9JbnN0YW5jZSxlLHt9KX0pfSkscigic3RhdGUubG9hZGVkKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5sZW5ndGg/dGhpcy5jb250ZXh0WzBdLm9Mb2FkZWRTdGF0ZTpudWxsfSkscigic3RhdGUuc2F2ZSgpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZXJhdG9yKCJ0YWJsZSIsZnVuY3Rpb24oZSl7S2UoZSl9KX0pLFYudXNlPWZ1bmN0aW9uKGUsdCl7dmFyIG49InN0cmluZyI9PXR5cGVvZiBlP3Q6ZSx0PSJzdHJpbmciPT10eXBlb2YgdD90OmU7aWYodm9pZCAwPT09biYmInN0cmluZyI9PXR5cGVvZiB0KXN3aXRjaCh0KXtjYXNlImxpYiI6Y2FzZSJqcSI6cmV0dXJuIEg7Y2FzZSJ3aW4iOnJldHVybiBXO2Nhc2UiZGF0ZXRpbWUiOnJldHVybiBWLkRhdGVUaW1lO2Nhc2UibHV4b24iOnJldHVybiBvO2Nhc2UibW9tZW50IjpyZXR1cm4gaTtjYXNlImJvb3RzdHJhcCI6cmV0dXJuIHl0fHxXLmJvb3RzdHJhcDtjYXNlImZvdW5kYXRpb24iOnJldHVybiBEdHx8Vy5Gb3VuZGF0aW9uO2RlZmF1bHQ6cmV0dXJuIG51bGx9ImxpYiI9PT10fHwianEiPT09dHx8biYmbi5mbiYmbi5mbi5qcXVlcnk/SD1uOiJ3aW4iPT09dHx8biYmbi5kb2N1bWVudD9TPShXPW4pLmRvY3VtZW50OiJkYXRldGltZSI9PT10fHxuJiYiRGF0ZVRpbWUiPT09bi50eXBlP1YuRGF0ZVRpbWU9bjoibHV4b24iPT09dHx8biYmbi5GaXhlZE9mZnNldFpvbmU/bz1uOiJtb21lbnQiPT09dHx8biYmbi5pc01vbWVudD9pPW46ImJvb3RzdHJhcCI9PT10fHxuJiZuLk1vZGFsJiYibW9kYWwiPT09bi5Nb2RhbC5OQU1FP3l0PW46KCJmb3VuZGF0aW9uIj09PXR8fG4mJm4uUmV2ZWFsKSYmKER0PW4pfSxWLmZhY3Rvcnk9ZnVuY3Rpb24oZSx0KXt2YXIgbj0hMTtyZXR1cm4gZSYmZS5kb2N1bWVudCYmKFM9KFc9ZSkuZG9jdW1lbnQpLHQmJnQuZm4mJnQuZm4uanF1ZXJ5JiYoSD10LG49ITApLG59LFYudmVyc2lvbkNoZWNrPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLHIsYT0odHx8Vi52ZXJzaW9uKS5zcGxpdCgiLiIpLG89ZS5zcGxpdCgiLiIpLGk9MCxsPW8ubGVuZ3RoO2k8bDtpKyspaWYoKG49cGFyc2VJbnQoYVtpXSwxMCl8fDApIT09KHI9cGFyc2VJbnQob1tpXSwxMCl8fDApKXJldHVybiByPG47cmV0dXJuITB9LFYuaXNEYXRhVGFibGU9ZnVuY3Rpb24oZSl7dmFyIGE9SChlKS5nZXQoMCksbz0hMTtyZXR1cm4gZSBpbnN0YW5jZW9mIFYuQXBpfHwoSC5lYWNoKFYuc2V0dGluZ3MsZnVuY3Rpb24oZSx0KXt2YXIgbj10Lm5TY3JvbGxIZWFkP0goInRhYmxlIix0Lm5TY3JvbGxIZWFkKVswXTpudWxsLHI9dC5uU2Nyb2xsRm9vdD9IKCJ0YWJsZSIsdC5uU2Nyb2xsRm9vdClbMF06bnVsbDt0Lm5UYWJsZSE9PWEmJm4hPT1hJiZyIT09YXx8KG89ITApfSksbyl9LFYudGFibGVzPWZ1bmN0aW9uKHQpe3ZhciBlPSExLG49KEguaXNQbGFpbk9iamVjdCh0KSYmKGU9dC5hcGksdD10LnZpc2libGUpLFYuc2V0dGluZ3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEodCYmIUgoZS5uVGFibGUpLmlzKCI6dmlzaWJsZSIpKX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5uVGFibGV9KSk7cmV0dXJuIGU/bmV3IFgobik6bn0sVi5jYW1lbFRvSHVuZ2FyaWFuPUIscigiJCgpIixmdW5jdGlvbihlLHQpe3Q9dGhpcy5yb3dzKHQpLm5vZGVzKCksdD1IKHQpO3JldHVybiBIKFtdLmNvbmNhdCh0LmZpbHRlcihlKS50b0FycmF5KCksdC5maW5kKGUpLnRvQXJyYXkoKSkpfSksSC5lYWNoKFsib24iLCJvbmUiLCJvZmYiXSxmdW5jdGlvbihlLG4pe3IobisiKCkiLGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0PShlWzBdPWVbMF0uc3BsaXQoL1xzLykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1hdGNoKC9cLmR0XGIvKT9lOmUrIi5kdCJ9KS5qb2luKCIgIiksSCh0aGlzLnRhYmxlcygpLm5vZGVzKCkpKTtyZXR1cm4gdFtuXS5hcHBseSh0LGUpLHRoaXN9KX0pLHIoImNsZWFyKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXt2ZShlKX0pfSkscigiZXJyb3IoKSIsZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXt6KGUsMCx0KX0pfSkscigic2V0dGluZ3MoKSIsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LHRoaXMuY29udGV4dCl9KSxyKCJpbml0KCkiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0O3JldHVybiBlLmxlbmd0aD9lWzBdLm9Jbml0Om51bGx9KSxyKCJkYXRhKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlcmF0b3IoInRhYmxlIixmdW5jdGlvbihlKXtyZXR1cm4gYihlLmFvRGF0YSwiX2FEYXRhIil9KS5mbGF0dGVuKCl9KSxyKCJ0cmlnZ2VyKCkiLGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3JldHVybiBHKGUsbnVsbCx0LG4scil9KS5mbGF0dGVuKCl9KSxyKCJyZWFkeSgpIixmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRleHQ7cmV0dXJuIHQ/dGhpcy50YWJsZXMoKS5ldmVyeShmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5jb250ZXh0WzBdLl9iSW5pdENvbXBsZXRlP3QuY2FsbChlKTp0aGlzLm9uKCJpbml0LmR0LkRUIixmdW5jdGlvbigpe3QuY2FsbChlKX0pfSk6ZS5sZW5ndGg/ZVswXS5fYkluaXRDb21wbGV0ZXx8ITE6bnVsbH0pLHIoImRlc3Ryb3koKSIsZnVuY3Rpb24oYyl7cmV0dXJuIGM9Y3x8ITEsdGhpcy5pdGVyYXRvcigidGFibGUiLGZ1bmN0aW9uKGUpe3ZhciB0PWUub0NsYXNzZXMsbj1lLm5UYWJsZSxyPWUublRCb2R5LGE9ZS5uVEhlYWQsbz1lLm5URm9vdCxpPUgobikscj1IKHIpLGw9SChlLm5UYWJsZVdyYXBwZXIpLHM9ZS5hb0RhdGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlP2UublRyOm51bGx9KSx1PXQub3JkZXIsbz0oZS5iRGVzdHJveWluZz0hMCxHKGUsImFvRGVzdHJveUNhbGxiYWNrIiwiZGVzdHJveSIsW2VdLCEwKSxjfHxuZXcgWChlKS5jb2x1bW5zKCkudmlzaWJsZSghMCksZS5yZXNpemVPYnNlcnZlciYmZS5yZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCksbC5vZmYoIi5EVCIpLmZpbmQoIjpub3QodGJvZHkgKikiKS5vZmYoIi5EVCIpLEgoVykub2ZmKCIuRFQtIitlLnNJbnN0YW5jZSksbiE9YS5wYXJlbnROb2RlJiYoaS5jaGlsZHJlbigidGhlYWQiKS5kZXRhY2goKSxpLmFwcGVuZChhKSksbyYmbiE9by5wYXJlbnROb2RlJiYoaS5jaGlsZHJlbigidGZvb3QiKS5kZXRhY2goKSxpLmFwcGVuZChvKSksTHQoYSwiaGVhZGVyIiksTHQobywiZm9vdGVyIiksZS5jb2xncm91cC5yZW1vdmUoKSxlLmFhU29ydGluZz1bXSxlLmFhU29ydGluZ0ZpeGVkPVtdLFFlKGUpLEgoaSkuZmluZCgidGgsIHRkIikucmVtb3ZlQ2xhc3MoSC5tYXAoVi5leHQudHlwZS5jbGFzc05hbWUsZnVuY3Rpb24oZSl7cmV0dXJuIGV9KS5qb2luKCIgIikpLEgoInRoLCB0ZCIsYSkucmVtb3ZlQ2xhc3ModS5ub25lKyIgIit1LmNhbkFzYysiICIrdS5jYW5EZXNjKyIgIit1LmlzQXNjKyIgIit1LmlzRGVzYykuY3NzKCJ3aWR0aCIsIiIpLnJlbW92ZUF0dHIoImFyaWEtc29ydCIpLHIuY2hpbGRyZW4oKS5kZXRhY2goKSxyLmFwcGVuZChzKSxlLm5UYWJsZVdyYXBwZXIucGFyZW50Tm9kZSksYT1lLm5UYWJsZVdyYXBwZXIubmV4dFNpYmxpbmcsdT1jPyJyZW1vdmUiOiJkZXRhY2giLHI9KGlbdV0oKSxsW3VdKCksIWMmJm8mJihvLmluc2VydEJlZm9yZShuLGEpLGkuY3NzKCJ3aWR0aCIsZS5zRGVzdHJveVdpZHRoKS5yZW1vdmVDbGFzcyh0LnRhYmxlKSksVi5zZXR0aW5ncy5pbmRleE9mKGUpKTstMSE9PXImJlYuc2V0dGluZ3Muc3BsaWNlKHIsMSl9KX0pLEguZWFjaChbImNvbHVtbiIsInJvdyIsImNlbGwiXSxmdW5jdGlvbihlLHMpe3IocysicygpLmV2ZXJ5KCkiLGZ1bmN0aW9uKHIpe3ZhciBhLG89dGhpcy5zZWxlY3Rvci5vcHRzLGk9dGhpcyxsPTA7cmV0dXJuIHRoaXMuaXRlcmF0b3IoImV2ZXJ5IixmdW5jdGlvbihlLHQsbil7YT1pW3NdKHQsbyksImNlbGwiPT09cz9yLmNhbGwoYSxhWzBdWzBdLnJvdyxhWzBdWzBdLmNvbHVtbixuLGwpOnIuY2FsbChhLHQsbixsKSxsKyt9KX0pfSkscigiaTE4bigpIixmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5jb250ZXh0WzBdLGU9VShlKShyLm9MYW5ndWFnZSk7cmV0dXJuInN0cmluZyI9PXR5cGVvZihlPUguaXNQbGFpbk9iamVjdChlPXZvaWQgMD09PWU/dDplKT92b2lkIDAhPT1uJiZ2b2lkIDAhPT1lW25dP2Vbbl06ZS5fOmUpP2UucmVwbGFjZSgiJWQiLG4pOmV9KSxWLnZlcnNpb249IjIuMy4yIixWLnNldHRpbmdzPVtdLFYubW9kZWxzPXt9LFYubW9kZWxzLm9TZWFyY2g9e2Nhc2VJbnNlbnNpdGl2ZTohMCxzZWFyY2g6IiIscmVnZXg6ITEsc21hcnQ6ITAscmV0dXJuOiExfSxWLm1vZGVscy5vUm93PXtuVHI6bnVsbCxhbkNlbGxzOm51bGwsX2FEYXRhOltdLF9hU29ydERhdGE6bnVsbCxfYUZpbHRlckRhdGE6bnVsbCxfc0ZpbHRlclJvdzpudWxsLHNyYzpudWxsLGlkeDotMSxkaXNwbGF5RGF0YTpudWxsfSxWLm1vZGVscy5vQ29sdW1uPXtpZHg6bnVsbCxhRGF0YVNvcnQ6bnVsbCxhc1NvcnRpbmc6bnVsbCxiU2VhcmNoYWJsZTpudWxsLGJTb3J0YWJsZTpudWxsLGJWaXNpYmxlOm51bGwsX3NNYW51YWxUeXBlOm51bGwsX2JBdHRyU3JjOiExLGZuQ3JlYXRlZENlbGw6bnVsbCxmbkdldERhdGE6bnVsbCxmblNldERhdGE6bnVsbCxtRGF0YTpudWxsLG1SZW5kZXI6bnVsbCxzQ2xhc3M6bnVsbCxzQ29udGVudFBhZGRpbmc6bnVsbCxzRGVmYXVsdENvbnRlbnQ6bnVsbCxzTmFtZTpudWxsLHNTb3J0RGF0YVR5cGU6InN0ZCIsc1NvcnRpbmdDbGFzczpudWxsLHNUaXRsZTpudWxsLHNUeXBlOm51bGwsc1dpZHRoOm51bGwsc1dpZHRoT3JpZzpudWxsLG1heExlblN0cmluZzpudWxsLHNlYXJjaEZpeGVkOm51bGx9LFYuZGVmYXVsdHM9e2FhRGF0YTpudWxsLGFhU29ydGluZzpbWzAsImFzYyJdXSxhYVNvcnRpbmdGaXhlZDpbXSxhamF4Om51bGwsYUxlbmd0aE1lbnU6WzEwLDI1LDUwLDEwMF0sYW9Db2x1bW5zOm51bGwsYW9Db2x1bW5EZWZzOm51bGwsYW9TZWFyY2hDb2xzOltdLGJBdXRvV2lkdGg6ITAsYkRlZmVyUmVuZGVyOiEwLGJEZXN0cm95OiExLGJGaWx0ZXI6ITAsYkluZm86ITAsYkxlbmd0aENoYW5nZTohMCxiUGFnaW5hdGU6ITAsYlByb2Nlc3Npbmc6ITEsYlJldHJpZXZlOiExLGJTY3JvbGxDb2xsYXBzZTohMSxiU2VydmVyU2lkZTohMSxiU29ydDohMCxiU29ydE11bHRpOiEwLGJTb3J0Q2VsbHNUb3A6bnVsbCx0aXRsZVJvdzpudWxsLGJTb3J0Q2xhc3NlczohMCxiU3RhdGVTYXZlOiExLGZuQ3JlYXRlZFJvdzpudWxsLGZuRHJhd0NhbGxiYWNrOm51bGwsZm5Gb290ZXJDYWxsYmFjazpudWxsLGZuRm9ybWF0TnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRvU3RyaW5nKCkucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZyx0aGlzLm9MYW5ndWFnZS5zVGhvdXNhbmRzKX0sZm5IZWFkZXJDYWxsYmFjazpudWxsLGZuSW5mb0NhbGxiYWNrOm51bGwsZm5Jbml0Q29tcGxldGU6bnVsbCxmblByZURyYXdDYWxsYmFjazpudWxsLGZuUm93Q2FsbGJhY2s6bnVsbCxmblN0YXRlTG9hZENhbGxiYWNrOmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZSgoLTE9PT1lLmlTdGF0ZUR1cmF0aW9uP3Nlc3Npb25TdG9yYWdlOmxvY2FsU3RvcmFnZSkuZ2V0SXRlbSgiRGF0YVRhYmxlc18iK2Uuc0luc3RhbmNlKyJfIitsb2NhdGlvbi5wYXRobmFtZSkpfWNhdGNoKGUpe3JldHVybnt9fX0sZm5TdGF0ZUxvYWRQYXJhbXM6bnVsbCxmblN0YXRlTG9hZGVkOm51bGwsZm5TdGF0ZVNhdmVDYWxsYmFjazpmdW5jdGlvbihlLHQpe3RyeXsoLTE9PT1lLmlTdGF0ZUR1cmF0aW9uP3Nlc3Npb25TdG9yYWdlOmxvY2FsU3RvcmFnZSkuc2V0SXRlbSgiRGF0YVRhYmxlc18iK2Uuc0luc3RhbmNlKyJfIitsb2NhdGlvbi5wYXRobmFtZSxKU09OLnN0cmluZ2lmeSh0KSl9Y2F0Y2goZSl7fX0sZm5TdGF0ZVNhdmVQYXJhbXM6bnVsbCxpU3RhdGVEdXJhdGlvbjo3MjAwLGlEaXNwbGF5TGVuZ3RoOjEwLGlEaXNwbGF5U3RhcnQ6MCxpVGFiSW5kZXg6MCxvQ2xhc3Nlczp7fSxvTGFuZ3VhZ2U6e29BcmlhOntvcmRlcmFibGU6IjogQWN0aXZhdGUgdG8gc29ydCIsb3JkZXJhYmxlUmV2ZXJzZToiOiBBY3RpdmF0ZSB0byBpbnZlcnQgc29ydGluZyIsb3JkZXJhYmxlUmVtb3ZlOiI6IEFjdGl2YXRlIHRvIHJlbW92ZSBzb3J0aW5nIixwYWdpbmF0ZTp7Zmlyc3Q6IkZpcnN0IixsYXN0OiJMYXN0IixuZXh0OiJOZXh0IixwcmV2aW91czoiUHJldmlvdXMiLG51bWJlcjoiIn19LG9QYWdpbmF0ZTp7c0ZpcnN0OiLCqyIsc0xhc3Q6IsK7IixzTmV4dDoi4oC6IixzUHJldmlvdXM6IuKAuSJ9LGVudHJpZXM6e186ImVudHJpZXMiLDE6ImVudHJ5In0sbGVuZ3RoTGFiZWxzOnsiLTEiOiJBbGwifSxzRW1wdHlUYWJsZToiTm8gZGF0YSBhdmFpbGFibGUgaW4gdGFibGUiLHNJbmZvOiJTaG93aW5nIF9TVEFSVF8gdG8gX0VORF8gb2YgX1RPVEFMXyBfRU5UUklFUy1UT1RBTF8iLHNJbmZvRW1wdHk6IlNob3dpbmcgMCB0byAwIG9mIDAgX0VOVFJJRVMtVE9UQUxfIixzSW5mb0ZpbHRlcmVkOiIoZmlsdGVyZWQgZnJvbSBfTUFYXyB0b3RhbCBfRU5UUklFUy1NQVhfKSIsc0luZm9Qb3N0Rml4OiIiLHNEZWNpbWFsOiIiLHNUaG91c2FuZHM6IiwiLHNMZW5ndGhNZW51OiJfTUVOVV8gX0VOVFJJRVNfIHBlciBwYWdlIixzTG9hZGluZ1JlY29yZHM6IkxvYWRpbmcuLi4iLHNQcm9jZXNzaW5nOiIiLHNTZWFyY2g6IlNlYXJjaDoiLHNTZWFyY2hQbGFjZWhvbGRlcjoiIixzVXJsOiIiLHNaZXJvUmVjb3JkczoiTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCJ9LG9yZGVyRGVzY1JldmVyc2U6ITAsb1NlYXJjaDpILmV4dGVuZCh7fSxWLm1vZGVscy5vU2VhcmNoKSxsYXlvdXQ6e3RvcFN0YXJ0OiJwYWdlTGVuZ3RoIix0b3BFbmQ6InNlYXJjaCIsYm90dG9tU3RhcnQ6ImluZm8iLGJvdHRvbUVuZDoicGFnaW5nIn0sc0RvbTpudWxsLHNlYXJjaERlbGF5Om51bGwsc1BhZ2luYXRpb25UeXBlOiIiLHNTY3JvbGxYOiIiLHNTY3JvbGxYSW5uZXI6IiIsc1Njcm9sbFk6IiIsc1NlcnZlck1ldGhvZDoiR0VUIixyZW5kZXJlcjpudWxsLHJvd0lkOiJEVF9Sb3dJZCIsY2FwdGlvbjpudWxsLGlEZWZlckxvYWRpbmc6bnVsbCxvbjpudWxsfSxaKFYuZGVmYXVsdHMpLFYuZGVmYXVsdHMuY29sdW1uPXthRGF0YVNvcnQ6bnVsbCxpRGF0YVNvcnQ6LTEsYXJpYVRpdGxlOiIiLGFzU29ydGluZzpbImFzYyIsImRlc2MiLCIiXSxiU2VhcmNoYWJsZTohMCxiU29ydGFibGU6ITAsYlZpc2libGU6ITAsZm5DcmVhdGVkQ2VsbDpudWxsLG1EYXRhOm51bGwsbVJlbmRlcjpudWxsLHNDZWxsVHlwZToidGQiLHNDbGFzczoiIixzQ29udGVudFBhZGRpbmc6IiIsc0RlZmF1bHRDb250ZW50Om51bGwsc05hbWU6IiIsc1NvcnREYXRhVHlwZToic3RkIixzVGl0bGU6bnVsbCxzVHlwZTpudWxsLHNXaWR0aDpudWxsfSxaKFYuZGVmYXVsdHMuY29sdW1uKSxWLm1vZGVscy5vU2V0dGluZ3M9e29GZWF0dXJlczp7YkF1dG9XaWR0aDpudWxsLGJEZWZlclJlbmRlcjpudWxsLGJGaWx0ZXI6bnVsbCxiSW5mbzohMCxiTGVuZ3RoQ2hhbmdlOiEwLGJQYWdpbmF0ZTpudWxsLGJQcm9jZXNzaW5nOm51bGwsYlNlcnZlclNpZGU6bnVsbCxiU29ydDpudWxsLGJTb3J0TXVsdGk6bnVsbCxiU29ydENsYXNzZXM6bnVsbCxiU3RhdGVTYXZlOm51bGx9LG9TY3JvbGw6e2JDb2xsYXBzZTpudWxsLGlCYXJXaWR0aDowLHNYOm51bGwsc1hJbm5lcjpudWxsLHNZOm51bGx9LG9MYW5ndWFnZTp7Zm5JbmZvQ2FsbGJhY2s6bnVsbH0sb0Jyb3dzZXI6e2JTY3JvbGxiYXJMZWZ0OiExLGJhcldpZHRoOjB9LGFqYXg6bnVsbCxhYW5GZWF0dXJlczpbXSxhb0RhdGE6W10sYWlEaXNwbGF5OltdLGFpRGlzcGxheU1hc3RlcjpbXSxhSWRzOnt9LGFvQ29sdW1uczpbXSxhb0hlYWRlcjpbXSxhb0Zvb3RlcjpbXSxvUHJldmlvdXNTZWFyY2g6e30sc2VhcmNoRml4ZWQ6e30sYW9QcmVTZWFyY2hDb2xzOltdLGFhU29ydGluZzpudWxsLGFhU29ydGluZ0ZpeGVkOltdLHNEZXN0cm95V2lkdGg6MCxhb1Jvd0NhbGxiYWNrOltdLGFvSGVhZGVyQ2FsbGJhY2s6W10sYW9Gb290ZXJDYWxsYmFjazpbXSxhb0RyYXdDYWxsYmFjazpbXSxhb1Jvd0NyZWF0ZWRDYWxsYmFjazpbXSxhb1ByZURyYXdDYWxsYmFjazpbXSxhb0luaXRDb21wbGV0ZTpbXSxhb1N0YXRlU2F2ZVBhcmFtczpbXSxhb1N0YXRlTG9hZFBhcmFtczpbXSxhb1N0YXRlTG9hZGVkOltdLHNUYWJsZUlkOiIiLG5UYWJsZTpudWxsLG5USGVhZDpudWxsLG5URm9vdDpudWxsLG5UQm9keTpudWxsLG5UYWJsZVdyYXBwZXI6bnVsbCxiSW5pdGlhbGlzZWQ6ITEsYW9PcGVuUm93czpbXSxzRG9tOm51bGwsc2VhcmNoRGVsYXk6bnVsbCxzUGFnaW5hdGlvblR5cGU6InR3b19idXR0b24iLHBhZ2luZ0NvbnRyb2xzOjAsaVN0YXRlRHVyYXRpb246MCxhb1N0YXRlU2F2ZTpbXSxhb1N0YXRlTG9hZDpbXSxvU2F2ZWRTdGF0ZTpudWxsLG9Mb2FkZWRTdGF0ZTpudWxsLGJBamF4RGF0YUdldDohMCxqcVhIUjpudWxsLGpzb246dm9pZCAwLG9BamF4RGF0YTp2b2lkIDAsc1NlcnZlck1ldGhvZDpudWxsLGZuRm9ybWF0TnVtYmVyOm51bGwsYUxlbmd0aE1lbnU6bnVsbCxpRHJhdzowLGJEcmF3aW5nOiExLGlEcmF3RXJyb3I6LTEsX2lEaXNwbGF5TGVuZ3RoOjEwLF9pRGlzcGxheVN0YXJ0OjAsX2lSZWNvcmRzVG90YWw6MCxfaVJlY29yZHNEaXNwbGF5OjAsb0NsYXNzZXM6e30sYkZpbHRlcmVkOiExLGJTb3J0ZWQ6ITEsYlNvcnRDZWxsc1RvcDpudWxsLG9Jbml0Om51bGwsYW9EZXN0cm95Q2FsbGJhY2s6W10sZm5SZWNvcmRzVG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4ic3NwIj09Sih0aGlzKT8rdGhpcy5faVJlY29yZHNUb3RhbDp0aGlzLmFpRGlzcGxheU1hc3Rlci5sZW5ndGh9LGZuUmVjb3Jkc0Rpc3BsYXk6ZnVuY3Rpb24oKXtyZXR1cm4ic3NwIj09Sih0aGlzKT8rdGhpcy5faVJlY29yZHNEaXNwbGF5OnRoaXMuYWlEaXNwbGF5Lmxlbmd0aH0sZm5EaXNwbGF5RW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5faURpc3BsYXlMZW5ndGgsdD10aGlzLl9pRGlzcGxheVN0YXJ0LG49dCtlLHI9dGhpcy5haURpc3BsYXkubGVuZ3RoLGE9dGhpcy5vRmVhdHVyZXMsbz1hLmJQYWdpbmF0ZTtyZXR1cm4gYS5iU2VydmVyU2lkZT8hMT09PW98fC0xPT09ZT90K3I6TWF0aC5taW4odCtlLHRoaXMuX2lSZWNvcmRzRGlzcGxheSk6IW98fHI8bnx8LTE9PT1lP3I6bn0sb0luc3RhbmNlOm51bGwsc0luc3RhbmNlOm51bGwsaVRhYkluZGV4OjAsblNjcm9sbEhlYWQ6bnVsbCxuU2Nyb2xsRm9vdDpudWxsLGFMYXN0U29ydDpbXSxvUGx1Z2luczp7fSxyb3dJZEZuOm51bGwscm93SWQ6bnVsbCxjYXB0aW9uOiIiLGNhcHRpb25Ob2RlOm51bGwsY29sZ3JvdXA6bnVsbCxkZWZlckxvYWRpbmc6bnVsbCx0eXBlRGV0ZWN0OiEwLHJlc2l6ZU9ic2VydmVyOm51bGwsY29udGFpbmVyV2lkdGg6LTEsb3JkZXJEZXNjUmV2ZXJzZTpudWxsLG9yZGVySW5kaWNhdG9yczohMCxvcmRlckhhbmRsZXI6ITAsdGl0bGVSb3c6bnVsbH07ZnVuY3Rpb24gQXQodCxuKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIF8oZSl8fCJzdHJpbmciIT10eXBlb2YgZXx8KGU9ZS5yZXBsYWNlKE4sIiAiKSx0JiYoZT13KGUpKSxuJiYoZT1rKGUsITEpKSksZX19Q3Q9Vi5leHQucGFnZXI7SC5leHRlbmQoQ3Qse3NpbXBsZTpmdW5jdGlvbigpe3JldHVyblsicHJldmlvdXMiLCJuZXh0Il19LGZ1bGw6ZnVuY3Rpb24oKXtyZXR1cm5bImZpcnN0IiwicHJldmlvdXMiLCJuZXh0IiwibGFzdCJdfSxudW1iZXJzOmZ1bmN0aW9uKCl7cmV0dXJuWyJudW1iZXJzIl19LHNpbXBsZV9udW1iZXJzOmZ1bmN0aW9uKCl7cmV0dXJuWyJwcmV2aW91cyIsIm51bWJlcnMiLCJuZXh0Il19LGZ1bGxfbnVtYmVyczpmdW5jdGlvbigpe3JldHVyblsiZmlyc3QiLCJwcmV2aW91cyIsIm51bWJlcnMiLCJuZXh0IiwibGFzdCJdfSxmaXJzdF9sYXN0OmZ1bmN0aW9uKCl7cmV0dXJuWyJmaXJzdCIsImxhc3QiXX0sZmlyc3RfbGFzdF9udW1iZXJzOmZ1bmN0aW9uKCl7cmV0dXJuWyJmaXJzdCIsIm51bWJlcnMiLCJsYXN0Il19LF9udW1iZXJzOnF0LG51bWJlcnNfbGVuZ3RoOjd9KSxILmV4dGVuZCghMCxWLmV4dC5yZW5kZXJlcix7cGFnaW5nQnV0dG9uOntfOmZ1bmN0aW9uKGUsdCxuLHIsYSl7dmFyIGU9ZS5vQ2xhc3Nlcy5wYWdpbmcsbz1bZS5idXR0b25dO3JldHVybiByJiZvLnB1c2goZS5hY3RpdmUpLGEmJm8ucHVzaChlLmRpc2FibGVkKSx7ZGlzcGxheTpyPSJlbGxpcHNpcyI9PT10P0goJzxzcGFuIGNsYXNzPSJlbGxpcHNpcyI+PC9zcGFuPicpLmh0bWwobilbMF06SCgiPGJ1dHRvbj4iLHtjbGFzczpvLmpvaW4oIiAiKSxyb2xlOiJsaW5rIix0eXBlOiJidXR0b24ifSkuaHRtbChuKSxjbGlja2VyOnJ9fX0scGFnaW5nQ29udGFpbmVyOntfOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9fX0pO2Z1bmN0aW9uIE50KGUsdCxuLHIsYSl7cmV0dXJuIGk/ZVt0XShhKTpvP2Vbbl0oYSk6cj9lW3JdKGEpOmV9dmFyIG8saSxGdD0hMTtmdW5jdGlvbiBPdChlLHQsbil7dmFyIHI7aWYoVy5sdXhvbiYmIW8mJihvPVcubHV4b24pLGk9Vy5tb21lbnQmJiFpP1cubW9tZW50Omkpe2lmKCEocj1pLnV0YyhlLHQsbiwhMCkpLmlzVmFsaWQoKSlyZXR1cm4gbnVsbH1lbHNlIGlmKG8pe2lmKCEocj10JiYic3RyaW5nIj09dHlwZW9mIGU/by5EYXRlVGltZS5mcm9tRm9ybWF0KGUsdCk6by5EYXRlVGltZS5mcm9tSVNPKGUpKS5pc1ZhbGlkKXJldHVybiBudWxsO3I9ci5zZXRMb2NhbGUobil9ZWxzZSB0PyhGdHx8YWxlcnQoIkRhdGFUYWJsZXMgd2FybmluZzogRm9ybWF0dGVkIGRhdGUgd2l0aG91dCBNb21lbnQuanMgb3IgTHV4b24gLSBodHRwczovL2RhdGF0YWJsZXMubmV0L3RuLzE3IiksRnQ9ITApOnI9bmV3IERhdGUoZSk7cmV0dXJuIHJ9ZnVuY3Rpb24ganQocyl7cmV0dXJuIGZ1bmN0aW9uKHIsYSxvLGkpezA9PT1hcmd1bWVudHMubGVuZ3RoPyhvPSJlbiIscj1hPW51bGwpOjE9PT1hcmd1bWVudHMubGVuZ3RoPyhvPSJlbiIsYT1yLHI9bnVsbCk6Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihvPWEsYT1yLHI9bnVsbCk7dmFyIGw9ImRhdGV0aW1lIisoYT8iLSIrYToiIik7cmV0dXJuIFYuZXh0LnR5cGUub3JkZXJbbCsiLXByZSJdfHxWLnR5cGUobCx7ZGV0ZWN0OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09bCYmbH0sb3JkZXI6e3ByZTpmdW5jdGlvbihlKXtyZXR1cm4gZS52YWx1ZU9mKCl9fSxjbGFzc05hbWU6ImR0LXJpZ2h0In0pLGZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG51bGw9PWUmJihlPSItLW5vdyI9PT1pPyhuPW5ldyBEYXRlLG5ldyBEYXRlKERhdGUuVVRDKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksbi5nZXREYXRlKCksbi5nZXRIb3VycygpLG4uZ2V0TWludXRlcygpLG4uZ2V0U2Vjb25kcygpKSkpOiIiKSwidHlwZSI9PT10P2w6IiI9PT1lPyJzb3J0IiE9PXQ/IiI6T3QoIjAwMDAtMDEtMDEgMDA6MDA6MDAiLG51bGwsbyk6IShudWxsPT09YXx8ciE9PWF8fCJzb3J0Ij09PXR8fCJ0eXBlIj09PXR8fGUgaW5zdGFuY2VvZiBEYXRlKXx8bnVsbD09PShuPU90KGUscixvKSk/ZToic29ydCI9PT10P246KGU9bnVsbD09PWE/TnQobiwidG9EYXRlIiwidG9KU0RhdGUiLCIiKVtzXSgpOk50KG4sImZvcm1hdCIsInRvRm9ybWF0IiwidG9JU09TdHJpbmciLGEpLCJkaXNwbGF5Ij09PXQ/dShlKTplKX19fXZhciBSdD0iLCIsUHQ9Ii4iO2lmKHZvaWQgMCE9PVcuSW50bCl0cnl7Zm9yKHZhciBFdD0obmV3IEludGwuTnVtYmVyRm9ybWF0KS5mb3JtYXRUb1BhcnRzKDEwMDAwMC4xKSxsPTA7bDxFdC5sZW5ndGg7bCsrKSJncm91cCI9PT1FdFtsXS50eXBlP1J0PUV0W2xdLnZhbHVlOiJkZWNpbWFsIj09PUV0W2xdLnR5cGUmJihQdD1FdFtsXS52YWx1ZSl9Y2F0Y2goZSl7fVYuZGF0ZXRpbWU9ZnVuY3Rpb24obixyKXt2YXIgYT0iZGF0ZXRpbWUtIituO3I9cnx8ImVuIixWLmV4dC50eXBlLm9yZGVyW2FdfHxWLnR5cGUoYSx7ZGV0ZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PU90KGUsbixyKTtyZXR1cm4hKCIiIT09ZSYmIXQpJiZhfSxvcmRlcjp7cHJlOmZ1bmN0aW9uKGUpe3JldHVybiBPdChlLG4scil8fDB9fSxjbGFzc05hbWU6ImR0LXJpZ2h0In0pfSxWLnJlbmRlcj17ZGF0ZTpqdCgidG9Mb2NhbGVEYXRlU3RyaW5nIiksZGF0ZXRpbWU6anQoInRvTG9jYWxlU3RyaW5nIiksdGltZTpqdCgidG9Mb2NhbGVUaW1lU3RyaW5nIiksbnVtYmVyOmZ1bmN0aW9uKGEsbyxpLGwscyl7cmV0dXJuIG51bGw9PWEmJihhPVJ0KSxudWxsPT1vJiYobz1QdCkse2Rpc3BsYXk6ZnVuY3Rpb24oZSl7aWYoIm51bWJlciIhPXR5cGVvZiBlJiYic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIGU7aWYoIiI9PT1lfHxudWxsPT09ZSlyZXR1cm4gZTt2YXIgdD1lPDA/Ii0iOiIiLG49cGFyc2VGbG9hdChlKSxyPU1hdGguYWJzKG4pO2lmKDFlMTE8PXJ8fHI8MWUtNCYmMCE9PXIpcmV0dXJuKHI9bi50b0V4cG9uZW50aWFsKGkpLnNwbGl0KC9lXCs/LykpWzBdKyIgeCAxMDxzdXA+IityWzFdKyI8L3N1cD4iO2lmKGlzTmFOKG4pKXJldHVybiB1KGUpO249bi50b0ZpeGVkKGkpLGU9TWF0aC5hYnMobik7cj1wYXJzZUludChlLDEwKSxuPWk/bysoZS1yKS50b0ZpeGVkKGkpLnN1YnN0cmluZygyKToiIjtyZXR1cm4odD0wPT09ciYmMD09PXBhcnNlRmxvYXQobik/IiI6dCkrKGx8fCIiKStyLnRvU3RyaW5nKCkucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZyxhKStuKyhzfHwiIil9fX0sdGV4dDpmdW5jdGlvbigpe3JldHVybntkaXNwbGF5OnUsZmlsdGVyOnV9fX07ZnVuY3Rpb24ga3QoZSx0KXtyZXR1cm4gZT1udWxsIT1lP2UudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpOiIiLHQ9bnVsbCE9dD90LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKToiIixlLmxvY2FsZUNvbXBhcmUodCxuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdfHxuYXZpZ2F0b3IubGFuZ3VhZ2Use251bWVyaWM6ITAsaWdub3JlUHVuY3R1YXRpb246ITB9KX1mdW5jdGlvbiBNdChlLHQpe3JldHVybiBlPXcoZSksdD13KHQpLGt0KGUsdCl9dmFyIHM9Vi5leHQudHlwZSxIdD0oVi50eXBlPWZ1bmN0aW9uKG4sZSx0KXtpZighZSlyZXR1cm57Y2xhc3NOYW1lOnMuY2xhc3NOYW1lW25dLGRldGVjdDpzLmRldGVjdC5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLl9uYW1lPT09bn0pLG9yZGVyOntwcmU6cy5vcmRlcltuKyItcHJlIl0sYXNjOnMub3JkZXJbbisiLWFzYyJdLGRlc2M6cy5vcmRlcltuKyItZGVzYyJdfSxyZW5kZXI6cy5yZW5kZXJbbl0sc2VhcmNoOnMuc2VhcmNoW25dfTtmdW5jdGlvbiByKGUsdCl7c1tlXVtuXT10fWZ1bmN0aW9uIGEoZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9uYW1lIix7dmFsdWU6bn0pO3ZhciB0PXMuZGV0ZWN0LmZpbmRJbmRleChmdW5jdGlvbihlKXtyZXR1cm4gZS5fbmFtZT09PW59KTstMT09PXQ/cy5kZXRlY3QudW5zaGlmdChlKTpzLmRldGVjdC5zcGxpY2UodCwxLGUpfWZ1bmN0aW9uIG8oZSl7cy5vcmRlcltuKyItcHJlIl09ZS5wcmUscy5vcmRlcltuKyItYXNjIl09ZS5hc2Mscy5vcmRlcltuKyItZGVzYyJdPWUuZGVzY312b2lkIDA9PT10JiYodD1lLGU9bnVsbCksImNsYXNzTmFtZSI9PT1lP3IoImNsYXNzTmFtZSIsdCk6ImRldGVjdCI9PT1lP2EodCk6Im9yZGVyIj09PWU/byh0KToicmVuZGVyIj09PWU/cigicmVuZGVyIix0KToic2VhcmNoIj09PWU/cigic2VhcmNoIix0KTplfHwodC5jbGFzc05hbWUmJnIoImNsYXNzTmFtZSIsdC5jbGFzc05hbWUpLHZvaWQgMCE9PXQuZGV0ZWN0JiZhKHQuZGV0ZWN0KSx0Lm9yZGVyJiZvKHQub3JkZXIpLHZvaWQgMCE9PXQucmVuZGVyJiZyKCJyZW5kZXIiLHQucmVuZGVyKSx2b2lkIDAhPT10LnNlYXJjaCYmcigic2VhcmNoIix0LnNlYXJjaCkpfSxWLnR5cGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGV0ZWN0Lm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5fbmFtZX0pfSxWLnR5cGUoInN0cmluZyIse2RldGVjdDpmdW5jdGlvbigpe3JldHVybiJzdHJpbmcifSxvcmRlcjp7cHJlOmZ1bmN0aW9uKGUpe3JldHVybiBfKGUpJiYiYm9vbGVhbiIhPXR5cGVvZiBlPyIiOiJzdHJpbmciPT10eXBlb2YgZT9lLnRvTG93ZXJDYXNlKCk6ZS50b1N0cmluZz9lLnRvU3RyaW5nKCk6IiJ9fSxzZWFyY2g6QXQoITEsITApfSksVi50eXBlKCJzdHJpbmctdXRmOCIse2RldGVjdDp7YWxsT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuITB9LG9uZU9mOmZ1bmN0aW9uKGUpe3JldHVybiFfKGUpJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzJiYic3RyaW5nIj09dHlwZW9mIGUmJmUubWF0Y2goL1teXHgwMC1ceDdGXS8pfX0sb3JkZXI6e2FzYzprdCxkZXNjOmZ1bmN0aW9uKGUsdCl7cmV0dXJuLTEqa3QoZSx0KX19LHNlYXJjaDpBdCghMSwhMCl9KSxWLnR5cGUoImh0bWwiLHtkZXRlY3Q6e2FsbE9mOmZ1bmN0aW9uKGUpe3JldHVybiBfKGUpfHwic3RyaW5nIj09dHlwZW9mIGUmJi0xIT09ZS5pbmRleE9mKCI8Iil9LG9uZU9mOmZ1bmN0aW9uKGUpe3JldHVybiFfKGUpJiYic3RyaW5nIj09dHlwZW9mIGUmJi0xIT09ZS5pbmRleE9mKCI8Iil9fSxvcmRlcjp7cHJlOmZ1bmN0aW9uKGUpe3JldHVybiBfKGUpPyIiOmUucmVwbGFjZT93KGUpLnRyaW0oKS50b0xvd2VyQ2FzZSgpOmUrIiJ9fSxzZWFyY2g6QXQoITAsITApfSksVi50eXBlKCJodG1sLXV0ZjgiLHtkZXRlY3Q6e2FsbE9mOmZ1bmN0aW9uKGUpe3JldHVybiBfKGUpfHwic3RyaW5nIj09dHlwZW9mIGUmJi0xIT09ZS5pbmRleE9mKCI8Iil9LG9uZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBuYXZpZ2F0b3IubGFuZ3VhZ2VzJiYhXyhlKSYmInN0cmluZyI9PXR5cGVvZiBlJiYtMSE9PWUuaW5kZXhPZigiPCIpJiYic3RyaW5nIj09dHlwZW9mIGUmJmUubWF0Y2goL1teXHgwMC1ceDdGXS8pfX0sb3JkZXI6e2FzYzpNdCxkZXNjOmZ1bmN0aW9uKGUsdCl7cmV0dXJuLTEqTXQoZSx0KX19LHNlYXJjaDpBdCghMCwhMCl9KSxWLnR5cGUoImRhdGUiLHtjbGFzc05hbWU6ImR0LXR5cGUtZGF0ZSIsZGV0ZWN0OnthbGxPZjpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hZXx8ZSBpbnN0YW5jZW9mIERhdGV8fGoudGVzdChlKT9udWxsIT09KHQ9RGF0ZS5wYXJzZShlKSkmJiFpc05hTih0KXx8XyhlKTpudWxsfSxvbmVPZjpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIERhdGV8fCJzdHJpbmciPT10eXBlb2YgZSYmai50ZXN0KGUpfX0sb3JkZXI6e3ByZTpmdW5jdGlvbihlKXtlPURhdGUucGFyc2UoZSk7cmV0dXJuIGlzTmFOKGUpPy0xLzA6ZX19fSksVi50eXBlKCJodG1sLW51bS1mbXQiLHtjbGFzc05hbWU6ImR0LXR5cGUtbnVtZXJpYyIsZGV0ZWN0OnthbGxPZjpmdW5jdGlvbihlLHQpe3Q9dC5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIG4oZSx0LCEwLCExKX0sb25lT2Y6ZnVuY3Rpb24oZSx0KXt0PXQub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBuKGUsdCwhMCwhMSl9fSxvcmRlcjp7cHJlOmZ1bmN0aW9uKGUsdCl7dD10Lm9MYW5ndWFnZS5zRGVjaW1hbDtyZXR1cm4gSHQoZSx0LEYsUCl9fSxzZWFyY2g6QXQoITAsITApfSksVi50eXBlKCJodG1sLW51bSIse2NsYXNzTmFtZToiZHQtdHlwZS1udW1lcmljIixkZXRlY3Q6e2FsbE9mOmZ1bmN0aW9uKGUsdCl7dD10Lm9MYW5ndWFnZS5zRGVjaW1hbDtyZXR1cm4gbihlLHQsITEsITApfSxvbmVPZjpmdW5jdGlvbihlLHQpe3Q9dC5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIG4oZSx0LCExLCExKX19LG9yZGVyOntwcmU6ZnVuY3Rpb24oZSx0KXt0PXQub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBIdChlLHQsRil9fSxzZWFyY2g6QXQoITAsITApfSksVi50eXBlKCJudW0tZm10Iix7Y2xhc3NOYW1lOiJkdC10eXBlLW51bWVyaWMiLGRldGVjdDp7YWxsT2Y6ZnVuY3Rpb24oZSx0KXt0PXQub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBjKGUsdCwhMCwhMCl9LG9uZU9mOmZ1bmN0aW9uKGUsdCl7dD10Lm9MYW5ndWFnZS5zRGVjaW1hbDtyZXR1cm4gYyhlLHQsITAsITEpfX0sb3JkZXI6e3ByZTpmdW5jdGlvbihlLHQpe3Q9dC5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIEh0KGUsdCxQKX19fSksVi50eXBlKCJudW0iLHtjbGFzc05hbWU6ImR0LXR5cGUtbnVtZXJpYyIsZGV0ZWN0OnthbGxPZjpmdW5jdGlvbihlLHQpe3Q9dC5vTGFuZ3VhZ2Uuc0RlY2ltYWw7cmV0dXJuIGMoZSx0LCExLCEwKX0sb25lT2Y6ZnVuY3Rpb24oZSx0KXt0PXQub0xhbmd1YWdlLnNEZWNpbWFsO3JldHVybiBjKGUsdCwhMSwhMSl9fSxvcmRlcjp7cHJlOmZ1bmN0aW9uKGUsdCl7dD10Lm9MYW5ndWFnZS5zRGVjaW1hbDtyZXR1cm4gSHQoZSx0KX19fSksZnVuY3Rpb24oZSx0LG4scil7dmFyIGE7cmV0dXJuIDA9PT1lfHxlJiYiLSIhPT1lPyJudW1iZXIiPT0oYT10eXBlb2YgZSl8fCJiaWdpbnQiPT1hP2U6KyhlPShlPXQ/RShlLHQpOmUpLnJlcGxhY2UmJihuJiYoZT1lLnJlcGxhY2UobiwiIikpLHIpP2UucmVwbGFjZShyLCIiKTplKTotMS8wfSk7ZnVuY3Rpb24gV3QoZSx0LG4pe24mJihlW3RdPW4pfUguZXh0ZW5kKCEwLFYuZXh0LnJlbmRlcmVyLHtmb290ZXI6e186ZnVuY3Rpb24oZSx0LG4pe3QuYWRkQ2xhc3Mobi50Zm9vdC5jZWxsKX19LGhlYWRlcjp7XzpmdW5jdGlvbihnLG0sdil7bS5hZGRDbGFzcyh2LnRoZWFkLmNlbGwpLGcub0ZlYXR1cmVzLmJTb3J0fHxtLmFkZENsYXNzKHYub3JkZXIubm9uZSk7dmFyIGU9Zy50aXRsZVJvdyx0PW0uY2xvc2VzdCgidGhlYWQiKS5maW5kKCJ0ciIpLG49bS5wYXJlbnQoKS5pbmRleCgpOyJkaXNhYmxlIj09PW0uYXR0cigiZGF0YS1kdC1vcmRlciIpfHwiZGlzYWJsZSI9PT1tLnBhcmVudCgpLmF0dHIoImRhdGEtZHQtb3JkZXIiKXx8ITA9PT1lJiYwIT09bnx8ITE9PT1lJiZuIT09dC5sZW5ndGgtMXx8Im51bWJlciI9PXR5cGVvZiBlJiZuIT09ZXx8SChnLm5UYWJsZSkub24oIm9yZGVyLmR0LkRUIGNvbHVtbi12aXNpYmlsaXR5LmR0LkRUIixmdW5jdGlvbihlLHQsbil7aWYoZz09PXQpe3ZhciByPXQuc29ydERldGFpbHM7aWYocil7dmFyIGE9YihyLCJjb2wiKTtpZigiY29sdW1uLXZpc2liaWxpdHkiIT09ZS50eXBlfHxhLmluY2x1ZGVzKG4pKXtmb3IodmFyIGU9di5vcmRlcixuPXQuYXBpLmNvbHVtbnMobSksbz1nLmFvQ29sdW1uc1tuLmZsYXR0ZW4oKVswXV0saT1uLm9yZGVyYWJsZSgpLmluY2x1ZGVzKCEwKSxsPSIiLHM9bi5pbmRleGVzKCksdT1uLm9yZGVyYWJsZSghMCkuZmxhdHRlbigpLGM9Zy5pVGFiSW5kZXgsZD10Lm9yZGVySGFuZGxlciYmaSxmPShtLnJlbW92ZUNsYXNzKGUuaXNBc2MrIiAiK2UuaXNEZXNjKS50b2dnbGVDbGFzcyhlLm5vbmUsIWkpLnRvZ2dsZUNsYXNzKGUuY2FuQXNjLGQmJnUuaW5jbHVkZXMoImFzYyIpKS50b2dnbGVDbGFzcyhlLmNhbkRlc2MsZCYmdS5pbmNsdWRlcygiZGVzYyIpKSwhMCksaD0wO2g8cy5sZW5ndGg7aCsrKWEuaW5jbHVkZXMoc1toXSl8fChmPSExKTtmJiYoZD1uLm9yZGVyKCksbS5hZGRDbGFzcyhkLmluY2x1ZGVzKCJhc2MiKT9lLmlzQXNjOiIiK2QuaW5jbHVkZXMoImRlc2MiKT9lLmlzRGVzYzoiIikpO3ZhciBwPS0xO2ZvcihoPTA7aDxhLmxlbmd0aDtoKyspaWYoZy5hb0NvbHVtbnNbYVtoXV0uYlZpc2libGUpe3A9YVtoXTticmVha31zWzBdPT1wPyh1PXJbMF0sbj1vLmFzU29ydGluZyxtLmF0dHIoImFyaWEtc29ydCIsImFzYyI9PT11LmRpcj8iYXNjZW5kaW5nIjoiZGVzY2VuZGluZyIpLGw9blt1LmluZGV4KzFdPyJSZXZlcnNlIjoiUmVtb3ZlIik6bS5yZW1vdmVBdHRyKCJhcmlhLXNvcnQiKSxpJiYoKGQ9bS5maW5kKCIuZHQtY29sdW1uLW9yZGVyIikpLmF0dHIoInJvbGUiLCJidXR0b24iKS5hdHRyKCJhcmlhLWxhYmVsIixpP28uYXJpYVRpdGxlK3QuYXBpLmkxOG4oIm9BcmlhLm9yZGVyYWJsZSIrbCk6by5hcmlhVGl0bGUpLC0xIT09YykmJmQuYXR0cigidGFiaW5kZXgiLGMpfX19fSl9fSxsYXlvdXQ6e186ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUub0NsYXNzZXMubGF5b3V0LGE9SCgiPGRpdi8+IikuYXR0cigiaWQiLG4uaWR8fG51bGwpLmFkZENsYXNzKG4uY2xhc3NOYW1lfHxyLnJvdykuYXBwZW5kVG8odCk7Vi5leHQucmVuZGVyZXIubGF5b3V0Ll9mb3JMYXlvdXRSb3cobixmdW5jdGlvbihlLHQpe3ZhciBuOyJpZCIhPT1lJiYiY2xhc3NOYW1lIiE9PWUmJihuPSIiLHQudGFibGUmJihhLmFkZENsYXNzKHIudGFibGVSb3cpLG4rPXIudGFibGVDZWxsKyIgIiksbis9InN0YXJ0Ij09PWU/ci5zdGFydDoiZW5kIj09PWU/ci5lbmQ6ci5mdWxsLEgoIjxkaXYvPiIpLmF0dHIoe2lkOnQuaWR8fG51bGwsY2xhc3M6dC5jbGFzc05hbWV8fHIuY2VsbCsiICIrbn0pLmFwcGVuZCh0LmNvbnRlbnRzKS5hcHBlbmRUbyhhKSl9KX0sX2ZvckxheW91dFJvdzpmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoZSl7c3dpdGNoKGUpe2Nhc2UiIjpyZXR1cm4gMDtjYXNlInN0YXJ0IjpyZXR1cm4gMTtjYXNlImVuZCI6cmV0dXJuIDI7ZGVmYXVsdDpyZXR1cm4gM319T2JqZWN0LmtleXModCkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiByKGUpLXIodCl9KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24oZSx0W2VdKX0pfX19KSxWLmZlYXR1cmU9e30sVi5mZWF0dXJlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUsdCxuKXtWLmV4dC5mZWF0dXJlc1tlXT10LG4mJlQuZmVhdHVyZS5wdXNoKHtjRmVhdHVyZTpuLGZuSW5pdDp0fSl9LFYuZmVhdHVyZS5yZWdpc3RlcigiZGl2IixmdW5jdGlvbihlLHQpe3ZhciBuPUgoIjxkaXY+IilbMF07cmV0dXJuIHQmJihXdChuLCJjbGFzc05hbWUiLHQuY2xhc3NOYW1lKSxXdChuLCJpZCIsdC5pZCksV3QobiwiaW5uZXJIVE1MIix0Lmh0bWwpLFd0KG4sInRleHRDb250ZW50Iix0LnRleHQpKSxufSksVi5mZWF0dXJlLnJlZ2lzdGVyKCJpbmZvIixmdW5jdGlvbihlLHMpe3ZhciB0LG4sdTtyZXR1cm4gZS5vRmVhdHVyZXMuYkluZm8/KHQ9ZS5vTGFuZ3VhZ2Usbj1lLnNUYWJsZUlkLHU9SCgiPGRpdi8+Iix7Y2xhc3M6ZS5vQ2xhc3Nlcy5pbmZvLmNvbnRhaW5lcn0pLHM9SC5leHRlbmQoe2NhbGxiYWNrOnQuZm5JbmZvQ2FsbGJhY2ssZW1wdHk6dC5zSW5mb0VtcHR5LHBvc3RmaXg6dC5zSW5mb1Bvc3RGaXgsc2VhcmNoOnQuc0luZm9GaWx0ZXJlZCx0ZXh0OnQuc0luZm99LHMpLGUuYW9EcmF3Q2FsbGJhY2sucHVzaChmdW5jdGlvbihlKXt2YXIgdD1zLG49dSxyPWUuX2lEaXNwbGF5U3RhcnQrMSxhPWUuZm5EaXNwbGF5RW5kKCksbz1lLmZuUmVjb3Jkc1RvdGFsKCksaT1lLmZuUmVjb3Jkc0Rpc3BsYXkoKSxsPWk/dC50ZXh0OnQuZW1wdHk7aSE9PW8mJihsKz0iICIrdC5zZWFyY2gpLGwrPXQucG9zdGZpeCxsPW90KGUsbCksdC5jYWxsYmFjayYmKGw9dC5jYWxsYmFjay5jYWxsKGUub0luc3RhbmNlLGUscixhLG8saSxsKSksbi5odG1sKGwpLEcoZSxudWxsLCJpbmZvIixbZSxuWzBdLGxdKX0pLGUuX2luZm9FbHx8KHUuYXR0cih7ImFyaWEtbGl2ZSI6InBvbGl0ZSIsaWQ6bisiX2luZm8iLHJvbGU6InN0YXR1cyJ9KSxIKGUublRhYmxlKS5hdHRyKCJhcmlhLWRlc2NyaWJlZGJ5IixuKyJfaW5mbyIpLGUuX2luZm9FbD11KSx1KTpudWxsfSwiaSIpO3ZhciBYdD0wO2Z1bmN0aW9uIFZ0KGUpe3ZhciB0PVtdO3JldHVybiBlLm51bWJlcnMmJnQucHVzaCgibnVtYmVycyIpLGUucHJldmlvdXNOZXh0JiYodC51bnNoaWZ0KCJwcmV2aW91cyIpLHQucHVzaCgibmV4dCIpKSxlLmZpcnN0TGFzdCYmKHQudW5zaGlmdCgiZmlyc3QiKSx0LnB1c2goImxhc3QiKSksdH1mdW5jdGlvbiBCdChlLHQsbixyKXt2YXIgYT1lLm9MYW5ndWFnZS5vUGFnaW5hdGUsbz17ZGlzcGxheToiIixhY3RpdmU6ITEsZGlzYWJsZWQ6ITF9O3N3aXRjaCh0KXtjYXNlImVsbGlwc2lzIjpvLmRpc3BsYXk9IiYjeDIwMjY7IjticmVhaztjYXNlImZpcnN0IjpvLmRpc3BsYXk9YS5zRmlyc3QsMD09PW4mJihvLmRpc2FibGVkPSEwKTticmVhaztjYXNlInByZXZpb3VzIjpvLmRpc3BsYXk9YS5zUHJldmlvdXMsMD09PW4mJihvLmRpc2FibGVkPSEwKTticmVhaztjYXNlIm5leHQiOm8uZGlzcGxheT1hLnNOZXh0LDAhPT1yJiZuIT09ci0xfHwoby5kaXNhYmxlZD0hMCk7YnJlYWs7Y2FzZSJsYXN0IjpvLmRpc3BsYXk9YS5zTGFzdCwwIT09ciYmbiE9PXItMXx8KG8uZGlzYWJsZWQ9ITApO2JyZWFrO2RlZmF1bHQ6Im51bWJlciI9PXR5cGVvZiB0JiYoby5kaXNwbGF5PWUuZm5Gb3JtYXROdW1iZXIodCsxKSxuPT09dCkmJihvLmFjdGl2ZT0hMCl9cmV0dXJuIG99ZnVuY3Rpb24gcXQoZSx0LG4scil7dmFyIGE9W10sbz1NYXRoLmZsb29yKG4vMiksaT1yPzI6MSxsPXI/MTowO3JldHVybiB0PD1uP2E9aCgwLHQpOjE9PT1uP2E9W2VdOjM9PT1uP2U8PTE/YT1bMCwxLCJlbGxpcHNpcyJdOnQtMjw9ZT8oYT1oKHQtMix0KSkudW5zaGlmdCgiZWxsaXBzaXMiKTphPVsiZWxsaXBzaXMiLGUsImVsbGlwc2lzIl06ZTw9bz8oKGE9aCgwLG4taSkpLnB1c2goImVsbGlwc2lzIiksciYmYS5wdXNoKHQtMSkpOnQtMS1vPD1lPygoYT1oKHQtKG4taSksdCkpLnVuc2hpZnQoImVsbGlwc2lzIiksciYmYS51bnNoaWZ0KDApKTooKGE9aChlLW8raSxlK28tbCkpLnB1c2goImVsbGlwc2lzIiksYS51bnNoaWZ0KCJlbGxpcHNpcyIpLHImJihhLnB1c2godC0xKSxhLnVuc2hpZnQoMCkpKSxhfVYuZmVhdHVyZS5yZWdpc3Rlcigic2VhcmNoIixmdW5jdGlvbihuLHIpe3ZhciBlLHQsYSxvLGksbCxzLHUsYyxkO3JldHVybiBuLm9GZWF0dXJlcy5iRmlsdGVyPyhlPW4ub0NsYXNzZXMuc2VhcmNoLHQ9bi5zVGFibGVJZCxjPW4ub0xhbmd1YWdlLGE9bi5vUHJldmlvdXNTZWFyY2gsbz0nPGlucHV0IHR5cGU9InNlYXJjaCIgY2xhc3M9IicrZS5pbnB1dCsnIi8+JywtMT09PShyPUguZXh0ZW5kKHtwbGFjZWhvbGRlcjpjLnNTZWFyY2hQbGFjZWhvbGRlcixwcm9jZXNzaW5nOiExLHRleHQ6Yy5zU2VhcmNofSxyKSkudGV4dC5pbmRleE9mKCJfSU5QVVRfIikmJihyLnRleHQrPSJfSU5QVVRfIiksci50ZXh0PW90KG4sci50ZXh0KSxjPXIudGV4dC5tYXRjaCgvX0lOUFVUXyQvKSxzPXIudGV4dC5tYXRjaCgvXl9JTlBVVF8vKSxpPXIudGV4dC5yZXBsYWNlKC9fSU5QVVRfLywiIiksbD0iPGxhYmVsPiIrci50ZXh0KyI8L2xhYmVsPiIscz9sPSJfSU5QVVRfPGxhYmVsPiIraSsiPC9sYWJlbD4iOmMmJihsPSI8bGFiZWw+IitpKyI8L2xhYmVsPl9JTlBVVF8iKSwocz1IKCI8ZGl2PiIpLmFkZENsYXNzKGUuY29udGFpbmVyKS5hcHBlbmQobC5yZXBsYWNlKC9fSU5QVVRfLyxvKSkpLmZpbmQoImxhYmVsIikuYXR0cigiZm9yIiwiZHQtc2VhcmNoLSIrWHQpLHMuZmluZCgiaW5wdXQiKS5hdHRyKCJpZCIsImR0LXNlYXJjaC0iK1h0KSxYdCsrLHU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52YWx1ZTthLnJldHVybiYmIkVudGVyIiE9PWUua2V5fHx0IT1hLnNlYXJjaCYmQmUobixyLnByb2Nlc3NpbmcsZnVuY3Rpb24oKXthLnNlYXJjaD10LFJlKG4sYSksbi5faURpc3BsYXlTdGFydD0wLHgobil9KX0sYz1udWxsIT09bi5zZWFyY2hEZWxheT9uLnNlYXJjaERlbGF5OjAsZD1IKCJpbnB1dCIscykudmFsKGEuc2VhcmNoKS5hdHRyKCJwbGFjZWhvbGRlciIsci5wbGFjZWhvbGRlcikub24oImtleXVwLkRUIHNlYXJjaC5EVCBpbnB1dC5EVCBwYXN0ZS5EVCBjdXQuRFQiLGM/Vi51dGlsLmRlYm91bmNlKHUsYyk6dSkub24oIm1vdXNldXAuRFQiLGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt1LmNhbGwoZFswXSxlKX0sMTApfSkub24oImtleXByZXNzLkRUIixmdW5jdGlvbihlKXtpZigxMz09ZS5rZXlDb2RlKXJldHVybiExfSkuYXR0cigiYXJpYS1jb250cm9scyIsdCksSChuLm5UYWJsZSkub24oInNlYXJjaC5kdC5EVCIsZnVuY3Rpb24oZSx0KXtuPT09dCYmZFswXSE9PVMuYWN0aXZlRWxlbWVudCYmZC52YWwoImZ1bmN0aW9uIiE9dHlwZW9mIGEuc2VhcmNoP2Euc2VhcmNoOiIiKX0pLHMpOm51bGx9LCJmIiksVi5mZWF0dXJlLnJlZ2lzdGVyKCJwYWdpbmciLGZ1bmN0aW9uKGUsdCl7aWYoIWUub0ZlYXR1cmVzLmJQYWdpbmF0ZSlyZXR1cm4gbnVsbDt0PUguZXh0ZW5kKHtidXR0b25zOlYuZXh0LnBhZ2VyLm51bWJlcnNfbGVuZ3RoLHR5cGU6ZS5zUGFnaW5hdGlvblR5cGUsYm91bmRhcnlOdW1iZXJzOiEwLGZpcnN0TGFzdDohMCxwcmV2aW91c05leHQ6ITAsbnVtYmVyczohMH0sdCk7ZnVuY3Rpb24gbigpeyFmdW5jdGlvbiBlKHQsbixyKXtpZighdC5fYkluaXRDb21wbGV0ZSlyZXR1cm47dmFyIGE9ci50eXBlP1YuZXh0LnBhZ2VyW3IudHlwZV06VnQsbz10Lm9MYW5ndWFnZS5vQXJpYS5wYWdpbmF0ZXx8e30saT10Ll9pRGlzcGxheVN0YXJ0LGw9dC5faURpc3BsYXlMZW5ndGgscz10LmZuUmVjb3Jkc0Rpc3BsYXkoKSx1PS0xPT09bCxjPXU/MDpNYXRoLmNlaWwoaS9sKSxkPXU/MTpNYXRoLmNlaWwocy9sKSxmPVtdLGg9W10saT1hKHIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVycyI9PT1lP3F0KGMsZCxyLmJ1dHRvbnMsci5ib3VuZGFyeU51bWJlcnMpOmV9KTtmPWYuY29uY2F0LmFwcGx5KGYsaSk7Zm9yKHZhciBwPTA7cDxmLmxlbmd0aDtwKyspe3ZhciBnPWZbcF0sbT1CdCh0LGcsYyxkKSx2PWF0KHQsInBhZ2luZ0J1dHRvbiIpKHQsZyxtLmRpc3BsYXksbS5hY3RpdmUsbS5kaXNhYmxlZCksYj0ic3RyaW5nIj09dHlwZW9mIGc/b1tnXTpvLm51bWJlcj9vLm51bWJlcisoZysxKTpudWxsO0godi5jbGlja2VyKS5hdHRyKHsiYXJpYS1jb250cm9scyI6dC5zVGFibGVJZCwiYXJpYS1kaXNhYmxlZCI6bS5kaXNhYmxlZD8idHJ1ZSI6bnVsbCwiYXJpYS1jdXJyZW50IjptLmFjdGl2ZT8icGFnZSI6bnVsbCwiYXJpYS1sYWJlbCI6YiwiZGF0YS1kdC1pZHgiOmcsdGFiSW5kZXg6bS5kaXNhYmxlZD8tMTp0LmlUYWJJbmRleCYmInNwYW4iIT09di5jbGlja2VyWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dC5pVGFiSW5kZXg6bnVsbH0pLCJudW1iZXIiIT10eXBlb2YgZyYmSCh2LmNsaWNrZXIpLmFkZENsYXNzKGcpLG50KHYuY2xpY2tlcix7YWN0aW9uOmd9LGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxWZSh0LGUuZGF0YS5hY3Rpb24sITApfSksaC5wdXNoKHYuZGlzcGxheSl9dT1hdCh0LCJwYWdpbmdDb250YWluZXIiKSh0LGgpO3M9bi5maW5kKFMuYWN0aXZlRWxlbWVudCkuZGF0YSgiZHQtaWR4Iik7bi5lbXB0eSgpLmFwcGVuZCh1KTt2b2lkIDAhPT1zJiZuLmZpbmQoIltkYXRhLWR0LWlkeD0iK3MrIl0iKS50cmlnZ2VyKCJmb2N1cyIpO2gubGVuZ3RoJiYobD1IKGhbMF0pLm91dGVySGVpZ2h0KCksMTxyLmJ1dHRvbnMpJiYwPGwmJkgobikuaGVpZ2h0KCk+PTIqbC0xMCYmZSh0LG4sSC5leHRlbmQoe30scix7YnV0dG9uczpyLmJ1dHRvbnMtMn0pKX0oZSxyLmNoaWxkcmVuKCksdCl9dmFyIHI9SCgiPGRpdi8+IikuYWRkQ2xhc3MoZS5vQ2xhc3Nlcy5wYWdpbmcuY29udGFpbmVyKyh0LnR5cGU/IiBwYWdpbmdfIit0LnR5cGU6IiIpKS5hcHBlbmQoSCgiPG5hdj4iKS5hdHRyKCJhcmlhLWxhYmVsIiwicGFnaW5hdGlvbiIpLmFkZENsYXNzKGUub0NsYXNzZXMucGFnaW5nLm5hdikpO3JldHVybiBlLmFvRHJhd0NhbGxiYWNrLnB1c2gobiksSChlLm5UYWJsZSkub24oImNvbHVtbi1zaXppbmcuZHQuRFQiLG4pLHJ9LCJwIik7dmFyIFV0PTA7cmV0dXJuIFYuZmVhdHVyZS5yZWdpc3RlcigicGFnZUxlbmd0aCIsZnVuY3Rpb24ocixlKXt2YXIgdD1yLm9GZWF0dXJlcztpZighdC5iUGFnaW5hdGV8fCF0LmJMZW5ndGhDaGFuZ2UpcmV0dXJuIG51bGw7ZT1ILmV4dGVuZCh7bWVudTpyLmFMZW5ndGhNZW51LHRleHQ6ci5vTGFuZ3VhZ2Uuc0xlbmd0aE1lbnV9LGUpO3ZhciB0PXIub0NsYXNzZXMubGVuZ3RoLG49ci5zVGFibGVJZCxhPWUubWVudSxvPVtdLGk9W107aWYoQXJyYXkuaXNBcnJheShhWzBdKSlvPWFbMF0saT1hWzFdO2Vsc2UgZm9yKHA9MDtwPGEubGVuZ3RoO3ArKylILmlzUGxhaW5PYmplY3QoYVtwXSk/KG8ucHVzaChhW3BdLnZhbHVlKSxpLnB1c2goYVtwXS5sYWJlbCkpOihvLnB1c2goYVtwXSksaS5wdXNoKGFbcF0pKTtmb3IodmFyIGw9ZS50ZXh0Lm1hdGNoKC9fTUVOVV8kLykscz1lLnRleHQubWF0Y2goL15fTUVOVV8vKSx1PWUudGV4dC5yZXBsYWNlKC9fTUVOVV8vLCIiKSxlPSI8bGFiZWw+IitlLnRleHQrIjwvbGFiZWw+IixzPShzP2U9Il9NRU5VXzxsYWJlbD4iK3UrIjwvbGFiZWw+IjpsJiYoZT0iPGxhYmVsPiIrdSsiPC9sYWJlbD5fTUVOVV8iKSwidG1wLSIrICtuZXcgRGF0ZSksYz1IKCI8ZGl2Lz4iKS5hZGRDbGFzcyh0LmNvbnRhaW5lcikuYXBwZW5kKGUucmVwbGFjZSgiX01FTlVfIiwnPHNwYW4gaWQ9IicrcysnIj48L3NwYW4+JykpLGQ9W10sZj0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYy5maW5kKCJsYWJlbCIpWzBdLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFJiZkLnB1c2goe2VsOmUsdGV4dDplLnRleHRDb250ZW50fSl9KSxmdW5jdGlvbih0KXtkLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5lbC50ZXh0Q29udGVudD1vdChyLGUudGV4dCx0KX0pfSksaD1IKCI8c2VsZWN0Lz4iLHsiYXJpYS1jb250cm9scyI6bixjbGFzczp0LnNlbGVjdH0pLHA9MDtwPG8ubGVuZ3RoO3ArKyl7dmFyIGc9ci5hcGkuaTE4bigibGVuZ3RoTGFiZWxzLiIrb1twXSxudWxsKTtudWxsPT09ZyYmKGc9Im51bWJlciI9PXR5cGVvZiBpW3BdP3IuZm5Gb3JtYXROdW1iZXIoaVtwXSk6aVtwXSksaFswXVtwXT1uZXcgT3B0aW9uKGcsb1twXSl9cmV0dXJuIGMuZmluZCgibGFiZWwiKS5hdHRyKCJmb3IiLCJkdC1sZW5ndGgtIitVdCksaC5hdHRyKCJpZCIsImR0LWxlbmd0aC0iK1V0KSxVdCsrLGMuZmluZCgiIyIrcykucmVwbGFjZVdpdGgoaCksSCgic2VsZWN0IixjKS52YWwoci5faURpc3BsYXlMZW5ndGgpLm9uKCJjaGFuZ2UuRFQiLGZ1bmN0aW9uKCl7WGUocixIKHRoaXMpLnZhbCgpKSx4KHIpfSksSChyLm5UYWJsZSkub24oImxlbmd0aC5kdC5EVCIsZnVuY3Rpb24oZSx0LG4pe3I9PT10JiYoSCgic2VsZWN0IixjKS52YWwobiksZihuKSl9KSxmKHIuX2lEaXNwbGF5TGVuZ3RoKSxjfSwibCIpLCgoSC5mbi5kYXRhVGFibGU9VikuJD1IKS5mbi5kYXRhVGFibGVTZXR0aW5ncz1WLnNldHRpbmdzLEguZm4uZGF0YVRhYmxlRXh0PVYuZXh0LEguZm4uRGF0YVRhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBIKHRoaXMpLmRhdGFUYWJsZShlKS5hcGkoKX0sSC5lYWNoKFYsZnVuY3Rpb24oZSx0KXtILmZuLkRhdGFUYWJsZVtlXT10fSksVn0pOwoKLyohIERhdGFUYWJsZXMgQm9vdHN0cmFwIDQgaW50ZWdyYXRpb24KICogwqkgU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UKICovCiFmdW5jdGlvbihuKXt2YXIgbyxyOyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5IiwiZGF0YXRhYmxlcy5uZXQiXSxmdW5jdGlvbih0KXtyZXR1cm4gbih0LHdpbmRvdyxkb2N1bWVudCl9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/KG89cmVxdWlyZSgianF1ZXJ5Iikscj1mdW5jdGlvbih0LGUpe2UuZm4uZGF0YVRhYmxlfHxyZXF1aXJlKCJkYXRhdGFibGVzLm5ldCIpKHQsZSl9LCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93P21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dHx8d2luZG93LGU9ZXx8byh0KSxyKHQsZSksbihlLDAsdC5kb2N1bWVudCl9OihyKHdpbmRvdyxvKSxtb2R1bGUuZXhwb3J0cz1uKG8sd2luZG93LHdpbmRvdy5kb2N1bWVudCkpKTpuKGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpfShmdW5jdGlvbihkLHQsZSl7InVzZSBzdHJpY3QiO3ZhciBuPWQuZm4uZGF0YVRhYmxlO3JldHVybiBkLmV4dGVuZCghMCxuLmRlZmF1bHRzLHtyZW5kZXJlcjoiYm9vdHN0cmFwIn0pLGQuZXh0ZW5kKCEwLG4uZXh0LmNsYXNzZXMse2NvbnRhaW5lcjoiZHQtY29udGFpbmVyIGR0LWJvb3RzdHJhcDQiLHNlYXJjaDp7aW5wdXQ6ImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20ifSxsZW5ndGg6e3NlbGVjdDoiY3VzdG9tLXNlbGVjdCBjdXN0b20tc2VsZWN0LXNtIGZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc20ifSxwcm9jZXNzaW5nOntjb250YWluZXI6ImR0LXByb2Nlc3NpbmcgY2FyZCJ9LGxheW91dDp7cm93OiJyb3cganVzdGlmeS1jb250ZW50LWJldHdlZW4iLGNlbGw6ImQtbWQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXIiLHRhYmxlQ2VsbDoiY29sLTEyIixzdGFydDoiZHQtbGF5b3V0LXN0YXJ0IGNvbC1tZC1hdXRvIG1yLWF1dG8iLGVuZDoiZHQtbGF5b3V0LWVuZCBjb2wtbWQtYXV0byBtbC1hdXRvIixmdWxsOiJkdC1sYXlvdXQtZnVsbCBjb2wtbWQifX0pLG4uZXh0LnJlbmRlcmVyLnBhZ2luZ0J1dHRvbi5ib290c3RyYXA9ZnVuY3Rpb24odCxlLG4sbyxyKXt2YXIgYT1bImR0LXBhZ2luZy1idXR0b24iLCJwYWdlLWl0ZW0iXSxvPShvJiZhLnB1c2goImFjdGl2ZSIpLHImJmEucHVzaCgiZGlzYWJsZWQiKSxkKCI8bGk+IikuYWRkQ2xhc3MoYS5qb2luKCIgIikpKTtyZXR1cm57ZGlzcGxheTpvLGNsaWNrZXI6ZCgiPGE+Iix7aHJlZjpyP251bGw6IiMiLGNsYXNzOiJwYWdlLWxpbmsifSkuaHRtbChuKS5hcHBlbmRUbyhvKX19LG4uZXh0LnJlbmRlcmVyLnBhZ2luZ0NvbnRhaW5lci5ib290c3RyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZCgiPHVsLz4iKS5hZGRDbGFzcygicGFnaW5hdGlvbiIpLmFwcGVuZChlKX0sbn0pOwoKLyohIEJ1dHRvbnMgZm9yIERhdGFUYWJsZXMgMy4yLjQKICogwqkgU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UKICovCiFmdW5jdGlvbihlKXt2YXIgbyxpOyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5IiwiZGF0YXRhYmxlcy5uZXQiXSxmdW5jdGlvbih0KXtyZXR1cm4gZSh0LHdpbmRvdyxkb2N1bWVudCl9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/KG89cmVxdWlyZSgianF1ZXJ5IiksaT1mdW5jdGlvbih0LG4pe24uZm4uZGF0YVRhYmxlfHxyZXF1aXJlKCJkYXRhdGFibGVzLm5ldCIpKHQsbil9LCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93P21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHQ9dHx8d2luZG93LG49bnx8byh0KSxpKHQsbiksZShuLHQsdC5kb2N1bWVudCl9OihpKHdpbmRvdyxvKSxtb2R1bGUuZXhwb3J0cz1lKG8sd2luZG93LHdpbmRvdy5kb2N1bWVudCkpKTplKGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpfShmdW5jdGlvbih4LG0sdil7InVzZSBzdHJpY3QiO3ZhciBlPXguZm4uZGF0YVRhYmxlLG89MCxDPTAsXz1lLmV4dC5idXR0b25zLGk9bnVsbDtmdW5jdGlvbiB5KHQsbixlKXt4LmZuLmFuaW1hdGU/dC5zdG9wKCkuZmFkZUluKG4sZSk6KHQuY3NzKCJkaXNwbGF5IiwiYmxvY2siKSxlJiZlLmNhbGwodCkpfWZ1bmN0aW9uIHcodCxuLGUpe3guZm4uYW5pbWF0ZT90LnN0b3AoKS5mYWRlT3V0KG4sZSk6KHQuY3NzKCJkaXNwbGF5Iiwibm9uZSIpLGUmJmUuY2FsbCh0KSl9ZnVuY3Rpb24gQShuLHQpe2lmKCFlLnZlcnNpb25DaGVjaygiMiIpKXRocm93Ildhcm5pbmc6IEJ1dHRvbnMgcmVxdWlyZXMgRGF0YVRhYmxlcyAyIG9yIG5ld2VyIjtpZighKHRoaXMgaW5zdGFuY2VvZiBBKSlyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBBKHQsbikuY29udGFpbmVyKCl9OyEwPT09KHQ9dm9pZCAwPT09dD97fTp0KSYmKHQ9e30pLEFycmF5LmlzQXJyYXkodCkmJih0PXtidXR0b25zOnR9KSx0aGlzLmM9eC5leHRlbmQoITAse30sQS5kZWZhdWx0cyx0KSx0LmJ1dHRvbnMmJih0aGlzLmMuYnV0dG9ucz10LmJ1dHRvbnMpLHRoaXMucz17ZHQ6bmV3IGUuQXBpKG4pLGJ1dHRvbnM6W10sbGlzdGVuS2V5czoiIixuYW1lc3BhY2U6ImR0YiIrbysrfSx0aGlzLmRvbT17Y29udGFpbmVyOngoIjwiK3RoaXMuYy5kb20uY29udGFpbmVyLnRhZysiLz4iKS5hZGRDbGFzcyh0aGlzLmMuZG9tLmNvbnRhaW5lci5jbGFzc05hbWUpfSx0aGlzLl9jb25zdHJ1Y3RvcigpfXguZXh0ZW5kKEEucHJvdG90eXBlLHthY3Rpb246ZnVuY3Rpb24odCxuKXt0PXRoaXMuX25vZGVUb0J1dHRvbih0KTtyZXR1cm4gdm9pZCAwPT09bj90LmNvbmYuYWN0aW9uOih0LmNvbmYuYWN0aW9uPW4sdGhpcyl9LGFjdGl2ZTpmdW5jdGlvbih0LG4pe3ZhciB0PXRoaXMuX25vZGVUb0J1dHRvbih0KSxlPXRoaXMuYy5kb20uYnV0dG9uLmFjdGl2ZSxvPXgodC5ub2RlKTtyZXR1cm4gdC5pbkNvbGxlY3Rpb24mJnRoaXMuYy5kb20uY29sbGVjdGlvbi5idXR0b24mJnZvaWQgMCE9PXRoaXMuYy5kb20uY29sbGVjdGlvbi5idXR0b24uYWN0aXZlJiYoZT10aGlzLmMuZG9tLmNvbGxlY3Rpb24uYnV0dG9uLmFjdGl2ZSksdm9pZCAwPT09bj9vLmhhc0NsYXNzKGUpOihvLnRvZ2dsZUNsYXNzKGUsdm9pZCAwPT09bnx8biksdGhpcyl9LGFkZDpmdW5jdGlvbih0LG4sZSl7dmFyIG89dGhpcy5zLmJ1dHRvbnM7aWYoInN0cmluZyI9PXR5cGVvZiBuKXtmb3IodmFyIGk9bi5zcGxpdCgiLSIpLHM9dGhpcy5zLHI9MCxhPWkubGVuZ3RoLTE7cjxhO3IrKylzPXMuYnV0dG9uc1sraVtyXV07bz1zLmJ1dHRvbnMsbj0raVtpLmxlbmd0aC0xXX1yZXR1cm4gdGhpcy5fZXhwYW5kQnV0dG9uKG8sdCx2b2lkIDAhPT10P3Quc3BsaXQ6dm9pZCAwLCh2b2lkIDA9PT10fHx2b2lkIDA9PT10LnNwbGl0fHwwPT09dC5zcGxpdC5sZW5ndGgpJiZ2b2lkIDAhPT1zLCExLG4pLHZvaWQgMCE9PWUmJiEwIT09ZXx8dGhpcy5fZHJhdygpLHRoaXN9LGNvbGxlY3Rpb25SZWJ1aWxkOmZ1bmN0aW9uKHQsbil7dmFyIGU9dGhpcy5fbm9kZVRvQnV0dG9uKHQpO2lmKHZvaWQgMCE9PW4pe2Zvcih2YXIgbz1lLmJ1dHRvbnMubGVuZ3RoLTE7MDw9bztvLS0pdGhpcy5yZW1vdmUoZS5idXR0b25zW29dLm5vZGUpO2ZvcihlLmNvbmYucHJlZml4QnV0dG9ucyYmbi51bnNoaWZ0LmFwcGx5KG4sZS5jb25mLnByZWZpeEJ1dHRvbnMpLGUuY29uZi5wb3N0Zml4QnV0dG9ucyYmbi5wdXNoLmFwcGx5KG4sZS5jb25mLnBvc3RmaXhCdXR0b25zKSxvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb107dGhpcy5fZXhwYW5kQnV0dG9uKGUuYnV0dG9ucyxpLHZvaWQgMCE9PWkmJnZvaWQgMCE9PWkuY29uZmlnJiZ2b2lkIDAhPT1pLmNvbmZpZy5zcGxpdCwhMCx2b2lkIDAhPT1pLnBhcmVudENvbmYmJnZvaWQgMCE9PWkucGFyZW50Q29uZi5zcGxpdCxudWxsLGkucGFyZW50Q29uZil9fXRoaXMuX2RyYXcoZS5jb2xsZWN0aW9uLGUuYnV0dG9ucyl9LGNvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbS5jb250YWluZXJ9LGRpc2FibGU6ZnVuY3Rpb24odCl7dD10aGlzLl9ub2RlVG9CdXR0b24odCk7cmV0dXJuKHQuaXNTcGxpdD94KHQubm9kZS5jaGlsZE5vZGVzWzBdKTp4KHQubm9kZSkpLmFkZENsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRpc2FibGVkKS5wcm9wKCJkaXNhYmxlZCIsITApLHQuZGlzYWJsZWQ9ITAsdGhpcy5fY2hlY2tTcGxpdEVuYWJsZSgpLHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt4KCJib2R5Iikub2ZmKCJrZXl1cC4iK3RoaXMucy5uYW1lc3BhY2UpO2Zvcih2YXIgdD10aGlzLnMuYnV0dG9ucy5zbGljZSgpLG49MCxlPXQubGVuZ3RoO248ZTtuKyspdGhpcy5yZW1vdmUodFtuXS5ub2RlKTt0aGlzLmRvbS5jb250YWluZXIucmVtb3ZlKCk7dmFyIG89dGhpcy5zLmR0LnNldHRpbmdzKClbMF07Zm9yKG49MCxlPW8ubGVuZ3RoO248ZTtuKyspaWYoby5pbnN0PT09dGhpcyl7by5zcGxpY2UobiwxKTticmVha31yZXR1cm4gdGhpc30sZW5hYmxlOmZ1bmN0aW9uKHQsbil7cmV0dXJuITE9PT1uP3RoaXMuZGlzYWJsZSh0KTooKChuPXRoaXMuX25vZGVUb0J1dHRvbih0KSkuaXNTcGxpdD94KG4ubm9kZS5jaGlsZE5vZGVzWzBdKTp4KG4ubm9kZSkpLnJlbW92ZUNsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRpc2FibGVkKS5wcm9wKCJkaXNhYmxlZCIsITEpLG4uZGlzYWJsZWQ9ITEsdGhpcy5fY2hlY2tTcGxpdEVuYWJsZSgpLHRoaXMpfSxpbmRleDpmdW5jdGlvbih0LG4sZSl7bnx8KG49IiIsZT10aGlzLnMuYnV0dG9ucyk7Zm9yKHZhciBvPTAsaT1lLmxlbmd0aDtvPGk7bysrKXt2YXIgcz1lW29dLmJ1dHRvbnM7aWYoZVtvXS5ub2RlPT09dClyZXR1cm4gbitvO2lmKHMmJnMubGVuZ3RoKXtzPXRoaXMuaW5kZXgodCxvKyItIixzKTtpZihudWxsIT09cylyZXR1cm4gc319cmV0dXJuIG51bGx9LG5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jLm5hbWV9LG5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/KHQ9dGhpcy5fbm9kZVRvQnV0dG9uKHQpLHgodC5ub2RlKSk6dGhpcy5kb20uY29udGFpbmVyfSxwcm9jZXNzaW5nOmZ1bmN0aW9uKHQsbil7dmFyIGU9dGhpcy5zLmR0LG89dGhpcy5fbm9kZVRvQnV0dG9uKHQpO3JldHVybiB2b2lkIDA9PT1uP3goby5ub2RlKS5oYXNDbGFzcygicHJvY2Vzc2luZyIpOih4KG8ubm9kZSkudG9nZ2xlQ2xhc3MoInByb2Nlc3NpbmciLG4pLHgoZS50YWJsZSgpLm5vZGUoKSkudHJpZ2dlckhhbmRsZXIoImJ1dHRvbnMtcHJvY2Vzc2luZy5kdCIsW24sZS5idXR0b24odCksZSx4KHQpLG8uY29uZl0pLHRoaXMpfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5fbm9kZVRvQnV0dG9uKHQpLGU9dGhpcy5fbm9kZVRvSG9zdCh0KSxvPXRoaXMucy5kdDtpZihuLmJ1dHRvbnMubGVuZ3RoKWZvcih2YXIgaT1uLmJ1dHRvbnMubGVuZ3RoLTE7MDw9aTtpLS0pdGhpcy5yZW1vdmUobi5idXR0b25zW2ldLm5vZGUpO24uY29uZi5kZXN0cm95aW5nPSEwLG4uY29uZi5kZXN0cm95JiZuLmNvbmYuZGVzdHJveS5jYWxsKG8uYnV0dG9uKHQpLG8seCh0KSxuLmNvbmYpLHRoaXMuX3JlbW92ZUtleShuLmNvbmYpLHgobi5ub2RlKS5yZW1vdmUoKSxuLmluc2VydGVyJiZ4KG4uaW5zZXJ0ZXIpLnJlbW92ZSgpO289eC5pbkFycmF5KG4sZSk7cmV0dXJuIGUuc3BsaWNlKG8sMSksdGhpc30sdGV4dDpmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dChpLHMsby5jb25mKTp0fXZhciBvPXRoaXMuX25vZGVUb0J1dHRvbih0KSx0PW8udGV4dE5vZGUsaT10aGlzLnMuZHQscz14KG8ubm9kZSk7cmV0dXJuIHZvaWQgMD09PW4/ZShvLmNvbmYudGV4dCk6KG8uY29uZi50ZXh0PW4sdC5odG1sKGUobikpLHRoaXMpfSxfY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5zLmR0LG89dC5zZXR0aW5ncygpWzBdLG49dGhpcy5jLmJ1dHRvbnM7by5fYnV0dG9uc3x8KG8uX2J1dHRvbnM9W10pLG8uX2J1dHRvbnMucHVzaCh7aW5zdDp0aGlzLG5hbWU6dGhpcy5jLm5hbWV9KTtmb3IodmFyIGk9MCxzPW4ubGVuZ3RoO2k8cztpKyspdGhpcy5hZGQobltpXSk7dC5vbigiZGVzdHJveSIsZnVuY3Rpb24odCxuKXtuPT09byYmZS5kZXN0cm95KCl9KSx4KCJib2R5Iikub24oImtleXVwLiIrdGhpcy5zLm5hbWVzcGFjZSxmdW5jdGlvbih0KXt2YXIgbjt2LmFjdGl2ZUVsZW1lbnQmJnYuYWN0aXZlRWxlbWVudCE9PXYuYm9keXx8KG49U3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLnRvTG93ZXJDYXNlKCksLTEhPT1lLnMubGlzdGVuS2V5cy50b0xvd2VyQ2FzZSgpLmluZGV4T2YobikmJmUuX2tleXByZXNzKG4sdCkpfSl9LF9hZGRLZXk6ZnVuY3Rpb24odCl7dC5rZXkmJih0aGlzLnMubGlzdGVuS2V5cys9KHguaXNQbGFpbk9iamVjdCh0LmtleSk/dC5rZXk6dCkua2V5KX0sX2RyYXc6ZnVuY3Rpb24odCxuKXt0fHwodD10aGlzLmRvbS5jb250YWluZXIsbj10aGlzLnMuYnV0dG9ucyksdC5jaGlsZHJlbigpLmRldGFjaCgpO2Zvcih2YXIgZT0wLG89bi5sZW5ndGg7ZTxvO2UrKyl0LmFwcGVuZChuW2VdLmluc2VydGVyKSx0LmFwcGVuZCgiICIpLG5bZV0uYnV0dG9ucyYmbltlXS5idXR0b25zLmxlbmd0aCYmdGhpcy5fZHJhdyhuW2VdLmNvbGxlY3Rpb24sbltlXS5idXR0b25zKX0sX2V4cGFuZEJ1dHRvbjpmdW5jdGlvbih0LG4sZSxvLGkscyxyKXtmb3IodmFyIGEsbD10aGlzLnMuZHQsYz10aGlzLmMuZG9tLmNvbGxlY3Rpb24sdT1BcnJheS5pc0FycmF5KG4pP246W25dLGQ9MCxmPSh1PXZvaWQgMD09PW4/QXJyYXkuaXNBcnJheShlKT9lOltlXTp1KS5sZW5ndGg7ZDxmO2QrKyl7dmFyIHA9dGhpcy5fcmVzb2x2ZUV4dGVuZHModVtkXSk7aWYocClpZihhPSEoIXAuY29uZmlnfHwhcC5jb25maWcuc3BsaXQpLEFycmF5LmlzQXJyYXkocCkpdGhpcy5fZXhwYW5kQnV0dG9uKHQscCx2b2lkIDAhPT1oJiZ2b2lkIDAhPT1oLmNvbmY/aC5jb25mLnNwbGl0OnZvaWQgMCxvLHZvaWQgMCE9PXImJnZvaWQgMCE9PXIuc3BsaXQscyxyKTtlbHNle3ZhciBoPXRoaXMuX2J1aWxkQnV0dG9uKHAsbyx2b2lkIDAhPT1wLnNwbGl0fHx2b2lkIDAhPT1wLmNvbmZpZyYmdm9pZCAwIT09cC5jb25maWcuc3BsaXQsaSk7aWYoaCl7aWYobnVsbCE9cz8odC5zcGxpY2UocywwLGgpLHMrKyk6dC5wdXNoKGgpLGguY29uZi5kcm9wSWNvbiYmIWguY29uZi5zcGxpdCYmeChoLm5vZGUpLmFkZENsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRyb3BDbGFzcykuYXBwZW5kKHRoaXMuYy5kb20uYnV0dG9uLmRyb3BIdG1sKSxoLmNvbmYuYnV0dG9ucyYmKGguY29sbGVjdGlvbj14KCI8IitjLmNvbnRhaW5lci5jb250ZW50LnRhZysiLz4iKSxoLmNvbmYuX2NvbGxlY3Rpb249aC5jb2xsZWN0aW9uLHRoaXMuX2V4cGFuZEJ1dHRvbihoLmJ1dHRvbnMsaC5jb25mLmJ1dHRvbnMsaC5jb25mLnNwbGl0LCFhLGEscyxoLmNvbmYpKSxoLmNvbmYuc3BsaXQpe2guY29sbGVjdGlvbj14KCI8IitjLmNvbnRhaW5lci50YWcrIi8+IiksaC5jb25mLl9jb2xsZWN0aW9uPWguY29sbGVjdGlvbjtmb3IodmFyIGI9MDtiPGguY29uZi5zcGxpdC5sZW5ndGg7YisrKXt2YXIgZz1oLmNvbmYuc3BsaXRbYl07Im9iamVjdCI9PXR5cGVvZiBnJiYoZy5wYXJlbnQ9cix2b2lkIDA9PT1nLmNvbGxlY3Rpb25MYXlvdXQmJihnLmNvbGxlY3Rpb25MYXlvdXQ9aC5jb25mLmNvbGxlY3Rpb25MYXlvdXQpLHZvaWQgMD09PWcuZHJvcHVwJiYoZy5kcm9wdXA9aC5jb25mLmRyb3B1cCksdm9pZCAwPT09Zy5mYWRlKSYmKGcuZmFkZT1oLmNvbmYuZmFkZSl9dGhpcy5fZXhwYW5kQnV0dG9uKGguYnV0dG9ucyxoLmNvbmYuYnV0dG9ucyxoLmNvbmYuc3BsaXQsIWEsYSxzLGguY29uZil9aC5jb25mLnBhcmVudD1yLHAuaW5pdCYmcC5pbml0LmNhbGwobC5idXR0b24oaC5ub2RlKSxsLHgoaC5ub2RlKSxwKX19fX0sX2J1aWxkQnV0dG9uOmZ1bmN0aW9uKG4sdCxlLG8pe2Z1bmN0aW9uIGkodCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dChmLGMsbik6dH12YXIgcyxyLGEsbCxjLHU9dGhpcyxkPXRoaXMuYy5kb20sZj10aGlzLnMuZHQscD0hMSxoPXguZXh0ZW5kKCEwLHt9LGQuYnV0dG9uKTtpZih0JiZlJiZkLmNvbGxlY3Rpb24uc3BsaXQ/eC5leHRlbmQoITAsaCxkLmNvbGxlY3Rpb24uc3BsaXQuYWN0aW9uKTpvfHx0P3guZXh0ZW5kKCEwLGgsZC5jb2xsZWN0aW9uLmJ1dHRvbik6ZSYmeC5leHRlbmQoITAsaCxkLnNwbGl0LmJ1dHRvbiksbi5zcGFjZXIpcmV0dXJuIGQ9eCgiPCIraC5zcGFjZXIudGFnKyIvPiIpLmFkZENsYXNzKCJkdC1idXR0b24tc3BhY2VyICIrbi5zdHlsZSsiICIraC5zcGFjZXIuY2xhc3NOYW1lKS5odG1sKGkobi50ZXh0KSkse2NvbmY6bixub2RlOmQsbm9kZUNoaWxkOm51bGwsaW5zZXJ0ZXI6ZCxidXR0b25zOltdLGluQ29sbGVjdGlvbjp0LGlzU3BsaXQ6ZSxjb2xsZWN0aW9uOm51bGwsdGV4dE5vZGU6ZH07aWYobi5hdmFpbGFibGUmJiFuLmF2YWlsYWJsZShmLG4pJiYhbi5odG1sKXJldHVybiExO24uaHRtbD9jPXgobi5odG1sKToocz1mdW5jdGlvbih0LG4sZSxvLGkpe28uYWN0aW9uLmNhbGwobi5idXR0b24oZSksdCxuLGUsbyxpKSx4KG4udGFibGUoKS5ub2RlKCkpLnRyaWdnZXJIYW5kbGVyKCJidXR0b25zLWFjdGlvbi5kdCIsW24uYnV0dG9uKGUpLG4sZSxvXSl9LHI9ZnVuY3Rpb24odCxuLGUsbyl7by5hc3luYz8odS5wcm9jZXNzaW5nKGVbMF0sITApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzKHQsbixlLG8sZnVuY3Rpb24oKXt1LnByb2Nlc3NpbmcoZVswXSwhMSl9KX0sby5hc3luYykpOnModCxuLGUsbyxmdW5jdGlvbigpe30pfSxkPW4udGFnfHxoLnRhZyxhPXZvaWQgMD09PW4uY2xpY2tCbHVyc3x8bi5jbGlja0JsdXJzLGM9eCgiPCIrZCsiLz4iKS5hZGRDbGFzcyhoLmNsYXNzTmFtZSkuYXR0cigiYXJpYS1jb250cm9scyIsdGhpcy5zLmR0LnRhYmxlKCkubm9kZSgpLmlkKS5vbigiY2xpY2suZHRiIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksIWMuaGFzQ2xhc3MoaC5kaXNhYmxlZCkmJm4uYWN0aW9uJiZyKHQsZixjLG4pLGEmJmMudHJpZ2dlcigiYmx1ciIpfSkub24oImtleXByZXNzLmR0YiIsZnVuY3Rpb24odCl7MTM9PT10LmtleUNvZGUmJih0LnByZXZlbnREZWZhdWx0KCksIWMuaGFzQ2xhc3MoaC5kaXNhYmxlZCkpJiZuLmFjdGlvbiYmcih0LGYsYyxuKX0pLCJhIj09PWQudG9Mb3dlckNhc2UoKSYmYy5hdHRyKCJocmVmIiwiIyIpLCJidXR0b24iPT09ZC50b0xvd2VyQ2FzZSgpJiZjLmF0dHIoInR5cGUiLCJidXR0b24iKSxsPWgubGluZXIudGFnPyhkPWgubGluZXIudGFnLnRvTG93ZXJDYXNlKCksbD14KCI8IitkKyIvPiIpLmh0bWwoaShuLnRleHQpKS5hZGRDbGFzcyhoLmxpbmVyLmNsYXNzTmFtZSksImEiPT09ZCYmbC5hdHRyKCJocmVmIiwiIyIpLCJhIiE9PWQmJiJidXR0b24iIT09ZHx8KGwuYXR0cigidGFiaW5kZXgiLHRoaXMucy5kdC5zZXR0aW5ncygpWzBdLmlUYWJJbmRleCkscD0hMCksYy5hcHBlbmQobCksbCk6KGMuaHRtbChpKG4udGV4dCkpLGMpLHB8fGMuYXR0cigidGFiaW5kZXgiLHRoaXMucy5kdC5zZXR0aW5ncygpWzBdLmlUYWJJbmRleCksITE9PT1uLmVuYWJsZWQmJmMuYWRkQ2xhc3MoaC5kaXNhYmxlZCksbi5jbGFzc05hbWUmJmMuYWRkQ2xhc3Mobi5jbGFzc05hbWUpLG4udGl0bGVBdHRyJiZjLmF0dHIoInRpdGxlIixpKG4udGl0bGVBdHRyKSksbi5hdHRyJiZjLmF0dHIobi5hdHRyKSxuLm5hbWVzcGFjZXx8KG4ubmFtZXNwYWNlPSIuZHQtYnV0dG9uLSIrQysrKSx2b2lkIDAhPT1uLmNvbmZpZyYmbi5jb25maWcuc3BsaXQmJihuLnNwbGl0PW4uY29uZmlnLnNwbGl0KSk7dmFyIGIsZyxtLHYsZD10aGlzLmMuZG9tLmJ1dHRvbkNvbnRhaW5lcixwPWQmJmQudGFnP3goIjwiK2QudGFnKyIvPiIpLmFkZENsYXNzKGQuY2xhc3NOYW1lKS5hcHBlbmQoYyk6Yyx5PSh0aGlzLl9hZGRLZXkobiksdGhpcy5jLmJ1dHRvbkNyZWF0ZWQmJihwPXRoaXMuYy5idXR0b25DcmVhdGVkKG4scCkpLGUmJih5PShkPXQ/eC5leHRlbmQoITAsdGhpcy5jLmRvbS5zcGxpdCx0aGlzLmMuZG9tLmNvbGxlY3Rpb24uc3BsaXQpOnRoaXMuYy5kb20uc3BsaXQpLndyYXBwZXIsYj14KCI8Iit5LnRhZysiLz4iKS5hZGRDbGFzcyh5LmNsYXNzTmFtZSkuYXBwZW5kKGMpLGc9eC5leHRlbmQobix7YXV0b0Nsb3NlOiEwLGFsaWduOmQuZHJvcGRvd24uYWxpZ24sYXR0cjp7ImFyaWEtaGFzcG9wdXAiOiJkaWFsb2ciLCJhcmlhLWV4cGFuZGVkIjohMX0sY2xhc3NOYW1lOmQuZHJvcGRvd24uY2xhc3NOYW1lLGNsb3NlQnV0dG9uOiExLHNwbGl0QWxpZ25DbGFzczpkLmRyb3Bkb3duLnNwbGl0QWxpZ25DbGFzcyx0ZXh0OmQuZHJvcGRvd24udGV4dH0pLHRoaXMuX2FkZEtleShnKSxtPWZ1bmN0aW9uKHQsbixlLG8pe18uc3BsaXQuYWN0aW9uLmNhbGwobi5idXR0b24oYiksdCxuLGUsbykseChuLnRhYmxlKCkubm9kZSgpKS50cmlnZ2VySGFuZGxlcigiYnV0dG9ucy1hY3Rpb24uZHQiLFtuLmJ1dHRvbihlKSxuLGUsb10pLGUuYXR0cigiYXJpYS1leHBhbmRlZCIsITApfSx2PXgoJzxidXR0b24gY2xhc3M9IicrZC5kcm9wZG93bi5jbGFzc05hbWUrJyBkdC1idXR0b24iPjwvYnV0dG9uPicpLmh0bWwodGhpcy5jLmRvbS5idXR0b24uZHJvcEh0bWwpLmFkZENsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRyb3BDbGFzcykub24oImNsaWNrLmR0YiIsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksdi5oYXNDbGFzcyhoLmRpc2FibGVkKXx8bSh0LGYsdixnKSxhJiZ2LnRyaWdnZXIoImJsdXIiKX0pLm9uKCJrZXlwcmVzcy5kdGIiLGZ1bmN0aW9uKHQpezEzPT09dC5rZXlDb2RlJiYodC5wcmV2ZW50RGVmYXVsdCgpLHYuaGFzQ2xhc3MoaC5kaXNhYmxlZCl8fG0odCxmLHYsZykpfSksMD09PW4uc3BsaXQubGVuZ3RoJiZ2LmFkZENsYXNzKCJkdGItaGlkZS1kcm9wIiksYi5hcHBlbmQodikuYXR0cihnLmF0dHIpKSwoZT9iOmMpLmdldCgwKSk7cmV0dXJue2NvbmY6bixub2RlOnksbm9kZUNoaWxkOnkmJnkuY2hpbGRyZW4mJnkuY2hpbGRyZW4ubGVuZ3RoP3kuY2hpbGRyZW5bMF06bnVsbCxpbnNlcnRlcjplP2I6cCxidXR0b25zOltdLGluQ29sbGVjdGlvbjp0LGlzU3BsaXQ6ZSxpblNwbGl0Om8sY29sbGVjdGlvbjpudWxsLHRleHROb2RlOmx9fSxfY2hlY2tTcGxpdEVuYWJsZTpmdW5jdGlvbih0KXt0PXR8fHRoaXMucy5idXR0b25zO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgZSxvPXRbbl07by5pc1NwbGl0PyhlPW8ubm9kZS5jaGlsZE5vZGVzWzFdLCh0aGlzLl9jaGVja0FueUVuYWJsZWQoby5idXR0b25zKT94KGUpLnJlbW92ZUNsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRpc2FibGVkKTp4KGUpLmFkZENsYXNzKHRoaXMuYy5kb20uYnV0dG9uLmRpc2FibGVkKSkucHJvcCgiZGlzYWJsZWQiLCExKSk6by5pc0NvbGxlY3Rpb24mJnRoaXMuX2NoZWNrU3BsaXRFbmFibGUoby5idXR0b25zKX19LF9jaGVja0FueUVuYWJsZWQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZGlzYWJsZWQpcmV0dXJuITA7cmV0dXJuITF9LF9ub2RlVG9CdXR0b246ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9MCxvPShuPW58fHRoaXMucy5idXR0b25zKS5sZW5ndGg7ZTxvO2UrKyl7aWYobltlXS5ub2RlPT09dHx8bltlXS5ub2RlQ2hpbGQ9PT10KXJldHVybiBuW2VdO2lmKG5bZV0uYnV0dG9ucy5sZW5ndGgpe3ZhciBpPXRoaXMuX25vZGVUb0J1dHRvbih0LG5bZV0uYnV0dG9ucyk7aWYoaSlyZXR1cm4gaX19fSxfbm9kZVRvSG9zdDpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT0wLG89KG49bnx8dGhpcy5zLmJ1dHRvbnMpLmxlbmd0aDtlPG87ZSsrKXtpZihuW2VdLm5vZGU9PT10KXJldHVybiBuO2lmKG5bZV0uYnV0dG9ucy5sZW5ndGgpe3ZhciBpPXRoaXMuX25vZGVUb0hvc3QodCxuW2VdLmJ1dHRvbnMpO2lmKGkpcmV0dXJuIGl9fX0sX2tleXByZXNzOmZ1bmN0aW9uKHMscil7dmFyIGE7ci5fYnV0dG9uc0hhbmRsZWR8fChhPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlLG89MCxpPXQubGVuZ3RoO288aTtvKyspbj10W29dLmNvbmYsZT10W29dLm5vZGUsIW4ua2V5fHxuLmtleSE9PXMmJigheC5pc1BsYWluT2JqZWN0KG4ua2V5KXx8bi5rZXkua2V5IT09c3x8bi5rZXkuc2hpZnRLZXkmJiFyLnNoaWZ0S2V5fHxuLmtleS5hbHRLZXkmJiFyLmFsdEtleXx8bi5rZXkuY3RybEtleSYmIXIuY3RybEtleXx8bi5rZXkubWV0YUtleSYmIXIubWV0YUtleSl8fChyLl9idXR0b25zSGFuZGxlZD0hMCx4KGUpLmNsaWNrKCkpLHRbb10uYnV0dG9ucy5sZW5ndGgmJmEodFtvXS5idXR0b25zKX0pKHRoaXMucy5idXR0b25zKX0sX3JlbW92ZUtleTpmdW5jdGlvbih0KXt2YXIgbjt0LmtleSYmKHQ9KHguaXNQbGFpbk9iamVjdCh0LmtleSk/dC5rZXk6dCkua2V5LG49dGhpcy5zLmxpc3RlbktleXMuc3BsaXQoIiIpLHQ9eC5pbkFycmF5KHQsbiksbi5zcGxpY2UodCwxKSx0aGlzLnMubGlzdGVuS2V5cz1uLmpvaW4oIiIpKX0sX3Jlc29sdmVFeHRlbmRzOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciBuPTA7IXguaXNQbGFpbk9iamVjdCh0KSYmIUFycmF5LmlzQXJyYXkodCk7KXtpZih2b2lkIDA9PT10KXJldHVybjtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCl7aWYoISh0PXQuY2FsbChpLHMsZSkpKXJldHVybiExfWVsc2UgaWYoInN0cmluZyI9PXR5cGVvZiB0KXtpZighX1t0XSlyZXR1cm57aHRtbDp0fTt0PV9bdF19aWYoMzA8KytuKXRocm93IkJ1dHRvbnM6IFRvbyBtYW55IGl0ZXJhdGlvbnMifXJldHVybiBBcnJheS5pc0FycmF5KHQpP3Q6eC5leHRlbmQoe30sdCl9dmFyIG4sbyxpPXRoaXMscz10aGlzLnMuZHQ7Zm9yKGU9dChlKTtlJiZlLmV4dGVuZDspe2lmKCFfW2UuZXh0ZW5kXSl0aHJvdyJDYW5ub3QgZXh0ZW5kIHVua25vd24gYnV0dG9uIHR5cGU6ICIrZS5leHRlbmQ7dmFyIHI9dChfW2UuZXh0ZW5kXSk7aWYoQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gcjtpZighcilyZXR1cm4hMTt2YXIgYT1yLmNsYXNzTmFtZTt2b2lkIDAhPT1lLmNvbmZpZyYmdm9pZCAwIT09ci5jb25maWcmJihlLmNvbmZpZz14LmV4dGVuZCh7fSxyLmNvbmZpZyxlLmNvbmZpZykpLGU9eC5leHRlbmQoe30scixlKSxhJiZlLmNsYXNzTmFtZSE9PWEmJihlLmNsYXNzTmFtZT1hKyIgIitlLmNsYXNzTmFtZSksZS5leHRlbmQ9ci5leHRlbmR9dmFyIGw9ZS5wb3N0Zml4QnV0dG9ucztpZihsKWZvcihlLmJ1dHRvbnN8fChlLmJ1dHRvbnM9W10pLG49MCxvPWwubGVuZ3RoO248bztuKyspZS5idXR0b25zLnB1c2gobFtuXSk7dmFyIGM9ZS5wcmVmaXhCdXR0b25zO2lmKGMpZm9yKGUuYnV0dG9uc3x8KGUuYnV0dG9ucz1bXSksbj0wLG89Yy5sZW5ndGg7bjxvO24rKyllLmJ1dHRvbnMuc3BsaWNlKG4sMCxjW25dKTtyZXR1cm4gZX0sX3BvcG92ZXI6ZnVuY3Rpb24obyx0LG4pe2Z1bmN0aW9uIGkoKXtwPSEwLHcoeChiKSxoLmZhZGUsZnVuY3Rpb24oKXt4KHRoaXMpLmRldGFjaCgpfSkseChkLmJ1dHRvbnMoJ1thcmlhLWhhc3BvcHVwPSJkaWFsb2ciXVthcmlhLWV4cGFuZGVkPSJ0cnVlIl0nKS5ub2RlcygpKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKSx4KCJkaXYuZHQtYnV0dG9uLWJhY2tncm91bmQiKS5vZmYoImNsaWNrLmR0Yi1jb2xsZWN0aW9uIiksQS5iYWNrZ3JvdW5kKCExLGguYmFja2dyb3VuZENsYXNzTmFtZSxoLmZhZGUsZykseChtKS5vZmYoInJlc2l6ZS5yZXNpemUuZHRiLWNvbGxlY3Rpb24iKSx4KCJib2R5Iikub2ZmKCIuZHRiLWNvbGxlY3Rpb24iKSxkLm9mZigiYnV0dG9ucy1hY3Rpb24uYi1pbnRlcm5hbCIpLGQub2ZmKCJkZXN0cm95IikseCgiYm9keSIpLnRyaWdnZXIoImJ1dHRvbnMtcG9wb3Zlci1oaWRlLmR0Iil9dmFyIGUscyxyLGEsbCxjLHUsZD10LGY9dGhpcy5jLHA9ITEsaD14LmV4dGVuZCh7YWxpZ246ImJ1dHRvbi1sZWZ0IixhdXRvQ2xvc2U6ITEsYmFja2dyb3VuZDohMCxiYWNrZ3JvdW5kQ2xhc3NOYW1lOiJkdC1idXR0b24tYmFja2dyb3VuZCIsY2xvc2VCdXR0b246ITAsY29udGFpbmVyQ2xhc3NOYW1lOmYuZG9tLmNvbGxlY3Rpb24uY29udGFpbmVyLmNsYXNzTmFtZSxjb250ZW50Q2xhc3NOYW1lOmYuZG9tLmNvbGxlY3Rpb24uY29udGFpbmVyLmNvbnRlbnQuY2xhc3NOYW1lLGNvbGxlY3Rpb25MYXlvdXQ6IiIsY29sbGVjdGlvblRpdGxlOiIiLGRyb3B1cDohMSxmYWRlOjQwMCxwb3BvdmVyVGl0bGU6IiIscmlnaHRBbGlnbkNsYXNzTmFtZToiZHQtYnV0dG9uLXJpZ2h0Iix0YWc6Zi5kb20uY29sbGVjdGlvbi5jb250YWluZXIudGFnfSxuKSxiPWgudGFnKyIuIitoLmNvbnRhaW5lckNsYXNzTmFtZS5yZXBsYWNlKC8gL2csIi4iKSxmPXQubm9kZSgpLGc9aC5jb2xsZWN0aW9uTGF5b3V0LmluY2x1ZGVzKCJmaXhlZCIpP3goImJvZHkiKTp0Lm5vZGUoKTshMT09PW8/aSgpOigobj14KGQuYnV0dG9ucygnW2FyaWEtaGFzcG9wdXA9ImRpYWxvZyJdW2FyaWEtZXhwYW5kZWQ9InRydWUiXScpLm5vZGVzKCkpKS5sZW5ndGgmJihnLmNsb3Nlc3QoYikubGVuZ3RoJiYoZz1uLmVxKDApKSxpKCkpLGguc29ydCYmKChuPXgoImJ1dHRvbiIsbykubWFwKGZ1bmN0aW9uKHQsbil7cmV0dXJue3RleHQ6eChuKS50ZXh0KCksZWw6bn19KS50b0FycmF5KCkpLnNvcnQoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC50ZXh0LmxvY2FsZUNvbXBhcmUobi50ZXh0KX0pLHgobykuYXBwZW5kKG4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVsfSkpKSxuPXgoIi5kdC1idXR0b24iLG8pLmxlbmd0aCxhPSIiLDM9PT1uP2E9ImR0Yi1iMyI6Mj09PW4/YT0iZHRiLWIyIjoxPT09biYmKGE9ImR0Yi1iMSIpLGU9eCgiPCIraC50YWcrIi8+IikuYWRkQ2xhc3MoaC5jb250YWluZXJDbGFzc05hbWUpLmFkZENsYXNzKGguY29sbGVjdGlvbkxheW91dCkuYWRkQ2xhc3MoaC5zcGxpdEFsaWduQ2xhc3MpLmFkZENsYXNzKGEpLmNzcygiZGlzcGxheSIsIm5vbmUiKS5hdHRyKHsiYXJpYS1tb2RhbCI6ITAscm9sZToiZGlhbG9nIn0pLG89eChvKS5hZGRDbGFzcyhoLmNvbnRlbnRDbGFzc05hbWUpLmF0dHIoInJvbGUiLCJtZW51IikuYXBwZW5kVG8oZSksZi5hdHRyKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpLGcucGFyZW50cygiYm9keSIpWzBdIT09di5ib2R5JiYoZz14KHYuYm9keSkuY2hpbGRyZW4oImRpdiwgc2VjdGlvbiwgcCIpLmxhc3QoKSksaC5wb3BvdmVyVGl0bGU/ZS5wcmVwZW5kKCc8ZGl2IGNsYXNzPSJkdC1idXR0b24tY29sbGVjdGlvbi10aXRsZSI+JytoLnBvcG92ZXJUaXRsZSsiPC9kaXY+Iik6aC5jb2xsZWN0aW9uVGl0bGUmJmUucHJlcGVuZCgnPGRpdiBjbGFzcz0iZHQtYnV0dG9uLWNvbGxlY3Rpb24tdGl0bGUiPicraC5jb2xsZWN0aW9uVGl0bGUrIjwvZGl2PiIpLGguY2xvc2VCdXR0b24mJmUucHJlcGVuZCgnPGRpdiBjbGFzcz0iZHRiLXBvcG92ZXItY2xvc2UiPiZ0aW1lczs8L2Rpdj4nKS5hZGRDbGFzcygiZHRiLWNvbGxlY3Rpb24tY2xvc2VhYmxlIikseShlLmluc2VydEFmdGVyKGcpLGguZmFkZSksbj14KHQudGFibGUoKS5jb250YWluZXIoKSksYT1lLmNzcygicG9zaXRpb24iKSwiY29udGFpbmVyIiE9PWguc3BhbiYmImR0LWNvbnRhaW5lciIhPT1oLmFsaWdufHwoZz1nLnBhcmVudCgpLGUuY3NzKCJ3aWR0aCIsbi53aWR0aCgpKSksImFic29sdXRlIj09PWE/KGY9eChnWzBdLm9mZnNldFBhcmVudCksdD1nLnBvc2l0aW9uKCksbj1nLm9mZnNldCgpLGE9Zi5vZmZzZXQoKSxzPWYucG9zaXRpb24oKSxyPW0uZ2V0Q29tcHV0ZWRTdHlsZShmWzBdKSxhLmhlaWdodD1mLm91dGVySGVpZ2h0KCksYS53aWR0aD1mLndpZHRoKCkrcGFyc2VGbG9hdChyLnBhZGRpbmdMZWZ0KSxhLnJpZ2h0PWEubGVmdCthLndpZHRoLGEuYm90dG9tPWEudG9wK2EuaGVpZ2h0LGE9dC50b3ArZy5vdXRlckhlaWdodCgpLGw9dC5sZWZ0LGUuY3NzKHt0b3A6YSxsZWZ0Omx9KSxyPW0uZ2V0Q29tcHV0ZWRTdHlsZShlWzBdKSwoYz1lLm9mZnNldCgpKS5oZWlnaHQ9ZS5vdXRlckhlaWdodCgpLGMud2lkdGg9ZS5vdXRlcldpZHRoKCksYy5yaWdodD1jLmxlZnQrYy53aWR0aCxjLmJvdHRvbT1jLnRvcCtjLmhlaWdodCxjLm1hcmdpblRvcD1wYXJzZUZsb2F0KHIubWFyZ2luVG9wKSxjLm1hcmdpbkJvdHRvbT1wYXJzZUZsb2F0KHIubWFyZ2luQm90dG9tKSxoLmRyb3B1cCYmKGE9dC50b3AtYy5oZWlnaHQtYy5tYXJnaW5Ub3AtYy5tYXJnaW5Cb3R0b20pLCJidXR0b24tcmlnaHQiIT09aC5hbGlnbiYmIWUuaGFzQ2xhc3MoaC5yaWdodEFsaWduQ2xhc3NOYW1lKXx8KGw9dC5sZWZ0LWMud2lkdGgrZy5vdXRlcldpZHRoKCkpLCJkdC1jb250YWluZXIiIT09aC5hbGlnbiYmImNvbnRhaW5lciIhPT1oLmFsaWdufHxsPHQubGVmdCYmKGw9LXQubGVmdCkscy5sZWZ0K2wrYy53aWR0aD54KG0pLndpZHRoKCkmJihsPXgobSkud2lkdGgoKS1jLndpZHRoLXMubGVmdCksbi5sZWZ0K2w8MCYmKGw9LW4ubGVmdCkscy50b3ArYStjLmhlaWdodD54KG0pLmhlaWdodCgpK3gobSkuc2Nyb2xsVG9wKCkmJihhPXQudG9wLWMuaGVpZ2h0LWMubWFyZ2luVG9wLWMubWFyZ2luQm90dG9tKSxmLm9mZnNldCgpLnRvcCthPHgobSkuc2Nyb2xsVG9wKCkmJihhPXQudG9wK2cub3V0ZXJIZWlnaHQoKSksZS5jc3Moe3RvcDphLGxlZnQ6bH0pKTooKHU9ZnVuY3Rpb24oKXt2YXIgdD14KG0pLmhlaWdodCgpLzIsbj1lLmhlaWdodCgpLzI7ZS5jc3MoIm1hcmdpblRvcCIsLTEqKG49dDxuP3Q6bikpfSkoKSx4KG0pLm9uKCJyZXNpemUuZHRiLWNvbGxlY3Rpb24iLGZ1bmN0aW9uKCl7dSgpfSkpLGguYmFja2dyb3VuZCYmQS5iYWNrZ3JvdW5kKCEwLGguYmFja2dyb3VuZENsYXNzTmFtZSxoLmZhZGUsaC5iYWNrZ3JvdW5kSG9zdHx8ZykseCgiZGl2LmR0LWJ1dHRvbi1iYWNrZ3JvdW5kIikub24oImNsaWNrLmR0Yi1jb2xsZWN0aW9uIixmdW5jdGlvbigpe30pLGguYXV0b0Nsb3NlJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5vbigiYnV0dG9ucy1hY3Rpb24uYi1pbnRlcm5hbCIsZnVuY3Rpb24odCxuLGUsbyl7b1swXSE9PWdbMF0mJmkoKX0pfSwwKSx4KGUpLnRyaWdnZXIoImJ1dHRvbnMtcG9wb3Zlci5kdCIpLGQub24oImRlc3Ryb3kiLGkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtwPSExLHgoImJvZHkiKS5vbigiY2xpY2suZHRiLWNvbGxlY3Rpb24iLGZ1bmN0aW9uKHQpe3ZhciBuLGU7IXAmJihuPXguZm4uYWRkQmFjaz8iYWRkQmFjayI6ImFuZFNlbGYiLGU9eCh0LnRhcmdldCkucGFyZW50KClbMF0sIXgodC50YXJnZXQpLnBhcmVudHMoKVtuXSgpLmZpbHRlcihvKS5sZW5ndGgmJiF4KGUpLmhhc0NsYXNzKCJkdC1idXR0b25zIil8fHgodC50YXJnZXQpLmhhc0NsYXNzKCJkdC1idXR0b24tYmFja2dyb3VuZCIpKSYmaSgpfSkub24oImtleXVwLmR0Yi1jb2xsZWN0aW9uIixmdW5jdGlvbih0KXsyNz09PXQua2V5Q29kZSYmaSgpfSkub24oImtleWRvd24uZHRiLWNvbGxlY3Rpb24iLGZ1bmN0aW9uKHQpe3ZhciBuPXgoImEsIGJ1dHRvbiIsbyksZT12LmFjdGl2ZUVsZW1lbnQ7OT09PXQua2V5Q29kZSYmKC0xPT09bi5pbmRleChlKT8obi5maXJzdCgpLmZvY3VzKCksdC5wcmV2ZW50RGVmYXVsdCgpKTp0LnNoaWZ0S2V5P2U9PT1uWzBdJiYobi5sYXN0KCkuZm9jdXMoKSx0LnByZXZlbnREZWZhdWx0KCkpOmU9PT1uLmxhc3QoKVswXSYmKG4uZmlyc3QoKS5mb2N1cygpLHQucHJldmVudERlZmF1bHQoKSkpfSl9LDApKX19KSxBLmJhY2tncm91bmQ9ZnVuY3Rpb24odCxuLGUsbyl7dm9pZCAwPT09ZSYmKGU9NDAwKSxvPW98fHYuYm9keSx0P3koeCgiPGRpdi8+IikuYWRkQ2xhc3MobikuY3NzKCJkaXNwbGF5Iiwibm9uZSIpLmluc2VydEFmdGVyKG8pLGUpOncoeCgiZGl2LiIrbiksZSxmdW5jdGlvbigpe3godGhpcykucmVtb3ZlQ2xhc3MobikucmVtb3ZlKCl9KX0sQS5pbnN0YW5jZVNlbGVjdG9yPWZ1bmN0aW9uKHQscyl7dmFyIHIsYSxsO3JldHVybiBudWxsPT10P3gubWFwKHMsZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5zdH0pOihyPVtdLGE9eC5tYXAocyxmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lfSksKGw9ZnVuY3Rpb24odCl7dmFyIG47aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGU9MCxvPXQubGVuZ3RoO2U8bztlKyspbCh0W2VdKTtlbHNlIGlmKCJzdHJpbmciPT10eXBlb2YgdCktMSE9PXQuaW5kZXhPZigiLCIpP2wodC5zcGxpdCgiLCIpKTotMSE9PShuPXguaW5BcnJheSh0LnRyaW0oKSxhKSkmJnIucHVzaChzW25dLmluc3QpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiB0KXIucHVzaChzW3RdLmluc3QpO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiB0JiZ0Lm5vZGVOYW1lKWZvcih2YXIgaT0wO2k8cy5sZW5ndGg7aSsrKXNbaV0uaW5zdC5kb20uY29udGFpbmVyWzBdPT09dCYmci5wdXNoKHNbaV0uaW5zdCk7ZWxzZSJvYmplY3QiPT10eXBlb2YgdCYmci5wdXNoKHQpfSkodCkscil9LEEuYnV0dG9uU2VsZWN0b3I9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGM9W10sdT1mdW5jdGlvbih0LG4sZSl7Zm9yKHZhciBvLGkscz0wLHI9bi5sZW5ndGg7czxyO3MrKykobz1uW3NdKSYmKHQucHVzaCh7bm9kZTpvLm5vZGUsbmFtZTpvLmNvbmYubmFtZSxpZHg6aT12b2lkIDAhPT1lP2UrczpzKyIifSksby5idXR0b25zKSYmdSh0LG8uYnV0dG9ucyxpKyItIil9LGQ9ZnVuY3Rpb24odCxuKXt2YXIgZT1bXSxvPSh1KGUsbi5zLmJ1dHRvbnMpLHgubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJuIHQubm9kZX0pKTtpZihBcnJheS5pc0FycmF5KHQpfHx0IGluc3RhbmNlb2YgeClmb3Iocz0wLHI9dC5sZW5ndGg7czxyO3MrKylkKHRbc10sbik7ZWxzZSBpZihudWxsPT10fHwiKiI9PT10KWZvcihzPTAscj1lLmxlbmd0aDtzPHI7cysrKWMucHVzaCh7aW5zdDpuLG5vZGU6ZVtzXS5ub2RlfSk7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIHQpbi5zLmJ1dHRvbnNbdF0mJmMucHVzaCh7aW5zdDpuLG5vZGU6bi5zLmJ1dHRvbnNbdF0ubm9kZX0pO2Vsc2UgaWYoInN0cmluZyI9PXR5cGVvZiB0KWlmKC0xIT09dC5pbmRleE9mKCIsIikpZm9yKHZhciBpPXQuc3BsaXQoIiwiKSxzPTAscj1pLmxlbmd0aDtzPHI7cysrKWQoaVtzXS50cmltKCksbik7ZWxzZSBpZih0Lm1hdGNoKC9eXGQrKFwtXGQrKSokLykpe3ZhciBhPXgubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJuIHQuaWR4fSk7Yy5wdXNoKHtpbnN0Om4sbm9kZTplW3guaW5BcnJheSh0LGEpXS5ub2RlfSl9ZWxzZSBpZigtMSE9PXQuaW5kZXhPZigiOm5hbWUiKSl7dmFyIGw9dC5yZXBsYWNlKCI6bmFtZSIsIiIpO2ZvcihzPTAscj1lLmxlbmd0aDtzPHI7cysrKWVbc10ubmFtZT09PWwmJmMucHVzaCh7aW5zdDpuLG5vZGU6ZVtzXS5ub2RlfSl9ZWxzZSB4KG8pLmZpbHRlcih0KS5lYWNoKGZ1bmN0aW9uKCl7Yy5wdXNoKHtpbnN0Om4sbm9kZTp0aGlzfSl9KTtlbHNlIm9iamVjdCI9PXR5cGVvZiB0JiZ0Lm5vZGVOYW1lJiYtMSE9PShhPXguaW5BcnJheSh0LG8pKSYmYy5wdXNoKHtpbnN0Om4sbm9kZTpvW2FdfSl9LGU9MCxvPXQubGVuZ3RoO2U8bztlKyspe3ZhciBpPXRbZV07ZChuLGkpfXJldHVybiBjfSxBLnN0cmlwRGF0YT1mdW5jdGlvbih0LG4pe3JldHVybiJzdHJpbmciPT10eXBlb2YodD1udWxsIT09dCYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0Lm5vZGVOYW1lJiZ0Lm5vZGVUeXBlP3QuaW5uZXJIVE1MOnQpJiYodD1BLnN0cmlwSHRtbFNjcmlwdCh0KSx0PUEuc3RyaXBIdG1sQ29tbWVudHModCksbiYmIW4uc3RyaXBIdG1sfHwodD1lLnV0aWwuc3RyaXBIdG1sKHQpKSxuJiYhbi50cmltfHwodD10LnRyaW0oKSksbiYmIW4uc3RyaXBOZXdsaW5lc3x8KHQ9dC5yZXBsYWNlKC9cbi9nLCIgIikpLG4mJiFuLmRlY29kZUVudGl0aWVzfHwodD1pP2kodCk6KGMuaW5uZXJIVE1MPXQsYy52YWx1ZSkpLCFufHxuLmVzY2FwZUV4Y2VsRm9ybXVsYSkmJnQubWF0Y2goL15bPStcLUBcdFxyXS8pJiYoY29uc29sZS5sb2coIm1hdGNoaW5nIGFuZCB1cGRhdGVpbmciKSx0PSInIit0KSx0fSxBLmVudGl0eURlY29kZXI9ZnVuY3Rpb24odCl7aT10fSxBLnN0cmlwSHRtbENvbW1lbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbjsodD0obj10KS5yZXBsYWNlKC8oPCEtLS4qPy0tIT8+KXwoPCEtLVtcU1xzXSs/LS0hPz4pfCg8IS0tW1xTXHNdKj8kKS9nLCIiKSkhPT1uOyk7cmV0dXJuIHR9LEEuc3RyaXBIdG1sU2NyaXB0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgbjsodD0obj10KS5yZXBsYWNlKC88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdFtePl0qPik8W148XSopKjxcL3NjcmlwdFtePl0qPi9naSwiIikpIT09bjspO3JldHVybiB0fSxBLmRlZmF1bHRzPXtidXR0b25zOlsiY29weSIsImV4Y2VsIiwiY3N2IiwicGRmIiwicHJpbnQiXSxuYW1lOiJtYWluIix0YWJJbmRleDowLGRvbTp7Y29udGFpbmVyOnt0YWc6ImRpdiIsY2xhc3NOYW1lOiJkdC1idXR0b25zIn0sY29sbGVjdGlvbjp7Y29udGFpbmVyOntjbGFzc05hbWU6ImR0LWJ1dHRvbi1jb2xsZWN0aW9uIixjb250ZW50OntjbGFzc05hbWU6IiIsdGFnOiJkaXYifSx0YWc6ImRpdiJ9fSxidXR0b246e3RhZzoiYnV0dG9uIixjbGFzc05hbWU6ImR0LWJ1dHRvbiIsYWN0aXZlOiJkdC1idXR0b24tYWN0aXZlIixkaXNhYmxlZDoiZGlzYWJsZWQiLHNwYWNlcjp7Y2xhc3NOYW1lOiJkdC1idXR0b24tc3BhY2VyIix0YWc6InNwYW4ifSxsaW5lcjp7dGFnOiJzcGFuIixjbGFzc05hbWU6IiJ9LGRyb3BDbGFzczoiIixkcm9wSHRtbDonPHNwYW4gY2xhc3M9ImR0LWJ1dHRvbi1kb3duLWFycm93Ij4mI3gyNUJDOzwvc3Bhbj4nfSxzcGxpdDp7YWN0aW9uOntjbGFzc05hbWU6ImR0LWJ1dHRvbi1zcGxpdC1kcm9wLWJ1dHRvbiBkdC1idXR0b24iLHRhZzoiYnV0dG9uIn0sZHJvcGRvd246e2FsaWduOiJzcGxpdC1yaWdodCIsY2xhc3NOYW1lOiJkdC1idXR0b24tc3BsaXQtZHJvcCIsc3BsaXRBbGlnbkNsYXNzOiJkdC1idXR0b24tc3BsaXQtbGVmdCIsdGFnOiJidXR0b24ifSx3cmFwcGVyOntjbGFzc05hbWU6ImR0LWJ1dHRvbi1zcGxpdCIsdGFnOiJkaXYifX19fSx4LmV4dGVuZChfLHtjb2xsZWN0aW9uOnt0ZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmkxOG4oImJ1dHRvbnMuY29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iKX0sY2xhc3NOYW1lOiJidXR0b25zLWNvbGxlY3Rpb24iLGNsb3NlQnV0dG9uOiEoQS52ZXJzaW9uPSIzLjIuNCIpLGRyb3BJY29uOiEwLGluaXQ6ZnVuY3Rpb24odCxuKXtuLmF0dHIoImFyaWEtZXhwYW5kZWQiLCExKX0sYWN0aW9uOmZ1bmN0aW9uKHQsbixlLG8pe28uX2NvbGxlY3Rpb24ucGFyZW50cygiYm9keSIpLmxlbmd0aD90aGlzLnBvcG92ZXIoITEsbyk6dGhpcy5wb3BvdmVyKG8uX2NvbGxlY3Rpb24sbyksImtleXByZXNzIj09PXQudHlwZSYmeCgiYSwgYnV0dG9uIixvLl9jb2xsZWN0aW9uKS5lcSgwKS5mb2N1cygpfSxhdHRyOnsiYXJpYS1oYXNwb3B1cCI6ImRpYWxvZyJ9fSxzcGxpdDp7dGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLnNwbGl0IiwiU3BsaXQiKX0sY2xhc3NOYW1lOiJidXR0b25zLXNwbGl0IixjbG9zZUJ1dHRvbjohMSxpbml0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIG4uYXR0cigiYXJpYS1leHBhbmRlZCIsITEpfSxhY3Rpb246ZnVuY3Rpb24odCxuLGUsbyl7dGhpcy5wb3BvdmVyKG8uX2NvbGxlY3Rpb24sbyl9LGF0dHI6eyJhcmlhLWhhc3BvcHVwIjoiZGlhbG9nIn19LGNvcHk6ZnVuY3Rpb24oKXtpZihfLmNvcHlIdG1sNSlyZXR1cm4iY29weUh0bWw1In0sY3N2OmZ1bmN0aW9uKHQsbil7aWYoXy5jc3ZIdG1sNSYmXy5jc3ZIdG1sNS5hdmFpbGFibGUodCxuKSlyZXR1cm4iY3N2SHRtbDUifSxleGNlbDpmdW5jdGlvbih0LG4pe2lmKF8uZXhjZWxIdG1sNSYmXy5leGNlbEh0bWw1LmF2YWlsYWJsZSh0LG4pKXJldHVybiJleGNlbEh0bWw1In0scGRmOmZ1bmN0aW9uKHQsbil7aWYoXy5wZGZIdG1sNSYmXy5wZGZIdG1sNS5hdmFpbGFibGUodCxuKSlyZXR1cm4icGRmSHRtbDUifSxwYWdlTGVuZ3RoOmZ1bmN0aW9uKHQpe3ZhciBuPXQuc2V0dGluZ3MoKVswXS5hTGVuZ3RoTWVudSxlPVtdLG89W107aWYoQXJyYXkuaXNBcnJheShuWzBdKSllPW5bMF0sbz1uWzFdO2Vsc2UgZm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBzPW5baV07eC5pc1BsYWluT2JqZWN0KHMpPyhlLnB1c2gocy52YWx1ZSksby5wdXNoKHMubGFiZWwpKTooZS5wdXNoKHMpLG8ucHVzaChzKSl9cmV0dXJue2V4dGVuZDoiY29sbGVjdGlvbiIsdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLnBhZ2VMZW5ndGgiLHsiLTEiOiJTaG93IGFsbCByb3dzIixfOiJTaG93ICVkIHJvd3MifSx0LnBhZ2UubGVuKCkpfSxjbGFzc05hbWU6ImJ1dHRvbnMtcGFnZS1sZW5ndGgiLGF1dG9DbG9zZTohMCxidXR0b25zOngubWFwKGUsZnVuY3Rpb24ocyx0KXtyZXR1cm57dGV4dDpvW3RdLGNsYXNzTmFtZToiYnV0dG9uLXBhZ2UtbGVuZ3RoIixhY3Rpb246ZnVuY3Rpb24odCxuKXtuLnBhZ2UubGVuKHMpLmRyYXcoKX0saW5pdDpmdW5jdGlvbih0LG4sZSl7ZnVuY3Rpb24gbygpe2kuYWN0aXZlKHQucGFnZS5sZW4oKT09PXMpfXZhciBpPXRoaXM7dC5vbigibGVuZ3RoLmR0IitlLm5hbWVzcGFjZSxvKSxvKCl9LGRlc3Ryb3k6ZnVuY3Rpb24odCxuLGUpe3Qub2ZmKCJsZW5ndGguZHQiK2UubmFtZXNwYWNlKX19fSksaW5pdDpmdW5jdGlvbih0LG4sZSl7dmFyIG89dGhpczt0Lm9uKCJsZW5ndGguZHQiK2UubmFtZXNwYWNlLGZ1bmN0aW9uKCl7by50ZXh0KGUudGV4dCl9KX0sZGVzdHJveTpmdW5jdGlvbih0LG4sZSl7dC5vZmYoImxlbmd0aC5kdCIrZS5uYW1lc3BhY2UpfX19LHNwYWNlcjp7c3R5bGU6ImVtcHR5IixzcGFjZXI6ITAsdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLnNwYWNlciIsIiIpfX19KSxlLkFwaS5yZWdpc3RlcigiYnV0dG9ucygpIixmdW5jdGlvbihuLGUpe3ZvaWQgMD09PWUmJihlPW4sbj12b2lkIDApLHRoaXMuc2VsZWN0b3IuYnV0dG9uR3JvdXA9bjt2YXIgdD10aGlzLml0ZXJhdG9yKCEwLCJ0YWJsZSIsZnVuY3Rpb24odCl7aWYodC5fYnV0dG9ucylyZXR1cm4gQS5idXR0b25TZWxlY3RvcihBLmluc3RhbmNlU2VsZWN0b3Iobix0Ll9idXR0b25zKSxlKX0sITApO3JldHVybiB0Ll9ncm91cFNlbGVjdG9yPW4sdH0pLGUuQXBpLnJlZ2lzdGVyKCJidXR0b24oKSIsZnVuY3Rpb24odCxuKXt0PXRoaXMuYnV0dG9ucyh0LG4pO3JldHVybiAxPHQubGVuZ3RoJiZ0LnNwbGljZSgxLHQubGVuZ3RoKSx0fSksZS5BcGkucmVnaXN0ZXJQbHVyYWwoImJ1dHRvbnMoKS5hY3RpdmUoKSIsImJ1dHRvbigpLmFjdGl2ZSgpIixmdW5jdGlvbihuKXtyZXR1cm4gdm9pZCAwPT09bj90aGlzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnN0LmFjdGl2ZSh0Lm5vZGUpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3QuaW5zdC5hY3RpdmUodC5ub2RlLG4pfSl9KSxlLkFwaS5yZWdpc3RlclBsdXJhbCgiYnV0dG9ucygpLmFjdGlvbigpIiwiYnV0dG9uKCkuYWN0aW9uKCkiLGZ1bmN0aW9uKG4pe3JldHVybiB2b2lkIDA9PT1uP3RoaXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmluc3QuYWN0aW9uKHQubm9kZSl9KTp0aGlzLmVhY2goZnVuY3Rpb24odCl7dC5pbnN0LmFjdGlvbih0Lm5vZGUsbil9KX0pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkuY29sbGVjdGlvblJlYnVpbGQoKSIsImJ1dHRvbigpLmNvbGxlY3Rpb25SZWJ1aWxkKCkiLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspIm9iamVjdCI9PXR5cGVvZiBlW25dJiYoZVtuXS5wYXJlbnRDb25mPXQpO3QuaW5zdC5jb2xsZWN0aW9uUmVidWlsZCh0Lm5vZGUsZSl9KX0pLGUuQXBpLnJlZ2lzdGVyKFsiYnV0dG9ucygpLmVuYWJsZSgpIiwiYnV0dG9uKCkuZW5hYmxlKCkiXSxmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3QuaW5zdC5lbmFibGUodC5ub2RlLG4pfSl9KSxlLkFwaS5yZWdpc3RlcihbImJ1dHRvbnMoKS5kaXNhYmxlKCkiLCJidXR0b24oKS5kaXNhYmxlKCkiXSxmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7dC5pbnN0LmRpc2FibGUodC5ub2RlKX0pfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbigpLmluZGV4KCkiLGZ1bmN0aW9uKCl7dmFyIG49bnVsbDtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3Q9dC5pbnN0LmluZGV4KHQubm9kZSk7bnVsbCE9PXQmJihuPXQpfSksbn0pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkubm9kZXMoKSIsImJ1dHRvbigpLm5vZGUoKSIsZnVuY3Rpb24oKXt2YXIgbj14KCk7cmV0dXJuIHgodGhpcy5lYWNoKGZ1bmN0aW9uKHQpe249bi5hZGQodC5pbnN0Lm5vZGUodC5ub2RlKSl9KSksbn0pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkucHJvY2Vzc2luZygpIiwiYnV0dG9uKCkucHJvY2Vzc2luZygpIixmdW5jdGlvbihuKXtyZXR1cm4gdm9pZCAwPT09bj90aGlzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnN0LnByb2Nlc3NpbmcodC5ub2RlKX0pOnRoaXMuZWFjaChmdW5jdGlvbih0KXt0Lmluc3QucHJvY2Vzc2luZyh0Lm5vZGUsbil9KX0pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkudGV4dCgpIiwiYnV0dG9uKCkudGV4dCgpIixmdW5jdGlvbihuKXtyZXR1cm4gdm9pZCAwPT09bj90aGlzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnN0LnRleHQodC5ub2RlKX0pOnRoaXMuZWFjaChmdW5jdGlvbih0KXt0Lmluc3QudGV4dCh0Lm5vZGUsbil9KX0pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkudHJpZ2dlcigpIiwiYnV0dG9uKCkudHJpZ2dlcigpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7dC5pbnN0Lm5vZGUodC5ub2RlKS50cmlnZ2VyKCJjbGljayIpfSl9KSxlLkFwaS5yZWdpc3RlcigiYnV0dG9uKCkucG9wb3ZlcigpIixmdW5jdGlvbihuLGUpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnN0Ll9wb3BvdmVyKG4sdGhpcy5idXR0b24odGhpc1swXS5ub2RlKSxlKX0pfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbnMoKS5jb250YWluZXJzKCkiLGZ1bmN0aW9uKCl7dmFyIGk9eCgpLHM9dGhpcy5fZ3JvdXBTZWxlY3RvcjtyZXR1cm4gdGhpcy5pdGVyYXRvcighMCwidGFibGUiLGZ1bmN0aW9uKHQpe2lmKHQuX2J1dHRvbnMpZm9yKHZhciBuPUEuaW5zdGFuY2VTZWxlY3RvcihzLHQuX2J1dHRvbnMpLGU9MCxvPW4ubGVuZ3RoO2U8bztlKyspaT1pLmFkZChuW2VdLmNvbnRhaW5lcigpKX0pLGl9KSxlLkFwaS5yZWdpc3RlcigiYnV0dG9ucygpLmNvbnRhaW5lcigpIixmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lcnMoKS5lcSgwKX0pLGUuQXBpLnJlZ2lzdGVyKCJidXR0b24oKS5hZGQoKSIsZnVuY3Rpb24odCxuLGUpe3ZhciBvPXRoaXMuY29udGV4dDtyZXR1cm4gby5sZW5ndGgmJihvPUEuaW5zdGFuY2VTZWxlY3Rvcih0aGlzLl9ncm91cFNlbGVjdG9yLG9bMF0uX2J1dHRvbnMpKS5sZW5ndGgmJm9bMF0uYWRkKG4sdCxlKSx0aGlzLmJ1dHRvbih0aGlzLl9ncm91cFNlbGVjdG9yLHQpfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbnMoKS5kZXN0cm95KCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGx1Y2soImluc3QiKS51bmlxdWUoKS5lYWNoKGZ1bmN0aW9uKHQpe3QuZGVzdHJveSgpfSksdGhpc30pLGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCJidXR0b25zKCkucmVtb3ZlKCkiLCJidXR0b25zKCkucmVtb3ZlKCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt0Lmluc3QucmVtb3ZlKHQubm9kZSl9KSx0aGlzfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbnMuaW5mbygpIixmdW5jdGlvbih0LG4sZSl7dmFyIG89dGhpcztyZXR1cm4hMT09PXQ/KHRoaXMub2ZmKCJkZXN0cm95LmJ0bi1pbmZvIiksdyh4KCIjZGF0YXRhYmxlc19idXR0b25zX2luZm8iKSw0MDAsZnVuY3Rpb24oKXt4KHRoaXMpLnJlbW92ZSgpfSksY2xlYXJUaW1lb3V0KHMpLHM9bnVsbCk6KHMmJmNsZWFyVGltZW91dChzKSx4KCIjZGF0YXRhYmxlc19idXR0b25zX2luZm8iKS5sZW5ndGgmJngoIiNkYXRhdGFibGVzX2J1dHRvbnNfaW5mbyIpLnJlbW92ZSgpLHQ9dD8iPGgyPiIrdCsiPC9oMj4iOiIiLHkoeCgnPGRpdiBpZD0iZGF0YXRhYmxlc19idXR0b25zX2luZm8iIGNsYXNzPSJkdC1idXR0b24taW5mbyIvPicpLmh0bWwodCkuYXBwZW5kKHgoIjxkaXYvPiIpWyJzdHJpbmciPT10eXBlb2Ygbj8iaHRtbCI6ImFwcGVuZCJdKG4pKS5jc3MoImRpc3BsYXkiLCJub25lIikuYXBwZW5kVG8oImJvZHkiKSksdm9pZCAwIT09ZSYmMCE9PWUmJihzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmJ1dHRvbnMuaW5mbyghMSl9LGUpKSx0aGlzLm9uKCJkZXN0cm95LmJ0bi1pbmZvIixmdW5jdGlvbigpe28uYnV0dG9ucy5pbmZvKCExKX0pKSx0aGlzfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbnMuZXhwb3J0RGF0YSgpIixmdW5jdGlvbih0KXtpZih0aGlzLmNvbnRleHQubGVuZ3RoKXJldHVybiB1KG5ldyBlLkFwaSh0aGlzLmNvbnRleHRbMF0pLHQpfSksZS5BcGkucmVnaXN0ZXIoImJ1dHRvbnMuZXhwb3J0SW5mbygpIixmdW5jdGlvbih0KXtyZXR1cm57ZmlsZW5hbWU6bih0PXR8fHt9LHRoaXMpLHRpdGxlOmEodCx0aGlzKSxtZXNzYWdlVG9wOmwodGhpcyx0LHQubWVzc2FnZXx8dC5tZXNzYWdlVG9wLCJ0b3AiKSxtZXNzYWdlQm90dG9tOmwodGhpcyx0LHQubWVzc2FnZUJvdHRvbSwiYm90dG9tIil9fSk7dmFyIHMsbj1mdW5jdGlvbih0LG4pe3ZhciBlO3JldHVybiBudWxsPT0oZT0iZnVuY3Rpb24iPT10eXBlb2YoZT0iKiI9PT10LmZpbGVuYW1lJiYiKiIhPT10LnRpdGxlJiZ2b2lkIDAhPT10LnRpdGxlJiZudWxsIT09dC50aXRsZSYmIiIhPT10LnRpdGxlP3QudGl0bGU6dC5maWxlbmFtZSk/ZSh0LG4pOmUpP251bGw6KGU9KGU9LTEhPT1lLmluZGV4T2YoIioiKT9lLnJlcGxhY2UoL1wqL2cseCgiaGVhZCA+IHRpdGxlIikudGV4dCgpKS50cmltKCk6ZSkucmVwbGFjZSgvW15hLXpBLVowLTlfXHUwMEExLVx1RkZGRlwuLFwtXyAhXChcKV0vZywiIikpKyhyKHQuZXh0ZW5zaW9uLHQsbil8fCIiKX0scj1mdW5jdGlvbih0LG4sZSl7cmV0dXJuIG51bGw9PXQ/bnVsbDoiZnVuY3Rpb24iPT10eXBlb2YgdD90KG4sZSk6dH0sYT1mdW5jdGlvbih0LG4pe3Q9cih0LnRpdGxlLHQsbik7cmV0dXJuIG51bGw9PT10P251bGw6LTEhPT10LmluZGV4T2YoIioiKT90LnJlcGxhY2UoL1wqL2cseCgiaGVhZCA+IHRpdGxlIikudGV4dCgpfHwiRXhwb3J0ZWQgZGF0YSIpOnR9LGw9ZnVuY3Rpb24odCxuLGUsbyl7ZT1yKGUsbix0KTtyZXR1cm4gbnVsbD09PWU/bnVsbDoobj14KCJjYXB0aW9uIix0LnRhYmxlKCkuY29udGFpbmVyKCkpLmVxKDApLCIqIj09PWU/bi5jc3MoImNhcHRpb24tc2lkZSIpIT09bz9udWxsOm4ubGVuZ3RoP24udGV4dCgpOiIiOmUpfSxjPXgoIjx0ZXh0YXJlYS8+IilbMF0sdT1mdW5jdGlvbihpLHQpe2Zvcih2YXIgcz14LmV4dGVuZCghMCx7fSx7cm93czpudWxsLGNvbHVtbnM6IiIsbW9kaWZpZXI6e3NlYXJjaDoiYXBwbGllZCIsb3JkZXI6ImFwcGxpZWQifSxvcnRob2dvbmFsOiJkaXNwbGF5IixzdHJpcEh0bWw6ITAsc3RyaXBOZXdsaW5lczohMCxkZWNvZGVFbnRpdGllczohMCxlc2NhcGVFeGNlbEZvcm11bGE6ITEsdHJpbTohMCxmb3JtYXQ6e2hlYWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gQS5zdHJpcERhdGEodCxzKX0sZm9vdGVyOmZ1bmN0aW9uKHQpe3JldHVybiBBLnN0cmlwRGF0YSh0LHMpfSxib2R5OmZ1bmN0aW9uKHQpe3JldHVybiBBLnN0cmlwRGF0YSh0LHMpfX0sY3VzdG9taXplRGF0YTpudWxsLGN1c3RvbWl6ZVppcDpudWxsfSx0KSx0PWkuY29sdW1ucyhzLmNvbHVtbnMpLmluZGV4ZXMoKS5tYXAoZnVuY3Rpb24odCl7dmFyIG49aS5jb2x1bW4odCk7cmV0dXJuIHMuZm9ybWF0LmhlYWRlcihuLnRpdGxlKCksdCxuLmhlYWRlcigpKX0pLnRvQXJyYXkoKSxuPWkudGFibGUoKS5mb290ZXIoKT9pLmNvbHVtbnMocy5jb2x1bW5zKS5pbmRleGVzKCkubWFwKGZ1bmN0aW9uKHQpe3ZhciBuLGU9aS5jb2x1bW4odCkuZm9vdGVyKCksbz0iIjtyZXR1cm4gZSYmKG89KChuPXgoIi5kdC1jb2x1bW4tdGl0bGUiLGUpKS5sZW5ndGg/bjp4KGUpKS5odG1sKCkpLHMuZm9ybWF0LmZvb3RlcihvLHQsZSl9KS50b0FycmF5KCk6bnVsbCxlPXguZXh0ZW5kKHt9LHMubW9kaWZpZXIpLG89KGkuc2VsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgaS5zZWxlY3QuaW5mbyYmdm9pZCAwPT09ZS5zZWxlY3RlZCYmaS5yb3dzKHMucm93cyx4LmV4dGVuZCh7c2VsZWN0ZWQ6ITB9LGUpKS5hbnkoKSYmeC5leHRlbmQoZSx7c2VsZWN0ZWQ6ITB9KSxpLnJvd3Mocy5yb3dzLGUpLmluZGV4ZXMoKS50b0FycmF5KCkpLG89aS5jZWxscyhvLHMuY29sdW1ucyx7b3JkZXI6ZS5vcmRlcn0pLHI9by5yZW5kZXIocy5vcnRob2dvbmFsKS50b0FycmF5KCksYT1vLm5vZGVzKCkudG9BcnJheSgpLGw9by5pbmRleGVzKCkudG9BcnJheSgpLGM9aS5jb2x1bW5zKHMuY29sdW1ucykuY291bnQoKSx1PVtdLGQ9MCxmPTAscD0wPGM/ci5sZW5ndGgvYzowO2Y8cDtmKyspe2Zvcih2YXIgaD1bY10sYj0wO2I8YztiKyspaFtiXT1zLmZvcm1hdC5ib2R5KHJbZF0sbFtkXS5yb3csbFtkXS5jb2x1bW4sYVtkXSksZCsrO3VbZl09aH1lPXtoZWFkZXI6dCxoZWFkZXJTdHJ1Y3R1cmU6ZyhzLmZvcm1hdC5oZWFkZXIsaS50YWJsZSgpLmhlYWRlci5zdHJ1Y3R1cmUocy5jb2x1bW5zKSksZm9vdGVyOm4sZm9vdGVyU3RydWN0dXJlOmcocy5mb3JtYXQuZm9vdGVyLGkudGFibGUoKS5mb290ZXIuc3RydWN0dXJlKHMuY29sdW1ucykpLGJvZHk6dX07cmV0dXJuIHMuY3VzdG9taXplRGF0YSYmcy5jdXN0b21pemVEYXRhKGUpLGV9O2Z1bmN0aW9uIGcodCxuKXtmb3IodmFyIGU9MDtlPG4ubGVuZ3RoO2UrKylmb3IodmFyIG89MDtvPG5bZV0ubGVuZ3RoO28rKyl7dmFyIGk9bltlXVtvXTtpJiYoaS50aXRsZT10KGkudGl0bGUsbyxpLmNlbGwpKX1yZXR1cm4gbn1mdW5jdGlvbiB0KHQsbil7dD1uZXcgZS5BcGkodCksbj1ufHx0LmluaXQoKS5idXR0b25zfHxlLmRlZmF1bHRzLmJ1dHRvbnM7cmV0dXJuIG5ldyBBKHQsbikuY29udGFpbmVyKCl9cmV0dXJuIHguZm4uZGF0YVRhYmxlLkJ1dHRvbnM9QSx4LmZuLkRhdGFUYWJsZS5CdXR0b25zPUEseCh2KS5vbigiaW5pdC5kdCBwbHVnaW4taW5pdC5kdCIsZnVuY3Rpb24odCxuKXsiZHQiPT09dC5uYW1lc3BhY2UmJih0PW4ub0luaXQuYnV0dG9uc3x8ZS5kZWZhdWx0cy5idXR0b25zKSYmIW4uX2J1dHRvbnMmJm5ldyBBKG4sdCkuY29udGFpbmVyKCl9KSxlLmV4dC5mZWF0dXJlLnB1c2goe2ZuSW5pdDp0LGNGZWF0dXJlOiJCIn0pLGUuZmVhdHVyZSYmZS5mZWF0dXJlLnJlZ2lzdGVyKCJidXR0b25zIix0KSxlfSk7CgovKiEgQm9vdHN0cmFwIGludGVncmF0aW9uIGZvciBEYXRhVGFibGVzJyBCdXR0b25zCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohZnVuY3Rpb24oZSl7dmFyIG8sYTsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSIsImRhdGF0YWJsZXMubmV0LWJzNCIsImRhdGF0YWJsZXMubmV0LWJ1dHRvbnMiXSxmdW5jdGlvbih0KXtyZXR1cm4gZSh0LHdpbmRvdyxkb2N1bWVudCl9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/KG89cmVxdWlyZSgianF1ZXJ5IiksYT1mdW5jdGlvbih0LG4pe24uZm4uZGF0YVRhYmxlfHxyZXF1aXJlKCJkYXRhdGFibGVzLm5ldC1iczQiKSh0LG4pLG4uZm4uZGF0YVRhYmxlLkJ1dHRvbnN8fHJlcXVpcmUoImRhdGF0YWJsZXMubmV0LWJ1dHRvbnMiKSh0LG4pfSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybiB0PXR8fHdpbmRvdyxuPW58fG8odCksYSh0LG4pLGUobiwwLHQuZG9jdW1lbnQpfTooYSh3aW5kb3csbyksbW9kdWxlLmV4cG9ydHM9ZShvLHdpbmRvdyx3aW5kb3cuZG9jdW1lbnQpKSk6ZShqUXVlcnksd2luZG93LGRvY3VtZW50KX0oZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbz1lLmZuLmRhdGFUYWJsZTtyZXR1cm4gZS5leHRlbmQoITAsby5CdXR0b25zLmRlZmF1bHRzLHtkb206e2NvbnRhaW5lcjp7Y2xhc3NOYW1lOiJkdC1idXR0b25zIGJ0bi1ncm91cCBmbGV4LXdyYXAifSxidXR0b246e2NsYXNzTmFtZToiYnRuIGJ0bi1zZWNvbmRhcnkiLGFjdGl2ZToiYWN0aXZlIixkcm9wSHRtbDoiIixkcm9wQ2xhc3M6ImRyb3Bkb3duLXRvZ2dsZSJ9LGNvbGxlY3Rpb246e2NvbnRhaW5lcjp7dGFnOiJkaXYiLGNsYXNzTmFtZToiZHJvcGRvd24tbWVudSBkdC1idXR0b24tY29sbGVjdGlvbiJ9LGNsb3NlQnV0dG9uOiExLGJ1dHRvbjp7dGFnOiJhIixjbGFzc05hbWU6ImR0LWJ1dHRvbiBkcm9wZG93bi1pdGVtIixhY3RpdmU6ImR0LWJ1dHRvbi1hY3RpdmUiLGRpc2FibGVkOiJkaXNhYmxlZCIsc3BhY2VyOntjbGFzc05hbWU6ImRyb3Bkb3duLWRpdmlkZXIiLHRhZzoiaHIifX19LHNwbGl0OnthY3Rpb246e3RhZzoiYSIsY2xhc3NOYW1lOiJidG4gYnRuLXNlY29uZGFyeSBkdC1idXR0b24tc3BsaXQtZHJvcC1idXR0b24iLGNsb3NlQnV0dG9uOiExfSxkcm9wZG93bjp7dGFnOiJidXR0b24iLGNsYXNzTmFtZToiYnRuIGJ0bi1zZWNvbmRhcnkgZHQtYnV0dG9uLXNwbGl0LWRyb3AgZHJvcGRvd24tdG9nZ2xlLXNwbGl0IixjbG9zZUJ1dHRvbjohMSxhbGlnbjoic3BsaXQtbGVmdCIsc3BsaXRBbGlnbkNsYXNzOiJkdC1idXR0b24tc3BsaXQtbGVmdCJ9LHdyYXBwZXI6e3RhZzoiZGl2IixjbGFzc05hbWU6ImR0LWJ1dHRvbi1zcGxpdCBidG4tZ3JvdXAiLGNsb3NlQnV0dG9uOiExfX19LGJ1dHRvbkNyZWF0ZWQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5idXR0b25zP2UoJzxkaXYgY2xhc3M9ImJ0bi1ncm91cCIvPicpLmFwcGVuZChuKTpufX0pLG8uZXh0LmJ1dHRvbnMuY29sbGVjdGlvbi5yaWdodEFsaWduQ2xhc3NOYW1lPSJkcm9wZG93bi1tZW51LXJpZ2h0IixvfSk7CgovKiEKICogSFRNTDUgZXhwb3J0IGJ1dHRvbnMgZm9yIEJ1dHRvbnMgYW5kIERhdGFUYWJsZXMuCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqCiAqIEZpbGVTYXZlci5qcyAoMS4zLjMpIC0gTUlUIGxpY2Vuc2UKICogQ29weXJpZ2h0IMKpIDIwMTYgRWxpIEdyZXkgLSBodHRwOi8vZWxpZ3JleS5jb20KICovCiFmdW5jdGlvbihvKXt2YXIgbCxuOyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5IiwiZGF0YXRhYmxlcy5uZXQiLCJkYXRhdGFibGVzLm5ldC1idXR0b25zIl0sZnVuY3Rpb24odCl7cmV0dXJuIG8odCx3aW5kb3csZG9jdW1lbnQpfSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzPyhsPXJlcXVpcmUoImpxdWVyeSIpLG49ZnVuY3Rpb24odCxlKXtlLmZuLmRhdGFUYWJsZXx8cmVxdWlyZSgiZGF0YXRhYmxlcy5uZXQiKSh0LGUpLGUuZm4uZGF0YVRhYmxlLkJ1dHRvbnN8fHJlcXVpcmUoImRhdGF0YWJsZXMubmV0LWJ1dHRvbnMiKSh0LGUpfSwidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXR8fHdpbmRvdyxlPWV8fGwodCksbih0LGUpLG8oZSx0LHQuZG9jdW1lbnQpfToobih3aW5kb3csbCksbW9kdWxlLmV4cG9ydHM9byhsLHdpbmRvdyx3aW5kb3cuZG9jdW1lbnQpKSk6byhqUXVlcnksd2luZG93LGRvY3VtZW50KX0oZnVuY3Rpb24oUyxDLHUpeyJ1c2Ugc3RyaWN0Ijt2YXIgZSxvLHQ9Uy5mbi5kYXRhVGFibGU7ZnVuY3Rpb24gVCgpe3JldHVybiBlfHxDLkpTWmlwfWZ1bmN0aW9uIHMoKXtyZXR1cm4gb3x8Qy5wZGZNYWtlfXQuQnV0dG9ucy5wZGZNYWtlPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBzKCk7bz10fSx0LkJ1dHRvbnMuanN6aXA9ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIFQoKTtlPXR9O2Z1bmN0aW9uIGsodCl7dmFyIGU9IlNoZWV0MSI7cmV0dXJuIGU9dC5zaGVldE5hbWU/dC5zaGVldE5hbWUucmVwbGFjZSgvW1xbXF1cKlwvXFxcP1w6XS9nLCIiKTplfWZ1bmN0aW9uIGModCxlKXtmdW5jdGlvbiBvKHQpe2Zvcih2YXIgZT0iIixvPTAsbD10Lmxlbmd0aDtvPGw7bysrKTA8byYmKGUrPWEpLGUrPXI/cisoIiIrdFtvXSkucmVwbGFjZShkLHArcikrcjp0W29dO3JldHVybiBlfXZhciBsPXkoZSksbj10LmJ1dHRvbnMuZXhwb3J0RGF0YShlLmV4cG9ydE9wdGlvbnMpLHI9ZS5maWVsZEJvdW5kYXJ5LGE9ZS5maWVsZFNlcGFyYXRvcixkPW5ldyBSZWdFeHAociwiZyIpLHA9dm9pZCAwIT09ZS5lc2NhcGVDaGFyP2UuZXNjYXBlQ2hhcjoiXFwiLHQ9IiIsaT0iIixmPVtdO2UuaGVhZGVyJiYodD1uLmhlYWRlclN0cnVjdHVyZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG8odC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC50aXRsZToiIn0pKX0pLmpvaW4obCkrbCksZS5mb290ZXImJm4uZm9vdGVyJiYoaT1uLmZvb3RlclN0cnVjdHVyZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG8odC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC50aXRsZToiIn0pKX0pLmpvaW4obCkrbCk7Zm9yKHZhciBzPTAsbT1uLmJvZHkubGVuZ3RoO3M8bTtzKyspZi5wdXNoKG8obi5ib2R5W3NdKSk7cmV0dXJue3N0cjp0K2Yuam9pbihsKStsK2kscm93czpmLmxlbmd0aH19ZnVuY3Rpb24gbSgpe3ZhciB0O3JldHVybi0xIT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiT3BlcmEiKSYmISEoKHQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcLyhcZCtcLlxkKykvKSkmJjE8dC5sZW5ndGgmJit0WzFdPDYwMy4xKX12YXIgTj1mdW5jdGlvbihkKXt2YXIgcCxpLGYscyxtLHUsZSxjLHksbCx0O2lmKCEodm9pZCAwPT09ZHx8InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9NU0lFIFsxLTldXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpKXJldHVybiB0PWQuZG9jdW1lbnQscD1mdW5jdGlvbigpe3JldHVybiBkLlVSTHx8ZC53ZWJraXRVUkx8fGR9LGk9dC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLCJhIiksZj0iZG93bmxvYWQiaW4gaSxzPS9jb25zdHJ1Y3Rvci9pLnRlc3QoZC5IVE1MRWxlbWVudCl8fGQuc2FmYXJpLG09L0NyaU9TXC9bXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx1PWZ1bmN0aW9uKHQpeyhkLnNldEltbWVkaWF0ZXx8ZC5zZXRUaW1lb3V0KShmdW5jdGlvbigpe3Rocm93IHR9LDApfSxlPTRlNCxjPWZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXsic3RyaW5nIj09dHlwZW9mIHQ/cCgpLnJldm9rZU9iamVjdFVSTCh0KTp0LnJlbW92ZSgpfSxlKX0seT1mdW5jdGlvbih0KXtyZXR1cm4vXlxzKig/OnRleHRcL1xTKnxhcHBsaWNhdGlvblwveG1sfFxTKlwvXFMqXCt4bWwpXHMqOy4qY2hhcnNldFxzKj1ccyp1dGYtOC9pLnRlc3QodC50eXBlKT9uZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSg2NTI3OSksdF0se3R5cGU6dC50eXBlfSk6dH0sdD0obD1mdW5jdGlvbih0LG8sZSl7ZXx8KHQ9eSh0KSk7dmFyIGwsbixyPXRoaXMsZT0iYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIj09PXQudHlwZSxhPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXIsZT0id3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZCIuc3BsaXQoIiAiKSxvPXZvaWQgMCxsPShlPVtdLmNvbmNhdChlKSkubGVuZ3RoO2wtLTspe3ZhciBuPXRbIm9uIitlW2xdXTtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbil0cnl7bi5jYWxsKHQsb3x8dCl9Y2F0Y2godCl7dSh0KX19fTtyLnJlYWR5U3RhdGU9ci5JTklULGY/KGw9cCgpLmNyZWF0ZU9iamVjdFVSTCh0KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQsZTtpLmhyZWY9bCxpLmRvd25sb2FkPW8sdD1pLGU9bmV3IE1vdXNlRXZlbnQoImNsaWNrIiksdC5kaXNwYXRjaEV2ZW50KGUpLGEoKSxjKGwpLHIucmVhZHlTdGF0ZT1yLkRPTkV9KSk6KG18fGUmJnMpJiZkLkZpbGVSZWFkZXI/KChuPW5ldyBGaWxlUmVhZGVyKS5vbmxvYWRlbmQ9ZnVuY3Rpb24oKXt2YXIgdD1tP24ucmVzdWx0Om4ucmVzdWx0LnJlcGxhY2UoL15kYXRhOlteO10qOy8sImRhdGE6YXR0YWNobWVudC9maWxlOyIpO2Qub3Blbih0LCJfYmxhbmsiKXx8KGQubG9jYXRpb24uaHJlZj10KSxyLnJlYWR5U3RhdGU9ci5ET05FLGEoKX0sbi5yZWFkQXNEYXRhVVJMKHQpLHIucmVhZHlTdGF0ZT1yLklOSVQpOihsPWx8fHAoKS5jcmVhdGVPYmplY3RVUkwodCksIWUmJmQub3BlbihsLCJfYmxhbmsiKXx8KGQubG9jYXRpb24uaHJlZj1sKSxyLnJlYWR5U3RhdGU9ci5ET05FLGEoKSxjKGwpKX0pLnByb3RvdHlwZSwidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2I/ZnVuY3Rpb24odCxlLG8pe3JldHVybiBlPWV8fHQubmFtZXx8ImRvd25sb2FkIixvfHwodD15KHQpKSxuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYih0LGUpfToodC5hYm9ydD1mdW5jdGlvbigpe30sdC5yZWFkeVN0YXRlPXQuSU5JVD0wLHQuV1JJVElORz0xLHQuRE9ORT0yLHQuZXJyb3I9dC5vbndyaXRlc3RhcnQ9dC5vbnByb2dyZXNzPXQub253cml0ZT10Lm9uYWJvcnQ9dC5vbmVycm9yPXQub253cml0ZWVuZD1udWxsLGZ1bmN0aW9uKHQsZSxvKXtyZXR1cm4gbmV3IGwodCxlfHx0Lm5hbWV8fCJkb3dubG9hZCIsbyl9KX0oInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmfHx2b2lkIDAhPT1DJiZDfHx0aGlzLmNvbnRlbnQpLHk9KHQuZmlsZVNhdmU9TixmdW5jdGlvbih0KXtyZXR1cm4gdC5uZXdsaW5lfHwobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cy8pPyJcclxuIjoiXG4iKX0pO2Z1bmN0aW9uIE8odCl7Zm9yKHZhciBlPSJBIi5jaGFyQ29kZUF0KDApLG89IloiLmNoYXJDb2RlQXQoMCktZSsxLGw9IiI7MDw9dDspbD1TdHJpbmcuZnJvbUNoYXJDb2RlKHQlbytlKStsLHQ9TWF0aC5mbG9vcih0L28pLTE7cmV0dXJuIGx9dHJ5e3ZhciB6LEU9bmV3IFhNTFNlcmlhbGl6ZXJ9Y2F0Y2godCl7fWZ1bmN0aW9uIEEodCxlLG8pe3ZhciBsPXQuY3JlYXRlRWxlbWVudChlKTtyZXR1cm4gbyYmKG8uYXR0ciYmUyhsKS5hdHRyKG8uYXR0ciksby5jaGlsZHJlbiYmUy5lYWNoKG8uY2hpbGRyZW4sZnVuY3Rpb24odCxlKXtsLmFwcGVuZENoaWxkKGUpfSksbnVsbCE9PW8udGV4dCkmJnZvaWQgMCE9PW8udGV4dCYmbC5hcHBlbmRDaGlsZCh0LmNyZWF0ZVRleHROb2RlKG8udGV4dCkpLGx9ZnVuY3Rpb24gRCh0LGUsbyxsLG4pe3ZhciByPVMoIm1lcmdlQ2VsbHMiLHQpO3JbMF0uYXBwZW5kQ2hpbGQoQSh0LCJtZXJnZUNlbGwiLHthdHRyOntyZWY6TyhvKStlKyI6IitPKG8rbi0xKSsoZStsLTEpfX0pKSxyLmF0dHIoImNvdW50IixwYXJzZUZsb2F0KHIuYXR0cigiY291bnQiKSkrMSl9dmFyIFI9eyJfcmVscy8ucmVscyI6Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiBzdGFuZGFsb25lPSJ5ZXMiPz48UmVsYXRpb25zaGlwcyB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzIj48UmVsYXRpb25zaGlwIElkPSJySWQxIiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL29mZmljZURvY3VtZW50IiBUYXJnZXQ9InhsL3dvcmtib29rLnhtbCIvPjwvUmVsYXRpb25zaGlwcz4nLCJ4bC9fcmVscy93b3JrYm9vay54bWwucmVscyI6Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiBzdGFuZGFsb25lPSJ5ZXMiPz48UmVsYXRpb25zaGlwcyB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzIj48UmVsYXRpb25zaGlwIElkPSJySWQxIiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldCIgVGFyZ2V0PSJ3b3Jrc2hlZXRzL3NoZWV0MS54bWwiLz48UmVsYXRpb25zaGlwIElkPSJySWQyIiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3N0eWxlcyIgVGFyZ2V0PSJzdHlsZXMueG1sIi8+PC9SZWxhdGlvbnNoaXBzPicsIltDb250ZW50X1R5cGVzXS54bWwiOic8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+PFR5cGVzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXMiPjxEZWZhdWx0IEV4dGVuc2lvbj0ieG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24veG1sIiAvPjxEZWZhdWx0IEV4dGVuc2lvbj0icmVscyIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sIiAvPjxEZWZhdWx0IEV4dGVuc2lvbj0ianBlZyIgQ29udGVudFR5cGU9ImltYWdlL2pwZWciIC8+PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya2Jvb2sueG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWwiIC8+PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya3NoZWV0cy9zaGVldDEueG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwud29ya3NoZWV0K3htbCIgLz48T3ZlcnJpZGUgUGFydE5hbWU9Ii94bC9zdHlsZXMueG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc3R5bGVzK3htbCIgLz48L1R5cGVzPicsInhsL3dvcmtib29rLnhtbCI6Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiBzdGFuZGFsb25lPSJ5ZXMiPz48d29ya2Jvb2sgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbiIgeG1sbnM6cj0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcyI+PGZpbGVWZXJzaW9uIGFwcE5hbWU9InhsIiBsYXN0RWRpdGVkPSI1IiBsb3dlc3RFZGl0ZWQ9IjUiIHJ1cEJ1aWxkPSIyNDgxNiIvPjx3b3JrYm9va1ByIHNob3dJbmtBbm5vdGF0aW9uPSIwIiBhdXRvQ29tcHJlc3NQaWN0dXJlcz0iMCIvPjxib29rVmlld3M+PHdvcmtib29rVmlldyB4V2luZG93PSIwIiB5V2luZG93PSIwIiB3aW5kb3dXaWR0aD0iMjU2MDAiIHdpbmRvd0hlaWdodD0iMTkwMjAiIHRhYlJhdGlvPSI1MDAiLz48L2Jvb2tWaWV3cz48c2hlZXRzPjxzaGVldCBuYW1lPSJTaGVldDEiIHNoZWV0SWQ9IjEiIHI6aWQ9InJJZDEiLz48L3NoZWV0cz48ZGVmaW5lZE5hbWVzLz48L3dvcmtib29rPicsInhsL3dvcmtzaGVldHMvc2hlZXQxLnhtbCI6Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiBzdGFuZGFsb25lPSJ5ZXMiPz48d29ya3NoZWV0IHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiIHhtbG5zOm1jPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNiIgbWM6SWdub3JhYmxlPSJ4MTRhYyIgeG1sbnM6eDE0YWM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjIj48c2hlZXREYXRhLz48bWVyZ2VDZWxscyBjb3VudD0iMCIvPjwvd29ya3NoZWV0PicsInhsL3N0eWxlcy54bWwiOic8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PjxzdHlsZVNoZWV0IHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iIHhtbG5zOm1jPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNiIgbWM6SWdub3JhYmxlPSJ4MTRhYyIgeG1sbnM6eDE0YWM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjIj48bnVtRm10cyBjb3VudD0iNiI+PG51bUZtdCBudW1GbXRJZD0iMTY0IiBmb3JtYXRDb2RlPSJbJCQtNDA5XSMsIyMwLjAwOy1bJCQtNDA5XSMsIyMwLjAwIi8+PG51bUZtdCBudW1GbXRJZD0iMTY1IiBmb3JtYXRDb2RlPSImcXVvdDvCoyZxdW90OyMsIyMwLjAwIi8+PG51bUZtdCBudW1GbXRJZD0iMTY2IiBmb3JtYXRDb2RlPSJbJOKCrC0yXSAjLCMjMC4wMCIvPjxudW1GbXQgbnVtRm10SWQ9IjE2NyIgZm9ybWF0Q29kZT0iMC4wJSIvPjxudW1GbXQgbnVtRm10SWQ9IjE2OCIgZm9ybWF0Q29kZT0iIywjIzA7KCMsIyMwKSIvPjxudW1GbXQgbnVtRm10SWQ9IjE2OSIgZm9ybWF0Q29kZT0iIywjIzAuMDA7KCMsIyMwLjAwKSIvPjwvbnVtRm10cz48Zm9udHMgY291bnQ9IjUiIHgxNGFjOmtub3duRm9udHM9IjEiPjxmb250PjxzeiB2YWw9IjExIiAvPjxuYW1lIHZhbD0iQ2FsaWJyaSIgLz48L2ZvbnQ+PGZvbnQ+PHN6IHZhbD0iMTEiIC8+PG5hbWUgdmFsPSJDYWxpYnJpIiAvPjxjb2xvciByZ2I9IkZGRkZGRkZGIiAvPjwvZm9udD48Zm9udD48c3ogdmFsPSIxMSIgLz48bmFtZSB2YWw9IkNhbGlicmkiIC8+PGIgLz48L2ZvbnQ+PGZvbnQ+PHN6IHZhbD0iMTEiIC8+PG5hbWUgdmFsPSJDYWxpYnJpIiAvPjxpIC8+PC9mb250Pjxmb250PjxzeiB2YWw9IjExIiAvPjxuYW1lIHZhbD0iQ2FsaWJyaSIgLz48dSAvPjwvZm9udD48L2ZvbnRzPjxmaWxscyBjb3VudD0iNiI+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJub25lIiAvPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9Im5vbmUiIC8+PC9maWxsPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ic29saWQiPjxmZ0NvbG9yIHJnYj0iRkZEOUQ5RDkiIC8+PGJnQ29sb3IgaW5kZXhlZD0iNjQiIC8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJzb2xpZCI+PGZnQ29sb3IgcmdiPSJGRkQ5OTc5NSIgLz48YmdDb2xvciBpbmRleGVkPSI2NCIgLz48L3BhdHRlcm5GaWxsPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9InNvbGlkIj48ZmdDb2xvciByZ2I9ImZmYzZlZmNlIiAvPjxiZ0NvbG9yIGluZGV4ZWQ9IjY0IiAvPjwvcGF0dGVybkZpbGw+PC9maWxsPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ic29saWQiPjxmZ0NvbG9yIHJnYj0iZmZjNmNmZWYiIC8+PGJnQ29sb3IgaW5kZXhlZD0iNjQiIC8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+PC9maWxscz48Ym9yZGVycyBjb3VudD0iMiI+PGJvcmRlcj48bGVmdCAvPjxyaWdodCAvPjx0b3AgLz48Ym90dG9tIC8+PGRpYWdvbmFsIC8+PC9ib3JkZXI+PGJvcmRlciBkaWFnb25hbFVwPSJmYWxzZSIgZGlhZ29uYWxEb3duPSJmYWxzZSI+PGxlZnQgc3R5bGU9InRoaW4iPjxjb2xvciBhdXRvPSIxIiAvPjwvbGVmdD48cmlnaHQgc3R5bGU9InRoaW4iPjxjb2xvciBhdXRvPSIxIiAvPjwvcmlnaHQ+PHRvcCBzdHlsZT0idGhpbiI+PGNvbG9yIGF1dG89IjEiIC8+PC90b3A+PGJvdHRvbSBzdHlsZT0idGhpbiI+PGNvbG9yIGF1dG89IjEiIC8+PC9ib3R0b20+PGRpYWdvbmFsIC8+PC9ib3JkZXI+PC9ib3JkZXJzPjxjZWxsU3R5bGVYZnMgY291bnQ9IjEiPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiAvPjwvY2VsbFN0eWxlWGZzPjxjZWxsWGZzIGNvdW50PSI2OCI+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIyIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSIyIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSIzIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSIzIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSI0IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSI1IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSI1IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSIwIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSIyIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIzIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSIzIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSI0IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSI0IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSI1IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCBob3Jpem9udGFsPSJsZWZ0Ii8+PC94Zj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCBob3Jpem9udGFsPSJjZW50ZXIiLz48L3hmPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5QWxpZ25tZW50PSIxIj48YWxpZ25tZW50IGhvcml6b250YWw9InJpZ2h0Ii8+PC94Zj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCBob3Jpem9udGFsPSJmaWxsIi8+PC94Zj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCB0ZXh0Um90YXRpb249IjkwIi8+PC94Zj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCB3cmFwVGV4dD0iMSIvPjwveGY+PHhmIG51bUZtdElkPSI5IiAgIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMTY0IiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjE2NSIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxNjYiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMTY3IiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjE2OCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxNjkiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMyIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSI0IiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjEiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMiIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxNCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PC9jZWxsWGZzPjxjZWxsU3R5bGVzIGNvdW50PSIxIj48Y2VsbFN0eWxlIG5hbWU9Ik5vcm1hbCIgeGZJZD0iMCIgYnVpbHRpbklkPSIwIiAvPjwvY2VsbFN0eWxlcz48ZHhmcyBjb3VudD0iMCIgLz48dGFibGVTdHlsZXMgY291bnQ9IjAiIGRlZmF1bHRUYWJsZVN0eWxlPSJUYWJsZVN0eWxlTWVkaXVtOSIgZGVmYXVsdFBpdm90U3R5bGU9IlBpdm90U3R5bGVNZWRpdW00IiAvPjwvc3R5bGVTaGVldD4nfSxfPVt7bWF0Y2g6L15cLT9cZCtcLlxkJSQvLHN0eWxlOjYwLGZtdDpmdW5jdGlvbih0KXtyZXR1cm4gdC8xMDB9fSx7bWF0Y2g6L15cLT9cZCtcLj9cZColJC8sc3R5bGU6NTYsZm10OmZ1bmN0aW9uKHQpe3JldHVybiB0LzEwMH19LHttYXRjaDovXlwtP1wkW1xkLF0rLj9cZCokLyxzdHlsZTo1N30se21hdGNoOi9eXC0/wqNbXGQsXSsuP1xkKiQvLHN0eWxlOjU4fSx7bWF0Y2g6L15cLT/igqxbXGQsXSsuP1xkKiQvLHN0eWxlOjU5fSx7bWF0Y2g6L15cLT9cZCskLyxzdHlsZTo2NX0se21hdGNoOi9eXC0/XGQrXC5cZHsyfSQvLHN0eWxlOjY2fSx7bWF0Y2g6L15cKFtcZCxdK1wpJC8sc3R5bGU6NjEsZm10OmZ1bmN0aW9uKHQpe3JldHVybi0xKnQucmVwbGFjZSgvW1woXCldL2csIiIpfX0se21hdGNoOi9eXChbXGQsXStcLlxkezJ9XCkkLyxzdHlsZTo2MixmbXQ6ZnVuY3Rpb24odCl7cmV0dXJuLTEqdC5yZXBsYWNlKC9bXChcKV0vZywiIil9fSx7bWF0Y2g6L15cLT9bXGQsXSskLyxzdHlsZTo2M30se21hdGNoOi9eXC0/W1xkLF0rXC5cZHsyfSQvLHN0eWxlOjY0fSx7bWF0Y2g6L14oMTlcZFxkfFsyLTldXGRcZFxkKVwtKDBcZHwxWzAxMl0pXC1bMDEyM11bXGRdJC8sc3R5bGU6NjcsZm10OmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKDI1NTY5K0RhdGUucGFyc2UodCkvODY0ZTUpfX1dO3JldHVybiB0LmV4dC5idXR0b25zLmNvcHlIdG1sNT17Y2xhc3NOYW1lOiJidXR0b25zLWNvcHkgYnV0dG9ucy1odG1sNSIsdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLmNvcHkiLCJDb3B5Iil9LGFjdGlvbjpmdW5jdGlvbih0LGUsbyxsLG4pe3ZhciByPWMoZSxsKSxhPWUuYnV0dG9ucy5leHBvcnRJbmZvKGwpLGQ9eShsKSxwPXIuc3RyLGk9UygiPGRpdi8+IikuY3NzKHtoZWlnaHQ6MSx3aWR0aDoxLG92ZXJmbG93OiJoaWRkZW4iLHBvc2l0aW9uOiJmaXhlZCIsdG9wOjAsbGVmdDowfSksZD0oYS50aXRsZSYmKHA9YS50aXRsZStkK2QrcCksYS5tZXNzYWdlVG9wJiYocD1hLm1lc3NhZ2VUb3ArZCtkK3ApLGEubWVzc2FnZUJvdHRvbSYmKHA9cCtkK2QrYS5tZXNzYWdlQm90dG9tKSxsLmN1c3RvbWl6ZSYmKHA9bC5jdXN0b21pemUocCxsLGUpKSxTKCI8dGV4dGFyZWEgcmVhZG9ubHkvPiIpLnZhbChwKS5hcHBlbmRUbyhpKSk7aWYodS5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoImNvcHkiKSl7aS5hcHBlbmRUbyhlLnRhYmxlKCkuY29udGFpbmVyKCkpLGRbMF0uZm9jdXMoKSxkWzBdLnNlbGVjdCgpO3RyeXt2YXIgZj11LmV4ZWNDb21tYW5kKCJjb3B5Iik7aWYoaS5yZW1vdmUoKSxmKXJldHVybiBsLmNvcHlTdWNjZXNzJiZlLmJ1dHRvbnMuaW5mbyhlLmkxOG4oImJ1dHRvbnMuY29weVRpdGxlIiwiQ29weSB0byBjbGlwYm9hcmQiKSxlLmkxOG4oImJ1dHRvbnMuY29weVN1Y2Nlc3MiLHsxOiJDb3BpZWQgb25lIHJvdyB0byBjbGlwYm9hcmQiLF86IkNvcGllZCAlZCByb3dzIHRvIGNsaXBib2FyZCJ9LHIucm93cyksMmUzKSx2b2lkIG4oKX1jYXRjaCh0KXt9fWZ1bmN0aW9uIHMoKXttLm9mZigiY2xpY2suYnV0dG9ucy1jb3B5IiksUyh1KS5vZmYoIi5idXR0b25zLWNvcHkiKSxlLmJ1dHRvbnMuaW5mbyghMSl9dmFyIGE9UygiPHNwYW4+IitlLmkxOG4oImJ1dHRvbnMuY29weUtleXMiLCJQcmVzcyA8aT5jdHJsPC9pPiBvciA8aT7ijJg8L2k+ICsgPGk+QzwvaT4gdG8gY29weSB0aGUgdGFibGUgZGF0YTxicj50byB5b3VyIHN5c3RlbSBjbGlwYm9hcmQuPGJyPjxicj5UbyBjYW5jZWwsIGNsaWNrIHRoaXMgbWVzc2FnZSBvciBwcmVzcyBlc2NhcGUuIikrIjwvc3Bhbj4iKS5hcHBlbmQoaSksbT0oZS5idXR0b25zLmluZm8oZS5pMThuKCJidXR0b25zLmNvcHlUaXRsZSIsIkNvcHkgdG8gY2xpcGJvYXJkIiksYSwwKSxkWzBdLmZvY3VzKCksZFswXS5zZWxlY3QoKSxTKGEpLmNsb3Nlc3QoIi5kdC1idXR0b24taW5mbyIpKTttLm9uKCJjbGljay5idXR0b25zLWNvcHkiLGZ1bmN0aW9uKCl7cygpLG4oKX0pLFModSkub24oImtleWRvd24uYnV0dG9ucy1jb3B5IixmdW5jdGlvbih0KXsyNz09PXQua2V5Q29kZSYmKHMoKSxuKCkpfSkub24oImNvcHkuYnV0dG9ucy1jb3B5IGN1dC5idXR0b25zLWNvcHkiLGZ1bmN0aW9uKCl7cygpLG4oKX0pfSxhc3luYzoxMDAsY29weVN1Y2Nlc3M6ITAsZXhwb3J0T3B0aW9uczp7fSxmaWVsZFNlcGFyYXRvcjoiXHQiLGZpZWxkQm91bmRhcnk6IiIsaGVhZGVyOiEwLGZvb3RlcjohMCx0aXRsZToiKiIsbWVzc2FnZVRvcDoiKiIsbWVzc2FnZUJvdHRvbToiKiJ9LHQuZXh0LmJ1dHRvbnMuY3N2SHRtbDU9e2JvbTohMSxjbGFzc05hbWU6ImJ1dHRvbnMtY3N2IGJ1dHRvbnMtaHRtbDUiLGF2YWlsYWJsZTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT1DLkZpbGVSZWFkZXImJkMuQmxvYn0sdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLmNzdiIsIkNTViIpfSxhY3Rpb246ZnVuY3Rpb24odCxlLG8sbCxuKXt2YXIgcj1jKGUsbCkuc3RyLGE9ZS5idXR0b25zLmV4cG9ydEluZm8obCksZD1sLmNoYXJzZXQ7bC5jdXN0b21pemUmJihyPWwuY3VzdG9taXplKHIsbCxlKSksZD0hMSE9PWQ/KGQ9ZHx8dS5jaGFyYWN0ZXJTZXR8fHUuY2hhcnNldCkmJiI7Y2hhcnNldD0iK2Q6IiIsbC5ib20mJihyPVN0cmluZy5mcm9tQ2hhckNvZGUoNjUyNzkpK3IpLE4obmV3IEJsb2IoW3JdLHt0eXBlOiJ0ZXh0L2NzdiIrZH0pLGEuZmlsZW5hbWUsITApLG4oKX0sYXN5bmM6MTAwLGZpbGVuYW1lOiIqIixleHRlbnNpb246Ii5jc3YiLGV4cG9ydE9wdGlvbnM6e2VzY2FwZUV4Y2VsRm9ybXVsYTohMH0sZmllbGRTZXBhcmF0b3I6IiwiLGZpZWxkQm91bmRhcnk6JyInLGVzY2FwZUNoYXI6JyInLGNoYXJzZXQ6bnVsbCxoZWFkZXI6ITAsZm9vdGVyOiEwfSx0LmV4dC5idXR0b25zLmV4Y2VsSHRtbDU9e2NsYXNzTmFtZToiYnV0dG9ucy1leGNlbCBidXR0b25zLWh0bWw1IixhdmFpbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09Qy5GaWxlUmVhZGVyJiZ2b2lkIDAhPT1UKCkmJiFtKCkmJkV9LHRleHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaTE4bigiYnV0dG9ucy5leGNlbCIsIkV4Y2VsIil9LGFjdGlvbjpmdW5jdGlvbih0LGUsbyxmLGwpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQ9Ult0XSxTLnBhcnNlWE1MKHQpfWZ1bmN0aW9uIHIodCl7bT1BKGMsInJvdyIse2F0dHI6e3I6cz11KzF9fSk7Zm9yKHZhciBlPTAsbz10Lmxlbmd0aDtlPG87ZSsrKXt2YXIgbD1PKGUpKyIiK3Msbj1udWxsO2lmKG51bGw9PT10W2VdfHx2b2lkIDA9PT10W2VdfHwiIj09PXRbZV0pe2lmKCEwIT09Zi5jcmVhdGVFbXB0eUNlbGxzKWNvbnRpbnVlO3RbZV09IiJ9dmFyIHI9dFtlXTt0W2VdPSJmdW5jdGlvbiI9PXR5cGVvZiB0W2VdLnRyaW0/dFtlXS50cmltKCk6dFtlXTtmb3IodmFyIGE9MCxkPV8ubGVuZ3RoO2E8ZDthKyspe3ZhciBwPV9bYV07aWYodFtlXS5tYXRjaCYmIXRbZV0ubWF0Y2goL14wXGQrLykmJnRbZV0ubWF0Y2gocC5tYXRjaCkpe3ZhciBpPXRbZV0ucmVwbGFjZSgvW15cZFwuXC1dL2csIiIpO3AuZm10JiYoaT1wLmZtdChpKSksbj1BKGMsImMiLHthdHRyOntyOmwsczpwLnN0eWxlfSxjaGlsZHJlbjpbQShjLCJ2Iix7dGV4dDppfSldfSk7YnJlYWt9fW49bnx8KCJudW1iZXIiPT10eXBlb2YgdFtlXXx8dFtlXS5tYXRjaCYmdFtlXS5tYXRjaCgvXi0/XGQrKFwuXGQrKT8oW2VFXVwtP1xkKyk/JC8pJiYhdFtlXS5tYXRjaCgvXjBcZCsvKT9BKGMsImMiLHthdHRyOnt0OiJuIixyOmx9LGNoaWxkcmVuOltBKGMsInYiLHt0ZXh0OnRbZV19KV19KToocj1yLnJlcGxhY2U/ci5yZXBsYWNlKC9bXHgwMC1ceDA5XHgwQlx4MENceDBFLVx4MUZceDdGLVx4OUZdL2csIiIpOnIsQShjLCJjIix7YXR0cjp7dDoiaW5saW5lU3RyIixyOmx9LGNoaWxkcmVuOntyb3c6QShjLCJpcyIse2NoaWxkcmVuOntyb3c6QShjLCJ0Iix7dGV4dDpyLGF0dHI6eyJ4bWw6c3BhY2UiOiJwcmVzZXJ2ZSJ9fSl9fSl9fSkpKSxtLmFwcGVuZENoaWxkKG4pfXkuYXBwZW5kQ2hpbGQobSksdSsrfWZ1bmN0aW9uIGEodCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IodC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC50aXRsZToiIn0pKSxTKCJyb3c6bGFzdCBjIixjKS5hdHRyKCJzIiwiMiIpLHQuZm9yRWFjaChmdW5jdGlvbih0LGUpe3QmJigxPHQuY29sU3Bhbnx8MTx0LnJvd1NwYW4pJiZEKGMsdSxlLHQucm93U3Bhbix0LmNvbFNwYW4pfSl9KX12YXIgZCxzLG0sdT0wLGM9bigieGwvd29ya3NoZWV0cy9zaGVldDEueG1sIikseT1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzaGVldERhdGEiKVswXSxwPXtfcmVsczp7Ii5yZWxzIjpuKCJfcmVscy8ucmVscyIpfSx4bDp7X3JlbHM6eyJ3b3JrYm9vay54bWwucmVscyI6bigieGwvX3JlbHMvd29ya2Jvb2sueG1sLnJlbHMiKX0sIndvcmtib29rLnhtbCI6bigieGwvd29ya2Jvb2sueG1sIiksInN0eWxlcy54bWwiOm4oInhsL3N0eWxlcy54bWwiKSx3b3Jrc2hlZXRzOnsic2hlZXQxLnhtbCI6Y319LCJbQ29udGVudF9UeXBlc10ueG1sIjpuKCJbQ29udGVudF9UeXBlc10ueG1sIil9LGk9ZS5idXR0b25zLmV4cG9ydERhdGEoZi5leHBvcnRPcHRpb25zKSxJPWUuYnV0dG9ucy5leHBvcnRJbmZvKGYpO0kudGl0bGUmJihyKFtJLnRpdGxlXSksRChjLHUsMCwxLGkuaGVhZGVyLmxlbmd0aCksUygicm93Omxhc3QgYyIsYykuYXR0cigicyIsIjUxIikpLEkubWVzc2FnZVRvcCYmKHIoW0kubWVzc2FnZVRvcF0pLEQoYyx1LDAsMSxpLmhlYWRlci5sZW5ndGgpKSxmLmhlYWRlciYmYShpLmhlYWRlclN0cnVjdHVyZSk7Zm9yKHZhciBGPXUseD0wLGg9aS5ib2R5Lmxlbmd0aDt4PGg7eCsrKXIoaS5ib2R5W3hdKTtkPXUsZi5mb290ZXImJmkuZm9vdGVyJiZhKGkuZm9vdGVyU3RydWN0dXJlKSxJLm1lc3NhZ2VCb3R0b20mJihyKFtJLm1lc3NhZ2VCb3R0b21dKSxEKGMsdSwwLDEsaS5oZWFkZXIubGVuZ3RoKSk7dmFyIGI9QShjLCJjb2xzIik7Uygid29ya3NoZWV0IixjKS5wcmVwZW5kKGIpO2Zvcih2YXIgZz0wLHY9aS5oZWFkZXIubGVuZ3RoO2c8djtnKyspYi5hcHBlbmRDaGlsZChBKGMsImNvbCIse2F0dHI6e21pbjpnKzEsbWF4OmcrMSx3aWR0aDpmdW5jdGlvbih0LGUpe3ZhciBvPXQuaGVhZGVyW2VdLmxlbmd0aDt0LmZvb3RlciYmdC5mb290ZXJbZV0mJnQuZm9vdGVyW2VdLmxlbmd0aD5vJiYobz10LmZvb3RlcltlXS5sZW5ndGgpO2Zvcih2YXIgbD0wLG49dC5ib2R5Lmxlbmd0aDtsPG47bCsrKXt2YXIgcixhPXQuYm9keVtsXVtlXTtpZig0MDwobz1vPChyPSgtMSE9PShhPW51bGwhPWE/YS50b1N0cmluZygpOiIiKS5pbmRleE9mKCJcbiIpPygocj1hLnNwbGl0KCJcbiIpKS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGVuZ3RoLXQubGVuZ3RofSksclswXSk6YSkubGVuZ3RoKT9yOm8pKXJldHVybiA1NH1yZXR1cm4gNjwobyo9MS4zNSk/bzo2fShpLGcpLGN1c3RvbVdpZHRoOjF9fSkpO3ZhciB3PXAueGxbIndvcmtib29rLnhtbCJdO1MoInNoZWV0cyBzaGVldCIsdykuYXR0cigibmFtZSIsayhmKSksZi5hdXRvRmlsdGVyJiYoUygibWVyZ2VDZWxscyIsYykuYmVmb3JlKEEoYywiYXV0b0ZpbHRlciIse2F0dHI6e3JlZjoiQSIrRisiOiIrTyhpLmhlYWRlci5sZW5ndGgtMSkrZH19KSksUygiZGVmaW5lZE5hbWVzIix3KS5hcHBlbmQoQSh3LCJkZWZpbmVkTmFtZSIse2F0dHI6e25hbWU6Il94bG5tLl9GaWx0ZXJEYXRhYmFzZSIsbG9jYWxTaGVldElkOiIwIixoaWRkZW46MX0sdGV4dDoiJyIrayhmKS5yZXBsYWNlKC8nL2csIicnIikrIichJEEkIitGKyI6IitPKGkuaGVhZGVyLmxlbmd0aC0xKStkfSkpKSxmLmN1c3RvbWl6ZSYmZi5jdXN0b21pemUocCxmLGUpLDA9PT1TKCJtZXJnZUNlbGxzIixjKS5jaGlsZHJlbigpLmxlbmd0aCYmUygibWVyZ2VDZWxscyIsYykucmVtb3ZlKCk7dmFyIHc9bmV3KFQoKSksRj17Y29tcHJlc3Npb246IkRFRkxBVEUiLHR5cGU6ImJsb2IiLG1pbWVUeXBlOiJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCJ9LEI9KCFmdW5jdGlvbiBmKHMsdCl7dm9pZCAwPT09eiYmKHo9LTE9PT1FLnNlcmlhbGl6ZVRvU3RyaW5nKChuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhSWyJ4bC93b3Jrc2hlZXRzL3NoZWV0MS54bWwiXSwidGV4dC94bWwiKSkuaW5kZXhPZigieG1sbnM6ciIpKSxTLmVhY2godCxmdW5jdGlvbih0LGUpe2lmKFMuaXNQbGFpbk9iamVjdChlKSlmKHMuZm9sZGVyKHQpLGUpO2Vsc2V7aWYoeil7Zm9yKHZhciBvLGw9ZS5jaGlsZE5vZGVzWzBdLG49W10scj1sLmF0dHJpYnV0ZXMubGVuZ3RoLTE7MDw9cjtyLS0pe3ZhciBhPWwuYXR0cmlidXRlc1tyXS5ub2RlTmFtZSxkPWwuYXR0cmlidXRlc1tyXS5ub2RlVmFsdWU7LTEhPT1hLmluZGV4T2YoIjoiKSYmKG4ucHVzaCh7bmFtZTphLHZhbHVlOmR9KSxsLnJlbW92ZUF0dHJpYnV0ZShhKSl9Zm9yKHI9MCxvPW4ubGVuZ3RoO3I8bztyKyspe3ZhciBwPWUuY3JlYXRlQXR0cmlidXRlKG5bcl0ubmFtZS5yZXBsYWNlKCI6IiwiX2R0X2JfbmFtZXNwYWNlX3Rva2VuXyIpKTtwLnZhbHVlPW5bcl0udmFsdWUsbC5zZXRBdHRyaWJ1dGVOb2RlKHApfX12YXIgaT1FLnNlcmlhbGl6ZVRvU3RyaW5nKGUpLGk9KGk9ej8oaT0oaT0tMT09PWkuaW5kZXhPZigiPD94bWwiKT8nPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PicraTppKS5yZXBsYWNlKC9fZHRfYl9uYW1lc3BhY2VfdG9rZW5fL2csIjoiKSkucmVwbGFjZSgveG1sbnM6TlNbXGRdKz0iIiBOU1tcZF0rOi9nLCIiKTppKS5yZXBsYWNlKC88KFtePD5dKj8pIHhtbG5zPSIiKFtePD5dKj8pPi9nLCI8JDEgJDI+Iik7cy5maWxlKHQsaSl9fSl9KHcscCksSS5maWxlbmFtZSk7MTc1PEImJihCPUIuc3Vic3RyKDAsMTc1KSksZi5jdXN0b21pemVaaXAmJmYuY3VzdG9taXplWmlwKHcsaSxCKSx3LmdlbmVyYXRlQXN5bmM/dy5nZW5lcmF0ZUFzeW5jKEYpLnRoZW4oZnVuY3Rpb24odCl7Tih0LEIpLGwoKX0pOihOKHcuZ2VuZXJhdGUoRiksQiksbCgpKX0sYXN5bmM6MTAwLGZpbGVuYW1lOiIqIixleHRlbnNpb246Ii54bHN4IixleHBvcnRPcHRpb25zOnt9LGhlYWRlcjohMCxmb290ZXI6ITAsdGl0bGU6IioiLG1lc3NhZ2VUb3A6IioiLG1lc3NhZ2VCb3R0b206IioiLGNyZWF0ZUVtcHR5Q2VsbHM6ITEsYXV0b0ZpbHRlcjohMSxzaGVldE5hbWU6IiJ9LHQuZXh0LmJ1dHRvbnMucGRmSHRtbDU9e2NsYXNzTmFtZToiYnV0dG9ucy1wZGYgYnV0dG9ucy1odG1sNSIsYXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PUMuRmlsZVJlYWRlciYmcygpfSx0ZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmkxOG4oImJ1dHRvbnMucGRmIiwiUERGIil9LGFjdGlvbjpmdW5jdGlvbih0LGUsbyxsLG4pe3ZhciByPWUuYnV0dG9ucy5leHBvcnREYXRhKGwuZXhwb3J0T3B0aW9ucyksYT1lLmJ1dHRvbnMuZXhwb3J0SW5mbyhsKSxkPVtdO2wuaGVhZGVyJiZyLmhlYWRlclN0cnVjdHVyZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2QucHVzaCh0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdD97dGV4dDp0LnRpdGxlLGNvbFNwYW46dC5jb2xzcGFuLHJvd1NwYW46dC5yb3dzcGFuLHN0eWxlOiJ0YWJsZUhlYWRlciJ9Ont9fSkpfSk7Zm9yKHZhciBwPTAsaT1yLmJvZHkubGVuZ3RoO3A8aTtwKyspZC5wdXNoKHIuYm9keVtwXS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3RleHQ6bnVsbD09dD8iIjoic3RyaW5nIj09dHlwZW9mIHQ/dDp0LnRvU3RyaW5nKCl9fSkpO2wuZm9vdGVyJiZyLmZvb3RlclN0cnVjdHVyZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2QucHVzaCh0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdD97dGV4dDp0LnRpdGxlLGNvbFNwYW46dC5jb2xzcGFuLHJvd1NwYW46dC5yb3dzcGFuLHN0eWxlOiJ0YWJsZUZvb3RlciJ9Ont9fSkpfSk7dmFyIGY9e3BhZ2VTaXplOmwucGFnZVNpemUscGFnZU9yaWVudGF0aW9uOmwub3JpZW50YXRpb24sY29udGVudDpbe3N0eWxlOiJ0YWJsZSIsdGFibGU6e2hlYWRlclJvd3M6ci5oZWFkZXJTdHJ1Y3R1cmUubGVuZ3RoLGZvb3RlclJvd3M6ci5mb290ZXJTdHJ1Y3R1cmUubGVuZ3RoLGJvZHk6ZH0sbGF5b3V0OntoTGluZVdpZHRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PT10fHx0PT09ZS50YWJsZS5ib2R5Lmxlbmd0aD8wOi41fSx2TGluZVdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhMaW5lQ29sb3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWUudGFibGUuaGVhZGVyUm93c3x8dD09PWUudGFibGUuYm9keS5sZW5ndGgtZS50YWJsZS5mb290ZXJSb3dzPyIjMzMzIjoiI2RkZCJ9LGZpbGxDb2xvcjpmdW5jdGlvbih0KXtyZXR1cm4gdDxyLmhlYWRlclN0cnVjdHVyZS5sZW5ndGg/IiNmZmYiOnQlMj09MD8iI2YzZjNmMyI6bnVsbH0scGFkZGluZ1RvcDpmdW5jdGlvbigpe3JldHVybiA1fSxwYWRkaW5nQm90dG9tOmZ1bmN0aW9uKCl7cmV0dXJuIDV9fX1dLHN0eWxlczp7dGFibGVIZWFkZXI6e2JvbGQ6ITAsZm9udFNpemU6MTEsYWxpZ25tZW50OiJjZW50ZXIifSx0YWJsZUZvb3Rlcjp7Ym9sZDohMCxmb250U2l6ZToxMSxhbGlnbm1lbnQ6ImNlbnRlciJ9LHRhYmxlOnttYXJnaW46WzAsNSwwLDVdfSx0aXRsZTp7YWxpZ25tZW50OiJjZW50ZXIiLGZvbnRTaXplOjEzfSxtZXNzYWdlOnt9fSxkZWZhdWx0U3R5bGU6e2ZvbnRTaXplOjEwfX0sZT0oYS5tZXNzYWdlVG9wJiZmLmNvbnRlbnQudW5zaGlmdCh7dGV4dDphLm1lc3NhZ2VUb3Asc3R5bGU6Im1lc3NhZ2UiLG1hcmdpbjpbMCwwLDAsMTJdfSksYS5tZXNzYWdlQm90dG9tJiZmLmNvbnRlbnQucHVzaCh7dGV4dDphLm1lc3NhZ2VCb3R0b20sc3R5bGU6Im1lc3NhZ2UiLG1hcmdpbjpbMCwwLDAsMTJdfSksYS50aXRsZSYmZi5jb250ZW50LnVuc2hpZnQoe3RleHQ6YS50aXRsZSxzdHlsZToidGl0bGUiLG1hcmdpbjpbMCwwLDAsMTJdfSksbC5jdXN0b21pemUmJmwuY3VzdG9taXplKGYsbCxlKSxzKCkuY3JlYXRlUGRmKGYpKTsib3BlbiIhPT1sLmRvd25sb2FkfHxtKCk/ZS5kb3dubG9hZChhLmZpbGVuYW1lKTplLm9wZW4oKSxuKCl9LGFzeW5jOjEwMCx0aXRsZToiKiIsZmlsZW5hbWU6IioiLGV4dGVuc2lvbjoiLnBkZiIsZXhwb3J0T3B0aW9uczp7fSxvcmllbnRhdGlvbjoicG9ydHJhaXQiLHBhZ2VTaXplOiJlbi1VUyI9PT1uYXZpZ2F0b3IubGFuZ3VhZ2V8fCJlbi1DQSI9PT1uYXZpZ2F0b3IubGFuZ3VhZ2U/IkxFVFRFUiI6IkE0IixoZWFkZXI6ITAsZm9vdGVyOiEwLG1lc3NhZ2VUb3A6IioiLG1lc3NhZ2VCb3R0b206IioiLGN1c3RvbWl6ZTpudWxsLGRvd25sb2FkOiJkb3dubG9hZCJ9LHR9KTsKCi8qIQogKiBQcmludCBidXR0b24gZm9yIEJ1dHRvbnMgYW5kIERhdGFUYWJsZXMuCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohZnVuY3Rpb24obil7dmFyIG8scjsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSIsImRhdGF0YWJsZXMubmV0IiwiZGF0YXRhYmxlcy5uZXQtYnV0dG9ucyJdLGZ1bmN0aW9uKHQpe3JldHVybiBuKHQsd2luZG93LGRvY3VtZW50KX0pOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz8obz1yZXF1aXJlKCJqcXVlcnkiKSxyPWZ1bmN0aW9uKHQsZSl7ZS5mbi5kYXRhVGFibGV8fHJlcXVpcmUoImRhdGF0YWJsZXMubmV0IikodCxlKSxlLmZuLmRhdGFUYWJsZS5CdXR0b25zfHxyZXF1aXJlKCJkYXRhdGFibGVzLm5ldC1idXR0b25zIikodCxlKX0sInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3c/bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10fHx3aW5kb3csZT1lfHxvKHQpLHIodCxlKSxuKGUsdCx0LmRvY3VtZW50KX06KHIod2luZG93LG8pLG1vZHVsZS5leHBvcnRzPW4obyx3aW5kb3csd2luZG93LmRvY3VtZW50KSkpOm4oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCl9KGZ1bmN0aW9uKHAsZix0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbSh0KXtyZXR1cm4gbi5ocmVmPXQsLTE9PT0odD1uLmhvc3QpLmluZGV4T2YoIi8iKSYmMCE9PW4ucGF0aG5hbWUuaW5kZXhPZigiLyIpJiYodCs9Ii8iKSxuLnByb3RvY29sKyIvLyIrdCtuLnBhdGhuYW1lK24uc2VhcmNofXZhciBlPXAuZm4uZGF0YVRhYmxlLG49dC5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuZXh0LmJ1dHRvbnMucHJpbnQ9e2NsYXNzTmFtZToiYnV0dG9ucy1wcmludCIsdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pMThuKCJidXR0b25zLnByaW50IiwiUHJpbnQiKX0sYWN0aW9uOmZ1bmN0aW9uKHQsZSxuLG8scil7dmFyIGE9ZS5idXR0b25zLmV4cG9ydERhdGEocC5leHRlbmQoe2RlY29kZUVudGl0aWVzOiExfSxvLmV4cG9ydE9wdGlvbnMpKSxpPWUuYnV0dG9ucy5leHBvcnRJbmZvKG8pLHM9ZS5jb2x1bW5zKG8uZXhwb3J0T3B0aW9ucy5jb2x1bW5zKS5ub2RlcygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5jbGFzc05hbWV9KS50b0FycmF5KCksdT0nPHRhYmxlIGNsYXNzPSInK2UudGFibGUoKS5ub2RlKCkuY2xhc3NOYW1lKyciPic7by5oZWFkZXImJih1Kz0iPHRoZWFkPiIrYS5oZWFkZXJTdHJ1Y3R1cmUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiI8dHI+Iit0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdD8nPHRoIGNvbHNwYW49IicrdC5jb2xzcGFuKyciIHJvd3NwYW49IicrdC5yb3dzcGFuKyciPicrdC50aXRsZSsiPC90aD4iOiIifSkuam9pbigiIikrIjwvdHI+In0pLmpvaW4oIiIpKyI8L3RoZWFkPiIpLHUrPSI8dGJvZHk+Ijtmb3IodmFyIGM9MCxkPWEuYm9keS5sZW5ndGg7YzxkO2MrKyl1Kz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0iPHRyPiIsbz0wLHI9dC5sZW5ndGg7bzxyO28rKyl7dmFyIGE9bnVsbD09PXRbb118fHZvaWQgMD09PXRbb10/IiI6dFtvXTtuKz0iPCIrZSsiICIrKHNbb10/J2NsYXNzPSInK3Nbb10rJyInOiIiKSsiPiIrYSsiPC8iK2UrIj4ifXJldHVybiBuKyI8L3RyPiJ9KGEuYm9keVtjXSwidGQiKTt1Kz0iPC90Ym9keT4iLG8uZm9vdGVyJiZhLmZvb3RlciYmKHUrPSI8dGZvb3Q+IithLmZvb3RlclN0cnVjdHVyZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIjx0cj4iK3QubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0Pyc8dGggY29sc3Bhbj0iJyt0LmNvbHNwYW4rJyIgcm93c3Bhbj0iJyt0LnJvd3NwYW4rJyI+Jyt0LnRpdGxlKyI8L3RoPiI6IiJ9KS5qb2luKCIiKSsiPC90cj4ifSkuam9pbigiIikrIjwvdGZvb3Q+IiksdSs9IjwvdGFibGU+Ijt2YXIgbD1mLm9wZW4oIiIsIiIpO2w/KGwuZG9jdW1lbnQuY2xvc2UoKSxsLmRvY3VtZW50LnRpdGxlPWkudGl0bGUscCgnc3R5bGUsIGxpbmtbcmVsPSJzdHlsZXNoZWV0Il0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jbG9uZU5vZGUoITApOyJsaW5rIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYodC5ocmVmPW0odC5ocmVmKSksbC5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHQpfSksby5jdXN0b21TY3JpcHRzJiZvLmN1c3RvbVNjcmlwdHMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1sLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Uuc3JjPXQsbC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGUpfSksbC5kb2N1bWVudC5ib2R5LmlubmVySFRNTD0iPGgxPiIraS50aXRsZSsiPC9oMT48ZGl2PiIrKGkubWVzc2FnZVRvcHx8IiIpKyI8L2Rpdj4iK3UrIjxkaXY+IisoaS5tZXNzYWdlQm90dG9tfHwiIikrIjwvZGl2PiIscChsLmRvY3VtZW50LmJvZHkpLmFkZENsYXNzKCJkdC1wcmludC12aWV3IikscCgiaW1nIixsLmRvY3VtZW50LmJvZHkpLmVhY2goZnVuY3Rpb24odCxlKXtlLnNldEF0dHJpYnV0ZSgic3JjIixtKGUuZ2V0QXR0cmlidXRlKCJzcmMiKSkpfSksby5jdXN0b21pemUmJm8uY3VzdG9taXplKGwsbyxlKSxsLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmF1dG9QcmludCYmKGwucHJpbnQoKSxsLmNsb3NlKCkpfSwxZTMpLHIoKSk6ZS5idXR0b25zLmluZm8oZS5pMThuKCJidXR0b25zLnByaW50RXJyb3JUaXRsZSIsIlVuYWJsZSB0byBvcGVuIHByaW50IHZpZXciKSxlLmkxOG4oImJ1dHRvbnMucHJpbnRFcnJvck1zZyIsIlBsZWFzZSBhbGxvdyBwb3B1cHMgaW4geW91ciBicm93c2VyIGZvciB0aGlzIHNpdGUgdG8gYmUgYWJsZSB0byB2aWV3IHRoZSBwcmludCB2aWV3LiIpLDVlMyl9LGFzeW5jOjEwMCx0aXRsZToiKiIsbWVzc2FnZVRvcDoiKiIsbWVzc2FnZUJvdHRvbToiKiIsZXhwb3J0T3B0aW9uczp7fSxoZWFkZXI6ITAsZm9vdGVyOiEwLGF1dG9QcmludDohMCxjdXN0b21pemU6bnVsbH0sZX0pOwoKLyohIERhdGVUaW1lIHBpY2tlciBmb3IgRGF0YVRhYmxlcy5uZXQgdjEuNS42CiAqCiAqIMKpIFNwcnlNZWRpYSBMdGQsIGFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIExpY2Vuc2U6IE1JVCBkYXRhdGFibGVzLm5ldC9saWNlbnNlL21pdAogKi8KIWZ1bmN0aW9uKHMpe3ZhciBpOyJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsianF1ZXJ5Il0sZnVuY3Rpb24odCl7cmV0dXJuIHModCx3aW5kb3csZG9jdW1lbnQpfSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzPyhpPXJlcXVpcmUoImpxdWVyeSIpLCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93P21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dHx8d2luZG93LGU9ZXx8aSh0KSxzKGUsdCx0LmRvY3VtZW50KX06bW9kdWxlLmV4cG9ydHM9cyhpLHdpbmRvdyx3aW5kb3cuZG9jdW1lbnQpKTpzKGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpfShmdW5jdGlvbihnLG8saSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4odCxlKXtpZihuLmZhY3RvcnkodCxlKSlyZXR1cm4gbjtpZih2b2lkIDA9PT1hJiYoYT1vLm1vbWVudHx8by5kYXlqc3x8by5sdXhvbnx8bnVsbCksdGhpcy5jPWcuZXh0ZW5kKCEwLHt9LG4uZGVmYXVsdHMsZSksZT10aGlzLmMuY2xhc3NQcmVmaXgsIWEmJiJZWVlZLU1NLUREIiE9PXRoaXMuYy5mb3JtYXQpdGhyb3ciRGF0ZVRpbWU6IFdpdGhvdXQgbW9tZW50anMsIGRheWpzIG9yIGx1eG9uIG9ubHkgdGhlIGZvcm1hdCAnWVlZWS1NTS1ERCcgY2FuIGJlIHVzZWQiO3RoaXMuX2lzTHV4b24oKSYmIllZWVktTU0tREQiPT10aGlzLmMuZm9ybWF0JiYodGhpcy5jLmZvcm1hdD0ieXl5eS1NTS1kZCIpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5jLm1pbkRhdGUmJih0aGlzLmMubWluRGF0ZT1uZXcgRGF0ZSh0aGlzLmMubWluRGF0ZSkpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5jLm1heERhdGUmJih0aGlzLmMubWF4RGF0ZT1uZXcgRGF0ZSh0aGlzLmMubWF4RGF0ZSkpO3ZhciBzPWcoJzxkaXYgY2xhc3M9IicrZSsnIj48ZGl2IGNsYXNzPSInK2UrJy1kYXRlIj48ZGl2IGNsYXNzPSInK2UrJy10aXRsZSI+PGRpdiBjbGFzcz0iJytlKyctaWNvbkxlZnQiPjxidXR0b24gdHlwZT0iYnV0dG9uIj48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPSInK2UrJy1pY29uUmlnaHQiPjxidXR0b24gdHlwZT0iYnV0dG9uIj48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPSInK2UrJy1sYWJlbCI+PHNwYW4+PC9zcGFuPjxzZWxlY3QgY2xhc3M9IicrZSsnLW1vbnRoIj48L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPSInK2UrJy1sYWJlbCI+PHNwYW4+PC9zcGFuPjxzZWxlY3QgY2xhc3M9IicrZSsnLXllYXIiPjwvc2VsZWN0PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9IicrZSsnLWJ1dHRvbnMiPjxhIGNsYXNzPSInK2UrJy1jbGVhciI+PC9hPjxhIGNsYXNzPSInK2UrJy10b2RheSI+PC9hPjwvZGl2PjxkaXYgY2xhc3M9IicrZSsnLWNhbGVuZGFyIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSInK2UrJy10aW1lIj48ZGl2IGNsYXNzPSInK2UrJy1ob3VycyI+PC9kaXY+PGRpdiBjbGFzcz0iJytlKyctbWludXRlcyI+PC9kaXY+PGRpdiBjbGFzcz0iJytlKyctc2Vjb25kcyI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iJytlKyctZXJyb3IiPjwvZGl2PjwvZGl2PicpO3RoaXMuZG9tPXtjb250YWluZXI6cyxkYXRlOnMuZmluZCgiLiIrZSsiLWRhdGUiKSx0aXRsZTpzLmZpbmQoIi4iK2UrIi10aXRsZSIpLGNhbGVuZGFyOnMuZmluZCgiLiIrZSsiLWNhbGVuZGFyIiksdGltZTpzLmZpbmQoIi4iK2UrIi10aW1lIiksZXJyb3I6cy5maW5kKCIuIitlKyItZXJyb3IiKSxidXR0b25zOnMuZmluZCgiLiIrZSsiLWJ1dHRvbnMiKSxjbGVhcjpzLmZpbmQoIi4iK2UrIi1jbGVhciIpLHRvZGF5OnMuZmluZCgiLiIrZSsiLXRvZGF5IikscHJldmlvdXM6cy5maW5kKCIuIitlKyItaWNvbkxlZnQiKSxuZXh0OnMuZmluZCgiLiIrZSsiLWljb25SaWdodCIpLGlucHV0OmcodCl9LHRoaXMucz17ZDpudWxsLGRpc3BsYXk6bnVsbCxtaW51dGVzUmFuZ2U6bnVsbCxzZWNvbmRzUmFuZ2U6bnVsbCxuYW1lc3BhY2U6ImRhdGVpbWUtIituLl9pbnN0YW5jZSsrLHBhcnRzOntkYXRlOm51bGwhPT10aGlzLmMuZm9ybWF0Lm1hdGNoKC9beVlNRGRdfEwoPyFUKXxsLyksdGltZTpudWxsIT09dGhpcy5jLmZvcm1hdC5tYXRjaCgvW0hobV18TFR8TFRTLyksc2Vjb25kczotMSE9PXRoaXMuYy5mb3JtYXQuaW5kZXhPZigicyIpLGhvdXJzMTI6bnVsbCE9PXRoaXMuYy5mb3JtYXQubWF0Y2goL1toYUFdLyl9LHNob3dUbzpudWxsfSx0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLmRhdGUpLmFwcGVuZCh0aGlzLmRvbS50aW1lKS5hcHBlbmQodGhpcy5kb20uZXJyb3IpLHRoaXMuZG9tLmRhdGUuYXBwZW5kKHRoaXMuZG9tLnRpdGxlKS5hcHBlbmQodGhpcy5kb20uYnV0dG9ucykuYXBwZW5kKHRoaXMuZG9tLmNhbGVuZGFyKSx0aGlzLmRvbS5pbnB1dC5hZGRDbGFzcygiZHQtZGF0ZXRpbWUiKSx0aGlzLl9jb25zdHJ1Y3RvcigpfXZhciBhO3JldHVybiBnLmV4dGVuZChuLnByb3RvdHlwZSx7ZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnMuc2hvd1RvKSx0aGlzLl9oaWRlKCEwKSx0aGlzLmRvbS5jb250YWluZXIub2ZmKCkuZW1wdHkoKSx0aGlzLmRvbS5pbnB1dC5yZW1vdmVDbGFzcygiZHQtZGF0ZXRpbWUiKS5yZW1vdmVBdHRyKCJhdXRvY29tcGxldGUiKS5vZmYoIi5kYXRldGltZSIpfSxkaXNwbGF5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PXQmJnRoaXMucy5kaXNwbGF5LnNldFVUQ0Z1bGxZZWFyKHQpLHZvaWQgMCE9PWUmJnRoaXMucy5kaXNwbGF5LnNldFVUQ01vbnRoKGUtMSksdm9pZCAwIT09dHx8dm9pZCAwIT09ZT8odGhpcy5fc2V0VGl0bGUoKSx0aGlzLl9zZXRDYWxhbmRlcigpLHRoaXMpOnttb250aDp0aGlzLnMuZGlzcGxheS5nZXRVVENNb250aCgpKzEseWVhcjp0aGlzLnMuZGlzcGxheS5nZXRVVENGdWxsWWVhcigpfX0sZXJyb3JNc2c6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb20uZXJyb3I7cmV0dXJuIHQ/ZS5odG1sKHQpOmUuZW1wdHkoKSx0aGlzfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hpZGUoKSx0aGlzfSxtYXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYy5tYXhEYXRlPSJzdHJpbmciPT10eXBlb2YgdD9uZXcgRGF0ZSh0KTp0LHRoaXMuX29wdGlvbnNUaXRsZSgpLHRoaXMuX3NldENhbGFuZGVyKCksdGhpc30sbWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmMubWluRGF0ZT0ic3RyaW5nIj09dHlwZW9mIHQ/bmV3IERhdGUodCk6dCx0aGlzLl9vcHRpb25zVGl0bGUoKSx0aGlzLl9zZXRDYWxhbmRlcigpLHRoaXN9LG93bnM6ZnVuY3Rpb24odCl7cmV0dXJuIDA8Zyh0KS5wYXJlbnRzKCkuZmlsdGVyKHRoaXMuZG9tLmNvbnRhaW5lcikubGVuZ3RofSx2YWw6ZnVuY3Rpb24odCxlKXt2YXIgcztyZXR1cm4gdm9pZCAwPT09dD90aGlzLnMuZDoocz10aGlzLnMuZCx0IGluc3RhbmNlb2YgRGF0ZT90aGlzLnMuZD10aGlzLl9kYXRlVG9VdGModCk6bnVsbD09PXR8fCIiPT09dD90aGlzLnMuZD1udWxsOiItLW5vdyI9PT10P3RoaXMucy5kPXRoaXMuX2RhdGVUb1V0YyhuZXcgRGF0ZSk6InN0cmluZyI9PXR5cGVvZiB0JiYodGhpcy5zLmQ9dGhpcy5fZGF0ZVRvVXRjKHRoaXMuX2NvbnZlcnQodCx0aGlzLmMuZm9ybWF0LG51bGwpKSksIWUmJnZvaWQgMCE9PWV8fCh0aGlzLnMuZD90aGlzLl93cml0ZU91dHB1dCghMSxudWxsPT09cyYmbnVsbCE9PXRoaXMucy5kfHxudWxsIT09cyYmbnVsbD09PXRoaXMucy5kfHxzLnRvU3RyaW5nKCkhPT10aGlzLnMuZC50b1N0cmluZygpKTp0aGlzLmRvbS5pbnB1dC52YWwodCkpLHRoaXMucy5kaXNwbGF5PXRoaXMucy5kP25ldyBEYXRlKHRoaXMucy5kLnRvU3RyaW5nKCkpOm5ldyBEYXRlLHRoaXMucy5kaXNwbGF5LnNldFVUQ0RhdGUoMSksdGhpcy5fc2V0VGl0bGUoKSx0aGlzLl9zZXRDYWxhbmRlcigpLHRoaXMuX3NldFRpbWUoKSx0aGlzKX0sdmFsRm9ybWF0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/KHRoaXMudmFsKHRoaXMuX2NvbnZlcnQoZSx0LG51bGwpKSx0aGlzKTp0aGlzLl9jb252ZXJ0KHRoaXMudmFsKCksbnVsbCx0KX0sX2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciB0PW8uZG9tLmlucHV0LnZhbCgpO3QhPT1lJiYoby5jLm9uQ2hhbmdlLmNhbGwobyx0LG8ucy5kLG8uZG9tLmlucHV0KSxlPXQpfXZhciBvPXRoaXMsZD10aGlzLmMuY2xhc3NQcmVmaXgsZT10aGlzLmRvbS5pbnB1dC52YWwoKTt0aGlzLnMucGFydHMuZGF0ZXx8dGhpcy5kb20uZGF0ZS5jc3MoImRpc3BsYXkiLCJub25lIiksdGhpcy5zLnBhcnRzLnRpbWV8fHRoaXMuZG9tLnRpbWUuY3NzKCJkaXNwbGF5Iiwibm9uZSIpLHRoaXMucy5wYXJ0cy5zZWNvbmRzfHwodGhpcy5kb20udGltZS5jaGlsZHJlbigiZGl2LiIrZCsiLXNlY29uZHMiKS5yZW1vdmUoKSx0aGlzLmRvbS50aW1lLmNoaWxkcmVuKCJzcGFuIikuZXEoMSkucmVtb3ZlKCkpLHRoaXMuYy5idXR0b25zLmNsZWFyfHx0aGlzLmRvbS5jbGVhci5jc3MoImRpc3BsYXkiLCJub25lIiksdGhpcy5jLmJ1dHRvbnMudG9kYXl8fHRoaXMuZG9tLnRvZGF5LmNzcygiZGlzcGxheSIsIm5vbmUiKSx0aGlzLl9vcHRpb25zVGl0bGUoKSxnKGkpLm9uKCJpMThuLmR0IixmdW5jdGlvbih0LGUpe2Uub0xhbmd1YWdlLmRhdGV0aW1lJiYoZy5leHRlbmQoITAsby5jLmkxOG4sZS5vTGFuZ3VhZ2UuZGF0ZXRpbWUpLG8uX29wdGlvbnNUaXRsZSgpKX0pLCJoaWRkZW4iPT09dGhpcy5kb20uaW5wdXQuYXR0cigidHlwZSIpJiYodGhpcy5kb20uY29udGFpbmVyLmFkZENsYXNzKCJpbmxpbmUiKSx0aGlzLmMuYXR0YWNoVG89ImlucHV0Iix0aGlzLnZhbCh0aGlzLmRvbS5pbnB1dC52YWwoKSwhMSksdGhpcy5fc2hvdygpKSxlJiZ0aGlzLnZhbChlLCExKSx0aGlzLmRvbS5pbnB1dC5hdHRyKCJhdXRvY29tcGxldGUiLCJvZmYiKS5vbigiZm9jdXMuZGF0ZXRpbWUgY2xpY2suZGF0ZXRpbWUiLGZ1bmN0aW9uKCl7by5kb20uY29udGFpbmVyLmlzKCI6dmlzaWJsZSIpfHxvLmRvbS5pbnB1dC5pcygiOmRpc2FibGVkIil8fChvLnZhbChvLmRvbS5pbnB1dC52YWwoKSwhMSksby5fc2hvdygpKX0pLm9uKCJrZXl1cC5kYXRldGltZSIsZnVuY3Rpb24oKXtvLmRvbS5jb250YWluZXIuaXMoIjp2aXNpYmxlIikmJm8udmFsKG8uZG9tLmlucHV0LnZhbCgpLCExKX0pLHRoaXMuZG9tLmNvbnRhaW5lclswXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1c2luIixmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfSksdGhpcy5kb20uY29udGFpbmVyLm9uKCJjaGFuZ2UiLCJzZWxlY3QiLGZ1bmN0aW9uKCl7dmFyIHQsZSxzPWcodGhpcyksaT1zLnZhbCgpO3MuaGFzQ2xhc3MoZCsiLW1vbnRoIik/KG8uX2NvcnJlY3RNb250aChvLnMuZGlzcGxheSxpKSxvLl9zZXRUaXRsZSgpLG8uX3NldENhbGFuZGVyKCkpOnMuaGFzQ2xhc3MoZCsiLXllYXIiKT8oby5zLmRpc3BsYXkuc2V0VVRDRnVsbFllYXIoaSksby5fc2V0VGl0bGUoKSxvLl9zZXRDYWxhbmRlcigpKTpzLmhhc0NsYXNzKGQrIi1ob3VycyIpfHxzLmhhc0NsYXNzKGQrIi1hbXBtIik/KG8ucy5wYXJ0cy5ob3VyczEyPyh0PStnKG8uZG9tLmNvbnRhaW5lcikuZmluZCgiLiIrZCsiLWhvdXJzIikudmFsKCksZT0icG0iPT09ZyhvLmRvbS5jb250YWluZXIpLmZpbmQoIi4iK2QrIi1hbXBtIikudmFsKCksby5zLmQuc2V0VVRDSG91cnMoMTIhPXR8fGU/ZSYmMTIhPXQ/MTIrdDp0OjApKTpvLnMuZC5zZXRVVENIb3VycyhpKSxvLl9zZXRUaW1lKCksby5fd3JpdGVPdXRwdXQoITApLGEoKSk6cy5oYXNDbGFzcyhkKyItbWludXRlcyIpPyhvLnMuZC5zZXRVVENNaW51dGVzKGkpLG8uX3NldFRpbWUoKSxvLl93cml0ZU91dHB1dCghMCksYSgpKTpzLmhhc0NsYXNzKGQrIi1zZWNvbmRzIikmJihvLnMuZC5zZXRTZWNvbmRzKGkpLG8uX3NldFRpbWUoKSxvLl93cml0ZU91dHB1dCghMCksYSgpKSxvLmRvbS5pbnB1dC5mb2N1cygpLG8uX3Bvc2l0aW9uKCl9KS5vbigiY2xpY2siLGZ1bmN0aW9uKHQpe3ZhciBlPW8ucy5kLHM9InNwYW4iPT09dC50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT90LnRhcmdldC5wYXJlbnROb2RlOnQudGFyZ2V0LGk9cy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCJzZWxlY3QiIT09aSlpZih0LnN0b3BQcm9wYWdhdGlvbigpLCJhIj09PWkmJih0LnByZXZlbnREZWZhdWx0KCksZyhzKS5oYXNDbGFzcyhkKyItY2xlYXIiKT8oby5zLmQ9bnVsbCxvLmRvbS5pbnB1dC52YWwoIiIpLG8uX3dyaXRlT3V0cHV0KCksby5fc2V0Q2FsYW5kZXIoKSxvLl9zZXRUaW1lKCksYSgpKTpnKHMpLmhhc0NsYXNzKGQrIi10b2RheSIpJiYoby5zLmRpc3BsYXk9bmV3IERhdGUsby5fc2V0VGl0bGUoKSxvLl9zZXRDYWxhbmRlcigpKSksImJ1dHRvbiI9PT1pKXt0PWcocyksaT10LnBhcmVudCgpO2lmKGkuaGFzQ2xhc3MoImRpc2FibGVkIikmJiFpLmhhc0NsYXNzKCJyYW5nZSIpKXQuYmx1cigpO2Vsc2UgaWYoaS5oYXNDbGFzcyhkKyItaWNvbkxlZnQiKSlvLnMuZGlzcGxheS5zZXRVVENNb250aChvLnMuZGlzcGxheS5nZXRVVENNb250aCgpLTEpLG8uX3NldFRpdGxlKCksby5fc2V0Q2FsYW5kZXIoKSxvLmRvbS5pbnB1dC5mb2N1cygpO2Vsc2UgaWYoaS5oYXNDbGFzcyhkKyItaWNvblJpZ2h0Iikpby5fY29ycmVjdE1vbnRoKG8ucy5kaXNwbGF5LG8ucy5kaXNwbGF5LmdldFVUQ01vbnRoKCkrMSksby5fc2V0VGl0bGUoKSxvLl9zZXRDYWxhbmRlcigpLG8uZG9tLmlucHV0LmZvY3VzKCk7ZWxzZXtpZih0LnBhcmVudHMoIi4iK2QrIi10aW1lIikubGVuZ3RoKXt2YXIgcz10LmRhdGEoInZhbHVlIiksbj10LmRhdGEoInVuaXQiKSxlPW8uX25lZWRWYWx1ZSgpO2lmKCJtaW51dGVzIj09PW4pe2lmKGkuaGFzQ2xhc3MoImRpc2FibGVkIikmJmkuaGFzQ2xhc3MoInJhbmdlIikpcmV0dXJuIG8ucy5taW51dGVzUmFuZ2U9cyx2b2lkIG8uX3NldFRpbWUoKTtvLnMubWludXRlc1JhbmdlPW51bGx9aWYoInNlY29uZHMiPT09bil7aWYoaS5oYXNDbGFzcygiZGlzYWJsZWQiKSYmaS5oYXNDbGFzcygicmFuZ2UiKSlyZXR1cm4gby5zLnNlY29uZHNSYW5nZT1zLHZvaWQgby5fc2V0VGltZSgpO28ucy5zZWNvbmRzUmFuZ2U9bnVsbH1pZigiYW0iPT09cyl7aWYoISgxMjw9ZS5nZXRVVENIb3VycygpKSlyZXR1cm47cz1lLmdldFVUQ0hvdXJzKCktMTJ9ZWxzZSBpZigicG0iPT09cyl7aWYoIShlLmdldFVUQ0hvdXJzKCk8MTIpKXJldHVybjtzPWUuZ2V0VVRDSG91cnMoKSsxMn1lWyJob3VycyI9PT1uPyJzZXRVVENIb3VycyI6Im1pbnV0ZXMiPT09bj8ic2V0VVRDTWludXRlcyI6InNldFNlY29uZHMiXShzKSxvLl9zZXRDYWxhbmRlcigpLG8uX3NldFRpbWUoKSxvLl93cml0ZU91dHB1dCghMCl9ZWxzZShlPW8uX25lZWRWYWx1ZSgpKS5zZXRVVENEYXRlKDEpLGUuc2V0VVRDRnVsbFllYXIodC5kYXRhKCJ5ZWFyIikpLGUuc2V0VVRDTW9udGgodC5kYXRhKCJtb250aCIpKSxlLnNldFVUQ0RhdGUodC5kYXRhKCJkYXkiKSksby5fd3JpdGVPdXRwdXQoITApLG8ucy5wYXJ0cy50aW1lPyhvLl9zZXRDYWxhbmRlcigpLG8uX3NldFRpbWUoKSk6c2V0VGltZW91dChmdW5jdGlvbigpe28uX2hpZGUoKX0sMTApO2EoKX19ZWxzZSBvLmRvbS5pbnB1dC5mb2N1cygpfSl9LF9jb21wYXJlRGF0ZXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5faXNMdXhvbigpP2EuRGF0ZVRpbWUuZnJvbUpTRGF0ZSh0KS50b1VUQygpLnRvSVNPRGF0ZSgpPT09YS5EYXRlVGltZS5mcm9tSlNEYXRlKGUpLnRvVVRDKCkudG9JU09EYXRlKCk6dGhpcy5fZGF0ZVRvVXRjU3RyaW5nKHQpPT09dGhpcy5fZGF0ZVRvVXRjU3RyaW5nKGUpfSxfY29udmVydDpmdW5jdGlvbih0LGUscyl7dmFyIGk7cmV0dXJuIHQmJihhP3RoaXMuX2lzTHV4b24oKT8oaT10IGluc3RhbmNlb2YgRGF0ZT9hLkRhdGVUaW1lLmZyb21KU0RhdGUodCkudG9VVEMoKTphLkRhdGVUaW1lLmZyb21Gb3JtYXQodCxlKSkuaXNWYWxpZD9zP2kudG9Gb3JtYXQocyk6aS50b0pTRGF0ZSgpOm51bGw6KGk9dCBpbnN0YW5jZW9mIERhdGU/YS51dGModCx2b2lkIDAsdGhpcy5jLmxvY2FsZSx0aGlzLmMuc3RyaWN0KTphKHQsZSx0aGlzLmMubG9jYWxlLHRoaXMuYy5zdHJpY3QpKS5pc1ZhbGlkKCk/cz9pLmZvcm1hdChzKTppLnRvRGF0ZSgpOm51bGw6IWUmJiFzfHxlJiZzP3Q6ZT8oaT10Lm1hdGNoKC8oXGR7NH0pXC0oXGR7Mn0pXC0oXGR7Mn0pLykpP25ldyBEYXRlKGlbMV0saVsyXS0xLGlbM10pOm51bGw6dC5nZXRVVENGdWxsWWVhcigpKyItIit0aGlzLl9wYWQodC5nZXRVVENNb250aCgpKzEpKyItIit0aGlzLl9wYWQodC5nZXRVVENEYXRlKCkpKX0sX2NvcnJlY3RNb250aDpmdW5jdGlvbih0LGUpe3ZhciBzPXRoaXMuX2RheXNJbk1vbnRoKHQuZ2V0VVRDRnVsbFllYXIoKSxlKSxpPXQuZ2V0VVRDRGF0ZSgpPnM7dC5zZXRVVENNb250aChlKSxpJiYodC5zZXRVVENEYXRlKHMpLHQuc2V0VVRDTW9udGgoZSkpfSxfZGF5c0luTW9udGg6ZnVuY3Rpb24odCxlKXtyZXR1cm5bMzEsdCU0PT0wJiYodCUxMDAhPTB8fHQlNDAwPT0wKT8yOToyOCwzMSwzMCwzMSwzMCwzMSwzMSwzMCwzMSwzMCwzMV1bZV19LF9kYXRlVG9VdGM6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJm5ldyBEYXRlKERhdGUuVVRDKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCksdC5nZXRIb3VycygpLHQuZ2V0TWludXRlcygpLHQuZ2V0U2Vjb25kcygpKSl9LF9kYXRlVG9VdGNTdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzTHV4b24oKT9hLkRhdGVUaW1lLmZyb21KU0RhdGUodCkudG9VVEMoKS50b0lTT0RhdGUoKTp0LmdldFVUQ0Z1bGxZZWFyKCkrIi0iK3RoaXMuX3BhZCh0LmdldFVUQ01vbnRoKCkrMSkrIi0iK3RoaXMuX3BhZCh0LmdldFVUQ0RhdGUoKSl9LF9oaWRlOmZ1bmN0aW9uKHQpeyF0JiYiaGlkZGVuIj09PXRoaXMuZG9tLmlucHV0LmF0dHIoInR5cGUiKXx8KHQ9dGhpcy5zLm5hbWVzcGFjZSx0aGlzLmRvbS5jb250YWluZXIuZGV0YWNoKCksZyhvKS5vZmYoIi4iK3QpLGcoaSkub2ZmKCJrZXlkb3duLiIrdCksZygiZGl2LmRhdGFUYWJsZXNfc2Nyb2xsQm9keSIpLm9mZigic2Nyb2xsLiIrdCksZygiZGl2LkRURV9Cb2R5X0NvbnRlbnQiKS5vZmYoInNjcm9sbC4iK3QpLGcoaSkub2ZmKCJjbGljay4iK3QpLGcodGhpcy5kb20uaW5wdXRbMF0ub2Zmc2V0UGFyZW50KS5vZmYoIi4iK3QpKX0sX2hvdXJzMjRUbzEyOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8xMjoxMjx0P3QtMTI6dH0sX2h0bWxEYXk6ZnVuY3Rpb24odCl7dmFyIGUscz10aGlzLmMuY2xhc3NQcmVmaXg7cmV0dXJuIHQuZW1wdHk/Jzx0ZCBjbGFzcz0iJytzKyctZW1wdHkiPjwvdGQ+JzooZT1bInNlbGVjdGFibGUiXSx0LmRpc2FibGVkJiZlLnB1c2goImRpc2FibGVkIiksdC50b2RheSYmZS5wdXNoKCJub3ciKSx0LnNlbGVjdGVkJiZlLnB1c2goInNlbGVjdGVkIiksJzx0ZCBkYXRhLWRheT0iJyt0LmRheSsnIiBjbGFzcz0iJytlLmpvaW4oIiAiKSsnIj48YnV0dG9uIGNsYXNzPSInK3MrIi1idXR0b24gIitzKyctZGF5IiB0eXBlPSJidXR0b24iIGRhdGEteWVhcj0iJyt0LnllYXIrJyIgZGF0YS1tb250aD0iJyt0Lm1vbnRoKyciIGRhdGEtZGF5PSInK3QuZGF5KyciPjxzcGFuPicrdC5kYXkrIjwvc3Bhbj48L2J1dHRvbj48L3RkPiIpfSxfaHRtbE1vbnRoOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBzPXRoaXMuX2RhdGVUb1V0YyhuZXcgRGF0ZSksaT10aGlzLl9kYXlzSW5Nb250aCh0LGUpLG49bmV3IERhdGUoRGF0ZS5VVEModCxlLDEpKS5nZXRVVENEYXkoKSxhPVtdLG89W10sZD0oMDx0aGlzLmMuZmlyc3REYXkmJihuLT10aGlzLmMuZmlyc3REYXkpPDAmJihuKz03KSxpK24pLHI9ZDs3PHI7KXItPTc7ZCs9Ny1yO3ZhciBsPXRoaXMuYy5taW5EYXRlLGg9dGhpcy5jLm1heERhdGU7bCYmKGwuc2V0VVRDSG91cnMoMCksbC5zZXRVVENNaW51dGVzKDApLGwuc2V0U2Vjb25kcygwKSksaCYmKGguc2V0VVRDSG91cnMoMjMpLGguc2V0VVRDTWludXRlcyg1OSksaC5zZXRTZWNvbmRzKDU5KSk7Zm9yKHZhciB1PTAsYz0wO3U8ZDt1Kyspe3ZhciBtPW5ldyBEYXRlKERhdGUuVVRDKHQsZSx1LW4rMSkpLGY9ISF0aGlzLnMuZCYmdGhpcy5fY29tcGFyZURhdGVzKG0sdGhpcy5zLmQpLHA9dGhpcy5fY29tcGFyZURhdGVzKG0scykseT11PG58fGkrbjw9dSxUPWwmJm08bHx8aCYmaDxtLHY9dGhpcy5jLmRpc2FibGVEYXlzLGY9e2RheTp1LW4rMSxtb250aDplLHllYXI6dCxzZWxlY3RlZDpmLHRvZGF5OnAsZGlzYWJsZWQ6VD1BcnJheS5pc0FycmF5KHYpJiYtMSE9PWcuaW5BcnJheShtLmdldFVUQ0RheSgpLHYpfHwiZnVuY3Rpb24iPT10eXBlb2YgdiYmITA9PT12KG0pPyEwOlQsZW1wdHk6eX07by5wdXNoKHRoaXMuX2h0bWxEYXkoZikpLDc9PSsrYyYmKHRoaXMuYy5zaG93V2Vla051bWJlciYmby51bnNoaWZ0KHRoaXMuX2h0bWxXZWVrT2ZZZWFyKHUtbixlLHQpKSxhLnB1c2goIjx0cj4iK28uam9pbigiIikrIjwvdHI+Iiksbz1bXSxjPTApfXZhciBfLEQ9dGhpcy5jLmNsYXNzUHJlZml4LEM9RCsiLXRhYmxlIjtyZXR1cm4gdGhpcy5jLnNob3dXZWVrTnVtYmVyJiYoQys9IiB3ZWVrTnVtYmVyIiksbCYmKF89bD49bmV3IERhdGUoRGF0ZS5VVEModCxlLDEsMCwwLDApKSx0aGlzLmRvbS50aXRsZS5maW5kKCJkaXYuIitEKyItaWNvbkxlZnQiKS5jc3MoImRpc3BsYXkiLF8/Im5vbmUiOiJibG9jayIpKSxoJiYoXz1oPG5ldyBEYXRlKERhdGUuVVRDKHQsZSsxLDEsMCwwLDApKSx0aGlzLmRvbS50aXRsZS5maW5kKCJkaXYuIitEKyItaWNvblJpZ2h0IikuY3NzKCJkaXNwbGF5IixfPyJub25lIjoiYmxvY2siKSksJzx0YWJsZSBjbGFzcz0iJytDKyciPjx0aGVhZD4nK3RoaXMuX2h0bWxNb250aEhlYWQoKSsiPC90aGVhZD48dGJvZHk+IithLmpvaW4oIiIpKyI8L3Rib2R5PjwvdGFibGU+In0sX2h0bWxNb250aEhlYWQ6ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPXRoaXMuYy5maXJzdERheSxzPXRoaXMuYy5pMThuO3RoaXMuYy5zaG93V2Vla051bWJlciYmdC5wdXNoKCI8dGg+PC90aD4iKTtmb3IodmFyIGk9MDtpPDc7aSsrKXQucHVzaCgiPHRoPiIrZnVuY3Rpb24odCl7Zm9yKHQrPWU7Nzw9dDspdC09NztyZXR1cm4gcy53ZWVrZGF5c1t0XX0oaSkrIjwvdGg+Iik7cmV0dXJuIHQuam9pbigiIil9LF9odG1sV2Vla09mWWVhcjpmdW5jdGlvbih0LGUscyl7ZT1uZXcgRGF0ZShzLGUsdCwwLDAsMCwwKSxlLnNldERhdGUoZS5nZXREYXRlKCkrNC0oZS5nZXREYXkoKXx8NykpLHQ9bmV3IERhdGUocywwLDEpLHM9TWF0aC5jZWlsKCgoZS10KS84NjRlNSsxKS83KTtyZXR1cm4nPHRkIGNsYXNzPSInK3RoaXMuYy5jbGFzc1ByZWZpeCsnLXdlZWsiPicrcysiPC90ZD4ifSxfaXNMdXhvbjpmdW5jdGlvbigpe3JldHVybiEhKGEmJmEuRGF0ZVRpbWUmJmEuRHVyYXRpb24mJmEuU2V0dGluZ3MpfSxfbmVlZFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucy5kfHwodGhpcy5zLmQ9dGhpcy5fZGF0ZVRvVXRjKG5ldyBEYXRlKSx0aGlzLnMucGFydHMudGltZSl8fCh0aGlzLnMuZC5zZXRVVENIb3VycygwKSx0aGlzLnMuZC5zZXRVVENNaW51dGVzKDApLHRoaXMucy5kLnNldFNlY29uZHMoMCksdGhpcy5zLmQuc2V0TWlsbGlzZWNvbmRzKDApKSx0aGlzLnMuZH0sX29wdGlvbnM6ZnVuY3Rpb24odCxlLHMpe3M9c3x8ZTt2YXIgaT10aGlzLmRvbS5jb250YWluZXIuZmluZCgic2VsZWN0LiIrdGhpcy5jLmNsYXNzUHJlZml4KyItIit0KTtpLmVtcHR5KCk7Zm9yKHZhciBuPTAsYT1lLmxlbmd0aDtuPGE7bisrKWkuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPSInK2Vbbl0rJyI+JytzW25dKyI8L29wdGlvbj4iKX0sX29wdGlvblNldDpmdW5jdGlvbih0LGUpe3ZhciB0PXRoaXMuZG9tLmNvbnRhaW5lci5maW5kKCJzZWxlY3QuIit0aGlzLmMuY2xhc3NQcmVmaXgrIi0iK3QpLHM9dC5wYXJlbnQoKS5jaGlsZHJlbigic3BhbiIpLGU9KHQudmFsKGUpLHQuZmluZCgib3B0aW9uOnNlbGVjdGVkIikpO3MuaHRtbCgwIT09ZS5sZW5ndGg/ZS50ZXh0KCk6dGhpcy5jLmkxOG4udW5rbm93bil9LF9vcHRpb25zVGltZTpmdW5jdGlvbihuLGEsbyxkLHQpe3ZhciBlLHI9dGhpcy5jLmNsYXNzUHJlZml4LHM9dGhpcy5kb20uY29udGFpbmVyLmZpbmQoImRpdi4iK3IrIi0iK24pLGk9MTI9PT1hP2Z1bmN0aW9uKHQpe3JldHVybiB0fTp0aGlzLl9wYWQsbD1yKyItdGFibGUiLGg9dGhpcy5jLmkxOG47aWYocy5sZW5ndGgpe3ZhciB1PSIiLGM9MTAsbT1mdW5jdGlvbih0LGUscyl7MTI9PT1hJiYibnVtYmVyIj09dHlwZW9mIHQmJigxMjw9byYmKHQrPTEyKSwxMj09dD90PTA6MjQ9PXQmJih0PTEyKSk7dmFyIGk9bz09PXR8fCJhbSI9PT10JiZvPDEyfHwicG0iPT09dCYmMTI8PW8/InNlbGVjdGVkIjoiIjtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQmJmQmJi0xPT09Zy5pbkFycmF5KHQsZCkmJihpKz0iIGRpc2FibGVkIikscyYmKGkrPSIgIitzKSwnPHRkIGNsYXNzPSJzZWxlY3RhYmxlICcraSsnIj48YnV0dG9uIGNsYXNzPSInK3IrIi1idXR0b24gIityKyctZGF5IiB0eXBlPSJidXR0b24iIGRhdGEtdW5pdD0iJytuKyciIGRhdGEtdmFsdWU9IicrdCsnIj48c3Bhbj4nK2UrIjwvc3Bhbj48L2J1dHRvbj48L3RkPiJ9O2lmKDEyPT09YSl7Zm9yKHUrPSI8dHI+IixlPTE7ZTw9NjtlKyspdSs9bShlLGkoZSkpO2Zvcih1PSh1Kz1tKCJhbSIsaC5hbVBtWzBdKSkrIjwvdHI+IisiPHRyPiIsZT03O2U8PTEyO2UrKyl1Kz1tKGUsaShlKSk7dT11K20oInBtIixoLmFtUG1bMV0pKyI8L3RyPiIsYz03fWVsc2V7aWYoMjQ9PT1hKWZvcih2YXIgZj0wLHA9MDtwPDQ7cCsrKXtmb3IodSs9Ijx0cj4iLGU9MDtlPDY7ZSsrKXUrPW0oZixpKGYpKSxmKys7dSs9IjwvdHI+In1lbHNle2Zvcih1Kz0iPHRyPiIscD0wO3A8NjA7cCs9MTApdSs9bShwLGkocCksInJhbmdlIik7dmFyIHU9dSsiPC90cj4iKygnPC90Ym9keT48L3RoZWFkPjx0YWJsZSBjbGFzcz0iJytsKyIgIitsKyctbm9zcGFjZSI+PHRib2R5PicpLHk9bnVsbCE9PXQ/dDotMT09PW8/MDoxMCpNYXRoLmZsb29yKG8vMTApO2Zvcih1Kz0iPHRyPiIscD15KzE7cDx5KzEwO3ArKyl1Kz1tKHAsaShwKSk7dSs9IjwvdHI+In1jPTZ9cy5lbXB0eSgpLmFwcGVuZCgnPHRhYmxlIGNsYXNzPSInK2wrJyI+PHRoZWFkPjx0cj48dGggY29sc3Bhbj0iJytjKyciPicraFtuXSsiPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiIrdSsiPC90Ym9keT48L3RhYmxlPiIpfX0sX29wdGlvbnNUaXRsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuYy5pMThuLGU9dGhpcy5jLm1pbkRhdGUscz10aGlzLmMubWF4RGF0ZSxlPWU/ZS5nZXRGdWxsWWVhcigpOm51bGwscz1zP3MuZ2V0RnVsbFllYXIoKTpudWxsLGU9bnVsbCE9PWU/ZToobmV3IERhdGUpLmdldEZ1bGxZZWFyKCktdGhpcy5jLnllYXJSYW5nZSxzPW51bGwhPT1zP3M6KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpK3RoaXMuYy55ZWFyUmFuZ2U7dGhpcy5fb3B0aW9ucygibW9udGgiLHRoaXMuX3JhbmdlKDAsMTEpLHQubW9udGhzKSx0aGlzLl9vcHRpb25zKCJ5ZWFyIix0aGlzLl9yYW5nZShlLHMpKSx0aGlzLmRvbS50b2RheS50ZXh0KHQudG9kYXkpLnRleHQodC50b2RheSksdGhpcy5kb20uY2xlYXIudGV4dCh0LmNsZWFyKS50ZXh0KHQuY2xlYXIpLHRoaXMuZG9tLnByZXZpb3VzLmF0dHIoInRpdGxlIix0LnByZXZpb3VzKS5jaGlsZHJlbigiYnV0dG9uIikudGV4dCh0LnByZXZpb3VzKSx0aGlzLmRvbS5uZXh0LmF0dHIoInRpdGxlIix0Lm5leHQpLmNoaWxkcmVuKCJidXR0b24iKS50ZXh0KHQubmV4dCl9LF9wYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MTA/IjAiK3Q6dH0sX3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQsZSxzLGk9ImlucHV0Ij09PXRoaXMuYy5hdHRhY2hUbz90aGlzLmRvbS5pbnB1dC5wb3NpdGlvbigpOnRoaXMuZG9tLmlucHV0Lm9mZnNldCgpLG49dGhpcy5kb20uY29udGFpbmVyLGE9dGhpcy5kb20uaW5wdXQub3V0ZXJIZWlnaHQoKTtuLmhhc0NsYXNzKCJpbmxpbmUiKT9uLmluc2VydEFmdGVyKHRoaXMuZG9tLmlucHV0KToodGhpcy5zLnBhcnRzLmRhdGUmJnRoaXMucy5wYXJ0cy50aW1lJiY1NTA8ZyhvKS53aWR0aCgpP24uYWRkQ2xhc3MoImhvcml6b250YWwiKTpuLnJlbW92ZUNsYXNzKCJob3Jpem9udGFsIiksImlucHV0Ij09PXRoaXMuYy5hdHRhY2hUbz9uLmNzcyh7dG9wOmkudG9wK2EsbGVmdDppLmxlZnR9KS5pbnNlcnRBZnRlcih0aGlzLmRvbS5pbnB1dCk6bi5jc3Moe3RvcDppLnRvcCthLGxlZnQ6aS5sZWZ0fSkuYXBwZW5kVG8oImJvZHkiKSx0PW4ub3V0ZXJIZWlnaHQoKSxlPW4ub3V0ZXJXaWR0aCgpLHM9ZyhvKS5zY3JvbGxUb3AoKSxpLnRvcCthK3Qtcz5nKG8pLmhlaWdodCgpJiYoYT1pLnRvcC10LG4uY3NzKCJ0b3AiLGE8MD8wOmEpKSxlK2kubGVmdD5nKG8pLndpZHRoKCkmJihzPWcobykud2lkdGgoKS1lLTUsImlucHV0Ij09PXRoaXMuYy5hdHRhY2hUbyYmKHMtPWcobikub2Zmc2V0UGFyZW50KCkub2Zmc2V0KCkubGVmdCksbi5jc3MoImxlZnQiLHM8MD8wOnMpKSl9LF9yYW5nZTpmdW5jdGlvbih0LGUscyl7dmFyIGk9W107cz1zfHwxO2Zvcih2YXIgbj10O248PWU7bis9cylpLnB1c2gobik7cmV0dXJuIGl9LF9zZXRDYWxhbmRlcjpmdW5jdGlvbigpe3RoaXMucy5kaXNwbGF5JiZ0aGlzLmRvbS5jYWxlbmRhci5lbXB0eSgpLmFwcGVuZCh0aGlzLl9odG1sTW9udGgodGhpcy5zLmRpc3BsYXkuZ2V0VVRDRnVsbFllYXIoKSx0aGlzLnMuZGlzcGxheS5nZXRVVENNb250aCgpKSl9LF9zZXRUaXRsZTpmdW5jdGlvbigpe3RoaXMuX29wdGlvblNldCgibW9udGgiLHRoaXMucy5kaXNwbGF5LmdldFVUQ01vbnRoKCkpLHRoaXMuX29wdGlvblNldCgieWVhciIsdGhpcy5zLmRpc3BsYXkuZ2V0VVRDRnVsbFllYXIoKSl9LF9zZXRUaW1lOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5jW3QrIkF2YWlsYWJsZSJdfHxlLl9yYW5nZSgwLDU5LGUuY1t0KyJJbmNyZW1lbnQiXSl9dmFyIGU9dGhpcyxzPXRoaXMucy5kLGk9bnVsbCxuPW51bGwhPShpPXRoaXMuX2lzTHV4b24oKT9hLkRhdGVUaW1lLmZyb21KU0RhdGUocykudG9VVEMoKTppKT9pLmhvdXI6cz9zLmdldFVUQ0hvdXJzKCk6LTE7dGhpcy5fb3B0aW9uc1RpbWUoImhvdXJzIix0aGlzLnMucGFydHMuaG91cnMxMj8xMjoyNCxuLHRoaXMuYy5ob3Vyc0F2YWlsYWJsZSksdGhpcy5fb3B0aW9uc1RpbWUoIm1pbnV0ZXMiLDYwLG51bGwhPWk/aS5taW51dGU6cz9zLmdldFVUQ01pbnV0ZXMoKTotMSx0KCJtaW51dGVzIiksdGhpcy5zLm1pbnV0ZXNSYW5nZSksdGhpcy5fb3B0aW9uc1RpbWUoInNlY29uZHMiLDYwLG51bGwhPWk/aS5zZWNvbmQ6cz9zLmdldFNlY29uZHMoKTotMSx0KCJzZWNvbmRzIiksdGhpcy5zLnNlY29uZHNSYW5nZSl9LF9zaG93OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucy5uYW1lc3BhY2Uscz0odGhpcy5fcG9zaXRpb24oKSxnKG8pLm9uKCJzY3JvbGwuIit0KyIgcmVzaXplLiIrdCxmdW5jdGlvbigpe2UuX3Bvc2l0aW9uKCl9KSxnKCJkaXYuRFRFX0JvZHlfQ29udGVudCIpLm9uKCJzY3JvbGwuIit0LGZ1bmN0aW9uKCl7ZS5fcG9zaXRpb24oKX0pLGcoImRpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHkiKS5vbigic2Nyb2xsLiIrdCxmdW5jdGlvbigpe2UuX3Bvc2l0aW9uKCl9KSx0aGlzLmRvbS5pbnB1dFswXS5vZmZzZXRQYXJlbnQpO3MhPT1pLmJvZHkmJmcocykub24oInNjcm9sbC4iK3QsZnVuY3Rpb24oKXtlLl9wb3NpdGlvbigpfSksZyhpKS5vbigia2V5ZG93bi4iK3QsZnVuY3Rpb24odCl7OSE9PXQua2V5Q29kZSYmMjchPT10LmtleUNvZGUmJjEzIT09dC5rZXlDb2RlfHxlLl9oaWRlKCl9KSxjbGVhclRpbWVvdXQodGhpcy5zLnNob3dUbyksdGhpcy5kb20uaW5wdXQub24oImJsdXIiLGZ1bmN0aW9uKHQpe2Uucy5zaG93VG89c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWkuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aS5hY3RpdmVFbGVtZW50PT09ZS5kb20uaW5wdXRbMF18fGUuZG9tLmNvbnRhaW5lci5maW5kKGkuYWN0aXZlRWxlbWVudCkubGVuZ3RofHxbImlucHV0Iiwic2VsZWN0IiwiYnV0dG9uIl0uaW5jbHVkZXModCkmJmUuaGlkZSgpfSwxMCl9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZyhpKS5vbigiY2xpY2suIit0LGZ1bmN0aW9uKHQpe2codC50YXJnZXQpLnBhcmVudHMoKS5maWx0ZXIoZS5kb20uY29udGFpbmVyKS5sZW5ndGh8fHQudGFyZ2V0PT09ZS5kb20uaW5wdXRbMF18fGUuX2hpZGUoKX0pfSwxMCl9LF93cml0ZU91dHB1dDpmdW5jdGlvbih0LGUpe3ZhciBzPXRoaXMucy5kLGk9IiIsbj10aGlzLmRvbS5pbnB1dDtzJiYoaT10aGlzLl9jb252ZXJ0KHMsbnVsbCx0aGlzLmMuZm9ybWF0KSksbi52YWwoaSksdm9pZCAwIT09ZSYmIWV8fChzPW5ldyBFdmVudCgiY2hhbmdlIix7YnViYmxlczohMH0pLG5bMF0uZGlzcGF0Y2hFdmVudChzKSksImhpZGRlbiI9PT1uLmF0dHIoInR5cGUiKSYmdGhpcy52YWwoaSwhMSksdCYmbi5mb2N1cygpfX0pLG4udXNlPWZ1bmN0aW9uKHQpe2E9dH0sbi5faW5zdGFuY2U9MCxuLnR5cGU9IkRhdGVUaW1lIixuLmRlZmF1bHRzPXthdHRhY2hUbzoiYm9keSIsYnV0dG9uczp7Y2xlYXI6ITEsdG9kYXk6ITF9LGNsYXNzUHJlZml4OiJkdC1kYXRldGltZSIsZGlzYWJsZURheXM6bnVsbCxmaXJzdERheToxLGZvcm1hdDoiWVlZWS1NTS1ERCIsaG91cnNBdmFpbGFibGU6bnVsbCxpMThuOntjbGVhcjoiQ2xlYXIiLHByZXZpb3VzOiJQcmV2aW91cyIsbmV4dDoiTmV4dCIsbW9udGhzOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSx3ZWVrZGF5czpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLGFtUG06WyJhbSIsInBtIl0saG91cnM6IkhvdXIiLG1pbnV0ZXM6Ik1pbnV0ZSIsc2Vjb25kczoiU2Vjb25kIix1bmtub3duOiItIix0b2RheToiVG9kYXkifSxtYXhEYXRlOm51bGwsbWluRGF0ZTpudWxsLG1pbnV0ZXNBdmFpbGFibGU6bnVsbCxtaW51dGVzSW5jcmVtZW50OjEsc3RyaWN0OiEwLGxvY2FsZToiZW4iLG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxzZWNvbmRzQXZhaWxhYmxlOm51bGwsc2Vjb25kc0luY3JlbWVudDoxLHNob3dXZWVrTnVtYmVyOiExLHllYXJSYW5nZToyNX0sbi52ZXJzaW9uPSIxLjUuNiIsbi5mYWN0b3J5PWZ1bmN0aW9uKHQsZSl7dmFyIHM9ITE7cmV0dXJuIHQmJnQuZG9jdW1lbnQmJihpPShvPXQpLmRvY3VtZW50KSxlJiZlLmZuJiZlLmZuLmpxdWVyeSYmKGc9ZSxzPSEwKSxzfSxvLkRhdGVUaW1lfHwoby5EYXRlVGltZT1uKSxvLkRhdGFUYWJsZSYmKG8uRGF0YVRhYmxlLkRhdGVUaW1lPW4pLGcuZm4uZHREYXRlVGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bmV3IG4odGhpcyx0KX0pfSxnLmZuLmRhdGFUYWJsZSYmKGcuZm4uZGF0YVRhYmxlLkRhdGVUaW1lPW4sZy5mbi5EYXRhVGFibGUuRGF0ZVRpbWU9bixnLmZuLmRhdGFUYWJsZS5FZGl0b3IpJiYoZy5mbi5kYXRhVGFibGUuRWRpdG9yLkRhdGVUaW1lPW4pLG59KTsKCg=="
            },
            {
                "name": "datatables.min.js",
                "description": "",
                "contentType": "text/javascript",
                "contents": "LyoKICogVGhpcyBjb21iaW5lZCBmaWxlIHdhcyBjcmVhdGVkIGJ5IHRoZSBEYXRhVGFibGVzIGRvd25sb2FkZXIgYnVpbGRlcjoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkCiAqCiAqIFRvIHJlYnVpbGQgb3IgbW9kaWZ5IHRoaXMgZmlsZSB3aXRoIHRoZSBsYXRlc3QgdmVyc2lvbnMgb2YgdGhlIGluY2x1ZGVkCiAqIHNvZnR3YXJlIHBsZWFzZSB2aXNpdDoKICogICBodHRwczovL2RhdGF0YWJsZXMubmV0L2Rvd25sb2FkLyNkdC9kdC0yLjEuOC9lLTIuMy4yL2ItMy4xLjIvYi1odG1sNS0zLjEuMi9maC00LjAuMS9rdC0yLjEyLjEvci0zLjAuMy9yZy0xLjUuMC9zYy0yLjQuMy9zYi0xLjguMS9zbC0yLjEuMAogKgogKiBJbmNsdWRlZCBsaWJyYXJpZXM6CiAqICAgRGF0YVRhYmxlcyAyLjEuOCwgRWRpdG9yIDIuMy4yLCBCdXR0b25zIDMuMS4yLCBIVE1MNSBleHBvcnQgMy4xLjIsIEZpeGVkSGVhZGVyIDQuMC4xLCBLZXlUYWJsZSAyLjEyLjEsIFJlc3BvbnNpdmUgMy4wLjMsIFJvd0dyb3VwIDEuNS4wLCBTY3JvbGxlciAyLjQuMywgU2VhcmNoQnVpbGRlciAxLjguMSwgU2VsZWN0IDIuMS4wCiAqLwoKLyohIERhdGFUYWJsZXMgMi4xLjgKICogwqkgU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UKICovCiEoZnVuY3Rpb24gKG4pIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBhOwogICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgICAgICA/IGRlZmluZShbJ2pxdWVyeSddLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBuKHQsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGEgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQgfHwgd2luZG93KSwgKGUgPSBlIHx8IGEodCkpLCBuKGUsIHQsIHQuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChtb2R1bGUuZXhwb3J0cyA9IG4oYSwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkKICAgICAgICA6ICh3aW5kb3cuRGF0YVRhYmxlID0gbihqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpKTsKfSkoZnVuY3Rpb24gKEgsIFcsIF8pIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGZ1bmN0aW9uIGYodCkgewogICAgICAgIHZhciBlID0gcGFyc2VJbnQodCwgMTApOwogICAgICAgIHJldHVybiAhaXNOYU4oZSkgJiYgaXNGaW5pdGUodCkgPyBlIDogbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIHModCwgZSwgbiwgYSkgewogICAgICAgIHZhciByID0gdHlwZW9mIHQsCiAgICAgICAgICAgIG8gPSAnc3RyaW5nJyA9PSByOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICdudW1iZXInID09IHIgfHwKICAgICAgICAgICAgJ2JpZ2ludCcgPT0gciB8fAogICAgICAgICAgICAhKCFhIHx8ICFUKHQpKSB8fAogICAgICAgICAgICAoZSAmJiBvICYmICh0ID0gRSh0LCBlKSksIG4gJiYgbyAmJiAodCA9IHQucmVwbGFjZShQLCAnJykpLCAhaXNOYU4ocGFyc2VGbG9hdCh0KSkgJiYgaXNGaW5pdGUodCkpCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIGModCwgZSwgbiwgYSkgewogICAgICAgIHZhciByOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICEoIWEgfHwgIVQodCkpIHx8CiAgICAgICAgICAgICgoJ3N0cmluZycgIT0gdHlwZW9mIHQgfHwgIXQubWF0Y2goLzwoaW5wdXR8c2VsZWN0KS9pKSkgJiYgKFQoKHIgPSB0KSkgfHwgJ3N0cmluZycgPT0gdHlwZW9mIHIpICYmICEhcyhMKHQpLCBlLCBuLCBhKSkgfHwKICAgICAgICAgICAgbnVsbAogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBiKHQsIGUsIG4sIGEpIHsKICAgICAgICB2YXIgciA9IFtdLAogICAgICAgICAgICBvID0gMCwKICAgICAgICAgICAgaSA9IGUubGVuZ3RoOwogICAgICAgIGlmICh2b2lkIDAgIT09IGEpIGZvciAoOyBvIDwgaTsgbysrKSB0W2Vbb11dICYmIHRbZVtvXV1bbl0gJiYgci5wdXNoKHRbZVtvXV1bbl1bYV0pOwogICAgICAgIGVsc2UgZm9yICg7IG8gPCBpOyBvKyspIHRbZVtvXV0gJiYgci5wdXNoKHRbZVtvXV1bbl0pOwogICAgICAgIHJldHVybiByOwogICAgfQogICAgZnVuY3Rpb24gaCh0LCBlKSB7CiAgICAgICAgdmFyIG4sCiAgICAgICAgICAgIGEgPSBbXTsKICAgICAgICB2b2lkIDAgPT09IGUgPyAoKGUgPSAwKSwgKG4gPSB0KSkgOiAoKG4gPSBlKSwgKGUgPSB0KSk7CiAgICAgICAgZm9yICh2YXIgciA9IGU7IHIgPCBuOyByKyspIGEucHVzaChyKTsKICAgICAgICByZXR1cm4gYTsKICAgIH0KICAgIGZ1bmN0aW9uIEEodCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgbiA9IDAsIGEgPSB0Lmxlbmd0aDsgbiA8IGE7IG4rKykgdFtuXSAmJiBlLnB1c2godFtuXSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICB2YXIgQywKICAgICAgICBYLAogICAgICAgIGUsCiAgICAgICAgdCwKICAgICAgICBWID0gZnVuY3Rpb24gKHQsIFApIHsKICAgICAgICAgICAgdmFyIEUsIGssIE07CiAgICAgICAgICAgIHJldHVybiBWLmZhY3RvcnkodCwgUCkKICAgICAgICAgICAgICAgID8gVgogICAgICAgICAgICAgICAgOiB0aGlzIGluc3RhbmNlb2YgVgogICAgICAgICAgICAgICAgPyBIKHQpLkRhdGFUYWJsZShQKQogICAgICAgICAgICAgICAgOiAoKGsgPSB2b2lkIDAgPT09IChQID0gdCkpLAogICAgICAgICAgICAgICAgICAoTSA9IChFID0gdGhpcykubGVuZ3RoKSwKICAgICAgICAgICAgICAgICAgayAmJiAoUCA9IHt9KSwKICAgICAgICAgICAgICAgICAgKHRoaXMuYXBpID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBYKHRoaXMpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gMSA8IE0gPyB0ZSh7fSwgUCwgITApIDogUCwKICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFYuZGVmYXVsdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IEgodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3RhYmxlJyAhPSB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpICQobnVsbCwgMCwgJ05vbi10YWJsZSBub2RlIGluaXRpYWxpc2F0aW9uICgnICsgdGhpcy5ub2RlTmFtZSArICcpJywgMik7CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBIKHRoaXMpLnRyaWdnZXIoJ29wdGlvbnMuZHQnLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUShhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSyhhLmNvbHVtbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEIoYSwgYSwgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKGEuY29sdW1uLCBhLmNvbHVtbiwgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKGEsIEguZXh0ZW5kKHQsIHIuZGF0YSgpKSwgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gVi5zZXR0aW5nczsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwLCBSID0gby5sZW5ndGg7IGUgPCBSOyBlKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBvW2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLm5UYWJsZSA9PSB0aGlzIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5uVEhlYWQgJiYgaS5uVEhlYWQucGFyZW50Tm9kZSA9PSB0aGlzKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkublRGb290ICYmIGkublRGb290LnBhcmVudE5vZGUgPT0gdGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9ICh2b2lkIDAgIT09IHQuYlJldHJpZXZlID8gdCA6IGEpLmJSZXRyaWV2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gKHZvaWQgMCAhPT0gdC5iRGVzdHJveSA/IHQgOiBhKS5iRGVzdHJveTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrIHx8IGwpIHJldHVybiBpLm9JbnN0YW5jZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFYuQXBpKGkpLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkICQoaSwgMCwgJ0Nhbm5vdCByZWluaXRpYWxpc2UgRGF0YVRhYmxlJywgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkuc1RhYmxlSWQgPT0gdGhpcy5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zcGxpY2UoZSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gbiAmJiAnJyAhPT0gbikgfHwgKChuID0gJ0RhdGFUYWJsZXNfVGFibGVfJyArIFYuZXh0Ll91bmlxdWUrKyksICh0aGlzLmlkID0gbikpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gSC5leHRlbmQoITAsIHt9LCBWLm1vZGVscy5vU2V0dGluZ3MsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNEZXN0cm95V2lkdGg6IHJbMF0uc3R5bGUud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzSW5zdGFuY2U6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzVGFibGVJZDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGdyb3VwOiBIKCc8Y29sZ3JvdXA+JykucHJlcGVuZFRvKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFzdERhdGE6IGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEoYywgdCwgZSwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGMublRhYmxlID0gdGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYy5vSW5pdCA9IHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKGMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMuYXBpID0gbmV3IFgoYykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMub0luc3RhbmNlID0gMSA9PT0gRS5sZW5ndGggPyBFIDogci5kYXRhVGFibGUoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5hTGVuZ3RoTWVudSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0LmlEaXNwbGF5TGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuaURpc3BsYXlMZW5ndGggPSBBcnJheS5pc0FycmF5KHQuYUxlbmd0aE1lbnVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdC5hTGVuZ3RoTWVudVswXVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEguaXNQbGFpbk9iamVjdCh0LmFMZW5ndGhNZW51WzBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQuYUxlbmd0aE1lbnVbMF0udmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0LmFMZW5ndGhNZW51WzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gdGUoSC5leHRlbmQoITAsIHt9LCBhKSwgdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeihjLm9GZWF0dXJlcywgdCwgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiUGFnaW5hdGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiTGVuZ3RoQ2hhbmdlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYkZpbHRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JTb3J0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYlNvcnRNdWx0aScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JJbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYlByb2Nlc3NpbmcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiQXV0b1dpZHRoJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYlNvcnRDbGFzc2VzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYlNlcnZlclNpZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiRGVmZXJSZW5kZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6KGMsIHQsIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWpheCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZuRm9ybWF0TnVtYmVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc1NlcnZlck1ldGhvZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FhU29ydGluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FhU29ydGluZ0ZpeGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYUxlbmd0aE1lbnUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzUGFnaW5hdGlvblR5cGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpU3RhdGVEdXJhdGlvbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JTb3J0Q2VsbHNUb3AnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpVGFiSW5kZXgnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzRG9tJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm5TdGF0ZUxvYWRDYWxsYmFjaycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZuU3RhdGVTYXZlQ2FsbGJhY2snLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZW5kZXJlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlYXJjaERlbGF5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncm93SWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYXB0aW9uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGF5b3V0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJEZXNjUmV2ZXJzZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGVEZXRlY3QnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnaUNvb2tpZUR1cmF0aW9uJywgJ2lTdGF0ZUR1cmF0aW9uJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydvU2VhcmNoJywgJ29QcmV2aW91c1NlYXJjaCddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnYW9TZWFyY2hDb2xzJywgJ2FvUHJlU2VhcmNoQ29scyddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnaURpc3BsYXlMZW5ndGgnLCAnX2lEaXNwbGF5TGVuZ3RoJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHooYy5vU2Nyb2xsLCB0LCBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydzU2Nyb2xsWCcsICdzWCddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnc1Njcm9sbFhJbm5lcicsICdzWElubmVyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydzU2Nyb2xsWScsICdzWSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnYlNjcm9sbENvbGxhcHNlJywgJ2JDb2xsYXBzZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6KGMub0xhbmd1YWdlLCB0LCAnZm5JbmZvQ2FsbGJhY2snKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkoYywgJ2FvRHJhd0NhbGxiYWNrJywgdC5mbkRyYXdDYWxsYmFjayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZKGMsICdhb1N0YXRlU2F2ZVBhcmFtcycsIHQuZm5TdGF0ZVNhdmVQYXJhbXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWShjLCAnYW9TdGF0ZUxvYWRQYXJhbXMnLCB0LmZuU3RhdGVMb2FkUGFyYW1zKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkoYywgJ2FvU3RhdGVMb2FkZWQnLCB0LmZuU3RhdGVMb2FkZWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWShjLCAnYW9Sb3dDYWxsYmFjaycsIHQuZm5Sb3dDYWxsYmFjayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZKGMsICdhb1Jvd0NyZWF0ZWRDYWxsYmFjaycsIHQuZm5DcmVhdGVkUm93KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkoYywgJ2FvSGVhZGVyQ2FsbGJhY2snLCB0LmZuSGVhZGVyQ2FsbGJhY2spLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWShjLCAnYW9Gb290ZXJDYWxsYmFjaycsIHQuZm5Gb290ZXJDYWxsYmFjayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZKGMsICdhb0luaXRDb21wbGV0ZScsIHQuZm5Jbml0Q29tcGxldGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWShjLCAnYW9QcmVEcmF3Q2FsbGJhY2snLCB0LmZuUHJlRHJhd0NhbGxiYWNrKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjLnJvd0lkRm4gPSBVKHQucm93SWQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChWLl9fYnJvd3NlciB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoZiA9IHt9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoVi5fX2Jyb3dzZXIgPSBmKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocCA9IEgoJzxkaXYvPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtMSAqIFcucGFnZVhPZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEgoJzxkaXYvPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDEsIGxlZnQ6IDEsIHdpZHRoOiAxMDAsIG92ZXJmbG93OiAnc2Nyb2xsJyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoSCgnPGRpdi8+JykuY3NzKHsgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAxMCB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCdib2R5JykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkID0gcC5jaGlsZHJlbigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodSA9IGQuY2hpbGRyZW4oKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYuYmFyV2lkdGggPSBkWzBdLm9mZnNldFdpZHRoIC0gZFswXS5jbGllbnRXaWR0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYuYlNjcm9sbGJhckxlZnQgPSAxICE9PSBNYXRoLnJvdW5kKHUub2Zmc2V0KCkubGVmdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucmVtb3ZlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSC5leHRlbmQobi5vQnJvd3NlciwgVi5fX2Jyb3dzZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4ub1Njcm9sbC5pQmFyV2lkdGggPSBWLl9fYnJvd3Nlci5iYXJXaWR0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLm9DbGFzc2VzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoSC5leHRlbmQoZCwgVi5leHQuY2xhc3NlcywgdC5vQ2xhc3NlcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmFkZENsYXNzKGQudGFibGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5vRmVhdHVyZXMuYlBhZ2luYXRlIHx8ICh0LmlEaXNwbGF5U3RhcnQgPSAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gYy5pSW5pdERpc3BsYXlTdGFydCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoYy5pSW5pdERpc3BsYXlTdGFydCA9IHQuaURpc3BsYXlTdGFydCksIChjLl9pRGlzcGxheVN0YXJ0ID0gdC5pRGlzcGxheVN0YXJ0KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmlEZWZlckxvYWRpbmcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChudWxsICE9PSBmICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjLmRlZmVyTG9hZGluZyA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodSA9IEFycmF5LmlzQXJyYXkoZikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjLl9pUmVjb3Jkc0Rpc3BsYXkgPSB1ID8gZlswXSA6IGYpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjLl9pUmVjb3Jkc1RvdGFsID0gdSA/IGZbMV0gOiBmKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGVhZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gQXQoYywgcFswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuYW9Db2x1bW5zKSBoID0gdC5hb0NvbHVtbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobi5sZW5ndGgpIGZvciAoUiA9IG5bKGUgPSAwKV0ubGVuZ3RoOyBlIDwgUjsgZSsrKSBoLnB1c2gobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gMCwgUiA9IGgubGVuZ3RoOyBlIDwgUjsgZSsrKSB0dChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyA9IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSB0LmFvQ29sdW1uRGVmcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gPSBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0KGMsIHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMID0gUy5hb0NvbHVtbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFQpIGZvciAoZyA9IDAsIHYgPSBULmxlbmd0aDsgZyA8IHY7IGcrKykgVFtnXSAmJiBUW2ddLm5hbWUgJiYgKExbZ10uc05hbWUgPSBUW2ddLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGcgPSB3Lmxlbmd0aCAtIDE7IDAgPD0gZzsgZy0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSSA9IHZvaWQgMCAhPT0gKHggPSB3W2ddKS50YXJnZXQgPyB4LnRhcmdldCA6IHZvaWQgMCAhPT0geC50YXJnZXRzID8geC50YXJnZXRzIDogeC5hVGFyZ2V0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoQXJyYXkuaXNBcnJheShJKSB8fCAoSSA9IFtJXSksIG0gPSAwLCBiID0gSS5sZW5ndGg7IG0gPCBiOyBtKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQSA9IElbbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdudW1iZXInID09IHR5cGVvZiBBICYmIDAgPD0gQSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgTC5sZW5ndGggPD0gQTsgKSB0dChTKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyhBLCB4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdudW1iZXInID09IHR5cGVvZiBBICYmIEEgPCAwKSBDKEwubGVuZ3RoICsgQSwgeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIEEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeSA9IDAsIEQgPSBMLmxlbmd0aDsgeSA8IEQ7IHkrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdfYWxsJyA9PT0gQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQyh5LCB4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLTEgIT09IEEuaW5kZXhPZignOm5hbWUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gTFt5XS5zTmFtZSA9PT0gQS5yZXBsYWNlKCc6bmFtZScsICcnKSAmJiBDKHksIHgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W3ldICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodCA9IEgodFt5XS5jZWxsKSksIEEubWF0Y2goL15bYS16XVtcdy1dKiQvaSkgJiYgKEEgPSAnLicgKyBBKSwgdC5pcyhBKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyh5LCB4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFQpIGZvciAoZyA9IDAsIHYgPSBULmxlbmd0aDsgZyA8IHY7IGcrKykgQyhnLCBUW2ddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHIuY2hpbGRyZW4oJ3Rib2R5JykuZmluZCgndHInKS5lcSgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKEYgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtJyArIGUpID8gZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSChuWzBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJ3RoLCB0ZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gYy5hb0NvbHVtbnNbdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIHx8ICQoYywgMCwgJ0luY29ycmVjdCBjb2x1bW4gY291bnQnLCAxOCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5tRGF0YSA9PT0gdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKG4gPSBGKGUsICdzb3J0JykgfHwgRihlLCAnb3JkZXInKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID0gRihlLCAnZmlsdGVyJykgfHwgRihlLCAnc2VhcmNoJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobnVsbCA9PT0gbiAmJiBudWxsID09PSBlKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChhLm1EYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF86IHQgKyAnLmRpc3BsYXknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnQ6IG51bGwgIT09IG4gPyB0ICsgJy5AZGF0YS0nICsgbiA6IHZvaWQgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBudWxsICE9PSBuID8gdCArICcuQGRhdGEtJyArIG4gOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBudWxsICE9PSBlID8gdCArICcuQGRhdGEtJyArIGUgOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhLl9pc0FycmF5SG9zdCA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0KGMsIHQpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkoYywgJ2FvRHJhd0NhbGxiYWNrJywgUXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5vRmVhdHVyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodC5iU3RhdGVTYXZlICYmIChOLmJTdGF0ZVNhdmUgPSAhMCksIHZvaWQgMCA9PT0gdC5hYVNvcnRpbmcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gYy5hYVNvcnRpbmcsIGUgPSAwLCBSID0gai5sZW5ndGg7IGUgPCBSOyBlKyspIGpbZV1bMV0gPSBjLmFvQ29sdW1uc1tlXS5hc1NvcnRpbmdbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgWnQoYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFkoYywgJ2FvRHJhd0NhbGxiYWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMuYlNvcnRlZCB8fCAnc3NwJyA9PT0gSihjKSB8fCBOLmJEZWZlclJlbmRlcikgJiYgWnQoYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gci5jaGlsZHJlbignY2FwdGlvbicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjLmNhcHRpb24gJiYgKG4gPSAwID09PSBuLmxlbmd0aCA/IEgoJzxjYXB0aW9uLz4nKS5hcHBlbmRUbyhyKSA6IG4pLmh0bWwoYy5jYXB0aW9uKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ubGVuZ3RoICYmICgoblswXS5fY2FwdGlvblNpZGUgPSBuLmNzcygnY2FwdGlvbi1zaWRlJykpLCAoYy5jYXB0aW9uTm9kZSA9IG5bMF0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IHAubGVuZ3RoICYmIChwID0gSCgnPHRoZWFkLz4nKS5hcHBlbmRUbyhyKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYy5uVEhlYWQgPSBwWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEgoJ3RyJywgcCkuYWRkQ2xhc3MoZC50aGVhZC5yb3cpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5jaGlsZHJlbigndGJvZHknKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAoMCA9PT0gbi5sZW5ndGggJiYgKG4gPSBIKCc8dGJvZHkvPicpLmluc2VydEFmdGVyKHApKSwgKGMublRCb2R5ID0gblswXSksIHIuY2hpbGRyZW4oJ3Rmb290JykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwID09PSBuLmxlbmd0aCAmJiAobiA9IEgoJzx0Zm9vdC8+JykuYXBwZW5kVG8ocikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMublRGb290ID0gblswXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKCd0cicsIG4pLmFkZENsYXNzKGQudGZvb3Qucm93KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjLmFpRGlzcGxheSA9IGMuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMuYkluaXRpYWxpc2VkID0gITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5vTGFuZ3VhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgIEguZXh0ZW5kKCEwLCBPLCB0Lm9MYW5ndWFnZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uc1VybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBILmFqYXgoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogTy5zVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKGEub0xhbmd1YWdlLCB0KSwgSC5leHRlbmQoITAsIE8sIHQsIGMub0luaXQub0xhbmd1YWdlKSwgRyhjLCBudWxsLCAnaTE4bicsIFtjXSwgITApLCBNdChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYywgMCwgJ2kxOG4gZmlsZSBsb2FkaW5nIGVycm9yJywgMjEpLCBNdChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChHKGMsIG51bGwsICdpMThuJywgW2NdLCAhMCksIE10KGMpKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIChFID0gbnVsbCksCiAgICAgICAgICAgICAgICAgIHRoaXMpOwogICAgICAgIH0sCiAgICAgICAgZyA9CiAgICAgICAgICAgICgoVi5leHQgPSBDID0KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBidXR0b25zOiB7fSwKICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiB7fSwKICAgICAgICAgICAgICAgICAgICBidWlsZGVyOiAnZHQvZHQtMi4xLjgvZS0yLjMuMi9iLTMuMS4yL2ItaHRtbDUtMy4xLjIvZmgtNC4wLjEva3QtMi4xMi4xL3ItMy4wLjMvcmctMS41LjAvc2MtMi40LjMvc2ItMS44LjEvc2wtMi4xLjAnLAogICAgICAgICAgICAgICAgICAgIGVyck1vZGU6ICdhbGVydCcsCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogW10sCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXM6IHt9LAogICAgICAgICAgICAgICAgICAgIHNlYXJjaDogW10sCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHsgY2VsbDogW10sIGNvbHVtbjogW10sIHJvdzogW10gfSwKICAgICAgICAgICAgICAgICAgICBsZWdhY3k6IHsgYWpheDogbnVsbCB9LAogICAgICAgICAgICAgICAgICAgIHBhZ2VyOiB7fSwKICAgICAgICAgICAgICAgICAgICByZW5kZXJlcjogeyBwYWdlQnV0dG9uOiB7fSwgaGVhZGVyOiB7fSB9LAogICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7fSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiB7IGNsYXNzTmFtZToge30sIGRldGVjdDogW10sIHJlbmRlcjoge30sIHNlYXJjaDoge30sIG9yZGVyOiB7fSB9LAogICAgICAgICAgICAgICAgICAgIF91bmlxdWU6IDAsCiAgICAgICAgICAgICAgICAgICAgZm5WZXJzaW9uQ2hlY2s6IFYuZm5WZXJzaW9uQ2hlY2ssCiAgICAgICAgICAgICAgICAgICAgaUFwaUluZGV4OiAwLAogICAgICAgICAgICAgICAgICAgIHNWZXJzaW9uOiBWLnZlcnNpb24sCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgSC5leHRlbmQoQywgewogICAgICAgICAgICAgICAgYWZuRmlsdGVyaW5nOiBDLnNlYXJjaCwKICAgICAgICAgICAgICAgIGFUeXBlczogQy50eXBlLmRldGVjdCwKICAgICAgICAgICAgICAgIG9mblNlYXJjaDogQy50eXBlLnNlYXJjaCwKICAgICAgICAgICAgICAgIG9Tb3J0OiBDLnR5cGUub3JkZXIsCiAgICAgICAgICAgICAgICBhZm5Tb3J0RGF0YTogQy5vcmRlciwKICAgICAgICAgICAgICAgIGFvRmVhdHVyZXM6IEMuZmVhdHVyZSwKICAgICAgICAgICAgICAgIG9TdGRDbGFzc2VzOiBDLmNsYXNzZXMsCiAgICAgICAgICAgICAgICBvUGFnaW5hdGlvbjogQy5wYWdlciwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIEguZXh0ZW5kKFYuZXh0LmNsYXNzZXMsIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2R0LWNvbnRhaW5lcicsCiAgICAgICAgICAgICAgICBlbXB0eTogeyByb3c6ICdkdC1lbXB0eScgfSwKICAgICAgICAgICAgICAgIGluZm86IHsgY29udGFpbmVyOiAnZHQtaW5mbycgfSwKICAgICAgICAgICAgICAgIGxheW91dDogewogICAgICAgICAgICAgICAgICAgIHJvdzogJ2R0LWxheW91dC1yb3cnLAogICAgICAgICAgICAgICAgICAgIGNlbGw6ICdkdC1sYXlvdXQtY2VsbCcsCiAgICAgICAgICAgICAgICAgICAgdGFibGVSb3c6ICdkdC1sYXlvdXQtdGFibGUnLAogICAgICAgICAgICAgICAgICAgIHRhYmxlQ2VsbDogJycsCiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6ICdkdC1sYXlvdXQtc3RhcnQnLAogICAgICAgICAgICAgICAgICAgIGVuZDogJ2R0LWxheW91dC1lbmQnLAogICAgICAgICAgICAgICAgICAgIGZ1bGw6ICdkdC1sYXlvdXQtZnVsbCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGVuZ3RoOiB7IGNvbnRhaW5lcjogJ2R0LWxlbmd0aCcsIHNlbGVjdDogJ2R0LWlucHV0JyB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBjYW5Bc2M6ICdkdC1vcmRlcmFibGUtYXNjJywKICAgICAgICAgICAgICAgICAgICBjYW5EZXNjOiAnZHQtb3JkZXJhYmxlLWRlc2MnLAogICAgICAgICAgICAgICAgICAgIGlzQXNjOiAnZHQtb3JkZXJpbmctYXNjJywKICAgICAgICAgICAgICAgICAgICBpc0Rlc2M6ICdkdC1vcmRlcmluZy1kZXNjJywKICAgICAgICAgICAgICAgICAgICBub25lOiAnZHQtb3JkZXJhYmxlLW5vbmUnLAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnc29ydGluZ18nLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHByb2Nlc3Npbmc6IHsgY29udGFpbmVyOiAnZHQtcHJvY2Vzc2luZycgfSwKICAgICAgICAgICAgICAgIHNjcm9sbGluZzogewogICAgICAgICAgICAgICAgICAgIGJvZHk6ICdkdC1zY3JvbGwtYm9keScsCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiAnZHQtc2Nyb2xsJywKICAgICAgICAgICAgICAgICAgICBmb290ZXI6IHsgc2VsZjogJ2R0LXNjcm9sbC1mb290JywgaW5uZXI6ICdkdC1zY3JvbGwtZm9vdElubmVyJyB9LAogICAgICAgICAgICAgICAgICAgIGhlYWRlcjogeyBzZWxmOiAnZHQtc2Nyb2xsLWhlYWQnLCBpbm5lcjogJ2R0LXNjcm9sbC1oZWFkSW5uZXInIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiB7IGNvbnRhaW5lcjogJ2R0LXNlYXJjaCcsIGlucHV0OiAnZHQtaW5wdXQnIH0sCiAgICAgICAgICAgICAgICB0YWJsZTogJ2RhdGFUYWJsZScsCiAgICAgICAgICAgICAgICB0Ym9keTogeyBjZWxsOiAnJywgcm93OiAnJyB9LAogICAgICAgICAgICAgICAgdGhlYWQ6IHsgY2VsbDogJycsIHJvdzogJycgfSwKICAgICAgICAgICAgICAgIHRmb290OiB7IGNlbGw6ICcnLCByb3c6ICcnIH0sCiAgICAgICAgICAgICAgICBwYWdpbmc6IHsgYWN0aXZlOiAnY3VycmVudCcsIGJ1dHRvbjogJ2R0LXBhZ2luZy1idXR0b24nLCBjb250YWluZXI6ICdkdC1wYWdpbmcnLCBkaXNhYmxlZDogJ2Rpc2FibGVkJywgbmF2OiAnJyB9LAogICAgICAgICAgICB9KSwKICAgICAgICAgICAge30pLAogICAgICAgIEYgPSAvW1xyXG5cdTIwMjhdL2csCiAgICAgICAgTiA9IC88KFtePl0qPikvZywKICAgICAgICBqID0gTWF0aC5wb3coMiwgMjgpLAogICAgICAgIFIgPSAvXlxkezIsNH1bLi8tXVxkezEsMn1bLi8tXVxkezEsMn0oW1QgXXsxfVxkezEsMn1bOi5dXGR7Mn0oWy46XVxkezJ9KT8pPyQvLAogICAgICAgIE8gPSBuZXcgUmVnRXhwKCcoXFwnICsgWycvJywgJy4nLCAnKicsICcrJywgJz8nLCAnfCcsICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICdcXCcsICckJywgJ14nLCAnLSddLmpvaW4oJ3xcXCcpICsgJyknLCAnZycpLAogICAgICAgIFAgPSAvWydcdTAwQTAsJMKj4oKswqUlXHUyMDA5XHUyMDJGXHUyMEJEXHUyMGE5XHUyMEJBcmZryYPOnl0vZ2ksCiAgICAgICAgVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiAhdCB8fCAhMCA9PT0gdCB8fCAnLScgPT09IHQ7CiAgICAgICAgfSwKICAgICAgICBFID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIGdbZV0gfHwgKGdbZV0gPSBuZXcgUmVnRXhwKFB0KGUpLCAnZycpKSwgJ3N0cmluZycgPT0gdHlwZW9mIHQgJiYgJy4nICE9PSBlID8gdC5yZXBsYWNlKC9cLi9nLCAnJykucmVwbGFjZShnW2VdLCAnLicpIDogdDsKICAgICAgICB9LAogICAgICAgIG0gPSBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICB2YXIgYSA9IFtdLAogICAgICAgICAgICAgICAgciA9IDAsCiAgICAgICAgICAgICAgICBvID0gdC5sZW5ndGg7CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoOyByIDwgbzsgcisrKSB0W3JdICYmIHRbcl1bZV0gJiYgYS5wdXNoKHRbcl1bZV1bbl0pOwogICAgICAgICAgICBlbHNlIGZvciAoOyByIDwgbzsgcisrKSB0W3JdICYmIGEucHVzaCh0W3JdW2VdKTsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSwKICAgICAgICBMID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgaWYgKCF0IHx8ICdzdHJpbmcnICE9IHR5cGVvZiB0KSByZXR1cm4gdDsKICAgICAgICAgICAgaWYgKHQubGVuZ3RoID4gaikgdGhyb3cgbmV3IEVycm9yKCdFeGNlZWRlZCBtYXggc3RyIGxlbicpOwogICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgZm9yICh0ID0gdC5yZXBsYWNlKE4sICcnKTsgKHQgPSAoZSA9IHQpLnJlcGxhY2UoLzxzY3JpcHQvaSwgJycpKSAhPT0gZTsgKTsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwKICAgICAgICB1ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiAodCA9IEFycmF5LmlzQXJyYXkodCkgPyB0LmpvaW4oJywnKSA6IHQpCiAgICAgICAgICAgICAgICA/IHQucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoLyIvZywgJyZxdW90OycpCiAgICAgICAgICAgICAgICA6IHQ7CiAgICAgICAgfSwKICAgICAgICBrID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgIHJldHVybiAnc3RyaW5nJyAhPSB0eXBlb2YgdAogICAgICAgICAgICAgICAgPyB0CiAgICAgICAgICAgICAgICA6IChuID0gdC5ub3JtYWxpemUgPyB0Lm5vcm1hbGl6ZSgnTkZEJykgOiB0KS5sZW5ndGggIT09IHQubGVuZ3RoCiAgICAgICAgICAgICAgICA/ICghMCA9PT0gZSA/IHQgKyAnICcgOiAnJykgKyBuLnJlcGxhY2UoL1tcdTAzMDAtXHUwMzZmXS9nLCAnJykKICAgICAgICAgICAgICAgIDogbjsKICAgICAgICB9LAogICAgICAgIHggPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBpZiAoQXJyYXkuZnJvbSAmJiBTZXQpIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodCkpOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISh0Lmxlbmd0aCA8IDIpKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdC5zbGljZSgpLnNvcnQoKSwgbiA9IGVbMF0sIGEgPSAxLCByID0gZS5sZW5ndGg7IGEgPCByOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlW2FdID09PSBuKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZVthXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgIH0pKHQpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHJldHVybiB0LnNsaWNlKCk7CiAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgIGEsCiAgICAgICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgICAgICBvID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgdDogZm9yIChuID0gMDsgbiA8IG87IG4rKykgewogICAgICAgICAgICAgICAgZm9yIChlID0gdFtuXSwgYSA9IDA7IGEgPCBpOyBhKyspIGlmIChyW2FdID09PSBlKSBjb250aW51ZSB0OwogICAgICAgICAgICAgICAgci5wdXNoKGUpLCBpKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfSwKICAgICAgICBNID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIGZvciAodmFyIG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgTSh0LCBlW25dKTsKICAgICAgICAgICAgZWxzZSB0LnB1c2goZSk7CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH07CiAgICBmdW5jdGlvbiB5KGUsIHQpIHsKICAgICAgICB0ICYmCiAgICAgICAgICAgIHQuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0ICYmIGUuY2xhc3NMaXN0LmFkZCh0KTsKICAgICAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBaKGUpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgICAgYSwKICAgICAgICAgICAgciA9IHt9OwogICAgICAgIEguZWFjaChlLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAobiA9IHQubWF0Y2goL14oW15BLVpdKz8pKFtBLVpdKS8pKSAmJgogICAgICAgICAgICAgICAgLTEgIT09ICdhIGFhIGFpIGFvIGFzIGIgZm4gaSBtIG8gcyAnLmluZGV4T2YoblsxXSArICcgJykgJiYKICAgICAgICAgICAgICAgICgoYSA9IHQucmVwbGFjZShuWzBdLCBuWzJdLnRvTG93ZXJDYXNlKCkpKSwgKHJbYV0gPSB0KSwgJ28nID09PSBuWzFdKSAmJgogICAgICAgICAgICAgICAgWihlW3RdKTsKICAgICAgICB9KSwKICAgICAgICAgICAgKGUuX2h1bmdhcmlhbk1hcCA9IHIpOwogICAgfQogICAgZnVuY3Rpb24gQihlLCBuLCBhKSB7CiAgICAgICAgdmFyIHI7CiAgICAgICAgZS5faHVuZ2FyaWFuTWFwIHx8IFooZSksCiAgICAgICAgICAgIEguZWFjaChuLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSAociA9IGUuX2h1bmdhcmlhbk1hcFt0XSkgfHwKICAgICAgICAgICAgICAgICAgICAoIWEgJiYgdm9pZCAwICE9PSBuW3JdKSB8fAogICAgICAgICAgICAgICAgICAgICgnbycgPT09IHIuY2hhckF0KDApID8gKG5bcl0gfHwgKG5bcl0gPSB7fSksIEguZXh0ZW5kKCEwLCBuW3JdLCBuW3RdKSwgQihlW3JdLCBuW3JdLCBhKSkgOiAobltyXSA9IG5bdF0pKTsKICAgICAgICAgICAgfSk7CiAgICB9CiAgICBWLnV0aWwgPSB7CiAgICAgICAgZGlhY3JpdGljczogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgIT0gdHlwZW9mIHQpIHJldHVybiBrKHQsIGUpOwogICAgICAgICAgICBrID0gdDsKICAgICAgICB9LAogICAgICAgIGRlYm91bmNlOiBmdW5jdGlvbiAobiwgYSkgewogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBlID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHIpLAogICAgICAgICAgICAgICAgICAgIChyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uYXBwbHkodCwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSwgYSB8fCAyNTApKTsKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIHRocm90dGxlOiBmdW5jdGlvbiAoYSwgdCkgewogICAgICAgICAgICB2YXIgciwKICAgICAgICAgICAgICAgIG8sCiAgICAgICAgICAgICAgICBpID0gdm9pZCAwICE9PSB0ID8gdCA6IDIwMDsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBlID0gK25ldyBEYXRlKCksCiAgICAgICAgICAgICAgICAgICAgbiA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgIHIgJiYgZSA8IHIgKyBpCiAgICAgICAgICAgICAgICAgICAgPyAoY2xlYXJUaW1lb3V0KG8pLAogICAgICAgICAgICAgICAgICAgICAgKG8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAociA9IHZvaWQgMCksIGEuYXBwbHkodCwgbik7CiAgICAgICAgICAgICAgICAgICAgICB9LCBpKSkpCiAgICAgICAgICAgICAgICAgICAgOiAoKHIgPSBlKSwgYS5hcHBseSh0LCBuKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBlc2NhcGVSZWdleDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZShPLCAnXFwkMScpOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICB2YXIgZjsKICAgICAgICAgICAgcmV0dXJuIEguaXNQbGFpbk9iamVjdChhKQogICAgICAgICAgICAgICAgPyBWLnV0aWwuc2V0KGEuXykKICAgICAgICAgICAgICAgIDogbnVsbCA9PT0gYQogICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAoKSB7fQogICAgICAgICAgICAgICAgOiAnZnVuY3Rpb24nID09IHR5cGVvZiBhCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICBhKHQsICdzZXQnLCBlLCBuKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiAnc3RyaW5nJyAhPSB0eXBlb2YgYSB8fCAoLTEgPT09IGEuaW5kZXhPZignLicpICYmIC0xID09PSBhLmluZGV4T2YoJ1snKSAmJiAtMSA9PT0gYS5pbmRleE9mKCcoJykpCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0W2FdID0gZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiAoKGYgPSBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgciwgbywgaSwgbCA9IGd0KG4pLCBuID0gbFtsLmxlbmd0aCAtIDFdLCBzID0gMCwgdSA9IGwubGVuZ3RoIC0gMTsgcyA8IHU7IHMrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnX19wcm90b19fJyA9PT0gbFtzXSB8fCAnY29uc3RydWN0b3InID09PSBsW3NdKSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzZXQgcHJvdG90eXBlIHZhbHVlcycpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGEgPSBsW3NdLm1hdGNoKHB0KSksIChyID0gbFtzXS5tYXRjaChwKSksIGEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobFtzXSA9IGxbc10ucmVwbGFjZShwdCwgJycpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0W2xbc11dID0gW10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSBsLnNsaWNlKCkpLnNwbGljZSgwLCBzICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IGEuam9pbignLicpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwLCBkID0gZS5sZW5ndGg7IGMgPCBkOyBjKyspIGYoKG8gPSB7fSksIGVbY10sIGkpLCB0W2xbc11dLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdFtsW3NdXSA9IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiAoKGxbc10gPSBsW3NdLnJlcGxhY2UocCwgJycpKSwgKHQgPSB0W2xbc11dKGUpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChudWxsICE9PSB0W2xbc11dICYmIHZvaWQgMCAhPT0gdFtsW3NdXSkgfHwgKHRbbFtzXV0gPSB7fSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gdFtsW3NdXSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBuLm1hdGNoKHApID8gdFtuLnJlcGxhY2UocCwgJycpXShlKSA6ICh0W24ucmVwbGFjZShwdCwgJycpXSA9IGUpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmKHQsIGUsIGEpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGdldDogZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgdmFyIG8sIGY7CiAgICAgICAgICAgIHJldHVybiBILmlzUGxhaW5PYmplY3QocikKICAgICAgICAgICAgICAgID8gKChvID0ge30pLAogICAgICAgICAgICAgICAgICBILmVhY2gociwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGUgJiYgKG9bdF0gPSBWLnV0aWwuZ2V0KGUpKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG9bZV0gfHwgby5fOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gciA/IHIodCwgZSwgbiwgYSkgOiB0OwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiBudWxsID09PSByCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiAnZnVuY3Rpb24nID09IHR5cGVvZiByCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0LCBlLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcih0LCBlLCBuLCBhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiAnc3RyaW5nJyAhPSB0eXBlb2YgciB8fCAoLTEgPT09IHIuaW5kZXhPZignLicpICYmIC0xID09PSByLmluZGV4T2YoJ1snKSAmJiAtMSA9PT0gci5pbmRleE9mKCcoJykpCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtyXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiAoKGYgPSBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGEsIHIsIG87CiAgICAgICAgICAgICAgICAgICAgICBpZiAoJycgIT09IG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGd0KG4pLCBsID0gMCwgcyA9IGkubGVuZ3RoOyBsIDwgczsgbCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGQgPSBpW2xdLm1hdGNoKHB0KSksIChhID0gaVtsXS5tYXRjaChwKSksIGQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpW2xdID0gaVtsXS5yZXBsYWNlKHB0LCAnJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnICE9PSBpW2xdICYmICh0ID0gdFtpW2xdXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zcGxpY2UoMCwgbCArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0gaS5qb2luKCcuJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9IDAsIGMgPSB0Lmxlbmd0aDsgdSA8IGM7IHUrKykgci5wdXNoKGYodFt1XSwgZSwgbykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBkWzBdLnN1YnN0cmluZygxLCBkWzBdLmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9ICcnID09PSBkID8gciA6IHIuam9pbihkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhKSAoaVtsXSA9IGlbbF0ucmVwbGFjZShwLCAnJykpLCAodCA9IHRbaVtsXV0oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQgfHwgbnVsbCA9PT0gdFtpW2xdXSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8IHZvaWQgMCA9PT0gdFtpW2xdXSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHRbaVtsXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZih0LCBlLCByKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBzdHJpcEh0bWw6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBlID0gdHlwZW9mIHQ7CiAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nICE9IGUpIHJldHVybiAnc3RyaW5nJyA9PSBlID8gTCh0KSA6IHQ7CiAgICAgICAgICAgIEwgPSB0OwogICAgICAgIH0sCiAgICAgICAgZXNjYXBlSHRtbDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSB0eXBlb2YgdDsKICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgIT0gZSkgcmV0dXJuICdzdHJpbmcnID09IGUgfHwgQXJyYXkuaXNBcnJheSh0KSA/IHUodCkgOiB0OwogICAgICAgICAgICB1ID0gdDsKICAgICAgICB9LAogICAgICAgIHVuaXF1ZTogeCwKICAgIH07CiAgICB2YXIgciA9IGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgdm9pZCAwICE9PSB0W2VdICYmICh0W25dID0gdFtlXSk7CiAgICB9OwogICAgZnVuY3Rpb24gUSh0KSB7CiAgICAgICAgcih0LCAnb3JkZXJpbmcnLCAnYlNvcnQnKSwKICAgICAgICAgICAgcih0LCAnb3JkZXJNdWx0aScsICdiU29ydE11bHRpJyksCiAgICAgICAgICAgIHIodCwgJ29yZGVyQ2xhc3NlcycsICdiU29ydENsYXNzZXMnKSwKICAgICAgICAgICAgcih0LCAnb3JkZXJDZWxsc1RvcCcsICdiU29ydENlbGxzVG9wJyksCiAgICAgICAgICAgIHIodCwgJ29yZGVyJywgJ2FhU29ydGluZycpLAogICAgICAgICAgICByKHQsICdvcmRlckZpeGVkJywgJ2FhU29ydGluZ0ZpeGVkJyksCiAgICAgICAgICAgIHIodCwgJ3BhZ2luZycsICdiUGFnaW5hdGUnKSwKICAgICAgICAgICAgcih0LCAncGFnaW5nVHlwZScsICdzUGFnaW5hdGlvblR5cGUnKSwKICAgICAgICAgICAgcih0LCAncGFnZUxlbmd0aCcsICdpRGlzcGxheUxlbmd0aCcpLAogICAgICAgICAgICByKHQsICdzZWFyY2hpbmcnLCAnYkZpbHRlcicpLAogICAgICAgICAgICAnYm9vbGVhbicgPT0gdHlwZW9mIHQuc1Njcm9sbFggJiYgKHQuc1Njcm9sbFggPSB0LnNTY3JvbGxYID8gJzEwMCUnIDogJycpLAogICAgICAgICAgICAnYm9vbGVhbicgPT0gdHlwZW9mIHQuc2Nyb2xsWCAmJiAodC5zY3JvbGxYID0gdC5zY3JvbGxYID8gJzEwMCUnIDogJycpOwogICAgICAgIHZhciBlID0gdC5hb1NlYXJjaENvbHM7CiAgICAgICAgaWYgKGUpIGZvciAodmFyIG4gPSAwLCBhID0gZS5sZW5ndGg7IG4gPCBhOyBuKyspIGVbbl0gJiYgQihWLm1vZGVscy5vU2VhcmNoLCBlW25dKTsKICAgICAgICB0LnNlcnZlclNpZGUgJiYgIXQuc2VhcmNoRGVsYXkgJiYgKHQuc2VhcmNoRGVsYXkgPSA0MDApOwogICAgfQogICAgZnVuY3Rpb24gSyh0KSB7CiAgICAgICAgcih0LCAnb3JkZXJhYmxlJywgJ2JTb3J0YWJsZScpLAogICAgICAgICAgICByKHQsICdvcmRlckRhdGEnLCAnYURhdGFTb3J0JyksCiAgICAgICAgICAgIHIodCwgJ29yZGVyU2VxdWVuY2UnLCAnYXNTb3J0aW5nJyksCiAgICAgICAgICAgIHIodCwgJ29yZGVyRGF0YVR5cGUnLCAnc29ydERhdGFUeXBlJyk7CiAgICAgICAgdmFyIGUgPSB0LmFEYXRhU29ydDsKICAgICAgICAnbnVtYmVyJyAhPSB0eXBlb2YgZSB8fCBBcnJheS5pc0FycmF5KGUpIHx8ICh0LmFEYXRhU29ydCA9IFtlXSk7CiAgICB9CiAgICBmdW5jdGlvbiB0dCh0KSB7CiAgICAgICAgdmFyIGUgPSBWLmRlZmF1bHRzLmNvbHVtbiwKICAgICAgICAgICAgbiA9IHQuYW9Db2x1bW5zLmxlbmd0aCwKICAgICAgICAgICAgZSA9IEguZXh0ZW5kKHt9LCBWLm1vZGVscy5vQ29sdW1uLCBlLCB7CiAgICAgICAgICAgICAgICBhRGF0YVNvcnQ6IGUuYURhdGFTb3J0IHx8IFtuXSwKICAgICAgICAgICAgICAgIG1EYXRhOiBlLm1EYXRhIHx8IG4sCiAgICAgICAgICAgICAgICBpZHg6IG4sCiAgICAgICAgICAgICAgICBzZWFyY2hGaXhlZDoge30sCiAgICAgICAgICAgICAgICBjb2xFbDogSCgnPGNvbD4nKS5hdHRyKCdkYXRhLWR0LWNvbHVtbicsIG4pLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSA9ICh0LmFvQ29sdW1ucy5wdXNoKGUpLCB0LmFvUHJlU2VhcmNoQ29scyk7CiAgICAgICAgZVtuXSA9IEguZXh0ZW5kKHt9LCBWLm1vZGVscy5vU2VhcmNoLCBlW25dKTsKICAgIH0KICAgIGZ1bmN0aW9uIGV0KHQsIGUsIG4pIHsKICAgICAgICBmdW5jdGlvbiBhKHQpIHsKICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiB0ICYmIC0xICE9PSB0LmluZGV4T2YoJ0AnKTsKICAgICAgICB9CiAgICAgICAgdmFyIHIgPSB0LmFvQ29sdW1uc1tlXSwKICAgICAgICAgICAgbyA9CiAgICAgICAgICAgICAgICAobnVsbCAhPSBuICYmCiAgICAgICAgICAgICAgICAgICAgKEsobiksCiAgICAgICAgICAgICAgICAgICAgQihWLmRlZmF1bHRzLmNvbHVtbiwgbiwgITApLAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbi5tRGF0YVByb3AgfHwgbi5tRGF0YSB8fCAobi5tRGF0YSA9IG4ubURhdGFQcm9wKSwKICAgICAgICAgICAgICAgICAgICBuLnNUeXBlICYmIChyLl9zTWFudWFsVHlwZSA9IG4uc1R5cGUpLAogICAgICAgICAgICAgICAgICAgIG4uY2xhc3NOYW1lICYmICFuLnNDbGFzcyAmJiAobi5zQ2xhc3MgPSBuLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgKGUgPSByLnNDbGFzcyksCiAgICAgICAgICAgICAgICAgICAgSC5leHRlbmQociwgbiksCiAgICAgICAgICAgICAgICAgICAgeihyLCBuLCAnc1dpZHRoJywgJ3NXaWR0aE9yaWcnKSwKICAgICAgICAgICAgICAgICAgICBlICE9PSByLnNDbGFzcyAmJiAoci5zQ2xhc3MgPSBlICsgJyAnICsgci5zQ2xhc3MpLAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbi5pRGF0YVNvcnQgJiYgKHIuYURhdGFTb3J0ID0gW24uaURhdGFTb3J0XSksCiAgICAgICAgICAgICAgICAgICAgeihyLCBuLCAnYURhdGFTb3J0JykpLAogICAgICAgICAgICAgICAgci5tRGF0YSksCiAgICAgICAgICAgIGkgPSBVKG8pOwogICAgICAgIHIubVJlbmRlciAmJiBBcnJheS5pc0FycmF5KHIubVJlbmRlcikgJiYgKChuID0gKGUgPSByLm1SZW5kZXIuc2xpY2UoKSkuc2hpZnQoKSksIChyLm1SZW5kZXIgPSBWLnJlbmRlcltuXS5hcHBseShXLCBlKSkpLAogICAgICAgICAgICAoci5fcmVuZGVyID0gci5tUmVuZGVyID8gVShyLm1SZW5kZXIpIDogbnVsbCk7CiAgICAgICAgKHIuX2JBdHRyU3JjID0gSC5pc1BsYWluT2JqZWN0KG8pICYmIChhKG8uc29ydCkgfHwgYShvLnR5cGUpIHx8IGEoby5maWx0ZXIpKSksCiAgICAgICAgICAgIChyLl9zZXR0ZXIgPSBudWxsKSwKICAgICAgICAgICAgKHIuZm5HZXREYXRhID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHZhciBhID0gaSh0LCBlLCB2b2lkIDAsIG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIHIuX3JlbmRlciAmJiBlID8gci5fcmVuZGVyKGEsIGUsIHQsIG4pIDogYTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChyLmZuU2V0RGF0YSA9IGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdihvKSh0LCBlLCBuKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiBvIHx8IHIuX2lzQXJyYXlIb3N0IHx8ICh0Ll9yb3dSZWFkT2JqZWN0ID0gITApLAogICAgICAgICAgICB0Lm9GZWF0dXJlcy5iU29ydCB8fCAoci5iU29ydGFibGUgPSAhMSk7CiAgICB9CiAgICBmdW5jdGlvbiBudCh0KSB7CiAgICAgICAgdmFyIGUgPSB0OwogICAgICAgIGlmIChlLm9GZWF0dXJlcy5iQXV0b1dpZHRoKSB7CiAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgIHIgPSBlLm5UYWJsZSwKICAgICAgICAgICAgICAgIG8gPSBlLmFvQ29sdW1ucywKICAgICAgICAgICAgICAgIGkgPSBlLm9TY3JvbGwsCiAgICAgICAgICAgICAgICBsID0gaS5zWSwKICAgICAgICAgICAgICAgIHMgPSBpLnNYLAogICAgICAgICAgICAgICAgaSA9IGkuc1hJbm5lciwKICAgICAgICAgICAgICAgIHUgPSBpdChlLCAnYlZpc2libGUnKSwKICAgICAgICAgICAgICAgIGMgPSByLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSwKICAgICAgICAgICAgICAgIGQgPSByLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgICBmID0gci5zdHlsZS53aWR0aCwKICAgICAgICAgICAgICAgIGYgPQogICAgICAgICAgICAgICAgICAgIChmIHx8IGMgfHwgKChyLnN0eWxlLndpZHRoID0gJzEwMCUnKSwgKGYgPSAnMTAwJScpKSwKICAgICAgICAgICAgICAgICAgICBmICYmIC0xICE9PSBmLmluZGV4T2YoJyUnKSAmJiAoYyA9IGYpLAogICAgICAgICAgICAgICAgICAgIEcoZSwgbnVsbCwgJ2NvbHVtbi1jYWxjJywgeyB2aXNpYmxlOiB1IH0sICExKSwKICAgICAgICAgICAgICAgICAgICBIKHIuY2xvbmVOb2RlKCkpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKS5yZW1vdmVBdHRyKCdpZCcpKSwKICAgICAgICAgICAgICAgIGggPSAoZi5hcHBlbmQoJzx0Ym9keT4nKSwgSCgnPHRyLz4nKS5hcHBlbmRUbyhmLmZpbmQoJ3Rib2R5JykpKTsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIGYuYXBwZW5kKEgoZS5uVEhlYWQpLmNsb25lKCkpLmFwcGVuZChIKGUublRGb290KS5jbG9uZSgpKSwKICAgICAgICAgICAgICAgICAgICBmLmZpbmQoJ3Rmb290IHRoLCB0Zm9vdCB0ZCcpLmNzcygnd2lkdGgnLCAnJyksCiAgICAgICAgICAgICAgICAgICAgZi5maW5kKCd0aGVhZCB0aCwgdGhlYWQgdGQnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBjdChlLCB0aGlzLCAhMCwgITEpOwogICAgICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5zdHlsZS53aWR0aCA9IHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzICYmIEgodGhpcykuYXBwZW5kKEgoJzxkaXYvPicpLmNzcyh7IHdpZHRoOiB0LCBtYXJnaW46IDAsIHBhZGRpbmc6IDAsIGJvcmRlcjogMCwgaGVpZ2h0OiAxIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHRoaXMuc3R5bGUud2lkdGggPSAnJyk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgICAgICBuIDwgdS5sZW5ndGg7CiAgICAgICAgICAgICAgICBuKysKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAocCA9IHVbbl0pLCAoYSA9IG9bcF0pOwogICAgICAgICAgICAgICAgdmFyIHAgPSAoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmFvQ29sdW1uc1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuLm1heExlblN0cmluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgciA9ICcnLCBvID0gLTEsIGkgPSAwLCBsID0gdC5haURpc3BsYXlNYXN0ZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0LmFpRGlzcGxheU1hc3RlcltpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IER0KHQsIHMpW2VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gcyAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgcyAmJiBzLm5vZGVUeXBlID8gcy5pbm5lckhUTUwgOiBzICsgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSBzLnJlcGxhY2UoL2lkPSIuKj8iL2csICcnKS5yZXBsYWNlKC9uYW1lPSIuKj8iL2csICcnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gTChzKS5yZXBsYWNlKC8mbmJzcDsvZywgJyAnKSkubGVuZ3RoID4gbyAmJiAoKHIgPSBzKSwgKG8gPSBhLmxlbmd0aCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5tYXhMZW5TdHJpbmcgPSByOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm1heExlblN0cmluZzsKICAgICAgICAgICAgICAgICAgICB9KShlLCBwKSwKICAgICAgICAgICAgICAgICAgICBnID0gQy50eXBlLmNsYXNzTmFtZVthLnNUeXBlXSwKICAgICAgICAgICAgICAgICAgICB2ID0gcCArIGEuc0NvbnRlbnRQYWRkaW5nLAogICAgICAgICAgICAgICAgICAgIHAgPSAtMSA9PT0gcC5pbmRleE9mKCc8JykgPyBfLmNyZWF0ZVRleHROb2RlKHYpIDogdjsKICAgICAgICAgICAgICAgIEgoJzx0ZC8+JykuYWRkQ2xhc3MoZykuYWRkQ2xhc3MoYS5zQ2xhc3MpLmFwcGVuZChwKS5hcHBlbmRUbyhoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBIKCdbbmFtZV0nLCBmKS5yZW1vdmVBdHRyKCduYW1lJyk7CiAgICAgICAgICAgIHZhciBtID0gSCgnPGRpdi8+JykKICAgICAgICAgICAgICAgICAgICAuY3NzKHMgfHwgbCA/IHsgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogMCwgbGVmdDogMCwgaGVpZ2h0OiAxLCByaWdodDogMCwgb3ZlcmZsb3c6ICdoaWRkZW4nIH0gOiB7fSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGYpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGQpLAogICAgICAgICAgICAgICAgYiA9CiAgICAgICAgICAgICAgICAgICAgKHMgJiYgaQogICAgICAgICAgICAgICAgICAgICAgICA/IGYud2lkdGgoaSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBzCiAgICAgICAgICAgICAgICAgICAgICAgID8gKGYuY3NzKCd3aWR0aCcsICdhdXRvJyksIGYucmVtb3ZlQXR0cignd2lkdGgnKSwgZi53aWR0aCgpIDwgZC5jbGllbnRXaWR0aCAmJiBjICYmIGYud2lkdGgoZC5jbGllbnRXaWR0aCkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogbAogICAgICAgICAgICAgICAgICAgICAgICA/IGYud2lkdGgoZC5jbGllbnRXaWR0aCkKICAgICAgICAgICAgICAgICAgICAgICAgOiBjICYmIGYud2lkdGgoYyksCiAgICAgICAgICAgICAgICAgICAgMCksCiAgICAgICAgICAgICAgICB5ID0gZi5maW5kKCd0Ym9keSB0cicpLmVxKDApLmNoaWxkcmVuKCk7CiAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCB1Lmxlbmd0aDsgbisrKSB7CiAgICAgICAgICAgICAgICB2YXIgRCA9IHlbbl0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7CiAgICAgICAgICAgICAgICAoYiArPSBEKSwgKG9bdVtuXV0uc1dpZHRoID0gSShEKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKHIuc3R5bGUud2lkdGggPSBJKGIpKSwKICAgICAgICAgICAgICAgIG0ucmVtb3ZlKCksCiAgICAgICAgICAgICAgICBjICYmIChyLnN0eWxlLndpZHRoID0gSShjKSksCiAgICAgICAgICAgICAgICAoIWMgJiYgIXMpIHx8CiAgICAgICAgICAgICAgICAgICAgZS5fcmVzekV2dCB8fAogICAgICAgICAgICAgICAgICAgIChIKFcpLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAncmVzaXplLkRULScgKyBlLnNJbnN0YW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgVi51dGlsLnRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYkRlc3Ryb3lpbmcgfHwgbnQoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgKGUuX3Jlc3pFdnQgPSAhMCkpOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciB4ID0gdCwgUyA9IHguYW9Db2x1bW5zLCB3ID0gMDsgdyA8IFMubGVuZ3RoOyB3KyspIHsKICAgICAgICAgICAgdmFyIFQgPSBjdCh4LCBbd10sICExLCAhMSk7CiAgICAgICAgICAgIFNbd10uY29sRWwuY3NzKCd3aWR0aCcsIFQpOwogICAgICAgIH0KICAgICAgICBpID0gdC5vU2Nyb2xsOwogICAgICAgICgnJyA9PT0gaS5zWSAmJiAnJyA9PT0gaS5zWCkgfHwgcXQodCksIEcodCwgbnVsbCwgJ2NvbHVtbi1zaXppbmcnLCBbdF0pOwogICAgfQogICAgZnVuY3Rpb24gYXQodCwgZSkgewogICAgICAgIHQgPSBpdCh0LCAnYlZpc2libGUnKTsKICAgICAgICByZXR1cm4gJ251bWJlcicgPT0gdHlwZW9mIHRbZV0gPyB0W2VdIDogbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIHJ0KHQsIGUpIHsKICAgICAgICB0ID0gaXQodCwgJ2JWaXNpYmxlJykuaW5kZXhPZihlKTsKICAgICAgICByZXR1cm4gLTEgIT09IHQgPyB0IDogbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIG90KHQpIHsKICAgICAgICB2YXIgZSA9IHQuYW9IZWFkZXIsCiAgICAgICAgICAgIG4gPSB0LmFvQ29sdW1ucywKICAgICAgICAgICAgYSA9IDA7CiAgICAgICAgaWYgKGUubGVuZ3RoKSBmb3IgKHZhciByID0gMCwgbyA9IGVbMF0ubGVuZ3RoOyByIDwgbzsgcisrKSBuW3JdLmJWaXNpYmxlICYmICdub25lJyAhPT0gSChlWzBdW3JdLmNlbGwpLmNzcygnZGlzcGxheScpICYmIGErKzsKICAgICAgICByZXR1cm4gYTsKICAgIH0KICAgIGZ1bmN0aW9uIGl0KHQsIG4pIHsKICAgICAgICB2YXIgYSA9IFtdOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHQuYW9Db2x1bW5zLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdFtuXSAmJiBhLnB1c2goZSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBhCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIGx0KHQsIGUpIHsKICAgICAgICByZXR1cm4gITAgPT09IGUgPyB0Ll9uYW1lIDogZTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0KHQpIHsKICAgICAgICBmb3IgKHZhciBlLCBuLCBhLCByLCBvLCBpLCBsID0gdC5hb0NvbHVtbnMsIHMgPSB0LmFvRGF0YSwgdSA9IFYuZXh0LnR5cGUuZGV0ZWN0LCBjID0gMCwgZCA9IGwubGVuZ3RoOyBjIDwgZDsgYysrKSB7CiAgICAgICAgICAgIGlmICgoKGkgPSBbXSksICEobyA9IGxbY10pLnNUeXBlICYmIG8uX3NNYW51YWxUeXBlKSkgby5zVHlwZSA9IG8uX3NNYW51YWxUeXBlOwogICAgICAgICAgICBlbHNlIGlmICghby5zVHlwZSkgewogICAgICAgICAgICAgICAgaWYgKCF0LnR5cGVEZXRlY3QpIHJldHVybjsKICAgICAgICAgICAgICAgIGZvciAoZSA9IDAsIG4gPSB1Lmxlbmd0aDsgZSA8IG47IGUrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBmID0gdVtlXSwKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGYub25lT2YsCiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBmLmFsbE9mIHx8IGYsCiAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBmLmluaXQsCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKGcgJiYgKG0gPSBsdChmLCBnKHQsIG8sIGMpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgby5zVHlwZSA9IG07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSAwLCByID0gcy5sZW5ndGg7IGEgPCByOyBhKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzW2FdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgMCA9PT0gaVthXSAmJiAoaVthXSA9IHEodCwgYSwgYywgJ3R5cGUnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCAmJiAhdiAmJiAodiA9IGx0KGYsIGgoaVthXSwgdCkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKG0gPSBsdChmLCBwKGlbYV0sIHQpKSkgJiYgZSAhPT0gdS5sZW5ndGggLSAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdodG1sJyA9PT0gbSAmJiAhVChpW2FdKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoKGggJiYgdiAmJiBtKSB8fCAoIWggJiYgbSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgby5zVHlwZSA9IG07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG8uc1R5cGUgfHwgKG8uc1R5cGUgPSAnc3RyaW5nJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGIgPSBDLnR5cGUuY2xhc3NOYW1lW28uc1R5cGVdLAogICAgICAgICAgICAgICAgYiA9IChiICYmICh1dCh0LmFvSGVhZGVyLCBjLCBiKSwgdXQodC5hb0Zvb3RlciwgYywgYikpLCBDLnR5cGUucmVuZGVyW28uc1R5cGVdKTsKICAgICAgICAgICAgaWYgKGIgJiYgIW8uX3JlbmRlcikgewogICAgICAgICAgICAgICAgKG8uX3JlbmRlciA9IFYudXRpbC5nZXQoYikpLCAoeSA9IHcgPSBTID0geCA9IEQgPSB2b2lkIDApOwogICAgICAgICAgICAgICAgZm9yICh2YXIgeSwgRCA9IHQsIHggPSBjLCBTID0gRC5hb0RhdGEsIHcgPSAwOyB3IDwgUy5sZW5ndGg7IHcrKykKICAgICAgICAgICAgICAgICAgICBTW3ddLm5UciAmJiAoKHkgPSBxKEQsIHcsIHgsICdkaXNwbGF5JykpLCAoU1t3XS5kaXNwbGF5RGF0YVt4XSA9IHkpLCBodChTW3ddLmFuQ2VsbHNbeF0sIHkpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHV0KHQsIGUsIG4pIHsKICAgICAgICB0LmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdFtlXSAmJiB0W2VdLnVuaXF1ZSAmJiB5KHRbZV0uY2VsbCwgbik7CiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBjdCh0LCBlLCBuLCBhKSB7CiAgICAgICAgQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IGR0KGUpKTsKICAgICAgICBmb3IgKHZhciByLCBvID0gMCwgaSA9IHQuYW9Db2x1bW5zLCBsID0gMCwgcyA9IGUubGVuZ3RoOyBsIDwgczsgbCsrKSB7CiAgICAgICAgICAgIHZhciB1ID0gaVtlW2xdXSwKICAgICAgICAgICAgICAgIGMgPSBuID8gdS5zV2lkdGhPcmlnIDogdS5zV2lkdGg7CiAgICAgICAgICAgIGlmIChhIHx8ICExICE9PSB1LmJWaXNpYmxlKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiBjCiAgICAgICAgICAgICAgICAgICAgPyAoKHIgPSAncHgnKSwgKG8gKz0gYykpCiAgICAgICAgICAgICAgICAgICAgOiAodSA9IGMubWF0Y2goLyhbXGRcLl0rKShbXlxkXSopLykpICYmICgobyArPSArdVsxXSksIChyID0gMyA9PT0gdS5sZW5ndGggPyB1WzJdIDogJ3B4JykpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBvICsgcjsKICAgIH0KICAgIGZ1bmN0aW9uIGR0KHQpIHsKICAgICAgICB0ID0gSCh0KS5jbG9zZXN0KCdbZGF0YS1kdC1jb2x1bW5dJykuYXR0cignZGF0YS1kdC1jb2x1bW4nKTsKICAgICAgICByZXR1cm4gdAogICAgICAgICAgICA/IHQuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICt0OwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDogW107CiAgICB9CiAgICBmdW5jdGlvbiBEKHQsIGUsIG4sIGEpIHsKICAgICAgICBmb3IgKAogICAgICAgICAgICB2YXIgciA9IHQuYW9EYXRhLmxlbmd0aCwKICAgICAgICAgICAgICAgIG8gPSBILmV4dGVuZCghMCwge30sIFYubW9kZWxzLm9Sb3csIHsgc3JjOiBuID8gJ2RvbScgOiAnZGF0YScsIGlkeDogciB9KSwKICAgICAgICAgICAgICAgIGkgPSAoKG8uX2FEYXRhID0gZSksIHQuYW9EYXRhLnB1c2gobyksIHQuYW9Db2x1bW5zKSwKICAgICAgICAgICAgICAgIGwgPSAwLAogICAgICAgICAgICAgICAgcyA9IGkubGVuZ3RoOwogICAgICAgICAgICBsIDwgczsKICAgICAgICAgICAgbCsrCiAgICAgICAgKQogICAgICAgICAgICBpW2xdLnNUeXBlID0gbnVsbDsKICAgICAgICB0LmFpRGlzcGxheU1hc3Rlci5wdXNoKHIpOwogICAgICAgIGUgPSB0LnJvd0lkRm4oZSk7CiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSAmJiAodC5hSWRzW2VdID0gbyksICghbiAmJiB0Lm9GZWF0dXJlcy5iRGVmZXJSZW5kZXIpIHx8IHh0KHQsIHIsIG4sIGEpLCByOwogICAgfQogICAgZnVuY3Rpb24gZnQobiwgdCkgewogICAgICAgIHZhciBhOwogICAgICAgIHJldHVybiAodCA9IHQgaW5zdGFuY2VvZiBIID8gdCA6IEgodCkpLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICByZXR1cm4gKGEgPSB5dChuLCBlKSksIEQobiwgYS5kYXRhLCBlLCBhLmNlbGxzKTsKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIHEodCwgZSwgbiwgYSkgewogICAgICAgICdzZWFyY2gnID09PSBhID8gKGEgPSAnZmlsdGVyJykgOiAnb3JkZXInID09PSBhICYmIChhID0gJ3NvcnQnKTsKICAgICAgICB2YXIgciA9IHQuYW9EYXRhW2VdOwogICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgIHZhciBvID0gdC5pRHJhdywKICAgICAgICAgICAgICAgIGkgPSB0LmFvQ29sdW1uc1tuXSwKICAgICAgICAgICAgICAgIHIgPSByLl9hRGF0YSwKICAgICAgICAgICAgICAgIGwgPSBpLnNEZWZhdWx0Q29udGVudCwKICAgICAgICAgICAgICAgIHMgPSBpLmZuR2V0RGF0YShyLCBhLCB7IHNldHRpbmdzOiB0LCByb3c6IGUsIGNvbDogbiB9KTsKICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gKHMgPSAnZGlzcGxheScgIT09IGEgJiYgcyAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgcyAmJiBzLm5vZGVOYW1lID8gcy5pbm5lckhUTUwgOiBzKSkKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgdC5pRHJhd0Vycm9yICE9IG8gJiYKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAoJCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RlZCB1bmtub3duIHBhcmFtZXRlciAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgaS5tRGF0YSA/ICd7ZnVuY3Rpb259JyA6ICInIiArIGkubURhdGEgKyAiJyIpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGZvciByb3cgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgY29sdW1uICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA0LAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAodC5pRHJhd0Vycm9yID0gbykpLAogICAgICAgICAgICAgICAgICAgIGwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICgocyAhPT0gciAmJiBudWxsICE9PSBzKSB8fCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gYSkgewogICAgICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHMpIHJldHVybiBzLmNhbGwocik7CiAgICAgICAgICAgIH0gZWxzZSBzID0gbDsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHMgJiYgJ2Rpc3BsYXknID09PSBhID8gJycgOiAocyA9ICdmaWx0ZXInID09PSBhICYmIChlID0gVi5leHQudHlwZS5zZWFyY2gpW2kuc1R5cGVdID8gZVtpLnNUeXBlXShzKSA6IHMpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGh0KHQsIGUpIHsKICAgICAgICBlICYmICdvYmplY3QnID09IHR5cGVvZiBlICYmIGUubm9kZU5hbWUgPyBIKHQpLmVtcHR5KCkuYXBwZW5kKGUpIDogKHQuaW5uZXJIVE1MID0gZSk7CiAgICB9CiAgICB2YXIgcHQgPSAvXFsuKj9cXSQvLAogICAgICAgIHAgPSAvXChcKSQvOwogICAgZnVuY3Rpb24gZ3QodCkgewogICAgICAgIHJldHVybiAodC5tYXRjaCgvKFxcLnxbXi5dKSsvZykgfHwgWycnXSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UoL1xcXC4vZywgJy4nKTsKICAgICAgICB9KTsKICAgIH0KICAgIHZhciBVID0gVi51dGlsLmdldCwKICAgICAgICB2ID0gVi51dGlsLnNldDsKICAgIGZ1bmN0aW9uIHZ0KHQpIHsKICAgICAgICByZXR1cm4gbSh0LmFvRGF0YSwgJ19hRGF0YScpOwogICAgfQogICAgZnVuY3Rpb24gbXQodCkgewogICAgICAgICh0LmFvRGF0YS5sZW5ndGggPSAwKSwgKHQuYWlEaXNwbGF5TWFzdGVyLmxlbmd0aCA9IDApLCAodC5haURpc3BsYXkubGVuZ3RoID0gMCksICh0LmFJZHMgPSB7fSk7CiAgICB9CiAgICBmdW5jdGlvbiBidCh0LCBlLCBuLCBhKSB7CiAgICAgICAgdmFyIHIsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIGkgPSB0LmFvRGF0YVtlXTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICgoaS5fYVNvcnREYXRhID0gbnVsbCksCiAgICAgICAgICAgIChpLl9hRmlsdGVyRGF0YSA9IG51bGwpLAogICAgICAgICAgICAoaS5kaXNwbGF5RGF0YSA9IG51bGwpLAogICAgICAgICAgICAnZG9tJyAhPT0gbiAmJiAoKG4gJiYgJ2F1dG8nICE9PSBuKSB8fCAnZG9tJyAhPT0gaS5zcmMpKQogICAgICAgICkgewogICAgICAgICAgICB2YXIgbCA9IGkuYW5DZWxscywKICAgICAgICAgICAgICAgIHMgPSBEdCh0LCBlKTsKICAgICAgICAgICAgaWYgKGwpCiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBhKSBodChsW2FdLCBzW2FdKTsKICAgICAgICAgICAgICAgIGVsc2UgZm9yIChyID0gMCwgbyA9IGwubGVuZ3RoOyByIDwgbzsgcisrKSBodChsW3JdLCBzW3JdKTsKICAgICAgICB9IGVsc2UgaS5fYURhdGEgPSB5dCh0LCBpLCBhLCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBpLl9hRGF0YSkuZGF0YTsKICAgICAgICB2YXIgdSA9IHQuYW9Db2x1bW5zOwogICAgICAgIGlmICh2b2lkIDAgIT09IGEpICh1W2FdLnNUeXBlID0gbnVsbCksICh1W2FdLm1heExlblN0cmluZyA9IG51bGwpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBmb3IgKHIgPSAwLCBvID0gdS5sZW5ndGg7IHIgPCBvOyByKyspICh1W3JdLnNUeXBlID0gbnVsbCksICh1W3JdLm1heExlblN0cmluZyA9IG51bGwpOwogICAgICAgICAgICBTdCh0LCBpKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB5dCh0LCBlLCBuLCBhKSB7CiAgICAgICAgZnVuY3Rpb24gcih0LCBlKSB7CiAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiAtMSAhPT0gKG4gPSB0LmluZGV4T2YoJ0AnKSkgJiYgKChuID0gdC5zdWJzdHJpbmcobiArIDEpKSwgdih0KShhLCBlLmdldEF0dHJpYnV0ZShuKSkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvKHQpIHsKICAgICAgICAgICAgKHZvaWQgMCAhPT0gbiAmJiBuICE9PSBkKSB8fAogICAgICAgICAgICAgICAgKChsID0gZltkXSksCiAgICAgICAgICAgICAgICAocyA9IHQuaW5uZXJIVE1MLnRyaW0oKSksCiAgICAgICAgICAgICAgICBsICYmIGwuX2JBdHRyU3JjCiAgICAgICAgICAgICAgICAgICAgPyAodihsLm1EYXRhLl8pKGEsIHMpLCByKGwubURhdGEuc29ydCwgdCksIHIobC5tRGF0YS50eXBlLCB0KSwgcihsLm1EYXRhLmZpbHRlciwgdCkpCiAgICAgICAgICAgICAgICAgICAgOiBoCiAgICAgICAgICAgICAgICAgICAgPyAobC5fc2V0dGVyIHx8IChsLl9zZXR0ZXIgPSB2KGwubURhdGEpKSwgbC5fc2V0dGVyKGEsIHMpKQogICAgICAgICAgICAgICAgICAgIDogKGFbZF0gPSBzKSksCiAgICAgICAgICAgICAgICBkKys7CiAgICAgICAgfQogICAgICAgIHZhciBpLAogICAgICAgICAgICBsLAogICAgICAgICAgICBzLAogICAgICAgICAgICB1ID0gW10sCiAgICAgICAgICAgIGMgPSBlLmZpcnN0Q2hpbGQsCiAgICAgICAgICAgIGQgPSAwLAogICAgICAgICAgICBmID0gdC5hb0NvbHVtbnMsCiAgICAgICAgICAgIGggPSB0Ll9yb3dSZWFkT2JqZWN0OwogICAgICAgIGEgPSB2b2lkIDAgIT09IGEgPyBhIDogaCA/IHt9IDogW107CiAgICAgICAgaWYgKGMpIGZvciAoOyBjOyApICgnVEQnICE9IChpID0gYy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKSAmJiAnVEgnICE9IGkpIHx8IChvKGMpLCB1LnB1c2goYykpLCAoYyA9IGMubmV4dFNpYmxpbmcpOwogICAgICAgIGVsc2UgZm9yICh2YXIgcCA9IDAsIGcgPSAodSA9IGUuYW5DZWxscykubGVuZ3RoOyBwIDwgZzsgcCsrKSBvKHVbcF0pOwogICAgICAgIHZhciBlID0gZS5maXJzdENoaWxkID8gZSA6IGUublRyOwogICAgICAgIHJldHVybiBlICYmIChlID0gZS5nZXRBdHRyaWJ1dGUoJ2lkJykpICYmIHYodC5yb3dJZCkoYSwgZSksIHsgZGF0YTogYSwgY2VsbHM6IHUgfTsKICAgIH0KICAgIGZ1bmN0aW9uIER0KHQsIGUpIHsKICAgICAgICB2YXIgbiA9IHQuYW9EYXRhW2VdLAogICAgICAgICAgICBhID0gdC5hb0NvbHVtbnM7CiAgICAgICAgaWYgKCFuLmRpc3BsYXlEYXRhKSB7CiAgICAgICAgICAgIG4uZGlzcGxheURhdGEgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIG8gPSBhLmxlbmd0aDsgciA8IG87IHIrKykgbi5kaXNwbGF5RGF0YS5wdXNoKHEodCwgZSwgciwgJ2Rpc3BsYXknKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuLmRpc3BsYXlEYXRhOwogICAgfQogICAgZnVuY3Rpb24geHQodCwgZSwgbiwgYSkgewogICAgICAgIHZhciByLAogICAgICAgICAgICBvLAogICAgICAgICAgICBpLAogICAgICAgICAgICBsLAogICAgICAgICAgICBzLAogICAgICAgICAgICB1LAogICAgICAgICAgICBjID0gdC5hb0RhdGFbZV0sCiAgICAgICAgICAgIGQgPSBjLl9hRGF0YSwKICAgICAgICAgICAgZiA9IFtdLAogICAgICAgICAgICBoID0gdC5vQ2xhc3Nlcy50Ym9keS5yb3c7CiAgICAgICAgaWYgKG51bGwgPT09IGMublRyKSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICByID0gbiB8fCBfLmNyZWF0ZUVsZW1lbnQoJ3RyJyksCiAgICAgICAgICAgICAgICAgICAgYy5uVHIgPSByLAogICAgICAgICAgICAgICAgICAgIGMuYW5DZWxscyA9IGYsCiAgICAgICAgICAgICAgICAgICAgeShyLCBoKSwKICAgICAgICAgICAgICAgICAgICByLl9EVF9Sb3dJbmRleCA9IGUsCiAgICAgICAgICAgICAgICAgICAgU3QodCwgYyksCiAgICAgICAgICAgICAgICAgICAgbCA9IDAsCiAgICAgICAgICAgICAgICAgICAgcyA9IHQuYW9Db2x1bW5zLmxlbmd0aDsKICAgICAgICAgICAgICAgIGwgPCBzOwogICAgICAgICAgICAgICAgbCsrCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgKGkgPSB0LmFvQ29sdW1uc1tsXSksCiAgICAgICAgICAgICAgICAgICAgKG8gPSAodSA9ICFuIHx8ICFhW2xdKSA/IF8uY3JlYXRlRWxlbWVudChpLnNDZWxsVHlwZSkgOiBhW2xdKSB8fCAkKHQsIDAsICdJbmNvcnJlY3QgY29sdW1uIGNvdW50JywgMTgpLAogICAgICAgICAgICAgICAgICAgIChvLl9EVF9DZWxsSW5kZXggPSB7IHJvdzogZSwgY29sdW1uOiBsIH0pLAogICAgICAgICAgICAgICAgICAgIGYucHVzaChvKTsKICAgICAgICAgICAgICAgIHZhciBwID0gRHQodCwgZSk7CiAgICAgICAgICAgICAgICAoIXUgJiYgKCghaS5tUmVuZGVyICYmIGkubURhdGEgPT09IGwpIHx8IChILmlzUGxhaW5PYmplY3QoaS5tRGF0YSkgJiYgaS5tRGF0YS5fID09PSBsICsgJy5kaXNwbGF5JykpKSB8fCBodChvLCBwW2xdKSwKICAgICAgICAgICAgICAgICAgICB5KG8sIGkuc0NsYXNzKSwKICAgICAgICAgICAgICAgICAgICBpLmJWaXNpYmxlICYmIHUgPyByLmFwcGVuZENoaWxkKG8pIDogaS5iVmlzaWJsZSB8fCB1IHx8IG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvKSwKICAgICAgICAgICAgICAgICAgICBpLmZuQ3JlYXRlZENlbGwgJiYgaS5mbkNyZWF0ZWRDZWxsLmNhbGwodC5vSW5zdGFuY2UsIG8sIHEodCwgZSwgbCksIGQsIGUsIGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEcodCwgJ2FvUm93Q3JlYXRlZENhbGxiYWNrJywgJ3Jvdy1jcmVhdGVkJywgW3IsIGQsIGUsIGZdKTsKICAgICAgICB9IGVsc2UgeShjLm5UciwgaCk7CiAgICB9CiAgICBmdW5jdGlvbiBTdCh0LCBlKSB7CiAgICAgICAgdmFyIG4gPSBlLm5UciwKICAgICAgICAgICAgYSA9IGUuX2FEYXRhOwogICAgICAgIG4gJiYKICAgICAgICAgICAgKCh0ID0gdC5yb3dJZEZuKGEpKSAmJiAobi5pZCA9IHQpLAogICAgICAgICAgICBhLkRUX1Jvd0NsYXNzICYmCiAgICAgICAgICAgICAgICAoKHQgPSBhLkRUX1Jvd0NsYXNzLnNwbGl0KCcgJykpLAogICAgICAgICAgICAgICAgKGUuX19yb3djID0gZS5fX3Jvd2MgPyB4KGUuX19yb3djLmNvbmNhdCh0KSkgOiB0KSwKICAgICAgICAgICAgICAgIEgobikucmVtb3ZlQ2xhc3MoZS5fX3Jvd2Muam9pbignICcpKS5hZGRDbGFzcyhhLkRUX1Jvd0NsYXNzKSksCiAgICAgICAgICAgIGEuRFRfUm93QXR0ciAmJiBIKG4pLmF0dHIoYS5EVF9Sb3dBdHRyKSwKICAgICAgICAgICAgYS5EVF9Sb3dEYXRhKSAmJgogICAgICAgICAgICBIKG4pLmRhdGEoYS5EVF9Sb3dEYXRhKTsKICAgIH0KICAgIGZ1bmN0aW9uIHd0KHQsIGUpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgICAgYSA9IHQub0NsYXNzZXMsCiAgICAgICAgICAgIHIgPSB0LmFvQ29sdW1ucywKICAgICAgICAgICAgbyA9ICdoZWFkZXInID09PSBlID8gdC5uVEhlYWQgOiB0Lm5URm9vdCwKICAgICAgICAgICAgaSA9ICdoZWFkZXInID09PSBlID8gJ3NUaXRsZScgOiBlOwogICAgICAgIGlmIChvKSB7CiAgICAgICAgICAgIGlmICgoJ2hlYWRlcicgPT09IGUgfHwgbSh0LmFvQ29sdW1ucywgaSkuam9pbignJykpICYmIDEgPT09IChuID0gKG4gPSBIKCd0cicsIG8pKS5sZW5ndGggPyBuIDogSCgnPHRyLz4nKS5hcHBlbmRUbyhvKSkubGVuZ3RoKQogICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IEgoJ3RkLCB0aCcsIG4pLmxlbmd0aCwgcyA9IHIubGVuZ3RoOyBsIDwgczsgbCsrKQogICAgICAgICAgICAgICAgICAgIEgoJzx0aC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwocltsXVtpXSB8fCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKG4pOwogICAgICAgICAgICB2YXIgdSA9IEF0KHQsIG8sICEwKTsKICAgICAgICAgICAgJ2hlYWRlcicgPT09IGUgPyAodC5hb0hlYWRlciA9IHUpIDogKHQuYW9Gb290ZXIgPSB1KSwKICAgICAgICAgICAgICAgIEgobykKICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJ3RyJykKICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJ3RoLCB0ZCcpCiAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBhZSh0LCBlKSh0LCBIKHRoaXMpLCBhKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBUdCh0LCBlLCBuKSB7CiAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIGksCiAgICAgICAgICAgIGwsCiAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgdSA9IFtdLAogICAgICAgICAgICBjID0gdC5hb0NvbHVtbnMsCiAgICAgICAgICAgIHQgPSBjLmxlbmd0aDsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgbiA9CiAgICAgICAgICAgICAgICAgICAgbiB8fAogICAgICAgICAgICAgICAgICAgIGgodCkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjW3RdLmJWaXNpYmxlOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGEgPSAwOwogICAgICAgICAgICAgICAgYSA8IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgYSsrCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIChzW2FdID0gZVthXS5zbGljZSgpLmZpbHRlcihmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmluY2x1ZGVzKGUpOwogICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgIHUucHVzaChbXSk7CiAgICAgICAgICAgIGZvciAoYSA9IDA7IGEgPCBzLmxlbmd0aDsgYSsrKQogICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IHNbYV0ubGVuZ3RoOyByKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKCgobCA9IGkgPSAxKSwgdm9pZCAwID09PSB1W2FdW3JdKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSBzW2FdW3JdLmNlbGw7IHZvaWQgMCAhPT0gc1thICsgaV0gJiYgc1thXVtyXS5jZWxsID09IHNbYSArIGldW3JdLmNlbGw7ICkgKHVbYSArIGldW3JdID0gbnVsbCksIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IHZvaWQgMCAhPT0gc1thXVtyICsgbF0gJiYgc1thXVtyXS5jZWxsID09IHNbYV1bciArIGxdLmNlbGw7ICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBpOyBkKyspIHVbYSArIGRdW3IgKyBsXSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBIKCdzcGFuLmR0LWNvbHVtbi10aXRsZScsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICB1W2FdW3JdID0geyBjZWxsOiBvLCBjb2xzcGFuOiBsLCByb3dzcGFuOiBpLCB0aXRsZTogKGYubGVuZ3RoID8gZiA6IEgobykpLmh0bWwoKSB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gX3QodCwgZSkgewogICAgICAgIGZvciAodmFyIG4sIGEsIHIgPSBUdCh0LCBlKSwgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSB7CiAgICAgICAgICAgIGlmICgobiA9IGVbb10ucm93KSkgZm9yICg7IChhID0gbi5maXJzdENoaWxkKTsgKSBuLnJlbW92ZUNoaWxkKGEpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJbb10ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBsID0gcltvXVtpXTsKICAgICAgICAgICAgICAgIGwgJiYgSChsLmNlbGwpLmFwcGVuZFRvKG4pLmF0dHIoJ3Jvd3NwYW4nLCBsLnJvd3NwYW4pLmF0dHIoJ2NvbHNwYW4nLCBsLmNvbHNwYW4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gUyh0LCBlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoKHIgPSAnc3NwJyA9PSBKKChzID0gdCkpKSwKICAgICAgICAgICAgdm9pZCAwICE9PSAoaSA9IHMuaUluaXREaXNwbGF5U3RhcnQpICYmCiAgICAgICAgICAgICAgICAtMSAhPT0gaSAmJgogICAgICAgICAgICAgICAgKChzLl9pRGlzcGxheVN0YXJ0ID0gIXIgJiYgaSA+PSBzLmZuUmVjb3Jkc0Rpc3BsYXkoKSA/IDAgOiBpKSwgKHMuaUluaXREaXNwbGF5U3RhcnQgPSAtMSkpLAogICAgICAgICAgICAtMSAhPT0gRyh0LCAnYW9QcmVEcmF3Q2FsbGJhY2snLCAncHJlRHJhdycsIFt0XSkuaW5kZXhPZighMSkpCiAgICAgICAgKQogICAgICAgICAgICB3KHQsICExKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdmFyIGwsCiAgICAgICAgICAgICAgICBuID0gW10sCiAgICAgICAgICAgICAgICBhID0gMCwKICAgICAgICAgICAgICAgIHIgPSAnc3NwJyA9PSBKKHQpLAogICAgICAgICAgICAgICAgbyA9IHQuYWlEaXNwbGF5LAogICAgICAgICAgICAgICAgaSA9IHQuX2lEaXNwbGF5U3RhcnQsCiAgICAgICAgICAgICAgICBzID0gdC5mbkRpc3BsYXlFbmQoKSwKICAgICAgICAgICAgICAgIHUgPSB0LmFvQ29sdW1ucywKICAgICAgICAgICAgICAgIGMgPSBIKHQublRCb2R5KTsKICAgICAgICAgICAgaWYgKCgodC5iRHJhd2luZyA9ICEwKSwgdC5kZWZlckxvYWRpbmcpKSAodC5kZWZlckxvYWRpbmcgPSAhMSksIHQuaURyYXcrKywgdyh0LCAhMSk7CiAgICAgICAgICAgIGVsc2UgaWYgKHIpIHsKICAgICAgICAgICAgICAgIGlmICghdC5iRGVzdHJveWluZyAmJiAhZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAwID09PSB0LmlEcmF3ICYmIGMuZW1wdHkoKS5hcHBlbmQoQ3QodCkpLAogICAgICAgICAgICAgICAgICAgICAgICAobCA9IHQpLmlEcmF3KyssCiAgICAgICAgICAgICAgICAgICAgICAgIHcobCwgITApLAogICAgICAgICAgICAgICAgICAgICAgICB2b2lkIEZ0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgYVt0XVtlXSA/ICdmdW5jdGlvbicgOiBhW3RdW2VdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGUuYW9Db2x1bW5zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZS5vRmVhdHVyZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLm9QcmV2aW91c1NlYXJjaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuYW9QcmVTZWFyY2hDb2xzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYXc6IGUuaURyYXcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IGEubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG4odCwgJ21EYXRhJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZS5zTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hhYmxlOiBlLmJTZWFyY2hhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYWJsZTogZS5iU29ydGFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvW3RdLnNlYXJjaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXg6IG9bdF0ucmVnZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkOiBPYmplY3Qua2V5cyhlLnNlYXJjaEZpeGVkKS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IHQsIHRlcm06IGUuc2VhcmNoRml4ZWRbdF0udG9TdHJpbmcoKSB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiBHdChlKS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNvbHVtbjogdC5jb2wsIGRpcjogdC5kaXIsIG5hbWU6IG4odC5jb2wsICdzTmFtZScpIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZS5faURpc3BsYXlTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiB0LmJQYWdpbmF0ZSA/IGUuX2lEaXNwbGF5TGVuZ3RoIDogLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHIuc2VhcmNoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXg6IHIucmVnZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXhlZDogT2JqZWN0LmtleXMoZS5zZWFyY2hGaXhlZCkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogdCwgdGVybTogZS5zZWFyY2hGaXhlZFt0XS50b1N0cmluZygpIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkobCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE50KGUsICh0ID0gdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0ganQoZSwgJ2RyYXcnLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGp0KGUsICdyZWNvcmRzVG90YWwnLCB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGp0KGUsICdyZWNvcmRzRmlsdGVyZWQnLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrYSA8IGUuaURyYXcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pRHJhdyA9ICthOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9IG4gfHwgW10pLCBtdChlKSwgKGUuX2lSZWNvcmRzVG90YWwgPSBwYXJzZUludChyLCAxMCkpLCAoZS5faVJlY29yZHNEaXNwbGF5ID0gcGFyc2VJbnQodCwgMTApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gMCwgaSA9IG4ubGVuZ3RoOyBvIDwgaTsgbysrKSBEKGUsIG5bb10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmFpRGlzcGxheSA9IGUuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCkpLCBzdChlKSwgUyhlLCAhMCksIEh0KGUpLCB3KGUsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgdC5pRHJhdysrOwogICAgICAgICAgICBpZiAoMCAhPT0gby5sZW5ndGgpCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gciA/IHQuYW9EYXRhLmxlbmd0aCA6IHMsIGYgPSByID8gMCA6IGk7IGYgPCBkOyBmKyspIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBoID0gb1tmXSwgcCA9IHQuYW9EYXRhW2hdLCBnID0gKG51bGwgPT09IHAublRyICYmIHh0KHQsIGgpLCBwLm5UciksIHYgPSAwOyB2IDwgdS5sZW5ndGg7IHYrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHVbdl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gcC5hbkNlbGxzW3ZdOwogICAgICAgICAgICAgICAgICAgICAgICB5KGIsIEMudHlwZS5jbGFzc05hbWVbbS5zVHlwZV0pLCB5KGIsIHQub0NsYXNzZXMudGJvZHkuY2VsbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIEcodCwgJ2FvUm93Q2FsbGJhY2snLCBudWxsLCBbZywgcC5fYURhdGEsIGEsIGYsIGhdKSwgbi5wdXNoKGcpLCBhKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgblswXSA9IEN0KHQpOwogICAgICAgICAgICBHKHQsICdhb0hlYWRlckNhbGxiYWNrJywgJ2hlYWRlcicsIFtIKHQublRIZWFkKS5jaGlsZHJlbigndHInKVswXSwgdnQodCksIGksIHMsIG9dKSwKICAgICAgICAgICAgICAgIEcodCwgJ2FvRm9vdGVyQ2FsbGJhY2snLCAnZm9vdGVyJywgW0godC5uVEZvb3QpLmNoaWxkcmVuKCd0cicpWzBdLCB2dCh0KSwgaSwgcywgb10pLAogICAgICAgICAgICAgICAgY1swXS5yZXBsYWNlQ2hpbGRyZW4gPyBjWzBdLnJlcGxhY2VDaGlsZHJlbi5hcHBseShjWzBdLCBuKSA6IChjLmNoaWxkcmVuKCkuZGV0YWNoKCksIGMuYXBwZW5kKEgobikpKSwKICAgICAgICAgICAgICAgIEgodC5uVGFibGVXcmFwcGVyKS50b2dnbGVDbGFzcygnZHQtZW1wdHktZm9vdGVyJywgMCA9PT0gSCgndHInLCB0Lm5URm9vdCkubGVuZ3RoKSwKICAgICAgICAgICAgICAgIEcodCwgJ2FvRHJhd0NhbGxiYWNrJywgJ2RyYXcnLCBbdF0sICEwKSwKICAgICAgICAgICAgICAgICh0LmJTb3J0ZWQgPSAhMSksCiAgICAgICAgICAgICAgICAodC5iRmlsdGVyZWQgPSAhMSksCiAgICAgICAgICAgICAgICAodC5iRHJhd2luZyA9ICExKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBkKHQsIGUsIG4pIHsKICAgICAgICB2YXIgYSA9IHQub0ZlYXR1cmVzLAogICAgICAgICAgICByID0gYS5iU29ydCwKICAgICAgICAgICAgYSA9IGEuYkZpbHRlcjsKICAgICAgICAodm9pZCAwICE9PSBuICYmICEwICE9PSBuKSB8fCAoc3QodCksIHIgJiYgSnQodCksIGEgPyBSdCh0LCB0Lm9QcmV2aW91c1NlYXJjaCkgOiAodC5haURpc3BsYXkgPSB0LmFpRGlzcGxheU1hc3Rlci5zbGljZSgpKSksCiAgICAgICAgICAgICEwICE9PSBlICYmICh0Ll9pRGlzcGxheVN0YXJ0ID0gMCksCiAgICAgICAgICAgICh0Ll9kcmF3SG9sZCA9IGUpLAogICAgICAgICAgICBTKHQpLAogICAgICAgICAgICAodC5fZHJhd0hvbGQgPSAhMSk7CiAgICB9CiAgICBmdW5jdGlvbiBDdCh0KSB7CiAgICAgICAgdmFyIGUgPSB0Lm9MYW5ndWFnZSwKICAgICAgICAgICAgbiA9IGUuc1plcm9SZWNvcmRzLAogICAgICAgICAgICBhID0gSih0KTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAodC5pRHJhdyA8IDEgJiYgJ3NzcCcgPT09IGEpIHx8ICh0LmlEcmF3IDw9IDEgJiYgJ2FqYXgnID09PSBhKQogICAgICAgICAgICAgICAgPyAobiA9IGUuc0xvYWRpbmdSZWNvcmRzKQogICAgICAgICAgICAgICAgOiBlLnNFbXB0eVRhYmxlICYmIDAgPT09IHQuZm5SZWNvcmRzVG90YWwoKSAmJiAobiA9IGUuc0VtcHR5VGFibGUpLAogICAgICAgICAgICBIKCc8dHIvPicpLmFwcGVuZChIKCc8dGQgLz4nLCB7IGNvbFNwYW46IG90KHQpLCBjbGFzczogdC5vQ2xhc3Nlcy5lbXB0eS5yb3cgfSkuaHRtbChuKSlbMF0KICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gTHQodCwgZSwgcikgewogICAgICAgIHZhciBvID0gW107CiAgICAgICAgSC5lYWNoKGUsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHZhciBuLCBhOwogICAgICAgICAgICBudWxsICE9PSBlICYmCiAgICAgICAgICAgICAgICAoKG4gPSAodCA9IHQubWF0Y2goL14oW2Etel0rKShbMC05XSopKFtBLVphLXpdKikkLykpWzJdID8gK3RbMl0gOiAwKSwKICAgICAgICAgICAgICAgIChhID0gdFszXSA/IHRbM10udG9Mb3dlckNhc2UoKSA6ICdmdWxsJyksCiAgICAgICAgICAgICAgICB0WzFdID09PSByKSAmJgogICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHQoZSwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSBmb3IgKHZhciByID0gMDsgciA8IGEubGVuZ3RoOyByKyspIHQoZSwgbiwgYVtyXSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZVtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgSC5pc1BsYWluT2JqZWN0KGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGEuZmVhdHVyZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChhLnJvd0lkICYmIChlLmlkID0gYS5yb3dJZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJvd0NsYXNzICYmIChlLmNsYXNzTmFtZSA9IGEucm93Q2xhc3MpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8uaWQgPSBhLmlkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLmNsYXNzTmFtZSA9IGEuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoZSwgbiwgYS5mZWF0dXJlcykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNvbnRlbnRzLnB1c2goeyBmZWF0dXJlOiB0LCBvcHRzOiBhW3RdIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogby5jb250ZW50cy5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKAogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCByID0gMDsgciA8IHQubGVuZ3RoOyByKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSB0W3JdKS5yb3dOdW0gPT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKCdmdWxsJyA9PT0gbiAmJiBhLmZ1bGwpIHx8ICgoJ3N0YXJ0JyA9PT0gbiB8fCAnZW5kJyA9PT0gbikgJiYgKGEuc3RhcnQgfHwgYS5lbmQpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVtuXSB8fCAoYVtuXSA9IHsgY29udGVudHM6IFtdIH0pLCBhOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKChhID0geyByb3dOdW06IGUgfSlbbl0gPSB7IGNvbnRlbnRzOiBbXSB9KSwgdC5wdXNoKGEpLCBhOwogICAgICAgICAgICAgICAgICAgIH0pKG8sIG4sIGEpLAogICAgICAgICAgICAgICAgICAgIGEsCiAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgICAgIG8uc29ydChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0LnJvd051bSwKICAgICAgICAgICAgICAgICAgICBhID0gZS5yb3dOdW07CiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gYSA/ICgodCA9IHQuZnVsbCAmJiAhZS5mdWxsID8gLTEgOiAxKSwgJ2JvdHRvbScgPT09IHIgPyAtMSAqIHQgOiB0KSA6IGEgLSBuOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgJ2JvdHRvbScgPT09IHIgJiYgby5yZXZlcnNlKCk7CiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBvLmxlbmd0aDsgbisrKQogICAgICAgICAgICBkZWxldGUgb1tuXS5yb3dOdW0sCiAgICAgICAgICAgICAgICAhKGZ1bmN0aW9uIChvLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbCh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDLmZlYXR1cmVzW3RdIHx8ICQobywgMCwgJ1Vua25vd24gZmVhdHVyZTogJyArIHQpLCBDLmZlYXR1cmVzW3RdLmFwcGx5KHRoaXMsIFtvLCBlXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaVt0XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIG4gPSBpW3RdLmNvbnRlbnRzLCBhID0gMCwgciA9IG4ubGVuZ3RoOyBhIDwgcjsgYSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bYV0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdzdHJpbmcnID09IHR5cGVvZiBuW2FdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChuW2FdID0gbChuW2FdLCBudWxsKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSC5pc1BsYWluT2JqZWN0KG5bYV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChuW2FdID0gbChuW2FdLmZlYXR1cmUsIG5bYV0ub3B0cykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdmdW5jdGlvbicgPT0gdHlwZW9mIG5bYV0ubm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoblthXSA9IG5bYV0ubm9kZShvKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgblthXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSBuW2FdKG8pKSwgKG5bYV0gPSAnZnVuY3Rpb24nID09IHR5cGVvZiBlLm5vZGUgPyBlLm5vZGUoKSA6IGUpKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHQoJ3N0YXJ0JyksIHQoJ2VuZCcpLCB0KCdmdWxsJyk7CiAgICAgICAgICAgICAgICB9KSh0LCBvW25dKTsKICAgICAgICByZXR1cm4gbzsKICAgIH0KICAgIGZ1bmN0aW9uIEl0KGUpIHsKICAgICAgICB2YXIgYSwKICAgICAgICAgICAgdCA9IGUub0NsYXNzZXMsCiAgICAgICAgICAgIG4gPSBIKGUublRhYmxlKSwKICAgICAgICAgICAgciA9IEgoJzxkaXYvPicpCiAgICAgICAgICAgICAgICAuYXR0cih7IGlkOiBlLnNUYWJsZUlkICsgJ193cmFwcGVyJywgY2xhc3M6IHQuY29udGFpbmVyIH0pCiAgICAgICAgICAgICAgICAuaW5zZXJ0QmVmb3JlKG4pOwogICAgICAgIGlmICgoKGUublRhYmxlV3JhcHBlciA9IHJbMF0pLCBlLnNEb20pKQogICAgICAgICAgICBmb3IgKHZhciBvLCBpLCBsLCBzLCB1LCBjLCBkID0gZSwgdCA9IGUuc0RvbSwgZiA9IHIsIGggPSB0Lm1hdGNoKC8oIi4qPyIpfCgnLio/Jyl8Li9nKSwgcCA9IDA7IHAgPCBoLmxlbmd0aDsgcCsrKQogICAgICAgICAgICAgICAgKG8gPSBudWxsKSwKICAgICAgICAgICAgICAgICAgICAnPCcgPT0gKGkgPSBoW3BdKQogICAgICAgICAgICAgICAgICAgICAgICA/ICgobCA9IEgoJzxkaXYvPicpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoIiciICE9IChzID0gaFtwICsgMV0pWzBdICYmICciJyAhPSBzWzBdKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHMgPSBzLnJlcGxhY2UoL1snIl0vZywgJycpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgPSAnJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9IHMuaW5kZXhPZignLicpID8gKChjID0gcy5zcGxpdCgnLicpKSwgKHUgPSBjWzBdKSwgKGMgPSBjWzFdKSkgOiAnIycgPT0gc1swXSA/ICh1ID0gcykgOiAoYyA9IHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmF0dHIoJ2lkJywgdS5zdWJzdHJpbmcoMSkpLmFkZENsYXNzKGMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwKyspLAogICAgICAgICAgICAgICAgICAgICAgICAgIGYuYXBwZW5kKGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChmID0gbCkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJz4nID09IGkKICAgICAgICAgICAgICAgICAgICAgICAgPyAoZiA9IGYucGFyZW50KCkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ3QnID09IGkKICAgICAgICAgICAgICAgICAgICAgICAgPyAobyA9IEJ0KGQpKQogICAgICAgICAgICAgICAgICAgICAgICA6IFYuZXh0LmZlYXR1cmUuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID09IHQuY0ZlYXR1cmUgJiYgKG8gPSB0LmZuSW5pdChkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbyAmJiBmLmFwcGVuZChvKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdmFyIG4gPSBMdChlLCBlLmxheW91dCwgJ3RvcCcpLAogICAgICAgICAgICAgICAgdCA9IEx0KGUsIGUubGF5b3V0LCAnYm90dG9tJyksCiAgICAgICAgICAgICAgICBnID0gYWUoZSwgJ2xheW91dCcpOwogICAgICAgICAgICBuLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIGcoZSwgciwgdCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgZyhlLCByLCB7IGZ1bGw6IHsgdGFibGU6ICEwLCBjb250ZW50czogW0J0KGUpXSB9IH0pLAogICAgICAgICAgICAgICAgdC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgZyhlLCByLCB0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgbiA9IGUsCiAgICAgICAgICAgIHQgPSBuLm5UYWJsZSwKICAgICAgICAgICAgdiA9ICcnICE9PSBuLm9TY3JvbGwuc1ggfHwgJycgIT09IG4ub1Njcm9sbC5zWTsKICAgICAgICBuLm9GZWF0dXJlcy5iUHJvY2Vzc2luZyAmJgogICAgICAgICAgICAoKGEgPSBIKCc8ZGl2Lz4nLCB7IGlkOiBuLnNUYWJsZUlkICsgJ19wcm9jZXNzaW5nJywgY2xhc3M6IG4ub0NsYXNzZXMucHJvY2Vzc2luZy5jb250YWluZXIsIHJvbGU6ICdzdGF0dXMnIH0pCiAgICAgICAgICAgICAgICAuaHRtbChuLm9MYW5ndWFnZS5zUHJvY2Vzc2luZykKICAgICAgICAgICAgICAgIC5hcHBlbmQoJzxkaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj4nKSksCiAgICAgICAgICAgIHYgPyBhLnByZXBlbmRUbyhIKCdkaXYuZHQtc2Nyb2xsJywgbi5uVGFibGVXcmFwcGVyKSkgOiBhLmluc2VydEJlZm9yZSh0KSwKICAgICAgICAgICAgSCh0KS5vbigncHJvY2Vzc2luZy5kdC5EVCcsIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBhLmNzcygnZGlzcGxheScsIG4gPyAnYmxvY2snIDogJ25vbmUnKTsKICAgICAgICAgICAgfSkpOwogICAgfQogICAgZnVuY3Rpb24gQXQodCwgZSwgbikgewogICAgICAgIGZvciAoCiAgICAgICAgICAgIHZhciBhLAogICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgIG8sCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgbCwKICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICB1ID0gdC5hb0NvbHVtbnMsCiAgICAgICAgICAgICAgICBjID0gSChlKS5jaGlsZHJlbigndHInKSwKICAgICAgICAgICAgICAgIGQgPSBlICYmICd0aGVhZCcgPT09IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgIGYgPSBbXSwKICAgICAgICAgICAgICAgIGggPSAwLAogICAgICAgICAgICAgICAgcCA9IGMubGVuZ3RoOwogICAgICAgICAgICBoIDwgcDsKICAgICAgICAgICAgaCsrCiAgICAgICAgKQogICAgICAgICAgICBmLnB1c2goW10pOwogICAgICAgIGZvciAoaCA9IDAsIHAgPSBjLmxlbmd0aDsgaCA8IHA7IGgrKykKICAgICAgICAgICAgZm9yIChyID0gKGEgPSBjW2hdKS5maXJzdENoaWxkOyByOyApIHsKICAgICAgICAgICAgICAgIGlmICgnVEQnID09IHIubm9kZU5hbWUudG9VcHBlckNhc2UoKSB8fCAnVEgnID09IHIubm9kZU5hbWUudG9VcHBlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBnLAogICAgICAgICAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgICAgICAgICBtLAogICAgICAgICAgICAgICAgICAgICAgICBiLAogICAgICAgICAgICAgICAgICAgICAgICB5LAogICAgICAgICAgICAgICAgICAgICAgICBEID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAgICAgYiA9IChiID0gK3IuZ2V0QXR0cmlidXRlKCdjb2xzcGFuJykpICYmIDAgIT0gYiAmJiAxICE9IGIgPyBiIDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAoeSA9ICtyLmdldEF0dHJpYnV0ZSgncm93c3BhbicpKSAmJiAwICE9IHkgJiYgMSAhPSB5ID8geSA6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gKGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IHRbZV07IGFbbl07ICkgbisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoZiwgaCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gMSA9PSBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChldCh0LCBsLCBIKHIpLmRhdGEoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnID0gdVtsXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2ID0gci5nZXRBdHRyaWJ1dGUoJ3dpZHRoJykgfHwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtID0gci5zdHlsZS53aWR0aC5tYXRjaCgvd2lkdGg6XHMqKFxkK1tweGVtJV0rKS8pKSAmJiAodiA9IG1bMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZy5zV2lkdGhPcmlnID0gZy5zV2lkdGggfHwgdiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKG51bGwgPT09IGcuc1RpdGxlIHx8IGcuYXV0b1RpdGxlIHx8IChyLmlubmVySFRNTCA9IGcuc1RpdGxlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWcuc1RpdGxlICYmIHMgJiYgKChnLnNUaXRsZSA9IEwoci5pbm5lckhUTUwpKSwgKGcuYXV0b1RpdGxlID0gITApKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZy5mb290ZXIgJiYgKHIuaW5uZXJIVE1MID0gZy5mb290ZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmFyaWFUaXRsZSB8fCAoZy5hcmlhVGl0bGUgPSBIKHIpLmF0dHIoJ2FyaWEtbGFiZWwnKSB8fCBnLnNUaXRsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuY2xhc3NOYW1lKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKHIpLmFkZENsYXNzKGcuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBIKCdzcGFuLmR0LWNvbHVtbi10aXRsZScsIHIpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKCc8c3Bhbj4nKS5hZGRDbGFzcygnZHQtY29sdW1uLXRpdGxlJykuYXBwZW5kKHIuY2hpbGROb2RlcykuYXBwZW5kVG8ociksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBIKCdzcGFuLmR0LWNvbHVtbi1vcmRlcicsIHIpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEgoJzxzcGFuPicpLmFkZENsYXNzKCdkdC1jb2x1bW4tb3JkZXInKS5hcHBlbmRUbyhyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpIDwgYjsKICAgICAgICAgICAgICAgICAgICAgICAgaSsrCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IDA7IG8gPCB5OyBvKyspIChmW2ggKyBvXVtsICsgaV0gPSB7IGNlbGw6IHIsIHVuaXF1ZTogcyB9KSwgKGZbaCArIG9dLnJvdyA9IGEpOwogICAgICAgICAgICAgICAgICAgICAgICBELnB1c2gobCArIGkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByLnNldEF0dHJpYnV0ZSgnZGF0YS1kdC1jb2x1bW4nLCB4KEQpLmpvaW4oJywnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByID0gci5uZXh0U2libGluZzsKICAgICAgICAgICAgfQogICAgICAgIHJldHVybiBmOwogICAgfQogICAgZnVuY3Rpb24gRnQobiwgdCwgYSkgewogICAgICAgIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICB2YXIgZSA9IG4uanFYSFIgPyBuLmpxWEhSLnN0YXR1cyA6IG51bGw7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICgobnVsbCA9PT0gdCB8fCAoJ251bWJlcicgPT0gdHlwZW9mIGUgJiYgMjA0ID09IGUpKSAmJiBOdChuLCAodCA9IHt9KSwgW10pLAogICAgICAgICAgICAgICAgKGUgPSB0LmVycm9yIHx8IHQuc0Vycm9yKSAmJiAkKG4sIDAsIGUpLAogICAgICAgICAgICAgICAgdC5kICYmICdzdHJpbmcnID09IHR5cGVvZiB0LmQpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IEpTT04ucGFyc2UodC5kKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgIChuLmpzb24gPSB0KSwgRyhuLCBudWxsLCAneGhyJywgW24sIHQsIG4uanFYSFJdLCAhMCksIGEodCk7CiAgICAgICAgfQogICAgICAgIHZhciByLAogICAgICAgICAgICBvID0gbi5hamF4LAogICAgICAgICAgICBpID0gbi5vSW5zdGFuY2UsCiAgICAgICAgICAgIGwgPQogICAgICAgICAgICAgICAgKEguaXNQbGFpbk9iamVjdChvKSAmJgogICAgICAgICAgICAgICAgICAgIG8uZGF0YSAmJgogICAgICAgICAgICAgICAgICAgICgobCA9ICdmdW5jdGlvbicgPT0gdHlwZW9mIChyID0gby5kYXRhKSA/IHIodCwgbikgOiByKSwKICAgICAgICAgICAgICAgICAgICAodCA9ICdmdW5jdGlvbicgPT0gdHlwZW9mIHIgJiYgbCA/IGwgOiBILmV4dGVuZCghMCwgdCwgbCkpLAogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvLmRhdGEpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVybDogJ3N0cmluZycgPT0gdHlwZW9mIG8gPyBvIDogJycsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogdCwKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBlLAogICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICExLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IG4uc1NlcnZlck1ldGhvZCwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLTEgPT09IEcobiwgbnVsbCwgJ3hocicsIFtuLCBudWxsLCBuLmpxWEhSXSwgITApLmluZGV4T2YoITApICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ3BhcnNlcmVycm9yJyA9PSBlID8gJChuLCAwLCAnSW52YWxpZCBKU09OIHJlc3BvbnNlJywgMSkgOiA0ID09PSB0LnJlYWR5U3RhdGUgJiYgJChuLCAwLCAnQWpheCBlcnJvcicsIDcpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcobiwgITEpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICBILmlzUGxhaW5PYmplY3QobykgJiYgSC5leHRlbmQobCwgbyksCiAgICAgICAgICAgIChuLm9BamF4RGF0YSA9IHQpLAogICAgICAgICAgICBHKG4sIG51bGwsICdwcmVYaHInLCBbbiwgdCwgbF0sICEwKSwKICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgbwogICAgICAgICAgICAgICAgPyAobi5qcVhIUiA9IG8uY2FsbChpLCB0LCBlLCBuKSkKICAgICAgICAgICAgICAgIDogJycgPT09IG8udXJsCiAgICAgICAgICAgICAgICA/ICgoaSA9IHt9KSwgVi51dGlsLnNldChvLmRhdGFTcmMpKGksIFtdKSwgZShpKSkKICAgICAgICAgICAgICAgIDogKG4uanFYSFIgPSBILmFqYXgobCkpLAogICAgICAgICAgICByICYmIChvLmRhdGEgPSByKTsKICAgIH0KICAgIGZ1bmN0aW9uIE50KHQsIGUsIG4pIHsKICAgICAgICB2YXIgYSA9ICdkYXRhJzsKICAgICAgICBpZiAoCiAgICAgICAgICAgIChILmlzUGxhaW5PYmplY3QodC5hamF4KSAmJgogICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0LmFqYXguZGF0YVNyYyAmJgogICAgICAgICAgICAgICAgKCdzdHJpbmcnID09IHR5cGVvZiAodCA9IHQuYWpheC5kYXRhU3JjKSB8fCAnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gKGEgPSB0KSA6IHZvaWQgMCAhPT0gdC5kYXRhICYmIChhID0gdC5kYXRhKSksCiAgICAgICAgICAgICFuKQogICAgICAgICkKICAgICAgICAgICAgcmV0dXJuICdkYXRhJyA9PT0gYSA/IGUuYWFEYXRhIHx8IGVbYV0gOiAnJyAhPT0gYSA/IFUoYSkoZSkgOiBlOwogICAgICAgIHYoYSkoZSwgbik7CiAgICB9CiAgICBmdW5jdGlvbiBqdCh0LCBlLCBuKSB7CiAgICAgICAgdmFyIHQgPSBILmlzUGxhaW5PYmplY3QodC5hamF4KSA/IHQuYWpheC5kYXRhU3JjIDogbnVsbDsKICAgICAgICByZXR1cm4gdCAmJiB0W2VdCiAgICAgICAgICAgID8gVSh0W2VdKShuKQogICAgICAgICAgICA6ICgodCA9ICcnKSwKICAgICAgICAgICAgICAnZHJhdycgPT09IGUKICAgICAgICAgICAgICAgICAgPyAodCA9ICdzRWNobycpCiAgICAgICAgICAgICAgICAgIDogJ3JlY29yZHNUb3RhbCcgPT09IGUKICAgICAgICAgICAgICAgICAgPyAodCA9ICdpVG90YWxSZWNvcmRzJykKICAgICAgICAgICAgICAgICAgOiAncmVjb3Jkc0ZpbHRlcmVkJyA9PT0gZSAmJiAodCA9ICdpVG90YWxEaXNwbGF5UmVjb3JkcycpLAogICAgICAgICAgICAgIHZvaWQgMCAhPT0gblt0XSA/IG5bdF0gOiBuW2VdKTsKICAgIH0KICAgIGZ1bmN0aW9uIFJ0KG4sIHQpIHsKICAgICAgICB2YXIgZSA9IG4uYW9QcmVTZWFyY2hDb2xzOwogICAgICAgIGlmICgnc3NwJyAhPSBKKG4pKSB7CiAgICAgICAgICAgIGZvciAodmFyIGEsIHIsIG8sIGksIGwsIHMgPSBuLCB1ID0gcy5hb0NvbHVtbnMsIGMgPSBzLmFvRGF0YSwgZCA9IDA7IGQgPCBjLmxlbmd0aDsgZCsrKQogICAgICAgICAgICAgICAgaWYgKGNbZF0gJiYgIShsID0gY1tkXSkuX2FGaWx0ZXJEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gW10sIGEgPSAwLCByID0gdS5sZW5ndGg7IGEgPCByOyBhKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHVbYV0uYlNlYXJjaGFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ3N0cmluZycgIT0gdHlwZW9mIChpID0gbnVsbCA9PT0gKGkgPSBxKHMsIGQsIGEsICdmaWx0ZXInKSkgPyAnJyA6IGkpICYmIGkudG9TdHJpbmcgJiYgKGkgPSBpLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChpID0gJycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5pbmRleE9mICYmIC0xICE9PSBpLmluZGV4T2YoJyYnKSAmJiAoKEV0LmlubmVySFRNTCA9IGkpLCAoaSA9IGt0ID8gRXQudGV4dENvbnRlbnQgOiBFdC5pbm5lclRleHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucmVwbGFjZSAmJiAoaSA9IGkucmVwbGFjZSgvW1xyXG5cdTIwMjhdL2csICcnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgKGwuX2FGaWx0ZXJEYXRhID0gbyksIChsLl9zRmlsdGVyUm93ID0gby5qb2luKCcgICcpKSwgMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKG4uYWlEaXNwbGF5ID0gbi5haURpc3BsYXlNYXN0ZXIuc2xpY2UoKSksCiAgICAgICAgICAgICAgICBPdChuLmFpRGlzcGxheSwgbiwgdC5zZWFyY2gsIHQpLAogICAgICAgICAgICAgICAgSC5lYWNoKG4uc2VhcmNoRml4ZWQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgT3Qobi5haURpc3BsYXksIG4sIGUsIHt9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGUubGVuZ3RoOyBmKyspIHsKICAgICAgICAgICAgICAgIHZhciBoID0gZVtmXTsKICAgICAgICAgICAgICAgIE90KG4uYWlEaXNwbGF5LCBuLCBoLnNlYXJjaCwgaCwgZiksCiAgICAgICAgICAgICAgICAgICAgSC5lYWNoKG4uYW9Db2x1bW5zW2ZdLnNlYXJjaEZpeGVkLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBPdChuLmFpRGlzcGxheSwgbiwgZSwge30sIGYpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIHAsIGcsIHYgPSBuLCBtID0gVi5leHQuc2VhcmNoLCBiID0gdi5haURpc3BsYXksIHkgPSAwLCBEID0gbS5sZW5ndGg7IHkgPCBEOyB5KyspIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBbXSwgUyA9IDAsIHcgPSBiLmxlbmd0aDsgUyA8IHc7IFMrKykKICAgICAgICAgICAgICAgICAgICAoZyA9IGJbU10pLCAocCA9IHYuYW9EYXRhW2ddKSwgbVt5XSh2LCBwLl9hRmlsdGVyRGF0YSwgZywgcC5fYURhdGEsIFMpICYmIHgucHVzaChnKTsKICAgICAgICAgICAgICAgIChiLmxlbmd0aCA9IDApLCBiLnB1c2guYXBwbHkoYiwgeCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKG4uYkZpbHRlcmVkID0gITApLCBHKG4sIG51bGwsICdzZWFyY2gnLCBbbl0pOwogICAgfQogICAgZnVuY3Rpb24gT3QodCwgZSwgbiwgYSwgcikgewogICAgICAgIGlmICgnJyAhPT0gbikgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgdmFyIG8gPSAwLAogICAgICAgICAgICAgICAgICAgIGkgPSBbXSwKICAgICAgICAgICAgICAgICAgICBsID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgbiA/IG4gOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHMgPQogICAgICAgICAgICAgICAgICAgICAgICBuIGluc3RhbmNlb2YgUmVnRXhwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gSC5leHRlbmQoe30sIHsgYm91bmRhcnk6ICExLCBjYXNlSW5zZW5zaXRpdmU6ICEwLCBleGFjdDogITEsIHJlZ2V4OiAhMSwgc21hcnQ6ICEwIH0sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cmluZycgIT0gdHlwZW9mIHQgJiYgKHQgPSB0LnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodCA9IGsodCkpLCBlLmV4YWN0KSkgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgUHQodCkgKyAnJCcsIGUuY2FzZUluc2Vuc2l0aXZlID8gJ2knIDogJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLCByLCBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gZS5yZWdleCA/IHQgOiBQdCh0KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc21hcnQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobiA9ICh0Lm1hdGNoKC8hP1siXHUyMDFDXVteIlx1MjAxRF0rWyJcdTIwMURdfFteIF0rL2cpIHx8IFsnJ10pLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyEnID09PSB0LmNoYXJBdCgwKSAmJiAoKG4gPSAhMCksICh0ID0gdC5zdWJzdHJpbmcoMSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyInID09PSB0LmNoYXJBdCgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodCA9IChlID0gdC5tYXRjaCgvXiIoLiopIiQvKSkgPyBlWzFdIDogdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ+KAnCcgPT09IHQuY2hhckF0KDApICYmICh0ID0gKGUgPSB0Lm1hdGNoKC9eXHUyMDFDKC4qKVx1MjAxRCQvKSkgPyBlWzFdIDogdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgKDEgPCB0Lmxlbmd0aCAmJiBhLnB1c2goJyg/IScgKyB0ICsgJyknKSwgKHQgPSAnJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnJlcGxhY2UoLyIvZywgJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gYS5sZW5ndGggPyBhLmpvaW4oJycpIDogJycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSBlLmJvdW5kYXJ5ID8gJ1xcYicgOiAnJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9ICdeKD89Lio/JyArIG8gKyBuLmpvaW4oJykoPz0uKj8nICsgbykgKyAnKSgnICsgciArICcuKSokJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAodCwgZS5jYXNlSW5zZW5zaXRpdmUgPyAnaScgOiAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKG4sIGEpLAogICAgICAgICAgICAgICAgICAgIG8gPSAwOwogICAgICAgICAgICAgICAgbyA8IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgbysrCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdmFyIHUgPSBlLmFvRGF0YVt0W29dXSwKICAgICAgICAgICAgICAgICAgICBjID0gdm9pZCAwID09PSByID8gdS5fc0ZpbHRlclJvdyA6IHUuX2FGaWx0ZXJEYXRhW3JdOwogICAgICAgICAgICAgICAgKChsICYmIGwoYywgdS5fYURhdGEsIHRbb10sIHIpKSB8fCAocyAmJiBzLnRlc3QoYykpKSAmJiBpLnB1c2godFtvXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh0Lmxlbmd0aCA9IGkubGVuZ3RoLCBvID0gMDsgbyA8IGkubGVuZ3RoOyBvKyspIHRbb10gPSBpW29dOwogICAgICAgIH0KICAgIH0KICAgIHZhciBQdCA9IFYudXRpbC5lc2NhcGVSZWdleCwKICAgICAgICBFdCA9IEgoJzxkaXY+JylbMF0sCiAgICAgICAga3QgPSB2b2lkIDAgIT09IEV0LnRleHRDb250ZW50OwogICAgZnVuY3Rpb24gTXQoaSkgewogICAgICAgIHZhciBsLAogICAgICAgICAgICBlLAogICAgICAgICAgICBuLAogICAgICAgICAgICB0LAogICAgICAgICAgICBzID0gaS5vSW5pdCwKICAgICAgICAgICAgdSA9IGkuZGVmZXJMb2FkaW5nLAogICAgICAgICAgICBjID0gSihpKTsKICAgICAgICBpLmJJbml0aWFsaXNlZAogICAgICAgICAgICA/ICh3dChpLCAnaGVhZGVyJyksCiAgICAgICAgICAgICAgd3QoaSwgJ2Zvb3RlcicpLAogICAgICAgICAgICAgIChuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdChpLCBpLmFvSGVhZGVyKSwgX3QoaSwgaS5hb0Zvb3Rlcik7CiAgICAgICAgICAgICAgICAgIHZhciBuID0gaS5pSW5pdERpc3BsYXlTdGFydDsKICAgICAgICAgICAgICAgICAgaWYgKHMuYWFEYXRhKSBmb3IgKGwgPSAwOyBsIDwgcy5hYURhdGEubGVuZ3RoOyBsKyspIEQoaSwgcy5hYURhdGFbbF0pOwogICAgICAgICAgICAgICAgICBlbHNlICghdSAmJiAnZG9tJyAhPSBjKSB8fCBmdChpLCBIKGkublRCb2R5KS5jaGlsZHJlbigndHInKSk7CiAgICAgICAgICAgICAgICAgIChpLmFpRGlzcGxheSA9IGkuYWlEaXNwbGF5TWFzdGVyLnNsaWNlKCkpLCBJdChpKTsKICAgICAgICAgICAgICAgICAgdmFyIHQgPSBpLAogICAgICAgICAgICAgICAgICAgICAgZSA9IHQublRIZWFkLAogICAgICAgICAgICAgICAgICAgICAgYSA9IGUucXVlcnlTZWxlY3RvckFsbCgndHInKSwKICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmJTb3J0Q2VsbHNUb3AsCiAgICAgICAgICAgICAgICAgICAgICBvID0gJzpub3QoW2RhdGEtZHQtb3JkZXI9ImRpc2FibGUiXSk6bm90KFtkYXRhLWR0LW9yZGVyPSJpY29uLW9ubHkiXSknOwogICAgICAgICAgICAgICAgICAhMCA9PT0gciA/IChlID0gYVswXSkgOiAhMSA9PT0gciAmJiAoZSA9IGFbYS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAkdCh0LCBlLCBlID09PSB0Lm5USGVhZCA/ICd0cicgKyBvICsgJyB0aCcgKyBvICsgJywgdHInICsgbyArICcgdGQnICsgbyA6ICd0aCcgKyBvICsgJywgdGQnICsgbyksCiAgICAgICAgICAgICAgICAgICAgICBZdCh0LCAociA9IFtdKSwgdC5hYVNvcnRpbmcpLAogICAgICAgICAgICAgICAgICAgICAgKHQuYWFTb3J0aW5nID0gciksCiAgICAgICAgICAgICAgICAgICAgICBVdChpKSwKICAgICAgICAgICAgICAgICAgICAgIHcoaSwgITApLAogICAgICAgICAgICAgICAgICAgICAgRyhpLCBudWxsLCAncHJlSW5pdCcsIFtpXSwgITApLAogICAgICAgICAgICAgICAgICAgICAgZChpKSwKICAgICAgICAgICAgICAgICAgICAgICgnc3NwJyA9PSBjICYmICF1KSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICgnYWpheCcgPT0gYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEZ0KGksIHt9LCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IE50KGksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGwgPSAwOyBsIDwgZS5sZW5ndGg7IGwrKykgRChpLCBlW2xdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkuaUluaXREaXNwbGF5U3RhcnQgPSBuKSwgZChpKSwgdyhpLCAhMSksIEh0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKEh0KGkpLCB3KGksICExKSkpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIChlID0gaSkub0ZlYXR1cmVzLmJTdGF0ZVNhdmUKICAgICAgICAgICAgICAgICAgPyB2b2lkIDAgIT09CiAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gZS5mblN0YXRlTG9hZENhbGxiYWNrLmNhbGwoZS5vSW5zdGFuY2UsIGUsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBLdChlLCB0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpICYmIEt0KGUsIHQsIG4pCiAgICAgICAgICAgICAgICAgIDogbigpKQogICAgICAgICAgICA6IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBNdChpKTsKICAgICAgICAgICAgICB9LCAyMDApOwogICAgfQogICAgZnVuY3Rpb24gSHQodCkgewogICAgICAgIHZhciBlOwogICAgICAgIHQuX2JJbml0Q29tcGxldGUgfHwKICAgICAgICAgICAgKChlID0gW3QsIHQuanNvbl0pLCAodC5fYkluaXRDb21wbGV0ZSA9ICEwKSwgbnQodCksIEcodCwgbnVsbCwgJ3BsdWdpbi1pbml0JywgZSwgITApLCBHKHQsICdhb0luaXRDb21wbGV0ZScsICdpbml0JywgZSwgITApKTsKICAgIH0KICAgIGZ1bmN0aW9uIFd0KHQsIGUpIHsKICAgICAgICBlID0gcGFyc2VJbnQoZSwgMTApOwogICAgICAgICh0Ll9pRGlzcGxheUxlbmd0aCA9IGUpLCBuZSh0KSwgRyh0LCBudWxsLCAnbGVuZ3RoJywgW3QsIGVdKTsKICAgIH0KICAgIGZ1bmN0aW9uIFh0KHQsIGUsIG4pIHsKICAgICAgICB2YXIgYSA9IHQuX2lEaXNwbGF5U3RhcnQsCiAgICAgICAgICAgIHIgPSB0Ll9pRGlzcGxheUxlbmd0aCwKICAgICAgICAgICAgbyA9IHQuZm5SZWNvcmRzRGlzcGxheSgpOwogICAgICAgIGlmICgwID09PSBvIHx8IC0xID09PSByKSBhID0gMDsKICAgICAgICBlbHNlIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgZSkgbyA8IChhID0gZSAqIHIpICYmIChhID0gMCk7CiAgICAgICAgZWxzZSBpZiAoJ2ZpcnN0JyA9PSBlKSBhID0gMDsKICAgICAgICBlbHNlIGlmICgncHJldmlvdXMnID09IGUpIChhID0gMCA8PSByID8gYSAtIHIgOiAwKSA8IDAgJiYgKGEgPSAwKTsKICAgICAgICBlbHNlIGlmICgnbmV4dCcgPT0gZSkgYSArIHIgPCBvICYmIChhICs9IHIpOwogICAgICAgIGVsc2UgaWYgKCdsYXN0JyA9PSBlKSBhID0gTWF0aC5mbG9vcigobyAtIDEpIC8gcikgKiByOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoJ2VsbGlwc2lzJyA9PT0gZSkgcmV0dXJuOwogICAgICAgICAgICAkKHQsIDAsICdVbmtub3duIHBhZ2luZyBhY3Rpb246ICcgKyBlLCA1KTsKICAgICAgICB9CiAgICAgICAgbyA9IHQuX2lEaXNwbGF5U3RhcnQgIT09IGE7CiAgICAgICAgKHQuX2lEaXNwbGF5U3RhcnQgPSBhKSwgRyh0LCBudWxsLCBvID8gJ3BhZ2UnIDogJ3BhZ2UtbmMnLCBbdF0pLCBvICYmIG4gJiYgUyh0KTsKICAgIH0KICAgIGZ1bmN0aW9uIHcodCwgZSkgewogICAgICAgICh0LmJEcmF3aW5nICYmICExID09PSBlKSB8fCBHKHQsIG51bGwsICdwcm9jZXNzaW5nJywgW3QsIGVdKTsKICAgIH0KICAgIGZ1bmN0aW9uIFZ0KHQsIGUsIG4pIHsKICAgICAgICBlCiAgICAgICAgICAgID8gKHcodCwgITApLAogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBuKCksIHcodCwgITEpOwogICAgICAgICAgICAgIH0sIDApKQogICAgICAgICAgICA6IG4oKTsKICAgIH0KICAgIGZ1bmN0aW9uIEJ0KHQpIHsKICAgICAgICB2YXIgZSwKICAgICAgICAgICAgbiwKICAgICAgICAgICAgYSwKICAgICAgICAgICAgciwKICAgICAgICAgICAgbywKICAgICAgICAgICAgaSwKICAgICAgICAgICAgbCwKICAgICAgICAgICAgcywKICAgICAgICAgICAgdSwKICAgICAgICAgICAgYywKICAgICAgICAgICAgZCwKICAgICAgICAgICAgZiwKICAgICAgICAgICAgaCwKICAgICAgICAgICAgcCA9IEgodC5uVGFibGUpLAogICAgICAgICAgICBnID0gdC5vU2Nyb2xsOwogICAgICAgIHJldHVybiAnJyA9PT0gZy5zWCAmJiAnJyA9PT0gZy5zWQogICAgICAgICAgICA/IHQublRhYmxlCiAgICAgICAgICAgIDogKChlID0gZy5zWCksCiAgICAgICAgICAgICAgKG4gPSBnLnNZKSwKICAgICAgICAgICAgICAoYSA9IHQub0NsYXNzZXMuc2Nyb2xsaW5nKSwKICAgICAgICAgICAgICAobyA9IChyID0gdC5jYXB0aW9uTm9kZSkgPyByLl9jYXB0aW9uU2lkZSA6IG51bGwpLAogICAgICAgICAgICAgICh1ID0gSChwWzBdLmNsb25lTm9kZSghMSkpKSwKICAgICAgICAgICAgICAoaSA9IEgocFswXS5jbG9uZU5vZGUoITEpKSksCiAgICAgICAgICAgICAgKGMgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IEkodCkgOiBudWxsOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIChsID0gcC5jaGlsZHJlbigndGZvb3QnKSkubGVuZ3RoIHx8IChsID0gbnVsbCksCiAgICAgICAgICAgICAgKHUgPSBIKChzID0gJzxkaXYvPicpLCB7IGNsYXNzOiBhLmNvbnRhaW5lciB9KQogICAgICAgICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgSChzLCB7IGNsYXNzOiBhLmhlYWRlci5zZWxmIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7IG92ZXJmbG93OiAnaGlkZGVuJywgcG9zaXRpb246ICdyZWxhdGl2ZScsIGJvcmRlcjogMCwgd2lkdGg6IGUgPyBjKGUpIDogJzEwMCUnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSChzLCB7IGNsYXNzOiBhLmhlYWRlci5pbm5lciB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7ICdib3gtc2l6aW5nJzogJ2NvbnRlbnQtYm94Jywgd2lkdGg6IGcuc1hJbm5lciB8fCAnMTAwJScgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdtYXJnaW4tbGVmdCcsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3RvcCcgPT09IG8gPyByIDogbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChwLmNoaWxkcmVuKCd0aGVhZCcpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgSChzLCB7IGNsYXNzOiBhLmJvZHkgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKHsgcG9zaXRpb246ICdyZWxhdGl2ZScsIG92ZXJmbG93OiAnYXV0bycsIHdpZHRoOiBjKGUpIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChwKSwKICAgICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgbCAmJgogICAgICAgICAgICAgICAgICB1LmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgIEgocywgeyBjbGFzczogYS5mb290ZXIuc2VsZiB9KQogICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoeyBvdmVyZmxvdzogJ2hpZGRlbicsIGJvcmRlcjogMCwgd2lkdGg6IGUgPyBjKGUpIDogJzEwMCUnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSChzLCB7IGNsYXNzOiBhLmZvb3Rlci5pbm5lciB9KS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2lkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdtYXJnaW4tbGVmdCcsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnYm90dG9tJyA9PT0gbyA/IHIgOiBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQocC5jaGlsZHJlbigndGZvb3QnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAoYyA9IHUuY2hpbGRyZW4oKSksCiAgICAgICAgICAgICAgKGQgPSBjWzBdKSwKICAgICAgICAgICAgICAoZiA9IGNbMV0pLAogICAgICAgICAgICAgIChoID0gbCA/IGNbMl0gOiBudWxsKSwKICAgICAgICAgICAgICBIKGYpLm9uKCdzY3JvbGwuRFQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgICAoZC5zY3JvbGxMZWZ0ID0gdCksIGwgJiYgKGguc2Nyb2xsTGVmdCA9IHQpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIEgoJ3RoLCB0ZCcsIGQpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIHQgPSBkLnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICAgIChmLnNjcm9sbExlZnQgPSB0KSwgbCAmJiAoZi5zY3JvbGxMZWZ0ID0gdCk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgSChmKS5jc3MoJ21heC1oZWlnaHQnLCBuKSwKICAgICAgICAgICAgICBnLmJDb2xsYXBzZSB8fCBIKGYpLmNzcygnaGVpZ2h0JywgbiksCiAgICAgICAgICAgICAgKHQublNjcm9sbEhlYWQgPSBkKSwKICAgICAgICAgICAgICAodC5uU2Nyb2xsQm9keSA9IGYpLAogICAgICAgICAgICAgICh0Lm5TY3JvbGxGb290ID0gaCksCiAgICAgICAgICAgICAgdC5hb0RyYXdDYWxsYmFjay5wdXNoKHF0KSwKICAgICAgICAgICAgICB1WzBdKTsKICAgIH0KICAgIGZ1bmN0aW9uIHF0KGUpIHsKICAgICAgICB2YXIgdCA9IGUub1Njcm9sbC5pQmFyV2lkdGgsCiAgICAgICAgICAgIG4gPSBIKGUublNjcm9sbEhlYWQpLmNoaWxkcmVuKCdkaXYnKSwKICAgICAgICAgICAgYSA9IG4uY2hpbGRyZW4oJ3RhYmxlJyksCiAgICAgICAgICAgIHIgPSBlLm5TY3JvbGxCb2R5LAogICAgICAgICAgICBvID0gSChyKSwKICAgICAgICAgICAgaSA9IEgoZS5uU2Nyb2xsRm9vdCkuY2hpbGRyZW4oJ2RpdicpLAogICAgICAgICAgICBsID0gaS5jaGlsZHJlbigndGFibGUnKSwKICAgICAgICAgICAgcyA9IEgoZS5uVEhlYWQpLAogICAgICAgICAgICB1ID0gSChlLm5UYWJsZSksCiAgICAgICAgICAgIGMgPSBlLm5URm9vdCAmJiBIKCd0aCwgdGQnLCBlLm5URm9vdCkubGVuZ3RoID8gSChlLm5URm9vdCkgOiBudWxsLAogICAgICAgICAgICBkID0gZS5vQnJvd3NlciwKICAgICAgICAgICAgZiA9IHIuc2Nyb2xsSGVpZ2h0ID4gci5jbGllbnRIZWlnaHQ7CiAgICAgICAgaWYgKGUuc2Nyb2xsQmFyVmlzICE9PSBmICYmIHZvaWQgMCAhPT0gZS5zY3JvbGxCYXJWaXMpIChlLnNjcm9sbEJhclZpcyA9IGYpLCBudChlKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKChlLnNjcm9sbEJhclZpcyA9IGYpLAogICAgICAgICAgICAgICAgdS5jaGlsZHJlbigndGhlYWQsIHRmb290JykucmVtb3ZlKCksCiAgICAgICAgICAgICAgICAoZiA9IHMuY2xvbmUoKS5wcmVwZW5kVG8odSkpLmZpbmQoJ3RoLCB0ZCcpLnJlbW92ZUF0dHIoJ3RhYmluZGV4JyksCiAgICAgICAgICAgICAgICBmLmZpbmQoJ1tpZF0nKS5yZW1vdmVBdHRyKCdpZCcpLAogICAgICAgICAgICAgICAgYyAmJiAoYiA9IGMuY2xvbmUoKS5wcmVwZW5kVG8odSkpLmZpbmQoJ1tpZF0nKS5yZW1vdmVBdHRyKCdpZCcpLAogICAgICAgICAgICAgICAgZS5haURpc3BsYXkubGVuZ3RoKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSBudWxsLCBwID0gZS5faURpc3BsYXlTdGFydDsgcCA8IGUuYWlEaXNwbGF5Lmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBlLmFpRGlzcGxheVtwXSwKICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGUuYW9EYXRhW2ddLm5UcjsKICAgICAgICAgICAgICAgICAgICBpZiAoZykgewogICAgICAgICAgICAgICAgICAgICAgICBoID0gZzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGgpCiAgICAgICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBIKGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCd0aCwgdGQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaWR4OiBhdChlLCB0KSwgd2lkdGg6IEgodGhpcykub3V0ZXJXaWR0aCgpIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgcCA8IHYubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBwKysKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBlLmFvQ29sdW1uc1t2W3BdLmlkeF0uY29sRWxbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIG0uc3R5bGUud2lkdGgucmVwbGFjZSgncHgnLCAnJykgIT09IHZbcF0ud2lkdGggJiYgKG0uc3R5bGUud2lkdGggPSB2W3BdLndpZHRoICsgJ3B4Jyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGEuZmluZCgnY29sZ3JvdXAnKS5yZW1vdmUoKSwKICAgICAgICAgICAgICAgIGEuYXBwZW5kKGUuY29sZ3JvdXAuY2xvbmUoKSksCiAgICAgICAgICAgICAgICBjICYmIChsLmZpbmQoJ2NvbGdyb3VwJykucmVtb3ZlKCksIGwuYXBwZW5kKGUuY29sZ3JvdXAuY2xvbmUoKSkpLAogICAgICAgICAgICAgICAgSCgndGgsIHRkJywgZikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgSCh0aGlzLmNoaWxkTm9kZXMpLndyYXBBbGwoJzxkaXYgY2xhc3M9ImR0LXNjcm9sbC1zaXppbmciPicpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBjICYmCiAgICAgICAgICAgICAgICAgICAgSCgndGgsIHRkJywgYikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEgodGhpcy5jaGlsZE5vZGVzKS53cmFwQWxsKCc8ZGl2IGNsYXNzPSJkdC1zY3JvbGwtc2l6aW5nIj4nKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHMgPSBNYXRoLmZsb29yKHUuaGVpZ2h0KCkpID4gci5jbGllbnRIZWlnaHQgfHwgJ3Njcm9sbCcgPT0gby5jc3MoJ292ZXJmbG93LXknKSwKICAgICAgICAgICAgICAgIGYgPSAncGFkZGluZycgKyAoZC5iU2Nyb2xsYmFyTGVmdCA/ICdMZWZ0JyA6ICdSaWdodCcpLAogICAgICAgICAgICAgICAgYiA9IHUub3V0ZXJXaWR0aCgpOwogICAgICAgICAgICBhLmNzcygnd2lkdGgnLCBJKGIpKSwKICAgICAgICAgICAgICAgIG4uY3NzKCd3aWR0aCcsIEkoYikpLmNzcyhmLCBzID8gdCArICdweCcgOiAnMHB4JyksCiAgICAgICAgICAgICAgICBjICYmIChsLmNzcygnd2lkdGgnLCBJKGIpKSwgaS5jc3MoJ3dpZHRoJywgSShiKSkuY3NzKGYsIHMgPyB0ICsgJ3B4JyA6ICcwcHgnKSksCiAgICAgICAgICAgICAgICB1LmNoaWxkcmVuKCdjb2xncm91cCcpLnByZXBlbmRUbyh1KSwKICAgICAgICAgICAgICAgIG8udHJpZ2dlcignc2Nyb2xsJyksCiAgICAgICAgICAgICAgICAoIWUuYlNvcnRlZCAmJiAhZS5iRmlsdGVyZWQpIHx8IGUuX2RyYXdIb2xkIHx8IChyLnNjcm9sbFRvcCA9IDApOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIEkodCkgewogICAgICAgIHJldHVybiBudWxsID09PSB0ID8gJzBweCcgOiAnbnVtYmVyJyA9PSB0eXBlb2YgdCA/ICh0IDwgMCA/ICcwcHgnIDogdCArICdweCcpIDogdC5tYXRjaCgvXGQkLykgPyB0ICsgJ3B4JyA6IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBVdCh0KSB7CiAgICAgICAgdmFyIGUgPSB0LmFvQ29sdW1uczsKICAgICAgICBmb3IgKHQuY29sZ3JvdXAuZW1wdHkoKSwgYSA9IDA7IGEgPCBlLmxlbmd0aDsgYSsrKSBlW2FdLmJWaXNpYmxlICYmIHQuY29sZ3JvdXAuYXBwZW5kKGVbYV0uY29sRWwpOwogICAgfQogICAgZnVuY3Rpb24gJHQobywgdCwgZSwgaSwgbCkgewogICAgICAgIGVlKHQsIGUsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBlID0gITEsCiAgICAgICAgICAgICAgICBuID0gdm9pZCAwID09PSBpID8gZHQodC50YXJnZXQpIDogW2ldOwogICAgICAgICAgICBpZiAobi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwLCByID0gbi5sZW5ndGg7IGEgPCByOyBhKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAoITEgIT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHQsIGUsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0Ll9pZHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobiA9IHZvaWQgMCA9PT0gbiA/IHMuaW5kZXhPZih0WzFdKSA6IG4pICsgMSA8IHMubGVuZ3RoID8gbiArIDEgOiBlID8gbnVsbCA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5hb0NvbHVtbnNbZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0LmFhU29ydGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGkuYXNTb3J0aW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaS5iU29ydGFibGUpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgbFswXSAmJiAobCA9IHQuYWFTb3J0aW5nID0gW2xdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSB8fCBuKSAmJiB0Lm9GZWF0dXJlcy5iU29ydE11bHRpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLTEgIT09IChpID0gbShsLCAnMCcpLmluZGV4T2YoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGwgPT09IChvID0gbnVsbCA9PT0gKG8gPSByKGxbaV0sICEwKSkgJiYgMSA9PT0gbC5sZW5ndGggPyAwIDogbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGwuc3BsaWNlKGksIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKGxbaV1bMV0gPSBzW29dKSwgKGxbaV0uX2lkeCA9IG8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoYSA/IGwucHVzaChbZSwgc1swXSwgMF0pIDogbC5wdXNoKFtlLCBsWzBdWzFdLCAwXSksIChsW2wubGVuZ3RoIC0gMV0uX2lkeCA9IDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGwubGVuZ3RoICYmIGxbMF1bMF0gPT0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgobyA9IHIobFswXSkpLCAobC5sZW5ndGggPSAxKSwgKGxbMF1bMV0gPSBzW29dKSwgKGxbMF0uX2lkeCA9IG8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgobC5sZW5ndGggPSAwKSwgbC5wdXNoKFtlLCBzWzBdXSksIChsWzBdLl9pZHggPSAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShvLCBuW2FdLCBhLCB0LnNoaWZ0S2V5KSAmJiAoZSA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgMSA9PT0gby5hYVNvcnRpbmcubGVuZ3RoICYmICcnID09PSBvLmFhU29ydGluZ1swXVsxXSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICAgIFZ0KG8sICEwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEp0KG8pLCB6dChvLCBvLmFpRGlzcGxheSksIGQobywgITEsICExKSwgbCAmJiBsKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIHp0KHQsIGUpIHsKICAgICAgICBpZiAoIShlLmxlbmd0aCA8IDIpKSB7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSB0LmFpRGlzcGxheU1hc3RlciwgYSA9IHt9LCByID0ge30sIG8gPSAwOyBvIDwgbi5sZW5ndGg7IG8rKykgYVtuW29dXSA9IG87CiAgICAgICAgICAgIGZvciAobyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSByW2Vbb11dID0gYVtlW29dXTsKICAgICAgICAgICAgZS5zb3J0KGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gclt0XSAtIHJbZV07CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIFl0KG4sIGEsIHQpIHsKICAgICAgICBmdW5jdGlvbiBlKHQpIHsKICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgIEguaXNQbGFpbk9iamVjdCh0KQogICAgICAgICAgICAgICAgPyB2b2lkIDAgIT09IHQuaWR4CiAgICAgICAgICAgICAgICAgICAgPyBhLnB1c2goW3QuaWR4LCB0LmRpcl0pCiAgICAgICAgICAgICAgICAgICAgOiB0Lm5hbWUgJiYgLTEgIT09IChlID0gbShuLmFvQ29sdW1ucywgJ3NOYW1lJykuaW5kZXhPZih0Lm5hbWUpKSAmJiBhLnB1c2goW2UsIHQuZGlyXSkKICAgICAgICAgICAgICAgIDogYS5wdXNoKHQpOwogICAgICAgIH0KICAgICAgICBpZiAoSC5pc1BsYWluT2JqZWN0KHQpKSBlKHQpOwogICAgICAgIGVsc2UgaWYgKHQubGVuZ3RoICYmICdudW1iZXInID09IHR5cGVvZiB0WzBdKSBlKHQpOwogICAgICAgIGVsc2UgaWYgKHQubGVuZ3RoKSBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIGUodFtyXSk7CiAgICB9CiAgICBmdW5jdGlvbiBHdCh0KSB7CiAgICAgICAgdmFyIGUsCiAgICAgICAgICAgIG4sCiAgICAgICAgICAgIGEsCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIGksCiAgICAgICAgICAgIGwsCiAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgdSA9IFYuZXh0LnR5cGUub3JkZXIsCiAgICAgICAgICAgIGMgPSB0LmFvQ29sdW1ucywKICAgICAgICAgICAgZCA9IHQuYWFTb3J0aW5nRml4ZWQsCiAgICAgICAgICAgIGYgPSBILmlzUGxhaW5PYmplY3QoZCksCiAgICAgICAgICAgIGggPSBbXTsKICAgICAgICBpZiAodC5vRmVhdHVyZXMuYlNvcnQpCiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGQpICYmIFl0KHQsIGgsIGQpLAogICAgICAgICAgICAgICAgICAgIGYgJiYgZC5wcmUgJiYgWXQodCwgaCwgZC5wcmUpLAogICAgICAgICAgICAgICAgICAgIFl0KHQsIGgsIHQuYWFTb3J0aW5nKSwKICAgICAgICAgICAgICAgICAgICBmICYmIGQucG9zdCAmJiBZdCh0LCBoLCBkLnBvc3QpLAogICAgICAgICAgICAgICAgICAgIGUgPSAwOwogICAgICAgICAgICAgICAgZSA8IGgubGVuZ3RoOwogICAgICAgICAgICAgICAgZSsrCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGlmIChjWyhsID0gaFtlXVswXSldKQogICAgICAgICAgICAgICAgICAgIGZvciAobiA9IDAsIGEgPSAociA9IGNbbF0uYURhdGFTb3J0KS5sZW5ndGg7IG4gPCBhOyBuKyspCiAgICAgICAgICAgICAgICAgICAgICAgIChpID0gY1sobyA9IHJbbl0pXS5zVHlwZSB8fCAnc3RyaW5nJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGhbZV0uX2lkeCAmJiAoaFtlXS5faWR4ID0gY1tvXS5hc1NvcnRpbmcuaW5kZXhPZihoW2VdWzFdKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW2VdWzFdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2w6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcjogaFtlXVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGhbZV0uX2lkeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB1W2kgKyAnLXByZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXI6IHVbaSArICctJyArIGhbZV1bMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIHJldHVybiBzOwogICAgfQogICAgZnVuY3Rpb24gSnQodCwgZSwgbikgewogICAgICAgIHZhciBhLAogICAgICAgICAgICByLAogICAgICAgICAgICBvLAogICAgICAgICAgICBpLAogICAgICAgICAgICBsLAogICAgICAgICAgICBjLAogICAgICAgICAgICBkID0gW10sCiAgICAgICAgICAgIHMgPSBWLmV4dC50eXBlLm9yZGVyLAogICAgICAgICAgICBmID0gdC5hb0RhdGEsCiAgICAgICAgICAgIHUgPSB0LmFpRGlzcGxheU1hc3RlcjsKICAgICAgICBmb3IgKAogICAgICAgICAgICB2b2lkIDAgIT09IGUKICAgICAgICAgICAgICAgID8gKChsID0gdC5hb0NvbHVtbnNbZV0pLAogICAgICAgICAgICAgICAgICAoYyA9IFt7IHNyYzogZSwgY29sOiBlLCBkaXI6IG4sIGluZGV4OiAwLCB0eXBlOiBsLnNUeXBlLCBmb3JtYXR0ZXI6IHNbbC5zVHlwZSArICctcHJlJ10sIHNvcnRlcjogc1tsLnNUeXBlICsgJy0nICsgbl0gfV0pLAogICAgICAgICAgICAgICAgICAodSA9IHUuc2xpY2UoKSkpCiAgICAgICAgICAgICAgICA6IChjID0gR3QodCkpLAogICAgICAgICAgICAgICAgYSA9IDAsCiAgICAgICAgICAgICAgICByID0gYy5sZW5ndGg7CiAgICAgICAgICAgIGEgPCByOwogICAgICAgICAgICBhKysKICAgICAgICApIHsKICAgICAgICAgICAgKGkgPSBjW2FdKSwgKFMgPSB4ID0gRCA9IGcgPSBwID0gaCA9IHkgPSBiID0gbSA9IHYgPSB2b2lkIDApOwogICAgICAgICAgICB2YXIgaCwKICAgICAgICAgICAgICAgIHAsCiAgICAgICAgICAgICAgICBnLAogICAgICAgICAgICAgICAgdiA9IHQsCiAgICAgICAgICAgICAgICBtID0gaS5jb2wsCiAgICAgICAgICAgICAgICBiID0gdi5hb0NvbHVtbnNbbV0sCiAgICAgICAgICAgICAgICB5ID0gVi5leHQub3JkZXJbYi5zU29ydERhdGFUeXBlXTsKICAgICAgICAgICAgeSAmJiAoaCA9IHkuY2FsbCh2Lm9JbnN0YW5jZSwgdiwgbSwgcnQodiwgbSkpKTsKICAgICAgICAgICAgZm9yICh2YXIgRCA9IFYuZXh0LnR5cGUub3JkZXJbYi5zVHlwZSArICctcHJlJ10sIHggPSB2LmFvRGF0YSwgUyA9IDA7IFMgPCB4Lmxlbmd0aDsgUysrKQogICAgICAgICAgICAgICAgeFtTXSAmJgogICAgICAgICAgICAgICAgICAgICgocCA9IHhbU10pLl9hU29ydERhdGEgfHwgKHAuX2FTb3J0RGF0YSA9IFtdKSwKICAgICAgICAgICAgICAgICAgICAocC5fYVNvcnREYXRhW21dICYmICF5KSB8fCAoKGcgPSB5ID8gaFtTXSA6IHEodiwgUywgbSwgJ3NvcnQnKSksIChwLl9hU29ydERhdGFbbV0gPSBEID8gRChnLCB2KSA6IGcpKSk7CiAgICAgICAgfQogICAgICAgIGlmICgnc3NwJyAhPSBKKHQpICYmIDAgIT09IGMubGVuZ3RoKSB7CiAgICAgICAgICAgIGZvciAoYSA9IDAsIG8gPSB1Lmxlbmd0aDsgYSA8IG87IGErKykgZFthXSA9IGE7CiAgICAgICAgICAgIGMubGVuZ3RoICYmICdkZXNjJyA9PT0gY1swXS5kaXIgJiYgdC5vcmRlckRlc2NSZXZlcnNlICYmIGQucmV2ZXJzZSgpLAogICAgICAgICAgICAgICAgdS5zb3J0KGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgYSwgciwgbywgaSA9IGMubGVuZ3RoLCBsID0gZlt0XS5fYVNvcnREYXRhLCBzID0gZltlXS5fYVNvcnREYXRhLCB1ID0gMDsgdSA8IGk7IHUrKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgobiA9IGxbKG8gPSBjW3VdKS5jb2xdKSwgKGEgPSBzW28uY29sXSksIG8uc29ydGVyKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IChyID0gby5zb3J0ZXIobiwgYSkpKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgwICE9PSAociA9IG4gPCBhID8gLTEgOiBhIDwgbiA/IDEgOiAwKSkgcmV0dXJuICdhc2MnID09PSBvLmRpciA/IHIgOiAtcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG4gPSBkW3RdKSA8IChhID0gZFtlXSkgPyAtMSA6IGEgPCBuID8gMSA6IDA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgMCA9PT0gYy5sZW5ndGggJiYKICAgICAgICAgICAgICAgIHUuc29ydChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0IDwgZSA/IC0xIDogZSA8IHQgPyAxIDogMDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgJiYgKCh0LmJTb3J0ZWQgPSAhMCksICh0LnNvcnREZXRhaWxzID0gYyksIEcodCwgbnVsbCwgJ29yZGVyJywgW3QsIGNdKSksIHU7CiAgICB9CiAgICBmdW5jdGlvbiBadCh0KSB7CiAgICAgICAgdmFyIGUsCiAgICAgICAgICAgIG4sCiAgICAgICAgICAgIGEsCiAgICAgICAgICAgIHIgPSB0LmFMYXN0U29ydCwKICAgICAgICAgICAgbyA9IHQub0NsYXNzZXMub3JkZXIucG9zaXRpb24sCiAgICAgICAgICAgIGkgPSBHdCh0KSwKICAgICAgICAgICAgbCA9IHQub0ZlYXR1cmVzOwogICAgICAgIGlmIChsLmJTb3J0ICYmIGwuYlNvcnRDbGFzc2VzKSB7CiAgICAgICAgICAgIGZvciAoZSA9IDAsIG4gPSByLmxlbmd0aDsgZSA8IG47IGUrKykgKGEgPSByW2VdLnNyYyksIEgobSh0LmFvRGF0YSwgJ2FuQ2VsbHMnLCBhKSkucmVtb3ZlQ2xhc3MobyArIChlIDwgMiA/IGUgKyAxIDogMykpOwogICAgICAgICAgICBmb3IgKGUgPSAwLCBuID0gaS5sZW5ndGg7IGUgPCBuOyBlKyspIChhID0gaVtlXS5zcmMpLCBIKG0odC5hb0RhdGEsICdhbkNlbGxzJywgYSkpLmFkZENsYXNzKG8gKyAoZSA8IDIgPyBlICsgMSA6IDMpKTsKICAgICAgICB9CiAgICAgICAgdC5hTGFzdFNvcnQgPSBpOwogICAgfQogICAgZnVuY3Rpb24gUXQobikgewogICAgICAgIHZhciB0OwogICAgICAgIG4uX2JMb2FkaW5nU3RhdGUgfHwKICAgICAgICAgICAgKCh0ID0gewogICAgICAgICAgICAgICAgdGltZTogK25ldyBEYXRlKCksCiAgICAgICAgICAgICAgICBzdGFydDogbi5faURpc3BsYXlTdGFydCwKICAgICAgICAgICAgICAgIGxlbmd0aDogbi5faURpc3BsYXlMZW5ndGgsCiAgICAgICAgICAgICAgICBvcmRlcjogSC5leHRlbmQoITAsIFtdLCBuLmFhU29ydGluZyksCiAgICAgICAgICAgICAgICBzZWFyY2g6IEguZXh0ZW5kKHt9LCBuLm9QcmV2aW91c1NlYXJjaCksCiAgICAgICAgICAgICAgICBjb2x1bW5zOiBuLmFvQ29sdW1ucy5tYXAoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2aXNpYmxlOiB0LmJWaXNpYmxlLCBzZWFyY2g6IEguZXh0ZW5kKHt9LCBuLmFvUHJlU2VhcmNoQ29sc1tlXSkgfTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKG4ub1NhdmVkU3RhdGUgPSB0KSwKICAgICAgICAgICAgRyhuLCAnYW9TdGF0ZVNhdmVQYXJhbXMnLCAnc3RhdGVTYXZlUGFyYW1zJywgW24sIHRdKSwKICAgICAgICAgICAgbi5vRmVhdHVyZXMuYlN0YXRlU2F2ZSAmJiAhbi5iRGVzdHJveWluZyAmJiBuLmZuU3RhdGVTYXZlQ2FsbGJhY2suY2FsbChuLm9JbnN0YW5jZSwgbiwgdCkpOwogICAgfQogICAgZnVuY3Rpb24gS3QobiwgdCwgZSkgewogICAgICAgIHZhciBhLAogICAgICAgICAgICByLAogICAgICAgICAgICBvID0gbi5hb0NvbHVtbnMsCiAgICAgICAgICAgIGkgPSAoKG4uX2JMb2FkaW5nU3RhdGUgPSAhMCksIG4uX2JJbml0Q29tcGxldGUgPyBuZXcgVi5BcGkobikgOiBudWxsKTsKICAgICAgICBpZiAodCAmJiB0LnRpbWUpIHsKICAgICAgICAgICAgdmFyIGwgPSBuLmlTdGF0ZUR1cmF0aW9uOwogICAgICAgICAgICBpZiAoMCA8IGwgJiYgdC50aW1lIDwgK25ldyBEYXRlKCkgLSAxZTMgKiBsKSBuLl9iTG9hZGluZ1N0YXRlID0gITE7CiAgICAgICAgICAgIGVsc2UgaWYgKC0xICE9PSBHKG4sICdhb1N0YXRlTG9hZFBhcmFtcycsICdzdGF0ZUxvYWRQYXJhbXMnLCBbbiwgdF0pLmluZGV4T2YoITEpKSBuLl9iTG9hZGluZ1N0YXRlID0gITE7CiAgICAgICAgICAgIGVsc2UgaWYgKHQuY29sdW1ucyAmJiBvLmxlbmd0aCAhPT0gdC5jb2x1bW5zLmxlbmd0aCkgbi5fYkxvYWRpbmdTdGF0ZSA9ICExOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAoKG4ub0xvYWRlZFN0YXRlID0gSC5leHRlbmQoITAsIHt9LCB0KSksCiAgICAgICAgICAgICAgICAgICAgRyhuLCBudWxsLCAnc3RhdGVMb2FkSW5pdCcsIFtuLCB0XSwgITApLAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdC5sZW5ndGggJiYgKGkgPyBpLnBhZ2UubGVuKHQubGVuZ3RoKSA6IChuLl9pRGlzcGxheUxlbmd0aCA9IHQubGVuZ3RoKSksCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0LnN0YXJ0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChudWxsID09PSBpID8gKChuLl9pRGlzcGxheVN0YXJ0ID0gdC5zdGFydCksIChuLmlJbml0RGlzcGxheVN0YXJ0ID0gdC5zdGFydCkpIDogWHQobiwgdC5zdGFydCAvIG4uX2lEaXNwbGF5TGVuZ3RoKSksCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0Lm9yZGVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgobi5hYVNvcnRpbmcgPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgIEguZWFjaCh0Lm9yZGVyLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5hYVNvcnRpbmcucHVzaChlWzBdID49IG8ubGVuZ3RoID8gWzAsIGVbMV1dIDogZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQuc2VhcmNoICYmIEguZXh0ZW5kKG4ub1ByZXZpb3VzU2VhcmNoLCB0LnNlYXJjaCksCiAgICAgICAgICAgICAgICAgICAgdC5jb2x1bW5zKQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChhID0gMCwgciA9IHQuY29sdW1ucy5sZW5ndGg7IGEgPCByOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0LmNvbHVtbnNbYV07CiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gcy52aXNpYmxlICYmIChpID8gaS5jb2x1bW4oYSkudmlzaWJsZShzLnZpc2libGUsICExKSA6IChvW2FdLmJWaXNpYmxlID0gcy52aXNpYmxlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHMuc2VhcmNoICYmIEguZXh0ZW5kKG4uYW9QcmVTZWFyY2hDb2xzW2FdLCBzLnNlYXJjaCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGkgJiYgaS5jb2x1bW5zLmFkanVzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKG4uX2JMb2FkaW5nU3RhdGUgPSAhMSksIEcobiwgJ2FvU3RhdGVMb2FkZWQnLCAnc3RhdGVMb2FkZWQnLCBbbiwgdF0pOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIG4uX2JMb2FkaW5nU3RhdGUgPSAhMTsKICAgICAgICBlKCk7CiAgICB9CiAgICBmdW5jdGlvbiAkKHQsIGUsIG4sIGEpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAgICgobiA9ICdEYXRhVGFibGVzIHdhcm5pbmc6ICcgKyAodCA/ICd0YWJsZSBpZD0nICsgdC5zVGFibGVJZCArICcgLSAnIDogJycpICsgbiksCiAgICAgICAgICAgIGEgJiYgKG4gKz0gJy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBlcnJvciwgcGxlYXNlIHNlZSBodHRwczovL2RhdGF0YWJsZXMubmV0L3RuLycgKyBhKSwKICAgICAgICAgICAgZSkKICAgICAgICApCiAgICAgICAgICAgIFcuY29uc29sZSAmJiBjb25zb2xlLmxvZyAmJiBjb25zb2xlLmxvZyhuKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgKGUgPSBWLmV4dCksIChlID0gZS5zRXJyTW9kZSB8fCBlLmVyck1vZGUpOwogICAgICAgICAgICBpZiAoKHQgJiYgRyh0LCBudWxsLCAnZHQtZXJyb3InLCBbdCwgYSwgbl0sICEwKSwgJ2FsZXJ0JyA9PSBlKSkgYWxlcnQobik7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKCd0aHJvdycgPT0gZSkgdGhyb3cgbmV3IEVycm9yKG4pOwogICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZSAmJiBlKHQsIGEsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24geihuLCBhLCB0LCBlKSB7CiAgICAgICAgQXJyYXkuaXNBcnJheSh0KQogICAgICAgICAgICA/IEguZWFjaCh0LCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGUpID8geihuLCBhLCBlWzBdLCBlWzFdKSA6IHoobiwgYSwgZSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgOiAodm9pZCAwID09PSBlICYmIChlID0gdCksIHZvaWQgMCAhPT0gYVt0XSAmJiAobltlXSA9IGFbdF0pKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRlKHQsIGUsIG4pIHsKICAgICAgICB2YXIgYSwgcjsKICAgICAgICBmb3IgKHIgaW4gZSkKICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHIpICYmCiAgICAgICAgICAgICAgICAoKGEgPSBlW3JdKSwKICAgICAgICAgICAgICAgIEguaXNQbGFpbk9iamVjdChhKQogICAgICAgICAgICAgICAgICAgID8gKEguaXNQbGFpbk9iamVjdCh0W3JdKSB8fCAodFtyXSA9IHt9KSwgSC5leHRlbmQoITAsIHRbcl0sIGEpKQogICAgICAgICAgICAgICAgICAgIDogbiAmJiAnZGF0YScgIT09IHIgJiYgJ2FhRGF0YScgIT09IHIgJiYgQXJyYXkuaXNBcnJheShhKQogICAgICAgICAgICAgICAgICAgID8gKHRbcl0gPSBhLnNsaWNlKCkpCiAgICAgICAgICAgICAgICAgICAgOiAodFtyXSA9IGEpKTsKICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIGZ1bmN0aW9uIGVlKHQsIGUsIG4pIHsKICAgICAgICBIKHQpCiAgICAgICAgICAgIC5vbignY2xpY2suRFQnLCBlLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgbih0KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLm9uKCdrZXlwcmVzcy5EVCcsIGUsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAxMyA9PT0gdC53aGljaCAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCBuKHQpKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLm9uKCdzZWxlY3RzdGFydC5EVCcsIGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBZKHQsIGUsIG4pIHsKICAgICAgICBuICYmIHRbZV0ucHVzaChuKTsKICAgIH0KICAgIGZ1bmN0aW9uIEcoZSwgdCwgbiwgYSwgcikgewogICAgICAgIHZhciBvID0gW107CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdCAmJgogICAgICAgICAgICAgICAgKG8gPSBlW3RdCiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKCkKICAgICAgICAgICAgICAgICAgICAucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseShlLm9JbnN0YW5jZSwgYSk7CiAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICBudWxsICE9PSBuICYmCiAgICAgICAgICAgICAgICAoKHQgPSBILkV2ZW50KG4gKyAnLmR0JykpLAogICAgICAgICAgICAgICAgKG4gPSBIKGUublRhYmxlKSksCiAgICAgICAgICAgICAgICAodC5kdCA9IGUuYXBpKSwKICAgICAgICAgICAgICAgIG5bciA/ICd0cmlnZ2VyJyA6ICd0cmlnZ2VySGFuZGxlciddKHQsIGEpLAogICAgICAgICAgICAgICAgciAmJiAwID09PSBuLnBhcmVudHMoJ2JvZHknKS5sZW5ndGggJiYgSCgnYm9keScpLnRyaWdnZXIodCwgYSksCiAgICAgICAgICAgICAgICBvLnB1c2godC5yZXN1bHQpKSwKICAgICAgICAgICAgbwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBuZSh0KSB7CiAgICAgICAgdmFyIGUgPSB0Ll9pRGlzcGxheVN0YXJ0LAogICAgICAgICAgICBuID0gdC5mbkRpc3BsYXlFbmQoKSwKICAgICAgICAgICAgYSA9IHQuX2lEaXNwbGF5TGVuZ3RoOwogICAgICAgIG4gPD0gZSAmJiAoZSA9IG4gLSBhKSwgKGUgLT0gZSAlIGEpLCAodC5faURpc3BsYXlTdGFydCA9IGUgPSAtMSA9PT0gYSB8fCBlIDwgMCA/IDAgOiBlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGFlKHQsIGUpIHsKICAgICAgICB2YXIgdCA9IHQucmVuZGVyZXIsCiAgICAgICAgICAgIG4gPSBWLmV4dC5yZW5kZXJlcltlXTsKICAgICAgICByZXR1cm4gSC5pc1BsYWluT2JqZWN0KHQpICYmIHRbZV0gPyBuW3RbZV1dIHx8IG4uXyA6ICgnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiBuW3RdKSB8fCBuLl87CiAgICB9CiAgICBmdW5jdGlvbiBKKHQpIHsKICAgICAgICByZXR1cm4gdC5vRmVhdHVyZXMuYlNlcnZlclNpZGUgPyAnc3NwJyA6IHQuYWpheCA/ICdhamF4JyA6ICdkb20nOwogICAgfQogICAgZnVuY3Rpb24gcmUodCwgZSwgbikgewogICAgICAgIHZhciBhID0gdC5mbkZvcm1hdE51bWJlciwKICAgICAgICAgICAgciA9IHQuX2lEaXNwbGF5U3RhcnQgKyAxLAogICAgICAgICAgICBvID0gdC5faURpc3BsYXlMZW5ndGgsCiAgICAgICAgICAgIGkgPSB0LmZuUmVjb3Jkc0Rpc3BsYXkoKSwKICAgICAgICAgICAgbCA9IHQuZm5SZWNvcmRzVG90YWwoKSwKICAgICAgICAgICAgcyA9IC0xID09PSBvOwogICAgICAgIHJldHVybiBlCiAgICAgICAgICAgIC5yZXBsYWNlKC9fU1RBUlRfL2csIGEuY2FsbCh0LCByKSkKICAgICAgICAgICAgLnJlcGxhY2UoL19FTkRfL2csIGEuY2FsbCh0LCB0LmZuRGlzcGxheUVuZCgpKSkKICAgICAgICAgICAgLnJlcGxhY2UoL19NQVhfL2csIGEuY2FsbCh0LCBsKSkKICAgICAgICAgICAgLnJlcGxhY2UoL19UT1RBTF8vZywgYS5jYWxsKHQsIGkpKQogICAgICAgICAgICAucmVwbGFjZSgvX1BBR0VfL2csIGEuY2FsbCh0LCBzID8gMSA6IE1hdGguY2VpbChyIC8gbykpKQogICAgICAgICAgICAucmVwbGFjZSgvX1BBR0VTXy9nLCBhLmNhbGwodCwgcyA/IDEgOiBNYXRoLmNlaWwoaSAvIG8pKSkKICAgICAgICAgICAgLnJlcGxhY2UoL19FTlRSSUVTXy9nLCB0LmFwaS5pMThuKCdlbnRyaWVzJywgJycsIG4pKQogICAgICAgICAgICAucmVwbGFjZSgvX0VOVFJJRVMtTUFYXy9nLCB0LmFwaS5pMThuKCdlbnRyaWVzJywgJycsIGwpKQogICAgICAgICAgICAucmVwbGFjZSgvX0VOVFJJRVMtVE9UQUxfL2csIHQuYXBpLmkxOG4oJ2VudHJpZXMnLCAnJywgaSkpOwogICAgfQogICAgdmFyIG9lID0gW10sCiAgICAgICAgbiA9IEFycmF5LnByb3RvdHlwZTsKICAgIChYID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgWCkpIHJldHVybiBuZXcgWCh0LCBlKTsKICAgICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICAgICAgKHQgPSB0KSwgKGUgPSBWLnNldHRpbmdzKSwgKGEgPSBtKGUsICduVGFibGUnKSk7CiAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIGEsCiAgICAgICAgICAgICAgICByID0gdAogICAgICAgICAgICAgICAgICAgID8gdC5uVGFibGUgJiYgdC5vRmVhdHVyZXMKICAgICAgICAgICAgICAgICAgICAgICAgPyBbdF0KICAgICAgICAgICAgICAgICAgICAgICAgOiB0Lm5vZGVOYW1lICYmICd0YWJsZScgPT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICA/IC0xICE9PSAociA9IGEuaW5kZXhPZih0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW2Vbcl1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgOiB0ICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIHQuc2V0dGluZ3MKICAgICAgICAgICAgICAgICAgICAgICAgPyB0LnNldHRpbmdzKCkudG9BcnJheSgpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKCdzdHJpbmcnID09IHR5cGVvZiB0ID8gKG4gPSBIKHQpLmdldCgpKSA6IHQgaW5zdGFuY2VvZiBIICYmIChuID0gdC5nZXQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUuZmlsdGVyKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmluY2x1ZGVzKGFbZV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdm9pZCAwKQogICAgICAgICAgICAgICAgICAgIDogW107CiAgICAgICAgICAgIHIgJiYgby5wdXNoLmFwcGx5KG8sIHIpOwogICAgICAgIH0KICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbyA9IFtdOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKSBmb3IgKGEgPSAwOyBhIDwgdC5sZW5ndGg7IGErKykgbih0W2FdKTsKICAgICAgICBlbHNlIG4odCk7CiAgICAgICAgaWYgKCgodGhpcy5jb250ZXh0ID0gMSA8IG8ubGVuZ3RoID8geChvKSA6IG8pLCBlKSkKICAgICAgICAgICAgaWYgKGUubGVuZ3RoIDwgMWU0KSB0aGlzLnB1c2guYXBwbHkodGhpcywgZSk7CiAgICAgICAgICAgIGVsc2UgZm9yIChhID0gMDsgYSA8IGUubGVuZ3RoOyBhKyspIHRoaXMucHVzaChlW2FdKTsKICAgICAgICAodGhpcy5zZWxlY3RvciA9IHsgcm93czogbnVsbCwgY29sczogbnVsbCwgb3B0czogbnVsbCB9KSwgWC5leHRlbmQodGhpcywgdGhpcywgb2UpOwogICAgfSksCiAgICAgICAgKFYuQXBpID0gWCksCiAgICAgICAgSC5leHRlbmQoWC5wcm90b3R5cGUsIHsKICAgICAgICAgICAgYW55OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMCAhPT0gdGhpcy5jb3VudCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb250ZXh0OiBbXSwKICAgICAgICAgICAgY291bnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKS5sZW5ndGg7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVhY2g6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgbiA9IHRoaXMubGVuZ3RoOyBlIDwgbjsgZSsrKSB0LmNhbGwodGhpcywgdGhpc1tlXSwgZSwgdGhpcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXE6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA+IHQgPyBuZXcgWChlW3RdLCB0aGlzW3RdKSA6IG51bGw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbHRlcjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQgPSBuLmZpbHRlci5jYWxsKHRoaXMsIHQsIHRoaXMpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBYKHRoaXMuY29udGV4dCwgdCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZsYXR0ZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gW107CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LCB0LmNvbmNhdC5hcHBseSh0LCB0aGlzLnRvQXJyYXkoKSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1t0XTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgam9pbjogbi5qb2luLAogICAgICAgICAgICBpbmNsdWRlczogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMSAhPT0gdGhpcy5pbmRleE9mKHQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbmRleE9mOiBuLmluZGV4T2YsCiAgICAgICAgICAgIGl0ZXJhdG9yOiBmdW5jdGlvbiAodCwgZSwgbiwgYSkgewogICAgICAgICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgIGwsCiAgICAgICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgICAgICB1LAogICAgICAgICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgICAgICBmID0gW10sCiAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMuY29udGV4dCwKICAgICAgICAgICAgICAgICAgICBwID0gdGhpcy5zZWxlY3RvcjsKICAgICAgICAgICAgICAgIGZvciAoJ3N0cmluZycgPT0gdHlwZW9mIHQgJiYgKChhID0gbiksIChuID0gZSksIChlID0gdCksICh0ID0gITEpKSwgbyA9IDAsIGkgPSBoLmxlbmd0aDsgbyA8IGk7IG8rKykgewogICAgICAgICAgICAgICAgICAgIHZhciBnID0gbmV3IFgoaFtvXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCd0YWJsZScgPT09IGUpIHZvaWQgMCAhPT0gKHIgPSBuLmNhbGwoZywgaFtvXSwgbykpICYmIGYucHVzaChyKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnY29sdW1ucycgPT09IGUgfHwgJ3Jvd3MnID09PSBlKSB2b2lkIDAgIT09IChyID0gbi5jYWxsKGcsIGhbb10sIHRoaXNbb10sIG8pKSAmJiBmLnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2V2ZXJ5JyA9PT0gZSB8fCAnY29sdW1uJyA9PT0gZSB8fCAnY29sdW1uLXJvd3MnID09PSBlIHx8ICdyb3cnID09PSBlIHx8ICdjZWxsJyA9PT0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjID0gdGhpc1tvXSwgJ2NvbHVtbi1yb3dzJyA9PT0gZSAmJiAodSA9IHZlKGhbb10sIHAub3B0cykpLCBsID0gMCwgcyA9IGMubGVuZ3RoOyBsIDwgczsgbCsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQgPSBjW2xdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IChyID0gJ2NlbGwnID09PSBlID8gbi5jYWxsKGcsIGhbb10sIGQucm93LCBkLmNvbHVtbiwgbywgbCkgOiBuLmNhbGwoZywgaFtvXSwgZCwgbywgbCwgdSkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmLmxlbmd0aCB8fCBhCiAgICAgICAgICAgICAgICAgICAgPyAoKCh0ID0gKGEgPSBuZXcgWChoLCB0ID8gZi5jb25jYXQuYXBwbHkoW10sIGYpIDogZikpLnNlbGVjdG9yKS5yb3dzID0gcC5yb3dzKSwKICAgICAgICAgICAgICAgICAgICAgICh0LmNvbHMgPSBwLmNvbHMpLAogICAgICAgICAgICAgICAgICAgICAgKHQub3B0cyA9IHAub3B0cyksCiAgICAgICAgICAgICAgICAgICAgICBhKQogICAgICAgICAgICAgICAgICAgIDogdGhpczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGFzdEluZGV4T2Y6IG4ubGFzdEluZGV4T2YsCiAgICAgICAgICAgIGxlbmd0aDogMCwKICAgICAgICAgICAgbWFwOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdCA9IG4ubWFwLmNhbGwodGhpcywgdCwgdGhpcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LCB0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGx1Y2s6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFYudXRpbC5nZXQodCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBwb3A6IG4ucG9wLAogICAgICAgICAgICBwdXNoOiBuLnB1c2gsCiAgICAgICAgICAgIHJlZHVjZTogbi5yZWR1Y2UsCiAgICAgICAgICAgIHJlZHVjZVJpZ2h0OiBuLnJlZHVjZVJpZ2h0LAogICAgICAgICAgICByZXZlcnNlOiBuLnJldmVyc2UsCiAgICAgICAgICAgIHNlbGVjdG9yOiBudWxsLAogICAgICAgICAgICBzaGlmdDogbi5zaGlmdCwKICAgICAgICAgICAgc2xpY2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWCh0aGlzLmNvbnRleHQsIHRoaXMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzb3J0OiBuLnNvcnQsCiAgICAgICAgICAgIHNwbGljZTogbi5zcGxpY2UsCiAgICAgICAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuLnNsaWNlLmNhbGwodGhpcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvJDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEgodGhpcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvSlF1ZXJ5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gSCh0aGlzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdW5pcXVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFgodGhpcy5jb250ZXh0LCB4KHRoaXMudG9BcnJheSgpKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVuc2hpZnQ6IG4udW5zaGlmdCwKICAgICAgICB9KSwKICAgICAgICAoVy5fX2FwaVN0cnVjdCA9IG9lKSwKICAgICAgICAoWC5leHRlbmQgPSBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICBpZiAobi5sZW5ndGggJiYgZSAmJiAoZSBpbnN0YW5jZW9mIFggfHwgZS5fX2R0X3dyYXBwZXIpKQogICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgciA9IDAsIG8gPSBuLmxlbmd0aDsgciA8IG87IHIrKykKICAgICAgICAgICAgICAgICAgICAnX19wcm90b19fJyAhPT0gKGEgPSBuW3JdKS5uYW1lICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoZVthLm5hbWVdID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmdW5jdGlvbicgPT09IGEudHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGZ1bmN0aW9uIChlLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuLmFwcGx5KGUgfHwgdGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFguZXh0ZW5kKHQsIHQsIGEubWV0aG9kRXh0KSwgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkodCwgYS52YWwsIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnb2JqZWN0JyA9PT0gYS50eXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYS52YWwpLAogICAgICAgICAgICAgICAgICAgICAgICAoZVthLm5hbWVdLl9fZHRfd3JhcHBlciA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgWC5leHRlbmQodCwgZVthLm5hbWVdLCBhLnByb3BFeHQpKTsKICAgICAgICB9KSwKICAgICAgICAoWC5yZWdpc3RlciA9IGUgPQogICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIGZvciAodmFyIG4gPSAwLCBhID0gdC5sZW5ndGg7IG4gPCBhOyBuKyspIFgucmVnaXN0ZXIodFtuXSwgZSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IHQuc3BsaXQoJy4nKSwgbyA9IG9lLCBpID0gMCwgbCA9IHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgYSA9IHQubGVuZ3RoOyBuIDwgYTsgbisrKSBpZiAodFtuXS5uYW1lID09PSBlKSByZXR1cm4gdFtuXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKG8sICh1ID0gKHMgPSAtMSAhPT0gcltpXS5pbmRleE9mKCcoKScpKSA/IHJbaV0ucmVwbGFjZSgnKCknLCAnJykgOiByW2ldKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgby5wdXNoKChjID0geyBuYW1lOiB1LCB2YWw6IHt9LCBtZXRob2RFeHQ6IFtdLCBwcm9wRXh0OiBbXSwgdHlwZTogJ29iamVjdCcgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9PT0gbCAtIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoYy52YWwgPSBlKSwgKGMudHlwZSA9ICdmdW5jdGlvbicgPT0gdHlwZW9mIGUgPyAnZnVuY3Rpb24nIDogSC5pc1BsYWluT2JqZWN0KGUpID8gJ29iamVjdCcgOiAnb3RoZXInKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChvID0gcyA/IGMubWV0aG9kRXh0IDogYy5wcm9wRXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgIChYLnJlZ2lzdGVyUGx1cmFsID0gdCA9CiAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICBYLnJlZ2lzdGVyKHQsIG4pLAogICAgICAgICAgICAgICAgICAgIFgucmVnaXN0ZXIoZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0IGluc3RhbmNlb2YgWAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0Lmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQXJyYXkuaXNBcnJheSh0WzBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBYKHQuY29udGV4dCwgdFswXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0WzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICBmdW5jdGlvbiBpZSh0LCBlKSB7CiAgICAgICAgdmFyIG4sIGE7CiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodCkKICAgICAgICAgICAgPyAoKG4gPSBbXSksCiAgICAgICAgICAgICAgdC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgIHQgPSBpZSh0LCBlKTsKICAgICAgICAgICAgICAgICAgbi5wdXNoLmFwcGx5KG4sIHQpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG4uZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgIH0pKQogICAgICAgICAgICA6ICdudW1iZXInID09IHR5cGVvZiB0CiAgICAgICAgICAgID8gW2VbdF1dCiAgICAgICAgICAgIDogKChhID0gZS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHQublRhYmxlOwogICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICBIKGEpCiAgICAgICAgICAgICAgICAgIC5maWx0ZXIodCkKICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGEuaW5kZXhPZih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3RdOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAudG9BcnJheSgpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGxlKHIsIG8sIHQpIHsKICAgICAgICB2YXIgZSwgbjsKICAgICAgICB0ICYmCiAgICAgICAgICAgIChlID0gbmV3IFgocikpLm9uZSgnZHJhdycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHQoZS5hamF4Lmpzb24oKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAnc3NwJyA9PSBKKHIpCiAgICAgICAgICAgICAgICA/IGQociwgbykKICAgICAgICAgICAgICAgIDogKHcociwgITApLAogICAgICAgICAgICAgICAgICAobiA9IHIuanFYSFIpICYmIDQgIT09IG4ucmVhZHlTdGF0ZSAmJiBuLmFib3J0KCksCiAgICAgICAgICAgICAgICAgIEZ0KHIsIHt9LCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgbXQocik7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gTnQociwgdCksIG4gPSAwLCBhID0gZS5sZW5ndGg7IG4gPCBhOyBuKyspIEQociwgZVtuXSk7CiAgICAgICAgICAgICAgICAgICAgICBkKHIsIG8pLCBIdChyKSwgdyhyLCAhMSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNlKHQsIGUsIG4sIGEsIHIpIHsKICAgICAgICBmb3IgKAogICAgICAgICAgICB2YXIgbywKICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICBsLAogICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgIHUgPSBbXSwKICAgICAgICAgICAgICAgIGMgPSB0eXBlb2YgZSwKICAgICAgICAgICAgICAgIGQgPSAwLAogICAgICAgICAgICAgICAgZiA9IChlID0gZSAmJiAnc3RyaW5nJyAhPSBjICYmICdmdW5jdGlvbicgIT0gYyAmJiB2b2lkIDAgIT09IGUubGVuZ3RoID8gZSA6IFtlXSkubGVuZ3RoOwogICAgICAgICAgICBkIDwgZjsKICAgICAgICAgICAgZCsrCiAgICAgICAgKQogICAgICAgICAgICBmb3IgKGwgPSAwLCBzID0gKGkgPSBlW2RdICYmIGVbZF0uc3BsaXQgJiYgIWVbZF0ubWF0Y2goL1tbKDpdLykgPyBlW2RdLnNwbGl0KCcsJykgOiBbZVtkXV0pLmxlbmd0aDsgbCA8IHM7IGwrKykKICAgICAgICAgICAgICAgIChvID0gKG8gPSBuKCdzdHJpbmcnID09IHR5cGVvZiBpW2xdID8gaVtsXS50cmltKCkgOiBpW2xdKSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdDsKICAgICAgICAgICAgICAgIH0pKSAmJgogICAgICAgICAgICAgICAgICAgIG8ubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgKHUgPSB1LmNvbmNhdChvKSk7CiAgICAgICAgdmFyIGggPSBDLnNlbGVjdG9yW3RdOwogICAgICAgIGlmIChoLmxlbmd0aCkgZm9yIChkID0gMCwgZiA9IGgubGVuZ3RoOyBkIDwgZjsgZCsrKSB1ID0gaFtkXShhLCByLCB1KTsKICAgICAgICByZXR1cm4geCh1KTsKICAgIH0KICAgIGZ1bmN0aW9uIHVlKHQpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAodCA9IHQgfHwge30pLmZpbHRlciAmJiB2b2lkIDAgPT09IHQuc2VhcmNoICYmICh0LnNlYXJjaCA9IHQuZmlsdGVyKSwKICAgICAgICAgICAgSC5leHRlbmQoeyBzZWFyY2g6ICdub25lJywgb3JkZXI6ICdjdXJyZW50JywgcGFnZTogJ2FsbCcgfSwgdCkKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gY2UodCkgewogICAgICAgIHZhciBlID0gbmV3IFgodC5jb250ZXh0WzBdKTsKICAgICAgICByZXR1cm4gdC5sZW5ndGggJiYgZS5wdXNoKHRbMF0pLCAoZS5zZWxlY3RvciA9IHQuc2VsZWN0b3IpLCBlLmxlbmd0aCAmJiAxIDwgZVswXS5sZW5ndGggJiYgZVswXS5zcGxpY2UoMSksIGU7CiAgICB9CiAgICBlKCd0YWJsZXMoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIG51bGwgIT0gdCA/IG5ldyBYKGllKHQsIHRoaXMuY29udGV4dCkpIDogdGhpczsKICAgIH0pLAogICAgICAgIGUoJ3RhYmxlKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMudGFibGVzKHQpLAogICAgICAgICAgICAgICAgZSA9IHQuY29udGV4dDsKICAgICAgICAgICAgcmV0dXJuIGUubGVuZ3RoID8gbmV3IFgoZVswXSkgOiB0OwogICAgICAgIH0pLAogICAgICAgIFsKICAgICAgICAgICAgWydub2RlcycsICdub2RlJywgJ25UYWJsZSddLAogICAgICAgICAgICBbJ2JvZHknLCAnYm9keScsICduVEJvZHknXSwKICAgICAgICAgICAgWydoZWFkZXInLCAnaGVhZGVyJywgJ25USGVhZCddLAogICAgICAgICAgICBbJ2Zvb3RlcicsICdmb290ZXInLCAnblRGb290J10sCiAgICAgICAgXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHQoJ3RhYmxlcygpLicgKyBlWzBdICsgJygpJywgJ3RhYmxlKCkuJyArIGVbMV0gKyAnKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAndGFibGUnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0W2VbMl1dOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIFsKICAgICAgICAgICAgWydoZWFkZXInLCAnYW9IZWFkZXInXSwKICAgICAgICAgICAgWydmb290ZXInLCAnYW9Gb290ZXInXSwKICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgZSgndGFibGUoKS4nICsgblswXSArICcuc3RydWN0dXJlKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmNvbHVtbnModCkuaW5kZXhlcygpLmZsYXR0ZW4oKSwKICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICAgICAgcmV0dXJuIFR0KGUsIGVbblsxXV0sIHQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICB0KCd0YWJsZXMoKS5jb250YWluZXJzKCknLCAndGFibGUoKS5jb250YWluZXIoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAndGFibGUnLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5uVGFibGVXcmFwcGVyOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZSgndGFibGVzKCkuZXZlcnkoKScsIGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHZhciBhID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIG4uY2FsbChhLnRhYmxlKGUpLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZSgnY2FwdGlvbigpJywgZnVuY3Rpb24gKHIsIG8pIHsKICAgICAgICAgICAgdmFyIHQsCiAgICAgICAgICAgICAgICBlID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSByCiAgICAgICAgICAgICAgICA/ICh0ID0gZVswXS5jYXB0aW9uTm9kZSkgJiYgZS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICA/IHQuaW5uZXJIVE1MCiAgICAgICAgICAgICAgICAgICAgOiBudWxsCiAgICAgICAgICAgICAgICA6IHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgICAndGFibGUnLAogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IEgodC5uVGFibGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gSCh0LmNhcHRpb25Ob2RlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IEgodC5uVGFibGVXcmFwcGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBuLmxlbmd0aCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKG4gPSBIKCc8Y2FwdGlvbi8+JykuaHRtbChyKSksICh0LmNhcHRpb25Ob2RlID0gblswXSksIG8pIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnByZXBlbmQobiksIChvID0gbi5jc3MoJ2NhcHRpb24tc2lkZScpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaHRtbChyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyAmJiAobi5jc3MoJ2NhcHRpb24tc2lkZScsIG8pLCAoblswXS5fY2FwdGlvblNpZGUgPSBvKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhLmZpbmQoJ2Rpdi5kYXRhVGFibGVzX3Njcm9sbCcpLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHQgPSAndG9wJyA9PT0gbyA/ICdIZWFkJyA6ICdGb290JyksIGEuZmluZCgnZGl2LmRhdGFUYWJsZXNfc2Nyb2xsJyArIHQgKyAnIHRhYmxlJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5wcmVwZW5kKG4pOwogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZSgnY2FwdGlvbi5ub2RlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICByZXR1cm4gdC5sZW5ndGggPyB0WzBdLmNhcHRpb25Ob2RlIDogbnVsbDsKICAgICAgICB9KSwKICAgICAgICBlKCdkcmF3KCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgJ3BhZ2UnID09PSBlID8gUyh0KSA6IGQodCwgITEgPT09IChlID0gJ3N0cmluZycgPT0gdHlwZW9mIGUgPyAnZnVsbC1ob2xkJyAhPT0gZSA6IGUpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZSgncGFnZSgpJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZQogICAgICAgICAgICAgICAgPyB0aGlzLnBhZ2UuaW5mbygpLnBhZ2UKICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgWHQodCwgZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUoJ3BhZ2UuaW5mbygpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCwgZSwgbiwgYSwgcjsKICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29udGV4dC5sZW5ndGgpCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIChlID0gKHQgPSB0aGlzLmNvbnRleHRbMF0pLl9pRGlzcGxheVN0YXJ0KSwKICAgICAgICAgICAgICAgICAgICAobiA9IHQub0ZlYXR1cmVzLmJQYWdpbmF0ZSA/IHQuX2lEaXNwbGF5TGVuZ3RoIDogLTEpLAogICAgICAgICAgICAgICAgICAgIChhID0gdC5mblJlY29yZHNEaXNwbGF5KCkpLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogKHIgPSAtMSA9PT0gbikgPyAwIDogTWF0aC5mbG9vcihlIC8gbiksCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VzOiByID8gMSA6IE1hdGguY2VpbChhIC8gbiksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBlLAogICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHQuZm5EaXNwbGF5RW5kKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc1RvdGFsOiB0LmZuUmVjb3Jkc1RvdGFsKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNEaXNwbGF5OiBhLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJTaWRlOiAnc3NwJyA9PT0gSih0KSwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIGUoJ3BhZ2UubGVuKCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlCiAgICAgICAgICAgICAgICA/IDAgIT09IHRoaXMuY29udGV4dC5sZW5ndGgKICAgICAgICAgICAgICAgICAgICA/IHRoaXMuY29udGV4dFswXS5faURpc3BsYXlMZW5ndGgKICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMAogICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBXdCh0LCBlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZSgnYWpheC5qc29uKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICBpZiAoMCA8IHQubGVuZ3RoKSByZXR1cm4gdFswXS5qc29uOwogICAgICAgIH0pLAogICAgICAgIGUoJ2FqYXgucGFyYW1zKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICBpZiAoMCA8IHQubGVuZ3RoKSByZXR1cm4gdFswXS5vQWpheERhdGE7CiAgICAgICAgfSksCiAgICAgICAgZSgnYWpheC5yZWxvYWQoKScsIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICBsZSh0LCAhMSA9PT0gbiwgZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUoJ2FqYXgudXJsKCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZQogICAgICAgICAgICAgICAgPyAwID09PSB0Lmxlbmd0aAogICAgICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgOiAoKHQgPSB0WzBdKSwgSC5pc1BsYWluT2JqZWN0KHQuYWpheCkgPyB0LmFqYXgudXJsIDogdC5hamF4KQogICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBILmlzUGxhaW5PYmplY3QodC5hamF4KSA/ICh0LmFqYXgudXJsID0gZSkgOiAodC5hamF4ID0gZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUoJ2FqYXgudXJsKCkubG9hZCgpJywgZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIGxlKHQsICExID09PSBuLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICBmdW5jdGlvbiBkZShvLCBpLCB0LCBlKSB7CiAgICAgICAgZnVuY3Rpb24gbCh0LCBlKSB7CiAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0KSB8fCB0IGluc3RhbmNlb2YgSCkgZm9yICh2YXIgYSA9IDAsIHIgPSB0Lmxlbmd0aDsgYSA8IHI7IGErKykgbCh0W2FdLCBlKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdC5ub2RlTmFtZSAmJiAndHInID09PSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICA/ICh0LnNldEF0dHJpYnV0ZSgnZGF0YS1kdC1yb3cnLCBpLmlkeCksIHMucHVzaCh0KSkKICAgICAgICAgICAgICAgICAgICA6ICgobiA9IEgoJzx0cj48dGQ+PC90ZD48L3RyPicpLmF0dHIoJ2RhdGEtZHQtcm93JywgaS5pZHgpLmFkZENsYXNzKGUpKSwKICAgICAgICAgICAgICAgICAgICAgIChIKCd0ZCcsIG4pLmFkZENsYXNzKGUpLmh0bWwodClbMF0uY29sU3BhbiA9IG90KG8pKSwKICAgICAgICAgICAgICAgICAgICAgIHMucHVzaChuWzBdKSk7CiAgICAgICAgfQogICAgICAgIHZhciBzID0gW107CiAgICAgICAgbCh0LCBlKSwgaS5fZGV0YWlscyAmJiBpLl9kZXRhaWxzLmRldGFjaCgpLCAoaS5fZGV0YWlscyA9IEgocykpLCBpLl9kZXRhaWxzU2hvdyAmJiBpLl9kZXRhaWxzLmluc2VydEFmdGVyKGkublRyKTsKICAgIH0KICAgIGZ1bmN0aW9uIGZlKHQsIGUpIHsKICAgICAgICB2YXIgbiA9IHQuY29udGV4dDsKICAgICAgICBpZiAobi5sZW5ndGggJiYgdC5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIGEgPSBuWzBdLmFvRGF0YVt0WzBdXTsKICAgICAgICAgICAgaWYgKGEuX2RldGFpbHMpIHsKICAgICAgICAgICAgICAgIChhLl9kZXRhaWxzU2hvdyA9IGUpCiAgICAgICAgICAgICAgICAgICAgPyAoYS5fZGV0YWlscy5pbnNlcnRBZnRlcihhLm5UciksIEgoYS5uVHIpLmFkZENsYXNzKCdkdC1oYXNDaGlsZCcpKQogICAgICAgICAgICAgICAgICAgIDogKGEuX2RldGFpbHMuZGV0YWNoKCksIEgoYS5uVHIpLnJlbW92ZUNsYXNzKCdkdC1oYXNDaGlsZCcpKSwKICAgICAgICAgICAgICAgICAgICBHKG5bMF0sIG51bGwsICdjaGlsZFJvdycsIFtlLCB0LnJvdyh0WzBdKV0pOwogICAgICAgICAgICAgICAgdmFyIGkgPSBuWzBdLAogICAgICAgICAgICAgICAgICAgIHIgPSBuZXcgWChpKSwKICAgICAgICAgICAgICAgICAgICBhID0gJy5kdC5EVF9kZXRhaWxzJywKICAgICAgICAgICAgICAgICAgICBlID0gJ2RyYXcnICsgYSwKICAgICAgICAgICAgICAgICAgICB0ID0gJ2NvbHVtbi1zaXppbmcnICsgYSwKICAgICAgICAgICAgICAgICAgICBhID0gJ2Rlc3Ryb3knICsgYSwKICAgICAgICAgICAgICAgICAgICBsID0gaS5hb0RhdGE7CiAgICAgICAgICAgICAgICBpZiAoKHIub2ZmKGUgKyAnICcgKyB0ICsgJyAnICsgYSksIG0obCwgJ19kZXRhaWxzJykubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICByLm9uKGUsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBlKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIHIucm93cyh7IHBhZ2U6ICdjdXJyZW50JyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVxKDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbFt0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5fZGV0YWlsc1Nob3cpIGUuX2RldGFpbHMuaW5zZXJ0QWZ0ZXIoZS5uVHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgci5vbih0LCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBvdChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDAsIG8gPSBsLmxlbmd0aDsgciA8IG87IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGxbcl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAmJiBuLl9kZXRhaWxzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uX2RldGFpbHMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gSCh0aGlzKS5jaGlsZHJlbigndGQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoID09IDEpIHQuYXR0cignY29sc3BhbicsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgci5vbihhLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgYSA9IGwubGVuZ3RoOyBuIDwgYTsgbisrKSBpZiAobFtuXSAmJiBsW25dLl9kZXRhaWxzKSB5ZShyLCBuKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJlKG4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gaGUodCwgZSwgbiwgYSwgciwgbykgewogICAgICAgIGZvciAodmFyIGkgPSBbXSwgbCA9IDAsIHMgPSByLmxlbmd0aDsgbCA8IHM7IGwrKykgaS5wdXNoKHEodCwgcltsXSwgZSwgbykpOwogICAgICAgIHJldHVybiBpOwogICAgfQogICAgZnVuY3Rpb24gcGUodCwgZSwgbikgewogICAgICAgIHZhciBhID0gdC5hb0hlYWRlcjsKICAgICAgICByZXR1cm4gYVt2b2lkIDAgIT09IG4gPyBuIDogdC5iU29ydENlbGxzVG9wID8gMCA6IGEubGVuZ3RoIC0gMV1bZV0uY2VsbDsKICAgIH0KICAgIGZ1bmN0aW9uIGdlKGUsIG4pIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIFQodCkgfHwgJ3N0cmluZycgIT0gdHlwZW9mIHQgfHwgKCh0ID0gdC5yZXBsYWNlKEYsICcgJykpLCBlICYmICh0ID0gTCh0KSksIG4gJiYgKHQgPSBrKHQsICExKSkpLCB0OwogICAgICAgIH07CiAgICB9CiAgICB2YXIgdmUgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgIGEgPSBbXSwKICAgICAgICAgICAgICAgIHIgPSB0LmFpRGlzcGxheSwKICAgICAgICAgICAgICAgIG8gPSB0LmFpRGlzcGxheU1hc3RlciwKICAgICAgICAgICAgICAgIGkgPSBlLnNlYXJjaCwKICAgICAgICAgICAgICAgIGwgPSBlLm9yZGVyLAogICAgICAgICAgICAgICAgZSA9IGUucGFnZTsKICAgICAgICAgICAgaWYgKCdzc3AnID09IEoodCkpIHJldHVybiAncmVtb3ZlZCcgPT09IGkgPyBbXSA6IGgoMCwgby5sZW5ndGgpOwogICAgICAgICAgICBpZiAoJ2N1cnJlbnQnID09IGUpIGZvciAodSA9IHQuX2lEaXNwbGF5U3RhcnQsIGMgPSB0LmZuRGlzcGxheUVuZCgpOyB1IDwgYzsgdSsrKSBhLnB1c2goclt1XSk7CiAgICAgICAgICAgIGVsc2UgaWYgKCdjdXJyZW50JyA9PSBsIHx8ICdhcHBsaWVkJyA9PSBsKSB7CiAgICAgICAgICAgICAgICBpZiAoJ25vbmUnID09IGkpIGEgPSBvLnNsaWNlKCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgnYXBwbGllZCcgPT0gaSkgYSA9IHIuc2xpY2UoKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdyZW1vdmVkJyA9PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IHt9LCB1ID0gMCwgYyA9IHIubGVuZ3RoOyB1IDwgYzsgdSsrKSBzW3JbdV1dID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBvLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHQpIHx8IGEucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICgnaW5kZXgnID09IGwgfHwgJ29yaWdpbmFsJyA9PSBsKQogICAgICAgICAgICAgICAgZm9yICh1ID0gMCwgYyA9IHQuYW9EYXRhLmxlbmd0aDsgdSA8IGM7IHUrKykKICAgICAgICAgICAgICAgICAgICB0LmFvRGF0YVt1XSAmJgogICAgICAgICAgICAgICAgICAgICAgICAoJ25vbmUnID09IGkgfHwgKC0xID09PSAobiA9IHIuaW5kZXhPZih1KSkgJiYgJ3JlbW92ZWQnID09IGkpIHx8ICgwIDw9IG4gJiYgJ2FwcGxpZWQnID09IGkpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2godSk7CiAgICAgICAgICAgIGVsc2UgaWYgKCdudW1iZXInID09IHR5cGVvZiBsKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IEp0KHQsIGwsICdhc2MnKTsKICAgICAgICAgICAgICAgIGlmICgnbm9uZScgPT09IGkpIGEgPSBkOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciAodSA9IDA7IHUgPCBkLmxlbmd0aDsgdSsrKQogICAgICAgICAgICAgICAgICAgICAgICAoKC0xID09PSAobiA9IHIuaW5kZXhPZihkW3VdKSkgJiYgJ3JlbW92ZWQnID09IGkpIHx8ICgwIDw9IG4gJiYgJ2FwcGxpZWQnID09IGkpKSAmJiBhLnB1c2goZFt1XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSwKICAgICAgICBtZSA9CiAgICAgICAgICAgIChlKCdyb3dzKCknLCBmdW5jdGlvbiAobiwgYSkgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSBuID8gKG4gPSAnJykgOiBILmlzUGxhaW5PYmplY3QobikgJiYgKChhID0gbiksIChuID0gJycpKSwgKGEgPSB1ZShhKSk7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgJ3RhYmxlJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBzZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncm93JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZihuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSByLmFvRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgIW8pIHJldHVybiBbdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKGkgPSBpIHx8IHZlKHIsIG8pKSwgbnVsbCAhPT0gdCAmJiAtMSAhPT0gaS5pbmRleE9mKHQpKSkgcmV0dXJuIFt0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbiB8fCAnJyA9PT0gbikgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBhW3RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKHQsIGUuX2FEYXRhLCBlLm5UcikgPyB0IDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5ub2RlTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQgPSBuLl9EVF9Sb3dJbmRleCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBuLl9EVF9DZWxsSW5kZXgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFbdF0gJiYgYVt0XS5uVHIgPT09IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3RdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFbZS5yb3ddICYmIGFbZS5yb3ddLm5UciA9PT0gbi5wYXJlbnROb2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtlLnJvd10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodCA9IEgobikuY2xvc2VzdCgnKltkYXRhLWR0LXJvd10nKSkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW3QuZGF0YSgnZHQtcm93JyldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgbiAmJiAnIycgPT09IG4uY2hhckF0KDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHIuYUlkc1tuLnJlcGxhY2UoL14jLywgJycpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBbZS5pZHhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBBKGIoci5hb0RhdGEsIGksICduVHInKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fRFRfUm93SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdjdXJyZW50JyAhPT0gby5vcmRlciAmJiAnYXBwbGllZCcgIT09IG8ub3JkZXIpIHx8IHp0KHIsIGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgZSwgbywgaTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuICh0LnNlbGVjdG9yLnJvd3MgPSBuKSwgKHQuc2VsZWN0b3Iub3B0cyA9IGEpLCB0OwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgncm93cygpLm5vZGVzKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAncm93JywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hb0RhdGFbZV0ublRyIHx8IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgncm93cygpLmRhdGEoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICEwLAogICAgICAgICAgICAgICAgICAgICdyb3dzJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYih0LmFvRGF0YSwgZSwgJ19hRGF0YScpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdyb3dzKCkuY2FjaGUoKScsICdyb3coKS5jYWNoZSgpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdyb3cnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LmFvRGF0YVtlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzZWFyY2gnID09PSBuID8gdC5fYUZpbHRlckRhdGEgOiB0Ll9hU29ydERhdGE7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ3Jvd3MoKS5pbnZhbGlkYXRlKCknLCAncm93KCkuaW52YWxpZGF0ZSgpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCdyb3cnLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGJ0KHQsIGUsIG4pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdyb3dzKCkuaW5kZXhlcygpJywgJ3JvdygpLmluZGV4KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAncm93JywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgncm93cygpLmlkcygpJywgJ3JvdygpLmlkKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCBuID0gdGhpcy5jb250ZXh0LCBhID0gMCwgciA9IG4ubGVuZ3RoOyBhIDwgcjsgYSsrKQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCBpID0gdGhpc1thXS5sZW5ndGg7IG8gPCBpOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBuW2FdLnJvd0lkRm4oblthXS5hb0RhdGFbdGhpc1thXVtvXV0uX2FEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKCghMCA9PT0gdCA/ICcjJyA6ICcnKSArIGwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWChuLCBlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ3Jvd3MoKS5yZW1vdmUoKScsICdyb3coKS5yZW1vdmUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigncm93JywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmFvRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuW2VdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuYWlEaXNwbGF5TWFzdGVyLmluZGV4T2YoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoLTEgIT09IHIgJiYgdC5haURpc3BsYXlNYXN0ZXIuc3BsaWNlKHIsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPCB0Ll9pUmVjb3Jkc0Rpc3BsYXkgJiYgdC5faVJlY29yZHNEaXNwbGF5LS0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmUodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5yb3dJZEZuKGEuX2FEYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gciAmJiBkZWxldGUgdC5hSWRzW3JdLCAobltlXSA9IG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdyb3dzLmFkZCgpJywgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAgICAgJ3RhYmxlJywKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIG4gPSBbXSwgYSA9IDAsIHIgPSBvLmxlbmd0aDsgYSA8IHI7IGErKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IG9bYV0pLm5vZGVOYW1lICYmICdUUicgPT09IGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA/IG4ucHVzaChmdCh0LCBlKVswXSkgOiBuLnB1c2goRCh0LCBlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLnJvd3MoLTEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGUucG9wKCksIGUucHVzaC5hcHBseShlLCB0KSwgZTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ3JvdygpJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjZSh0aGlzLnJvd3ModCwgZSkpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgncm93KCkuZGF0YSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0CiAgICAgICAgICAgICAgICAgICAgPyBuLmxlbmd0aCAmJiB0aGlzLmxlbmd0aCAmJiB0aGlzWzBdLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICA/IG5bMF0uYW9EYXRhW3RoaXNbMF1dLl9hRGF0YQogICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIDogKCgoZSA9IG5bMF0uYW9EYXRhW3RoaXNbMF1dKS5fYURhdGEgPSB0KSwKICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgZS5uVHIgJiYgZS5uVHIuaWQgJiYgdihuWzBdLnJvd0lkKSh0LCBlLm5Uci5pZCksCiAgICAgICAgICAgICAgICAgICAgICBidChuWzBdLCB0aGlzWzBdLCAnZGF0YScpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdyb3coKS5ub2RlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAmJiB0aGlzLmxlbmd0aCAmJiB0aGlzWzBdLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHQgPSB0WzBdLmFvRGF0YVt0aGlzWzBdXTsKICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0Lm5UcikgcmV0dXJuIHQublRyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdyb3cuYWRkKCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEggJiYgZS5sZW5ndGggJiYgKGUgPSBlWzBdKTsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm5vZGVOYW1lICYmICdUUicgPT09IGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA/IGZ0KHQsIGUpWzBdIDogRCh0LCBlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93KHRbMF0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgSChfKS5vbigncGx1Z2luLWluaXQuZHQnLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGEgPSBuZXcgWChlKTsKICAgICAgICAgICAgICAgIGEub24oJ3N0YXRlU2F2ZVBhcmFtcy5EVCcsIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IGUucm93SWRGbiwgciA9IGUuYWlEaXNwbGF5TWFzdGVyLCBvID0gW10sIGkgPSAwOyBpIDwgci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHJbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZS5hb0RhdGFbbF07CiAgICAgICAgICAgICAgICAgICAgICAgIGwuX2RldGFpbHNTaG93ICYmIG8ucHVzaCgnIycgKyBhKGwuX2FEYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG4uY2hpbGRSb3dzID0gbzsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGEub24oJ3N0YXRlTG9hZGVkLkRUJywgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWUoYSwgbik7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbWUoYSwgYS5zdGF0ZS5sb2FkZWQoKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICAgIGUuY2hpbGRSb3dzICYmCiAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgICAgICAgICAucm93cygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2hpbGRSb3dzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnJlcGxhY2UoLyhbXjpcXF0qKD86XFwuW146XFxdKikqKTovZywgJyQxXFw6Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAuZXZlcnkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgRyh0LnNldHRpbmdzKClbMF0sIG51bGwsICdyZXF1ZXN0Q2hpbGQnLCBbdGhpc10pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgYmUgPSBWLnV0aWwudGhyb3R0bGUoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgUXQodFswXSk7CiAgICAgICAgfSwgNTAwKSwKICAgICAgICB5ZSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHZhciBuID0gdC5jb250ZXh0OwogICAgICAgICAgICBuLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgKGUgPSBuWzBdLmFvRGF0YVt2b2lkIDAgIT09IGUgPyBlIDogdFswXV0pICYmCiAgICAgICAgICAgICAgICBlLl9kZXRhaWxzICYmCiAgICAgICAgICAgICAgICAoZS5fZGV0YWlscy5yZW1vdmUoKSwgKGUuX2RldGFpbHNTaG93ID0gdm9pZCAwKSwgKGUuX2RldGFpbHMgPSB2b2lkIDApLCBIKGUublRyKS5yZW1vdmVDbGFzcygnZHQtaGFzQ2hpbGQnKSwgYmUobikpOwogICAgICAgIH0sCiAgICAgICAgRGUgPSAncm93KCkuY2hpbGQnLAogICAgICAgIHhlID0gRGUgKyAnKCknLAogICAgICAgIFNlID0KICAgICAgICAgICAgKGUoeGUsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgICAgICA/IG4ubGVuZ3RoICYmIHRoaXMubGVuZ3RoICYmIG5bMF0uYW9EYXRhW3RoaXNbMF1dCiAgICAgICAgICAgICAgICAgICAgICAgID8gblswXS5hb0RhdGFbdGhpc1swXV0uX2RldGFpbHMKICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICA6ICghMCA9PT0gdCA/IHRoaXMuY2hpbGQuc2hvdygpIDogITEgPT09IHQgPyB5ZSh0aGlzKSA6IG4ubGVuZ3RoICYmIHRoaXMubGVuZ3RoICYmIGRlKG5bMF0sIG5bMF0uYW9EYXRhW3RoaXNbMF1dLCB0LCBlKSwKICAgICAgICAgICAgICAgICAgICAgIHRoaXMpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZShbRGUgKyAnLnNob3coKScsIHhlICsgJy5zaG93KCknXSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZlKHRoaXMsICEwKSwgdGhpczsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoW0RlICsgJy5oaWRlKCknLCB4ZSArICcuaGlkZSgpJ10sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmZSh0aGlzLCAhMSksIHRoaXM7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKFtEZSArICcucmVtb3ZlKCknLCB4ZSArICcucmVtb3ZlKCknXSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHllKHRoaXMpLCB0aGlzOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZShEZSArICcuaXNTaG93bigpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQubGVuZ3RoICYmIHRoaXMubGVuZ3RoICYmIHRbMF0uYW9EYXRhW3RoaXNbMF1dICYmIHRbMF0uYW9EYXRhW3RoaXNbMF1dLl9kZXRhaWxzU2hvdykgfHwgITE7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAvXihbXjpdKyk/OihuYW1lfHRpdGxlfHZpc0lkeHx2aXNpYmxlKSQvKSwKICAgICAgICB4ZSA9CiAgICAgICAgICAgIChlKCdjb2x1bW5zKCknLCBmdW5jdGlvbiAobiwgYSkgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSBuID8gKG4gPSAnJykgOiBILmlzUGxhaW5PYmplY3QobikgJiYgKChhID0gbiksIChuID0gJycpKSwgKGEgPSB1ZShhKSk7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgJ3RhYmxlJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsID0gYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocyA9IChpID0gdCkuYW9Db2x1bW5zKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1ID0gbShzLCAnc05hbWUnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYyA9IG0ocywgJ3NUaXRsZScpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gVi51dGlsLmdldCgnW10uW10uY2VsbCcpKGkuYW9IZWFkZXIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkID0geChNKFtdLCB0KSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2UoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBmKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJycgPT09IG4pIHJldHVybiBoKHMubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiBbMCA8PSB0ID8gdCA6IHMubGVuZ3RoICsgdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IHZlKGksIGwpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlLCBoZShpLCBlLCAwLCAwLCBhKSwgcGUoaSwgZSkpID8gZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAnc3RyaW5nJyA9PSB0eXBlb2YgbiA/IG4ubWF0Y2goU2UpIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndmlzSWR4JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd2aXNpYmxlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9bMV0gJiYgb1sxXS5tYXRjaCgvXlxkKyQvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZSA9IHBhcnNlSW50KG9bMV0sIDEwKSkgPCAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBzLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5iVmlzaWJsZSA/IGUgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVtyLmxlbmd0aCArIGVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW2F0KGksIGUpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYlZpc2libGUgJiYgKCFvWzFdIHx8IDAgPCBIKGRbZV0pLmZpbHRlcihvWzFdKS5sZW5ndGgpID8gZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25hbWUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdS5tYXAoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSBvWzFdID8gZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMubWFwKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gb1sxXSA/IGUgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm5vZGVOYW1lICYmIG4uX0RUX0NlbGxJbmRleAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbbi5fRFRfQ2VsbEluZGV4LmNvbHVtbl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHQgPSBIKGQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZHQodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKSkubGVuZ3RoIHx8ICFuLm5vZGVOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHQgPSBIKG4pLmNsb3Nlc3QoJypbZGF0YS1kdC1jb2x1bW5dJykpLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbdC5kYXRhKCdkdC1jb2x1bW4nKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBlLCBsLCBzLCB1LCBjLCBkOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQuc2VsZWN0b3IuY29scyA9IG4pLCAodC5zZWxlY3Rvci5vcHRzID0gYSksIHQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjb2x1bW5zKCkuaGVhZGVyKCknLCAnY29sdW1uKCkuaGVhZGVyKCknLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgJ2NvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlKHQsIGUsIG4pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjb2x1bW5zKCkuZm9vdGVyKCknLCAnY29sdW1uKCkuZm9vdGVyKCknLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgJ2NvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYW9Gb290ZXIubGVuZ3RoID8gdC5hb0Zvb3Rlclt2b2lkIDAgIT09IG4gPyBuIDogMF1bZV0uY2VsbCA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NvbHVtbnMoKS5kYXRhKCknLCAnY29sdW1uKCkuZGF0YSgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ2NvbHVtbi1yb3dzJywgaGUsIDEpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgnY29sdW1ucygpLnJlbmRlcigpJywgJ2NvbHVtbigpLnJlbmRlcigpJywgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjb2x1bW4tcm93cycsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUsIG4sIGEsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlKHQsIGUsIDAsIDAsIHIsIG8pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjb2x1bW5zKCkuZGF0YVNyYygpJywgJ2NvbHVtbigpLmRhdGFTcmMoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFvQ29sdW1uc1tlXS5tRGF0YTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgnY29sdW1ucygpLmNhY2hlKCknLCAnY29sdW1uKCkuY2FjaGUoKScsIGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY29sdW1uLXJvd3MnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBuLCBhLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiKHQuYW9EYXRhLCByLCAnc2VhcmNoJyA9PT0gbyA/ICdfYUZpbHRlckRhdGEnIDogJ19hU29ydERhdGEnLCBlKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgnY29sdW1ucygpLmluaXQoKScsICdjb2x1bW4oKS5pbml0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY29sdW1uJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5hb0NvbHVtbnNbZV07CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NvbHVtbnMoKS5ub2RlcygpJywgJ2NvbHVtbigpLm5vZGVzKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY29sdW1uLXJvd3MnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBuLCBhLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiKHQuYW9EYXRhLCByLCAnYW5DZWxscycsIGUpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjb2x1bW5zKCkudGl0bGVzKCknLCAnY29sdW1uKCkudGl0bGUoKScsIGZ1bmN0aW9uIChuLCBhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY29sdW1uJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgbiAmJiAoKGEgPSBuKSwgKG4gPSB2b2lkIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IEgoJ3NwYW4uZHQtY29sdW1uLXRpdGxlJywgdGhpcy5jb2x1bW4oZSkuaGVhZGVyKGEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IChlLmh0bWwobiksIHRoaXMpIDogZS5odG1sKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NvbHVtbnMoKS50eXBlcygpJywgJ2NvbHVtbigpLnR5cGUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0LmFvQ29sdW1uc1tlXS5zVHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgfHwgc3QodCksIGU7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NvbHVtbnMoKS52aXNpYmxlKCknLCAnY29sdW1uKCkudmlzaWJsZSgpJywgZnVuY3Rpb24gKG4sIGEpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcywKICAgICAgICAgICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuaXRlcmF0b3IoJ2NvbHVtbicsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiB0LmFvQ29sdW1uc1tlXS5iVmlzaWJsZTsKICAgICAgICAgICAgICAgICAgICAgICAgIShmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5hb0NvbHVtbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG9bZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHQuYW9EYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIGkuYlZpc2libGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaS5iVmlzaWJsZSA9PT0gbikgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IG0obywgJ2JWaXNpYmxlJykuaW5kZXhPZighMCwgZSArIDEpLCB1ID0gMCwgYyA9IGwubGVuZ3RoOyB1IDwgYzsgdSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW3VdICYmICgociA9IGxbdV0ublRyKSwgKGEgPSBsW3VdLmFuQ2VsbHMpLCByKSAmJiByLmluc2VydEJlZm9yZShhW2VdLCBhW3NdIHx8IG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBIKG0odC5hb0RhdGEsICdhbkNlbGxzJywgZSkpLmRldGFjaCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpLmJWaXNpYmxlID0gbiksIFV0KHQpLCAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSkodCwgZSwgbikgfHwgci5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IG4gJiYKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3QodCwgdC5hb0hlYWRlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3QodCwgdC5hb0Zvb3RlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5haURpc3BsYXkubGVuZ3RoIHx8IEgodC5uVEJvZHkpLmZpbmQoJ3RkW2NvbHNwYW5dJykuYXR0cignY29sc3BhbicsIG90KHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLml0ZXJhdG9yKCdjb2x1bW4nLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmluY2x1ZGVzKGUpICYmIEcodCwgbnVsbCwgJ2NvbHVtbi12aXNpYmlsaXR5JywgW3QsIGUsIG4sIGFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmxlbmd0aCAmJiAodm9pZCAwID09PSBhIHx8IGEpICYmIGUuY29sdW1ucy5hZGp1c3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NvbHVtbnMoKS53aWR0aHMoKScsICdjb2x1bW4oKS53aWR0aCgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmNvbHVtbnMoJzp2aXNpYmxlJykuY291bnQoKSwKICAgICAgICAgICAgICAgICAgICB0ID0gSCgnPHRyPicpLmh0bWwoJzx0ZD4nICsgQXJyYXkodCkuam9pbignPC90ZD48dGQ+JykgKyAnPC90ZD4nKSwKICAgICAgICAgICAgICAgICAgICBuID0KICAgICAgICAgICAgICAgICAgICAgICAgKEgodGhpcy50YWJsZSgpLmJvZHkoKSkuYXBwZW5kKHQpLAogICAgICAgICAgICAgICAgICAgICAgICB0LmNoaWxkcmVuKCkubWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIKHRoaXMpLm91dGVyV2lkdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZSgpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgICAgICdjb2x1bW4nLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHJ0KHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgPyBuW3RdIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgnY29sdW1ucygpLmluZGV4ZXMoKScsICdjb2x1bW4oKS5pbmRleCgpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlzaWJsZScgPT09IG4gPyBydCh0LCBlKSA6IGU7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2NvbHVtbnMuYWRqdXN0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAndGFibGUnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG50KHQpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdjb2x1bW4uaW5kZXgoKScsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbnRleHQubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgIChuID0gdGhpcy5jb250ZXh0WzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2Zyb21WaXNpYmxlJyA9PT0gdCB8fCAndG9EYXRhJyA9PT0gdCA/IGF0KG4sIGUpIDogJ2Zyb21EYXRhJyA9PT0gdCB8fCAndG9WaXNpYmxlJyA9PT0gdCA/IHJ0KG4sIGUpIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2NvbHVtbigpJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjZSh0aGlzLmNvbHVtbnModCwgZSkpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnY2VsbHMoKScsIGZ1bmN0aW9uIChnLCB0LCB2KSB7CiAgICAgICAgICAgICAgICB2YXIgYSwgciwgbywgaSwgbCwgcywgZTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgSC5pc1BsYWluT2JqZWN0KGcpICYmICh2b2lkIDAgPT09IGcucm93ID8gKCh2ID0gZyksIChnID0gbnVsbCkpIDogKCh2ID0gdCksICh0ID0gbnVsbCkpKSwKICAgICAgICAgICAgICAgICAgICBILmlzUGxhaW5PYmplY3QodCkgJiYgKCh2ID0gdCksICh0ID0gbnVsbCkpLAogICAgICAgICAgICAgICAgICAgIG51bGwgPT0gdAogICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9IGcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSB1ZSh2KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZCA9IGEuYW9EYXRhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmID0gdmUoYSwgZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBBKGIoZCwgZiwgJ2FuQ2VsbHMnKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGggPSBIKE0oW10sIG4pKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocCA9IGEuYW9Db2x1bW5zLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2VsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAnZnVuY3Rpb24nID09IHR5cGVvZiB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8IG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobyA9IFtdLCBpID0gMCwgbCA9IGYubGVuZ3RoOyBpIDwgbDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IGZbaV0sIHMgPSAwOyBzIDwgcDsgcysrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodSA9IHsgcm93OiByLCBjb2x1bW46IHMgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIW4gfHwgKChjID0gZFtyXSksIHQodSwgcShhLCByLCBzKSwgYy5hbkNlbGxzID8gYy5hbkNlbGxzW3NdIDogbnVsbCkpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBILmlzUGxhaW5PYmplY3QodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdm9pZCAwICE9PSB0LmNvbHVtbiAmJiB2b2lkIDAgIT09IHQucm93ICYmIC0xICE9PSBmLmluZGV4T2YodC5yb3cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbdF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChlID0gaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJvdzogZS5fRFRfQ2VsbEluZGV4LnJvdywgY29sdW1uOiBlLl9EVF9DZWxsSW5kZXguY29sdW1uIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKSkubGVuZ3RoIHx8ICF0Lm5vZGVOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGMgPSBIKHQpLmNsb3Nlc3QoJypbZGF0YS1kdC1yb3ddJykpLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbeyByb3c6IGMuZGF0YSgnZHQtcm93JyksIGNvbHVtbjogYy5kYXRhKCdkdC1jb2x1bW4nKSB9XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEsIGUsIHIsIG8sIGksIGwsIHMsIHUsIGMsIGQsIGYsIG4sIGgsIHA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAoKGUgPSB2ID8geyBwYWdlOiB2LnBhZ2UsIG9yZGVyOiB2Lm9yZGVyLCBzZWFyY2g6IHYuc2VhcmNoIH0gOiB7fSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSB0aGlzLmNvbHVtbnModCwgZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gdGhpcy5yb3dzKGcsIGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YWJsZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMCwgaSA9IHJbZV0ubGVuZ3RoOyBvIDwgaTsgbysrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobCA9IDAsIHMgPSBhW2VdLmxlbmd0aDsgbCA8IHM7IGwrKykgbi5wdXNoKHsgcm93OiByW2VdW29dLCBjb2x1bW46IGFbZV1bbF0gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IHYgJiYgdi5zZWxlY3RlZCA/IHRoaXMuY2VsbHMoZSwgdikgOiBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBILmV4dGVuZChlLnNlbGVjdG9yLCB7IGNvbHM6IHQsIHJvd3M6IGcsIG9wdHM6IHYgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgZSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjZWxscygpLm5vZGVzKCknLCAnY2VsbCgpLm5vZGUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjZWxsJywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5hb0RhdGFbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIHQuYW5DZWxscyA/IHQuYW5DZWxsc1tuXSA6IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnY2VsbHMoKS5kYXRhKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY2VsbCcsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEodCwgZSwgbik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NlbGxzKCkuY2FjaGUoKScsICdjZWxsKCkuY2FjaGUoKScsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIChhID0gJ3NlYXJjaCcgPT09IGEgPyAnX2FGaWx0ZXJEYXRhJyA6ICdfYVNvcnREYXRhJyksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAgICAgJ2NlbGwnLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYW9EYXRhW2VdW2FdW25dOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjZWxscygpLnJlbmRlcigpJywgJ2NlbGwoKS5yZW5kZXIoKScsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAnY2VsbCcsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEodCwgZSwgbiwgYSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQoJ2NlbGxzKCkuaW5kZXhlcygpJywgJ2NlbGwoKS5pbmRleCgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgJ2NlbGwnLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJvdzogZSwgY29sdW1uOiBuLCBjb2x1bW5WaXNpYmxlOiBydCh0LCBuKSB9OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjZWxscygpLmludmFsaWRhdGUoKScsICdjZWxsKCkuaW52YWxpZGF0ZSgpJywgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCdjZWxsJywgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgICAgICBidCh0LCBlLCBhLCBuKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnY2VsbCgpJywgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBjZSh0aGlzLmNlbGxzKHQsIGUsIG4pKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2NlbGwoKS5kYXRhKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5jb250ZXh0LAogICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzWzBdOwogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgICAgID8gaS5sZW5ndGggJiYgbC5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgPyBxKGlbMF0sIGxbMF0ucm93LCBsWzBdLmNvbHVtbikKICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDAKICAgICAgICAgICAgICAgICAgICA6ICgoZSA9IGlbMF0pLAogICAgICAgICAgICAgICAgICAgICAgKG4gPSBsWzBdLnJvdyksCiAgICAgICAgICAgICAgICAgICAgICAoYSA9IGxbMF0uY29sdW1uKSwKICAgICAgICAgICAgICAgICAgICAgIChyID0gZS5hb0NvbHVtbnNbYV0pLAogICAgICAgICAgICAgICAgICAgICAgKG8gPSBlLmFvRGF0YVtuXS5fYURhdGEpLAogICAgICAgICAgICAgICAgICAgICAgci5mblNldERhdGEobywgdCwgeyBzZXR0aW5nczogZSwgcm93OiBuLCBjb2w6IGEgfSksCiAgICAgICAgICAgICAgICAgICAgICBidChpWzBdLCBsWzBdLnJvdywgJ2RhdGEnLCBsWzBdLmNvbHVtbiksCiAgICAgICAgICAgICAgICAgICAgICB0aGlzKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ29yZGVyKCknLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmNvbnRleHQsCiAgICAgICAgICAgICAgICAgICAgYSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlCiAgICAgICAgICAgICAgICAgICAgPyAwICE9PSBuLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICA/IG5bMF0uYWFTb3J0aW5nCiAgICAgICAgICAgICAgICAgICAgICAgIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgOiAoJ251bWJlcicgPT0gdHlwZW9mIGUgPyAoZSA9IFtbZSwgdF1dKSA6IDEgPCBhLmxlbmd0aCAmJiAoZSA9IGEpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHQuYWFTb3J0aW5nID0gQXJyYXkuaXNBcnJheShlKSA/IGUuc2xpY2UoKSA6IGU7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdvcmRlci5saXN0ZW5lcigpJywgZnVuY3Rpb24gKGUsIG4sIGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgJHQodCwgZSwge30sIG4sIGEpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdvcmRlci5maXhlZCgpJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0LmFhU29ydGluZ0ZpeGVkID0gSC5leHRlbmQoITAsIHt9LCBlKTsKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOiAoKHQgPSAodCA9IHRoaXMuY29udGV4dCkubGVuZ3RoID8gdFswXS5hYVNvcnRpbmdGaXhlZCA6IHZvaWQgMCksIEFycmF5LmlzQXJyYXkodCkgPyB7IHByZTogdCB9IDogdCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKFsnY29sdW1ucygpLm9yZGVyKCknLCAnY29sdW1uKCkub3JkZXIoKSddLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzOwogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0LmFhU29ydGluZyA9IGFbZV0ubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdCwgbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAnY29sdW1uJywKICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gR3QodCksIGEgPSAwLCByID0gbi5sZW5ndGg7IGEgPCByOyBhKyspIGlmIChuW2FdLmNvbCA9PT0gZSkgcmV0dXJuIG5bYV0uZGlyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdCgnY29sdW1ucygpLm9yZGVyYWJsZSgpJywgJ2NvbHVtbigpLm9yZGVyYWJsZSgpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICdjb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LmFvQ29sdW1uc1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPyB0LmFzU29ydGluZyA6IHQuYlNvcnRhYmxlOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdwcm9jZXNzaW5nKCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICB3KHQsIGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdzZWFyY2goKScsIGZ1bmN0aW9uIChlLCBuLCBhLCByKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgICAgICA/IDAgIT09IHQubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgID8gdFswXS5vUHJldmlvdXNTZWFyY2guc2VhcmNoCiAgICAgICAgICAgICAgICAgICAgICAgIDogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdC5vRmVhdHVyZXMuYkZpbHRlciAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0JyA9PSB0eXBlb2YgbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gSC5leHRlbmQodC5vUHJldmlvdXNTZWFyY2gsIG4sIHsgc2VhcmNoOiBlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBILmV4dGVuZCh0Lm9QcmV2aW91c1NlYXJjaCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleDogbnVsbCAhPT0gbiAmJiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYXJ0OiBudWxsID09PSBhIHx8IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZUluc2Vuc2l0aXZlOiBudWxsID09PSByIHx8IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnc2VhcmNoLmZpeGVkKCknLCBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLml0ZXJhdG9yKCEwLCAndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHQgPSB0LnNlYXJjaEZpeGVkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gKHZvaWQgMCA9PT0gbiA/IHRbZV0gOiAobnVsbCA9PT0gbiA/IGRlbGV0ZSB0W2VdIDogKHRbZV0gPSBuKSwgdGhpcykpIDogT2JqZWN0LmtleXModCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgJiYgdm9pZCAwID09PSBuID8gdFswXSA6IHQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0KCdjb2x1bW5zKCkuc2VhcmNoKCknLCAnY29sdW1uKCkuc2VhcmNoKCknLCBmdW5jdGlvbiAoYSwgciwgbywgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ2NvbHVtbicsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmFvUHJlU2VhcmNoQ29sczsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBhKSByZXR1cm4gbltlXS5zZWFyY2g7CiAgICAgICAgICAgICAgICAgICAgdC5vRmVhdHVyZXMuYkZpbHRlciAmJgogICAgICAgICAgICAgICAgICAgICAgICAoJ29iamVjdCcgPT0gdHlwZW9mIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gSC5leHRlbmQobltlXSwgciwgeyBzZWFyY2g6IGEgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSC5leHRlbmQobltlXSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXg6IG51bGwgIT09IHIgJiYgciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYXJ0OiBudWxsID09PSBvIHx8IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlSW5zZW5zaXRpdmU6IG51bGwgPT09IGkgfHwgaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJ0KHQsIHQub1ByZXZpb3VzU2VhcmNoKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoWydjb2x1bW5zKCkuc2VhcmNoLmZpeGVkKCknLCAnY29sdW1uKCkuc2VhcmNoLmZpeGVkKCknXSwgZnVuY3Rpb24gKG4sIGEpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5pdGVyYXRvcighMCwgJ2NvbHVtbicsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IHQuYW9Db2x1bW5zW2VdLnNlYXJjaEZpeGVkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuID8gKHZvaWQgMCA9PT0gYSA/IHRbbl0gOiAobnVsbCA9PT0gYSA/IGRlbGV0ZSB0W25dIDogKHRbbl0gPSBhKSwgdGhpcykpIDogT2JqZWN0LmtleXModCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gJiYgdm9pZCAwID09PSBhID8gdFswXSA6IHQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdzdGF0ZSgpJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICA/ICgobiA9IEguZXh0ZW5kKCEwLCB7fSwgdCkpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICExICE9PSBlICYmIChuLnRpbWUgPSArbmV3IERhdGUoKSArIDEwMCksIEt0KHQsIG4sIGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIDogdGhpcy5jb250ZXh0Lmxlbmd0aAogICAgICAgICAgICAgICAgICAgID8gdGhpcy5jb250ZXh0WzBdLm9TYXZlZFN0YXRlCiAgICAgICAgICAgICAgICAgICAgOiBudWxsOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnc3RhdGUuY2xlYXIoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgdC5mblN0YXRlU2F2ZUNhbGxiYWNrLmNhbGwodC5vSW5zdGFuY2UsIHQsIHt9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnc3RhdGUubG9hZGVkKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0Lmxlbmd0aCA/IHRoaXMuY29udGV4dFswXS5vTG9hZGVkU3RhdGUgOiBudWxsOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnc3RhdGUuc2F2ZSgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBRdCh0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFYudXNlID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gJ3N0cmluZycgPT0gdHlwZW9mIHQgPyBlIDogdCwKICAgICAgICAgICAgICAgICAgICBlID0gJ3N0cmluZycgPT0gdHlwZW9mIGUgPyBlIDogdDsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4gJiYgJ3N0cmluZycgPT0gdHlwZW9mIGUpCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpYic6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2pxJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBIOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd3aW4nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFc7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBWLkRhdGVUaW1lOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsdXhvbic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbW9tZW50JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ2xpYicgPT09IGUgfHwgJ2pxJyA9PT0gZSB8fCAobiAmJiBuLmZuICYmIG4uZm4uanF1ZXJ5KQogICAgICAgICAgICAgICAgICAgID8gKEggPSBuKQogICAgICAgICAgICAgICAgICAgIDogJ3dpbicgPT0gZSB8fCAobiAmJiBuLmRvY3VtZW50KQogICAgICAgICAgICAgICAgICAgID8gKF8gPSAoVyA9IG4pLmRvY3VtZW50KQogICAgICAgICAgICAgICAgICAgIDogJ2RhdGV0aW1lJyA9PT0gZSB8fCAobiAmJiAnRGF0ZVRpbWUnID09PSBuLnR5cGUpCiAgICAgICAgICAgICAgICAgICAgPyAoVi5EYXRlVGltZSA9IG4pCiAgICAgICAgICAgICAgICAgICAgOiAnbHV4b24nID09PSBlIHx8IChuICYmIG4uRml4ZWRPZmZzZXRab25lKQogICAgICAgICAgICAgICAgICAgID8gKG8gPSBuKQogICAgICAgICAgICAgICAgICAgIDogKCdtb21lbnQnID09PSBlIHx8IChuICYmIG4uaXNNb21lbnQpKSAmJiAoaSA9IG4pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFYuZmFjdG9yeSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9ICExOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdC5kb2N1bWVudCAmJiAoXyA9IChXID0gdCkuZG9jdW1lbnQpLCBlICYmIGUuZm4gJiYgZS5mbi5qcXVlcnkgJiYgKChIID0gZSksIChuID0gITApKSwgbjsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChWLnZlcnNpb25DaGVjayA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCBhLCByID0gKGUgfHwgVi52ZXJzaW9uKS5zcGxpdCgnLicpLCBvID0gdC5zcGxpdCgnLicpLCBpID0gMCwgbCA9IG8ubGVuZ3RoOyBpIDwgbDsgaSsrKQogICAgICAgICAgICAgICAgICAgIGlmICgobiA9IHBhcnNlSW50KHJbaV0sIDEwKSB8fCAwKSAhPT0gKGEgPSBwYXJzZUludChvW2ldLCAxMCkgfHwgMCkpIHJldHVybiBhIDwgbjsKICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChWLmlzRGF0YVRhYmxlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciByID0gSCh0KS5nZXQoMCksCiAgICAgICAgICAgICAgICAgICAgbyA9ICExOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0IGluc3RhbmNlb2YgVi5BcGkgfHwKICAgICAgICAgICAgICAgICAgICAoSC5lYWNoKFYuc2V0dGluZ3MsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5uU2Nyb2xsSGVhZCA/IEgoJ3RhYmxlJywgZS5uU2Nyb2xsSGVhZClbMF0gOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUublNjcm9sbEZvb3QgPyBIKCd0YWJsZScsIGUublNjcm9sbEZvb3QpWzBdIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgKGUublRhYmxlICE9PSByICYmIG4gIT09IHIgJiYgYSAhPT0gcikgfHwgKG8gPSAhMCk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbykKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoVi50YWJsZXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSAhMSwKICAgICAgICAgICAgICAgICAgICBuID0KICAgICAgICAgICAgICAgICAgICAgICAgKEguaXNQbGFpbk9iamVjdChlKSAmJiAoKHQgPSBlLmFwaSksIChlID0gZS52aXNpYmxlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIFYuc2V0dGluZ3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShlICYmICFIKHQublRhYmxlKS5pcygnOnZpc2libGUnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm5UYWJsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiB0ID8gbmV3IFgobikgOiBuOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFYuY2FtZWxUb0h1bmdhcmlhbiA9IEIpLAogICAgICAgICAgICBlKCckKCknLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgKGUgPSB0aGlzLnJvd3MoZSkubm9kZXMoKSksIChlID0gSChlKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gSChbXS5jb25jYXQoZS5maWx0ZXIodCkudG9BcnJheSgpLCBlLmZpbmQodCkudG9BcnJheSgpKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBILmVhY2goWydvbicsICdvbmUnLCAnb2ZmJ10sIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICBlKG4gKyAnKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLAogICAgICAgICAgICAgICAgICAgICAgICBlID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodFswXSA9IHRbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoL1xzLykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm1hdGNoKC9cLmR0XGIvKSA/IHQgOiB0ICsgJy5kdCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignICcpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEgodGhpcy50YWJsZXMoKS5ub2RlcygpKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbbl0uYXBwbHkoZSwgdCksIHRoaXM7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2NsZWFyKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIG10KHQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdlcnJvcigpJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgJCh0LCAwLCBlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnc2V0dGluZ3MoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWCh0aGlzLmNvbnRleHQsIHRoaXMuY29udGV4dCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdpbml0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgICAgIHJldHVybiB0Lmxlbmd0aCA/IHRbMF0ub0luaXQgOiBudWxsOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgnZGF0YSgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSh0LmFvRGF0YSwgJ19hRGF0YScpOwogICAgICAgICAgICAgICAgfSkuZmxhdHRlbigpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZSgndHJpZ2dlcigpJywgZnVuY3Rpb24gKGUsIG4sIGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEcodCwgbnVsbCwgZSwgbiwgYSk7CiAgICAgICAgICAgICAgICB9KS5mbGF0dGVuKCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlKCdyZWFkeSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICA/IHRoaXMudGFibGVzKCkuZXZlcnkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dFswXS5fYkluaXRDb21wbGV0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQuY2FsbCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMub24oJ2luaXQuZHQuRFQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOiBlLmxlbmd0aAogICAgICAgICAgICAgICAgICAgID8gZVswXS5fYkluaXRDb21wbGV0ZSB8fCAhMQogICAgICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2Rlc3Ryb3koKScsIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIChjID0gYyB8fCAhMSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQub0NsYXNzZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdC5uVGFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5uVEJvZHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC5uVEhlYWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5uVEZvb3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gSChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBIKGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IEgodC5uVGFibGVXcmFwcGVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0LmFvRGF0YS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHQublRyIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGUub3JkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHQuYkRlc3Ryb3lpbmcgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRyh0LCAnYW9EZXN0cm95Q2FsbGJhY2snLCAnZGVzdHJveScsIFt0XSwgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgbmV3IFgodCkuY29sdW1ucygpLnZpc2libGUoITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwub2ZmKCcuRFQnKS5maW5kKCc6bm90KHRib2R5ICopJykub2ZmKCcuRFQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKFcpLm9mZignLkRULScgKyB0LnNJbnN0YW5jZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAhPSByLnBhcmVudE5vZGUgJiYgKGkuY2hpbGRyZW4oJ3RoZWFkJykuZGV0YWNoKCksIGkuYXBwZW5kKHIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIG4gIT0gby5wYXJlbnROb2RlICYmIChpLmNoaWxkcmVuKCd0Zm9vdCcpLmRldGFjaCgpLCBpLmFwcGVuZChvKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jb2xncm91cC5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5hYVNvcnRpbmcgPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuYWFTb3J0aW5nRml4ZWQgPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWnQodCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSCgndGgsIHRkJywgcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKHUuY2FuQXNjICsgJyAnICsgdS5jYW5EZXNjICsgJyAnICsgdS5pc0FzYyArICcgJyArIHUuaXNEZXNjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCd3aWR0aCcsICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmNoaWxkcmVuKCkuZGV0YWNoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5hcHBlbmQocyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5uVGFibGVXcmFwcGVyLnBhcmVudE5vZGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQublRhYmxlV3JhcHBlci5uZXh0U2libGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBjID8gJ3JlbW92ZScgOiAnZGV0YWNoJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpW3VdKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFt1XSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFjICYmIG8gJiYgKG8uaW5zZXJ0QmVmb3JlKG4sIHIpLCBpLmNzcygnd2lkdGgnLCB0LnNEZXN0cm95V2lkdGgpLnJlbW92ZUNsYXNzKGUudGFibGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWLnNldHRpbmdzLmluZGV4T2YodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gYSAmJiBWLnNldHRpbmdzLnNwbGljZShhLCAxKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIEguZWFjaChbJ2NvbHVtbicsICdyb3cnLCAnY2VsbCddLCBmdW5jdGlvbiAodCwgcykgewogICAgICAgICAgICAgICAgZShzICsgJ3MoKS5ldmVyeSgpJywgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMuc2VsZWN0b3Iub3B0cywKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAwOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCdldmVyeScsIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChyID0gaVtzXShlLCBvKSksICdjZWxsJyA9PT0gcyA/IGEuY2FsbChyLCByWzBdWzBdLnJvdywgclswXVswXS5jb2x1bW4sIG4sIGwpIDogYS5jYWxsKHIsIGUsIG4sIGwpLCBsKys7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUoJ2kxOG4oKScsIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMuY29udGV4dFswXSwKICAgICAgICAgICAgICAgICAgICB0ID0gVSh0KShhLm9MYW5ndWFnZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3N0cmluZycgPT0KICAgICAgICAgICAgICAgICAgICB0eXBlb2YgKHQgPSBILmlzUGxhaW5PYmplY3QoKHQgPSB2b2lkIDAgPT09IHQgPyBlIDogdCkpID8gKHZvaWQgMCAhPT0gbiAmJiB2b2lkIDAgIT09IHRbbl0gPyB0W25dIDogdC5fKSA6IHQpCiAgICAgICAgICAgICAgICAgICAgPyB0LnJlcGxhY2UoJyVkJywgbikKICAgICAgICAgICAgICAgICAgICA6IHQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoVi52ZXJzaW9uID0gJzIuMS44JyksCiAgICAgICAgICAgIChWLnNldHRpbmdzID0gW10pLAogICAgICAgICAgICAoVi5tb2RlbHMgPSB7fSksCiAgICAgICAgICAgIChWLm1vZGVscy5vU2VhcmNoID0geyBjYXNlSW5zZW5zaXRpdmU6ICEwLCBzZWFyY2g6ICcnLCByZWdleDogITEsIHNtYXJ0OiAhMCwgcmV0dXJuOiAhMSB9KSwKICAgICAgICAgICAgKFYubW9kZWxzLm9Sb3cgPSB7CiAgICAgICAgICAgICAgICBuVHI6IG51bGwsCiAgICAgICAgICAgICAgICBhbkNlbGxzOiBudWxsLAogICAgICAgICAgICAgICAgX2FEYXRhOiBbXSwKICAgICAgICAgICAgICAgIF9hU29ydERhdGE6IG51bGwsCiAgICAgICAgICAgICAgICBfYUZpbHRlckRhdGE6IG51bGwsCiAgICAgICAgICAgICAgICBfc0ZpbHRlclJvdzogbnVsbCwKICAgICAgICAgICAgICAgIHNyYzogbnVsbCwKICAgICAgICAgICAgICAgIGlkeDogLTEsCiAgICAgICAgICAgICAgICBkaXNwbGF5RGF0YTogbnVsbCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChWLm1vZGVscy5vQ29sdW1uID0gewogICAgICAgICAgICAgICAgaWR4OiBudWxsLAogICAgICAgICAgICAgICAgYURhdGFTb3J0OiBudWxsLAogICAgICAgICAgICAgICAgYXNTb3J0aW5nOiBudWxsLAogICAgICAgICAgICAgICAgYlNlYXJjaGFibGU6IG51bGwsCiAgICAgICAgICAgICAgICBiU29ydGFibGU6IG51bGwsCiAgICAgICAgICAgICAgICBiVmlzaWJsZTogbnVsbCwKICAgICAgICAgICAgICAgIF9zTWFudWFsVHlwZTogbnVsbCwKICAgICAgICAgICAgICAgIF9iQXR0clNyYzogITEsCiAgICAgICAgICAgICAgICBmbkNyZWF0ZWRDZWxsOiBudWxsLAogICAgICAgICAgICAgICAgZm5HZXREYXRhOiBudWxsLAogICAgICAgICAgICAgICAgZm5TZXREYXRhOiBudWxsLAogICAgICAgICAgICAgICAgbURhdGE6IG51bGwsCiAgICAgICAgICAgICAgICBtUmVuZGVyOiBudWxsLAogICAgICAgICAgICAgICAgc0NsYXNzOiBudWxsLAogICAgICAgICAgICAgICAgc0NvbnRlbnRQYWRkaW5nOiBudWxsLAogICAgICAgICAgICAgICAgc0RlZmF1bHRDb250ZW50OiBudWxsLAogICAgICAgICAgICAgICAgc05hbWU6IG51bGwsCiAgICAgICAgICAgICAgICBzU29ydERhdGFUeXBlOiAnc3RkJywKICAgICAgICAgICAgICAgIHNTb3J0aW5nQ2xhc3M6IG51bGwsCiAgICAgICAgICAgICAgICBzVGl0bGU6IG51bGwsCiAgICAgICAgICAgICAgICBzVHlwZTogbnVsbCwKICAgICAgICAgICAgICAgIHNXaWR0aDogbnVsbCwKICAgICAgICAgICAgICAgIHNXaWR0aE9yaWc6IG51bGwsCiAgICAgICAgICAgICAgICBtYXhMZW5TdHJpbmc6IG51bGwsCiAgICAgICAgICAgICAgICBzZWFyY2hGaXhlZDogbnVsbCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChWLmRlZmF1bHRzID0gewogICAgICAgICAgICAgICAgYWFEYXRhOiBudWxsLAogICAgICAgICAgICAgICAgYWFTb3J0aW5nOiBbWzAsICdhc2MnXV0sCiAgICAgICAgICAgICAgICBhYVNvcnRpbmdGaXhlZDogW10sCiAgICAgICAgICAgICAgICBhamF4OiBudWxsLAogICAgICAgICAgICAgICAgYUxlbmd0aE1lbnU6IFsxMCwgMjUsIDUwLCAxMDBdLAogICAgICAgICAgICAgICAgYW9Db2x1bW5zOiBudWxsLAogICAgICAgICAgICAgICAgYW9Db2x1bW5EZWZzOiBudWxsLAogICAgICAgICAgICAgICAgYW9TZWFyY2hDb2xzOiBbXSwKICAgICAgICAgICAgICAgIGJBdXRvV2lkdGg6ICEwLAogICAgICAgICAgICAgICAgYkRlZmVyUmVuZGVyOiAhMCwKICAgICAgICAgICAgICAgIGJEZXN0cm95OiAhMSwKICAgICAgICAgICAgICAgIGJGaWx0ZXI6ICEwLAogICAgICAgICAgICAgICAgYkluZm86ICEwLAogICAgICAgICAgICAgICAgYkxlbmd0aENoYW5nZTogITAsCiAgICAgICAgICAgICAgICBiUGFnaW5hdGU6ICEwLAogICAgICAgICAgICAgICAgYlByb2Nlc3Npbmc6ICExLAogICAgICAgICAgICAgICAgYlJldHJpZXZlOiAhMSwKICAgICAgICAgICAgICAgIGJTY3JvbGxDb2xsYXBzZTogITEsCiAgICAgICAgICAgICAgICBiU2VydmVyU2lkZTogITEsCiAgICAgICAgICAgICAgICBiU29ydDogITAsCiAgICAgICAgICAgICAgICBiU29ydE11bHRpOiAhMCwKICAgICAgICAgICAgICAgIGJTb3J0Q2VsbHNUb3A6IG51bGwsCiAgICAgICAgICAgICAgICBiU29ydENsYXNzZXM6ICEwLAogICAgICAgICAgICAgICAgYlN0YXRlU2F2ZTogITEsCiAgICAgICAgICAgICAgICBmbkNyZWF0ZWRSb3c6IG51bGwsCiAgICAgICAgICAgICAgICBmbkRyYXdDYWxsYmFjazogbnVsbCwKICAgICAgICAgICAgICAgIGZuRm9vdGVyQ2FsbGJhY2s6IG51bGwsCiAgICAgICAgICAgICAgICBmbkZvcm1hdE51bWJlcjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csIHRoaXMub0xhbmd1YWdlLnNUaG91c2FuZHMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZuSGVhZGVyQ2FsbGJhY2s6IG51bGwsCiAgICAgICAgICAgICAgICBmbkluZm9DYWxsYmFjazogbnVsbCwKICAgICAgICAgICAgICAgIGZuSW5pdENvbXBsZXRlOiBudWxsLAogICAgICAgICAgICAgICAgZm5QcmVEcmF3Q2FsbGJhY2s6IG51bGwsCiAgICAgICAgICAgICAgICBmblJvd0NhbGxiYWNrOiBudWxsLAogICAgICAgICAgICAgICAgZm5TdGF0ZUxvYWRDYWxsYmFjazogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgtMSA9PT0gdC5pU3RhdGVEdXJhdGlvbiA/IHNlc3Npb25TdG9yYWdlIDogbG9jYWxTdG9yYWdlKS5nZXRJdGVtKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEYXRhVGFibGVzXycgKyB0LnNJbnN0YW5jZSArICdfJyArIGxvY2F0aW9uLnBhdGhuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm5TdGF0ZUxvYWRQYXJhbXM6IG51bGwsCiAgICAgICAgICAgICAgICBmblN0YXRlTG9hZGVkOiBudWxsLAogICAgICAgICAgICAgICAgZm5TdGF0ZVNhdmVDYWxsYmFjazogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAoLTEgPT09IHQuaVN0YXRlRHVyYXRpb24gPyBzZXNzaW9uU3RvcmFnZSA6IGxvY2FsU3RvcmFnZSkuc2V0SXRlbSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEYXRhVGFibGVzXycgKyB0LnNJbnN0YW5jZSArICdfJyArIGxvY2F0aW9uLnBhdGhuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmblN0YXRlU2F2ZVBhcmFtczogbnVsbCwKICAgICAgICAgICAgICAgIGlTdGF0ZUR1cmF0aW9uOiA3MjAwLAogICAgICAgICAgICAgICAgaURpc3BsYXlMZW5ndGg6IDEwLAogICAgICAgICAgICAgICAgaURpc3BsYXlTdGFydDogMCwKICAgICAgICAgICAgICAgIGlUYWJJbmRleDogMCwKICAgICAgICAgICAgICAgIG9DbGFzc2VzOiB7fSwKICAgICAgICAgICAgICAgIG9MYW5ndWFnZTogewogICAgICAgICAgICAgICAgICAgIG9BcmlhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYWJsZTogJzogQWN0aXZhdGUgdG8gc29ydCcsCiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYWJsZVJldmVyc2U6ICc6IEFjdGl2YXRlIHRvIGludmVydCBzb3J0aW5nJywKICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhYmxlUmVtb3ZlOiAnOiBBY3RpdmF0ZSB0byByZW1vdmUgc29ydGluZycsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRlOiB7IGZpcnN0OiAnRmlyc3QnLCBsYXN0OiAnTGFzdCcsIG5leHQ6ICdOZXh0JywgcHJldmlvdXM6ICdQcmV2aW91cycsIG51bWJlcjogJycgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9QYWdpbmF0ZTogeyBzRmlyc3Q6ICfCqycsIHNMYXN0OiAnwrsnLCBzTmV4dDogJ+KAuicsIHNQcmV2aW91czogJ+KAuScgfSwKICAgICAgICAgICAgICAgICAgICBlbnRyaWVzOiB7IF86ICdlbnRyaWVzJywgMTogJ2VudHJ5JyB9LAogICAgICAgICAgICAgICAgICAgIHNFbXB0eVRhYmxlOiAnTm8gZGF0YSBhdmFpbGFibGUgaW4gdGFibGUnLAogICAgICAgICAgICAgICAgICAgIHNJbmZvOiAnU2hvd2luZyBfU1RBUlRfIHRvIF9FTkRfIG9mIF9UT1RBTF8gX0VOVFJJRVMtVE9UQUxfJywKICAgICAgICAgICAgICAgICAgICBzSW5mb0VtcHR5OiAnU2hvd2luZyAwIHRvIDAgb2YgMCBfRU5UUklFUy1UT1RBTF8nLAogICAgICAgICAgICAgICAgICAgIHNJbmZvRmlsdGVyZWQ6ICcoZmlsdGVyZWQgZnJvbSBfTUFYXyB0b3RhbCBfRU5UUklFUy1NQVhfKScsCiAgICAgICAgICAgICAgICAgICAgc0luZm9Qb3N0Rml4OiAnJywKICAgICAgICAgICAgICAgICAgICBzRGVjaW1hbDogJycsCiAgICAgICAgICAgICAgICAgICAgc1Rob3VzYW5kczogJywnLAogICAgICAgICAgICAgICAgICAgIHNMZW5ndGhNZW51OiAnX01FTlVfIF9FTlRSSUVTXyBwZXIgcGFnZScsCiAgICAgICAgICAgICAgICAgICAgc0xvYWRpbmdSZWNvcmRzOiAnTG9hZGluZy4uLicsCiAgICAgICAgICAgICAgICAgICAgc1Byb2Nlc3Npbmc6ICcnLAogICAgICAgICAgICAgICAgICAgIHNTZWFyY2g6ICdTZWFyY2g6JywKICAgICAgICAgICAgICAgICAgICBzU2VhcmNoUGxhY2Vob2xkZXI6ICcnLAogICAgICAgICAgICAgICAgICAgIHNVcmw6ICcnLAogICAgICAgICAgICAgICAgICAgIHNaZXJvUmVjb3JkczogJ05vIG1hdGNoaW5nIHJlY29yZHMgZm91bmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9yZGVyRGVzY1JldmVyc2U6ICEwLAogICAgICAgICAgICAgICAgb1NlYXJjaDogSC5leHRlbmQoe30sIFYubW9kZWxzLm9TZWFyY2gpLAogICAgICAgICAgICAgICAgbGF5b3V0OiB7IHRvcFN0YXJ0OiAncGFnZUxlbmd0aCcsIHRvcEVuZDogJ3NlYXJjaCcsIGJvdHRvbVN0YXJ0OiAnaW5mbycsIGJvdHRvbUVuZDogJ3BhZ2luZycgfSwKICAgICAgICAgICAgICAgIHNEb206IG51bGwsCiAgICAgICAgICAgICAgICBzZWFyY2hEZWxheTogbnVsbCwKICAgICAgICAgICAgICAgIHNQYWdpbmF0aW9uVHlwZTogJycsCiAgICAgICAgICAgICAgICBzU2Nyb2xsWDogJycsCiAgICAgICAgICAgICAgICBzU2Nyb2xsWElubmVyOiAnJywKICAgICAgICAgICAgICAgIHNTY3JvbGxZOiAnJywKICAgICAgICAgICAgICAgIHNTZXJ2ZXJNZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgcmVuZGVyZXI6IG51bGwsCiAgICAgICAgICAgICAgICByb3dJZDogJ0RUX1Jvd0lkJywKICAgICAgICAgICAgICAgIGNhcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICBpRGVmZXJMb2FkaW5nOiBudWxsLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgWihWLmRlZmF1bHRzKSwKICAgICAgICAgICAgKFYuZGVmYXVsdHMuY29sdW1uID0gewogICAgICAgICAgICAgICAgYURhdGFTb3J0OiBudWxsLAogICAgICAgICAgICAgICAgaURhdGFTb3J0OiAtMSwKICAgICAgICAgICAgICAgIGFyaWFUaXRsZTogJycsCiAgICAgICAgICAgICAgICBhc1NvcnRpbmc6IFsnYXNjJywgJ2Rlc2MnLCAnJ10sCiAgICAgICAgICAgICAgICBiU2VhcmNoYWJsZTogITAsCiAgICAgICAgICAgICAgICBiU29ydGFibGU6ICEwLAogICAgICAgICAgICAgICAgYlZpc2libGU6ICEwLAogICAgICAgICAgICAgICAgZm5DcmVhdGVkQ2VsbDogbnVsbCwKICAgICAgICAgICAgICAgIG1EYXRhOiBudWxsLAogICAgICAgICAgICAgICAgbVJlbmRlcjogbnVsbCwKICAgICAgICAgICAgICAgIHNDZWxsVHlwZTogJ3RkJywKICAgICAgICAgICAgICAgIHNDbGFzczogJycsCiAgICAgICAgICAgICAgICBzQ29udGVudFBhZGRpbmc6ICcnLAogICAgICAgICAgICAgICAgc0RlZmF1bHRDb250ZW50OiBudWxsLAogICAgICAgICAgICAgICAgc05hbWU6ICcnLAogICAgICAgICAgICAgICAgc1NvcnREYXRhVHlwZTogJ3N0ZCcsCiAgICAgICAgICAgICAgICBzVGl0bGU6IG51bGwsCiAgICAgICAgICAgICAgICBzVHlwZTogbnVsbCwKICAgICAgICAgICAgICAgIHNXaWR0aDogbnVsbCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIFooVi5kZWZhdWx0cy5jb2x1bW4pLAogICAgICAgICAgICAoVi5tb2RlbHMub1NldHRpbmdzID0gewogICAgICAgICAgICAgICAgb0ZlYXR1cmVzOiB7CiAgICAgICAgICAgICAgICAgICAgYkF1dG9XaWR0aDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBiRGVmZXJSZW5kZXI6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgYkZpbHRlcjogbnVsbCwKICAgICAgICAgICAgICAgICAgICBiSW5mbzogITAsCiAgICAgICAgICAgICAgICAgICAgYkxlbmd0aENoYW5nZTogITAsCiAgICAgICAgICAgICAgICAgICAgYlBhZ2luYXRlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGJQcm9jZXNzaW5nOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGJTZXJ2ZXJTaWRlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGJTb3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIGJTb3J0TXVsdGk6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgYlNvcnRDbGFzc2VzOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGJTdGF0ZVNhdmU6IG51bGwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb1Njcm9sbDogeyBiQ29sbGFwc2U6IG51bGwsIGlCYXJXaWR0aDogMCwgc1g6IG51bGwsIHNYSW5uZXI6IG51bGwsIHNZOiBudWxsIH0sCiAgICAgICAgICAgICAgICBvTGFuZ3VhZ2U6IHsgZm5JbmZvQ2FsbGJhY2s6IG51bGwgfSwKICAgICAgICAgICAgICAgIG9Ccm93c2VyOiB7IGJTY3JvbGxiYXJMZWZ0OiAhMSwgYmFyV2lkdGg6IDAgfSwKICAgICAgICAgICAgICAgIGFqYXg6IG51bGwsCiAgICAgICAgICAgICAgICBhYW5GZWF0dXJlczogW10sCiAgICAgICAgICAgICAgICBhb0RhdGE6IFtdLAogICAgICAgICAgICAgICAgYWlEaXNwbGF5OiBbXSwKICAgICAgICAgICAgICAgIGFpRGlzcGxheU1hc3RlcjogW10sCiAgICAgICAgICAgICAgICBhSWRzOiB7fSwKICAgICAgICAgICAgICAgIGFvQ29sdW1uczogW10sCiAgICAgICAgICAgICAgICBhb0hlYWRlcjogW10sCiAgICAgICAgICAgICAgICBhb0Zvb3RlcjogW10sCiAgICAgICAgICAgICAgICBvUHJldmlvdXNTZWFyY2g6IHt9LAogICAgICAgICAgICAgICAgc2VhcmNoRml4ZWQ6IHt9LAogICAgICAgICAgICAgICAgYW9QcmVTZWFyY2hDb2xzOiBbXSwKICAgICAgICAgICAgICAgIGFhU29ydGluZzogbnVsbCwKICAgICAgICAgICAgICAgIGFhU29ydGluZ0ZpeGVkOiBbXSwKICAgICAgICAgICAgICAgIHNEZXN0cm95V2lkdGg6IDAsCiAgICAgICAgICAgICAgICBhb1Jvd0NhbGxiYWNrOiBbXSwKICAgICAgICAgICAgICAgIGFvSGVhZGVyQ2FsbGJhY2s6IFtdLAogICAgICAgICAgICAgICAgYW9Gb290ZXJDYWxsYmFjazogW10sCiAgICAgICAgICAgICAgICBhb0RyYXdDYWxsYmFjazogW10sCiAgICAgICAgICAgICAgICBhb1Jvd0NyZWF0ZWRDYWxsYmFjazogW10sCiAgICAgICAgICAgICAgICBhb1ByZURyYXdDYWxsYmFjazogW10sCiAgICAgICAgICAgICAgICBhb0luaXRDb21wbGV0ZTogW10sCiAgICAgICAgICAgICAgICBhb1N0YXRlU2F2ZVBhcmFtczogW10sCiAgICAgICAgICAgICAgICBhb1N0YXRlTG9hZFBhcmFtczogW10sCiAgICAgICAgICAgICAgICBhb1N0YXRlTG9hZGVkOiBbXSwKICAgICAgICAgICAgICAgIHNUYWJsZUlkOiAnJywKICAgICAgICAgICAgICAgIG5UYWJsZTogbnVsbCwKICAgICAgICAgICAgICAgIG5USGVhZDogbnVsbCwKICAgICAgICAgICAgICAgIG5URm9vdDogbnVsbCwKICAgICAgICAgICAgICAgIG5UQm9keTogbnVsbCwKICAgICAgICAgICAgICAgIG5UYWJsZVdyYXBwZXI6IG51bGwsCiAgICAgICAgICAgICAgICBiSW5pdGlhbGlzZWQ6ICExLAogICAgICAgICAgICAgICAgYW9PcGVuUm93czogW10sCiAgICAgICAgICAgICAgICBzRG9tOiBudWxsLAogICAgICAgICAgICAgICAgc2VhcmNoRGVsYXk6IG51bGwsCiAgICAgICAgICAgICAgICBzUGFnaW5hdGlvblR5cGU6ICd0d29fYnV0dG9uJywKICAgICAgICAgICAgICAgIHBhZ2luZ0NvbnRyb2xzOiAwLAogICAgICAgICAgICAgICAgaVN0YXRlRHVyYXRpb246IDAsCiAgICAgICAgICAgICAgICBhb1N0YXRlU2F2ZTogW10sCiAgICAgICAgICAgICAgICBhb1N0YXRlTG9hZDogW10sCiAgICAgICAgICAgICAgICBvU2F2ZWRTdGF0ZTogbnVsbCwKICAgICAgICAgICAgICAgIG9Mb2FkZWRTdGF0ZTogbnVsbCwKICAgICAgICAgICAgICAgIGJBamF4RGF0YUdldDogITAsCiAgICAgICAgICAgICAgICBqcVhIUjogbnVsbCwKICAgICAgICAgICAgICAgIGpzb246IHZvaWQgMCwKICAgICAgICAgICAgICAgIG9BamF4RGF0YTogdm9pZCAwLAogICAgICAgICAgICAgICAgc1NlcnZlck1ldGhvZDogbnVsbCwKICAgICAgICAgICAgICAgIGZuRm9ybWF0TnVtYmVyOiBudWxsLAogICAgICAgICAgICAgICAgYUxlbmd0aE1lbnU6IG51bGwsCiAgICAgICAgICAgICAgICBpRHJhdzogMCwKICAgICAgICAgICAgICAgIGJEcmF3aW5nOiAhMSwKICAgICAgICAgICAgICAgIGlEcmF3RXJyb3I6IC0xLAogICAgICAgICAgICAgICAgX2lEaXNwbGF5TGVuZ3RoOiAxMCwKICAgICAgICAgICAgICAgIF9pRGlzcGxheVN0YXJ0OiAwLAogICAgICAgICAgICAgICAgX2lSZWNvcmRzVG90YWw6IDAsCiAgICAgICAgICAgICAgICBfaVJlY29yZHNEaXNwbGF5OiAwLAogICAgICAgICAgICAgICAgb0NsYXNzZXM6IHt9LAogICAgICAgICAgICAgICAgYkZpbHRlcmVkOiAhMSwKICAgICAgICAgICAgICAgIGJTb3J0ZWQ6ICExLAogICAgICAgICAgICAgICAgYlNvcnRDZWxsc1RvcDogbnVsbCwKICAgICAgICAgICAgICAgIG9Jbml0OiBudWxsLAogICAgICAgICAgICAgICAgYW9EZXN0cm95Q2FsbGJhY2s6IFtdLAogICAgICAgICAgICAgICAgZm5SZWNvcmRzVG90YWw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NzcCcgPT0gSih0aGlzKSA/ICt0aGlzLl9pUmVjb3Jkc1RvdGFsIDogdGhpcy5haURpc3BsYXlNYXN0ZXIubGVuZ3RoOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZuUmVjb3Jkc0Rpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NzcCcgPT0gSih0aGlzKSA/ICt0aGlzLl9pUmVjb3Jkc0Rpc3BsYXkgOiB0aGlzLmFpRGlzcGxheS5sZW5ndGg7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm5EaXNwbGF5RW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9pRGlzcGxheUxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMuX2lEaXNwbGF5U3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlICsgdCwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuYWlEaXNwbGF5Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMub0ZlYXR1cmVzLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gci5iUGFnaW5hdGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYlNlcnZlclNpZGUKICAgICAgICAgICAgICAgICAgICAgICAgPyAhMSA9PT0gbyB8fCAtMSA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlICsgYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbihlICsgdCwgdGhpcy5faVJlY29yZHNEaXNwbGF5KQogICAgICAgICAgICAgICAgICAgICAgICA6ICFvIHx8IGEgPCBuIHx8IC0xID09PSB0CiAgICAgICAgICAgICAgICAgICAgICAgID8gYQogICAgICAgICAgICAgICAgICAgICAgICA6IG47CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb0luc3RhbmNlOiBudWxsLAogICAgICAgICAgICAgICAgc0luc3RhbmNlOiBudWxsLAogICAgICAgICAgICAgICAgaVRhYkluZGV4OiAwLAogICAgICAgICAgICAgICAgblNjcm9sbEhlYWQ6IG51bGwsCiAgICAgICAgICAgICAgICBuU2Nyb2xsRm9vdDogbnVsbCwKICAgICAgICAgICAgICAgIGFMYXN0U29ydDogW10sCiAgICAgICAgICAgICAgICBvUGx1Z2luczoge30sCiAgICAgICAgICAgICAgICByb3dJZEZuOiBudWxsLAogICAgICAgICAgICAgICAgcm93SWQ6IG51bGwsCiAgICAgICAgICAgICAgICBjYXB0aW9uOiAnJywKICAgICAgICAgICAgICAgIGNhcHRpb25Ob2RlOiBudWxsLAogICAgICAgICAgICAgICAgY29sZ3JvdXA6IG51bGwsCiAgICAgICAgICAgICAgICBkZWZlckxvYWRpbmc6IG51bGwsCiAgICAgICAgICAgICAgICB0eXBlRGV0ZWN0OiAhMCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIFYuZXh0LnBhZ2VyKTsKICAgIEguZXh0ZW5kKHhlLCB7CiAgICAgICAgc2ltcGxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbJ3ByZXZpb3VzJywgJ25leHQnXTsKICAgICAgICB9LAogICAgICAgIGZ1bGw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIFsnZmlyc3QnLCAncHJldmlvdXMnLCAnbmV4dCcsICdsYXN0J107CiAgICAgICAgfSwKICAgICAgICBudW1iZXJzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbJ251bWJlcnMnXTsKICAgICAgICB9LAogICAgICAgIHNpbXBsZV9udW1iZXJzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbJ3ByZXZpb3VzJywgJ251bWJlcnMnLCAnbmV4dCddOwogICAgICAgIH0sCiAgICAgICAgZnVsbF9udW1iZXJzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbJ2ZpcnN0JywgJ3ByZXZpb3VzJywgJ251bWJlcnMnLCAnbmV4dCcsICdsYXN0J107CiAgICAgICAgfSwKICAgICAgICBmaXJzdF9sYXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbJ2ZpcnN0JywgJ2xhc3QnXTsKICAgICAgICB9LAogICAgICAgIGZpcnN0X2xhc3RfbnVtYmVyczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gWydmaXJzdCcsICdudW1iZXJzJywgJ2xhc3QnXTsKICAgICAgICB9LAogICAgICAgIF9udW1iZXJzOiBFZSwKICAgICAgICBudW1iZXJzX2xlbmd0aDogNywKICAgIH0pLAogICAgICAgIEguZXh0ZW5kKCEwLCBWLmV4dC5yZW5kZXJlciwgewogICAgICAgICAgICBwYWdpbmdCdXR0b246IHsKICAgICAgICAgICAgICAgIF86IGZ1bmN0aW9uICh0LCBlLCBuLCBhLCByKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0Lm9DbGFzc2VzLnBhZ2luZywKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IFt0LmJ1dHRvbl07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiBvLnB1c2godC5hY3RpdmUpLAogICAgICAgICAgICAgICAgICAgICAgICByICYmIG8ucHVzaCh0LmRpc2FibGVkKSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogKGEgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbGxpcHNpcycgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBIKCc8c3BhbiBjbGFzcz0iZWxsaXBzaXMiPjwvc3Bhbj4nKS5odG1sKG4pWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSCgnPGJ1dHRvbj4nLCB7IGNsYXNzOiBvLmpvaW4oJyAnKSwgcm9sZTogJ2xpbmsnLCB0eXBlOiAnYnV0dG9uJyB9KS5odG1sKG4pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrZXI6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFnaW5nQ29udGFpbmVyOiB7CiAgICAgICAgICAgICAgICBfOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9KTsKICAgIGZ1bmN0aW9uIHdlKHQsIGUsIG4sIGEsIHIpIHsKICAgICAgICByZXR1cm4gaSA/IHRbZV0ocikgOiBvID8gdFtuXShyKSA6IGEgPyB0W2FdKHIpIDogdDsKICAgIH0KICAgIHZhciBvLAogICAgICAgIGksCiAgICAgICAgVGUgPSAhMTsKICAgIGZ1bmN0aW9uIF9lKHQsIGUsIG4pIHsKICAgICAgICB2YXIgYTsKICAgICAgICBpZiAoKFcubHV4b24gJiYgIW8gJiYgKG8gPSBXLmx1eG9uKSwgKGkgPSBXLm1vbWVudCAmJiAhaSA/IFcubW9tZW50IDogaSkpKSB7CiAgICAgICAgICAgIGlmICghKGEgPSBpLnV0Yyh0LCBlLCBuLCAhMCkpLmlzVmFsaWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgfSBlbHNlIGlmIChvKSB7CiAgICAgICAgICAgIGlmICghKGEgPSBlICYmICdzdHJpbmcnID09IHR5cGVvZiB0ID8gby5EYXRlVGltZS5mcm9tRm9ybWF0KHQsIGUpIDogby5EYXRlVGltZS5mcm9tSVNPKHQpKS5pc1ZhbGlkKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgYS5zZXRMb2NhbGUobik7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgID8gKFRlIHx8IGFsZXJ0KCdEYXRhVGFibGVzIHdhcm5pbmc6IEZvcm1hdHRlZCBkYXRlIHdpdGhvdXQgTW9tZW50LmpzIG9yIEx1eG9uIC0gaHR0cHM6Ly9kYXRhdGFibGVzLm5ldC90bi8xNycpLCAoVGUgPSAhMCkpCiAgICAgICAgICAgICAgICA6IChhID0gbmV3IERhdGUodCkpOwogICAgICAgIHJldHVybiBhOwogICAgfQogICAgZnVuY3Rpb24gQ2UocykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgciwgbywgaSkgewogICAgICAgICAgICAwID09PSBhcmd1bWVudHMubGVuZ3RoCiAgICAgICAgICAgICAgICA/ICgobyA9ICdlbicpLCAoYSA9IHIgPSBudWxsKSkKICAgICAgICAgICAgICAgIDogMSA9PT0gYXJndW1lbnRzLmxlbmd0aAogICAgICAgICAgICAgICAgPyAoKG8gPSAnZW4nKSwgKHIgPSBhKSwgKGEgPSBudWxsKSkKICAgICAgICAgICAgICAgIDogMiA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAoKG8gPSByKSwgKHIgPSBhKSwgKGEgPSBudWxsKSk7CiAgICAgICAgICAgIHZhciBsID0gJ2RhdGV0aW1lJyArIChyID8gJy0nICsgciA6ICcnKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIFYuZXh0LnR5cGUub3JkZXJbbCArICctcHJlJ10gfHwKICAgICAgICAgICAgICAgICAgICBWLnR5cGUobCwgewogICAgICAgICAgICAgICAgICAgICAgICBkZXRlY3Q6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gbCAmJiBsOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvcmRlcjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnZhbHVlT2YoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2R0LXJpZ2h0JywKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSB0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy0tbm93JyA9PT0gaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgobiA9IG5ldyBEYXRlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlLlVUQygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZ2V0RnVsbFllYXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZ2V0TW9udGgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZ2V0RGF0ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5nZXRIb3VycygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5nZXRNaW51dGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmdldFNlY29uZHMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnID09PSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJycgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ3NvcnQnICE9PSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX2UoJzAwMDAtMDEtMDEgMDA6MDA6MDAnLCBudWxsLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAhKG51bGwgPT09IHIgfHwgYSAhPT0gciB8fCAnc29ydCcgPT09IGUgfHwgJ3R5cGUnID09PSBlIHx8IHQgaW5zdGFuY2VvZiBEYXRlKSB8fCBudWxsID09PSAobiA9IF9lKHQsIGEsIG8pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdzb3J0JyA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgodCA9IG51bGwgPT09IHIgPyB3ZShuLCAndG9EYXRlJywgJ3RvSlNEYXRlJywgJycpW3NdKCkgOiB3ZShuLCAnZm9ybWF0JywgJ3RvRm9ybWF0JywgJ3RvSVNPU3RyaW5nJywgcikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGlzcGxheScgPT09IGUgPyB1KHQpIDogdCkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH07CiAgICB9CiAgICB2YXIgTGUgPSAnLCcsCiAgICAgICAgSWUgPSAnLic7CiAgICBpZiAodm9pZCAwICE9PSBXLkludGwpCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh2YXIgQWUgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoKS5mb3JtYXRUb1BhcnRzKDEwMDAwMC4xKSwgYSA9IDA7IGEgPCBBZS5sZW5ndGg7IGErKykKICAgICAgICAgICAgICAgICdncm91cCcgPT09IEFlW2FdLnR5cGUgPyAoTGUgPSBBZVthXS52YWx1ZSkgOiAnZGVjaW1hbCcgPT09IEFlW2FdLnR5cGUgJiYgKEllID0gQWVbYV0udmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAoVi5kYXRldGltZSA9IGZ1bmN0aW9uIChuLCBhKSB7CiAgICAgICAgdmFyIHIgPSAnZGF0ZXRpbWUtJyArIG47CiAgICAgICAgKGEgPSBhIHx8ICdlbicpLAogICAgICAgICAgICBWLmV4dC50eXBlLm9yZGVyW3JdIHx8CiAgICAgICAgICAgICAgICBWLnR5cGUociwgewogICAgICAgICAgICAgICAgICAgIGRldGVjdDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBfZSh0LCBuLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoJycgIT09IHQgJiYgIWUpICYmIHI7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvcmRlcjogewogICAgICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2UodCwgbiwgYSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2R0LXJpZ2h0JywKICAgICAgICAgICAgICAgIH0pOwogICAgfSksCiAgICAgICAgKFYucmVuZGVyID0gewogICAgICAgICAgICBkYXRlOiBDZSgndG9Mb2NhbGVEYXRlU3RyaW5nJyksCiAgICAgICAgICAgIGRhdGV0aW1lOiBDZSgndG9Mb2NhbGVTdHJpbmcnKSwKICAgICAgICAgICAgdGltZTogQ2UoJ3RvTG9jYWxlVGltZVN0cmluZycpLAogICAgICAgICAgICBudW1iZXI6IGZ1bmN0aW9uIChyLCBvLCBpLCBsLCBzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIG51bGwgPT0gciAmJiAociA9IExlKSwKICAgICAgICAgICAgICAgICAgICBudWxsID09IG8gJiYgKG8gPSBJZSksCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdudW1iZXInICE9IHR5cGVvZiB0ICYmICdzdHJpbmcnICE9IHR5cGVvZiB0KSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnJyA9PT0gdCB8fCBudWxsID09PSB0KSByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdCA8IDAgPyAnLScgOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gcGFyc2VGbG9hdCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5hYnMobik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMWUxMSA8PSBhIHx8IChhIDwgMWUtNCAmJiAwICE9PSBhKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGEgPSBuLnRvRXhwb25lbnRpYWwoaSkuc3BsaXQoL2VcKz8vKSlbMF0gKyAnIHggMTA8c3VwPicgKyBhWzFdICsgJzwvc3VwPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4obikpIHJldHVybiB1KHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBuLnRvRml4ZWQoaSkpLCAodCA9IE1hdGguYWJzKG4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gcGFyc2VJbnQodCwgMTApKSwgKG4gPSBpID8gbyArICh0IC0gYSkudG9GaXhlZChpKS5zdWJzdHJpbmcoMikgOiAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID0gMCA9PT0gYSAmJiAwID09PSBwYXJzZUZsb2F0KG4pID8gJycgOiBlKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwgfHwgJycpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnRvU3RyaW5nKCkucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgcikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzIHx8ICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXNwbGF5OiB1LCBmaWx0ZXI6IHUgfTsKICAgICAgICAgICAgfSwKICAgICAgICB9KTsKICAgIGZ1bmN0aW9uIEZlKHQsIGUpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAodCA9IG51bGwgIT0gdCA/IHQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJycpLAogICAgICAgICAgICAoZSA9IG51bGwgIT0gZSA/IGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJycpLAogICAgICAgICAgICB0LmxvY2FsZUNvbXBhcmUoZSwgbmF2aWdhdG9yLmxhbmd1YWdlc1swXSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UsIHsgbnVtZXJpYzogITAsIGlnbm9yZVB1bmN0dWF0aW9uOiAhMCB9KQogICAgICAgICk7CiAgICB9CiAgICB2YXIgbCA9IFYuZXh0LnR5cGUsCiAgICAgICAgTmUgPQogICAgICAgICAgICAoKFYudHlwZSA9IGZ1bmN0aW9uIChuLCB0LCBlKSB7CiAgICAgICAgICAgICAgICBpZiAoIXQpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBsLmNsYXNzTmFtZVtuXSwKICAgICAgICAgICAgICAgICAgICAgICAgZGV0ZWN0OiBsLmRldGVjdC5maW5kKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5fbmFtZSA9PT0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7IHByZTogbC5vcmRlcltuICsgJy1wcmUnXSwgYXNjOiBsLm9yZGVyW24gKyAnLWFzYyddLCBkZXNjOiBsLm9yZGVyW24gKyAnLWRlc2MnXSB9LAogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI6IGwucmVuZGVyW25dLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2g6IGwuc2VhcmNoW25dLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBsW3RdW25dID0gZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX25hbWUnLCB7IHZhbHVlOiBuIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbC5kZXRlY3QuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Ll9uYW1lID09PSBuOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIC0xID09PSBlID8gbC5kZXRlY3QudW5zaGlmdCh0KSA6IGwuZGV0ZWN0LnNwbGljZShlLCAxLCB0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG8odCkgewogICAgICAgICAgICAgICAgICAgIChsLm9yZGVyW24gKyAnLXByZSddID0gdC5wcmUpLCAobC5vcmRlcltuICsgJy1hc2MnXSA9IHQuYXNjKSwgKGwub3JkZXJbbiArICctZGVzYyddID0gdC5kZXNjKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoKGUgPSB0KSwgKHQgPSBudWxsKSksCiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZScgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyBhKCdjbGFzc05hbWUnLCBlKQogICAgICAgICAgICAgICAgICAgICAgICA6ICdkZXRlY3QnID09PSB0CiAgICAgICAgICAgICAgICAgICAgICAgID8gcihlKQogICAgICAgICAgICAgICAgICAgICAgICA6ICdvcmRlcicgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyBvKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ3JlbmRlcicgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyBhKCdyZW5kZXInLCBlKQogICAgICAgICAgICAgICAgICAgICAgICA6ICdzZWFyY2gnID09PSB0CiAgICAgICAgICAgICAgICAgICAgICAgID8gYSgnc2VhcmNoJywgZSkKICAgICAgICAgICAgICAgICAgICAgICAgOiB0IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuY2xhc3NOYW1lICYmIGEoJ2NsYXNzTmFtZScsIGUuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUuZGV0ZWN0ICYmIHIoZS5kZXRlY3QpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGUub3JkZXIgJiYgbyhlLm9yZGVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUucmVuZGVyICYmIGEoJ3JlbmRlcicsIGUucmVuZGVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUuc2VhcmNoICYmIGEoJ3NlYXJjaCcsIGUuc2VhcmNoKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoVi50eXBlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsLmRldGVjdC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5fbmFtZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgVi50eXBlKCdzdHJpbmcnLCB7CiAgICAgICAgICAgICAgICBkZXRlY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3N0cmluZyc7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUKHQpICYmICdib29sZWFuJyAhPSB0eXBlb2YgdCA/ICcnIDogJ3N0cmluZycgPT0gdHlwZW9mIHQgPyB0LnRvTG93ZXJDYXNlKCkgOiB0LnRvU3RyaW5nID8gdC50b1N0cmluZygpIDogJyc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZWFyY2g6IGdlKCExLCAhMCksCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBWLnR5cGUoJ3N0cmluZy11dGY4JywgewogICAgICAgICAgICAgICAgZGV0ZWN0OiB7CiAgICAgICAgICAgICAgICAgICAgYWxsT2Y6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZU9mOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIVQodCkgJiYgbmF2aWdhdG9yLmxhbmd1YWdlcyAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiB0Lm1hdGNoKC9bXlx4MDAtXHg3Rl0vKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9yZGVyOiB7CiAgICAgICAgICAgICAgICAgICAgYXNjOiBGZSwKICAgICAgICAgICAgICAgICAgICBkZXNjOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEgKiBGZSh0LCBlKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZ2UoITEsICEwKSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIFYudHlwZSgnaHRtbCcsIHsKICAgICAgICAgICAgICAgIGRldGVjdDogewogICAgICAgICAgICAgICAgICAgIGFsbE9mOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVCh0KSB8fCAoJ3N0cmluZycgPT0gdHlwZW9mIHQgJiYgLTEgIT09IHQuaW5kZXhPZignPCcpKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZU9mOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIVQodCkgJiYgJ3N0cmluZycgPT0gdHlwZW9mIHQgJiYgLTEgIT09IHQuaW5kZXhPZignPCcpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUKHQpID8gJycgOiB0LnJlcGxhY2UgPyBMKHQpLnRyaW0oKS50b0xvd2VyQ2FzZSgpIDogdCArICcnOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBnZSghMCwgITApLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgVi50eXBlKCdkYXRlJywgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHQtdHlwZS1kYXRlJywKICAgICAgICAgICAgICAgIGRldGVjdDogewogICAgICAgICAgICAgICAgICAgIGFsbE9mOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0IHx8IHQgaW5zdGFuY2VvZiBEYXRlIHx8IFIudGVzdCh0KSA/IChudWxsICE9PSAoZSA9IERhdGUucGFyc2UodCkpICYmICFpc05hTihlKSkgfHwgVCh0KSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVPZjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBEYXRlIHx8ICgnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiBSLnRlc3QodCkpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBEYXRlLnBhcnNlKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4odCkgPyAtMSAvIDAgOiB0OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgVi50eXBlKCdodG1sLW51bS1mbXQnLCB7CiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkdC10eXBlLW51bWVyaWMnLAogICAgICAgICAgICAgICAgZGV0ZWN0OiB7CiAgICAgICAgICAgICAgICAgICAgYWxsT2Y6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLm9MYW5ndWFnZS5zRGVjaW1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGModCwgZSwgITAsICExKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZU9mOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5vTGFuZ3VhZ2Uuc0RlY2ltYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjKHQsIGUsICEwLCAhMSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvcmRlcjogewogICAgICAgICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUub0xhbmd1YWdlLnNEZWNpbWFsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmUodCwgZSwgTiwgUCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZWFyY2g6IGdlKCEwLCAhMCksCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBWLnR5cGUoJ2h0bWwtbnVtJywgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHQtdHlwZS1udW1lcmljJywKICAgICAgICAgICAgICAgIGRldGVjdDogewogICAgICAgICAgICAgICAgICAgIGFsbE9mOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5vTGFuZ3VhZ2Uuc0RlY2ltYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjKHQsIGUsICExLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVPZjogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUub0xhbmd1YWdlLnNEZWNpbWFsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyh0LCBlLCAhMSwgITEpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLm9MYW5ndWFnZS5zRGVjaW1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5lKHQsIGUsIE4pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBnZSghMCwgITApLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgVi50eXBlKCdudW0tZm10JywgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHQtdHlwZS1udW1lcmljJywKICAgICAgICAgICAgICAgIGRldGVjdDogewogICAgICAgICAgICAgICAgICAgIGFsbE9mOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5vTGFuZ3VhZ2Uuc0RlY2ltYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzKHQsIGUsICEwLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVPZjogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUub0xhbmd1YWdlLnNEZWNpbWFsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyh0LCBlLCAhMCwgITEpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLm9MYW5ndWFnZS5zRGVjaW1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5lKHQsIGUsIFApOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgVi50eXBlKCdudW0nLCB7CiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkdC10eXBlLW51bWVyaWMnLAogICAgICAgICAgICAgICAgZGV0ZWN0OiB7CiAgICAgICAgICAgICAgICAgICAgYWxsT2Y6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLm9MYW5ndWFnZS5zRGVjaW1hbDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHModCwgZSwgITEsICEwKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZU9mOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5vTGFuZ3VhZ2Uuc0RlY2ltYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzKHQsIGUsICExLCAhMSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvcmRlcjogewogICAgICAgICAgICAgICAgICAgIHByZTogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUub0xhbmd1YWdlLnNEZWNpbWFsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmUodCwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBmdW5jdGlvbiAodCwgZSwgbiwgYSkgewogICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gdCB8fCAodCAmJiAnLScgIT09IHQpCiAgICAgICAgICAgICAgICAgICAgPyAnbnVtYmVyJyA9PSAociA9IHR5cGVvZiB0KSB8fCAnYmlnaW50JyA9PSByCiAgICAgICAgICAgICAgICAgICAgICAgID8gdAogICAgICAgICAgICAgICAgICAgICAgICA6ICsodCA9ICh0ID0gZSA/IEUodCwgZSkgOiB0KS5yZXBsYWNlICYmIChuICYmICh0ID0gdC5yZXBsYWNlKG4sICcnKSksIGEpID8gdC5yZXBsYWNlKGEsICcnKSA6IHQpCiAgICAgICAgICAgICAgICAgICAgOiAtMSAvIDA7CiAgICAgICAgICAgIH0pOwogICAgZnVuY3Rpb24gamUodCwgZSwgbikgewogICAgICAgIG4gJiYgKHRbZV0gPSBuKTsKICAgIH0KICAgIEguZXh0ZW5kKCEwLCBWLmV4dC5yZW5kZXJlciwgewogICAgICAgIGZvb3RlcjogewogICAgICAgICAgICBfOiBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgZS5hZGRDbGFzcyhuLnRmb290LmNlbGwpOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgaGVhZGVyOiB7CiAgICAgICAgICAgIF86IGZ1bmN0aW9uIChwLCBnLCB2KSB7CiAgICAgICAgICAgICAgICBnLmFkZENsYXNzKHYudGhlYWQuY2VsbCksIHAub0ZlYXR1cmVzLmJTb3J0IHx8IGcuYWRkQ2xhc3Modi5vcmRlci5ub25lKTsKICAgICAgICAgICAgICAgIHZhciB0ID0gcC5iU29ydENlbGxzVG9wLAogICAgICAgICAgICAgICAgICAgIGUgPSBnLmNsb3Nlc3QoJ3RoZWFkJykuZmluZCgndHInKSwKICAgICAgICAgICAgICAgICAgICBuID0gZy5wYXJlbnQoKS5pbmRleCgpOwogICAgICAgICAgICAgICAgJ2Rpc2FibGUnID09PSBnLmF0dHIoJ2RhdGEtZHQtb3JkZXInKSB8fAogICAgICAgICAgICAgICAgICAgICdkaXNhYmxlJyA9PT0gZy5wYXJlbnQoKS5hdHRyKCdkYXRhLWR0LW9yZGVyJykgfHwKICAgICAgICAgICAgICAgICAgICAoITAgPT09IHQgJiYgMCAhPT0gbikgfHwKICAgICAgICAgICAgICAgICAgICAoITEgPT09IHQgJiYgbiAhPT0gZS5sZW5ndGggLSAxKSB8fAogICAgICAgICAgICAgICAgICAgIEgocC5uVGFibGUpLm9uKCdvcmRlci5kdC5EVCBjb2x1bW4tdmlzaWJpbGl0eS5kdC5EVCcsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuc29ydERldGFpbHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdi5vcmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBlLmFwaS5jb2x1bW5zKGcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHAuYW9Db2x1bW5zW3IuZmxhdHRlbigpWzBdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByLm9yZGVyYWJsZSgpLmluY2x1ZGVzKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSByLmluZGV4ZXMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSByLm9yZGVyYWJsZSghMCkuZmxhdHRlbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG0obiwgJ2NvbCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGEuaXNBc2MgKyAnICcgKyBhLmlzRGVzYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKGEubm9uZSwgIWkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b2dnbGVDbGFzcyhhLmNhbkFzYywgaSAmJiB1LmluY2x1ZGVzKCdhc2MnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKGEuY2FuRGVzYywgaSAmJiB1LmluY2x1ZGVzKCdkZXNjJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIDwgcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5pbmNsdWRlcyhzW2ZdKSB8fCAoZCA9ICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkICYmICgodSA9IHIub3JkZXIoKSksIGcuYWRkQ2xhc3ModS5pbmNsdWRlcygnYXNjJykgPyBhLmlzQXNjIDogJycgKyB1LmluY2x1ZGVzKCdkZXNjJykgPyBhLmlzRGVzYyA6ICcnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgYy5sZW5ndGg7IGYrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAuYW9Db2x1bW5zW2NbZl1dLmJWaXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gY1tmXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc1swXSA9PSBoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChyID0gblswXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgPSBvLmFzU29ydGluZyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5hdHRyKCdhcmlhLXNvcnQnLCAnYXNjJyA9PT0gci5kaXIgPyAnYXNjZW5kaW5nJyA6ICdkZXNjZW5kaW5nJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwgPSB1W3IuaW5kZXggKyAxXSA/ICdSZXZlcnNlJyA6ICdSZW1vdmUnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnLnJlbW92ZUF0dHIoJ2FyaWEtc29ydCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmF0dHIoJ2FyaWEtbGFiZWwnLCBpID8gby5hcmlhVGl0bGUgKyBlLmFwaS5pMThuKCdvQXJpYS5vcmRlcmFibGUnICsgbCkgOiBvLmFyaWFUaXRsZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgKGcuZmluZCgnLmR0LWNvbHVtbi10aXRsZScpLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJyksIGcuYXR0cigndGFiaW5kZXgnLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGxheW91dDogewogICAgICAgICAgICBfOiBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgdmFyIGEgPSB0Lm9DbGFzc2VzLmxheW91dCwKICAgICAgICAgICAgICAgICAgICByID0gSCgnPGRpdi8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgbi5pZCB8fCBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Mobi5jbGFzc05hbWUgfHwgYS5yb3cpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhlKTsKICAgICAgICAgICAgICAgIEguZWFjaChuLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgICAgICdpZCcgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZScgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gJycpLAogICAgICAgICAgICAgICAgICAgICAgICBlLnRhYmxlICYmIChyLmFkZENsYXNzKGEudGFibGVSb3cpLCAobiArPSBhLnRhYmxlQ2VsbCArICcgJykpLAogICAgICAgICAgICAgICAgICAgICAgICAobiArPSAnc3RhcnQnID09PSB0ID8gYS5zdGFydCA6ICdlbmQnID09PSB0ID8gYS5lbmQgOiBhLmZ1bGwpLAogICAgICAgICAgICAgICAgICAgICAgICBIKCc8ZGl2Lz4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoeyBpZDogZS5pZCB8fCBudWxsLCBjbGFzczogZS5jbGFzc05hbWUgfHwgYS5jZWxsICsgJyAnICsgbiB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChlLmNvbnRlbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKHIpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICB9KSwKICAgICAgICAoVi5mZWF0dXJlID0ge30pLAogICAgICAgIChWLmZlYXR1cmUucmVnaXN0ZXIgPSBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAoVi5leHQuZmVhdHVyZXNbdF0gPSBlKSwgbiAmJiBDLmZlYXR1cmUucHVzaCh7IGNGZWF0dXJlOiBuLCBmbkluaXQ6IGUgfSk7CiAgICAgICAgfSksCiAgICAgICAgVi5mZWF0dXJlLnJlZ2lzdGVyKCdkaXYnLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICB2YXIgbiA9IEgoJzxkaXY+JylbMF07CiAgICAgICAgICAgIHJldHVybiBlICYmIChqZShuLCAnY2xhc3NOYW1lJywgZS5jbGFzc05hbWUpLCBqZShuLCAnaWQnLCBlLmlkKSwgamUobiwgJ2lubmVySFRNTCcsIGUuaHRtbCksIGplKG4sICd0ZXh0Q29udGVudCcsIGUudGV4dCkpLCBuOwogICAgICAgIH0pLAogICAgICAgIFYuZmVhdHVyZS5yZWdpc3RlcigKICAgICAgICAgICAgJ2luZm8nLAogICAgICAgICAgICBmdW5jdGlvbiAodCwgcykgewogICAgICAgICAgICAgICAgdmFyIGUsIG4sIHU7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5vRmVhdHVyZXMuYkluZm8KICAgICAgICAgICAgICAgICAgICA/ICgoZSA9IHQub0xhbmd1YWdlKSwKICAgICAgICAgICAgICAgICAgICAgIChuID0gdC5zVGFibGVJZCksCiAgICAgICAgICAgICAgICAgICAgICAodSA9IEgoJzxkaXYvPicsIHsgY2xhc3M6IHQub0NsYXNzZXMuaW5mby5jb250YWluZXIgfSkpLAogICAgICAgICAgICAgICAgICAgICAgKHMgPSBILmV4dGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBlLmZuSW5mb0NhbGxiYWNrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbXB0eTogZS5zSW5mb0VtcHR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0Zml4OiBlLnNJbmZvUG9zdEZpeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBlLnNJbmZvRmlsdGVyZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGUuc0luZm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBzLAogICAgICAgICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICAgICAgICB0LmFvRHJhd0NhbGxiYWNrLnB1c2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5faURpc3BsYXlTdGFydCArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmZuRGlzcGxheUVuZCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5mblJlY29yZHNUb3RhbCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5mblJlY29yZHNEaXNwbGF5KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpID8gZS50ZXh0IDogZS5lbXB0eTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpICE9PSBvICYmIChsICs9ICcgJyArIGUuc2VhcmNoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwgKz0gZS5wb3N0Zml4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwgPSByZSh0LCBsKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FsbGJhY2sgJiYgKGwgPSBlLmNhbGxiYWNrLmNhbGwodC5vSW5zdGFuY2UsIHQsIGEsIHIsIG8sIGksIGwpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5odG1sKGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHKHQsIG51bGwsICdpbmZvJywgW3QsIG5bMF0sIGxdKTsKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgdC5faW5mb0VsIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgKHUuYXR0cih7ICdhcmlhLWxpdmUnOiAncG9saXRlJywgaWQ6IG4gKyAnX2luZm8nLCByb2xlOiAnc3RhdHVzJyB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICBIKHQublRhYmxlKS5hdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JywgbiArICdfaW5mbycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICh0Ll9pbmZvRWwgPSB1KSksCiAgICAgICAgICAgICAgICAgICAgICB1KQogICAgICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2knLAogICAgICAgICk7CiAgICB2YXIgUmUgPSAwOwogICAgZnVuY3Rpb24gT2UodCkgewogICAgICAgIHZhciBlID0gW107CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdC5udW1iZXJzICYmIGUucHVzaCgnbnVtYmVycycpLAogICAgICAgICAgICB0LnByZXZpb3VzTmV4dCAmJiAoZS51bnNoaWZ0KCdwcmV2aW91cycpLCBlLnB1c2goJ25leHQnKSksCiAgICAgICAgICAgIHQuZmlyc3RMYXN0ICYmIChlLnVuc2hpZnQoJ2ZpcnN0JyksIGUucHVzaCgnbGFzdCcpKSwKICAgICAgICAgICAgZQogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBQZSh0LCBlLCBuLCBhKSB7CiAgICAgICAgdmFyIHIgPSB0Lm9MYW5ndWFnZS5vUGFnaW5hdGUsCiAgICAgICAgICAgIG8gPSB7IGRpc3BsYXk6ICcnLCBhY3RpdmU6ICExLCBkaXNhYmxlZDogITEgfTsKICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgY2FzZSAnZWxsaXBzaXMnOgogICAgICAgICAgICAgICAgKG8uZGlzcGxheSA9ICcmI3gyMDI2OycpLCAoby5kaXNhYmxlZCA9ICEwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdmaXJzdCc6CiAgICAgICAgICAgICAgICAoby5kaXNwbGF5ID0gci5zRmlyc3QpLCAwID09PSBuICYmIChvLmRpc2FibGVkID0gITApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzoKICAgICAgICAgICAgICAgIChvLmRpc3BsYXkgPSByLnNQcmV2aW91cyksIDAgPT09IG4gJiYgKG8uZGlzYWJsZWQgPSAhMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnbmV4dCc6CiAgICAgICAgICAgICAgICAoby5kaXNwbGF5ID0gci5zTmV4dCksICgwICE9PSBhICYmIG4gIT09IGEgLSAxKSB8fCAoby5kaXNhYmxlZCA9ICEwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdsYXN0JzoKICAgICAgICAgICAgICAgIChvLmRpc3BsYXkgPSByLnNMYXN0KSwgKDAgIT09IGEgJiYgbiAhPT0gYSAtIDEpIHx8IChvLmRpc2FibGVkID0gITApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgZSAmJiAoKG8uZGlzcGxheSA9IHQuZm5Gb3JtYXROdW1iZXIoZSArIDEpKSwgbiA9PT0gZSkgJiYgKG8uYWN0aXZlID0gITApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbzsKICAgIH0KICAgIGZ1bmN0aW9uIEVlKHQsIGUsIG4sIGEpIHsKICAgICAgICB2YXIgciA9IFtdLAogICAgICAgICAgICBvID0gTWF0aC5mbG9vcihuIC8gMiksCiAgICAgICAgICAgIGkgPSBhID8gMiA6IDEsCiAgICAgICAgICAgIGwgPSBhID8gMSA6IDA7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZSA8PSBuCiAgICAgICAgICAgICAgICA/IChyID0gaCgwLCBlKSkKICAgICAgICAgICAgICAgIDogMSA9PT0gbgogICAgICAgICAgICAgICAgPyAociA9IFt0XSkKICAgICAgICAgICAgICAgIDogMyA9PT0gbgogICAgICAgICAgICAgICAgPyB0IDw9IDEKICAgICAgICAgICAgICAgICAgICA/IChyID0gWzAsIDEsICdlbGxpcHNpcyddKQogICAgICAgICAgICAgICAgICAgIDogZSAtIDIgPD0gdAogICAgICAgICAgICAgICAgICAgID8gKHIgPSBoKGUgLSAyLCBlKSkudW5zaGlmdCgnZWxsaXBzaXMnKQogICAgICAgICAgICAgICAgICAgIDogKHIgPSBbJ2VsbGlwc2lzJywgdCwgJ2VsbGlwc2lzJ10pCiAgICAgICAgICAgICAgICA6IHQgPD0gbwogICAgICAgICAgICAgICAgPyAoKHIgPSBoKDAsIG4gLSBpKSkucHVzaCgnZWxsaXBzaXMnKSwgYSAmJiByLnB1c2goZSAtIDEpKQogICAgICAgICAgICAgICAgOiBlIC0gMSAtIG8gPD0gdAogICAgICAgICAgICAgICAgPyAoKHIgPSBoKGUgLSAobiAtIGkpLCBlKSkudW5zaGlmdCgnZWxsaXBzaXMnKSwgYSAmJiByLnVuc2hpZnQoMCkpCiAgICAgICAgICAgICAgICA6ICgociA9IGgodCAtIG8gKyBpLCB0ICsgbyAtIGwpKS5wdXNoKCdlbGxpcHNpcycpLCByLnVuc2hpZnQoJ2VsbGlwc2lzJyksIGEgJiYgKHIucHVzaChlIC0gMSksIHIudW5zaGlmdCgwKSkpLAogICAgICAgICAgICByCiAgICAgICAgKTsKICAgIH0KICAgIFYuZmVhdHVyZS5yZWdpc3RlcigKICAgICAgICAnc2VhcmNoJywKICAgICAgICBmdW5jdGlvbiAobiwgYSkgewogICAgICAgICAgICB2YXIgdCwgZSwgciwgbywgaSwgbCwgcywgdSwgYywgZDsKICAgICAgICAgICAgcmV0dXJuIG4ub0ZlYXR1cmVzLmJGaWx0ZXIKICAgICAgICAgICAgICAgID8gKCh0ID0gbi5vQ2xhc3Nlcy5zZWFyY2gpLAogICAgICAgICAgICAgICAgICAoZSA9IG4uc1RhYmxlSWQpLAogICAgICAgICAgICAgICAgICAoYyA9IG4ub0xhbmd1YWdlKSwKICAgICAgICAgICAgICAgICAgKHIgPSBuLm9QcmV2aW91c1NlYXJjaCksCiAgICAgICAgICAgICAgICAgIChvID0gJzxpbnB1dCB0eXBlPSJzZWFyY2giIGNsYXNzPSInICsgdC5pbnB1dCArICciLz4nKSwKICAgICAgICAgICAgICAgICAgLTEgPT09CiAgICAgICAgICAgICAgICAgICAgICAoYSA9IEguZXh0ZW5kKHsgcGxhY2Vob2xkZXI6IGMuc1NlYXJjaFBsYWNlaG9sZGVyLCBwcm9jZXNzaW5nOiAhMSwgdGV4dDogYy5zU2VhcmNoIH0sIGEpKS50ZXh0LmluZGV4T2YoJ19JTlBVVF8nKSAmJgogICAgICAgICAgICAgICAgICAgICAgKGEudGV4dCArPSAnX0lOUFVUXycpLAogICAgICAgICAgICAgICAgICAoYS50ZXh0ID0gcmUobiwgYS50ZXh0KSksCiAgICAgICAgICAgICAgICAgIChjID0gYS50ZXh0Lm1hdGNoKC9fSU5QVVRfJC8pKSwKICAgICAgICAgICAgICAgICAgKHMgPSBhLnRleHQubWF0Y2goL15fSU5QVVRfLykpLAogICAgICAgICAgICAgICAgICAoaSA9IGEudGV4dC5yZXBsYWNlKC9fSU5QVVRfLywgJycpKSwKICAgICAgICAgICAgICAgICAgKGwgPSAnPGxhYmVsPicgKyBhLnRleHQgKyAnPC9sYWJlbD4nKSwKICAgICAgICAgICAgICAgICAgcyA/IChsID0gJ19JTlBVVF88bGFiZWw+JyArIGkgKyAnPC9sYWJlbD4nKSA6IGMgJiYgKGwgPSAnPGxhYmVsPicgKyBpICsgJzwvbGFiZWw+X0lOUFVUXycpLAogICAgICAgICAgICAgICAgICAocyA9IEgoJzxkaXY+JykKICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0LmNvbnRhaW5lcikKICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQobC5yZXBsYWNlKC9fSU5QVVRfLywgbykpKQogICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ2xhYmVsJykKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmb3InLCAnZHQtc2VhcmNoLScgKyBSZSksCiAgICAgICAgICAgICAgICAgIHMuZmluZCgnaW5wdXQnKS5hdHRyKCdpZCcsICdkdC1zZWFyY2gtJyArIFJlKSwKICAgICAgICAgICAgICAgICAgUmUrKywKICAgICAgICAgICAgICAgICAgKHUgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgKHIucmV0dXJuICYmICdFbnRlcicgIT09IHQua2V5KSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIChlICE9IHIuc2VhcmNoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ0KG4sIGEucHJvY2Vzc2luZywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIuc2VhcmNoID0gZSksIFJ0KG4sIHIpLCAobi5faURpc3BsYXlTdGFydCA9IDApLCBTKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAoYyA9IG51bGwgIT09IG4uc2VhcmNoRGVsYXkgPyBuLnNlYXJjaERlbGF5IDogMCksCiAgICAgICAgICAgICAgICAgIChkID0gSCgnaW5wdXQnLCBzKQogICAgICAgICAgICAgICAgICAgICAgLnZhbChyLnNlYXJjaCkKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsIGEucGxhY2Vob2xkZXIpCiAgICAgICAgICAgICAgICAgICAgICAub24oJ2tleXVwLkRUIHNlYXJjaC5EVCBpbnB1dC5EVCBwYXN0ZS5EVCBjdXQuRFQnLCBjID8gVi51dGlsLmRlYm91bmNlKHUsIGMpIDogdSkKICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2V1cC5EVCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuY2FsbChkWzBdLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXlwcmVzcy5EVCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEzID09IHQua2V5Q29kZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWNvbnRyb2xzJywgZSkpLAogICAgICAgICAgICAgICAgICBIKG4ublRhYmxlKS5vbignc2VhcmNoLmR0LkRUJywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgIG4gPT09IGUgJiYgZFswXSAhPT0gXy5hY3RpdmVFbGVtZW50ICYmIGQudmFsKCdmdW5jdGlvbicgIT0gdHlwZW9mIHIuc2VhcmNoID8gci5zZWFyY2ggOiAnJyk7CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBzKQogICAgICAgICAgICAgICAgOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgJ2YnLAogICAgKSwKICAgICAgICBWLmZlYXR1cmUucmVnaXN0ZXIoCiAgICAgICAgICAgICdwYWdpbmcnLAogICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgaWYgKCF0Lm9GZWF0dXJlcy5iUGFnaW5hdGUpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgZSA9IEguZXh0ZW5kKAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogVi5leHQucGFnZXIubnVtYmVyc19sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHQuc1BhZ2luYXRpb25UeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBib3VuZGFyeU51bWJlcnM6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdExhc3Q6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c05leHQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBudW1iZXJzOiAhMCwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgICAgICAgICAhKGZ1bmN0aW9uIHQoZSwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuX2JJbml0Q29tcGxldGUpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBhLnR5cGUgPyBWLmV4dC5wYWdlclthLnR5cGVdIDogT2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS5vTGFuZ3VhZ2Uub0FyaWEucGFnaW5hdGUgfHwge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5faURpc3BsYXlTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLl9pRGlzcGxheUxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmZuUmVjb3Jkc0Rpc3BsYXkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAtMSA9PT0gbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB1ID8gMCA6IE1hdGguY2VpbChpIC8gbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gdSA/IDEgOiBNYXRoLmNlaWwocyAvIGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIoYSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdudW1iZXJzJyA9PT0gdCA/IEVlKGMsIGQsIGEuYnV0dG9ucywgYS5ib3VuZGFyeU51bWJlcnMpIDogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBmID0gZi5jb25jYXQuYXBwbHkoZiwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgZi5sZW5ndGg7IHArKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBmW3BdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBQZShlLCBnLCBjLCBkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gYWUoZSwgJ3BhZ2luZ0J1dHRvbicpKGUsIGcsIHYuZGlzcGxheSwgdi5hY3RpdmUsIHYuZGlzYWJsZWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAnc3RyaW5nJyA9PSB0eXBlb2YgZyA/IG9bZ10gOiBvLm51bWJlciA/IG8ubnVtYmVyICsgKGcgKyAxKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKG0uY2xpY2tlcikuYXR0cih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiBlLnNUYWJsZUlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcmlhLWRpc2FibGVkJzogdi5kaXNhYmxlZCA/ICd0cnVlJyA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY3VycmVudCc6IHYuYWN0aXZlID8gJ3BhZ2UnIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtZHQtaWR4JzogZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleDogdi5kaXNhYmxlZCA/IC0xIDogZS5pVGFiSW5kZXggfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdudW1iZXInICE9IHR5cGVvZiBnICYmIEgobS5jbGlja2VyKS5hZGRDbGFzcyhnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZShtLmNsaWNrZXIsIHsgYWN0aW9uOiBnIH0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgWHQoZSwgdC5kYXRhLmFjdGlvbiwgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChtLmRpc3BsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBhZShlLCAncGFnaW5nQ29udGFpbmVyJykoZSwgaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuLmZpbmQoXy5hY3RpdmVFbGVtZW50KS5kYXRhKCdkdC1pZHgnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbi5lbXB0eSgpLmFwcGVuZCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBzICYmIG4uZmluZCgnW2RhdGEtZHQtaWR4PScgKyBzICsgJ10nKS50cmlnZ2VyKCdmb2N1cycpOwogICAgICAgICAgICAgICAgICAgICAgICBoLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMSA8IGEuYnV0dG9ucyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgSChuKS5oZWlnaHQoKSA+PSAyICogSChoWzBdKS5vdXRlckhlaWdodCgpIC0gMTAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoZSwgbiwgSC5leHRlbmQoe30sIGEsIHsgYnV0dG9uczogYS5idXR0b25zIC0gMiB9KSk7CiAgICAgICAgICAgICAgICAgICAgfSkodCwgYS5jaGlsZHJlbigpLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBhID0gSCgnPGRpdi8+JykKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModC5vQ2xhc3Nlcy5wYWdpbmcuY29udGFpbmVyICsgKGUudHlwZSA/ICcgcGFnaW5nXycgKyBlLnR5cGUgOiAnJykpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChIKCc8bmF2PicpLmF0dHIoJ2FyaWEtbGFiZWwnLCAncGFnaW5hdGlvbicpLmFkZENsYXNzKHQub0NsYXNzZXMucGFnaW5nLm5hdikpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQuYW9EcmF3Q2FsbGJhY2sucHVzaChuKSwgSCh0Lm5UYWJsZSkub24oJ2NvbHVtbi1zaXppbmcuZHQuRFQnLCBuKSwgYTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ3AnLAogICAgICAgICk7CiAgICB2YXIga2UgPSAwOwogICAgcmV0dXJuICgKICAgICAgICBWLmZlYXR1cmUucmVnaXN0ZXIoCiAgICAgICAgICAgICdwYWdlTGVuZ3RoJywKICAgICAgICAgICAgZnVuY3Rpb24gKGEsIHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gYS5vRmVhdHVyZXM7CiAgICAgICAgICAgICAgICBpZiAoIWUuYlBhZ2luYXRlIHx8ICFlLmJMZW5ndGhDaGFuZ2UpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgdCA9IEguZXh0ZW5kKHsgbWVudTogYS5hTGVuZ3RoTWVudSwgdGV4dDogYS5vTGFuZ3VhZ2Uuc0xlbmd0aE1lbnUgfSwgdCk7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGEub0NsYXNzZXMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIG4gPSBhLnNUYWJsZUlkLAogICAgICAgICAgICAgICAgICAgIHIgPSB0Lm1lbnUsCiAgICAgICAgICAgICAgICAgICAgbyA9IFtdLAogICAgICAgICAgICAgICAgICAgIGkgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJbMF0pKSAobyA9IHJbMF0pLCAoaSA9IHJbMV0pOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDA7IHAgPCByLmxlbmd0aDsgcCsrKQogICAgICAgICAgICAgICAgICAgICAgICBILmlzUGxhaW5PYmplY3QocltwXSkgPyAoby5wdXNoKHJbcF0udmFsdWUpLCBpLnB1c2gocltwXS5sYWJlbCkpIDogKG8ucHVzaChyW3BdKSwgaS5wdXNoKHJbcF0pKTsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSB0LnRleHQubWF0Y2goL19NRU5VXyQvKSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHQudGV4dC5tYXRjaCgvXl9NRU5VXy8pLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gdC50ZXh0LnJlcGxhY2UoL19NRU5VXy8sICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9ICc8bGFiZWw+JyArIHQudGV4dCArICc8L2xhYmVsPicsCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPyAodCA9ICdfTUVOVV88bGFiZWw+JyArIHUgKyAnPC9sYWJlbD4nKSA6IGwgJiYgKHQgPSAnPGxhYmVsPicgKyB1ICsgJzwvbGFiZWw+X01FTlVfJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndG1wLScgKyArbmV3IERhdGUoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBIKCc8ZGl2Lz4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGUuY29udGFpbmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCh0LnJlcGxhY2UoJ19NRU5VXycsICc8c3BhbiBpZD0iJyArIHMgKyAnIj48L3NwYW4+JykpLAogICAgICAgICAgICAgICAgICAgICAgICBkID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGYgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKEFycmF5LmZyb20oYy5maW5kKCdsYWJlbCcpWzBdLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBkLnB1c2goeyBlbDogdCwgdGV4dDogdC50ZXh0Q29udGVudCB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbC50ZXh0Q29udGVudCA9IHJlKGEsIHQudGV4dCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IEgoJzxzZWxlY3QvPicsIHsgbmFtZTogbiArICdfbGVuZ3RoJywgJ2FyaWEtY29udHJvbHMnOiBuLCBjbGFzczogZS5zZWxlY3QgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAwOwogICAgICAgICAgICAgICAgICAgIHAgPCBvLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBwKysKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBoWzBdW3BdID0gbmV3IE9wdGlvbignbnVtYmVyJyA9PSB0eXBlb2YgaVtwXSA/IGEuZm5Gb3JtYXROdW1iZXIoaVtwXSkgOiBpW3BdLCBvW3BdKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgYy5maW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsICdkdC1sZW5ndGgtJyArIGtlKSwKICAgICAgICAgICAgICAgICAgICBoLmF0dHIoJ2lkJywgJ2R0LWxlbmd0aC0nICsga2UpLAogICAgICAgICAgICAgICAgICAgIGtlKyssCiAgICAgICAgICAgICAgICAgICAgYy5maW5kKCcjJyArIHMpLnJlcGxhY2VXaXRoKGgpLAogICAgICAgICAgICAgICAgICAgIEgoJ3NlbGVjdCcsIGMpCiAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoYS5faURpc3BsYXlMZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLkRUJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3QoYSwgSCh0aGlzKS52YWwoKSksIFMoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIEgoYS5uVGFibGUpLm9uKCdsZW5ndGguZHQuRFQnLCBmdW5jdGlvbiAodCwgZSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBhID09PSBlICYmIChIKCdzZWxlY3QnLCBjKS52YWwobiksIGYobikpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGYoYS5faURpc3BsYXlMZW5ndGgpLAogICAgICAgICAgICAgICAgICAgIGMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdsJywKICAgICAgICApLAogICAgICAgICgoKEguZm4uZGF0YVRhYmxlID0gVikuJCA9IEgpLmZuLmRhdGFUYWJsZVNldHRpbmdzID0gVi5zZXR0aW5ncyksCiAgICAgICAgKEguZm4uZGF0YVRhYmxlRXh0ID0gVi5leHQpLAogICAgICAgIChILmZuLkRhdGFUYWJsZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiBIKHRoaXMpLmRhdGFUYWJsZSh0KS5hcGkoKTsKICAgICAgICB9KSwKICAgICAgICBILmVhY2goViwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgSC5mbi5EYXRhVGFibGVbdF0gPSBlOwogICAgICAgIH0pLAogICAgICAgIFYKICAgICk7Cn0pOwoKLyohIERhdGFUYWJsZXMgc3R5bGluZyBpbnRlZ3JhdGlvbgogKiDCqSBTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKi8KIShmdW5jdGlvbiAodCkgewogICAgdmFyIG8sIGQ7CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0J10sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHQoZSwgd2luZG93LCBkb2N1bWVudCk7CiAgICAgICAgICB9KQogICAgICAgIDogJ29iamVjdCcgPT0gdHlwZW9mIGV4cG9ydHMKICAgICAgICA/ICgobyA9IHJlcXVpcmUoJ2pxdWVyeScpKSwKICAgICAgICAgIChkID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgICAgICBuLmZuLmRhdGFUYWJsZSB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldCcpKGUsIG4pOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGUgfHwgd2luZG93KSwgKG4gPSBuIHx8IG8oZSkpLCBkKGUsIG4pLCB0KG4sIDAsIGUuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChkKHdpbmRvdywgbyksIChtb2R1bGUuZXhwb3J0cyA9IHQobywgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiB0KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uIChlLCBuLCB0KSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gZS5mbi5kYXRhVGFibGU7Cn0pOwoKLyohIERhdGFUYWJsZXMgRWRpdG9yIHYyLjMuMgogKgogKiDCqSBTcHJ5TWVkaWEgTHRkLCBhbGwgcmlnaHRzIHJlc2VydmVkLgogKiBMaWNlbnNlOiBlZGl0b3IuZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKi8KIShmdW5jdGlvbiAoaSkgewogICAgdmFyIG4sIHM7CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0J10sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkodCwgd2luZG93LCBkb2N1bWVudCk7CiAgICAgICAgICB9KQogICAgICAgIDogJ29iamVjdCcgPT0gdHlwZW9mIGV4cG9ydHMKICAgICAgICA/ICgobiA9IHJlcXVpcmUoJ2pxdWVyeScpKSwKICAgICAgICAgIChzID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICBlLmZuLmRhdGFUYWJsZSB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldCcpKHQsIGUpOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQgfHwgd2luZG93KSwgKGUgPSBlIHx8IG4odCkpLCBzKHQsIGUpLCBpKGUsIHQsIHQuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChzKHdpbmRvdywgbiksIChtb2R1bGUuZXhwb3J0cyA9IGkobiwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiBpKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uICh3LCBwLCB5KSB7CiAgICAndXNlIHN0cmljdCc7CiAgICB2YXIgciA9IHcuZm4uZGF0YVRhYmxlLAogICAgICAgIHQgPSB7CiAgICAgICAgICAgIGJ1dHRvbnM6ICEwLAogICAgICAgICAgICBkcmF3VHlwZTogITEsCiAgICAgICAgICAgIGZvY3VzOiAwLAogICAgICAgICAgICBtZXNzYWdlOiAhMCwKICAgICAgICAgICAgbmVzdDogITEsCiAgICAgICAgICAgIG9uQmFja2dyb3VuZDogJ2JsdXInLAogICAgICAgICAgICBvbkJsdXI6ICdjbG9zZScsCiAgICAgICAgICAgIG9uQ29tcGxldGU6ICdjbG9zZScsCiAgICAgICAgICAgIG9uRXNjOiAnY2xvc2UnLAogICAgICAgICAgICBvbkZpZWxkRXJyb3I6ICdmb2N1cycsCiAgICAgICAgICAgIG9uUmV0dXJuOiAnc3VibWl0JywKICAgICAgICAgICAgc2NvcGU6ICdyb3cnLAogICAgICAgICAgICBzdWJtaXQ6ICdhbGwnLAogICAgICAgICAgICBzdWJtaXRIdG1sOiAn4pa2JywKICAgICAgICAgICAgc3VibWl0VHJpZ2dlcjogbnVsbCwKICAgICAgICAgICAgdGl0bGU6ICEwLAogICAgICAgIH0sCiAgICAgICAgUiA9IHsKICAgICAgICAgICAgYWN0aW9uTmFtZTogJ2FjdGlvbicsCiAgICAgICAgICAgIGFqYXg6IG51bGwsCiAgICAgICAgICAgIGRpc3BsYXk6ICdsaWdodGJveCcsCiAgICAgICAgICAgIGV2ZW50czoge30sCiAgICAgICAgICAgIGZpZWxkczogW10sCiAgICAgICAgICAgIGZvcm1PcHRpb25zOiB7CiAgICAgICAgICAgICAgICBidWJibGU6IHcuZXh0ZW5kKHt9LCB0LCB7IGJ1dHRvbnM6ICdfYmFzaWMnLCBtZXNzYWdlOiAhMSwgc3VibWl0OiAnY2hhbmdlZCcsIHRpdGxlOiAhMSB9KSwKICAgICAgICAgICAgICAgIGlubGluZTogdy5leHRlbmQoe30sIHQsIHsgYnV0dG9uczogITEsIHN1Ym1pdDogJ2NoYW5nZWQnIH0pLAogICAgICAgICAgICAgICAgbWFpbjogdy5leHRlbmQoe30sIHQpLAogICAgICAgICAgICB9LAogICAgICAgICAgICBpMThuOiB7CiAgICAgICAgICAgICAgICBjbG9zZTogJ0Nsb3NlJywKICAgICAgICAgICAgICAgIGNyZWF0ZTogeyBidXR0b246ICdOZXcnLCBzdWJtaXQ6ICdDcmVhdGUnLCB0aXRsZTogJ0NyZWF0ZSBuZXcgZW50cnknIH0sCiAgICAgICAgICAgICAgICBkYXRldGltZTogewogICAgICAgICAgICAgICAgICAgIGFtUG06IFsnYW0nLCAncG0nXSwKICAgICAgICAgICAgICAgICAgICBob3VyczogJ0hvdXInLAogICAgICAgICAgICAgICAgICAgIG1pbnV0ZXM6ICdNaW51dGUnLAogICAgICAgICAgICAgICAgICAgIG1vbnRoczogWwogICAgICAgICAgICAgICAgICAgICAgICAnSmFudWFyeScsCiAgICAgICAgICAgICAgICAgICAgICAgICdGZWJydWFyeScsCiAgICAgICAgICAgICAgICAgICAgICAgICdNYXJjaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdBcHJpbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdNYXknLAogICAgICAgICAgICAgICAgICAgICAgICAnSnVuZScsCiAgICAgICAgICAgICAgICAgICAgICAgICdKdWx5JywKICAgICAgICAgICAgICAgICAgICAgICAgJ0F1Z3VzdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdTZXB0ZW1iZXInLAogICAgICAgICAgICAgICAgICAgICAgICAnT2N0b2JlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICdOb3ZlbWJlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICdEZWNlbWJlcicsCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBuZXh0OiAnTmV4dCcsCiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXM6ICdQcmV2aW91cycsCiAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogJ1NlY29uZCcsCiAgICAgICAgICAgICAgICAgICAgdW5rbm93bjogJy0nLAogICAgICAgICAgICAgICAgICAgIHdlZWtkYXlzOiBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVkaXQ6IHsgYnV0dG9uOiAnRWRpdCcsIHN1Ym1pdDogJ1VwZGF0ZScsIHRpdGxlOiAnRWRpdCBlbnRyeScgfSwKICAgICAgICAgICAgICAgIGVycm9yOiB7IHN5c3RlbTogJ0Egc3lzdGVtIGVycm9yIGhhcyBvY2N1cnJlZCAoPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Ii8vZGF0YXRhYmxlcy5uZXQvdG4vMTIiPk1vcmUgaW5mb3JtYXRpb248L2E+KS4nIH0sCiAgICAgICAgICAgICAgICBtdWx0aTogewogICAgICAgICAgICAgICAgICAgIGluZm86ICdUaGUgc2VsZWN0ZWQgaXRlbXMgY29udGFpbiBkaWZmZXJlbnQgdmFsdWVzIGZvciB0aGlzIGlucHV0LiBUbyBlZGl0IGFuZCBzZXQgYWxsIGl0ZW1zIGZvciB0aGlzIGlucHV0IHRvIHRoZSBzYW1lIHZhbHVlLCBjbGljayBvciB0YXAgaGVyZSwgb3RoZXJ3aXNlIHRoZXkgd2lsbCByZXRhaW4gdGhlaXIgaW5kaXZpZHVhbCB2YWx1ZXMuJywKICAgICAgICAgICAgICAgICAgICBub011bHRpOiAnVGhpcyBpbnB1dCBjYW4gYmUgZWRpdGVkIGluZGl2aWR1YWxseSwgYnV0IG5vdCBwYXJ0IG9mIGEgZ3JvdXAuJywKICAgICAgICAgICAgICAgICAgICByZXN0b3JlOiAnVW5kbyBjaGFuZ2VzJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ011bHRpcGxlIHZhbHVlcycsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVtb3ZlOiB7CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uOiAnRGVsZXRlJywKICAgICAgICAgICAgICAgICAgICBjb25maXJtOiB7IDE6ICdBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gZGVsZXRlIDEgcm93PycsIF86ICdBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gZGVsZXRlICVkIHJvd3M/JyB9LAogICAgICAgICAgICAgICAgICAgIHN1Ym1pdDogJ0RlbGV0ZScsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaWRTcmM6ICdEVF9Sb3dJZCcsCiAgICAgICAgICAgIHRhYmxlOiBudWxsLAogICAgICAgIH0sCiAgICAgICAgQiA9IHsKICAgICAgICAgICAgYWN0aW9uOiBudWxsLAogICAgICAgICAgICBhY3Rpb25OYW1lOiAnYWN0aW9uJywKICAgICAgICAgICAgYWpheDogbnVsbCwKICAgICAgICAgICAgYnViYmxlTm9kZXM6IFtdLAogICAgICAgICAgICBidWJibGVCb3R0b206ICExLAogICAgICAgICAgICBidWJibGVMb2NhdGlvbjogJ2F1dG8nLAogICAgICAgICAgICBjbG9zZUNiOiBudWxsLAogICAgICAgICAgICBjbG9zZUljYjogbnVsbCwKICAgICAgICAgICAgZGF0YVNvdXJjZTogbnVsbCwKICAgICAgICAgICAgZGlzcGxheUNvbnRyb2xsZXI6IG51bGwsCiAgICAgICAgICAgIGRpc3BsYXllZDogITEsCiAgICAgICAgICAgIGVkaXRDb3VudDogMCwKICAgICAgICAgICAgZWRpdERhdGE6IHt9LAogICAgICAgICAgICBlZGl0RmllbGRzOiB7fSwKICAgICAgICAgICAgZWRpdE9wdHM6IHt9LAogICAgICAgICAgICBmaWVsZHM6IHt9LAogICAgICAgICAgICBmb3JtT3B0aW9uczogeyBidWJibGU6IHcuZXh0ZW5kKHt9LCB0KSwgaW5saW5lOiB3LmV4dGVuZCh7fSwgdCksIG1haW46IHcuZXh0ZW5kKHt9LCB0KSB9LAogICAgICAgICAgICBnbG9iYWxFcnJvcjogJycsCiAgICAgICAgICAgIGlkOiAtMSwKICAgICAgICAgICAgaWRTcmM6IG51bGwsCiAgICAgICAgICAgIGluY2x1ZGVGaWVsZHM6IFtdLAogICAgICAgICAgICBtb2RlOiBudWxsLAogICAgICAgICAgICBtb2RpZmllcjogbnVsbCwKICAgICAgICAgICAgb3B0czogbnVsbCwKICAgICAgICAgICAgb3JkZXI6IFtdLAogICAgICAgICAgICBwcm9jZXNzaW5nOiAhMSwKICAgICAgICAgICAgc2V0Rm9jdXM6IG51bGwsCiAgICAgICAgICAgIHRhYmxlOiBudWxsLAogICAgICAgICAgICB0ZW1wbGF0ZTogbnVsbCwKICAgICAgICAgICAgdW5pcXVlOiAwLAogICAgICAgIH0sCiAgICAgICAgTCA9IHcuZm4uZGF0YVRhYmxlOwogICAgZnVuY3Rpb24gYSh0LCBlKSB7CiAgICAgICAgcmV0dXJuIHcoJypbZGF0YS1kdGUtZT0iJyArIHQgKyAnIl0nLCAoZSA9IHZvaWQgMCA9PT0gZSA/IHkgOiBlKSk7CiAgICB9CiAgICBmdW5jdGlvbiBjKHQsIGUpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gJyMnKSwgJ3N0cmluZycgPT0gdHlwZW9mIHQgPyBlICsgdC5yZXBsYWNlKC8oOnxcLnxcW3xcXXwsKS9nLCAnXFwkMScpIDogZSArIHQ7CiAgICB9CiAgICBmdW5jdGlvbiB1KHQpIHsKICAgICAgICByZXR1cm4gTC51dGlsLmdldCh0KTsKICAgIH0KICAgIGZ1bmN0aW9uIF8odCkgewogICAgICAgIHJldHVybiBMLnV0aWwuc2V0KHQpOwogICAgfQogICAgZnVuY3Rpb24gZih0LCBpKSB7CiAgICAgICAgdmFyIG4gPSBbXTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmVhY2godCwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIG4ucHVzaChlW2ldKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG4KICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gbCh0LCBlKSB7CiAgICAgICAgaWYgKCdvYmplY3QnICE9IHR5cGVvZiB0IHx8ICdvYmplY3QnICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IHQgfHwgbnVsbCA9PT0gZSkgcmV0dXJuIHQgPT0gZTsKICAgICAgICB2YXIgaSA9IE9iamVjdC5rZXlzKHQpLAogICAgICAgICAgICBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgaWYgKGkubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExOwogICAgICAgIGZvciAodmFyIHMgPSAwLCBvID0gaS5sZW5ndGg7IHMgPCBvOyBzKyspIHsKICAgICAgICAgICAgdmFyIHIgPSBpW3NdOwogICAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIHRbcl0pIHsKICAgICAgICAgICAgICAgIGlmICghbCh0W3JdLCBlW3JdKSkgcmV0dXJuICExOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRbcl0gIT0gZVtyXSkgcmV0dXJuICExOwogICAgICAgIH0KICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICBmdW5jdGlvbiBkKHQsIGUpIHsKICAgICAgICB2YXIgaSwgbjsKICAgICAgICBmb3IgKG4gaW4gZSkKICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmCiAgICAgICAgICAgICAgICAoKGkgPSBlW25dKSwKICAgICAgICAgICAgICAgIHcuaXNQbGFpbk9iamVjdChpKQogICAgICAgICAgICAgICAgICAgID8gKHcuaXNQbGFpbk9iamVjdCh0W25dKSB8fCAodFtuXSA9IHt9KSwgdy5leHRlbmQoITAsIHRbbl0sIGkpKQogICAgICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShpKQogICAgICAgICAgICAgICAgICAgID8gKHRbbl0gPSBpLnNsaWNlKCkpCiAgICAgICAgICAgICAgICAgICAgOiAodFtuXSA9IGkpKTsKICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIGZ1bmN0aW9uIGgodCwgZSkgewogICAgICAgIHJldHVybiB0LnNldHRpbmdzKClbMF0ub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlICYmICdub25lJyAhPT0gZS5zLmVkaXRPcHRzLmRyYXdUeXBlOwogICAgfQogICAgZnVuY3Rpb24gbSh0KSB7CiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB3LmZuLmRhdGFUYWJsZS5BcGkgPyB0IDogdyh0KS5EYXRhVGFibGUoKTsKICAgIH0KICAgIGZ1bmN0aW9uIE0odCkgewogICAgICAgICh0ID0gdyh0KSksCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdC5hZGRDbGFzcygnZHRlLWhpZ2hsaWdodCcpLAogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZUNsYXNzKCdkdGUtaGlnaGxpZ2h0Jyk7CiAgICAgICAgICAgICAgICAgICAgfSwgMWUzKTsKICAgICAgICAgICAgfSwgMjApOwogICAgfQogICAgZnVuY3Rpb24gVShsLCBkLCB1LCBjLCBwLCBmKSB7CiAgICAgICAgdm9pZCAwID09PSBmICYmIChmID0gbnVsbCk7CiAgICAgICAgdmFyIGggPSBkLmNlbGxzKHUpOwogICAgICAgIGguaW5kZXhlcygpLmVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgIHMgPSBkLmNlbGwodCksCiAgICAgICAgICAgICAgICBvID0gZC5yb3codC5yb3cpLmRhdGEoKSwKICAgICAgICAgICAgICAgIG8gPSBwKG8pLAogICAgICAgICAgICAgICAgciA9IGYgfHwgSChkLCBjLCB0LmNvbHVtbiwgMSA8IGguY291bnQoKSksCiAgICAgICAgICAgICAgICBhID0gKCdvYmplY3QnID09IHR5cGVvZiB1ICYmIHUubm9kZU5hbWUpIHx8IHUgaW5zdGFuY2VvZiB3OwogICAgICAgICAgICBPYmplY3Qua2V5cyhyKS5sZW5ndGggJiYKICAgICAgICAgICAgICAgIChsW29dICYmICgoaSA9IGxbb10uYXR0YWNoKSwgKG4gPSBsW29dLmF0dGFjaEZpZWxkcyksIChlID0gbFtvXS5kaXNwbGF5RmllbGRzKSksCiAgICAgICAgICAgICAgICBWKGwsIGQsIHQucm93LCBjLCBwKSwKICAgICAgICAgICAgICAgIChsW29dLmF0dGFjaEZpZWxkcyA9IG4gfHwgW10pLAogICAgICAgICAgICAgICAgbFtvXS5hdHRhY2hGaWVsZHMucHVzaChPYmplY3Qua2V5cyhyKSksCiAgICAgICAgICAgICAgICAobFtvXS5hdHRhY2ggPSBpIHx8IFtdKSwKICAgICAgICAgICAgICAgIGxbb10uYXR0YWNoLnB1c2goYSA/IHcodSkuZ2V0KDApIDogcy5maXhlZE5vZGUgPyBzLmZpeGVkTm9kZSgpIDogcy5ub2RlKCkpLAogICAgICAgICAgICAgICAgKGxbb10uZGlzcGxheUZpZWxkcyA9IGUgfHwge30pLAogICAgICAgICAgICAgICAgdy5leHRlbmQobFtvXS5kaXNwbGF5RmllbGRzLCByKSk7CiAgICAgICAgfSk7CiAgICB9CiAgICB2YXIgViA9IGZ1bmN0aW9uIChuLCBzLCB0LCBvLCByKSB7CiAgICAgICAgICAgIHMucm93cyh0KQogICAgICAgICAgICAgICAgLmluZGV4ZXMoKQogICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHMucm93KHQpLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gdC5kYXRhKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByKGUpOwogICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaSAmJiBQLmVycm9yKCdVbmFibGUgdG8gZmluZCByb3cgaWRlbnRpZmllcicsIDE0KSwKICAgICAgICAgICAgICAgICAgICAgICAgKG5baV0gPSB7IGRhdGE6IGUsIGZpZWxkczogbywgaWRTcmM6IGksIG5vZGU6IHQubm9kZSgpLCB0eXBlOiAncm93JyB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgSCA9IGZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIG8odCwgZSkgewogICAgICAgICAgICAgICAgdC5uYW1lKCkgPT09IGUgJiYgKHNbdC5uYW1lKCldID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHQgPSB0LnNldHRpbmdzKClbMF0uYW9Db2x1bW5zW2ldLAogICAgICAgICAgICAgICAgciA9IHZvaWQgMCAhPT0gdC5lZGl0RmllbGQgPyB0LmVkaXRGaWVsZCA6IHQubURhdGEsCiAgICAgICAgICAgICAgICBzID0ge307CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB3LmVhY2goZSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSByOyBpIDwgbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhlLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgbyhlLCByKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdy5pc0VtcHR5T2JqZWN0KHMpICYmCiAgICAgICAgICAgICAgICAgICAgIW4gJiYKICAgICAgICAgICAgICAgICAgICBQLmVycm9yKCdVbmFibGUgdG8gYXV0b21hdGljYWxseSBkZXRlcm1pbmUgZmllbGQgZnJvbSBzb3VyY2UuIFBsZWFzZSBzcGVjaWZ5IHRoZSBmaWVsZCBuYW1lLicsIDExKSwKICAgICAgICAgICAgICAgIHMKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIHYgPSB7CiAgICAgICAgICAgIGNvbW1pdDogZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsKICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBvID0gbSh0aGlzLnMudGFibGUpLAogICAgICAgICAgICAgICAgICAgIHIgPSBvLnNldHRpbmdzKClbMF0ub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlLAogICAgICAgICAgICAgICAgICAgIGEgPSBuLnJvd0lkczsKICAgICAgICAgICAgICAgIGlmICghaChvLCB0aGlzKSAmJiAnZWRpdCcgPT09IHQgJiYgbi5yb3dJZHMubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSB2b2lkIDAsIGQgPSAwLCB1ID0gYS5sZW5ndGg7IGQgPCB1OyBkKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBvLnJvdyhjKGFbZF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG87CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKGwgPSBsLmFueSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogby5yb3coCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPT0gdi5pZC5jYWxsKHMsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShhW2RdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkuYW55KCkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHQgPSB0aGlzLnMuZWRpdE9wdHMuZHJhd1R5cGU7CiAgICAgICAgICAgICAgICAnbm9uZScgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAoKG4gPSBvKSwKICAgICAgICAgICAgICAgICAgICByICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGEgJiYKICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgby5vbmUoJ2RyYXcnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgZSA9IGEubGVuZ3RoOyB0IDwgZTsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBvLnJvdyhjKGFbdF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmFueSgpICYmIE0oaS5ub2RlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBvLmRyYXcodCksCiAgICAgICAgICAgICAgICAgICAgbi5yZXNwb25zaXZlICYmIG4ucmVzcG9uc2l2ZS5yZWNhbGMoKSwKICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nICE9IHR5cGVvZiBuLnNlYXJjaFBhbmVzIHx8IHIgfHwgbi5zZWFyY2hQYW5lcy5yZWJ1aWxkUGFuZSh2b2lkIDAsICEwKSwKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IG4uc2VhcmNoQnVpbGRlciB8fAogICAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nICE9IHR5cGVvZiBuLnNlYXJjaEJ1aWxkZXIucmVidWlsZCB8fAogICAgICAgICAgICAgICAgICAgICAgICByIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIG4uc2VhcmNoQnVpbGRlci5yZWJ1aWxkKG4uc2VhcmNoQnVpbGRlci5nZXREZXRhaWxzKCkpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGkgPSBtKHRoaXMucy50YWJsZSk7CiAgICAgICAgICAgICAgICBoKGksIHRoaXMpIHx8ICgoaSA9IGkucm93LmFkZChlKSksIE0oaS5ub2RlKCkpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdDogZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsKICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBvID0gbSh0aGlzLnMudGFibGUpOwogICAgICAgICAgICAgICAgaWYgKCFoKG8sIHRoaXMpIHx8ICdub25lJyA9PT0gdGhpcy5zLmVkaXRPcHRzLmRyYXdUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB2LmlkLmNhbGwodGhpcywgaSksCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG8ucm93KGMoYSkpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIChsID0gbC5hbnkoKQogICAgICAgICAgICAgICAgICAgICAgICA/IGwKICAgICAgICAgICAgICAgICAgICAgICAgOiBvLnJvdyhmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9PSB2LmlkLmNhbGwocywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmFueSgpCiAgICAgICAgICAgICAgICAgICAgICAgID8gKChyID0gZCh7fSwgbC5kYXRhKCkpKSwgKHIgPSBkKHIsIGkpKSwgbC5kYXRhKHIpLCAociA9IHcuaW5BcnJheShhLCBuLnJvd0lkcykpLCBuLnJvd0lkcy5zcGxpY2UociwgMSkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKGwgPSBvLnJvdy5hZGQoaSkpLAogICAgICAgICAgICAgICAgICAgICAgICBNKGwubm9kZSgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFrZVJvdzogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBtKHRoaXMucy50YWJsZSksCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB3KCc8dHIgY2xhc3M9ImR0ZS1pbmxpbmVBZGQiPicpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICByID0gZS50YWJsZSh2b2lkIDApLmJvZHkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBlLmNvbHVtbnMoJzp2aXNpYmxlJykuY291bnQoKTsKICAgICAgICAgICAgICAgICAgICBhIDwgbDsKICAgICAgICAgICAgICAgICAgICBhKysKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0gZS5jb2x1bW4oYSArICc6dmlzaWJsZScpLmluZGV4KCksCiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB3KCc8dGQ+JykuYXBwZW5kVG8oaSksCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBIKGUsIHRoaXMucy5maWVsZHMsIGQsICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGUuc2V0dGluZ3MoKVswXS5hb0NvbHVtbnNbZF0uc0NsYXNzOwogICAgICAgICAgICAgICAgICAgIGQgJiYgdS5hZGRDbGFzcyhkKSwgT2JqZWN0LmtleXMoYykubGVuZ3RoICYmIChuLnB1c2goT2JqZWN0LmtleXMoYykpLCBzLnB1c2godVswXSksIHcuZXh0ZW5kKG8sIGMpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoKSB7CiAgICAgICAgICAgICAgICAgICAgMCA9PT0gZS5wYWdlLmluZm8oKS5yZWNvcmRzRGlzcGxheSAmJiB3KHIpLmVtcHR5KCksIGlbJ2VuZCcgPT09IHQgPyAnYXBwZW5kVG8nIDogJ3ByZXBlbmRUbyddKHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAodGhpcy5fX2R0RmFrZVJvdyA9IGkpLAogICAgICAgICAgICAgICAgICAgIHAoKSwKICAgICAgICAgICAgICAgICAgICBlLm9uKCdkcmF3LmR0ZS1jcmVhdGVJbmxpbmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHAoKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB7IDA6IHsgYXR0YWNoOiBzLCBhdHRhY2hGaWVsZHM6IG4sIGRpc3BsYXlGaWVsZHM6IG8sIGZpZWxkczogdGhpcy5zLmZpZWxkcywgdHlwZTogJ3JvdycgfSB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWtlUm93RW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IG0odGhpcy5zLnRhYmxlKTsKICAgICAgICAgICAgICAgIHQub2ZmKCdkcmF3LmR0ZS1jcmVhdGVJbmxpbmUnKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZHRGYWtlUm93LnJlbW92ZSgpLAogICAgICAgICAgICAgICAgICAgICh0aGlzLl9fZHRGYWtlUm93ID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgMCA9PT0gdC5wYWdlLmluZm8oKS5yZWNvcmRzRGlzcGxheSAmJiB0LmRyYXcoITEpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaWVsZHM6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgICAgICAgIHIgPSB1KHRoaXMucy5pZFNyYyksCiAgICAgICAgICAgICAgICAgICAgYSA9IG0odGhpcy5zLnRhYmxlKSwKICAgICAgICAgICAgICAgICAgICBsID0gdGhpcy5zLmZpZWxkcywKICAgICAgICAgICAgICAgICAgICBkID0ge307CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICF3LmlzUGxhaW5PYmplY3QodCkgfHwgKHZvaWQgMCA9PT0gdC5yb3dzICYmIHZvaWQgMCA9PT0gdC5jb2x1bW5zICYmIHZvaWQgMCA9PT0gdC5jZWxscykKICAgICAgICAgICAgICAgICAgICAgICAgPyBWKGQsIGEsIHQsIGwsIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKHZvaWQgMCAhPT0gdC5yb3dzICYmIFYoZCwgYSwgdC5yb3dzLCBsLCByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQuY29sdW1ucyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSBkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSB0LmNvbHVtbnMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocyA9IGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA9IHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2VsbHMobnVsbCwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleGVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVShlLCBpLCB0LCBzLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQuY2VsbHMgJiYgVShkLCBhLCB0LmNlbGxzLCBsLCByKSksCiAgICAgICAgICAgICAgICAgICAgZAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaWQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdSh0aGlzLnMuaWRTcmMpKHQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbmRpdmlkdWFsOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICAgICAgbiA9IHUodGhpcy5zLmlkU3JjKSwKICAgICAgICAgICAgICAgICAgICBzID0gbSh0aGlzLnMudGFibGUpLAogICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLnMuZmllbGRzLAogICAgICAgICAgICAgICAgICAgIHIgPSB7fTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IFtlXSksCiAgICAgICAgICAgICAgICAgICAgICAgIChpID0ge30pLAogICAgICAgICAgICAgICAgICAgICAgICB3LmVhY2goZSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbZV0gPSBvW2VdOwogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgVShyLCBzLCB0LCBvLCBuLCBpKSwKICAgICAgICAgICAgICAgICAgICByCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBwcmVwOiBmdW5jdGlvbiAodCwgZSwgaSwgbiwgcykgewogICAgICAgICAgICAgICAgdmFyIG8sCiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXM7CiAgICAgICAgICAgICAgICAnY3JlYXRlJyA9PT0gdCAmJgogICAgICAgICAgICAgICAgICAgIChzLnJvd0lkcyA9IHcubWFwKG4uZGF0YSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuaWQuY2FsbChyLCB0KTsKICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgJ2VkaXQnID09PSB0CiAgICAgICAgICAgICAgICAgICAgICAgID8gKChvID0gbi5jYW5jZWxsZWQgfHwgW10pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChzLnJvd0lkcyA9IHcubWFwKGkuZGF0YSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcuaXNFbXB0eU9iamVjdChpLmRhdGFbZV0pIHx8IC0xICE9PSB3LmluQXJyYXkoZSwgbykgPyB2b2lkIDAgOiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAncmVtb3ZlJyA9PT0gdCAmJiAocy5jYW5jZWxsZWQgPSBuLmNhbmNlbGxlZCB8fCBbXSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG0odGhpcy5zLnRhYmxlKS5hamF4LnJlbG9hZChudWxsLCAhMSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIG8gPSBtKHRoaXMucy50YWJsZSksCiAgICAgICAgICAgICAgICAgICAgciA9IGkuY2FuY2VsbGVkOwogICAgICAgICAgICAgICAgKDAgPT09IHIubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgPyBvLnJvd3ModCkKICAgICAgICAgICAgICAgICAgICA6ICgobiA9IFtdKSwKICAgICAgICAgICAgICAgICAgICAgIG8ucm93cyh0KS5ldmVyeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB2LmlkLmNhbGwocywgdGhpcy5kYXRhKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIC0xID09PSB3LmluQXJyYXkodCwgcikgJiYgbi5wdXNoKHRoaXMuaW5kZXgoKSk7CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIG8ucm93cyhuKSkKICAgICAgICAgICAgICAgICkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgIGZ1bmN0aW9uIHEodCkgewogICAgICAgIGlmICgna2V5bGVzcycgPT09IHQpIHJldHVybiB3KHkpOwogICAgICAgIHZhciBlID0gdygnW2RhdGEtZWRpdG9yLWlkPSInICsgdCArICciXScpOwogICAgICAgIGlmICgwID09PSAoZSA9IDAgPT09IGUubGVuZ3RoID8gdygnc3RyaW5nJyA9PSB0eXBlb2YgdCA/IGModCkgOiB0KSA6IGUpLmxlbmd0aCkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBhbiBlbGVtZW50IHdpdGggYGRhdGEtZWRpdG9yLWlkYCBvciBgaWRgIG9mOiAnICsgdCk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBXKHQsIGUpIHsKICAgICAgICB0ID0gcSh0KTsKICAgICAgICByZXR1cm4gdygnW2RhdGEtZWRpdG9yLWZpZWxkPSInICsgZSArICciXScsIHQpOwogICAgfQogICAgZnVuY3Rpb24geihuLCB0LCBzKSB7CiAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHZhciBpID0gZS52YWxGcm9tRGF0YShzKTsKICAgICAgICAgICAgdm9pZCAwICE9PSBpICYmCiAgICAgICAgICAgICAgICAoKGUgPSBXKG4sIGUuZGF0YVNyYygpKSkuZmlsdGVyKCdbZGF0YS1lZGl0b3ItdmFsdWVdJykubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgPyBlLmF0dHIoJ2RhdGEtZWRpdG9yLXZhbHVlJywgaSkKICAgICAgICAgICAgICAgICAgICA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyB0aGlzLmNoaWxkTm9kZXMubGVuZ3RoOyApIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGkpKTsKICAgICAgICB9KTsKICAgIH0KICAgIHZhciBiID0gewogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gYi5pZC5jYWxsKHRoaXMsIGUpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHEoaSkubGVuZ3RoICYmIHooaSwgdCwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdDogZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgIHooYi5pZC5jYWxsKHRoaXMsIGkpIHx8ICdrZXlsZXNzJywgZSwgaSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpZWxkczogZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0ge307CiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzKSkKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgaSA9IHMubGVuZ3RoOyBlIDwgaTsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gYi5maWVsZHMuY2FsbCh0aGlzLCBzW2VdKTsKICAgICAgICAgICAgICAgICAgICAgICAgdFtzW2VdXSA9IG5bc1tlXV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMucy5maWVsZHM7CiAgICAgICAgICAgICAgICAgICAgKHMgPSBzIHx8ICdrZXlsZXNzJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaChyLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBzKSwgKG4gPSBlLmRhdGFTcmMoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gKGkgPSBXKGksIG4pKS5maWx0ZXIoJ1tkYXRhLWVkaXRvci12YWx1ZV0nKS5sZW5ndGggPyBpLmF0dHIoJ2RhdGEtZWRpdG9yLXZhbHVlJykgOiBpLmh0bWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudmFsVG9EYXRhKG8sIG51bGwgPT09IG4gPyB2b2lkIDAgOiBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0W3NdID0geyBkYXRhOiBvLCBmaWVsZHM6IHIsIGlkU3JjOiBzLCBub2RlOiB5LCB0eXBlOiAncm93JyB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9LAogICAgICAgICAgICBpZDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1KHRoaXMucy5pZFNyYykodCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluZGl2aWR1YWw6IGZ1bmN0aW9uIChpLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgcywgdCwgbywgcjsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAoKGkgaW5zdGFuY2VvZiB3IHx8IGkubm9kZU5hbWUpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgocyA9IGkpLAogICAgICAgICAgICAgICAgICAgICAgICAobiA9IG4gfHwgW3coaSkuYXR0cignZGF0YS1lZGl0b3ItZmllbGQnKV0pLAogICAgICAgICAgICAgICAgICAgICAgICAodCA9IHcuZm4uYWRkQmFjayA/ICdhZGRCYWNrJyA6ICdhbmRTZWxmJyksCiAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdyhpKS5wYXJlbnRzKCdbZGF0YS1lZGl0b3ItaWRdJylbdF0oKS5kYXRhKCdlZGl0b3ItaWQnKSkpLAogICAgICAgICAgICAgICAgICAgIChpID0gaSB8fCAna2V5bGVzcycpLAogICAgICAgICAgICAgICAgICAgIChuID0gbiAmJiAhQXJyYXkuaXNBcnJheShuKSA/IFtuXSA6IG4pICYmIDAgIT09IG4ubGVuZ3RoKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gYi5maWVsZHMuY2FsbCh0aGlzLCBpKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gdGhpcy5zLmZpZWxkcyksCiAgICAgICAgICAgICAgICAgICAgICAgIChyID0ge30pLAogICAgICAgICAgICAgICAgICAgICAgICB3LmVhY2gobiwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbZV0gPSBvW2VdOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS50eXBlID0gJ2NlbGwnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5hdHRhY2hGaWVsZHMgPSBbbl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmF0dGFjaCA9IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB3KHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB3KCksIG4gPSAwLCBzID0gZS5sZW5ndGg7IG4gPCBzOyBuKyspIGkgPSBpLmFkZChXKHQsIGVbbl0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoaSwgbikudG9BcnJheSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5maWVsZHMgPSBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kaXNwbGF5RmllbGRzID0gcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lIGZpZWxkIG5hbWUgZnJvbSBkYXRhIHNvdXJjZScpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbml0RmllbGQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHcoJ1tkYXRhLWVkaXRvci1sYWJlbD0iJyArICh0LmRhdGEgfHwgdC5uYW1lKSArICciXScpOwogICAgICAgICAgICAgICAgIXQubGFiZWwgJiYgZS5sZW5ndGggJiYgKHQubGFiZWwgPSBlLmh0bWwoKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICdrZXlsZXNzJyAhPT0gdCAmJiBxKHQpLnJlbW92ZSgpOwogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgRyA9IHsKICAgICAgICAgICAgYWN0aW9uczogeyBjcmVhdGU6ICdEVEVfQWN0aW9uX0NyZWF0ZScsIGVkaXQ6ICdEVEVfQWN0aW9uX0VkaXQnLCByZW1vdmU6ICdEVEVfQWN0aW9uX1JlbW92ZScgfSwKICAgICAgICAgICAgYm9keTogeyBjb250ZW50OiAnRFRFX0JvZHlfQ29udGVudCcsIHdyYXBwZXI6ICdEVEVfQm9keScgfSwKICAgICAgICAgICAgYnViYmxlOiB7CiAgICAgICAgICAgICAgICBiZzogJ0RURV9CdWJibGVfQmFja2dyb3VuZCcsCiAgICAgICAgICAgICAgICBjbG9zZTogJ0RURV9CdWJibGVfQ2xvc2UnLAogICAgICAgICAgICAgICAgbGluZXI6ICdEVEVfQnViYmxlX0xpbmVyJywKICAgICAgICAgICAgICAgIHBvaW50ZXI6ICdEVEVfQnViYmxlX1RyaWFuZ2xlJywKICAgICAgICAgICAgICAgIHRhYmxlOiAnRFRFX0J1YmJsZV9UYWJsZScsCiAgICAgICAgICAgICAgICB3cmFwcGVyOiAnRFRFIERURV9CdWJibGUnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBmaWVsZDogewogICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICdkaXNhYmxlZCcsCiAgICAgICAgICAgICAgICBlcnJvcjogJ0RURV9GaWVsZF9TdGF0ZUVycm9yJywKICAgICAgICAgICAgICAgIGlucHV0OiAnRFRFX0ZpZWxkX0lucHV0JywKICAgICAgICAgICAgICAgIGlucHV0Q29udHJvbDogJ0RURV9GaWVsZF9JbnB1dENvbnRyb2wnLAogICAgICAgICAgICAgICAgbGFiZWw6ICdEVEVfTGFiZWwnLAogICAgICAgICAgICAgICAgJ21zZy1lcnJvcic6ICdEVEVfRmllbGRfRXJyb3InLAogICAgICAgICAgICAgICAgJ21zZy1pbmZvJzogJ0RURV9GaWVsZF9JbmZvJywKICAgICAgICAgICAgICAgICdtc2ctbGFiZWwnOiAnRFRFX0xhYmVsX0luZm8nLAogICAgICAgICAgICAgICAgJ21zZy1tZXNzYWdlJzogJ0RURV9GaWVsZF9NZXNzYWdlJywKICAgICAgICAgICAgICAgIG11bHRpSW5mbzogJ211bHRpLWluZm8nLAogICAgICAgICAgICAgICAgbXVsdGlOb0VkaXQ6ICdtdWx0aS1ub0VkaXQnLAogICAgICAgICAgICAgICAgbXVsdGlSZXN0b3JlOiAnbXVsdGktcmVzdG9yZScsCiAgICAgICAgICAgICAgICBtdWx0aVZhbHVlOiAnbXVsdGktdmFsdWUnLAogICAgICAgICAgICAgICAgbmFtZVByZWZpeDogJ0RURV9GaWVsZF9OYW1lXycsCiAgICAgICAgICAgICAgICBwcm9jZXNzaW5nOiAnRFRFX1Byb2Nlc3NpbmdfSW5kaWNhdG9yJywKICAgICAgICAgICAgICAgIHR5cGVQcmVmaXg6ICdEVEVfRmllbGRfVHlwZV8nLAogICAgICAgICAgICAgICAgd3JhcHBlcjogJ0RURV9GaWVsZCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvb3RlcjogeyBjb250ZW50OiAnRFRFX0Zvb3Rlcl9Db250ZW50Jywgd3JhcHBlcjogJ0RURV9Gb290ZXInIH0sCiAgICAgICAgICAgIGZvcm06IHsKICAgICAgICAgICAgICAgIGJ1dHRvbjogJ2J0bicsCiAgICAgICAgICAgICAgICBidXR0b25TdWJtaXQ6ICdidG4nLAogICAgICAgICAgICAgICAgYnV0dG9uSW50ZXJuYWw6ICdidG4nLAogICAgICAgICAgICAgICAgYnV0dG9uczogJ0RURV9Gb3JtX0J1dHRvbnMnLAogICAgICAgICAgICAgICAgY29udGVudDogJ0RURV9Gb3JtX0NvbnRlbnQnLAogICAgICAgICAgICAgICAgZXJyb3I6ICdEVEVfRm9ybV9FcnJvcicsCiAgICAgICAgICAgICAgICBpbmZvOiAnRFRFX0Zvcm1fSW5mbycsCiAgICAgICAgICAgICAgICB0YWc6ICcnLAogICAgICAgICAgICAgICAgd3JhcHBlcjogJ0RURV9Gb3JtJywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVhZGVyOiB7IGNvbnRlbnQ6ICdEVEVfSGVhZGVyX0NvbnRlbnQnLCB0aXRsZTogeyB0YWc6IG51bGwsIGNsYXNzOiAnJyB9LCB3cmFwcGVyOiAnRFRFX0hlYWRlcicgfSwKICAgICAgICAgICAgaW5saW5lOiB7IGJ1dHRvbnM6ICdEVEVfSW5saW5lX0J1dHRvbnMnLCBsaW5lcjogJ0RURV9JbmxpbmVfRmllbGQnLCB3cmFwcGVyOiAnRFRFIERURV9JbmxpbmUnIH0sCiAgICAgICAgICAgIHByb2Nlc3Npbmc6IHsgYWN0aXZlOiAncHJvY2Vzc2luZycsIGluZGljYXRvcjogJ0RURV9Qcm9jZXNzaW5nX0luZGljYXRvcicgfSwKICAgICAgICAgICAgd3JhcHBlcjogJ0RURScsCiAgICAgICAgfSwKICAgICAgICBnID0gITEsCiAgICAgICAgSiA9IDEsCiAgICAgICAgRSA9IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdygnPGRpdiBjbGFzcz0iRFRFRF9FbnZlbG9wZV9CYWNrZ3JvdW5kIj48ZGl2PjwvZGl2PjwvZGl2PicpWzBdLAogICAgICAgICAgICBjbG9zZTogdygnPGRpdiBjbGFzcz0iRFRFRF9FbnZlbG9wZV9DbG9zZSI+PC9kaXY+JylbMF0sCiAgICAgICAgICAgIGNvbnRlbnQ6IG51bGwsCiAgICAgICAgICAgIHdyYXBwZXI6IHcoCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iRFRFRCBEVEVEX0VudmVsb3BlX1dyYXBwZXIiPjxkaXYgY2xhc3M9IkRURURfRW52ZWxvcGVfU2hhZG93Ij48L2Rpdj48ZGl2IGNsYXNzPSJEVEVEX0VudmVsb3BlX0NvbnRhaW5lciI+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgKVswXSwKICAgICAgICB9OwogICAgZnVuY3Rpb24gWCh0KSB7CiAgICAgICAgdmFyIGUgPSB3KCdkaXYuRFRFX0hlYWRlcicsIEUud3JhcHBlcikub3V0ZXJIZWlnaHQoKSwKICAgICAgICAgICAgaSA9IHcoJ2Rpdi5EVEVfRm9vdGVyJywgRS53cmFwcGVyKS5vdXRlckhlaWdodCgpLAogICAgICAgICAgICBlID0gdyhwKS5oZWlnaHQoKSAtIDIgKiBULmNvbmYud2luZG93UGFkZGluZyAtIGUgLSBpOwogICAgICAgIHJldHVybiB3KCdkaXYuRFRFX0JvZHlfQ29udGVudCcsIEUud3JhcHBlcikuY3NzKCdtYXhIZWlnaHQnLCBlKSwgdyh0LmRvbS53cmFwcGVyKS5vdXRlckhlaWdodCgpOwogICAgfQogICAgZnVuY3Rpb24gJCh0LCBlKSB7CiAgICAgICAgKGUgPSBlIHx8IGZ1bmN0aW9uICgpIHt9KSwKICAgICAgICAgICAgZyAmJgogICAgICAgICAgICAgICAgKHcoRS5jb250ZW50KS5hbmltYXRlKHsgdG9wOiAtKEUuY29udGVudC5vZmZzZXRIZWlnaHQgKyA1MCkgfSwgNjAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdyhbRS53cmFwcGVyLCBFLmJhY2tncm91bmRdKS5mYWRlT3V0KCdub3JtYWwnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHcodGhpcykuZGV0YWNoKCksIGUoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKGcgPSAhMSkpOwogICAgfQogICAgZnVuY3Rpb24gUShlLCB0KSB7CiAgICAgICAgdmFyIGksIG4sIHMsIG8sIHI7CiAgICAgICAgKHQgPSB0IHx8IGZ1bmN0aW9uICgpIHt9KSwKICAgICAgICAgICAgdygnYm9keScpLmFwcGVuZChFLmJhY2tncm91bmQpLmFwcGVuZChFLndyYXBwZXIpLAogICAgICAgICAgICAoRS5jb250ZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJyksCiAgICAgICAgICAgIGcgfHwKICAgICAgICAgICAgICAgICgoKGkgPSBFLndyYXBwZXIuc3R5bGUpLm9wYWNpdHkgPSAnMCcpLAogICAgICAgICAgICAgICAgKGkuZGlzcGxheSA9ICdibG9jaycpLAogICAgICAgICAgICAgICAgKG4gPSBYKGUpKSwKICAgICAgICAgICAgICAgIChzID0gZSksCiAgICAgICAgICAgICAgICAobyA9IFQuY29uZi5hdHRhY2gpLAogICAgICAgICAgICAgICAgKHIgPSBuZXcgdy5mbi5kYXRhVGFibGUuQXBpKHMucy50YWJsZSkpLAogICAgICAgICAgICAgICAgKHIgPSAobyA9ICdoZWFkJyA9PT0gbyB8fCAnY3JlYXRlJyA9PT0gcy5zLmFjdGlvbiA/IHIudGFibGUodm9pZCAwKS5oZWFkZXIoKSA6IHIucm93KHMucy5tb2RpZmllcikubm9kZSgpKS5vZmZzZXRXaWR0aCksCiAgICAgICAgICAgICAgICAoaS5kaXNwbGF5ID0gJ25vbmUnKSwKICAgICAgICAgICAgICAgIChpLm9wYWNpdHkgPSAnMScpLAogICAgICAgICAgICAgICAgKEUud3JhcHBlci5zdHlsZS53aWR0aCA9IHIgKyAncHgnKSwKICAgICAgICAgICAgICAgIChFLndyYXBwZXIuc3R5bGUubWFyZ2luTGVmdCA9IC1yIC8gMiArICdweCcpLAogICAgICAgICAgICAgICAgKEUud3JhcHBlci5zdHlsZS50b3AgPSB3KG8pLm9mZnNldCgpLnRvcCArIG8ub2Zmc2V0SGVpZ2h0ICsgJ3B4JyksCiAgICAgICAgICAgICAgICAoRS5jb250ZW50LnN0eWxlLnRvcCA9IC0xICogbiAtIDIwICsgJ3B4JyksCiAgICAgICAgICAgICAgICAoRS5iYWNrZ3JvdW5kLnN0eWxlLm9wYWNpdHkgPSAnMCcpLAogICAgICAgICAgICAgICAgKEUuYmFja2dyb3VuZC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJyksCiAgICAgICAgICAgICAgICB3KEUuYmFja2dyb3VuZCkuYW5pbWF0ZSh7IG9wYWNpdHk6IEogfSwgJ25vcm1hbCcpLAogICAgICAgICAgICAgICAgdyhFLndyYXBwZXIpLmZhZGVJbigpLAogICAgICAgICAgICAgICAgdyhFLmNvbnRlbnQpLmFuaW1hdGUoeyB0b3A6IDAgfSwgNjAwLCB0KSksCiAgICAgICAgICAgIHcoRS5jbG9zZSkKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIGUuaTE4bi5jbG9zZSkKICAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrLkRURURfRW52ZWxvcGUnKQogICAgICAgICAgICAgICAgLm9uKCdjbGljay5EVEVEX0VudmVsb3BlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBlLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgdyhFLmJhY2tncm91bmQpCiAgICAgICAgICAgICAgICAub2ZmKCdjbGljay5EVEVEX0VudmVsb3BlJykKICAgICAgICAgICAgICAgIC5vbignY2xpY2suRFRFRF9FbnZlbG9wZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgZS5iYWNrZ3JvdW5kKCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgdygnZGl2LkRURURfTGlnaHRib3hfQ29udGVudF9XcmFwcGVyJywgRS53cmFwcGVyKQogICAgICAgICAgICAgICAgLm9mZignY2xpY2suRFRFRF9FbnZlbG9wZScpCiAgICAgICAgICAgICAgICAub24oJ2NsaWNrLkRURURfRW52ZWxvcGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHcodC50YXJnZXQpLmhhc0NsYXNzKCdEVEVEX0VudmVsb3BlX0NvbnRlbnRfV3JhcHBlcicpICYmIGUuYmFja2dyb3VuZCgpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHcocCkKICAgICAgICAgICAgICAgIC5vZmYoJ3Jlc2l6ZS5EVEVEX0VudmVsb3BlJykKICAgICAgICAgICAgICAgIC5vbigncmVzaXplLkRURURfRW52ZWxvcGUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgWChlKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoZyA9ICEwKTsKICAgIH0KICAgIHZhciBUID0gewogICAgICAgIGNsb3NlOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAkKDAsIGUpOwogICAgICAgIH0sCiAgICAgICAgY29uZjogeyBhdHRhY2g6ICdyb3cnLCB3aW5kb3dQYWRkaW5nOiA1MCB9LAogICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICQoKTsKICAgICAgICB9LAogICAgICAgIGluaXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiAoRS5jb250ZW50ID0gdygnZGl2LkRURURfRW52ZWxvcGVfQ29udGFpbmVyJywgRS53cmFwcGVyKVswXSksIChKID0gdyhFLmJhY2tncm91bmQpLmNzcygnb3BhY2l0eScpKSwgVDsKICAgICAgICB9LAogICAgICAgIG5vZGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiBFLndyYXBwZXJbMF07CiAgICAgICAgfSwKICAgICAgICBvcGVuOiBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICB3KEUuY29udGVudCkuY2hpbGRyZW4oKS5kZXRhY2goKSwgRS5jb250ZW50LmFwcGVuZENoaWxkKGUpLCBFLmNvbnRlbnQuYXBwZW5kQ2hpbGQoRS5jbG9zZSksIFEodCwgaSk7CiAgICAgICAgfSwKICAgIH07CiAgICBmdW5jdGlvbiBaKCkgewogICAgICAgIHJldHVybiB2b2lkIDAgIT09IHAub3JpZW50YXRpb24gJiYgcC5vdXRlcldpZHRoIDw9IDU3NjsKICAgIH0KICAgIHZhciBvID0gITEsCiAgICAgICAgSyA9ICExLAogICAgICAgIFkgPSAwLAogICAgICAgIEQgPSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHcoJzxkaXYgY2xhc3M9IkRURURfTGlnaHRib3hfQmFja2dyb3VuZCI+PGRpdj48L2Rpdj48L2Rpdj4nKSwKICAgICAgICAgICAgY2xvc2U6IHcoJzxkaXYgY2xhc3M9IkRURURfTGlnaHRib3hfQ2xvc2UiPjwvZGl2PicpLAogICAgICAgICAgICBjb250ZW50OiBudWxsLAogICAgICAgICAgICB3cmFwcGVyOiB3KAogICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IkRURUQgRFRFRF9MaWdodGJveF9XcmFwcGVyIj48ZGl2IGNsYXNzPSJEVEVEX0xpZ2h0Ym94X0NvbnRhaW5lciI+PGRpdiBjbGFzcz0iRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXIiPjxkaXYgY2xhc3M9IkRURURfTGlnaHRib3hfQ29udGVudCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgKSwKICAgICAgICB9OwogICAgZnVuY3Rpb24gdHQoKSB7CiAgICAgICAgdmFyIHQgPSB3KCdkaXYuRFRFX0hlYWRlcicsIEQud3JhcHBlcikub3V0ZXJIZWlnaHQoKSArIHcoJ2Rpdi5EVEVfRm9vdGVyJywgRC53cmFwcGVyKS5vdXRlckhlaWdodCgpOwogICAgICAgIFooKQogICAgICAgICAgICA/IHcoJ2Rpdi5EVEVfQm9keV9Db250ZW50JywgRC53cmFwcGVyKS5jc3MoJ21heEhlaWdodCcsICdjYWxjKDEwMHZoIC0gJyArIHQgKyAncHgpJykKICAgICAgICAgICAgOiAoKHQgPSB3KHApLmhlaWdodCgpIC0gMiAqIHguY29uZi53aW5kb3dQYWRkaW5nIC0gdCksIHcoJ2Rpdi5EVEVfQm9keV9Db250ZW50JywgRC53cmFwcGVyKS5jc3MoJ21heEhlaWdodCcsIHQpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGV0KHQsIGUpIHsKICAgICAgICAoZSA9IGUgfHwgZnVuY3Rpb24gKCkge30pLAogICAgICAgICAgICB3KCdib2R5Jykuc2Nyb2xsVG9wKFkpLAogICAgICAgICAgICB0Ll9hbmltYXRlKEQud3JhcHBlciwgeyBvcGFjaXR5OiAwLCB0b3A6IHguY29uZi5vZmZzZXRBbmkgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdyh0aGlzKS5kZXRhY2goKSwgZSgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdC5fYW5pbWF0ZShELmJhY2tncm91bmQsIHsgb3BhY2l0eTogMCB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB3KHRoaXMpLmRldGFjaCgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKG8gPSAhMSksCiAgICAgICAgICAgIHcocCkub2ZmKCdyZXNpemUuRFRFRF9MaWdodGJveCcpOwogICAgfQogICAgdmFyIHggPSB7CiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgZXQodCwgZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbmY6IHsgb2Zmc2V0QW5pOiAyNSwgd2luZG93UGFkZGluZzogMjUgfSwKICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIG8gJiYgZXQodCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIEsgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKChELmNvbnRlbnQgPSB3KCdkaXYuRFRFRF9MaWdodGJveF9Db250ZW50JywgRC53cmFwcGVyKSksCiAgICAgICAgICAgICAgICAgICAgICAgIEQud3JhcHBlci5jc3MoJ29wYWNpdHknLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgRC5iYWNrZ3JvdW5kLmNzcygnb3BhY2l0eScsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAoSyA9ICEwKSksCiAgICAgICAgICAgICAgICAgICAgeAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbm9kZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBELndyYXBwZXJbMF07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICBzID0gRC5jb250ZW50OwogICAgICAgICAgICAgICAgcy5jaGlsZHJlbigpLmRldGFjaCgpLAogICAgICAgICAgICAgICAgICAgIHMuYXBwZW5kKGUpLmFwcGVuZChELmNsb3NlKSwKICAgICAgICAgICAgICAgICAgICAobiA9IHQpLAogICAgICAgICAgICAgICAgICAgIChzID0gaSksCiAgICAgICAgICAgICAgICAgICAgWigpICYmIHcoJ2JvZHknKS5hZGRDbGFzcygnRFRFRF9MaWdodGJveF9Nb2JpbGUnKSwKICAgICAgICAgICAgICAgICAgICB3KCdib2R5JykuYXBwZW5kKEQuYmFja2dyb3VuZCkuYXBwZW5kKEQud3JhcHBlciksCiAgICAgICAgICAgICAgICAgICAgdHQoKSwKICAgICAgICAgICAgICAgICAgICBvIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICgobyA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgRC5jb250ZW50LmNzcygnaGVpZ2h0JywgJ2F1dG8nKSwKICAgICAgICAgICAgICAgICAgICAgICAgRC53cmFwcGVyLmNzcyh7IHRvcDogLXguY29uZi5vZmZzZXRBbmkgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG4uX2FuaW1hdGUoRC53cmFwcGVyLCB7IG9wYWNpdHk6IDEsIHRvcDogMCB9LCBzKSwKICAgICAgICAgICAgICAgICAgICAgICAgbi5fYW5pbWF0ZShELmJhY2tncm91bmQsIHsgb3BhY2l0eTogMSB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdyhwKS5vbigncmVzaXplLkRURURfTGlnaHRib3gnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKFkgPSB3KCdib2R5Jykuc2Nyb2xsVG9wKCkpKSwKICAgICAgICAgICAgICAgICAgICBELmNsb3NlCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIG4uaTE4bi5jbG9zZSkKICAgICAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2suRFRFRF9MaWdodGJveCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2suRFRFRF9MaWdodGJveCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIEQuYmFja2dyb3VuZC5vZmYoJ2NsaWNrLkRURURfTGlnaHRib3gnKS5vbignY2xpY2suRFRFRF9MaWdodGJveCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIG4uYmFja2dyb3VuZCgpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHcoJ2Rpdi5EVEVEX0xpZ2h0Ym94X0NvbnRlbnRfV3JhcHBlcicsIEQud3JhcHBlcikKICAgICAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2suRFRFRF9MaWdodGJveCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2suRFRFRF9MaWdodGJveCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3KHQudGFyZ2V0KS5oYXNDbGFzcygnRFRFRF9MaWdodGJveF9Db250ZW50X1dyYXBwZXInKSAmJiAodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwgbi5iYWNrZ3JvdW5kKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGl0ID0gdy5mbi5kYXRhVGFibGU7CiAgICBmdW5jdGlvbiBudCh0LCBlLCBpKSB7CiAgICAgICAgaWYgKCh2b2lkIDAgPT09IGkgJiYgKGkgPSAhMCksIEFycmF5LmlzQXJyYXkodCkpKSB7CiAgICAgICAgICAgIHZvaWQgMCAhPT0gZSAmJiB0LnJldmVyc2UoKTsKICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIHMgPSB0OyBuIDwgcy5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgICAgdmFyIG8gPSBzW25dOwogICAgICAgICAgICAgICAgdGhpcy5hZGQobywgZSwgITEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlSZW9yZGVyKHRoaXMub3JkZXIoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHIgPSB0Lm5hbWU7CiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHIpIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWRkaW5nIGZpZWxkLiBUaGUgZmllbGQgcmVxdWlyZXMgYSBgbmFtZWAgb3B0aW9uJyk7CiAgICAgICAgICAgIGlmICh0aGlzLnMuZmllbGRzW3JdKSB0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGFkZGluZyBmaWVsZCAnIiArIHIgKyAiJy4gQSBmaWVsZCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoaXMgbmFtZSIpOwogICAgICAgICAgICB0aGlzLl9kYXRhU291cmNlKCdpbml0RmllbGQnLCB0KTsKICAgICAgICAgICAgdmFyIGEgPSBuZXcgUC5GaWVsZCh0LCB0aGlzLmNsYXNzZXMuZmllbGQsIHRoaXMpOwogICAgICAgICAgICB0aGlzLnMubW9kZSAmJgogICAgICAgICAgICAgICAgKCh0ID0gdGhpcy5zLmVkaXRGaWVsZHMpLAogICAgICAgICAgICAgICAgYS5tdWx0aVJlc2V0KCksCiAgICAgICAgICAgICAgICB3LmVhY2godCwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgICAgICBlLmRhdGEgJiYgKGkgPSBhLnZhbEZyb21EYXRhKGUuZGF0YSkpLCBhLm11bHRpU2V0KHQsIHZvaWQgMCAhPT0gaSA/IGkgOiBhLmRlZigpKTsKICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuZmllbGRzW3JdID0gYSksCiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgICAgICA/IHRoaXMucy5vcmRlci5wdXNoKHIpCiAgICAgICAgICAgICAgICAgICAgOiBudWxsID09PSBlCiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnMub3JkZXIudW5zaGlmdChyKQogICAgICAgICAgICAgICAgICAgIDogKCh0ID0gdy5pbkFycmF5KGUsIHRoaXMucy5vcmRlcikpLCB0aGlzLnMub3JkZXIuc3BsaWNlKHQgKyAxLCAwLCByKSksCiAgICAgICAgICAgICAgICAhMSAhPT0gaSAmJiB0aGlzLl9kaXNwbGF5UmVvcmRlcih0aGlzLm9yZGVyKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGZ1bmN0aW9uIHN0KHQpIHsKICAgICAgICByZXR1cm4gdCA/ICgodGhpcy5zLmFqYXggPSB0KSwgdGhpcykgOiB0aGlzLnMuYWpheDsKICAgIH0KICAgIGZ1bmN0aW9uIG90KCkgewogICAgICAgIHZhciB0ID0gdGhpcy5zLmVkaXRPcHRzLm9uQmFja2dyb3VuZDsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gdCh0aGlzKSA6ICdibHVyJyA9PT0gdCA/IHRoaXMuYmx1cigpIDogJ2Nsb3NlJyA9PT0gdCA/IHRoaXMuY2xvc2UoKSA6ICdzdWJtaXQnID09PSB0ICYmIHRoaXMuc3VibWl0KCksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gcnQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2JsdXIoKSwgdGhpczsKICAgIH0KICAgIGZ1bmN0aW9uIGF0KHQsIGUsIGEsIGwpIHsKICAgICAgICB2YXIgZCwKICAgICAgICAgICAgdSA9IHRoaXMsCiAgICAgICAgICAgIGkgPSAodm9pZCAwID09PSBhICYmIChhID0gITApLCB0aGlzKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB0aGlzLl90aWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGkuYnViYmxlKHQsIGUsIGwpOwogICAgICAgICAgICB9KSB8fAogICAgICAgICAgICAgICAgKHcuaXNQbGFpbk9iamVjdChlKSA/ICgobCA9IGUpLCAoYSA9ICEoZSA9IHZvaWQgMCkpKSA6ICdib29sZWFuJyA9PSB0eXBlb2YgZSAmJiAoKGEgPSBlKSwgKGwgPSBlID0gdm9pZCAwKSksCiAgICAgICAgICAgICAgICB3LmlzUGxhaW5PYmplY3QoYSkgJiYgKChsID0gYSksIChhID0gITApKSwKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gYSAmJiAoYSA9ICEwKSwKICAgICAgICAgICAgICAgIChsID0gdy5leHRlbmQoe30sIHRoaXMucy5mb3JtT3B0aW9ucy5idWJibGUsIGwpKSwKICAgICAgICAgICAgICAgIChkID0gdGhpcy5fZGF0YVNvdXJjZSgnaW5kaXZpZHVhbCcsIHQsIGUpKSwKICAgICAgICAgICAgICAgIHRoaXMuX2VkaXQodCwgZCwgJ2J1YmJsZScsIGwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHUuX2Zvcm1PcHRpb25zKGwpOwogICAgICAgICAgICAgICAgICAgIGlmICghdS5fcHJlb3BlbignYnViYmxlJykpIHJldHVybiB1OwogICAgICAgICAgICAgICAgICAgIHcocCkub24oJ3Jlc2l6ZS4nICsgZSArICcgc2Nyb2xsLicgKyBlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHUuYnViYmxlUG9zaXRpb24oKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB0ID0gKCh1LnMuYnViYmxlTm9kZXMgPSB0LmNvbmNhdC5hcHBseSh0LCBmKGQsICdhdHRhY2gnKSkpLCB1LmNsYXNzZXMuYnViYmxlKSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHcoJzxkaXYgY2xhc3M9IicgKyB0LmJnICsgJyI+PGRpdj48L2Rpdj48L2Rpdj4nKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC53cmFwcGVyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIj48ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmxpbmVyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIj48ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRhYmxlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIj48ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNsb3NlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIiB0aXRsZT0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5pMThuLmNsb3NlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIj48L2Rpdj48ZGl2IGNsYXNzPSJEVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3IiPjxzcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucG9pbnRlciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IChhICYmIChuLmFwcGVuZFRvKCdib2R5JyksIGkuYXBwZW5kVG8oJ2JvZHknKSksIG4uY2hpbGRyZW4oKS5lcSgwKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0LmNoaWxkcmVuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBzLmNoaWxkcmVuKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuYXBwZW5kKHUuZG9tLmZvcm1FcnJvciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnByZXBlbmQodS5kb20uZm9ybSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLm1lc3NhZ2UgJiYgdC5wcmVwZW5kKHUuZG9tLmZvcm1JbmZvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwudGl0bGUgJiYgdC5wcmVwZW5kKHUuZG9tLmhlYWRlciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmJ1dHRvbnMgJiYgcy5hcHBlbmQodS5kb20uYnV0dG9ucyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3KCkuYWRkKG4pLmFkZChpKSk7CiAgICAgICAgICAgICAgICAgICAgdS5fY2xvc2VSZWcoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdS5fYW5pbWF0ZShyLCB7IG9wYWNpdHk6IDAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyA9PT0gblswXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmRldGFjaCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcocCkub2ZmKCdyZXNpemUuJyArIGUgKyAnIHNjcm9sbC4nICsgZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5fY2xlYXJEeW5hbWljSW5mbygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuX2V2ZW50KCdjbG9zZWQnLCBbJ2J1YmJsZSddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuYmx1cigpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgby5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Ll9jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdS5idWJibGVQb3NpdGlvbigpLAogICAgICAgICAgICAgICAgICAgICAgICB1Ll9wb3N0b3BlbignYnViYmxlJywgITEpOwogICAgICAgICAgICAgICAgICAgIHUuX2FuaW1hdGUociwgeyBvcGFjaXR5OiAxIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyA9PT0gblswXSAmJiAodS5fZm9jdXModS5zLmluY2x1ZGVGaWVsZHMsIGwuZm9jdXMpLCB1Ll9ldmVudCgnb3BlbmVkJywgWydidWJibGUnLCB1LnMuYWN0aW9uXSkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIGx0KHQpIHsKICAgICAgICByZXR1cm4gdCA/ICgodGhpcy5zLmJ1YmJsZUxvY2F0aW9uID0gdCksIHRoaXMuYnViYmxlUG9zaXRpb24oKSwgdGhpcykgOiB0aGlzLnMuYnViYmxlTG9jYXRpb247CiAgICB9CiAgICBmdW5jdGlvbiBkdCgpIHsKICAgICAgICB2YXIgdCA9IHcoJ2Rpdi5EVEVfQnViYmxlJyksCiAgICAgICAgICAgIGUgPSB3KCdkaXYuRFRFX0J1YmJsZV9MaW5lcicpLAogICAgICAgICAgICBpID0gdGhpcy5zLmJ1YmJsZU5vZGVzLAogICAgICAgICAgICBuID0geyBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAgfSwKICAgICAgICAgICAgaSA9CiAgICAgICAgICAgICAgICAody5lYWNoKGksIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB3KGUpLm9mZnNldCgpOwogICAgICAgICAgICAgICAgICAgIChlID0gdyhlKS5nZXQoMCkpLAogICAgICAgICAgICAgICAgICAgICAgICAobi50b3AgKz0gaS50b3ApLAogICAgICAgICAgICAgICAgICAgICAgICAobi5sZWZ0ICs9IGkubGVmdCksCiAgICAgICAgICAgICAgICAgICAgICAgIChuLnJpZ2h0ICs9IGkubGVmdCArIGUub2Zmc2V0V2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICAobi5ib3R0b20gKz0gaS50b3AgKyBlLm9mZnNldEhlaWdodCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChuLnRvcCAvPSBpLmxlbmd0aCksCiAgICAgICAgICAgICAgICAobi5sZWZ0IC89IGkubGVuZ3RoKSwKICAgICAgICAgICAgICAgIChuLnJpZ2h0IC89IGkubGVuZ3RoKSwKICAgICAgICAgICAgICAgIChuLmJvdHRvbSAvPSBpLmxlbmd0aCksCiAgICAgICAgICAgICAgICBuLnRvcCksCiAgICAgICAgICAgIHMgPSAobi5sZWZ0ICsgbi5yaWdodCkgLyAyLAogICAgICAgICAgICBvID0gZS5vdXRlcldpZHRoKCksCiAgICAgICAgICAgIHIgPSBlLm91dGVySGVpZ2h0KCksCiAgICAgICAgICAgIGEgPSBzIC0gbyAvIDIsCiAgICAgICAgICAgIG8gPSBhICsgbywKICAgICAgICAgICAgbCA9IHcocCkud2lkdGgoKSwKICAgICAgICAgICAgZCA9IHcocCkuc2Nyb2xsVG9wKCksCiAgICAgICAgICAgIHUgPSB0aGlzLnMuYnViYmxlTG9jYXRpb24sCiAgICAgICAgICAgIGMgPSAnYXV0bycgIT09IHUgPyB1IDogdGhpcy5zLmJ1YmJsZUJvdHRvbSA/ICdib3R0b20nIDogJ3RvcCcsCiAgICAgICAgICAgIHMgPSAodC5jc3MoeyBsZWZ0OiBzLCB0b3A6ICdib3R0b20nID09PSBjID8gbi5ib3R0b20gOiBpIH0pLnRvZ2dsZUNsYXNzKCdiZWxvdycsICdib3R0b20nID09PSBjKSwgdC5wb3NpdGlvbigpKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAnYXV0bycgPT09IHUgJiYKICAgICAgICAgICAgICAgIChlLmxlbmd0aCAmJiBzLnRvcCArIHIgPiBkICsgcC5pbm5lckhlaWdodAogICAgICAgICAgICAgICAgICAgID8gKHQuY3NzKCd0b3AnLCBpKS5yZW1vdmVDbGFzcygnYmVsb3cnKSwgKHRoaXMucy5idWJibGVCb3R0b20gPSAhMSkpCiAgICAgICAgICAgICAgICAgICAgOiBlLmxlbmd0aCAmJiBzLnRvcCAtIHIgPCBkICYmICh0LmNzcygndG9wJywgbi5ib3R0b20pLmFkZENsYXNzKCdiZWxvdycpLCAodGhpcy5zLmJ1YmJsZUJvdHRvbSA9ICEwKSkpLAogICAgICAgICAgICBsIDwgbyArIDE1ID8gZS5jc3MoJ2xlZnQnLCBhIDwgMTUgPyAtKGEgLSAxNSkgOiAtKDE1ICsgKG8gLSBsKSkpIDogZS5jc3MoJ2xlZnQnLCBhIDwgMTUgPyAtKGEgLSAxNSkgOiAwKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiB1dCh0KSB7CiAgICAgICAgdmFyIG8gPSB0aGlzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICdfYmFzaWMnID09PSB0CiAgICAgICAgICAgICAgICA/ICh0ID0gWwogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5pMThuW3RoaXMucy5hY3Rpb25dLnN1Ym1pdCwKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuY2xhc3Nlcy5mb3JtLmJ1dHRvblN1Ym1pdCwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICA6IEFycmF5LmlzQXJyYXkodCkgfHwgKHQgPSBbdF0pLAogICAgICAgICAgICB3KHRoaXMuZG9tLmJ1dHRvbnMpLmVtcHR5KCksCiAgICAgICAgICAgIHcuZWFjaCh0LCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGkgPQogICAgICAgICAgICAgICAgICAgICAgICAoZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG8uY2xhc3Nlcy5mb3JtLmJ1dHRvblN1Ym1pdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGUpLnRleHQgfHwgZS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICBuID0gZS5hY3Rpb24gfHwgZS5mbiwKICAgICAgICAgICAgICAgICAgICBzID0gZS5hdHRyIHx8IHt9OwogICAgICAgICAgICAgICAgdygnPGJ1dHRvbj48L2J1dHRvbj4nLCB7IGNsYXNzOiBvLmNsYXNzZXMuZm9ybS5idXR0b24gKyAoZS5jbGFzc05hbWUgPyAnICcgKyBlLmNsYXNzTmFtZSA6ICcnKSB9KQogICAgICAgICAgICAgICAgICAgIC5odG1sKCdmdW5jdGlvbicgPT0gdHlwZW9mIGkgPyBpKG8pIDogaSB8fCAnJykKICAgICAgICAgICAgICAgICAgICAuYXR0cigndGFiaW5kZXgnLCB2b2lkIDAgIT09IGUudGFiSW5kZXggPyBlLnRhYkluZGV4IDogMCkKICAgICAgICAgICAgICAgICAgICAuYXR0cihzKQogICAgICAgICAgICAgICAgICAgIC5vbigna2V5dXAnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAxMyA9PT0gdC53aGljaCAmJiBuICYmIG4uY2FsbChvKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAxMyA9PT0gdC53aGljaCAmJiB0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBuICYmIG4uY2FsbChvLCB0KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhvLmRvbS5idXR0b25zKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gY3QodCkgewogICAgICAgIHZhciBpID0gdGhpcywKICAgICAgICAgICAgZSA9IHRoaXMucy5maWVsZHM7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgJ3N0cmluZycgPT0gdHlwZW9mIHQKICAgICAgICAgICAgICAgID8gKGkuZmllbGQodCkuZGVzdHJveSgpLAogICAgICAgICAgICAgICAgICBkZWxldGUgZVt0XSwKICAgICAgICAgICAgICAgICAgKGUgPSB3LmluQXJyYXkodCwgdGhpcy5zLm9yZGVyKSksCiAgICAgICAgICAgICAgICAgIHRoaXMucy5vcmRlci5zcGxpY2UoZSwgMSksCiAgICAgICAgICAgICAgICAgIC0xICE9PSAoZSA9IHcuaW5BcnJheSh0LCB0aGlzLnMuaW5jbHVkZUZpZWxkcykpICYmIHRoaXMucy5pbmNsdWRlRmllbGRzLnNwbGljZShlLCAxKSkKICAgICAgICAgICAgICAgIDogdy5lYWNoKHRoaXMuX2ZpZWxkTmFtZXModCksIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpLmNsZWFyKGUpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBwdCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2UoITEpLCB0aGlzOwogICAgfQogICAgZnVuY3Rpb24gZnQodCwgZSwgaSwgbikgewogICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgbyA9IHRoaXMsCiAgICAgICAgICAgIHIgPSB0aGlzLnMuZmllbGRzLAogICAgICAgICAgICBhID0gMTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICF0aGlzLl90aWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG8uY3JlYXRlKHQsIGUsIGksIG4pOwogICAgICAgICAgICB9KQogICAgICAgICkgewogICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgdCAmJiAoKGEgPSB0KSwgKHQgPSBlKSwgKGUgPSBpKSksICh0aGlzLnMuZWRpdEZpZWxkcyA9IHt9KTsKICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBhOyBsKyspIHRoaXMucy5lZGl0RmllbGRzW2xdID0geyBmaWVsZHM6IHRoaXMucy5maWVsZHMgfTsKICAgICAgICAgICAgdmFyIGQgPSB0aGlzLl9jcnVkQXJncyh0LCBlLCBpLCBuKTsKICAgICAgICAgICAgKHRoaXMucy5tb2RlID0gJ21haW4nKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuYWN0aW9uID0gJ2NyZWF0ZScpLAogICAgICAgICAgICAgICAgKHRoaXMucy5tb2RpZmllciA9IG51bGwpLAogICAgICAgICAgICAgICAgKHRoaXMuZG9tLmZvcm0uc3R5bGUuZGlzcGxheSA9ICdibG9jaycpLAogICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2xhc3MoKSwKICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlSZW9yZGVyKHRoaXMuZmllbGRzKCkpLAogICAgICAgICAgICAgICAgdy5lYWNoKHIsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmRlZigpOwogICAgICAgICAgICAgICAgICAgIGUubXVsdGlSZXNldCgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgYTsgbisrKSBlLm11bHRpU2V0KG4sIGkpOwogICAgICAgICAgICAgICAgICAgIGUuc2V0KGkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudCgnaW5pdENyZWF0ZScsIG51bGwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzLl9hc3NlbWJsZU1haW4oKSwgcy5fZm9ybU9wdGlvbnMoZC5vcHRzKSwgZC5tYXliZU9wZW4oKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGZ1bmN0aW9uIGh0KHQpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0KSkgZm9yICh2YXIgZSA9IDAsIGkgPSB0Lmxlbmd0aDsgZSA8IGk7IGUrKykgdGhpcy51bmRlcGVuZGVudCh0W2VdKTsKICAgICAgICBlbHNlIHcodGhpcy5maWVsZCh0KS5ub2RlKCkpLm9mZignLmVkZXAnKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGZ1bmN0aW9uIG10KHQsIG4sIGUpIHsKICAgICAgICB2YXIgcyA9IHRoaXM7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIGZvciAodmFyIGkgPSAwLCBvID0gdC5sZW5ndGg7IGkgPCBvOyBpKyspIHRoaXMuZGVwZW5kZW50KHRbaV0sIG4sIGUpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgciA9IHRoaXMsCiAgICAgICAgICAgICAgICBhID0gdGhpcy5maWVsZCh0KSwKICAgICAgICAgICAgICAgIGwgPSB7IGRhdGFUeXBlOiAnanNvbicsIHR5cGU6ICdQT1NUJyB9LAogICAgICAgICAgICAgICAgZCA9IHcuZXh0ZW5kKHt9LCB7IGRhdGE6IG51bGwsIGV2ZW50OiAnY2hhbmdlJywgcG9zdFVwZGF0ZTogbnVsbCwgcHJlVXBkYXRlOiBudWxsIH0sIGUpLAogICAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgZC5wcmVVcGRhdGUgJiYgZC5wcmVVcGRhdGUobiksCiAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZXJyb3JzOiAnZXJyb3InLCBsYWJlbHM6ICdsYWJlbCcsIG1lc3NhZ2VzOiAnbWVzc2FnZScsIG9wdGlvbnM6ICd1cGRhdGUnLCB2YWx1ZXM6ICd2YWwnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bdF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5lYWNoKG5bdF0sIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZpZWxkKHQpW2ldKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaChbJ2hpZGUnLCAnc2hvdycsICdlbmFibGUnLCAnZGlzYWJsZSddLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbltlXSAmJiByW2VdKG5bZV0sIG4uYW5pbWF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBkLnBvc3RVcGRhdGUgJiYgZC5wb3N0VXBkYXRlKG4pLAogICAgICAgICAgICAgICAgICAgICAgICBhLnByb2Nlc3NpbmcoITEpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgdyhhLm5vZGUoKSkub24oZC5ldmVudCArICcuZWRlcCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwgaTsKICAgICAgICAgICAgICAgIDAgIT09IHcoYS5ub2RlKCkpLmZpbmQodC50YXJnZXQpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgIChhLnByb2Nlc3NpbmcoITApLAogICAgICAgICAgICAgICAgICAgICgoZSA9IHt9KS5yb3dzID0gcy5zLmVkaXRGaWVsZHMgPyBmKHMucy5lZGl0RmllbGRzLCAnZGF0YScpIDogbnVsbCksCiAgICAgICAgICAgICAgICAgICAgKGUucm93ID0gZS5yb3dzID8gZS5yb3dzWzBdIDogbnVsbCksCiAgICAgICAgICAgICAgICAgICAgKGUudmFsdWVzID0gcy52YWwoKSksCiAgICAgICAgICAgICAgICAgICAgZC5kYXRhICYmIChpID0gZC5kYXRhKGUpKSAmJiAoZSA9IGkpLAogICAgICAgICAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIG4KICAgICAgICAgICAgICAgICAgICAgICAgPyAoaSA9IG4uY2FsbChzLCBhLnZhbCgpLCBlLCB1LCB0KSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAoJ29iamVjdCcgPT0gdHlwZW9mIGkgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgaS50aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgdSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHUoaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKHcuaXNQbGFpbk9iamVjdChuKSA/IHcuZXh0ZW5kKGwsIG4pIDogKGwudXJsID0gbiksIHcuYWpheCh3LmV4dGVuZChsLCB7IGRhdGE6IGUsIHN1Y2Nlc3M6IHUgfSkpKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGZ1bmN0aW9uIHZ0KCkgewogICAgICAgIHRoaXMucy5kaXNwbGF5ZWQgJiYgdGhpcy5jbG9zZSgpLCB0aGlzLmNsZWFyKCksIHRoaXMucy50ZW1wbGF0ZSAmJiB3KCdib2R5JykuYXBwZW5kKHRoaXMucy50ZW1wbGF0ZSk7CiAgICAgICAgdmFyIHQgPSB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXI7CiAgICAgICAgdC5kZXN0cm95ICYmIHQuZGVzdHJveSh0aGlzKSwKICAgICAgICAgICAgdyh5KS5vZmYoJy5kdGUnICsgdGhpcy5zLnVuaXF1ZSksCiAgICAgICAgICAgIHcoeSkudHJpZ2dlcignZGVzdHJveUVkaXRvcicsIFt0aGlzXSksCiAgICAgICAgICAgICh0aGlzLmRvbSA9IG51bGwpLAogICAgICAgICAgICAodGhpcy5zID0gbnVsbCk7CiAgICB9CiAgICBmdW5jdGlvbiBidCh0KSB7CiAgICAgICAgdmFyIGkgPSB0aGlzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHcuZWFjaCh0aGlzLl9maWVsZE5hbWVzKHQpLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgaS5maWVsZChlKS5kaXNhYmxlKCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIF90KHQpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gdGhpcy5zLmRpc3BsYXllZCA6IHRoaXNbdCA/ICdvcGVuJyA6ICdjbG9zZSddKCk7CiAgICB9CiAgICBmdW5jdGlvbiB5dCgpIHsKICAgICAgICByZXR1cm4gdy5tYXAodGhpcy5zLmZpZWxkcywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIHQuZGlzcGxheWVkKCkgPyBlIDogbnVsbDsKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGd0KCkgewogICAgICAgIHJldHVybiB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXIubm9kZSh0aGlzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHd0KHQsIGUsIGksIG4sIHMpIHsKICAgICAgICB2YXIgbywKICAgICAgICAgICAgciA9IHRoaXMsCiAgICAgICAgICAgIGEgPSB0aGlzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHRoaXMuX3RpZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgYS5lZGl0KHQsIGUsIGksIG4sIHMpOwogICAgICAgICAgICB9KSB8fAogICAgICAgICAgICAgICAgKChvID0gdGhpcy5fY3J1ZEFyZ3MoZSwgaSwgbiwgcykpLAogICAgICAgICAgICAgICAgdGhpcy5fZWRpdCh0LCB0aGlzLl9kYXRhU291cmNlKCdmaWVsZHMnLCB0KSwgJ21haW4nLCBvLm9wdHMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByLl9hc3NlbWJsZU1haW4oKSwgci5fZm9ybU9wdGlvbnMoby5vcHRzKSwgby5tYXliZU9wZW4oKTsKICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBFdCh0KSB7CiAgICAgICAgdmFyIGkgPSB0aGlzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHcuZWFjaCh0aGlzLl9maWVsZE5hbWVzKHQpLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgaS5maWVsZChlKS5lbmFibGUoKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gVHQodCwgZSkgewogICAgICAgIHZhciBpID0gdyh0aGlzLmRvbS53cmFwcGVyKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgID8gKHRoaXMuX21lc3NhZ2UodGhpcy5kb20uZm9ybUVycm9yLCB0LCAhMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgaS50b2dnbGVDbGFzcygnaW5Gb3JtRXJyb3InLCB2b2lkIDAgIT09IHQgJiYgJycgIT09IHQpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdCAmJiAhdyh0aGlzLmRvbS5mb3JtRXJyb3IpLmlzKCc6dmlzaWJsZScpICYmIGFsZXJ0KHQucmVwbGFjZSgvPGJyPi9nLCAnXG4nKSksCiAgICAgICAgICAgICAgICAgICh0aGlzLnMuZ2xvYmFsRXJyb3IgPSB0KSkKICAgICAgICAgICAgICAgIDogdGhpcy5maWVsZCh0KS5lcnJvcihlKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBEdCh0KSB7CiAgICAgICAgdmFyIGUgPSB0aGlzLnMuZmllbGRzOwogICAgICAgIGlmIChlW3RdKSByZXR1cm4gZVt0XTsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZmllbGQgbmFtZSAtICcgKyB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIHh0KCkgewogICAgICAgIHJldHVybiB3Lm1hcCh0aGlzLnMuZmllbGRzLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIEN0KHQsIGUpIHsKICAgICAgICB2YXIgaSA9IHRoaXMuZmlsZXModCk7CiAgICAgICAgaWYgKGlbZV0pIHJldHVybiBpW2VdOwogICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBmaWxlIGlkICcgKyBlICsgJyBpbiB0YWJsZSAnICsgdCk7CiAgICB9CiAgICBmdW5jdGlvbiBrdCh0KSB7CiAgICAgICAgaWYgKCF0KSByZXR1cm4gUC5maWxlczsKICAgICAgICB2YXIgZSA9IFAuZmlsZXNbdF07CiAgICAgICAgaWYgKGUpIHJldHVybiBlOwogICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBmaWxlIHRhYmxlIG5hbWU6ICcgKyB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIEZ0KHQpIHsKICAgICAgICB2YXIgaSwKICAgICAgICAgICAgbiA9IHRoaXM7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHQgPSB0IHx8IHRoaXMuZmllbGRzKCkpLAogICAgICAgICAgICBBcnJheS5pc0FycmF5KHQpCiAgICAgICAgICAgICAgICA/ICgoaSA9IHt9KSwKICAgICAgICAgICAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpW2VdID0gbi5maWVsZChlKS5nZXQoKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGkpCiAgICAgICAgICAgICAgICA6IHRoaXMuZmllbGQodCkuZ2V0KCkKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gT3QodCwgaSkgewogICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmVhY2godGhpcy5fZmllbGROYW1lcyh0KSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIG4uZmllbGQoZSkuaGlkZShpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gQXQoaSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9ICExKSwKICAgICAgICAgICAgdy5tYXAodGhpcy5zLmVkaXRGaWVsZHMsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITAgPT09IGkgPyAnIycgKyBlIDogZTsKICAgICAgICAgICAgfSkKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gU3QodCkgewogICAgICAgIGlmICh0aGlzLnMuZ2xvYmFsRXJyb3IpIHJldHVybiAhMDsKICAgICAgICBmb3IgKHZhciBlID0gdGhpcy5fZmllbGROYW1lcyh0KSwgaSA9IDAsIG4gPSBlLmxlbmd0aDsgaSA8IG47IGkrKykgaWYgKHRoaXMuZmllbGQoZVtpXSkuaW5FcnJvcigpKSByZXR1cm4gITA7CiAgICAgICAgcmV0dXJuICExOwogICAgfQogICAgZnVuY3Rpb24gSXQodCwgZSwgaSkgewogICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgcyA9IHRoaXMsCiAgICAgICAgICAgIG8gPQogICAgICAgICAgICAgICAgKHcuaXNQbGFpbk9iamVjdChlKSAmJiAoKGkgPSBlKSwgKGUgPSB2b2lkIDApKSwKICAgICAgICAgICAgICAgIChpID0gdy5leHRlbmQoe30sIHRoaXMucy5mb3JtT3B0aW9ucy5pbmxpbmUsIGkpKSwKICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2UoJ2luZGl2aWR1YWwnLCB0LCBlKSksCiAgICAgICAgICAgIHIgPSBPYmplY3Qua2V5cyhvKTsKICAgICAgICBpZiAoMSA8IHIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBlZGl0IG1vcmUgdGhhbiBvbmUgcm93IGlubGluZSBhdCBhIHRpbWUnKTsKICAgICAgICBmb3IgKHZhciBhID0gW10sIGwgPSAwLCBkID0gb1tyWzBdXS5hdHRhY2g7IGwgPCBkLmxlbmd0aDsgbCsrKSB7CiAgICAgICAgICAgIHZhciB1ID0gZFtsXTsKICAgICAgICAgICAgYS5wdXNoKHUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3KCdkaXYuRFRFX0ZpZWxkJywgYSkubGVuZ3RoIHx8CiAgICAgICAgICAgICAgICB0aGlzLl90aWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzLmlubGluZSh0LCBlLCBpKTsKICAgICAgICAgICAgICAgIH0pIHx8CiAgICAgICAgICAgICAgICB0aGlzLl9lZGl0KHQsIG8sICdpbmxpbmUnLCBpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbi5faW5saW5lKG8sIGkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24ganQodCwgZSkgewogICAgICAgIHZhciBpID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmlzUGxhaW5PYmplY3QodCkgJiYgKChlID0gdCksICh0ID0gbnVsbCkpLAogICAgICAgICAgICB0aGlzLl90aWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGkuaW5saW5lQ3JlYXRlKHQsIGUpOwogICAgICAgICAgICB9KSB8fAogICAgICAgICAgICAgICAgKHcuZWFjaCh0aGlzLnMuZmllbGRzLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGUubXVsdGlSZXNldCgpLCBlLm11bHRpU2V0KDAsIGUuZGVmKCkpLCBlLnNldChlLmRlZigpKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKHRoaXMucy5tb2RlID0gJ21haW4nKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuYWN0aW9uID0gJ2NyZWF0ZScpLAogICAgICAgICAgICAgICAgKHRoaXMucy5tb2RpZmllciA9IG51bGwpLAogICAgICAgICAgICAgICAgKHRoaXMucy5lZGl0RmllbGRzID0gdGhpcy5fZGF0YVNvdXJjZSgnZmFrZVJvdycsIHQpKSwKICAgICAgICAgICAgICAgIChlID0gdy5leHRlbmQoe30sIHRoaXMucy5mb3JtT3B0aW9ucy5pbmxpbmUsIGUpKSwKICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNsYXNzKCksCiAgICAgICAgICAgICAgICB0aGlzLl9pbmxpbmUodGhpcy5zLmVkaXRGaWVsZHMsIGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpLl9kYXRhU291cmNlKCdmYWtlUm93RW5kJyk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdpbml0Q3JlYXRlJywgbnVsbCkpLAogICAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIFB0KHQsIGUpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlID8gdGhpcy5fbWVzc2FnZSh0aGlzLmRvbS5mb3JtSW5mbywgdCkgOiB0aGlzLmZpZWxkKHQpLm1lc3NhZ2UoZSksIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBOdCh0KSB7CiAgICAgICAgaWYgKCF0KSByZXR1cm4gdGhpcy5zLmFjdGlvbjsKICAgICAgICBpZiAoIXRoaXMucy5hY3Rpb24pIHRocm93IG5ldyBFcnJvcignTm90IGN1cnJlbnRseSBpbiBhbiBlZGl0aW5nIG1vZGUnKTsKICAgICAgICBpZiAoJ2NyZWF0ZScgPT09IHRoaXMucy5hY3Rpb24gJiYgJ2NyZWF0ZScgIT09IHQpIHRocm93IG5ldyBFcnJvcignQ2hhbmdpbmcgZnJvbSBjcmVhdGUgbW9kZSBpcyBub3Qgc3VwcG9ydGVkJyk7CiAgICAgICAgcmV0dXJuICh0aGlzLnMuYWN0aW9uID0gdCksIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBSdCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5zLm1vZGlmaWVyOwogICAgfQogICAgZnVuY3Rpb24gQnQodCkgewogICAgICAgIHZhciBpLAogICAgICAgICAgICBuID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSB0aGlzLmZpZWxkcygpKSwKICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0KQogICAgICAgICAgICAgICAgPyAoKGkgPSB7fSksCiAgICAgICAgICAgICAgICAgIHcuZWFjaCh0LCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgaVtlXSA9IG4uZmllbGQoZSkubXVsdGlHZXQoKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGkpCiAgICAgICAgICAgICAgICA6IHRoaXMuZmllbGQodCkubXVsdGlHZXQoKQogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBMdCh0LCBlKSB7CiAgICAgICAgdmFyIGkgPSB0aGlzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHcuaXNQbGFpbk9iamVjdCh0KSAmJiB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgID8gdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpLmZpZWxkKHQpLm11bHRpU2V0KGUpOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiB0aGlzLmZpZWxkKHQpLm11bHRpU2V0KGUpLAogICAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIE10KHQpIHsKICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHQgPSB0IHx8IHRoaXMub3JkZXIoKSksCiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkKICAgICAgICAgICAgICAgID8gdy5tYXAodCwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZpZWxkKHQpLm5vZGUoKTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogdGhpcy5maWVsZCh0KS5ub2RlKCkKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gVXQodCwgZSkgewogICAgICAgIHJldHVybiB3KHRoaXMpLm9mZih0aGlzLl9ldmVudE5hbWUodCksIGUpLCB0aGlzOwogICAgfQogICAgZnVuY3Rpb24gVnQodCwgZSkgewogICAgICAgIHJldHVybiB3KHRoaXMpLm9uKHRoaXMuX2V2ZW50TmFtZSh0KSwgZSksIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBIdCh0LCBlKSB7CiAgICAgICAgcmV0dXJuIHcodGhpcykub25lKHRoaXMuX2V2ZW50TmFtZSh0KSwgZSksIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBxdCgpIHsKICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdGhpcy5fZGlzcGxheVJlb3JkZXIoKSwKICAgICAgICAgICAgdGhpcy5fY2xvc2VSZWcoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZS5fbmVzdGVkQ2xvc2UoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGUuX2NsZWFyRHluYW1pY0luZm8oKSwgZS5fZXZlbnQoJ2Nsb3NlZCcsIFsnbWFpbiddKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdGhpcy5fcHJlb3BlbignbWFpbicpICYmCiAgICAgICAgICAgICAgICAodGhpcy5fbmVzdGVkT3BlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZS5fZm9jdXMoCiAgICAgICAgICAgICAgICAgICAgICAgIHcubWFwKGUucy5vcmRlciwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnMuZmllbGRzW3RdOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5zLmVkaXRPcHRzLmZvY3VzLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIGUuX2V2ZW50KCdvcGVuZWQnLCBbJ21haW4nLCBlLnMuYWN0aW9uXSk7CiAgICAgICAgICAgICAgICB9LCB0aGlzLnMuZWRpdE9wdHMubmVzdCksCiAgICAgICAgICAgICAgICB0aGlzLl9wb3N0b3BlbignbWFpbicsICExKSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gV3QodCkgewogICAgICAgIGlmICghdCkgcmV0dXJuIHRoaXMucy5vcmRlcjsKICAgICAgICBpZiAoCiAgICAgICAgICAgIChhcmd1bWVudHMubGVuZ3RoICYmICFBcnJheS5pc0FycmF5KHQpICYmICh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSksCiAgICAgICAgICAgIHRoaXMucy5vcmRlci5zbGljZSgpLnNvcnQoKS5qb2luKCctJykgIT09IHQuc2xpY2UoKS5zb3J0KCkuam9pbignLScpKQogICAgICAgICkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgZmllbGRzLCBhbmQgbm8gYWRkaXRpb25hbCBmaWVsZHMsIG11c3QgYmUgcHJvdmlkZWQgZm9yIG9yZGVyaW5nLicpOwogICAgICAgIHJldHVybiB3LmV4dGVuZCh0aGlzLnMub3JkZXIsIHQpLCB0aGlzLl9kaXNwbGF5UmVvcmRlcigpLCB0aGlzOwogICAgfQogICAgZnVuY3Rpb24genQodCwgZSwgaSwgbiwgcykgewogICAgICAgIHZhciBvLAogICAgICAgICAgICByLAogICAgICAgICAgICBhID0gdGhpcywKICAgICAgICAgICAgbCA9IHRoaXM7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdGhpcy5fdGlkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsLnJlbW92ZSh0LCBlLCBpLCBuLCBzKTsKICAgICAgICAgICAgfSkgfHwKICAgICAgICAgICAgICAgICh2b2lkIDAgPT09ICh0ID0gdCB8fCB0aGlzLnMudGFibGUgPyB0IDogJ2tleWxlc3MnKS5sZW5ndGggJiYgKHQgPSBbdF0pLAogICAgICAgICAgICAgICAgKG8gPSB0aGlzLl9jcnVkQXJncyhlLCBpLCBuLCBzKSksCiAgICAgICAgICAgICAgICAociA9IHRoaXMuX2RhdGFTb3VyY2UoJ2ZpZWxkcycsIHQpKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuYWN0aW9uID0gJ3JlbW92ZScpLAogICAgICAgICAgICAgICAgKHRoaXMucy5tb2RpZmllciA9IHQpLAogICAgICAgICAgICAgICAgKHRoaXMucy5lZGl0RmllbGRzID0gciksCiAgICAgICAgICAgICAgICAodGhpcy5kb20uZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKSwKICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNsYXNzKCksCiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudCgnaW5pdFJlbW92ZScsIFtmKHIsICdub2RlJyksIGYociwgJ2RhdGEnKSwgdF0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBhLl9ldmVudCgnaW5pdE11bHRpUmVtb3ZlJywgW3IsIHRdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuX2Fzc2VtYmxlTWFpbigpLCBhLl9mb3JtT3B0aW9ucyhvLm9wdHMpLCBvLm1heWJlT3BlbigpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGEucy5lZGl0T3B0czsKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdC5mb2N1cyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5kb20gJiYgdygnYnV0dG9uJywgYS5kb20uYnV0dG9ucykuZXEodC5mb2N1cykuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gR3QodCwgZSkgewogICAgICAgIHZhciBpLAogICAgICAgICAgICBuID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmlzUGxhaW5PYmplY3QodCkgfHwgKCgoaSA9IHt9KVt0XSA9IGUpLCAodCA9IGkpKSwKICAgICAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICBuLmZpZWxkKHQpLnNldChlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gSnQodCwgaSkgewogICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmVhY2godGhpcy5fZmllbGROYW1lcyh0KSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIG4uZmllbGQoZSkuc2hvdyhpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gWHQoZSwgaSwgbiwgcykgewogICAgICAgIHZhciBvLAogICAgICAgICAgICB0LAogICAgICAgICAgICByID0gdGhpcywKICAgICAgICAgICAgYSA9IHRoaXMucy5maWVsZHMsCiAgICAgICAgICAgIGwgPSBbXSwKICAgICAgICAgICAgZCA9IDAsCiAgICAgICAgICAgIHUgPSAhMTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAhdGhpcy5zLnByb2Nlc3NpbmcgJiYKICAgICAgICAgICAgICAgIHRoaXMucy5hY3Rpb24gJiYKICAgICAgICAgICAgICAgICh0aGlzLl9wcm9jZXNzaW5nKCEwKSwKICAgICAgICAgICAgICAgIChvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoICE9PSBkIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIHUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgci5fZXZlbnQoJ2luaXRTdWJtaXQnLCBbci5zLmFjdGlvbl0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMSA9PT0gdCA/IHIuX3Byb2Nlc3NpbmcoITEpIDogKCh1ID0gITApLCByLl9zdWJtaXQoZSwgaSwgbiwgcykpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKHQgPSB5LmFjdGl2ZUVsZW1lbnQpLAogICAgICAgICAgICAgICAgMCAhPT0gdyh0KS5jbG9zZXN0KCdkaXYuRFRFX0ZpZWxkJykubGVuZ3RoICYmIHQuYmx1cigpLAogICAgICAgICAgICAgICAgdGhpcy5lcnJvcigpLAogICAgICAgICAgICAgICAgdy5lYWNoKGEsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5pbkVycm9yKCkgJiYgbC5wdXNoKHQpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB3LmVhY2gobCwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBhW2VdLmVycm9yKCcnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQrKywgbygpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBvKCkpLAogICAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uICR0KHQpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gdGhpcy5zLnRhYmxlIDogKCh0aGlzLnMudGFibGUgPSB0KSwgdGhpcyk7CiAgICB9CiAgICBmdW5jdGlvbiBRdCh0KSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IHRoaXMucy50ZW1wbGF0ZSA6ICgodGhpcy5zLnRlbXBsYXRlID0gbnVsbCA9PT0gdCA/IG51bGwgOiB3KHQpKSwgdGhpcyk7CiAgICB9CiAgICBmdW5jdGlvbiBadCh0KSB7CiAgICAgICAgdmFyIGUgPSB3KHRoaXMuZG9tLmhlYWRlcikuY2hpbGRyZW4oJ2Rpdi4nICsgdGhpcy5jbGFzc2VzLmhlYWRlci5jb250ZW50KSwKICAgICAgICAgICAgaSA9IHRoaXMuY2xhc3Nlcy5oZWFkZXIudGl0bGU7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIGUuZGF0YSgndGl0bGUnKTsKICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiB0ICYmICh0ID0gdCh0aGlzLCBuZXcgaXQuQXBpKHRoaXMucy50YWJsZSkpKTsKICAgICAgICBpID0gaS50YWcKICAgICAgICAgICAgPyB3KCc8JyArIGkudGFnICsgJz48LycgKyBpLnRhZykKICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGkuY2xhc3MpCiAgICAgICAgICAgICAgICAgIC5odG1sKHQpCiAgICAgICAgICAgIDogdDsKICAgICAgICByZXR1cm4gZS5odG1sKGkpLmRhdGEoJ3RpdGxlJywgdCksIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBLdCh0LCBlKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSB8fCB3LmlzUGxhaW5PYmplY3QodCkgPyB0aGlzLnNldCh0LCBlKSA6IHRoaXMuZ2V0KHQpOwogICAgfQogICAgZnVuY3Rpb24gWXQodCwgZSwgaSkgewogICAgICAgIGUgPSBlID8gdCArICcgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSByZWZlciB0byBodHRwczovL2RhdGF0YWJsZXMubmV0L3RuLycgKyBlIDogdDsKICAgICAgICBpZiAoKGkgPSB2b2lkIDAgPT09IGkgPyAhMCA6IGkpKSB0aHJvdyBlOwogICAgICAgIGNvbnNvbGUud2FybihlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRlKHQsIGUsIGkpIHsKICAgICAgICB2YXIgbiwgcywgbzsKICAgICAgICBpZiAoKChlID0gdy5leHRlbmQoeyBsYWJlbDogJ2xhYmVsJywgdmFsdWU6ICd2YWx1ZScgfSwgZSkpLCBBcnJheS5pc0FycmF5KHQpKSkKICAgICAgICAgICAgZm9yIChuID0gMCwgcyA9IHQubGVuZ3RoOyBuIDwgczsgbisrKQogICAgICAgICAgICAgICAgKG8gPSB0W25dKSwgdy5pc1BsYWluT2JqZWN0KG8pID8gaSh2b2lkIDAgPT09IG9bZS52YWx1ZV0gPyBvW2UubGFiZWxdIDogb1tlLnZhbHVlXSwgb1tlLmxhYmVsXSwgbiwgby5hdHRyKSA6IGkobywgbywgbik7CiAgICAgICAgZWxzZQogICAgICAgICAgICAobiA9IDApLAogICAgICAgICAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgaShlLCB0LCBuKSwgbisrOwogICAgICAgICAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBlZShvLCByLCBhLCBsLCBkKSB7CiAgICAgICAgdmFyIHUgPSBuZXcgRmlsZVJlYWRlcigpLAogICAgICAgICAgICBjID0gMCwKICAgICAgICAgICAgcCA9IFtdLAogICAgICAgICAgICBmID0gci5lcnJvcnMgJiYgci5lcnJvcnMuXyA/IHIuZXJyb3JzLl8gOiAnQSBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQgd2hpbGUgdXBsb2FkaW5nIHRoZSBmaWxlJzsKICAgICAgICBvLmVycm9yKHIubmFtZSwgJycpLAogICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiByLmFqYXgKICAgICAgICAgICAgICAgID8gci5hamF4KGEsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBkLmNhbGwobywgdCk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6IChsKHIsIHIuZmlsZVJlYWRUZXh0IHx8ICc8aT5VcGxvYWRpbmcgZmlsZTwvaT4nKSwKICAgICAgICAgICAgICAgICAgKHUub25sb2FkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5hcHBlbmQoJ2FjdGlvbicsICd1cGxvYWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBpLmFwcGVuZCgndXBsb2FkRmllbGQnLCByLm5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGkuYXBwZW5kKCd1cGxvYWQnLCBhW2NdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICByLmFqYXhEYXRhICYmIHIuYWpheERhdGEoaSwgYVtjXSwgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgci5hamF4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGUgPSByLmFqYXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdy5pc1BsYWluT2JqZWN0KG8ucy5hamF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlID0gby5zLmFqYXgudXBsb2FkIHx8IG8ucy5hamF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdzdHJpbmcnID09IHR5cGVvZiBvLnMuYWpheCAmJiAoZSA9IG8ucy5hamF4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAhZSkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEFqYXggb3B0aW9uIHNwZWNpZmllZCBmb3IgdXBsb2FkIHBsdWctaW4nKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiAoZSA9ICdzdHJpbmcnID09IHR5cGVvZiBlID8geyB1cmw6IGUgfSA6IGUpLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5kYXRhKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaCgobiA9IHZvaWQgMCAhPT0gcyAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgcyA/IHMgOiBuKSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hcHBlbmQodCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHcuaXNQbGFpbk9iamVjdChlLmRhdGEpKQogICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXBsb2FkIGZlYXR1cmUgY2Fubm90IHVzZSBgYWpheC5kYXRhYCB3aXRoIGFuIG9iamVjdC4gUGxlYXNlIHVzZSBpdCBhcyBhIGZ1bmN0aW9uIGluc3RlYWQuJyk7CiAgICAgICAgICAgICAgICAgICAgICBvLl9ldmVudCgncHJlVXBsb2FkJywgW3IubmFtZSwgYVtjXSwgaV0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjIDwgYS5sZW5ndGggLSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChjKyssIHUucmVhZEFzRGF0YVVSTChhW2NdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZC5jYWxsKG8sIHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChzID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ub24oJ3ByZVN1Ym1pdC5EVEVfVXBsb2FkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShzID0gITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuYWpheCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5leHRlbmQoe30sIGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSByLmVycm9yczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLm9mZigncHJlU3VibWl0LkRURV9VcGxvYWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5lcnJvcihyLm5hbWUsIGUgJiYgZVt0LnN0YXR1c10gPyBlW3Quc3RhdHVzXSA6IGYpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLl9ldmVudCgndXBsb2FkWGhyRXJyb3InLCBbci5uYW1lLCB0XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLm9mZigncHJlU3VibWl0LkRURV9VcGxvYWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fZXZlbnQoJ3VwbG9hZFhoclN1Y2Nlc3MnLCBbci5uYW1lLCB0XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZmllbGRFcnJvcnMgJiYgdC5maWVsZEVycm9ycy5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0LmZpZWxkRXJyb3JzLCBpID0gMCwgbiA9IGUubGVuZ3RoOyBpIDwgbjsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5lcnJvcihlW2ldLm5hbWUsIGVbaV0uc3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5jYWxsKG8sIHAsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lcnJvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoby5lcnJvcih0LmVycm9yKSwgZC5jYWxsKG8sIHAsICEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdC51cGxvYWQgJiYgdC51cGxvYWQuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHQuZmlsZXMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaCh0LmZpbGVzLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuZmlsZXNbdF0gfHwgKFAuZmlsZXNbdF0gPSB7fSksIHcuZXh0ZW5kKFAuZmlsZXNbdF0sIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaCh0LnVwbG9hZC5pZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPCBhLmxlbmd0aCAtIDEgPyAoYysrLCB1LnJlYWRBc0RhdGFVUkwoYVtjXSkpIDogKGQuY2FsbChvLCBwKSwgcyAmJiBvLnN1Ym1pdCgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG8uZXJyb3Ioci5uYW1lLCBmKSwgZC5jYWxsKG8sIHAsICEwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbChyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9zdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHcuYWpheFNldHRpbmdzLnhocigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudXBsb2FkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHQudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubGVuZ3RoQ29tcHV0YWJsZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHQgPSAoKHQubG9hZGVkIC8gdC50b3RhbCkgKiAxMDApLnRvRml4ZWQoMCkgKyAnJScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsKHIsIDEgPT09IGEubGVuZ3RoID8gdCA6IGMgKyAnOicgKyBhLmxlbmd0aCArICcgJyArIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQudXBsb2FkLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsKHIsIHIucHJvY2Vzc2luZ1RleHQgfHwgJ1Byb2Nlc3NpbmcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgKGEgPSB3Lm1hcChhLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSByLl9saW1pdExlZnQgJiYgYS5zcGxpY2Uoci5fbGltaXRMZWZ0LCBhLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgIHUucmVhZEFzRGF0YVVSTChhWzBdKSk7CiAgICB9CiAgICBmdW5jdGlvbiBpZSh0LCBlKSB7CiAgICAgICAgdmFyIGkgPSAhMTsKICAgICAgICByZXR1cm4gdCAmJiB0LmRvY3VtZW50ICYmICh5ID0gKHAgPSB0KS5kb2N1bWVudCksIGUgJiYgZS5mbiAmJiBlLmZuLmpxdWVyeSAmJiAoKHcgPSBlKSwgKGkgPSAhMCkpLCBpOwogICAgfQogICAgdmFyIG5lID0gdy5mbi5kYXRhVGFibGUsCiAgICAgICAgc2UgPSAwOwogICAgZnVuY3Rpb24gb2UoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLmNsYXNzZXMuYWN0aW9ucywKICAgICAgICAgICAgZSA9IHRoaXMucy5hY3Rpb24sCiAgICAgICAgICAgIGkgPSB3KHRoaXMuZG9tLndyYXBwZXIpOwogICAgICAgIGkucmVtb3ZlQ2xhc3MoW3QuY3JlYXRlLCB0LmVkaXQsIHQucmVtb3ZlXS5qb2luKCcgJykpLAogICAgICAgICAgICAnY3JlYXRlJyA9PT0gZSA/IGkuYWRkQ2xhc3ModC5jcmVhdGUpIDogJ2VkaXQnID09PSBlID8gaS5hZGRDbGFzcyh0LmVkaXQpIDogJ3JlbW92ZScgPT09IGUgJiYgaS5hZGRDbGFzcyh0LnJlbW92ZSk7CiAgICB9CiAgICBmdW5jdGlvbiByZShpLCBuLCBzLCB0KSB7CiAgICAgICAgdmFyIG8sCiAgICAgICAgICAgIGUsCiAgICAgICAgICAgIHIgPSB0aGlzLnMuYWN0aW9uLAogICAgICAgICAgICBhID0gewogICAgICAgICAgICAgICAgY29tcGxldGU6IFsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgyMDQgPT09IHQuc3RhdHVzIHx8ICdudWxsJyA9PT0gdC5yZXNwb25zZVRleHQpIGkgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdC5yZXNwb25zZUpTT04gfHwgSlNPTi5wYXJzZSh0LnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7fQogICAgICAgICAgICAgICAgICAgICAgICB3LmlzUGxhaW5PYmplY3QoaSkgfHwgQXJyYXkuaXNBcnJheShpKSA/IG4oaSwgNDAwIDw9IHQuc3RhdHVzLCB0KSA6IHModCwgZSwgbyk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBkYXRhOiBudWxsLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgIGVycm9yOiBbCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBbXSwKICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbCA9IHRoaXMucy5hamF4LAogICAgICAgICAgICBkID0gJ2VkaXQnID09PSByIHx8ICdyZW1vdmUnID09PSByID8gZih0aGlzLnMuZWRpdEZpZWxkcywgJ2lkU3JjJykuam9pbignLCcpIDogbnVsbDsKICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiAobCA9IHcuaXNQbGFpbk9iamVjdChsKSAmJiBsW3JdID8gbFtyXSA6IGwpCiAgICAgICAgICAgID8gbC5jYWxsKHRoaXMsIG51bGwsIG51bGwsIGksIG4sIHMpCiAgICAgICAgICAgIDogKCdzdHJpbmcnID09IHR5cGVvZiBsCiAgICAgICAgICAgICAgICAgID8gLTEgIT09IGwuaW5kZXhPZignICcpCiAgICAgICAgICAgICAgICAgICAgICA/ICgoZSA9IGwuc3BsaXQoJyAnKSksIChhLnR5cGUgPSBlWzBdKSwgKGEudXJsID0gZVsxXSkpCiAgICAgICAgICAgICAgICAgICAgICA6IChhLnVybCA9IGwpCiAgICAgICAgICAgICAgICAgIDogKChlID0gdy5leHRlbmQoe30sIGwgfHwge30pKS5jb21wbGV0ZSAmJiAoYS5jb21wbGV0ZS51bnNoaWZ0KGUuY29tcGxldGUpLCBkZWxldGUgZS5jb21wbGV0ZSksCiAgICAgICAgICAgICAgICAgICAgZS5lcnJvciAmJiAoYS5lcnJvci51bnNoaWZ0KGUuZXJyb3IpLCBkZWxldGUgZS5lcnJvciksCiAgICAgICAgICAgICAgICAgICAgKGEgPSB3LmV4dGVuZCh7fSwgYSwgZSkpKSwKICAgICAgICAgICAgICBhLnJlcGxhY2VtZW50cyAmJgogICAgICAgICAgICAgICAgICB3LmVhY2goYS5yZXBsYWNlbWVudHMsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBhLnVybCA9IGEudXJsLnJlcGxhY2UoJ3snICsgdCArICd9JywgZS5jYWxsKHRoaXMsIHQsIGQsIHIsIGkpKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKGEudXJsID0gYS51cmwucmVwbGFjZSgvX2lkXy8sIGQpLnJlcGxhY2UoL3tpZH0vLCBkKSksCiAgICAgICAgICAgICAgYS5kYXRhICYmICgoZSA9IChsID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgYS5kYXRhKSA/IGEuZGF0YShpKSA6IGEuZGF0YSksIChpID0gbCAmJiBlID8gZSA6IHcuZXh0ZW5kKCEwLCBpLCBlKSkpLAogICAgICAgICAgICAgIChhLmRhdGEgPSBpKSwKICAgICAgICAgICAgICAnREVMRVRFJyAhPT0gYS50eXBlIHx8CiAgICAgICAgICAgICAgICAgICh2b2lkIDAgIT09IGEuZGVsZXRlQm9keSAmJiAhMCAhPT0gYS5kZWxldGVCb2R5KSB8fAogICAgICAgICAgICAgICAgICAoKGwgPSB3LnBhcmFtKGEuZGF0YSkpLCAoYS51cmwgKz0gLTEgPT09IGEudXJsLmluZGV4T2YoJz8nKSA/ICc/JyArIGwgOiAnJicgKyBsKSwgZGVsZXRlIGEuZGF0YSksCiAgICAgICAgICAgICAgdy5hamF4KGEpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGFlKHQsIGUsIGksIG4pIHsKICAgICAgICB3LmZuLmFuaW1hdGUKICAgICAgICAgICAgPyB0LnN0b3AoKS5hbmltYXRlKGUsIGksIG4pCiAgICAgICAgICAgIDogKHQuY3NzKGUpLCAoZSA9IHQubGVuZ3RoICYmIDEgPCB0Lmxlbmd0aCA/IHRbMF0gOiB0KSwgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgaSA/IGkuY2FsbChlKSA6IG4gJiYgbi5jYWxsKGUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGxlKCkgewogICAgICAgIHZhciB0ID0gdGhpcy5kb207CiAgICAgICAgdyh0LndyYXBwZXIpLnByZXBlbmQodC5oZWFkZXIpLAogICAgICAgICAgICB3KHQuZm9vdGVyKS5hcHBlbmQodC5mb3JtRXJyb3IpLmFwcGVuZCh0LmJ1dHRvbnMpLAogICAgICAgICAgICB3KHQuYm9keUNvbnRlbnQpLmFwcGVuZCh0LmZvcm1JbmZvKS5hcHBlbmQodC5mb3JtKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRlKCkgewogICAgICAgIHZhciB0ID0gdGhpcy5zLmVkaXRPcHRzLm9uQmx1cjsKICAgICAgICAhMSAhPT0gdGhpcy5fZXZlbnQoJ3ByZUJsdXInKSAmJgogICAgICAgICAgICAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA/IHQodGhpcykgOiAnc3VibWl0JyA9PT0gdCA/IHRoaXMuc3VibWl0KCkgOiAnY2xvc2UnID09PSB0ICYmIHRoaXMuX2Nsb3NlKCkpOwogICAgfQogICAgZnVuY3Rpb24gdWUoaSkgewogICAgICAgIHZhciB0LCBlOwogICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9ICExKSwKICAgICAgICAgICAgdGhpcy5zICYmCiAgICAgICAgICAgICAgICAoKHQgPSB0aGlzLmNsYXNzZXMuZmllbGQuZXJyb3IpLAogICAgICAgICAgICAgICAgKGUgPSB0aGlzLnMuZmllbGRzKSwKICAgICAgICAgICAgICAgIHcoJ2Rpdi4nICsgdCwgdGhpcy5kb20ud3JhcHBlcikucmVtb3ZlQ2xhc3ModCksCiAgICAgICAgICAgICAgICB3LmVhY2goZSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLmVycm9yKCcnKSwgaSB8fCBlLm1lc3NhZ2UoJycpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yKCcnKSwKICAgICAgICAgICAgICAgIGkgfHwgdGhpcy5tZXNzYWdlKCcnKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuc2V0Rm9jdXMgPSBudWxsKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuYnViYmxlQm90dG9tID0gITEpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNlKHQsIGUpIHsKICAgICAgICB2YXIgaTsKICAgICAgICAhMSAhPT0gdGhpcy5fZXZlbnQoJ3ByZUNsb3NlJykgJiYKICAgICAgICAgICAgKHRoaXMucy5jbG9zZUNiICYmICgoaSA9IHRoaXMucy5jbG9zZUNiKHQsIGUpKSwgKHRoaXMucy5jbG9zZUNiID0gbnVsbCkpLAogICAgICAgICAgICB0aGlzLnMuY2xvc2VJY2IgJiYgKHRoaXMucy5jbG9zZUljYigpLCAodGhpcy5zLmNsb3NlSWNiID0gbnVsbCkpLAogICAgICAgICAgICB3KCdib2R5Jykub2ZmKCdmb2N1cy5lZGl0b3ItZm9jdXMnKSwKICAgICAgICAgICAgKHRoaXMucy5kaXNwbGF5ZWQgPSAhMSksCiAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdjbG9zZScpLAogICAgICAgICAgICBpKSAmJgogICAgICAgICAgICB0aGlzLl9ldmVudCgnY2xvc2VkJywgW2ldKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBlKHQpIHsKICAgICAgICB0aGlzLnMuY2xvc2VDYiA9IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBmZSh0LCBlLCBpLCBuKSB7CiAgICAgICAgdmFyIHMsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIGEgPSB0aGlzLAogICAgICAgICAgICB0ID0gdy5pc1BsYWluT2JqZWN0KHQpID8gdCA6ICdib29sZWFuJyA9PSB0eXBlb2YgdCA/ICgociA9IHQpLCBlKSA6ICgocyA9IHQpLCAobyA9IGUpLCAociA9IGkpLCBuKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB2b2lkIDAgPT09IHIgJiYgKHIgPSAhMCksCiAgICAgICAgICAgIHMgJiYgYS50aXRsZShzKSwKICAgICAgICAgICAgbyAmJiBhLmJ1dHRvbnMobyksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1heWJlT3BlbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHIgJiYgYS5vcGVuKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3B0czogdy5leHRlbmQoe30sIHRoaXMucy5mb3JtT3B0aW9ucy5tYWluLCB0KSwKICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBoZSh0KSB7CiAgICAgICAgZm9yICh2YXIgZSA9IFtdLCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgZVtpIC0gMV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgdCA9ICh0aGlzLnMudGFibGUgPyBQLmRhdGFTb3VyY2VzLmRhdGFUYWJsZSA6IFAuZGF0YVNvdXJjZXMuaHRtbClbdF07CiAgICAgICAgaWYgKHQpIHJldHVybiB0LmFwcGx5KHRoaXMsIGUpOwogICAgfQogICAgZnVuY3Rpb24gbWUoaSkgewogICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgcyA9IHcodGhpcy5kb20uZm9ybUNvbnRlbnQpLAogICAgICAgICAgICBvID0gdGhpcy5zLmZpZWxkcywKICAgICAgICAgICAgdCA9IHRoaXMucy5vcmRlciwKICAgICAgICAgICAgciA9IHRoaXMucy50ZW1wbGF0ZSwKICAgICAgICAgICAgYSA9IHRoaXMucy5tb2RlIHx8ICdtYWluJzsKICAgICAgICBpID8gKHRoaXMucy5pbmNsdWRlRmllbGRzID0gaSkgOiAoaSA9IHRoaXMucy5pbmNsdWRlRmllbGRzKSwKICAgICAgICAgICAgcy5jaGlsZHJlbigpLmRldGFjaCgpLAogICAgICAgICAgICB3LmVhY2godCwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIC0xICE9PSBuLl93ZWFrSW5BcnJheShlLCBpKSAmJgogICAgICAgICAgICAgICAgICAgIChyICYmICdtYWluJyA9PT0gYQogICAgICAgICAgICAgICAgICAgICAgICA/IChyLmZpbmQoJ2VkaXRvci1maWVsZFtuYW1lPSInICsgZSArICciXScpLmFmdGVyKG9bZV0ubm9kZSgpKSwgci5maW5kKCdbZGF0YS1lZGl0b3ItdGVtcGxhdGU9IicgKyBlICsgJyJdJykpCiAgICAgICAgICAgICAgICAgICAgICAgIDogcwogICAgICAgICAgICAgICAgICAgICkuYXBwZW5kKG9bZV0ubm9kZSgpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIgJiYgJ21haW4nID09PSBhICYmIHIuYXBwZW5kVG8ocyksCiAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdkaXNwbGF5T3JkZXInLCBbdGhpcy5zLmRpc3BsYXllZCwgdGhpcy5zLmFjdGlvbiwgc10pOwogICAgfQogICAgZnVuY3Rpb24gdmUodCwgZSwgaSwgciwgbikgewogICAgICAgIGZvciAoCiAgICAgICAgICAgIHZhciBhLAogICAgICAgICAgICAgICAgcyA9IHRoaXMsCiAgICAgICAgICAgICAgICBvID0gdGhpcy5zLmZpZWxkcywKICAgICAgICAgICAgICAgIGwgPSBbXSwKICAgICAgICAgICAgICAgIGQgPSB7fSwKICAgICAgICAgICAgICAgIHUgPQogICAgICAgICAgICAgICAgICAgICgodGhpcy5zLmVkaXRGaWVsZHMgPSBlKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmVkaXREYXRhID0gZCksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5tb2RpZmllciA9IHQpLAogICAgICAgICAgICAgICAgICAgICh0aGlzLnMuYWN0aW9uID0gJ2VkaXQnKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20uZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJyksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5tb2RlID0gaSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2xhc3MoKSwKICAgICAgICAgICAgICAgICAgICB3LmVhY2gobywgZnVuY3Rpb24gKHMsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgby5tdWx0aVJlc2V0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkW3NdID0ge30pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5lYWNoKGUsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5maWVsZHNbc10gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpID0gby52YWxGcm9tRGF0YShlLmRhdGEpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBvLm51bGxEZWZhdWx0KCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZFtzXVt0XSA9IG51bGwgPT09IGkgPyAnJyA6IEFycmF5LmlzQXJyYXkoaSkgPyBpLnNsaWNlKCkgOiBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiAncm93JyAhPT0gci5zY29wZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZS5kaXNwbGF5RmllbGRzICYmICFlLmRpc3BsYXlGaWVsZHNbc10pIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLm11bHRpU2V0KHQsIHZvaWQgMCA9PT0gaSB8fCAobiAmJiBudWxsID09PSBpKSA/IG8uZGVmKCkgOiBpLCAhMSksIChhID0gITApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoby5tdWx0aVNldCh0LCB2b2lkIDAgPT09IGkgfHwgKG4gJiYgbnVsbCA9PT0gaSkgPyBvLmRlZigpIDogaSwgITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kaXNwbGF5RmllbGRzICYmICFlLmRpc3BsYXlGaWVsZHNbc10pIHx8IChhID0gITApKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uX211bHRpVmFsdWVDaGVjaygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCAhPT0gby5tdWx0aUlkcygpLmxlbmd0aCAmJiBhICYmIGwucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVyKCkuc2xpY2UoKSksCiAgICAgICAgICAgICAgICBjID0gdS5sZW5ndGggLSAxOwogICAgICAgICAgICAwIDw9IGM7CiAgICAgICAgICAgIGMtLQogICAgICAgICkKICAgICAgICAgICAgLTEgPT09IHcuaW5BcnJheSh1W2NdLnRvU3RyaW5nKCksIGwpICYmIHUuc3BsaWNlKGMsIDEpOwogICAgICAgIHRoaXMuX2Rpc3BsYXlSZW9yZGVyKHUpLAogICAgICAgICAgICB0aGlzLl9ldmVudCgnaW5pdEVkaXQnLCBbZihlLCAnbm9kZScpWzBdLCBmKGUsICdkYXRhJylbMF0sIHQsIGldLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzLl9ldmVudCgnaW5pdE11bHRpRWRpdCcsIFtlLCB0LCBpXSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG4oKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGJlKHQsIGUsIGkpIHsKICAgICAgICB2YXIgbjsKICAgICAgICBpZiAoKHZvaWQgMCA9PT0gZSAmJiAoZSA9IFtdKSwgdm9pZCAwID09PSBpICYmIChpID0gdm9pZCAwKSwgIUFycmF5LmlzQXJyYXkodCkpKQogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKG4gPSB3LkV2ZW50KHQpKSwKICAgICAgICAgICAgICAgIHcodGhpcykudHJpZ2dlckhhbmRsZXIobiwgZSksCiAgICAgICAgICAgICAgICAobiA9IG4ucmVzdWx0KSwKICAgICAgICAgICAgICAgIDAgPT09IHQuaW5kZXhPZigncHJlJykgJiYgITEgPT09IG4gJiYgdyh0aGlzKS50cmlnZ2VySGFuZGxlcih3LkV2ZW50KHQgKyAnQ2FuY2VsbGVkJyksIGUpLAogICAgICAgICAgICAgICAgaSAmJiAobiAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgbiAmJiBuLnRoZW4gPyBuLnRoZW4oaSkgOiBpKG4pKSwKICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICBmb3IgKHZhciBzID0gMCwgbyA9IHQubGVuZ3RoOyBzIDwgbzsgcysrKSB0aGlzLl9ldmVudCh0W3NdLCBlKTsKICAgIH0KICAgIGZ1bmN0aW9uIF9lKHQpIHsKICAgICAgICBmb3IgKHZhciBlID0gdC5zcGxpdCgnICcpLCBpID0gMCwgbiA9IGUubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzLAogICAgICAgICAgICAgICAgbyA9IChzID0gZVtpXSkubWF0Y2goL15vbihbQS1aXSkvKTsKICAgICAgICAgICAgbyAmJiAocyA9IG9bMV0udG9Mb3dlckNhc2UoKSArIHMuc3Vic3RyaW5nKDMpKSwgKGVbaV0gPSBzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGUuam9pbignICcpOwogICAgfQogICAgZnVuY3Rpb24geWUoaSkgewogICAgICAgIHZhciBuID0gbnVsbDsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3LmVhY2godGhpcy5zLmZpZWxkcywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHcoZS5ub2RlKCkpLmZpbmQoaSkubGVuZ3RoICYmIChuID0gZSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBuCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIGdlKHQpIHsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gdGhpcy5maWVsZHMoKSA6IEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdOwogICAgfQogICAgZnVuY3Rpb24gd2UodCwgZSkgewogICAgICAgIHZhciBpLAogICAgICAgICAgICBuID0gdGhpczsKICAgICAgICAncmVtb3ZlJyAhPT0gdGhpcy5zLmFjdGlvbiAmJgogICAgICAgICAgICAoKHQgPSB3Lm1hcCh0LCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiB0ID8gbi5zLmZpZWxkc1t0XSA6IHQ7CiAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIGUKICAgICAgICAgICAgICAgID8gKGkgPSB0W2VdKQogICAgICAgICAgICAgICAgOiBlCiAgICAgICAgICAgICAgICA/IChpID0gMCA9PT0gZS5pbmRleE9mKCdqcTonKSA/IHcoJ2Rpdi5EVEUgJyArIGUucmVwbGFjZSgvXmpxOi8sICcnKSkgOiB0aGlzLnMuZmllbGRzW2VdKQogICAgICAgICAgICAgICAgOiB5LmFjdGl2ZUVsZW1lbnQuYmx1cigpLAogICAgICAgICAgICAodGhpcy5zLnNldEZvY3VzID0gaSkpICYmCiAgICAgICAgICAgIGkuZm9jdXMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIEVlKG4pIHsKICAgICAgICB2YXIgcyA9IHRoaXMsCiAgICAgICAgICAgIG8gPSB0aGlzLAogICAgICAgICAgICB0ID0gc2UrKywKICAgICAgICAgICAgZSA9ICcuZHRlSW5saW5lJyArIHQ7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHRoaXMucy5lZGl0T3B0cyA9IG4pLAogICAgICAgICAgICAodGhpcy5zLmVkaXRDb3VudCA9IHQpLAogICAgICAgICAgICAoJ3N0cmluZycgIT0gdHlwZW9mIG4udGl0bGUgJiYgJ2Z1bmN0aW9uJyAhPSB0eXBlb2Ygbi50aXRsZSkgfHwgKHRoaXMudGl0bGUobi50aXRsZSksIChuLnRpdGxlID0gITApKSwKICAgICAgICAgICAgKCdzdHJpbmcnICE9IHR5cGVvZiBuLm1lc3NhZ2UgJiYgJ2Z1bmN0aW9uJyAhPSB0eXBlb2Ygbi5tZXNzYWdlKSB8fCAodGhpcy5tZXNzYWdlKG4ubWVzc2FnZSksIChuLm1lc3NhZ2UgPSAhMCkpLAogICAgICAgICAgICAnYm9vbGVhbicgIT0gdHlwZW9mIG4uYnV0dG9ucyAmJiAodGhpcy5idXR0b25zKG4uYnV0dG9ucyksIChuLmJ1dHRvbnMgPSAhMCkpLAogICAgICAgICAgICB3KHkpLm9uKCdrZXlkb3duJyArIGUsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwgaTsKICAgICAgICAgICAgICAgIDEzID09PSB0LndoaWNoICYmCiAgICAgICAgICAgICAgICAgICAgcy5zLmRpc3BsYXllZCAmJgogICAgICAgICAgICAgICAgICAgIChlID0gdyh5LmFjdGl2ZUVsZW1lbnQpKSAmJgogICAgICAgICAgICAgICAgICAgIChpID0gcy5fZmllbGRGcm9tTm9kZShlKSkgJiYKICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBpLmNhblJldHVyblN1Ym1pdCAmJgogICAgICAgICAgICAgICAgICAgIGkuY2FuUmV0dXJuU3VibWl0KGUpICYmCiAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdyh5KS5vbigna2V5dXAnICsgZSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgIGkgPSB3KHkuYWN0aXZlRWxlbWVudCk7CiAgICAgICAgICAgICAgICAxMyA9PT0gdC53aGljaCAmJiBzLnMuZGlzcGxheWVkCiAgICAgICAgICAgICAgICAgICAgPyAoZSA9IHMuX2ZpZWxkRnJvbU5vZGUoaSkpICYmCiAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBlLmNhblJldHVyblN1Ym1pdCAmJgogICAgICAgICAgICAgICAgICAgICAgZS5jYW5SZXR1cm5TdWJtaXQoaSkgJiYKICAgICAgICAgICAgICAgICAgICAgICgnc3VibWl0JyA9PT0gbi5vblJldHVybgogICAgICAgICAgICAgICAgICAgICAgICAgID8gKHQucHJldmVudERlZmF1bHQoKSwgcy5zdWJtaXQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdmdW5jdGlvbicgPT0gdHlwZW9mIG4ub25SZXR1cm4gJiYgKHQucHJldmVudERlZmF1bHQoKSwgbi5vblJldHVybihzLCB0KSkpCiAgICAgICAgICAgICAgICAgICAgOiAyNyA9PT0gdC53aGljaAogICAgICAgICAgICAgICAgICAgID8gKHQucHJldmVudERlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIG4ub25Fc2MKICAgICAgICAgICAgICAgICAgICAgICAgICA/IG4ub25Fc2MobywgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdibHVyJyA9PT0gbi5vbkVzYwogICAgICAgICAgICAgICAgICAgICAgICAgID8gby5ibHVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdjbG9zZScgPT09IG4ub25Fc2MKICAgICAgICAgICAgICAgICAgICAgICAgICA/IG8uY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogJ3N1Ym1pdCcgPT09IG4ub25Fc2MgJiYgby5zdWJtaXQoKSkKICAgICAgICAgICAgICAgICAgICA6IGkucGFyZW50cygnLkRURV9Gb3JtX0J1dHRvbnMnKS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICgzNyA9PT0gdC53aGljaCA/IGkucHJldignYnV0dG9uJykudHJpZ2dlcignZm9jdXMnKSA6IDM5ID09PSB0LndoaWNoICYmIGkubmV4dCgnYnV0dG9uJykudHJpZ2dlcignZm9jdXMnKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAodGhpcy5zLmNsb3NlSWNiID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdyh5KS5vZmYoJ2tleWRvd24nICsgZSksIHcoeSkub2ZmKCdrZXl1cCcgKyBlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gVGUodCwgZSwgaSkgewogICAgICAgIGZvciAoCiAgICAgICAgICAgIHZhciBuLCBhID0gdGhpcywgcyA9ICh2b2lkIDAgPT09IGkgJiYgKGkgPSBudWxsKSwgITEpLCBvID0gdGhpcy5jbGFzc2VzLmlubGluZSwgciA9IHRbT2JqZWN0LmtleXModClbMF1dLCBsID0gW10sIGQgPSAwOwogICAgICAgICAgICBkIDwgci5hdHRhY2gubGVuZ3RoOwogICAgICAgICAgICBkKysKICAgICAgICApIHsKICAgICAgICAgICAgdmFyIHUgPSByLmF0dGFjaEZpZWxkc1tkXVswXTsKICAgICAgICAgICAgbC5wdXNoKHsgZmllbGQ6IHRoaXMucy5maWVsZHNbdV0sIG5hbWU6IHUsIG5vZGU6IHcoci5hdHRhY2hbZF0pIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgYyA9IHRoaXMuX2Zvcm1PcHRpb25zKGUpOwogICAgICAgIGlmICghdGhpcy5fcHJlb3BlbignaW5saW5lJykpIHJldHVybiB0aGlzOwogICAgICAgIGZvciAodmFyIHAgPSAwLCBmID0gbDsgcCA8IGYubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgdmFyIGggPSBmW3BdLAogICAgICAgICAgICAgICAgbSA9IGgubm9kZSwKICAgICAgICAgICAgICAgIHYgPQogICAgICAgICAgICAgICAgICAgICgoaC5jaGlsZHJlbiA9IG0uY29udGVudHMoKS5kZXRhY2goKSksCiAgICAgICAgICAgICAgICAgICAgLTEgIT09IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRWRnZS8nKSA/ICdzdHlsZT0id2lkdGg6JyArIG0ud2lkdGgoKSArICdweCInIDogJycpLAogICAgICAgICAgICAgICAgdiA9CiAgICAgICAgICAgICAgICAgICAgKG0uYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICB3KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ud3JhcHBlciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+PGRpdiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5saW5lciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJz48ZGl2IGNsYXNzPSJEVEVfUHJvY2Vzc2luZ19JbmRpY2F0b3IiPjxzcGFuPjwvc3Bhbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmJ1dHRvbnMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPjwvZGl2PjwvZGl2PicsCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBtCiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdkaXYuJyArIG8ubGluZXIucmVwbGFjZSgvIC9nLCAnLicpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGguZmllbGQubm9kZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRoaXMuZG9tLmZvcm1FcnJvciksCiAgICAgICAgICAgICAgICAgICAgdyhoLmZpZWxkLm5vZGUoKSkuY2xvc2VzdCgndHInKSk7CiAgICAgICAgICAgIHYubGVuZ3RoICYmIChuID0gdiksIGUuYnV0dG9ucyAmJiBtLmZpbmQoJ2Rpdi4nICsgby5idXR0b25zLnJlcGxhY2UoLyAvZywgJy4nKSkuYXBwZW5kKHRoaXMuZG9tLmJ1dHRvbnMpOwogICAgICAgIH0KICAgICAgICB2YXIgYiA9IHRoaXMuX2lucHV0VHJpZ2dlcignc3VibWl0JywgZSwgbiksCiAgICAgICAgICAgIF8gPSB0aGlzLl9pbnB1dFRyaWdnZXIoJ2NhbmNlbCcsIGUsIG4pOwogICAgICAgIHRoaXMuX2Nsb3NlUmVnKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAocyA9ICEwKSwKICAgICAgICAgICAgICAgIHcoeSkub2ZmKCdjbGljaycgKyBjKSwKICAgICAgICAgICAgICAgICh0ICYmICdlZGl0JyA9PT0gZSkgfHwKICAgICAgICAgICAgICAgICAgICBsLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdC5ub2RlLmNvbnRlbnRzKCkuZGV0YWNoKCksIHQubm9kZS5hcHBlbmQodC5jaGlsZHJlbik7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBiKCksCiAgICAgICAgICAgICAgICBfKCksCiAgICAgICAgICAgICAgICBhLl9jbGVhckR5bmFtaWNJbmZvKCksCiAgICAgICAgICAgICAgICBpICYmIGkoKSwKICAgICAgICAgICAgICAgICdpbmxpbmUnCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIG8sIHI7CiAgICAgICAgICAgICAgICBzIHx8CiAgICAgICAgICAgICAgICAgICAgKChvID0gdy5mbi5hZGRCYWNrID8gJ2FkZEJhY2snIDogJ2FuZFNlbGYnKSwKICAgICAgICAgICAgICAgICAgICB3KHkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2Vkb3duJyArIGMsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdC50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbigna2V5ZG93bicgKyBjLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJyArIGMsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gITEsIGkgPSAwLCBuID0gbDsgaSA8IG4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5baV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFzLmZpZWxkLl90eXBlRm4oJ293bnMnLCByKSAmJiAtMSA9PT0gdy5pbkFycmF5KHMubm9kZVswXSwgdyhyKS5wYXJlbnRzKClbb10oKSkpIHx8IChlID0gITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCBhLmJsdXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9LCAwKSwKICAgICAgICAgICAgdGhpcy5fZm9jdXMoCiAgICAgICAgICAgICAgICB3Lm1hcChsLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZpZWxkOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBlLmZvY3VzLAogICAgICAgICAgICApLAogICAgICAgICAgICB0aGlzLl9wb3N0b3BlbignaW5saW5lJywgITApOwogICAgfQogICAgZnVuY3Rpb24gRGUoZSwgdCwgaSkgewogICAgICAgIHZhciBuLAogICAgICAgICAgICBzID0gdGhpcywKICAgICAgICAgICAgbyA9IHRbZSArICdUcmlnZ2VyJ10sCiAgICAgICAgICAgIHQgPSB0W2UgKyAnSHRtbCddLAogICAgICAgICAgICByID0gJ2NsaWNrLmR0ZS0nICsgZSwKICAgICAgICAgICAgaSA9IHcoaSkuY2xvc2VzdCgndHInKTsKICAgICAgICBpZiAodm9pZCAwID09PSBvKSByZXR1cm4gZnVuY3Rpb24gKCkge307CiAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIG8gJiYgKChuID0gaS5jaGlsZHJlbigpKSwgKG8gPSBvIDwgMCA/IG5bbi5sZW5ndGggKyBvXSA6IG5bb10pKTsKICAgICAgICB2YXIgYSA9IHcobywgaSkubGVuZ3RoID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodyhvLCBpKVswXS5jaGlsZE5vZGVzKSA6IFtdLAogICAgICAgICAgICBsID0KICAgICAgICAgICAgICAgICh3KGEpLmRldGFjaCgpLAogICAgICAgICAgICAgICAgdyhvLCBpKQogICAgICAgICAgICAgICAgICAgIC5vbihyLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCAnY2FuY2VsJyA9PT0gZSA/IHMuY2xvc2UoKSA6IHMuc3VibWl0KCk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHQpKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsLm9mZihyKS5lbXB0eSgpLmFwcGVuZChhKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24geGUobikgewogICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICBuICYmCiAgICAgICAgICAgIG4ub3B0aW9ucyAmJgogICAgICAgICAgICB3LmVhY2godGhpcy5zLmZpZWxkcywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgdm9pZCAwID09PSBuLm9wdGlvbnNbdF0gfHwgKChpID0gcy5maWVsZCh0KSkuZHQgJiYgaS5kdCgpLmFqYXgudXJsKCkpIHx8IChpICYmIGkudXBkYXRlICYmIGkudXBkYXRlKG4ub3B0aW9uc1t0XSkpOwogICAgICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIENlKHQsIGUsIGksIG4pIHsKICAgICAgICB2YXIgcyA9ICEhdy5mbi5hbmltYXRlOwogICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9ICExKSwKICAgICAgICAgICAgKG4gPSBuIHx8IGZ1bmN0aW9uICgpIHt9KSwKICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZSAmJiAoZSA9IGUodGhpcywgbmV3IG5lLkFwaSh0aGlzLnMudGFibGUpKSksCiAgICAgICAgICAgICh0ID0gdyh0KSksCiAgICAgICAgICAgIHMgJiYgdC5zdG9wKCksCiAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgID8gKG4oKSwgdGhpcy5zLmRpc3BsYXllZCAmJiBzID8gdC5odG1sKGUpLmZhZGVJbigpIDogdC5odG1sKGUpLmNzcygnZGlzcGxheScsICdibG9jaycpLCBpICYmIHQuYXR0cigndGl0bGUnLCBlKSkKICAgICAgICAgICAgICAgIDogKHRoaXMucy5kaXNwbGF5ZWQgJiYgcwogICAgICAgICAgICAgICAgICAgICAgPyB0LmZhZGVPdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5odG1sKCcnKSwgbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgOiAodC5odG1sKCcnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpLCBuKCkpLAogICAgICAgICAgICAgICAgICBpICYmIHQucmVtb3ZlQXR0cigndGl0bGUnKSk7CiAgICB9CiAgICBmdW5jdGlvbiBrZSgpIHsKICAgICAgICB2YXIgdCwKICAgICAgICAgICAgZSA9IHRoaXMucy5maWVsZHMsCiAgICAgICAgICAgIGkgPSB0aGlzLnMuaW5jbHVkZUZpZWxkcywKICAgICAgICAgICAgbiA9ICEwOwogICAgICAgIGlmIChpKQogICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgbyA9IGkubGVuZ3RoOyBzIDwgbzsgcysrKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGVbaVtzXV0sCiAgICAgICAgICAgICAgICAgICAgYSA9IHIubXVsdGlFZGl0YWJsZSgpOwogICAgICAgICAgICAgICAgci5pc011bHRpVmFsdWUoKSAmJiBhICYmIG4gPyAobiA9ICEodCA9ICEwKSkgOiAodCA9ICEoIXIuaXNNdWx0aVZhbHVlKCkgfHwgYSkpLCBlW2lbc11dLm11bHRpSW5mb1Nob3duKHQpOwogICAgICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBGZSh0KSB7CiAgICAgICAgdmFyIGUsCiAgICAgICAgICAgIGkgPSB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXIuX3Nob3c7CiAgICAgICAgaSAmJiBpLmxlbmd0aAogICAgICAgICAgICA/IDEgPCBpLmxlbmd0aAogICAgICAgICAgICAgICAgPyAoaS5wb3AoKSwgKGUgPSBpW2kubGVuZ3RoIC0gMV0pLCB0ICYmIHQoKSwgdGhpcy5zLmRpc3BsYXlDb250cm9sbGVyLm9wZW4oZS5kdGUsIGUuYXBwZW5kLCBlLmNhbGxiYWNrKSkKICAgICAgICAgICAgICAgIDogKHRoaXMucy5kaXNwbGF5Q29udHJvbGxlci5jbG9zZSh0aGlzLCB0KSwgKGkubGVuZ3RoID0gMCkpCiAgICAgICAgICAgIDogdCAmJiB0KCk7CiAgICB9CiAgICBmdW5jdGlvbiBPZSh0LCBlKSB7CiAgICAgICAgdmFyIGkgPSB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXI7CiAgICAgICAgaS5fc2hvdyB8fCAoaS5fc2hvdyA9IFtdKSwKICAgICAgICAgICAgZSB8fCAoaS5fc2hvdy5sZW5ndGggPSAwKSwKICAgICAgICAgICAgaS5fc2hvdy5wdXNoKHsgYXBwZW5kOiB0aGlzLmRvbS53cmFwcGVyLCBjYWxsYmFjazogdCwgZHRlOiB0aGlzIH0pLAogICAgICAgICAgICB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXIub3Blbih0aGlzLCB0aGlzLmRvbS53cmFwcGVyLCB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIEFlKHQsIGUpIHsKICAgICAgICB2YXIgaSA9IHRoaXMsCiAgICAgICAgICAgIG4gPSB0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXIuY2FwdHVyZUZvY3VzOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9ICEwKSwKICAgICAgICAgICAgdyh0aGlzLmRvbS5mb3JtKQogICAgICAgICAgICAgICAgLm9mZignc3VibWl0LmVkaXRvci1pbnRlcm5hbCcpCiAgICAgICAgICAgICAgICAub24oJ3N1Ym1pdC5lZGl0b3ItaW50ZXJuYWwnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAhbiB8fAogICAgICAgICAgICAgICAgKCdtYWluJyAhPT0gdCAmJiAnYnViYmxlJyAhPT0gdCkgfHwKICAgICAgICAgICAgICAgIHcoJ2JvZHknKS5vbignZm9jdXMuZWRpdG9yLWZvY3VzJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIDAgPT09IHcoeS5hY3RpdmVFbGVtZW50KS5wYXJlbnRzKCcuRFRFJykubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IHcoeS5hY3RpdmVFbGVtZW50KS5wYXJlbnRzKCcuRFRFRCcpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICBpLnMuc2V0Rm9jdXMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgaS5zLnNldEZvY3VzLmZvY3VzKCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgdGhpcy5fbXVsdGlJbmZvKCksCiAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdvcGVuJywgW3QsIHRoaXMucy5hY3Rpb25dKSwKICAgICAgICAgICAgZSAmJiB0aGlzLl9ldmVudCgnb3BlbmVkJywgW3QsIHRoaXMucy5hY3Rpb25dKSwKICAgICAgICAgICAgITAKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gU2UodCkgewogICAgICAgIHJldHVybiAhMSA9PT0gdGhpcy5fZXZlbnQoJ3ByZU9wZW4nLCBbdCwgdGhpcy5zLmFjdGlvbl0pCiAgICAgICAgICAgID8gKHRoaXMuX2NsZWFyRHluYW1pY0luZm8oKSwKICAgICAgICAgICAgICB0aGlzLl9ldmVudCgnY2FuY2VsT3BlbicsIFt0LCB0aGlzLnMuYWN0aW9uXSksCiAgICAgICAgICAgICAgKCdpbmxpbmUnICE9PSB0aGlzLnMubW9kZSAmJiAnYnViYmxlJyAhPT0gdGhpcy5zLm1vZGUpIHx8ICF0aGlzLnMuY2xvc2VJY2IgfHwgdGhpcy5zLmNsb3NlSWNiKCksCiAgICAgICAgICAgICAgKHRoaXMucy5jbG9zZUljYiA9IG51bGwpLAogICAgICAgICAgICAgICExKQogICAgICAgICAgICA6ICh0aGlzLl9jbGVhckR5bmFtaWNJbmZvKCEwKSwgKHRoaXMucy5kaXNwbGF5ZWQgPSB0KSwgITApOwogICAgfQogICAgZnVuY3Rpb24gSWUodCkgewogICAgICAgIHZhciBlID0gdGhpcy5jbGFzc2VzLnByb2Nlc3NpbmcuYWN0aXZlOwogICAgICAgIHcoWydkaXYuRFRFJywgdGhpcy5kb20ud3JhcHBlcl0pLnRvZ2dsZUNsYXNzKGUsIHQpLCAodGhpcy5zLnByb2Nlc3NpbmcgPSB0KSwgdGhpcy5fZXZlbnQoJ3Byb2Nlc3NpbmcnLCBbdF0pOwogICAgfQogICAgZnVuY3Rpb24gamUodCkgewogICAgICAgIHZhciBpID0gITE7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdy5lYWNoKHRoaXMucy5maWVsZHMsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICBlLnByb2Nlc3NpbmcoKSAmJiAoaSA9ICEwKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGkgJiYKICAgICAgICAgICAgICAgIHRoaXMub25lKCdwcm9jZXNzaW5nLWZpZWxkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICEwID09PSB0aGlzLl9ub1Byb2Nlc3NpbmcodCkgJiYgdGhpcy5fc3VibWl0LmFwcGx5KHRoaXMsIHQpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICFpCiAgICAgICAgKTsKICAgIH0KICAgIGZ1bmN0aW9uIFBlKG4sIHMsIHQsIG8pIHsKICAgICAgICB2YXIgciwKICAgICAgICAgICAgYSA9IHRoaXMsCiAgICAgICAgICAgIGQgPSAhMSwKICAgICAgICAgICAgZSA9IHt9LAogICAgICAgICAgICBpID0ge30sCiAgICAgICAgICAgIHUgPSBfLAogICAgICAgICAgICBjID0gdGhpcy5zLmZpZWxkcywKICAgICAgICAgICAgbCA9IHRoaXMucy5lZGl0Q291bnQsCiAgICAgICAgICAgIHAgPSB0aGlzLnMuZWRpdEZpZWxkcywKICAgICAgICAgICAgZiA9IHRoaXMucy5lZGl0RGF0YSwKICAgICAgICAgICAgaCA9IHRoaXMucy5lZGl0T3B0cywKICAgICAgICAgICAgbSA9IGguc3VibWl0OwogICAgICAgIGlmICghMSA9PT0gdGhpcy5fbm9Qcm9jZXNzaW5nKGFyZ3VtZW50cykpIFAuZXJyb3IoJ0ZpZWxkIGlzIHN0aWxsIHByb2Nlc3NpbmcnLCAxNiwgITEpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgdiA9IHRoaXMucy5hY3Rpb24sCiAgICAgICAgICAgICAgICBiID0geyBkYXRhOiB7fSB9OwogICAgICAgICAgICBpZiAoJ2NyZWF0ZScgPT09IChiW3RoaXMucy5hY3Rpb25OYW1lXSA9IHYpIHx8ICdlZGl0JyA9PT0gdikKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAody5lYWNoKHAsIGZ1bmN0aW9uIChvLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0ge30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHcuZWFjaChjLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksIG4sIHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZpZWxkc1t0XSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3VibWl0dGFibGUoKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgocyA9IGUubXVsdGlHZXQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSB1KHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHNbb10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKG4gPSBlLnZhbEZyb21EYXRhKHIuZGF0YSkpLCBpKGEsIG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgobiA9IHNbb10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShuKSAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiAtMSAhPT0gdC5pbmRleE9mKCdbXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHUodC5yZXBsYWNlKC9cWy4qJC8sICcnKSArICctbWFueS1jb3VudCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoYSwgbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyAmJiBzKGEsIG4ubGVuZ3RoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZWRpdCcgIT09IHYgfHwgKGZbdF0gJiYgZS5jb21wYXJlKG4sIGZbdF1bb10pKSB8fCAoaShsLCBuKSwgKGQgPSAhMCksIHMgJiYgcyhsLCBuLmxlbmd0aCkpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5pc0VtcHR5T2JqZWN0KGEpIHx8IChlW29dID0gYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmlzRW1wdHlPYmplY3QobCkgfHwgKGlbb10gPSBsKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAnY3JlYXRlJyA9PT0gdiB8fCAnYWxsJyA9PT0gbSB8fCAoJ2FsbElmQ2hhbmdlZCcgPT09IG0gJiYgZCkpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYi5kYXRhID0gZTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICgnY2hhbmdlZCcgIT09IG0gfHwgIWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmFjdGlvbiA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJyAhPT0gaC5vbkNvbXBsZXRlIHx8ICh2b2lkIDAgIT09IG8gJiYgIW8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnZnVuY3Rpb24nID09IHR5cGVvZiBoLm9uQ29tcGxldGUgJiYgaC5vbkNvbXBsZXRlKHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9jbG9zZSghMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIG4uY2FsbCh0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NpbmcoITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLl9ldmVudCgnc3VibWl0Q29tcGxldGUnKQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGIuZGF0YSA9IGk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICdyZW1vdmUnID09PSB2ICYmCiAgICAgICAgICAgICAgICAgICAgdy5lYWNoKHAsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIuZGF0YVt0XSA9IGUuZGF0YTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgKHIgPSB3LmV4dGVuZCghMCwge30sIGIpKSwKICAgICAgICAgICAgICAgIHQgJiYgdChiKSwKICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdwcmVTdWJtaXQnLCBbYiwgdl0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgITEgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyBhLl9wcm9jZXNzaW5nKCExKQogICAgICAgICAgICAgICAgICAgICAgICA6IChhLnMuYWpheCA/IGEuX2FqYXggOiBhLl9zdWJtaXRUYWJsZSkuY2FsbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuX3N1Ym1pdFN1Y2Nlc3ModCwgZSwgYiwgciwgYS5zLmFjdGlvbiwgbCwgbywgbiwgcywgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLl9zdWJtaXRFcnJvcih0LCBlLCBpLCBzLCBiLCBhLnMuYWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gTmUodCwgZSwgaSwgbikgewogICAgICAgIHZhciBzLAogICAgICAgICAgICBvID0gdC5hY3Rpb24sCiAgICAgICAgICAgIHIgPSB7IGRhdGE6IFtdIH0sCiAgICAgICAgICAgIGEgPSB1KHRoaXMucy5pZFNyYyksCiAgICAgICAgICAgIGwgPSBfKHRoaXMucy5pZFNyYyk7CiAgICAgICAgJ3JlbW92ZScgIT09IG8gJiYKICAgICAgICAgICAgKChzID0gJ21haW4nID09PSB0aGlzLnMubW9kZSA/IHRoaXMuX2RhdGFTb3VyY2UoJ2ZpZWxkcycsIHRoaXMubW9kaWZpZXIoKSkgOiB0aGlzLl9kYXRhU291cmNlKCdpbmRpdmlkdWFsJywgdGhpcy5tb2RpZmllcigpKSksCiAgICAgICAgICAgIHcuZWFjaCh0LmRhdGEsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwKICAgICAgICAgICAgICAgICAgICBuID0gZCwKICAgICAgICAgICAgICAgICAgICBuID0gKChpID0gJ2VkaXQnID09PSBvID8gKChpID0gbih7fSwgc1t0XS5kYXRhKSksIG4oaSwgZSkpIDogbih7fSwgZSkpLCBhKGkpKTsKICAgICAgICAgICAgICAgIGwoaSwgJ2NyZWF0ZScgPT09IG8gJiYgdm9pZCAwID09PSBuID8gK25ldyBEYXRlKCkgKyB0LnRvU3RyaW5nKCkgOiBuKSwgci5kYXRhLnB1c2goaSk7CiAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgZShyKTsKICAgIH0KICAgIGZ1bmN0aW9uIFJlKHQsIGUsIGksIG4sIHMsIG8sIHIsIGEsIGwsIGQpIHsKICAgICAgICB2YXIgdSA9IHRoaXMsCiAgICAgICAgICAgIGMgPSB0aGlzLnMuZmllbGRzLAogICAgICAgICAgICBwID0gdGhpcy5zLmVkaXRPcHRzLAogICAgICAgICAgICBmID0gdGhpcy5zLm1vZGlmaWVyOwogICAgICAgIGlmICgKICAgICAgICAgICAgKHRoaXMuX2V2ZW50KCdwb3N0U3VibWl0JywgW3QsIGksIHMsIGRdKSwKICAgICAgICAgICAgdC5lcnJvciB8fCAodC5lcnJvciA9ICcnKSwKICAgICAgICAgICAgdC5maWVsZEVycm9ycyB8fCAodC5maWVsZEVycm9ycyA9IFtdKSwKICAgICAgICAgICAgZSB8fCB0LmVycm9yIHx8IHQuZmllbGRFcnJvcnMubGVuZ3RoKQogICAgICAgICkgewogICAgICAgICAgICB2YXIgaCA9IFtdOwogICAgICAgICAgICB0LmVycm9yICYmIGgucHVzaCh0LmVycm9yKSwKICAgICAgICAgICAgICAgIHcuZWFjaCh0LmZpZWxkRXJyb3JzLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gY1tlLm5hbWVdOwogICAgICAgICAgICAgICAgICAgIGlmICghaSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGZpZWxkOiAnICsgZS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBpLmRpc3BsYXllZCgpCiAgICAgICAgICAgICAgICAgICAgICAgID8gKGkuZXJyb3IoZS5zdGF0dXMgfHwgJ0Vycm9yJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ2ZvY3VzJyA9PT0gcC5vbkZpZWxkRXJyb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHUuX2FuaW1hdGUodyh1LmRvbS5ib2R5Q29udGVudCksIHsgc2Nyb2xsVG9wOiB3KGkubm9kZSgpKS5wb3NpdGlvbigpLnRvcCB9LCA1MDApLCBpLmZvY3VzKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdmdW5jdGlvbicgPT0gdHlwZW9mIHAub25GaWVsZEVycm9yICYmIHAub25GaWVsZEVycm9yKHUsIGUpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBoLnB1c2goaS5uYW1lKCkgKyAnOiAnICsgKGUuc3RhdHVzIHx8ICdFcnJvcicpKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5lcnJvcihoLmpvaW4oJzxicj4nKSksCiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudCgnc3VibWl0VW5zdWNjZXNzZnVsJywgW3RdKSwKICAgICAgICAgICAgICAgIGwgJiYgbC5jYWxsKHRoaXMsIHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBtID0ge307CiAgICAgICAgICAgIGlmICghdC5kYXRhIHx8ICgnY3JlYXRlJyAhPT0gcyAmJiAnZWRpdCcgIT09IHMpKQogICAgICAgICAgICAgICAgJ3JlbW92ZScgPT09IHMgJiYKICAgICAgICAgICAgICAgICAgICAodGhpcy5fZGF0YVNvdXJjZSgncHJlcCcsIHMsIGYsIG4sIHQsIG0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdwcmVSZW1vdmUnLCBbdCwgdGhpcy5pZHMoKV0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2UoJ3JlbW92ZScsIGYsIGMsIG0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KFsncmVtb3ZlJywgJ3Bvc3RSZW1vdmUnXSwgW3QsIHRoaXMuaWRzKCldKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhU291cmNlKCdjb21taXQnLCBzLCBmLCB0LmRhdGEsIG0pKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhU291cmNlKCdwcmVwJywgcywgZiwgbiwgdCwgbSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB2ID0gMCwgYiA9IHQuZGF0YTsgdiA8IGIubGVuZ3RoOyB2KyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IGJbdl0sCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBfLAogICAgICAgICAgICAgICAgICAgICAgICBnID0gdGhpcy5fZGF0YVNvdXJjZSgnaWQnLCBfKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudCgnc2V0RGF0YScsIFt0LCBfLCBzXSksCiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGUnID09PSBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICh0aGlzLl9ldmVudCgncHJlQ3JlYXRlJywgW3QsIF8sIGddKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSgnY3JlYXRlJywgYywgXywgbSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KFsnY3JlYXRlJywgJ3Bvc3RDcmVhdGUnXSwgW3QsIF8sIGddKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2VkaXQnID09PSBzICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9ldmVudCgncHJlRWRpdCcsIFt0LCBfLCBnXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2UoJ2VkaXQnLCBmLCBjLCBfLCBtKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnQoWydlZGl0JywgJ3Bvc3RFZGl0J10sIFt0LCBfLCBnXSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSgnY29tbWl0JywgcywgZiwgdC5kYXRhLCBtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvID09PSB0aGlzLnMuZWRpdENvdW50ICYmCiAgICAgICAgICAgICAgICAoKGkgPSB0aGlzLnMuYWN0aW9uKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuYWN0aW9uID0gbnVsbCksCiAgICAgICAgICAgICAgICAnY2xvc2UnICE9PSBwLm9uQ29tcGxldGUgfHwgKHZvaWQgMCAhPT0gciAmJiAhcikKICAgICAgICAgICAgICAgICAgICA/ICdmdW5jdGlvbicgPT0gdHlwZW9mIHAub25Db21wbGV0ZSAmJiBwLm9uQ29tcGxldGUodGhpcykKICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2Nsb3NlKCEhdC5kYXRhLCBpKSksCiAgICAgICAgICAgICAgICBhICYmIGEuY2FsbCh0aGlzLCB0KSwKICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50KCdzdWJtaXRTdWNjZXNzJywgW3QsIHksIHNdKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fcHJvY2Vzc2luZyghMSksIHRoaXMuX2V2ZW50KCdzdWJtaXRDb21wbGV0ZScsIFt0LCB5LCBzXSk7CiAgICB9CiAgICBmdW5jdGlvbiBCZSh0LCBlLCBpLCBuLCBzLCBvKSB7CiAgICAgICAgdGhpcy5fZXZlbnQoJ3Bvc3RTdWJtaXQnLCBbbnVsbCwgcywgbywgdF0pLAogICAgICAgICAgICB0aGlzLmVycm9yKHRoaXMuaTE4bi5lcnJvci5zeXN0ZW0pLAogICAgICAgICAgICB0aGlzLl9wcm9jZXNzaW5nKCExKSwKICAgICAgICAgICAgbiAmJiBuLmNhbGwodGhpcywgdCwgZSwgaSksCiAgICAgICAgICAgIHRoaXMuX2V2ZW50KFsnc3VibWl0RXJyb3InLCAnc3VibWl0Q29tcGxldGUnXSwgW3QsIGUsIGksIHNdKTsKICAgIH0KICAgIGZ1bmN0aW9uIExlKGkpIHsKICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgIHMgPSB0aGlzLnMudGFibGUgPyBuZXcgbmUuQXBpKHRoaXMucy50YWJsZSkgOiBudWxsLAogICAgICAgICAgICBvID0gITE7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgcyAmJiAobyA9IHMuc2V0dGluZ3MoKVswXS5vRmVhdHVyZXMuYlNlcnZlclNpZGUpLAogICAgICAgICAgICB0aGlzLnMucHJvY2Vzc2luZwogICAgICAgICAgICAgICAgPyAodGhpcy5vbmUoJ3N1Ym1pdENvbXBsZXRlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgbwogICAgICAgICAgICAgICAgICAgICAgICAgID8gcy5vbmUoJ2RyYXcnLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgITApCiAgICAgICAgICAgICAgICA6ICgnaW5saW5lJyA9PT0gdGhpcy5kaXNwbGF5KCkgfHwgJ2J1YmJsZScgPT09IHRoaXMuZGlzcGxheSgpKSAmJgogICAgICAgICAgICAgICAgICAodGhpcy5vbmUoJ2Nsb3NlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgbi5zLnByb2Nlc3NpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICA/IG4ub25lKCdzdWJtaXRDb21wbGV0ZScsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyAmJiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcy5vbmUoJ2RyYXcnLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnMgJiYgaSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnMgJiYgaSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICAgICAgICB9KS5ibHVyKCksCiAgICAgICAgICAgICAgICAgICEwKQogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBNZSh0LCBlKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBlLmxlbmd0aDsgaSA8IG47IGkrKykgaWYgKHQgPT0gZVtpXSkgcmV0dXJuIGk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgfQogICAgdmFyIFVlID0geyBjcmVhdGU6IGZ1bmN0aW9uICgpIHt9LCBkaXNhYmxlOiBmdW5jdGlvbiAoKSB7fSwgZW5hYmxlOiBmdW5jdGlvbiAoKSB7fSwgZ2V0OiBmdW5jdGlvbiAoKSB7fSwgc2V0OiBmdW5jdGlvbiAoKSB7fSB9LAogICAgICAgIEMgPSB3LmZuLmRhdGFUYWJsZTsKICAgIGZ1bmN0aW9uIFZlKHQsIGUpIHsKICAgICAgICBudWxsID09IGUgJiYgKGUgPSB0LnVwbG9hZFRleHQgfHwgJ0Nob29zZSBmaWxlLi4uJyksIHQuX2lucHV0LmZpbmQoJ2Rpdi51cGxvYWQgYnV0dG9uJykuaHRtbChlKTsKICAgIH0KICAgIGZ1bmN0aW9uIEhlKGksIGUsIG4sIHQpIHsKICAgICAgICB2YXIgcywKICAgICAgICAgICAgbyA9IGkuY2xhc3Nlcy5mb3JtLmJ1dHRvbkludGVybmFsLAogICAgICAgICAgICByID0gdygKICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJlZGl0b3JfdXBsb2FkIj48ZGl2IGNsYXNzPSJldV90YWJsZSI+PGRpdiBjbGFzcz0icm93Ij48ZGl2IGNsYXNzPSJjZWxsIHVwbG9hZCBsaW1pdEhpZGUiPjxidXR0b24gY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIG8gKwogICAgICAgICAgICAgICAgICAgICciPjwvYnV0dG9uPjxpbnB1dCB0eXBlPSJmaWxlIiAnICsKICAgICAgICAgICAgICAgICAgICAoKHQgPSB2b2lkIDAgPT09IHQgPyAhMSA6IHQpID8gJ211bHRpcGxlJyA6ICcnKSArCiAgICAgICAgICAgICAgICAgICAgJz48L2lucHV0PjwvZGl2PjxkaXYgY2xhc3M9ImNlbGwgY2xlYXJWYWx1ZSI+PGJ1dHRvbiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgbyArCiAgICAgICAgICAgICAgICAgICAgJyI+PC9idXR0b24+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0icm93IHNlY29uZCI+PGRpdiBjbGFzcz0iY2VsbCBsaW1pdEhpZGUiPjxkaXYgY2xhc3M9ImRyb3AiPjxzcGFuPjwvc3Bhbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjZWxsIj48ZGl2IGNsYXNzPSJyZW5kZXJlZCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoZS5faW5wdXQgPSByKSwKICAgICAgICAgICAgKGUuX2VuYWJsZWQgPSAhMCksCiAgICAgICAgICAgIGUuaWQgJiYgci5maW5kKCdpbnB1dFt0eXBlPWZpbGVdJykuYXR0cignaWQnLCBQLnNhZmVJZChlLmlkKSksCiAgICAgICAgICAgIGUuYXR0ciAmJiByLmZpbmQoJ2lucHV0W3R5cGU9ZmlsZV0nKS5hdHRyKGUuYXR0ciksCiAgICAgICAgICAgIFZlKGUpLAogICAgICAgICAgICBwLkZpbGVSZWFkZXIgJiYgITEgIT09IGUuZHJhZ0Ryb3AKICAgICAgICAgICAgICAgID8gKHIuZmluZCgnZGl2LmRyb3Agc3BhbicpLnRleHQoZS5kcmFnRHJvcFRleHQgfHwgJ0RyYWcgYW5kIGRyb3AgYSBmaWxlIGhlcmUgdG8gdXBsb2FkJyksCiAgICAgICAgICAgICAgICAgIChzID0gci5maW5kKCdkaXYuZHJvcCcpKQogICAgICAgICAgICAgICAgICAgICAgLm9uKCdkcm9wJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5fZW5hYmxlZCAmJiAoUC51cGxvYWQoaSwgZSwgdC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcywgVmUsIG4pLCBzLnJlbW92ZUNsYXNzKCdvdmVyJykpLCAhMTsKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAub24oJ2RyYWdsZWF2ZSBkcmFnZXhpdCcsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX2VuYWJsZWQgJiYgcy5yZW1vdmVDbGFzcygnb3ZlcicpLCAhMTsKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5fZW5hYmxlZCAmJiBzLmFkZENsYXNzKCdvdmVyJyksICExOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgICAgIC5vbignb3BlbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3KCdib2R5Jykub24oJ2RyYWdvdmVyLkRURV9VcGxvYWQgZHJvcC5EVEVfVXBsb2FkJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdygnYm9keScpLm9mZignZHJhZ292ZXIuRFRFX1VwbG9hZCBkcm9wLkRURV9VcGxvYWQnKTsKICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgOiAoci5hZGRDbGFzcygnbm9Ecm9wJyksIHIuYXBwZW5kKHIuZmluZCgnZGl2LnJlbmRlcmVkJykpKSwKICAgICAgICAgICAgci5maW5kKCdkaXYuY2xlYXJWYWx1ZSBidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBlLl9lbmFibGVkICYmICRlLnNldC5jYWxsKGksIGUsICcnKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIuZmluZCgnaW5wdXRbdHlwZT1maWxlXScpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIFAudXBsb2FkKGksIGUsIHRoaXMuZmlsZXMsIFZlLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIGUgfHwgbi5jYWxsKGksIHQpLCAoci5maW5kKCdpbnB1dFt0eXBlPWZpbGVdJylbMF0udmFsdWUgPSAnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gayh0KSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHQudHJpZ2dlcignY2hhbmdlJywgeyBlZGl0b3I6ICEwLCBlZGl0b3JTZXQ6ICEwIH0pOwogICAgICAgIH0sIDApOwogICAgfQogICAgdmFyIGUgPSB3LmV4dGVuZCghMCwge30sIFVlLCB7CiAgICAgICAgICAgIGNhblJldHVyblN1Ym1pdDogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LnByb3AoJ2Rpc2FibGVkJywgITApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC5wcm9wKCdkaXNhYmxlZCcsICExKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQuX2lucHV0LnZhbCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC52YWwoZSksIGsodC5faW5wdXQpOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIHFlID0gewogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQuX2lucHV0ID0gdygnPGlucHV0Lz4nKSksICh0Ll92YWwgPSB0LnZhbHVlKSwgbnVsbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQuX3ZhbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGkgPSB0Ll92YWw7CiAgICAgICAgICAgICAgICAodC5fdmFsID0gZSksIHQuX2lucHV0LnZhbChlKSwgaSAhPT0gZSAmJiBrKHQuX2lucHV0KTsKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIFdlID0gdy5leHRlbmQoITAsIHt9LCBlLCB7CiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgKHQuX2lucHV0ID0gdygnPGlucHV0Lz4nKS5hdHRyKHcuZXh0ZW5kKHsgaWQ6IFAuc2FmZUlkKHQuaWQpLCByZWFkb25seTogJ3JlYWRvbmx5JywgdHlwZTogJ3RleHQnIH0sIHQuYXR0ciB8fCB7fSkpKSwKICAgICAgICAgICAgICAgICAgICB0Ll9pbnB1dFswXQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICB6ZSA9IHcuZXh0ZW5kKCEwLCB7fSwgZSwgewogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQuX2lucHV0ID0gdygnPGlucHV0Lz4nKS5hdHRyKHcuZXh0ZW5kKHsgaWQ6IFAuc2FmZUlkKHQuaWQpLCB0eXBlOiAndGV4dCcgfSwgdC5hdHRyIHx8IHt9KSkpLCB0Ll9pbnB1dFswXTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICBHZSA9IHcuZXh0ZW5kKCEwLCB7fSwgZSwgewogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQuX2lucHV0ID0gdygnPGlucHV0Lz4nKS5hdHRyKHcuZXh0ZW5kKHsgaWQ6IFAuc2FmZUlkKHQuaWQpLCB0eXBlOiAncGFzc3dvcmQnIH0sIHQuYXR0ciB8fCB7fSkpKSwgdC5faW5wdXRbMF07CiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgSmUgPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgY2FuUmV0dXJuU3VibWl0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQuX2lucHV0ID0gdygnPHRleHRhcmVhPjwvdGV4dGFyZWE+JykuYXR0cih3LmV4dGVuZCh7IGlkOiBQLnNhZmVJZCh0LmlkKSB9LCB0LmF0dHIgfHwge30pKSksIHQuX2lucHV0WzBdOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIG4gPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgX2FkZE9wdGlvbnM6IGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICBzID0gdC5faW5wdXRbMF0ub3B0aW9ucywKICAgICAgICAgICAgICAgICAgICBvID0gMDsKICAgICAgICAgICAgICAgIChpID0gdm9pZCAwID09PSBpID8gITEgOiBpKQogICAgICAgICAgICAgICAgICAgID8gKG8gPSBzLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICA6IHZvaWQgKHMubGVuZ3RoID0gMCkgIT09IHQucGxhY2Vob2xkZXIgJiYKICAgICAgICAgICAgICAgICAgICAgICgoaSA9IHZvaWQgMCAhPT0gdC5wbGFjZWhvbGRlclZhbHVlID8gdC5wbGFjZWhvbGRlclZhbHVlIDogJycpLAogICAgICAgICAgICAgICAgICAgICAgKG8gKz0gMSksCiAgICAgICAgICAgICAgICAgICAgICAoc1swXSA9IG5ldyBPcHRpb24odC5wbGFjZWhvbGRlciwgaSkpLAogICAgICAgICAgICAgICAgICAgICAgKG4gPSB2b2lkIDAgPT09IHQucGxhY2Vob2xkZXJEaXNhYmxlZCB8fCB0LnBsYWNlaG9sZGVyRGlzYWJsZWQpLAogICAgICAgICAgICAgICAgICAgICAgKHNbMF0uaGlkZGVuID0gbiksCiAgICAgICAgICAgICAgICAgICAgICAoc1swXS5kaXNhYmxlZCA9IG4pLAogICAgICAgICAgICAgICAgICAgICAgKHNbMF0uX2VkaXRvcl92YWwgPSBpKSksCiAgICAgICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICAgICAgICBQLnBhaXJzKGUsIHQub3B0aW9uc1BhaXIsIGZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gbmV3IE9wdGlvbihlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLl9lZGl0b3JfdmFsID0gdCksIG4gJiYgdyhlKS5hdHRyKG4pLCAoc1tpICsgb10gPSBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgKGkuX2lucHV0ID0gdygnPHNlbGVjdD48L3NlbGVjdD4nKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cih3LmV4dGVuZCh7IGlkOiBQLnNhZmVJZChpLmlkKSwgbXVsdGlwbGU6ICEwID09PSBpLm11bHRpcGxlIH0sIGkuYXR0ciB8fCB7fSkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLmR0ZScsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSAmJiBlLmVkaXRvcikgfHwgKGkuX2xhc3RTZXQgPSBuLmdldChpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICBuLl9hZGRPcHRpb25zKGksIGkub3B0aW9ucyB8fCBpLmlwT3B0cyksCiAgICAgICAgICAgICAgICAgICAgaS5faW5wdXRbMF0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC5vZmYoJ2NoYW5nZS5kdGUnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB0Ll9pbnB1dAogICAgICAgICAgICAgICAgICAgIC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKQogICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZWRpdG9yX3ZhbDsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50b0FycmF5KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5tdWx0aXBsZSA/ICh0LnNlcGFyYXRvciA/IGUuam9pbih0LnNlcGFyYXRvcikgOiBlKSA6IGUubGVuZ3RoID8gZVswXSA6IG51bGw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgIGkgfHwgKHQuX2xhc3RTZXQgPSBlKSwKICAgICAgICAgICAgICAgICAgICB0Lm11bHRpcGxlICYmIHQuc2VwYXJhdG9yICYmICFBcnJheS5pc0FycmF5KGUpCiAgICAgICAgICAgICAgICAgICAgICAgID8gKGUgPSAnc3RyaW5nJyA9PSB0eXBlb2YgZSA/IGUuc3BsaXQodC5zZXBhcmF0b3IpIDogW10pCiAgICAgICAgICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShlKSB8fCAoZSA9IFtlXSk7CiAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICBzLAogICAgICAgICAgICAgICAgICAgIG8gPSBlLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICByID0gITEsCiAgICAgICAgICAgICAgICAgICAgYSA9IHQuX2lucHV0LmZpbmQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0Ll9pbnB1dC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChzID0gITEsIG4gPSAwOyBuIDwgbzsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2VkaXRvcl92YWwgPT0gZVtuXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBzID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHQucGxhY2Vob2xkZXIgJiYgIXIgJiYgIXQubXVsdGlwbGUgJiYgYS5sZW5ndGggJiYgKGFbMF0uc2VsZWN0ZWQgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgaSB8fCBrKHQuX2lucHV0KSwKICAgICAgICAgICAgICAgICAgICByCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICBuLl9hZGRPcHRpb25zKHQsIGUsIGkpOwogICAgICAgICAgICAgICAgZSA9IHQuX2xhc3RTZXQ7CiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUgJiYgbi5zZXQodCwgZSwgITApLCBrKHQuX2lucHV0KTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICBzID0gdy5leHRlbmQoITAsIHt9LCBlLCB7CiAgICAgICAgICAgIF9hZGRPcHRpb25zOiBmdW5jdGlvbiAocywgdCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG8gPSBzLl9pbnB1dCwKICAgICAgICAgICAgICAgICAgICByID0gMDsKICAgICAgICAgICAgICAgIChlID0gdm9pZCAwID09PSBlID8gITEgOiBlKSA/IChyID0gdygnaW5wdXQnLCBvKS5sZW5ndGgpIDogby5lbXB0eSgpLAogICAgICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgUC5wYWlycyh0LCBzLm9wdGlvbnNQYWlyLCBmdW5jdGlvbiAodCwgZSwgaSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXY+PGlucHV0IGlkPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5zYWZlSWQocy5pZCkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXycgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSArIHIpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgdHlwZT0iY2hlY2tib3giIC8+PGxhYmVsIGZvcj0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuc2FmZUlkKHMuaWQpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ18nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgKyByKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+PC9kaXY+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHcoJ2lucHV0Omxhc3QnLCBvKS5hdHRyKCd2YWx1ZScsIHQpWzBdLl9lZGl0b3JfdmFsID0gdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiB3KCdpbnB1dDpsYXN0JywgbykuYXR0cihuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAodC5faW5wdXQgPSB3KCc8ZGl2PjwvZGl2PicpKSwgcy5fYWRkT3B0aW9ucyh0LCB0Lm9wdGlvbnMgfHwgdC5pcE9wdHMpLCB0Ll9pbnB1dFswXTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LmZpbmQoJ2lucHV0JykucHJvcCgnZGlzYWJsZWQnLCAhMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LmZpbmQoJ2lucHV0JykucHJvcCgnZGlzYWJsZWQnLCAhMSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gW10sCiAgICAgICAgICAgICAgICAgICAgaSA9IHQuX2lucHV0LmZpbmQoJ2lucHV0OmNoZWNrZWQnKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgaS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgPyBpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5fZWRpdG9yX3ZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDAgIT09IHQudW5zZWxlY3RlZFZhbHVlICYmIGUucHVzaCh0LnVuc2VsZWN0ZWRWYWx1ZSksCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0LnNlcGFyYXRvciB8fCBudWxsID09PSB0LnNlcGFyYXRvciA/IGUgOiBlLmpvaW4odC5zZXBhcmF0b3IpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwKICAgICAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgICAgIHMgPSB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpLAogICAgICAgICAgICAgICAgICAgIG8gPQogICAgICAgICAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShlKSB8fCAnc3RyaW5nJyAhPSB0eXBlb2YgZSA/IEFycmF5LmlzQXJyYXkoZSkgfHwgKGUgPSBbZV0pIDogKGUgPSBlLnNwbGl0KHQuc2VwYXJhdG9yIHx8ICd8JykpLAogICAgICAgICAgICAgICAgICAgICAgICBlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAobiA9ICExLCBpID0gMDsgaSA8IG87IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2VkaXRvcl92YWwgPT0gZVtpXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBuOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgayhzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBzLmdldCh0KTsKICAgICAgICAgICAgICAgIHMuX2FkZE9wdGlvbnModCwgZSwgaSksIHMuc2V0KHQsIG4pOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIEYgPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgX2FkZE9wdGlvbnM6IGZ1bmN0aW9uIChzLCB0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbyA9IHMuX2lucHV0LAogICAgICAgICAgICAgICAgICAgIHIgPSAwOwogICAgICAgICAgICAgICAgKGUgPSB2b2lkIDAgPT09IGUgPyAhMSA6IGUpID8gKHIgPSB3KCdpbnB1dCcsIG8pLmxlbmd0aCkgOiBvLmVtcHR5KCksCiAgICAgICAgICAgICAgICAgICAgdCAmJgogICAgICAgICAgICAgICAgICAgICAgICBQLnBhaXJzKHQsIHMub3B0aW9uc1BhaXIsIGZ1bmN0aW9uICh0LCBlLCBpLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdj48aW5wdXQgaWQ9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnNhZmVJZChzLmlkKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdfJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpICsgcikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIiB0eXBlPSJyYWRpbyIgbmFtZT0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMubmFtZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciIC8+PGxhYmVsIGZvcj0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuc2FmZUlkKHMuaWQpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ18nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgKyByKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+PC9kaXY+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHcoJ2lucHV0Omxhc3QnLCBvKS5hdHRyKCd2YWx1ZScsIHQpWzBdLl9lZGl0b3JfdmFsID0gdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiB3KCdpbnB1dDpsYXN0JywgbykuYXR0cihuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgKHQuX2lucHV0ID0gdygnPGRpdiAvPicpKSwKICAgICAgICAgICAgICAgICAgICBGLl9hZGRPcHRpb25zKHQsIHQub3B0aW9ucyB8fCB0LmlwT3B0cyksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbignb3BlbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdC5faW5wdXQuZmluZCgnaW5wdXQnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZUNoZWNrZWQgJiYgKHRoaXMuY2hlY2tlZCA9ICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdC5faW5wdXRbMF0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgITApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgITEpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHQuX2lucHV0LmZpbmQoJ2lucHV0OmNoZWNrZWQnKTsKICAgICAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA/IGVbMF0uX2VkaXRvcl92YWwgOiB2b2lkIDAgIT09IHQudW5zZWxlY3RlZFZhbHVlID8gdC51bnNlbGVjdGVkVmFsdWUgOiB2b2lkIDA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LmZpbmQoJ2lucHV0JykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3ByZUNoZWNrZWQgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VkaXRvcl92YWwgPT0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMuY2hlY2tlZCA9ICEwKSwgKHRoaXMuX3ByZUNoZWNrZWQgPSAhMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgodGhpcy5jaGVja2VkID0gITEpLCAodGhpcy5fcHJlQ2hlY2tlZCA9ICExKSk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBrKHQuX2lucHV0LmZpbmQoJ2lucHV0OmNoZWNrZWQnKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gRi5nZXQodCksCiAgICAgICAgICAgICAgICAgICAgZSA9IChGLl9hZGRPcHRpb25zKHQsIGUsIGkpLCB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpKTsKICAgICAgICAgICAgICAgIEYuc2V0KHQsIGUuZmlsdGVyKCdbdmFsdWU9IicgKyBuICsgJyJdJykubGVuZ3RoID8gbiA6IGUuZXEoMCkuYXR0cigndmFsdWUnKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgWGUgPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAodC5faW5wdXQgPSB3KCc8aW5wdXQgLz4nKS5hdHRyKHcuZXh0ZW5kKCEwLCB7IGlkOiBQLnNhZmVJZCh0LmlkKSwgdHlwZTogJ3RleHQnIH0sIHQuYXR0cikpKSwKICAgICAgICAgICAgICAgICAgICBDLkRhdGVUaW1lIHx8IFAuZXJyb3IoJ0RhdGVUaW1lIGxpYnJhcnkgaXMgcmVxdWlyZWQnLCAxNSksCiAgICAgICAgICAgICAgICAgICAgdC5tb21lbnRMb2NhbGUgJiYgIXQub3B0cy5sb2NhbGUgJiYgKHQub3B0cy5sb2NhbGUgPSB0Lm1vbWVudExvY2FsZSksCiAgICAgICAgICAgICAgICAgICAgdC5tb21lbnRTdHJpY3QgJiYgIXQub3B0cy5zdHJpY3QgJiYgKHQub3B0cy5zdHJpY3QgPSB0Lm1vbWVudFN0cmljdCksCiAgICAgICAgICAgICAgICAgICAgKHQuX3BpY2tlciA9IG5ldyBDLkRhdGVUaW1lKAogICAgICAgICAgICAgICAgICAgICAgICB0Ll9pbnB1dCwKICAgICAgICAgICAgICAgICAgICAgICAgdy5leHRlbmQoeyBmb3JtYXQ6IHQuZGlzcGxheUZvcm1hdCB8fCB0LmZvcm1hdCwgaTE4bjogdGhpcy5pMThuLmRhdGV0aW1lIH0sIHQub3B0cyksCiAgICAgICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICAgICAgISh0Ll9jbG9zZUZuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0Ll9waWNrZXIuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0pID09PSB0LmtleUlucHV0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgIHQuX2lucHV0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbignY2xvc2UnLCB0Ll9jbG9zZUZuKSwKICAgICAgICAgICAgICAgICAgICB0Ll9pbnB1dFswXQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdjbG9zZScsIHQuX2Nsb3NlRm4pLCB0Ll9pbnB1dC5vZmYoJ2tleWRvd24nKSwgdC5fcGlja2VyLmRlc3Ryb3koKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdC5fcGlja2VyLmVycm9yTXNnKGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC53aXJlRm9ybWF0ID8gdC5fcGlja2VyLnZhbEZvcm1hdCh0LndpcmVGb3JtYXQpIDogdC5faW5wdXQudmFsKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1heERhdGU6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB0Ll9waWNrZXIubWF4KGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtaW5EYXRlOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdC5fcGlja2VyLm1pbihlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3duczogZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0Ll9waWNrZXIub3ducyhlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgJ3N0cmluZycgPT0gdHlwZW9mIGUgJiYgZSAmJiAwICE9PSBlLmluZGV4T2YoJy0tJykgJiYgdC53aXJlRm9ybWF0CiAgICAgICAgICAgICAgICAgICAgPyB0Ll9waWNrZXIudmFsRm9ybWF0KHQud2lyZUZvcm1hdCwgZSkKICAgICAgICAgICAgICAgICAgICA6IHQuX3BpY2tlci52YWwoZSksCiAgICAgICAgICAgICAgICAgICAgayh0Ll9pbnB1dCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgJGUgPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgY2FuUmV0dXJuU3VibWl0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXM7CiAgICAgICAgICAgICAgICByZXR1cm4gSGUoaSwgZSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAkZS5zZXQuY2FsbChpLCBlLCB0WzBdKSwgaS5fZXZlbnQoJ3Bvc3RVcGxvYWQnLCBbZS5uYW1lLCB0WzBdXSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LmZpbmQoJ2lucHV0JykucHJvcCgnZGlzYWJsZWQnLCAhMCksICh0Ll9lbmFibGVkID0gITEpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgITEpLCAodC5fZW5hYmxlZCA9ICEwKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQuX3ZhbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgKHQuX3ZhbCA9IGUpLCB0Ll9pbnB1dC52YWwoJycpOwogICAgICAgICAgICAgICAgdmFyIGkgPSB0Ll9pbnB1dCwKICAgICAgICAgICAgICAgICAgICBuID0KICAgICAgICAgICAgICAgICAgICAgICAgKHQuZGlzcGxheSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gaS5maW5kKCdkaXYucmVuZGVyZWQnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Ll92YWwgPyBuLmh0bWwodC5kaXNwbGF5KHQuX3ZhbCkpIDogbi5lbXB0eSgpLmFwcGVuZCgnPHNwYW4+JyArICh0Lm5vRmlsZVRleHQgfHwgJ05vIGZpbGUnKSArICc8L3NwYW4+JykpLAogICAgICAgICAgICAgICAgICAgICAgICBpLmZpbmQoJ2Rpdi5jbGVhclZhbHVlIGJ1dHRvbicpKTsKICAgICAgICAgICAgICAgIGUgJiYgdC5jbGVhclRleHQgPyAobi5odG1sKHQuY2xlYXJUZXh0KSwgaS5yZW1vdmVDbGFzcygnbm9DbGVhcicpKSA6IGkuYWRkQ2xhc3MoJ25vQ2xlYXInKSwKICAgICAgICAgICAgICAgICAgICB0Ll9pbnB1dC5maW5kKCdpbnB1dCcpLnRyaWdnZXJIYW5kbGVyKCd1cGxvYWQuZWRpdG9yJywgW3QuX3ZhbF0pOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIE8gPSB3LmV4dGVuZCghMCwge30sIGUsIHsKICAgICAgICAgICAgX3Nob3dIaWRlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5saW1pdCAmJgogICAgICAgICAgICAgICAgICAgICh0Ll9jb250YWluZXIuZmluZCgnZGl2LmxpbWl0SGlkZScpLmNzcygnZGlzcGxheScsIHQuX3ZhbC5sZW5ndGggPj0gdC5saW1pdCA/ICdub25lJyA6ICdibG9jaycpLAogICAgICAgICAgICAgICAgICAgICh0Ll9saW1pdExlZnQgPSB0LmxpbWl0IC0gdC5fdmFsLmxlbmd0aCkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjYW5SZXR1cm5TdWJtaXQ6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcywKICAgICAgICAgICAgICAgICAgICB0ID0gSGUoCiAgICAgICAgICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5fdmFsID0gZS5fdmFsLmNvbmNhdCh0KSksIE8uc2V0LmNhbGwoaSwgZSwgZS5fdmFsKSwgaS5fZXZlbnQoJ3Bvc3RVcGxvYWQnLCBbZS5uYW1lLCBlLl92YWxdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgITAsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgdC5hZGRDbGFzcygnbXVsdGknKS5vbignY2xpY2snLCAnYnV0dG9uLnJlbW92ZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQuc3RvcFByb3BhZ2F0aW9uKCksIGUuX2VuYWJsZWQgJiYgKCh0ID0gdyh0aGlzKS5kYXRhKCdpZHgnKSksIGUuX3ZhbC5zcGxpY2UodCwgMSksIE8uc2V0LmNhbGwoaSwgZSwgZS5fdmFsKSk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKGUuX2NvbnRhaW5lciA9IHQpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5faW5wdXQuZmluZCgnaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsICEwKSwgKHQuX2VuYWJsZWQgPSAhMSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQuX2lucHV0LmZpbmQoJ2lucHV0JykucHJvcCgnZGlzYWJsZWQnLCAhMSksICh0Ll9lbmFibGVkID0gITApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5fdmFsOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChpLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAoKCh0ID0gdCB8fCBbXSksICFBcnJheS5pc0FycmF5KHQpKSkgdGhyb3cgbmV3IEVycm9yKCdVcGxvYWQgY29sbGVjdGlvbnMgbXVzdCBoYXZlIGFuIGFycmF5IGFzIGEgdmFsdWUnKTsKICAgICAgICAgICAgICAgIChpLl92YWwgPSB0KSwgaS5faW5wdXQudmFsKCcnKTsKICAgICAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIGUgPSBpLl9pbnB1dDsKICAgICAgICAgICAgICAgIGkuZGlzcGxheSAmJgogICAgICAgICAgICAgICAgICAgICgoZSA9IGUuZmluZCgnZGl2LnJlbmRlcmVkJykuZW1wdHkoKSksCiAgICAgICAgICAgICAgICAgICAgdC5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKG4gPSB3KCc8dWw+PC91bD4nKS5hcHBlbmRUbyhlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdy5lYWNoKHQsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBpLmRpc3BsYXkoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bGk+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDxidXR0b24gY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmNsYXNzZXMuZm9ybS5idXR0b24gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJlbW92ZSIgZGF0YS1pZHg9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+JnRpbWVzOzwvYnV0dG9uPjwvbGk+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogZS5hcHBlbmQoJzxzcGFuPicgKyAoaS5ub0ZpbGVUZXh0IHx8ICdObyBmaWxlcycpICsgJzwvc3Bhbj4nKSksCiAgICAgICAgICAgICAgICAgICAgTy5fc2hvd0hpZGUoaSksCiAgICAgICAgICAgICAgICAgICAgaS5faW5wdXQuZmluZCgnaW5wdXQnKS50cmlnZ2VySGFuZGxlcigndXBsb2FkLmVkaXRvcicsIFtpLl92YWxdKTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICBBID0gdy5leHRlbmQoITAsIHt9LCBlLCB7CiAgICAgICAgICAgIF9hZGRPcHRpb25zOiBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAgICAgdCA9IHQuZHQ7CiAgICAgICAgICAgICAgICAoaSA9IHZvaWQgMCA9PT0gaSA/ICExIDogaSkgfHwgdC5jbGVhcigpLCB0LnJvd3MuYWRkKGUpLmRyYXcoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2p1bXBUb0ZpcnN0OiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHMucm93KHsgb3JkZXI6ICdhcHBsaWVkJywgc2VsZWN0ZWQ6ICEwIH0pLm5vZGUoKTsKICAgICAgICAgICAgICAgICAgICB0ICYmIHIuaGVpZ2h0KCkgLSAxMCA8ICh0ID0gdyh0KS5wb3NpdGlvbigpLnRvcCkgJiYgci5zY3JvbGxUb3AodCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgICAgICBzID0gdC5kdCwKICAgICAgICAgICAgICAgICAgICB0ID0gcy5yb3coeyBvcmRlcjogJ2FwcGxpZWQnLCBzZWxlY3RlZDogITAgfSkuaW5kZXgoKSwKICAgICAgICAgICAgICAgICAgICBvID0gMCwKICAgICAgICAgICAgICAgICAgICByID0KICAgICAgICAgICAgICAgICAgICAgICAgKCdudW1iZXInID09IHR5cGVvZiB0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKG4gPSBzLnBhZ2UuaW5mbygpLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9IHMucm93cyh7IG9yZGVyOiAnYXBwbGllZCcgfSkuaW5kZXhlcygpLmluZGV4T2YodCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSAwIDwgbiA/IE1hdGguZmxvb3IodCAvIG4pIDogMCkpLAogICAgICAgICAgICAgICAgICAgICAgICBzLnBhZ2UobykuZHJhdyghMSksCiAgICAgICAgICAgICAgICAgICAgICAgIHcoJ2Rpdi5kYXRhVGFibGVzX3Njcm9sbEJvZHknLCBzLnRhYmxlKCkuY29udGFpbmVyKCkpKTsKICAgICAgICAgICAgICAgIHIubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgKHIucGFyZW50cygnYm9keScpLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICA/IGkoKQogICAgICAgICAgICAgICAgICAgICAgICA6IGUub25lKCdvcGVuJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgbiA9ICgoci5vcHRpb25zUGFpciA9IHcuZXh0ZW5kKHsgbGFiZWw6ICdsYWJlbCcsIHZhbHVlOiAndmFsdWUnIH0sIHIub3B0aW9uc1BhaXIpKSwgdygnPHRhYmxlPicpKSwKICAgICAgICAgICAgICAgICAgICB0ID0gdygnPGRpdj4nKS5hcHBlbmQobiksCiAgICAgICAgICAgICAgICAgICAgcyA9IHcoJzxkaXYgY2xhc3M9IkRURV9GaWVsZF9UeXBlX2RhdGF0YWJsZV9pbmZvIj4nKSwKICAgICAgICAgICAgICAgICAgICBlID0gQy52ZXJzaW9uQ2hlY2soJzInKSwKICAgICAgICAgICAgICAgICAgICBpID0KICAgICAgICAgICAgICAgICAgICAgICAgKHIuZm9vdGVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3KCc8dGZvb3Q+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHIuZm9vdGVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB3KCc8dHI+JykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5tYXAoci5mb290ZXIsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcoJzx0aD4nKS5odG1sKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogci5mb290ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhuKSwKICAgICAgICAgICAgICAgICAgICAgICAgci5jb25maWcgJiYgci5jb25maWcuYnV0dG9ucyAmJiByLmNvbmZpZy5idXR0b25zLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgbCA9IG4KICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEEudGFibGVDbGFzcykKICAgICAgICAgICAgICAgICAgICAgICAgLndpZHRoKCcxMDAlJykKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdpbml0LmR0JywgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5uVGFibGUgPT09IG5bMF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSBuZXcgQy5BcGkoZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdyhlLnRhYmxlKHZvaWQgMCkuY29udGFpbmVyKCkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDLnNlbGVjdC5pbml0KGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChpLmZpbmQoJ2Rpdi5kdC1zZWFyY2gnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChpLmZpbmQoJ2Rpdi5kYXRhVGFibGVzX2ZpbHRlcicpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGkuZmluZCgnZGl2LmR0LWJ1dHRvbnMnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChpLmZpbmQoJ2Rpdi5kdC1pbmZvJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoaS5maW5kKCdkaXYuZGF0YVRhYmxlc19pbmZvJykpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLkRhdGFUYWJsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuZXh0ZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IFt7IGRhdGE6IHIub3B0aW9uc1BhaXIubGFiZWwsIHRpdGxlOiAnTGFiZWwnIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlclJlbmRlcjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbTogZSA/IG51bGwgOiAnZmlCdHAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZTogeyBwYWdpbmF0ZTogeyBuZXh0OiAnPicsIHByZXZpb3VzOiAnPCcgfSwgc2VhcmNoOiAnJywgc2VhcmNoUGxhY2Vob2xkZXI6ICdTZWFyY2gnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dDogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGkgPyBbJ3NlYXJjaCcsICdidXR0b25zJywgJ2luZm8nXSA6IFsnc2VhcmNoJywgJ2luZm8nXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogWydwYWdpbmcnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbVN0YXJ0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tRW5kOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wU3RhcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BFbmQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoQ2hhbmdlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7IHN0eWxlOiByLm11bHRpcGxlID8gJ29zJyA6ICdzaW5nbGUnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmNvbmZpZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIHRoaXMub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGwuc2VhcmNoKCkgJiYgbC5zZWFyY2goJycpLmRyYXcoKSwgbC5jb2x1bW5zLmFkanVzdCgpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGwub24oJ3VzZXItc2VsZWN0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBrKHcoci5kdC50YWJsZSgpLmNvbnRhaW5lcigpKSk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgci5lZGl0b3IgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKHIuZWRpdG9yLnRhYmxlKGwpLAogICAgICAgICAgICAgICAgICAgICAgICByLmVkaXRvci5vbignc3VibWl0Q29tcGxldGUnLCBmdW5jdGlvbiAodCwgZSwgaSwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdjcmVhdGUnID09PSBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwLCBvID0gZS5kYXRhOyBzIDwgby5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIShmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5yb3dzKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZWxlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkob1tzXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlICgnZWRpdCcgIT09IG4gJiYgJ3JlbW92ZScgIT09IG4pIHx8IGEuX2RhdGFTb3VyY2UoJ3JlZnJlc2gnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEuX2p1bXBUb0ZpcnN0KHIsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgKHIuZHQgPSBsKSwKICAgICAgICAgICAgICAgICAgICBBLl9hZGRPcHRpb25zKHIsIHIub3B0aW9ucyB8fCBbXSksCiAgICAgICAgICAgICAgICAgICAgeyBpbnB1dDogdCwgc2lkZTogcyB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5kdC5zZWxlY3Quc3R5bGUoJ2FwaScpLCB0LmR0LmJ1dHRvbnMoKS5jb250YWluZXIoKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkdDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LmR0OwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0LmR0LnNlbGVjdC5zdHlsZSh0Lm11bHRpcGxlID8gJ29zJyA6ICdzaW5nbGUnKSwgdC5kdC5idXR0b25zKCkuY29udGFpbmVyKCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdC5kdC5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pLmRhdGEoKS5wbHVjayh0Lm9wdGlvbnNQYWlyLnZhbHVlKS50b0FycmF5KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5zZXBhcmF0b3IgfHwgIXQubXVsdGlwbGUgPyBlLmpvaW4odC5zZXBhcmF0b3IgfHwgJywnKSA6IGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHQsIG4sIGUpIHsKICAgICAgICAgICAgICAgIHQubXVsdGlwbGUgJiYgdC5zZXBhcmF0b3IgJiYgIUFycmF5LmlzQXJyYXkobikKICAgICAgICAgICAgICAgICAgICA/IChuID0gJ3N0cmluZycgPT0gdHlwZW9mIG4gPyBuLnNwbGl0KHQuc2VwYXJhdG9yKSA6IFtdKQogICAgICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShuKSB8fCAobiA9IFtuXSk7CiAgICAgICAgICAgICAgICB2YXIgcyA9IHUodC5vcHRpb25zUGFpci52YWx1ZSk7CiAgICAgICAgICAgICAgICB0LmR0LnJvd3MoeyBzZWxlY3RlZDogITAgfSkuZGVzZWxlY3QoKSwKICAgICAgICAgICAgICAgICAgICB0LmR0CiAgICAgICAgICAgICAgICAgICAgICAgIC5yb3dzKGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEgIT09IG4uaW5kZXhPZihzKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgpLAogICAgICAgICAgICAgICAgICAgIEEuX2p1bXBUb0ZpcnN0KHQsIHRoaXMpLAogICAgICAgICAgICAgICAgICAgIGUgfHwgayh3KHQuZHQudGFibGUoKS5jb250YWluZXIoKSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0YWJsZUNsYXNzOiAnJywKICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAgICAgQS5fYWRkT3B0aW9ucyh0LCBlLCBpKTsKICAgICAgICAgICAgICAgIGUgPSB0Ll9sYXN0U2V0OwogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmIEEuc2V0KHQsIGUsICEwKSwgayh3KHQuZHQudGFibGUoKS5jb250YWluZXIoKSkpOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIGUgPSB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogJycsCiAgICAgICAgICAgIGNvbXBhcmU6IG51bGwsCiAgICAgICAgICAgIGRhdGE6ICcnLAogICAgICAgICAgICBkZWY6ICcnLAogICAgICAgICAgICBlbnRpdHlEZWNvZGU6ICEwLAogICAgICAgICAgICBmaWVsZEluZm86ICcnLAogICAgICAgICAgICBnZXRGb3JtYXR0ZXI6IG51bGwsCiAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgbGFiZWw6ICcnLAogICAgICAgICAgICBsYWJlbEluZm86ICcnLAogICAgICAgICAgICBtZXNzYWdlOiAnJywKICAgICAgICAgICAgbXVsdGlFZGl0YWJsZTogITAsCiAgICAgICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgICAgIG51bGxEZWZhdWx0OiAhMSwKICAgICAgICAgICAgc2V0Rm9ybWF0dGVyOiBudWxsLAogICAgICAgICAgICBzdWJtaXQ6ICEwLAogICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgfSwKICAgICAgICBRZSA9IHcuZm4uZGF0YVRhYmxlLAogICAgICAgIGUgPQogICAgICAgICAgICAoKFMucHJvdG90eXBlLmRlZiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5zLm9wdHM7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gKCdmdW5jdGlvbicgPT0gdHlwZW9mIChlID0gdm9pZCAwICE9PSBpLmRlZmF1bHQgPyBpLmRlZmF1bHQgOiBpLmRlZikgPyBlKCkgOiBlKSA6ICgoaS5kZWYgPSB0KSwgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbS5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5zLmNsYXNzZXMuZGlzYWJsZWQpLCB0aGlzLl90eXBlRm4oJ2Rpc2FibGUnKSwgdGhpczsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5kaXNwbGF5ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZG9tLmNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIHJldHVybiAhKCF0LnBhcmVudHMoJ2JvZHknKS5sZW5ndGggfHwgJ25vbmUnID09PSB0LmNzcygnZGlzcGxheScpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuICExID09PSAodCA9IHZvaWQgMCA9PT0gdCA/ICEwIDogdCkKICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZGlzYWJsZSgpCiAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5kb20uY29udGFpbmVyLnJlbW92ZUNsYXNzKHRoaXMucy5jbGFzc2VzLmRpc2FibGVkKSwgdGhpcy5fdHlwZUZuKCdlbmFibGUnKSwgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuZW5hYmxlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhMSA9PT0gdGhpcy5kb20uY29udGFpbmVyLmhhc0NsYXNzKHRoaXMucy5jbGFzc2VzLmRpc2FibGVkKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMucy5jbGFzc2VzOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0ID8gdGhpcy5kb20uY29udGFpbmVyLmFkZENsYXNzKGkuZXJyb3IpIDogdGhpcy5kb20uY29udGFpbmVyLnJlbW92ZUNsYXNzKGkuZXJyb3IpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX3R5cGVGbignZXJyb3JNZXNzYWdlJywgdCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbXNnKHRoaXMuZG9tLmZpZWxkRXJyb3IsIHQsIGUpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLmZpZWxkSW5mbyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbXNnKHRoaXMuZG9tLmZpZWxkSW5mbywgdCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuaXNNdWx0aVZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5tdWx0aVZhbHVlICYmIDEgIT09IHRoaXMucy5tdWx0aUlkcy5sZW5ndGg7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuaW5FcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbS5jb250YWluZXIuaGFzQ2xhc3ModGhpcy5zLmNsYXNzZXMuZXJyb3IpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLmlucHV0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy50eXBlLmlucHV0ID8gdGhpcy5fdHlwZUZuKCdpbnB1dCcpIDogdygnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnLCB0aGlzLmRvbS5jb250YWluZXIpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy50eXBlLmZvY3VzID8gdGhpcy5fdHlwZUZuKCdmb2N1cycpIDogdygnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnLCB0aGlzLmRvbS5jb250YWluZXIpLmZvY3VzKCksIHRoaXM7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlWYWx1ZSgpKSByZXR1cm4gdGhpcy5fZm9ybWF0KHRoaXMuX3R5cGVGbignZ2V0JyksIHRoaXMucy5vcHRzLmdldEZvcm1hdHRlcik7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZG9tLmNvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICBpID0gcGFyc2VGbG9hdCh3KHRoaXMucy5ob3N0LmRpc3BsYXlOb2RlKCkpLmNzcygnb3BhY2l0eScpKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITApLAogICAgICAgICAgICAgICAgICAgIHRoaXMucy5ob3N0LmRpc3BsYXkoKSAmJiAwLjUgPCBpICYmIHQgJiYgdy5mbi5zbGlkZVVwID8gZS5zbGlkZVVwKCkgOiBlLmNzcygnZGlzcGxheScsICdub25lJyksCiAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5sYWJlbCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZG9tLmxhYmVsLAogICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLmRvbS5sYWJlbEluZm8uZGV0YWNoKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZS5odG1sKCkgOiAoZS5odG1sKHQpLCBlLmFwcGVuZChpKSwgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUubGFiZWxJbmZvID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tc2codGhpcy5kb20ubGFiZWxJbmZvLCB0KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5tZXNzYWdlID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tc2codGhpcy5kb20uZmllbGRNZXNzYWdlLCB0LCBlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5tdWx0aUdldCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMucy5tdWx0aVZhbHVlcywKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5zLm11bHRpSWRzLAogICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLmlzTXVsdGlWYWx1ZSgpOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gdGhpcy52YWwoKSwgbyA9IHt9LCByID0gMCwgYSA9IGk7IHIgPCBhLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gYVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgb1tsXSA9IG4gPyBlW2xdIDogczsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIG8gPSBuID8gZVt0XSA6IHRoaXMudmFsKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gbzsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5tdWx0aVJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAodGhpcy5zLm11bHRpVmFsdWUgPSAhMCksIHRoaXMuX211bHRpVmFsdWVDaGVjaygpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLm11bHRpU2V0ID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4odCwgZSkgewogICAgICAgICAgICAgICAgICAgIC0xID09PSB3LmluQXJyYXkodCwgcikgJiYgci5wdXNoKHQpLCAob1t0XSA9IHMuX2Zvcm1hdChlLCBzLnMub3B0cy5zZXRGb3JtYXR0ZXIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5zLm11bHRpVmFsdWVzLAogICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLnMubXVsdGlJZHM7CiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGkgJiYgKChpID0gdCksICh0ID0gdm9pZCAwKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIHcuaXNQbGFpbk9iamVjdChpKSAmJiB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyB3LmVhY2goaSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbih0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgICA/IHcuZWFjaChyLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGUsIGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIDogbih0LCBpKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLm11bHRpVmFsdWUgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgZSAmJiB0aGlzLl9tdWx0aVZhbHVlQ2hlY2soKSwKICAgICAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zLm9wdHMubmFtZTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tLmNvbnRhaW5lclswXTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5udWxsRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnMub3B0cy5udWxsRGVmYXVsdDsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5wcm9jZXNzaW5nID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgICAgICA/IHRoaXMucy5wcm9jZXNzaW5nCiAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5kb20ucHJvY2Vzc2luZy5jc3MoJ2Rpc3BsYXknLCB0ID8gJ2Jsb2NrJyA6ICdub25lJyksCiAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnByb2Nlc3NpbmcgPSB0KSwKICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5ob3N0LmludGVybmFsRXZlbnQoJ3Byb2Nlc3NpbmctZmllbGQnLCBbdF0pLAogICAgICAgICAgICAgICAgICAgICAgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnc3RyaW5nJyAhPSB0eXBlb2YgdAogICAgICAgICAgICAgICAgICAgICAgICA/IHQKICAgICAgICAgICAgICAgICAgICAgICAgOiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8mZ3Q7L2csICc+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyZsdDsvZywgJzwnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJmFtcDsvZywgJyYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJnF1b3Q7L2csICciJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyYjMTYzOy9nLCAnwqMnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJiMwPzM5Oy9nLCAiJyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8mIzA/MTA7L2csICdcbicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zLm11bHRpVmFsdWUgPSAhMTsKICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5zLm9wdHMuZW50aXR5RGVjb2RlOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbiB8fCAhMCA9PT0gbikKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0KSkgZm9yICh2YXIgcyA9IDAsIG8gPSB0Lmxlbmd0aDsgcyA8IG87IHMrKykgdFtzXSA9IGkodFtzXSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB0ID0gaSh0KTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgITAgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHQgPSB0aGlzLl9mb3JtYXQodCwgdGhpcy5zLm9wdHMuc2V0Rm9ybWF0dGVyKSksIHRoaXMuX3R5cGVGbignc2V0JywgdCksIHRoaXMuX211bHRpVmFsdWVDaGVjaygpKQogICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3R5cGVGbignc2V0JywgdCksCiAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgITEgPT09IChlID0gdm9pZCAwID09PSBlID8gITAgOiBlKQogICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaGlkZSh0KQogICAgICAgICAgICAgICAgICAgICAgICA6ICgoZSA9IHRoaXMuZG9tLmNvbnRhaW5lciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBwYXJzZUZsb2F0KHcodGhpcy5zLmhvc3QuZGlzcGxheU5vZGUoKSkuY3NzKCdvcGFjaXR5JykpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuaG9zdC5kaXNwbGF5KCkgJiYgMC41IDwgaSAmJiB0ICYmIHcuZm4uc2xpZGVEb3duID8gZS5zbGlkZURvd24oKSA6IGUuY3NzKCdkaXNwbGF5JywgJycpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIChlID0gITEpLCB0aGlzLnMudHlwZS51cGRhdGUgJiYgdGhpcy5fdHlwZUZuKCd1cGRhdGUnLCB0LCBlKSwgdGhpczsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS52YWwgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IHRoaXMuZ2V0KCkgOiB0aGlzLnNldCh0KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5zLm9wdHMuY29tcGFyZSB8fCBsKSh0LCBlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5kYXRhU3JjID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5vcHRzLmRhdGE7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbS5jb250YWluZXIucmVtb3ZlKCksIHRoaXMuX3R5cGVGbignZGVzdHJveScpLCB0aGlzOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLm11bHRpRWRpdGFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zLm9wdHMubXVsdGlFZGl0YWJsZTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5tdWx0aUlkcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnMubXVsdGlJZHM7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUubXVsdGlJbmZvU2hvd24gPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdGhpcy5kb20ubXVsdGlJbmZvLmNzcyh7IGRpc3BsYXk6IHQgPyAnYmxvY2snIDogJ25vbmUnIH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLm11bHRpUmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAodGhpcy5zLm11bHRpSWRzID0gW10pLCAodGhpcy5zLm11bHRpVmFsdWVzID0ge30pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLnN1Ym1pdHRhYmxlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5vcHRzLnN1Ym1pdDsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5fbXNnID0gZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZQogICAgICAgICAgICAgICAgICAgID8gdC5odG1sKCkKICAgICAgICAgICAgICAgICAgICA6ICgnZnVuY3Rpb24nID09IHR5cGVvZiBlICYmIChlID0gZSgobiA9IHRoaXMucy5ob3N0KSwgbmV3IFFlLkFwaShuLmludGVybmFsU2V0dGluZ3MoKS50YWJsZSkpKSwKICAgICAgICAgICAgICAgICAgICAgIHQucGFyZW50KCkuaXMoJzp2aXNpYmxlJykgJiYgdy5mbi5hbmltYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodC5odG1sKGUpLCBlID8gdC5zbGlkZURvd24oaSkgOiB0LnNsaWRlVXAoaSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodC5odG1sKGUgfHwgJycpLmNzcygnZGlzcGxheScsIGUgPyAnYmxvY2snIDogJ25vbmUnKSwgaSAmJiBpKCkpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcyk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuX211bHRpVmFsdWVDaGVjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMucy5tdWx0aUlkcywKICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5zLm11bHRpVmFsdWVzLAogICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLnMubXVsdGlWYWx1ZSwKICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5zLm9wdHMubXVsdGlFZGl0YWJsZSwKICAgICAgICAgICAgICAgICAgICByID0gITE7CiAgICAgICAgICAgICAgICBpZiAoaSkKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGkubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoZSA9IG5baVthXV0pLCAwIDwgYSAmJiAhbChlLCB0KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIChyICYmIHMpIHx8ICghbyAmJiB0aGlzLmlzTXVsdGlWYWx1ZSgpKQogICAgICAgICAgICAgICAgICAgID8gKHRoaXMuZG9tLmlucHV0Q29udHJvbC5jc3MoeyBkaXNwbGF5OiAnbm9uZScgfSksIHRoaXMuZG9tLm11bHRpLmNzcyh7IGRpc3BsYXk6ICdibG9jaycgfSkpCiAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5kb20uaW5wdXRDb250cm9sLmNzcyh7IGRpc3BsYXk6ICdibG9jaycgfSksCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5tdWx0aS5jc3MoeyBkaXNwbGF5OiAnbm9uZScgfSksCiAgICAgICAgICAgICAgICAgICAgICBzICYmICFyICYmIHRoaXMuc2V0KHQsICExKSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20ubXVsdGlSZXR1cm4uY3NzKHsgZGlzcGxheTogaSAmJiAxIDwgaS5sZW5ndGggJiYgciAmJiAhcyA/ICdibG9jaycgOiAnbm9uZScgfSk7CiAgICAgICAgICAgICAgICBzID0gdGhpcy5zLmhvc3QuaW50ZXJuYWxJMThuKCkubXVsdGk7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLm11bHRpSW5mby5odG1sKG8gPyBzLmluZm8gOiBzLm5vTXVsdGkpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLm11bHRpLnRvZ2dsZUNsYXNzKHRoaXMucy5jbGFzc2VzLm11bHRpTm9FZGl0LCAhbyksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmhvc3QuaW50ZXJuYWxNdWx0aUluZm8oKSwKICAgICAgICAgICAgICAgICAgICAhMAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChTLnByb3RvdHlwZS5fdHlwZUZuID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGVbaSAtIDFdID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgICAgICAgZS51bnNoaWZ0KHRoaXMucy5vcHRzKTsKICAgICAgICAgICAgICAgIHQgPSB0aGlzLnMudHlwZVt0XTsKICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdC5hcHBseSh0aGlzLnMuaG9zdCwgZSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5wcm90b3R5cGUuX2Vycm9yTm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbS5maWVsZEVycm9yOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKFMucHJvdG90eXBlLl9mb3JtYXQgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIGksIG47CiAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgID8gKEFycmF5LmlzQXJyYXkoZSkgJiYgKChuID0gKGkgPSBlLnNsaWNlKCkpLnNoaWZ0KCkpLCAoZSA9IFMuZm9ybWF0dGVyc1tuXS5hcHBseSh0aGlzLCBpKSkpLAogICAgICAgICAgICAgICAgICAgICAgZS5jYWxsKHRoaXMucy5ob3N0LCB0LCB0aGlzKSkKICAgICAgICAgICAgICAgICAgICA6IHQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUy5kZWZhdWx0cyA9IGUpLAogICAgICAgICAgICAoUy5mb3JtYXR0ZXJzID0ge30pLAogICAgICAgICAgICBTKTsKICAgIGZ1bmN0aW9uIFModCwgZSwgaSkgewogICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgcyA9IGkuaW50ZXJuYWxJMThuKCkubXVsdGksCiAgICAgICAgICAgIG8gPSB3LmV4dGVuZCghMCwge30sIFMuZGVmYXVsdHMsIHQpOwogICAgICAgIGlmICghUC5maWVsZFR5cGVzW28udHlwZV0pIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWRkaW5nIGZpZWxkIC0gdW5rbm93biBmaWVsZCB0eXBlICcgKyBvLnR5cGUpOwogICAgICAgICh0aGlzLnMgPSB7CiAgICAgICAgICAgIGNsYXNzZXM6IGUsCiAgICAgICAgICAgIGhvc3Q6IGksCiAgICAgICAgICAgIG11bHRpSWRzOiBbXSwKICAgICAgICAgICAgbXVsdGlWYWx1ZTogITEsCiAgICAgICAgICAgIG11bHRpVmFsdWVzOiB7fSwKICAgICAgICAgICAgbmFtZTogby5uYW1lLAogICAgICAgICAgICBvcHRzOiBvLAogICAgICAgICAgICBwcm9jZXNzaW5nOiAhMSwKICAgICAgICAgICAgdHlwZTogUC5maWVsZFR5cGVzW28udHlwZV0sCiAgICAgICAgfSksCiAgICAgICAgICAgIG8uaWQgfHwgKG8uaWQgPSAoJ0RURV9GaWVsZF8nICsgby5uYW1lKS5yZXBsYWNlKC8gL2csICdfJykpLAogICAgICAgICAgICAnJyA9PT0gby5kYXRhICYmIChvLmRhdGEgPSBvLm5hbWUpLAogICAgICAgICAgICAodGhpcy52YWxGcm9tRGF0YSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdShvLmRhdGEpKHQsICdlZGl0b3InKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICh0aGlzLnZhbFRvRGF0YSA9IF8oby5kYXRhKSk7CiAgICAgICAgdmFyIHIgPSB3KAogICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGUud3JhcHBlciArCiAgICAgICAgICAgICAgICAgICAgJyAnICsKICAgICAgICAgICAgICAgICAgICBlLnR5cGVQcmVmaXggKwogICAgICAgICAgICAgICAgICAgIG8udHlwZSArCiAgICAgICAgICAgICAgICAgICAgJyAnICsKICAgICAgICAgICAgICAgICAgICBlLm5hbWVQcmVmaXggKwogICAgICAgICAgICAgICAgICAgIG8ubmFtZSArCiAgICAgICAgICAgICAgICAgICAgJyAnICsKICAgICAgICAgICAgICAgICAgICBvLmNsYXNzTmFtZSArCiAgICAgICAgICAgICAgICAgICAgJyI+PGxhYmVsIGRhdGEtZHRlLWU9ImxhYmVsIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5sYWJlbCArCiAgICAgICAgICAgICAgICAgICAgJyIgZm9yPSInICsKICAgICAgICAgICAgICAgICAgICBQLnNhZmVJZChvLmlkKSArCiAgICAgICAgICAgICAgICAgICAgJyI+JyArCiAgICAgICAgICAgICAgICAgICAgby5sYWJlbCArCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgZGF0YS1kdGUtZT0ibXNnLWxhYmVsIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZVsnbXNnLWxhYmVsJ10gKwogICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgIG8ubGFiZWxJbmZvICsKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9sYWJlbD48ZGl2IGRhdGEtZHRlLWU9ImlucHV0IiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5pbnB1dCArCiAgICAgICAgICAgICAgICAgICAgJyI+PGRpdiBkYXRhLWR0ZS1lPSJpbnB1dC1jb250cm9sIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5pbnB1dENvbnRyb2wgKwogICAgICAgICAgICAgICAgICAgICciPjwvZGl2PjxkaXYgZGF0YS1kdGUtZT0ibXVsdGktdmFsdWUiIGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICBlLm11bHRpVmFsdWUgKwogICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgIHMudGl0bGUgKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBkYXRhLWR0ZS1lPSJtdWx0aS1pbmZvIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5tdWx0aUluZm8gKwogICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgIHMuaW5mbyArCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj48L2Rpdj48ZGl2IGRhdGEtZHRlLWU9Im1zZy1tdWx0aSIgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGUubXVsdGlSZXN0b3JlICsKICAgICAgICAgICAgICAgICAgICAnIj4nICsKICAgICAgICAgICAgICAgICAgICBzLnJlc3RvcmUgKwogICAgICAgICAgICAgICAgICAgICc8L2Rpdj48ZGl2IGRhdGEtZHRlLWU9Im1zZy1lcnJvciIgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGVbJ21zZy1lcnJvciddICsKICAgICAgICAgICAgICAgICAgICAnIj48L2Rpdj48ZGl2IGRhdGEtZHRlLWU9Im1zZy1tZXNzYWdlIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZVsnbXNnLW1lc3NhZ2UnXSArCiAgICAgICAgICAgICAgICAgICAgJyI+JyArCiAgICAgICAgICAgICAgICAgICAgby5tZXNzYWdlICsKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBkYXRhLWR0ZS1lPSJtc2ctaW5mbyIgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGVbJ21zZy1pbmZvJ10gKwogICAgICAgICAgICAgICAgICAgICciPicgKwogICAgICAgICAgICAgICAgICAgIG8uZmllbGRJbmZvICsKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PGRpdiBkYXRhLWR0ZS1lPSJmaWVsZC1wcm9jZXNzaW5nIiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5wcm9jZXNzaW5nICsKICAgICAgICAgICAgICAgICAgICAnIj48c3Bhbj48L3NwYW4+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgdCA9IHRoaXMuX3R5cGVGbignY3JlYXRlJywgbyksCiAgICAgICAgICAgIGkgPSBudWxsOwogICAgICAgIHQgJiYgdC5zaWRlICYmICgoaSA9IHQuc2lkZSksICh0ID0gdC5pbnB1dCkpLAogICAgICAgICAgICBudWxsICE9PSB0ID8gYSgnaW5wdXQtY29udHJvbCcsIHIpLnByZXBlbmQodCkgOiByLmNzcygnZGlzcGxheScsICdub25lJyksCiAgICAgICAgICAgICh0aGlzLmRvbSA9IHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogciwKICAgICAgICAgICAgICAgIGZpZWxkRXJyb3I6IGEoJ21zZy1lcnJvcicsIHIpLAogICAgICAgICAgICAgICAgZmllbGRJbmZvOiBhKCdtc2ctaW5mbycsIHIpLAogICAgICAgICAgICAgICAgZmllbGRNZXNzYWdlOiBhKCdtc2ctbWVzc2FnZScsIHIpLAogICAgICAgICAgICAgICAgaW5wdXRDb250cm9sOiBhKCdpbnB1dC1jb250cm9sJywgciksCiAgICAgICAgICAgICAgICBsYWJlbDogYSgnbGFiZWwnLCByKS5hcHBlbmQoaSksCiAgICAgICAgICAgICAgICBsYWJlbEluZm86IGEoJ21zZy1sYWJlbCcsIHIpLAogICAgICAgICAgICAgICAgbXVsdGk6IGEoJ211bHRpLXZhbHVlJywgciksCiAgICAgICAgICAgICAgICBtdWx0aUluZm86IGEoJ211bHRpLWluZm8nLCByKSwKICAgICAgICAgICAgICAgIG11bHRpUmV0dXJuOiBhKCdtc2ctbXVsdGknLCByKSwKICAgICAgICAgICAgICAgIHByb2Nlc3Npbmc6IGEoJ2ZpZWxkLXByb2Nlc3NpbmcnLCByKSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRoaXMuZG9tLm11bHRpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG4ucy5vcHRzLm11bHRpRWRpdGFibGUgJiYgIXIuaGFzQ2xhc3MoZS5kaXNhYmxlZCkgJiYgJ3JlYWRvbmx5JyAhPT0gby50eXBlICYmIChuLnZhbCgnJyksIG4uZm9jdXMoKSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0aGlzLmRvbS5tdWx0aVJldHVybi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBuLm11bHRpUmVzdG9yZSgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdy5lYWNoKHRoaXMucy50eXBlLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCAmJgogICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbltlXSAmJgogICAgICAgICAgICAgICAgICAgIChuW2VdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gKHQudW5zaGlmdChlKSwgbi5fdHlwZUZuLmFwcGx5KG4sIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IG4gOiB0OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgIH0KICAgIHZhciBaZSA9IHsgYWN0aW9uOiBudWxsLCBjbGFzc05hbWU6IG51bGwsIHRhYkluZGV4OiAwLCB0ZXh0OiBudWxsIH0sCiAgICAgICAgS2UgPSB7IGNsb3NlOiBmdW5jdGlvbiAoKSB7fSwgaW5pdDogZnVuY3Rpb24gKCkge30sIG5vZGU6IGZ1bmN0aW9uICgpIHt9LCBvcGVuOiBmdW5jdGlvbiAoKSB7fSB9LAogICAgICAgIGkgPSB3LmZuLmRhdGFUYWJsZS5BcGkucmVnaXN0ZXI7CiAgICBmdW5jdGlvbiBJKHQpIHsKICAgICAgICB0ID0gdC5jb250ZXh0WzBdOwogICAgICAgIHJldHVybiB0Lm9Jbml0LmVkaXRvciB8fCB0Ll9lZGl0b3I7CiAgICB9CiAgICBmdW5jdGlvbiBqKHQsIGUsIGksIG4pIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB2b2lkIDAgPT09IChlID0gZSB8fCB7fSkuYnV0dG9ucyAmJiAoZS5idXR0b25zID0gJ19iYXNpYycpLAogICAgICAgICAgICB2b2lkIDAgPT09IGUudGl0bGUgJiYgKGUudGl0bGUgPSB0LmkxOG5baV0udGl0bGUpLAogICAgICAgICAgICB2b2lkIDAgPT09IGUubWVzc2FnZSAmJgogICAgICAgICAgICAgICAgKCdyZW1vdmUnID09PSBpID8gKCh0ID0gdC5pMThuW2ldLmNvbmZpcm0pLCAoZS5tZXNzYWdlID0gMSAhPT0gbiA/IHQuXy5yZXBsYWNlKC8lZC8sIG4pIDogdFsxXSkpIDogKGUubWVzc2FnZSA9ICcnKSksCiAgICAgICAgICAgIGUKICAgICAgICApOwogICAgfQogICAgaSgnZWRpdG9yKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEkodGhpcyk7CiAgICB9KSwKICAgICAgICBpKCdyb3cuY3JlYXRlKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB2YXIgZSA9IEkodGhpcyk7CiAgICAgICAgICAgIHJldHVybiBlLmNyZWF0ZShqKGUsIHQsICdjcmVhdGUnKSksIHRoaXM7CiAgICAgICAgfSksCiAgICAgICAgaSgncm93KCkuZWRpdCgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSBJKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gZS5lZGl0KHRoaXNbMF1bMF0sIGooZSwgdCwgJ2VkaXQnKSksIHRoaXM7CiAgICAgICAgfSksCiAgICAgICAgaSgncm93cygpLmVkaXQoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBlID0gSSh0aGlzKTsKICAgICAgICAgICAgcmV0dXJuIGUuZWRpdCh0aGlzWzBdLCBqKGUsIHQsICdlZGl0JykpLCB0aGlzOwogICAgICAgIH0pLAogICAgICAgIGkoJ3JvdygpLmRlbGV0ZSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGUgPSBJKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gZS5yZW1vdmUodGhpc1swXVswXSwgaihlLCB0LCAncmVtb3ZlJywgMSkpLCB0aGlzOwogICAgICAgIH0pLAogICAgICAgIGkoJ3Jvd3MoKS5kZWxldGUoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBlID0gSSh0aGlzKTsKICAgICAgICAgICAgcmV0dXJuIGUucmVtb3ZlKHRoaXNbMF0sIGooZSwgdCwgJ3JlbW92ZScsIHRoaXNbMF0ubGVuZ3RoKSksIHRoaXM7CiAgICAgICAgfSksCiAgICAgICAgaSgnY2VsbCgpLmVkaXQoKScsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHJldHVybiB0ID8gdy5pc1BsYWluT2JqZWN0KHQpICYmICgoZSA9IHQpLCAodCA9ICdpbmxpbmUnKSkgOiAodCA9ICdpbmxpbmUnKSwgSSh0aGlzKVt0XSh0aGlzWzBdWzBdLCBlKSwgdGhpczsKICAgICAgICB9KSwKICAgICAgICBpKCdjZWxscygpLmVkaXQoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiBJKHRoaXMpLmJ1YmJsZSh0aGlzWzBdLCB0KSwgdGhpczsKICAgICAgICB9KSwKICAgICAgICBpKCdmaWxlKCknLCBDdCksCiAgICAgICAgaSgnZmlsZXMoKScsIGt0KSwKICAgICAgICB3KHkpLm9uKCd4aHIuZHQnLCBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAnZHQnID09PSB0Lm5hbWVzcGFjZSAmJgogICAgICAgICAgICAgICAgaSAmJgogICAgICAgICAgICAgICAgaS5maWxlcyAmJgogICAgICAgICAgICAgICAgdy5lYWNoKGkuZmlsZXMsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgUC5maWxlc1t0XSB8fCAoUC5maWxlc1t0XSA9IHt9KSwgdy5leHRlbmQoUC5maWxlc1t0XSwgZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIHZhciBQLAogICAgICAgIGkgPSB3LmZuLmRhdGFUYWJsZS5leHQuYnV0dG9uczsKICAgIGlmICgKICAgICAgICAody5leHRlbmQoaSwgewogICAgICAgICAgICBjcmVhdGU6IHsKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLmVkaXRvcjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcoITApLAogICAgICAgICAgICAgICAgICAgICAgICBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKCdwcmVPcGVuJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucHJvY2Vzc2luZyghMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmV4dGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogbi5mb3JtQnV0dG9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG4uZm9ybU1lc3NhZ2UgfHwgby5pMThuLmNyZWF0ZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdDogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbi5mb3JtVGl0bGUgfHwgby5pMThuLmNyZWF0ZS50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5mb3JtT3B0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b25zLWNyZWF0ZScsCiAgICAgICAgICAgICAgICBlZGl0b3I6IG51bGwsCiAgICAgICAgICAgICAgICBmb3JtQnV0dG9uczogewogICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4uY3JlYXRlLnN1Ym1pdDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZvcm1NZXNzYWdlOiBudWxsLAogICAgICAgICAgICAgICAgZm9ybU9wdGlvbnM6IHt9LAogICAgICAgICAgICAgICAgZm9ybVRpdGxlOiBudWxsLAogICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLmNyZWF0ZScsIGkuZWRpdG9yLmkxOG4uY3JlYXRlLmJ1dHRvbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmVhdGVJbmxpbmU6IHsKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsKICAgICAgICAgICAgICAgICAgICBuLmVkaXRvci5pbmxpbmVDcmVhdGUobi5wb3NpdGlvbiwgbi5mb3JtT3B0aW9ucyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1jcmVhdGUnLAogICAgICAgICAgICAgICAgZWRpdG9yOiBudWxsLAogICAgICAgICAgICAgICAgZm9ybUJ1dHRvbnM6IHsKICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0KCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuLmNyZWF0ZS5zdWJtaXQ7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmb3JtT3B0aW9uczoge30sCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignYnV0dG9ucy5jcmVhdGUnLCBpLmVkaXRvci5pMThuLmNyZWF0ZS5idXR0b24pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdDogewogICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCwgZSwgaSwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG4uZWRpdG9yLAogICAgICAgICAgICAgICAgICAgICAgICByID0gZS5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pLmluZGV4ZXMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGUuY29sdW1ucyh7IHNlbGVjdGVkOiAhMCB9KS5pbmRleGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLmNlbGxzKHsgc2VsZWN0ZWQ6ICEwIH0pLmluZGV4ZXMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGEubGVuZ3RoIHx8IGUubGVuZ3RoID8geyBjZWxsczogZSwgY29sdW1uczogYSwgcm93czogciB9IDogcjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcoITApLAogICAgICAgICAgICAgICAgICAgICAgICBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKCdwcmVPcGVuJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucHJvY2Vzc2luZyghMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVkaXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmV4dGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogbi5mb3JtQnV0dG9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG4uZm9ybU1lc3NhZ2UgfHwgby5pMThuLmVkaXQubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3Q6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG4uZm9ybVRpdGxlIHx8IG8uaTE4bi5lZGl0LnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmZvcm1PcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtZWRpdCcsCiAgICAgICAgICAgICAgICBlZGl0b3I6IG51bGwsCiAgICAgICAgICAgICAgICBleHRlbmQ6ICdzZWxlY3RlZCcsCiAgICAgICAgICAgICAgICBmb3JtQnV0dG9uczogewogICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4uZWRpdC5zdWJtaXQ7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmb3JtTWVzc2FnZTogbnVsbCwKICAgICAgICAgICAgICAgIGZvcm1PcHRpb25zOiB7fSwKICAgICAgICAgICAgICAgIGZvcm1UaXRsZTogbnVsbCwKICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignYnV0dG9ucy5lZGl0JywgaS5lZGl0b3IuaTE4bi5lZGl0LmJ1dHRvbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmU6IHsKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuLmVkaXRvcjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcoITApLAogICAgICAgICAgICAgICAgICAgICAgICBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKCdwcmVPcGVuJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucHJvY2Vzc2luZyghMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJvd3MoeyBzZWxlY3RlZDogITAgfSkuaW5kZXhlcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuZXh0ZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGJ1dHRvbnM6IG4uZm9ybUJ1dHRvbnMsIG1lc3NhZ2U6IG4uZm9ybU1lc3NhZ2UsIG5lc3Q6ICEwLCB0aXRsZTogbi5mb3JtVGl0bGUgfHwgby5pMThuLnJlbW92ZS50aXRsZSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmZvcm1PcHRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtcmVtb3ZlJywKICAgICAgICAgICAgICAgIGVkaXRvcjogbnVsbCwKICAgICAgICAgICAgICAgIGV4dGVuZDogJ3NlbGVjdGVkJywKICAgICAgICAgICAgICAgIGZvcm1CdXR0b25zOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bi5yZW1vdmUuc3VibWl0OwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9ybU1lc3NhZ2U6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgKGUgPSBlLnJvd3MoeyBzZWxlY3RlZDogITAgfSkuaW5kZXhlcygpKSwgKHQgPSB0LmkxOG4ucmVtb3ZlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCdzdHJpbmcnID09IHR5cGVvZiB0LmNvbmZpcm0gPyB0LmNvbmZpcm0gOiB0LmNvbmZpcm1bZS5sZW5ndGhdIHx8IHQuY29uZmlybS5fKS5yZXBsYWNlKC8lZC9nLCBlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9ybU9wdGlvbnM6IHt9LAogICAgICAgICAgICAgICAgZm9ybVRpdGxlOiBudWxsLAogICAgICAgICAgICAgICAgbGltaXRUbzogWydyb3dzJ10sCiAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodCwgZSwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ2J1dHRvbnMucmVtb3ZlJywgaS5lZGl0b3IuaTE4bi5yZW1vdmUuYnV0dG9uKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgKGkuZWRpdFNpbmdsZSA9IHcuZXh0ZW5kKHt9LCBpLmVkaXQpKSwKICAgICAgICAoaS5lZGl0U2luZ2xlLmV4dGVuZCA9ICdzZWxlY3RlZFNpbmdsZScpLAogICAgICAgIChpLnJlbW92ZVNpbmdsZSA9IHcuZXh0ZW5kKHt9LCBpLnJlbW92ZSkpLAogICAgICAgIChpLnJlbW92ZVNpbmdsZS5leHRlbmQgPSAnc2VsZWN0ZWRTaW5nbGUnKSwKICAgICAgICByICYmIHIudmVyc2lvbkNoZWNrICYmIHIudmVyc2lvbkNoZWNrKCcxLjEwLjIwJykpCiAgICApCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKE4ucHJvdG90eXBlLmludGVybmFsRXZlbnQgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdGhpcy5fZXZlbnQodCwgZSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoTi5wcm90b3R5cGUuaW50ZXJuYWxJMThuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaTE4bjsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChOLnByb3RvdHlwZS5pbnRlcm5hbE11bHRpSW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tdWx0aUluZm8oKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChOLnByb3RvdHlwZS5pbnRlcm5hbFNldHRpbmdzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuczsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChOLmZpZWxkVHlwZXMgPSB7CiAgICAgICAgICAgICAgICBjaGVja2JveDogcywKICAgICAgICAgICAgICAgIGRhdGF0YWJsZTogQSwKICAgICAgICAgICAgICAgIGRhdGV0aW1lOiBYZSwKICAgICAgICAgICAgICAgIGhpZGRlbjogcWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogR2UsCiAgICAgICAgICAgICAgICByYWRpbzogRiwKICAgICAgICAgICAgICAgIHJlYWRvbmx5OiBXZSwKICAgICAgICAgICAgICAgIHNlbGVjdDogbiwKICAgICAgICAgICAgICAgIHRleHQ6IHplLAogICAgICAgICAgICAgICAgdGV4dGFyZWE6IEplLAogICAgICAgICAgICAgICAgdXBsb2FkOiAkZSwKICAgICAgICAgICAgICAgIHVwbG9hZE1hbnk6IE8sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoTi5maWxlcyA9IHt9KSwKICAgICAgICAgICAgKE4udmVyc2lvbiA9ICcyLjMuMicpLAogICAgICAgICAgICAoTi5jbGFzc2VzID0gRyksCiAgICAgICAgICAgIChOLkZpZWxkID0gZSksCiAgICAgICAgICAgIChOLkRhdGVUaW1lID0gbnVsbCksCiAgICAgICAgICAgIChOLmVycm9yID0gWXQpLAogICAgICAgICAgICAoTi5wYWlycyA9IHRlKSwKICAgICAgICAgICAgKE4uZmFjdG9yeSA9IGllKSwKICAgICAgICAgICAgKE4udXBsb2FkID0gZWUpLAogICAgICAgICAgICAoTi5kZWZhdWx0cyA9IFIpLAogICAgICAgICAgICAoTi5tb2RlbHMgPSB7IGJ1dHRvbjogWmUsIGRpc3BsYXlDb250cm9sbGVyOiBLZSwgZmllbGRUeXBlOiBVZSwgZm9ybU9wdGlvbnM6IHQsIHNldHRpbmdzOiBCIH0pLAogICAgICAgICAgICAoTi5kYXRhU291cmNlcyA9IHsgZGF0YVRhYmxlOiB2LCBodG1sOiBiIH0pLAogICAgICAgICAgICAoTi5kaXNwbGF5ID0geyBlbnZlbG9wZTogVCwgbGlnaHRib3g6IHggfSksCiAgICAgICAgICAgIChOLnNhZmVJZCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSAoZSA9ICcnKSAmJiAoZSA9ICcjJyksICdzdHJpbmcnID09IHR5cGVvZiAodCA9IHQpID8gZSArIHQucmVwbGFjZSgvXC4vZywgJy0nKSA6IGUgKyB0OwogICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoUCA9IE4pLAogICAgICAgICAgICAoci5FZGl0b3IgPSBQKSwKICAgICAgICAgICAgKHcuZm4uRGF0YVRhYmxlLkVkaXRvciA9IFApLAogICAgICAgICAgICByLkRhdGVUaW1lICYmIChQLkRhdGVUaW1lID0gci5EYXRlVGltZSksCiAgICAgICAgICAgIHIuZXh0LmVkaXRvckZpZWxkcyAmJiB3LmV4dGVuZChQLmZpZWxkVHlwZXMsIHIuZXh0LmVkaXRvckZpZWxkcyksCiAgICAgICAgICAgIChyLmV4dC5lZGl0b3JGaWVsZHMgPSBQLmZpZWxkVHlwZXMpLAogICAgICAgICAgICByLkVkaXRvcgogICAgICAgICk7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0VkaXRvciByZXF1aXJlcyBEYXRhVGFibGVzIDEuMTAuMjAgb3IgbmV3ZXInKTsKICAgIGZ1bmN0aW9uIE4odCwgZSkgewogICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICBpZiAoCiAgICAgICAgICAgICgodGhpcy5hZGQgPSBudCksCiAgICAgICAgICAgICh0aGlzLmFqYXggPSBzdCksCiAgICAgICAgICAgICh0aGlzLmJhY2tncm91bmQgPSBvdCksCiAgICAgICAgICAgICh0aGlzLmJsdXIgPSBydCksCiAgICAgICAgICAgICh0aGlzLmJ1YmJsZSA9IGF0KSwKICAgICAgICAgICAgKHRoaXMuYnViYmxlTG9jYXRpb24gPSBsdCksCiAgICAgICAgICAgICh0aGlzLmJ1YmJsZVBvc2l0aW9uID0gZHQpLAogICAgICAgICAgICAodGhpcy5idXR0b25zID0gdXQpLAogICAgICAgICAgICAodGhpcy5jbGVhciA9IGN0KSwKICAgICAgICAgICAgKHRoaXMuY2xvc2UgPSBwdCksCiAgICAgICAgICAgICh0aGlzLmNyZWF0ZSA9IGZ0KSwKICAgICAgICAgICAgKHRoaXMudW5kZXBlbmRlbnQgPSBodCksCiAgICAgICAgICAgICh0aGlzLmRlcGVuZGVudCA9IG10KSwKICAgICAgICAgICAgKHRoaXMuZGVzdHJveSA9IHZ0KSwKICAgICAgICAgICAgKHRoaXMuZGlzYWJsZSA9IGJ0KSwKICAgICAgICAgICAgKHRoaXMuZGlzcGxheSA9IF90KSwKICAgICAgICAgICAgKHRoaXMuZGlzcGxheWVkID0geXQpLAogICAgICAgICAgICAodGhpcy5kaXNwbGF5Tm9kZSA9IGd0KSwKICAgICAgICAgICAgKHRoaXMuZWRpdCA9IHd0KSwKICAgICAgICAgICAgKHRoaXMuZW5hYmxlID0gRXQpLAogICAgICAgICAgICAodGhpcy5lcnJvciA9IFR0KSwKICAgICAgICAgICAgKHRoaXMuZmllbGQgPSBEdCksCiAgICAgICAgICAgICh0aGlzLmZpZWxkcyA9IHh0KSwKICAgICAgICAgICAgKHRoaXMuZmlsZSA9IEN0KSwKICAgICAgICAgICAgKHRoaXMuZmlsZXMgPSBrdCksCiAgICAgICAgICAgICh0aGlzLmdldCA9IEZ0KSwKICAgICAgICAgICAgKHRoaXMuaGlkZSA9IE90KSwKICAgICAgICAgICAgKHRoaXMuaWRzID0gQXQpLAogICAgICAgICAgICAodGhpcy5pbkVycm9yID0gU3QpLAogICAgICAgICAgICAodGhpcy5pbmxpbmUgPSBJdCksCiAgICAgICAgICAgICh0aGlzLmlubGluZUNyZWF0ZSA9IGp0KSwKICAgICAgICAgICAgKHRoaXMubWVzc2FnZSA9IFB0KSwKICAgICAgICAgICAgKHRoaXMubW9kZSA9IE50KSwKICAgICAgICAgICAgKHRoaXMubW9kaWZpZXIgPSBSdCksCiAgICAgICAgICAgICh0aGlzLm11bHRpR2V0ID0gQnQpLAogICAgICAgICAgICAodGhpcy5tdWx0aVNldCA9IEx0KSwKICAgICAgICAgICAgKHRoaXMubm9kZSA9IE10KSwKICAgICAgICAgICAgKHRoaXMub2ZmID0gVXQpLAogICAgICAgICAgICAodGhpcy5vbiA9IFZ0KSwKICAgICAgICAgICAgKHRoaXMub25lID0gSHQpLAogICAgICAgICAgICAodGhpcy5vcGVuID0gcXQpLAogICAgICAgICAgICAodGhpcy5vcmRlciA9IFd0KSwKICAgICAgICAgICAgKHRoaXMucmVtb3ZlID0genQpLAogICAgICAgICAgICAodGhpcy5zZXQgPSBHdCksCiAgICAgICAgICAgICh0aGlzLnNob3cgPSBKdCksCiAgICAgICAgICAgICh0aGlzLnN1Ym1pdCA9IFh0KSwKICAgICAgICAgICAgKHRoaXMudGFibGUgPSAkdCksCiAgICAgICAgICAgICh0aGlzLnRlbXBsYXRlID0gUXQpLAogICAgICAgICAgICAodGhpcy50aXRsZSA9IFp0KSwKICAgICAgICAgICAgKHRoaXMudmFsID0gS3QpLAogICAgICAgICAgICAodGhpcy5fYWN0aW9uQ2xhc3MgPSBvZSksCiAgICAgICAgICAgICh0aGlzLl9hamF4ID0gcmUpLAogICAgICAgICAgICAodGhpcy5fYW5pbWF0ZSA9IGFlKSwKICAgICAgICAgICAgKHRoaXMuX2Fzc2VtYmxlTWFpbiA9IGxlKSwKICAgICAgICAgICAgKHRoaXMuX2JsdXIgPSBkZSksCiAgICAgICAgICAgICh0aGlzLl9jbGVhckR5bmFtaWNJbmZvID0gdWUpLAogICAgICAgICAgICAodGhpcy5fY2xvc2UgPSBjZSksCiAgICAgICAgICAgICh0aGlzLl9jbG9zZVJlZyA9IHBlKSwKICAgICAgICAgICAgKHRoaXMuX2NydWRBcmdzID0gZmUpLAogICAgICAgICAgICAodGhpcy5fZGF0YVNvdXJjZSA9IGhlKSwKICAgICAgICAgICAgKHRoaXMuX2Rpc3BsYXlSZW9yZGVyID0gbWUpLAogICAgICAgICAgICAodGhpcy5fZWRpdCA9IHZlKSwKICAgICAgICAgICAgKHRoaXMuX2V2ZW50ID0gYmUpLAogICAgICAgICAgICAodGhpcy5fZXZlbnROYW1lID0gX2UpLAogICAgICAgICAgICAodGhpcy5fZmllbGRGcm9tTm9kZSA9IHllKSwKICAgICAgICAgICAgKHRoaXMuX2ZpZWxkTmFtZXMgPSBnZSksCiAgICAgICAgICAgICh0aGlzLl9mb2N1cyA9IHdlKSwKICAgICAgICAgICAgKHRoaXMuX2Zvcm1PcHRpb25zID0gRWUpLAogICAgICAgICAgICAodGhpcy5faW5saW5lID0gVGUpLAogICAgICAgICAgICAodGhpcy5faW5wdXRUcmlnZ2VyID0gRGUpLAogICAgICAgICAgICAodGhpcy5fb3B0aW9uc1VwZGF0ZSA9IHhlKSwKICAgICAgICAgICAgKHRoaXMuX21lc3NhZ2UgPSBDZSksCiAgICAgICAgICAgICh0aGlzLl9tdWx0aUluZm8gPSBrZSksCiAgICAgICAgICAgICh0aGlzLl9uZXN0ZWRDbG9zZSA9IEZlKSwKICAgICAgICAgICAgKHRoaXMuX25lc3RlZE9wZW4gPSBPZSksCiAgICAgICAgICAgICh0aGlzLl9wb3N0b3BlbiA9IEFlKSwKICAgICAgICAgICAgKHRoaXMuX3ByZW9wZW4gPSBTZSksCiAgICAgICAgICAgICh0aGlzLl9wcm9jZXNzaW5nID0gSWUpLAogICAgICAgICAgICAodGhpcy5fbm9Qcm9jZXNzaW5nID0gamUpLAogICAgICAgICAgICAodGhpcy5fc3VibWl0ID0gUGUpLAogICAgICAgICAgICAodGhpcy5fc3VibWl0VGFibGUgPSBOZSksCiAgICAgICAgICAgICh0aGlzLl9zdWJtaXRTdWNjZXNzID0gUmUpLAogICAgICAgICAgICAodGhpcy5fc3VibWl0RXJyb3IgPSBCZSksCiAgICAgICAgICAgICh0aGlzLl90aWR5ID0gTGUpLAogICAgICAgICAgICAodGhpcy5fd2Vha0luQXJyYXkgPSBNZSksCiAgICAgICAgICAgIE4uZmFjdG9yeSh0LCBlKSkKICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBOOwogICAgICAgIHRoaXMgaW5zdGFuY2VvZiBOIHx8IGFsZXJ0KCJEYXRhVGFibGVzIEVkaXRvciBtdXN0IGJlIGluaXRpYWxpc2VkIGFzIGEgJ25ldycgaW5zdGFuY2UiKSwKICAgICAgICAgICAgKHQgPSB3LmV4dGVuZCghMCwge30sIE4uZGVmYXVsdHMsIHQpKSwKICAgICAgICAgICAgKHRoaXMuYyA9IHQpLAogICAgICAgICAgICAodGhpcy5zID0gdy5leHRlbmQoITAsIHt9LCBOLm1vZGVscy5zZXR0aW5ncywgewogICAgICAgICAgICAgICAgYWN0aW9uTmFtZTogdC5hY3Rpb25OYW1lLAogICAgICAgICAgICAgICAgYWpheDogdC5hamF4LAogICAgICAgICAgICAgICAgZm9ybU9wdGlvbnM6IHQuZm9ybU9wdGlvbnMsCiAgICAgICAgICAgICAgICBpZFNyYzogdC5pZFNyYywKICAgICAgICAgICAgICAgIHRhYmxlOiB0LmRvbVRhYmxlIHx8IHQudGFibGUsCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdC50ZW1wbGF0ZSA/IHcodC50ZW1wbGF0ZSkuZGV0YWNoKCkgOiBudWxsLAogICAgICAgICAgICB9KSksCiAgICAgICAgICAgICh0aGlzLmNsYXNzZXMgPSB3LmV4dGVuZCghMCwge30sIE4uY2xhc3NlcykpLAogICAgICAgICAgICAodGhpcy5pMThuID0gdC5pMThuKSwKICAgICAgICAgICAgTi5tb2RlbHMuc2V0dGluZ3MudW5pcXVlKys7CiAgICAgICAgdmFyIG4gPSB0aGlzLAogICAgICAgICAgICBlID0gdGhpcy5jbGFzc2VzLAogICAgICAgICAgICBpID0gdygKICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICBlLndyYXBwZXIgKwogICAgICAgICAgICAgICAgICAgICciPjxkaXYgZGF0YS1kdGUtZT0icHJvY2Vzc2luZyIgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGUucHJvY2Vzc2luZy5pbmRpY2F0b3IgKwogICAgICAgICAgICAgICAgICAgICciPjxzcGFuPjwvc3Bhbj48L2Rpdj48ZGl2IGRhdGEtZHRlLWU9ImJvZHkiIGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICBlLmJvZHkud3JhcHBlciArCiAgICAgICAgICAgICAgICAgICAgJyI+PGRpdiBkYXRhLWR0ZS1lPSJib2R5X2NvbnRlbnQiIGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICBlLmJvZHkuY29udGVudCArCiAgICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+PC9kaXY+PGRpdiBkYXRhLWR0ZS1lPSJmb290IiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5mb290ZXIud3JhcHBlciArCiAgICAgICAgICAgICAgICAgICAgJyI+PGRpdiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5mb290ZXIuY29udGVudCArCiAgICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbyA9IHcoCiAgICAgICAgICAgICAgICAnPGZvcm0gZGF0YS1kdGUtZT0iZm9ybSIgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgIGUuZm9ybS50YWcgKwogICAgICAgICAgICAgICAgICAgICciPjxkaXYgZGF0YS1kdGUtZT0iZm9ybV9jb250ZW50IiBjbGFzcz0iJyArCiAgICAgICAgICAgICAgICAgICAgZS5mb3JtLmNvbnRlbnQgKwogICAgICAgICAgICAgICAgICAgICciPjwvZGl2PjwvZm9ybT4nLAogICAgICAgICAgICApOwogICAgICAgIGlmICgKICAgICAgICAgICAgKCh0aGlzLmRvbSA9IHsKICAgICAgICAgICAgICAgIGJvZHk6IGEoJ2JvZHknLCBpKVswXSwKICAgICAgICAgICAgICAgIGJvZHlDb250ZW50OiBhKCdib2R5X2NvbnRlbnQnLCBpKVswXSwKICAgICAgICAgICAgICAgIGJ1dHRvbnM6IHcoJzxkaXYgZGF0YS1kdGUtZT0iZm9ybV9idXR0b25zIiBjbGFzcz0iJyArIGUuZm9ybS5idXR0b25zICsgJyI+PC9kaXY+JylbMF0sCiAgICAgICAgICAgICAgICBmb290ZXI6IGEoJ2Zvb3QnLCBpKVswXSwKICAgICAgICAgICAgICAgIGZvcm06IG9bMF0sCiAgICAgICAgICAgICAgICBmb3JtQ29udGVudDogYSgnZm9ybV9jb250ZW50JywgbylbMF0sCiAgICAgICAgICAgICAgICBmb3JtRXJyb3I6IHcoJzxkaXYgZGF0YS1kdGUtZT0iZm9ybV9lcnJvciIgY2xhc3M9IicgKyBlLmZvcm0uZXJyb3IgKyAnIj48L2Rpdj4nKVswXSwKICAgICAgICAgICAgICAgIGZvcm1JbmZvOiB3KCc8ZGl2IGRhdGEtZHRlLWU9ImZvcm1faW5mbyIgY2xhc3M9IicgKyBlLmZvcm0uaW5mbyArICciPjwvZGl2PicpWzBdLAogICAgICAgICAgICAgICAgaGVhZGVyOiB3KCc8ZGl2IGRhdGEtZHRlLWU9ImhlYWQiIGNsYXNzPSInICsgZS5oZWFkZXIud3JhcHBlciArICciPjxkaXYgY2xhc3M9IicgKyBlLmhlYWRlci5jb250ZW50ICsgJyI+PC9kaXY+PC9kaXY+JylbMF0sCiAgICAgICAgICAgICAgICBwcm9jZXNzaW5nOiBhKCdwcm9jZXNzaW5nJywgaSlbMF0sCiAgICAgICAgICAgICAgICB3cmFwcGVyOiBpWzBdLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdy5lYWNoKHQuZXZlbnRzLCBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgbi5vbih0LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IFtdLCBlID0gMDsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgdFtlXSA9IGFyZ3VtZW50c1tlXTsKICAgICAgICAgICAgICAgICAgICBpLmFwcGx5KG4sIHQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0aGlzLmRvbSwKICAgICAgICAgICAgdC5maWVsZHMgJiYgdGhpcy5hZGQodC5maWVsZHMpLAogICAgICAgICAgICB3KHkpCiAgICAgICAgICAgICAgICAub24oJ2luaXQuZHQuZHRlJyArIHRoaXMucy51bmlxdWUsIGZ1bmN0aW9uICh0LCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBzLnMudGFibGU7CiAgICAgICAgICAgICAgICAgICAgbiAmJiAoKG4gPSBuZXcgci5BcGkobikpLCBlLm5UYWJsZSA9PT0gbi50YWJsZSgpLm5vZGUoKSkgJiYgKGUuX2VkaXRvciA9IHMpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5vbignaTE4bi5kdC5kdGUnICsgdGhpcy5zLnVuaXF1ZSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHMucy50YWJsZTsKICAgICAgICAgICAgICAgICAgICBpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoaSA9IG5ldyByLkFwaShpKSksIGUublRhYmxlID09PSBpLnRhYmxlKCkubm9kZSgpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBlLm9MYW5ndWFnZS5lZGl0b3IgJiYKICAgICAgICAgICAgICAgICAgICAgICAgdy5leHRlbmQoITAsIHMuaTE4biwgZS5vTGFuZ3VhZ2UuZWRpdG9yKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAub24oJ3hoci5kdC5kdGUnICsgdGhpcy5zLnVuaXF1ZSwgZnVuY3Rpb24gKHQsIGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHMucy50YWJsZTsKICAgICAgICAgICAgICAgICAgICBuICYmICgobiA9IG5ldyByLkFwaShuKSksIGUublRhYmxlID09PSBuLnRhYmxlKCkubm9kZSgpKSAmJiBzLl9vcHRpb25zVXBkYXRlKGkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICFOLmRpc3BsYXlbdC5kaXNwbGF5XSkKICAgICAgICApCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZGlzcGxheSBjb250cm9sbGVyICcgKyB0LmRpc3BsYXkpOwogICAgICAgICh0aGlzLnMuZGlzcGxheUNvbnRyb2xsZXIgPSBOLmRpc3BsYXlbdC5kaXNwbGF5XS5pbml0KHRoaXMpKSwgdGhpcy5fZXZlbnQoJ2luaXRDb21wbGV0ZScsIFtdKSwgdyh5KS50cmlnZ2VyKCdpbml0RWRpdG9yJywgW3RoaXNdKTsKICAgIH0KfSk7CgovKiEgRGF0YVRhYmxlcyBzdHlsaW5nIGludGVncmF0aW9uIGZvciBEYXRhVGFibGVzJyBFZGl0b3IKICogwqlTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKi8KIShmdW5jdGlvbiAobikgewogICAgdmFyIGQsIG87CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0LWR0JywgJ2RhdGF0YWJsZXMubmV0LWVkaXRvciddLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiBuKGUsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGQgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAobyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgdC5mbi5kYXRhVGFibGUgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQtZHQnKShlLCB0KSwgdC5mbi5kYXRhVGFibGUuRWRpdG9yIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0LWVkaXRvcicpKGUsIHQpOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGUgfHwgd2luZG93KSwgKHQgPSB0IHx8IGQoZSkpLCBvKGUsIHQpLCBuKHQsIDAsIGUuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChvKHdpbmRvdywgZCksIChtb2R1bGUuZXhwb3J0cyA9IG4oZCwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiBuKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gZS5mbi5kYXRhVGFibGUuRWRpdG9yOwp9KTsKCi8qISBCdXR0b25zIGZvciBEYXRhVGFibGVzIDMuMS4yCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohKGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgbywgaTsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnXSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gZSh0LCB3aW5kb3csIGRvY3VtZW50KTsKICAgICAgICAgIH0pCiAgICAgICAgOiAnb2JqZWN0JyA9PSB0eXBlb2YgZXhwb3J0cwogICAgICAgID8gKChvID0gcmVxdWlyZSgnanF1ZXJ5JykpLAogICAgICAgICAgKGkgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgIG4uZm4uZGF0YVRhYmxlIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0JykodCwgbik7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdCB8fCB3aW5kb3cpLCAobiA9IG4gfHwgbyh0KSksIGkodCwgbiksIGUobiwgdCwgdC5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKGkod2luZG93LCBvKSwgKG1vZHVsZS5leHBvcnRzID0gZShvLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IGUoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKHgsIGcsIG0pIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBlID0geC5mbi5kYXRhVGFibGUsCiAgICAgICAgbyA9IDAsCiAgICAgICAgQyA9IDAsCiAgICAgICAgdyA9IGUuZXh0LmJ1dHRvbnMsCiAgICAgICAgaSA9IG51bGw7CiAgICBmdW5jdGlvbiB2KHQsIG4sIGUpIHsKICAgICAgICB4LmZuLmFuaW1hdGUgPyB0LnN0b3AoKS5mYWRlSW4obiwgZSkgOiAodC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKSwgZSAmJiBlLmNhbGwodCkpOwogICAgfQogICAgZnVuY3Rpb24geSh0LCBuLCBlKSB7CiAgICAgICAgeC5mbi5hbmltYXRlID8gdC5zdG9wKCkuZmFkZU91dChuLCBlKSA6ICh0LmNzcygnZGlzcGxheScsICdub25lJyksIGUgJiYgZS5jYWxsKHQpKTsKICAgIH0KICAgIGZ1bmN0aW9uIF8obiwgdCkgewogICAgICAgIGlmICghZS52ZXJzaW9uQ2hlY2soJzInKSkgdGhyb3cgJ1dhcm5pbmc6IEJ1dHRvbnMgcmVxdWlyZXMgRGF0YVRhYmxlcyAyIG9yIG5ld2VyJzsKICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfKHQsIG4pLmNvbnRhaW5lcigpOwogICAgICAgICAgICB9OwogICAgICAgICEwID09PSAodCA9IHZvaWQgMCA9PT0gdCA/IHt9IDogdCkgJiYgKHQgPSB7fSksCiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgKHQgPSB7IGJ1dHRvbnM6IHQgfSksCiAgICAgICAgICAgICh0aGlzLmMgPSB4LmV4dGVuZCghMCwge30sIF8uZGVmYXVsdHMsIHQpKSwKICAgICAgICAgICAgdC5idXR0b25zICYmICh0aGlzLmMuYnV0dG9ucyA9IHQuYnV0dG9ucyksCiAgICAgICAgICAgICh0aGlzLnMgPSB7IGR0OiBuZXcgZS5BcGkobiksIGJ1dHRvbnM6IFtdLCBsaXN0ZW5LZXlzOiAnJywgbmFtZXNwYWNlOiAnZHRiJyArIG8rKyB9KSwKICAgICAgICAgICAgKHRoaXMuZG9tID0geyBjb250YWluZXI6IHgoJzwnICsgdGhpcy5jLmRvbS5jb250YWluZXIudGFnICsgJy8+JykuYWRkQ2xhc3ModGhpcy5jLmRvbS5jb250YWluZXIuY2xhc3NOYW1lKSB9KSwKICAgICAgICAgICAgdGhpcy5fY29uc3RydWN0b3IoKTsKICAgIH0KICAgIHguZXh0ZW5kKF8ucHJvdG90eXBlLCB7CiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICB0ID0gdGhpcy5fbm9kZVRvQnV0dG9uKHQpOwogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBuID8gdC5jb25mLmFjdGlvbiA6ICgodC5jb25mLmFjdGlvbiA9IG4pLCB0aGlzKTsKICAgICAgICB9LAogICAgICAgIGFjdGl2ZTogZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9ub2RlVG9CdXR0b24odCksCiAgICAgICAgICAgICAgICBlID0gdGhpcy5jLmRvbS5idXR0b24uYWN0aXZlLAogICAgICAgICAgICAgICAgbyA9IHgodC5ub2RlKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHQuaW5Db2xsZWN0aW9uICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jLmRvbS5jb2xsZWN0aW9uLmJ1dHRvbiAmJgogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdGhpcy5jLmRvbS5jb2xsZWN0aW9uLmJ1dHRvbi5hY3RpdmUgJiYKICAgICAgICAgICAgICAgICAgICAoZSA9IHRoaXMuYy5kb20uY29sbGVjdGlvbi5idXR0b24uYWN0aXZlKSwKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiA/IG8uaGFzQ2xhc3MoZSkgOiAoby50b2dnbGVDbGFzcyhlLCB2b2lkIDAgPT09IG4gfHwgbiksIHRoaXMpCiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBhZGQ6IGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpcy5zLmJ1dHRvbnM7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IG4uc3BsaXQoJy0nKSwgcyA9IHRoaXMucywgciA9IDAsIGEgPSBpLmxlbmd0aCAtIDE7IHIgPCBhOyByKyspIHMgPSBzLmJ1dHRvbnNbK2lbcl1dOwogICAgICAgICAgICAgICAgKG8gPSBzLmJ1dHRvbnMpLCAobiA9ICtpW2kubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICAgICAgICB0LAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdCA/IHQuc3BsaXQgOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgKHZvaWQgMCA9PT0gdCB8fCB2b2lkIDAgPT09IHQuc3BsaXQgfHwgMCA9PT0gdC5zcGxpdC5sZW5ndGgpICYmIHZvaWQgMCAhPT0gcywKICAgICAgICAgICAgICAgICAgICAhMSwKICAgICAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICh2b2lkIDAgIT09IGUgJiYgITAgIT09IGUpIHx8IHRoaXMuX2RyYXcoKSwKICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIGNvbGxlY3Rpb25SZWJ1aWxkOiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICB2YXIgZSA9IHRoaXMuX25vZGVUb0J1dHRvbih0KTsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IGUuYnV0dG9ucy5sZW5ndGggLSAxOyAwIDw9IG87IG8tLSkgdGhpcy5yZW1vdmUoZS5idXR0b25zW29dLm5vZGUpOwogICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICBlLmNvbmYucHJlZml4QnV0dG9ucyAmJiBuLnVuc2hpZnQuYXBwbHkobiwgZS5jb25mLnByZWZpeEJ1dHRvbnMpLAogICAgICAgICAgICAgICAgICAgICAgICBlLmNvbmYucG9zdGZpeEJ1dHRvbnMgJiYgbi5wdXNoLmFwcGx5KG4sIGUuY29uZi5wb3N0Zml4QnV0dG9ucyksCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAwOwogICAgICAgICAgICAgICAgICAgIG8gPCBuLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBvKysKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gbltvXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgICAgIGUuYnV0dG9ucywKICAgICAgICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBpICYmIHZvaWQgMCAhPT0gaS5jb25maWcgJiYgdm9pZCAwICE9PSBpLmNvbmZpZy5zcGxpdCwKICAgICAgICAgICAgICAgICAgICAgICAgITAsCiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gaS5wYXJlbnRDb25mICYmIHZvaWQgMCAhPT0gaS5wYXJlbnRDb25mLnNwbGl0LAogICAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBpLnBhcmVudENvbmYsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl9kcmF3KGUuY29sbGVjdGlvbiwgZS5idXR0b25zKTsKICAgICAgICB9LAogICAgICAgIGNvbnRhaW5lcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kb20uY29udGFpbmVyOwogICAgICAgIH0sCiAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdCA9IHRoaXMuX25vZGVUb0J1dHRvbih0KTsKICAgICAgICAgICAgcmV0dXJuIHgodC5ub2RlKS5hZGRDbGFzcyh0aGlzLmMuZG9tLmJ1dHRvbi5kaXNhYmxlZCkucHJvcCgnZGlzYWJsZWQnLCAhMCksIHRoaXM7CiAgICAgICAgfSwKICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHgoJ2JvZHknKS5vZmYoJ2tleXVwLicgKyB0aGlzLnMubmFtZXNwYWNlKTsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMucy5idXR0b25zLnNsaWNlKCksIG4gPSAwLCBlID0gdC5sZW5ndGg7IG4gPCBlOyBuKyspIHRoaXMucmVtb3ZlKHRbbl0ubm9kZSk7CiAgICAgICAgICAgIHRoaXMuZG9tLmNvbnRhaW5lci5yZW1vdmUoKTsKICAgICAgICAgICAgdmFyIG8gPSB0aGlzLnMuZHQuc2V0dGluZ3MoKVswXTsKICAgICAgICAgICAgZm9yIChuID0gMCwgZSA9IG8ubGVuZ3RoOyBuIDwgZTsgbisrKQogICAgICAgICAgICAgICAgaWYgKG8uaW5zdCA9PT0gdGhpcykgewogICAgICAgICAgICAgICAgICAgIG8uc3BsaWNlKG4sIDEpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LAogICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgcmV0dXJuICExID09PSBuCiAgICAgICAgICAgICAgICA/IHRoaXMuZGlzYWJsZSh0KQogICAgICAgICAgICAgICAgOiAoKG4gPSB0aGlzLl9ub2RlVG9CdXR0b24odCkpLCB4KG4ubm9kZSkucmVtb3ZlQ2xhc3ModGhpcy5jLmRvbS5idXR0b24uZGlzYWJsZWQpLnByb3AoJ2Rpc2FibGVkJywgITEpLCB0aGlzKTsKICAgICAgICB9LAogICAgICAgIGluZGV4OiBmdW5jdGlvbiAodCwgbiwgZSkgewogICAgICAgICAgICBuIHx8ICgobiA9ICcnKSwgKGUgPSB0aGlzLnMuYnV0dG9ucykpOwogICAgICAgICAgICBmb3IgKHZhciBvID0gMCwgaSA9IGUubGVuZ3RoOyBvIDwgaTsgbysrKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IGVbb10uYnV0dG9uczsKICAgICAgICAgICAgICAgIGlmIChlW29dLm5vZGUgPT09IHQpIHJldHVybiBuICsgbzsKICAgICAgICAgICAgICAgIGlmIChzICYmIHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuaW5kZXgodCwgbyArICctJywgcyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHMpIHJldHVybiBzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jLm5hbWU7CiAgICAgICAgfSwKICAgICAgICBub2RlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gdCA/ICgodCA9IHRoaXMuX25vZGVUb0J1dHRvbih0KSksIHgodC5ub2RlKSkgOiB0aGlzLmRvbS5jb250YWluZXI7CiAgICAgICAgfSwKICAgICAgICBwcm9jZXNzaW5nOiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICB2YXIgZSA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgIG8gPSB0aGlzLl9ub2RlVG9CdXR0b24odCk7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IG4KICAgICAgICAgICAgICAgID8geChvLm5vZGUpLmhhc0NsYXNzKCdwcm9jZXNzaW5nJykKICAgICAgICAgICAgICAgIDogKHgoby5ub2RlKS50b2dnbGVDbGFzcygncHJvY2Vzc2luZycsIG4pLAogICAgICAgICAgICAgICAgICB4KGUudGFibGUoKS5ub2RlKCkpLnRyaWdnZXJIYW5kbGVyKCdidXR0b25zLXByb2Nlc3NpbmcuZHQnLCBbbiwgZS5idXR0b24odCksIGUsIHgodCksIG8uY29uZl0pLAogICAgICAgICAgICAgICAgICB0aGlzKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9ub2RlVG9CdXR0b24odCksCiAgICAgICAgICAgICAgICBlID0gdGhpcy5fbm9kZVRvSG9zdCh0KSwKICAgICAgICAgICAgICAgIG8gPSB0aGlzLnMuZHQ7CiAgICAgICAgICAgIGlmIChuLmJ1dHRvbnMubGVuZ3RoKSBmb3IgKHZhciBpID0gbi5idXR0b25zLmxlbmd0aCAtIDE7IDAgPD0gaTsgaS0tKSB0aGlzLnJlbW92ZShuLmJ1dHRvbnNbaV0ubm9kZSk7CiAgICAgICAgICAgIChuLmNvbmYuZGVzdHJveWluZyA9ICEwKSwKICAgICAgICAgICAgICAgIG4uY29uZi5kZXN0cm95ICYmIG4uY29uZi5kZXN0cm95LmNhbGwoby5idXR0b24odCksIG8sIHgodCksIG4uY29uZiksCiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVLZXkobi5jb25mKSwKICAgICAgICAgICAgICAgIHgobi5ub2RlKS5yZW1vdmUoKTsKICAgICAgICAgICAgbyA9IHguaW5BcnJheShuLCBlKTsKICAgICAgICAgICAgcmV0dXJuIGUuc3BsaWNlKG8sIDEpLCB0aGlzOwogICAgICAgIH0sCiAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA/IHQoaSwgcywgby5jb25mKSA6IHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG8gPSB0aGlzLl9ub2RlVG9CdXR0b24odCksCiAgICAgICAgICAgICAgICB0ID0gby50ZXh0Tm9kZSwKICAgICAgICAgICAgICAgIGkgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICBzID0geChvLm5vZGUpOwogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBuID8gZShvLmNvbmYudGV4dCkgOiAoKG8uY29uZi50ZXh0ID0gbiksIHQuaHRtbChlKG4pKSwgdGhpcyk7CiAgICAgICAgfSwKICAgICAgICBfY29uc3RydWN0b3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzLAogICAgICAgICAgICAgICAgdCA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgIG8gPSB0LnNldHRpbmdzKClbMF0sCiAgICAgICAgICAgICAgICBuID0gdGhpcy5jLmJ1dHRvbnM7CiAgICAgICAgICAgIG8uX2J1dHRvbnMgfHwgKG8uX2J1dHRvbnMgPSBbXSksIG8uX2J1dHRvbnMucHVzaCh7IGluc3Q6IHRoaXMsIG5hbWU6IHRoaXMuYy5uYW1lIH0pOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgcyA9IG4ubGVuZ3RoOyBpIDwgczsgaSsrKSB0aGlzLmFkZChuW2ldKTsKICAgICAgICAgICAgdC5vbignZGVzdHJveScsIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICBuID09PSBvICYmIGUuZGVzdHJveSgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHgoJ2JvZHknKS5vbigna2V5dXAuJyArIHRoaXMucy5uYW1lc3BhY2UsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgICAgICAgICAgKG0uYWN0aXZlRWxlbWVudCAmJiBtLmFjdGl2ZUVsZW1lbnQgIT09IG0uYm9keSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gU3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLnRvTG93ZXJDYXNlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gZS5zLmxpc3RlbktleXMudG9Mb3dlckNhc2UoKS5pbmRleE9mKG4pICYmIGUuX2tleXByZXNzKG4sIHQpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgX2FkZEtleTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdC5rZXkgJiYgKHRoaXMucy5saXN0ZW5LZXlzICs9ICh4LmlzUGxhaW5PYmplY3QodC5rZXkpID8gdC5rZXkgOiB0KS5rZXkpOwogICAgICAgIH0sCiAgICAgICAgX2RyYXc6IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgIHQgfHwgKCh0ID0gdGhpcy5kb20uY29udGFpbmVyKSwgKG4gPSB0aGlzLnMuYnV0dG9ucykpLCB0LmNoaWxkcmVuKCkuZGV0YWNoKCk7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBvID0gbi5sZW5ndGg7IGUgPCBvOyBlKyspCiAgICAgICAgICAgICAgICB0LmFwcGVuZChuW2VdLmluc2VydGVyKSwgdC5hcHBlbmQoJyAnKSwgbltlXS5idXR0b25zICYmIG5bZV0uYnV0dG9ucy5sZW5ndGggJiYgdGhpcy5fZHJhdyhuW2VdLmNvbGxlY3Rpb24sIG5bZV0uYnV0dG9ucyk7CiAgICAgICAgfSwKICAgICAgICBfZXhwYW5kQnV0dG9uOiBmdW5jdGlvbiAodCwgbiwgZSwgbywgaSwgcywgcikgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgICAgICAgICAgbCA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5jLmRvbS5jb2xsZWN0aW9uLAogICAgICAgICAgICAgICAgICAgIHUgPSBBcnJheS5pc0FycmF5KG4pID8gbiA6IFtuXSwKICAgICAgICAgICAgICAgICAgICBkID0gMCwKICAgICAgICAgICAgICAgICAgICBmID0gKHUgPSB2b2lkIDAgPT09IG4gPyAoQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV0pIDogdSkubGVuZ3RoOwogICAgICAgICAgICAgICAgZCA8IGY7CiAgICAgICAgICAgICAgICBkKysKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMuX3Jlc29sdmVFeHRlbmRzKHVbZF0pOwogICAgICAgICAgICAgICAgaWYgKHApCiAgICAgICAgICAgICAgICAgICAgaWYgKCgoYSA9ICEoIXAuY29uZmlnIHx8ICFwLmNvbmZpZy5zcGxpdCkpLCBBcnJheS5pc0FycmF5KHApKSkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXhwYW5kQnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGggJiYgdm9pZCAwICE9PSBoLmNvbmYgPyBoLmNvbmYuc3BsaXQgOiB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSByICYmIHZvaWQgMCAhPT0gci5zcGxpdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMuX2J1aWxkQnV0dG9uKHAsIG8sIHZvaWQgMCAhPT0gcC5zcGxpdCB8fCAodm9pZCAwICE9PSBwLmNvbmZpZyAmJiB2b2lkIDAgIT09IHAuY29uZmlnLnNwbGl0KSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG51bGwgIT0gcyA/ICh0LnNwbGljZShzLCAwLCBoKSwgcysrKSA6IHQucHVzaChoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLmNvbmYuYnV0dG9ucyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGguY29sbGVjdGlvbiA9IHgoJzwnICsgYy5jb250YWluZXIuY29udGVudC50YWcgKyAnLz4nKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoLmNvbmYuX2NvbGxlY3Rpb24gPSBoLmNvbGxlY3Rpb24pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4KGgubm9kZSkuYXBwZW5kKGMuYWN0aW9uLmRyb3BIdG1sKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXhwYW5kQnV0dG9uKGguYnV0dG9ucywgaC5jb25mLmJ1dHRvbnMsIGguY29uZi5zcGxpdCwgIWEsIGEsIHMsIGguY29uZikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGguY29uZi5zcGxpdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoLmNvbGxlY3Rpb24gPSB4KCc8JyArIGMuY29udGFpbmVyLnRhZyArICcvPicpKSwgKGguY29uZi5fY29sbGVjdGlvbiA9IGguY29sbGVjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBoLmNvbmYuc3BsaXQubGVuZ3RoOyBiKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBoLmNvbmYuc3BsaXRbYl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvYmplY3QnID09IHR5cGVvZiBnICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGcucGFyZW50ID0gciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGcuY29sbGVjdGlvbkxheW91dCAmJiAoZy5jb2xsZWN0aW9uTGF5b3V0ID0gaC5jb25mLmNvbGxlY3Rpb25MYXlvdXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBnLmRyb3B1cCAmJiAoZy5kcm9wdXAgPSBoLmNvbmYuZHJvcHVwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZy5mYWRlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGcuZmFkZSA9IGguY29uZi5mYWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXhwYW5kQnV0dG9uKGguYnV0dG9ucywgaC5jb25mLmJ1dHRvbnMsIGguY29uZi5zcGxpdCwgIWEsIGEsIHMsIGguY29uZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaC5jb25mLnBhcmVudCA9IHIpLCBwLmluaXQgJiYgcC5pbml0LmNhbGwobC5idXR0b24oaC5ub2RlKSwgbCwgeChoLm5vZGUpLCBwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgX2J1aWxkQnV0dG9uOiBmdW5jdGlvbiAobiwgdCwgZSwgbykgewogICAgICAgICAgICBmdW5jdGlvbiBpKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gdChmLCBjLCBuKSA6IHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHMsCiAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgIGwsCiAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgdSA9IHRoaXMsCiAgICAgICAgICAgICAgICBkID0gdGhpcy5jLmRvbSwKICAgICAgICAgICAgICAgIGYgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICBwID0geC5leHRlbmQoITAsIHt9LCBkLmJ1dHRvbik7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICh0ICYmIGUgJiYgZC5jb2xsZWN0aW9uLnNwbGl0CiAgICAgICAgICAgICAgICAgICAgPyB4LmV4dGVuZCghMCwgcCwgZC5jb2xsZWN0aW9uLnNwbGl0LmFjdGlvbikKICAgICAgICAgICAgICAgICAgICA6IG8gfHwgdAogICAgICAgICAgICAgICAgICAgID8geC5leHRlbmQoITAsIHAsIGQuY29sbGVjdGlvbi5idXR0b24pCiAgICAgICAgICAgICAgICAgICAgOiBlICYmIHguZXh0ZW5kKCEwLCBwLCBkLnNwbGl0LmJ1dHRvbiksCiAgICAgICAgICAgICAgICBuLnNwYWNlcikKICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAoZCA9IHgoJzwnICsgcC5zcGFjZXIudGFnICsgJy8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdkdC1idXR0b24tc3BhY2VyICcgKyBuLnN0eWxlICsgJyAnICsgcC5zcGFjZXIuY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChpKG4udGV4dCkpKSwKICAgICAgICAgICAgICAgICAgICB7IGNvbmY6IG4sIG5vZGU6IGQsIGluc2VydGVyOiBkLCBidXR0b25zOiBbXSwgaW5Db2xsZWN0aW9uOiB0LCBpc1NwbGl0OiBlLCBjb2xsZWN0aW9uOiBudWxsLCB0ZXh0Tm9kZTogZCB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICBpZiAobi5hdmFpbGFibGUgJiYgIW4uYXZhaWxhYmxlKGYsIG4pICYmICFuLmh0bWwpIHJldHVybiAhMTsKICAgICAgICAgICAgbi5odG1sCiAgICAgICAgICAgICAgICA/IChjID0geChuLmh0bWwpKQogICAgICAgICAgICAgICAgOiAoKHIgPSBmdW5jdGlvbiAodCwgbiwgZSwgbywgaSkgewogICAgICAgICAgICAgICAgICAgICAgby5hY3Rpb24uY2FsbChuLmJ1dHRvbihlKSwgdCwgbiwgZSwgbywgaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgeChuLnRhYmxlKCkubm9kZSgpKS50cmlnZ2VySGFuZGxlcignYnV0dG9ucy1hY3Rpb24uZHQnLCBbbi5idXR0b24oZSksIG4sIGUsIG9dKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIChhID0gZnVuY3Rpb24gKHQsIG4sIGUsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgIG8uYXN5bmMKICAgICAgICAgICAgICAgICAgICAgICAgICA/ICh1LnByb2Nlc3NpbmcoZVswXSwgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcih0LCBuLCBlLCBvLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUucHJvY2Vzc2luZyhlWzBdLCAhMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvLmFzeW5jKSkKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHIodCwgbiwgZSwgbywgZnVuY3Rpb24gKCkge30pOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgKGQgPSBuLnRhZyB8fCBwLnRhZyksCiAgICAgICAgICAgICAgICAgIChsID0gdm9pZCAwID09PSBuLmNsaWNrQmx1cnMgfHwgbi5jbGlja0JsdXJzKSwKICAgICAgICAgICAgICAgICAgKGMgPSB4KCc8JyArIGQgKyAnLz4nKQogICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHAuY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhYmluZGV4JywgdGhpcy5zLmR0LnNldHRpbmdzKClbMF0uaVRhYkluZGV4KQogICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtY29udHJvbHMnLCB0aGlzLnMuZHQudGFibGUoKS5ub2RlKCkuaWQpCiAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrLmR0YicsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCAhYy5oYXNDbGFzcyhwLmRpc2FibGVkKSAmJiBuLmFjdGlvbiAmJiBhKHQsIGYsIGMsIG4pLCBsICYmIGMudHJpZ2dlcignYmx1cicpOwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIC5vbigna2V5cHJlc3MuZHRiJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAxMyA9PT0gdC5rZXlDb2RlICYmICh0LnByZXZlbnREZWZhdWx0KCksICFjLmhhc0NsYXNzKHAuZGlzYWJsZWQpKSAmJiBuLmFjdGlvbiAmJiBhKHQsIGYsIGMsIG4pOwogICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAnYScgPT09IGQudG9Mb3dlckNhc2UoKSAmJiBjLmF0dHIoJ2hyZWYnLCAnIycpLAogICAgICAgICAgICAgICAgICAnYnV0dG9uJyA9PT0gZC50b0xvd2VyQ2FzZSgpICYmIGMuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgICAgKHMgPSBwLmxpbmVyLnRhZwogICAgICAgICAgICAgICAgICAgICAgPyAoKGQgPSB4KCc8JyArIHAubGluZXIudGFnICsgJy8+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGkobi50ZXh0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhwLmxpbmVyLmNsYXNzTmFtZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAnYScgPT09IHAubGluZXIudGFnLnRvTG93ZXJDYXNlKCkgJiYgZC5hdHRyKCdocmVmJywgJyMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgYy5hcHBlbmQoZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGQpCiAgICAgICAgICAgICAgICAgICAgICA6IChjLmh0bWwoaShuLnRleHQpKSwgYykpLAogICAgICAgICAgICAgICAgICAhMSA9PT0gbi5lbmFibGVkICYmIGMuYWRkQ2xhc3MocC5kaXNhYmxlZCksCiAgICAgICAgICAgICAgICAgIG4uY2xhc3NOYW1lICYmIGMuYWRkQ2xhc3Mobi5jbGFzc05hbWUpLAogICAgICAgICAgICAgICAgICBuLnRpdGxlQXR0ciAmJiBjLmF0dHIoJ3RpdGxlJywgaShuLnRpdGxlQXR0cikpLAogICAgICAgICAgICAgICAgICBuLmF0dHIgJiYgYy5hdHRyKG4uYXR0ciksCiAgICAgICAgICAgICAgICAgIG4ubmFtZXNwYWNlIHx8IChuLm5hbWVzcGFjZSA9ICcuZHQtYnV0dG9uLScgKyBDKyspLAogICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IG4uY29uZmlnICYmIG4uY29uZmlnLnNwbGl0ICYmIChuLnNwbGl0ID0gbi5jb25maWcuc3BsaXQpKTsKICAgICAgICAgICAgdmFyIGgsCiAgICAgICAgICAgICAgICBiLAogICAgICAgICAgICAgICAgZywKICAgICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgeSwKICAgICAgICAgICAgICAgIGQgPSB0aGlzLmMuZG9tLmJ1dHRvbkNvbnRhaW5lciwKICAgICAgICAgICAgICAgIGQgPQogICAgICAgICAgICAgICAgICAgIGQgJiYgZC50YWcKICAgICAgICAgICAgICAgICAgICAgICAgPyB4KCc8JyArIGQudGFnICsgJy8+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGQuY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGMpCiAgICAgICAgICAgICAgICAgICAgICAgIDogYzsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuX2FkZEtleShuKSwKICAgICAgICAgICAgICAgIHRoaXMuYy5idXR0b25DcmVhdGVkICYmIChkID0gdGhpcy5jLmJ1dHRvbkNyZWF0ZWQobiwgZCkpLAogICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICAgICgoYiA9IChoID0gdCA/IHguZXh0ZW5kKCEwLCB0aGlzLmMuZG9tLnNwbGl0LCB0aGlzLmMuZG9tLmNvbGxlY3Rpb24uc3BsaXQpIDogdGhpcy5jLmRvbS5zcGxpdCkud3JhcHBlciksCiAgICAgICAgICAgICAgICAgICAgKGcgPSB4KCc8JyArIGIudGFnICsgJy8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGIuY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGMpKSwKICAgICAgICAgICAgICAgICAgICAobSA9IHguZXh0ZW5kKG4sIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246IGguZHJvcGRvd24uYWxpZ24sCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtaGFzcG9wdXAnOiAnZGlhbG9nJywgJ2FyaWEtZXhwYW5kZWQnOiAhMSB9LAogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGguZHJvcGRvd24uY2xhc3NOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0QWxpZ25DbGFzczogaC5kcm9wZG93bi5zcGxpdEFsaWduQ2xhc3MsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGguZHJvcGRvd24udGV4dCwKICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkS2V5KG0pLAogICAgICAgICAgICAgICAgICAgICh2ID0gZnVuY3Rpb24gKHQsIG4sIGUsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdy5zcGxpdC5hY3Rpb24uY2FsbChuLmJ1dHRvbihnKSwgdCwgbiwgZSwgbyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4KG4udGFibGUoKS5ub2RlKCkpLnRyaWdnZXJIYW5kbGVyKCdidXR0b25zLWFjdGlvbi5kdCcsIFtuLmJ1dHRvbihlKSwgbiwgZSwgb10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgITApOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICh5ID0geCgnPGJ1dHRvbiBjbGFzcz0iJyArIGguZHJvcGRvd24uY2xhc3NOYW1lICsgJyBkdC1idXR0b24iPjwvYnV0dG9uPicpCiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGguZHJvcGRvd24uZHJvcEh0bWwpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2suZHRiJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgdC5zdG9wUHJvcGFnYXRpb24oKSwgeS5oYXNDbGFzcyhwLmRpc2FibGVkKSB8fCB2KHQsIGYsIHksIG0pLCBsICYmIHkudHJpZ2dlcignYmx1cicpOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ2tleXByZXNzLmR0YicsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMyA9PT0gdC5rZXlDb2RlICYmICh0LnByZXZlbnREZWZhdWx0KCksIHkuaGFzQ2xhc3MocC5kaXNhYmxlZCkgfHwgdih0LCBmLCB5LCBtKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAwID09PSBuLnNwbGl0Lmxlbmd0aCAmJiB5LmFkZENsYXNzKCdkdGItaGlkZS1kcm9wJyksCiAgICAgICAgICAgICAgICAgICAgZy5hcHBlbmQoeSkuYXR0cihtLmF0dHIpKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb25mOiBuLAogICAgICAgICAgICAgICAgICAgIG5vZGU6IChlID8gZyA6IGMpLmdldCgwKSwKICAgICAgICAgICAgICAgICAgICBpbnNlcnRlcjogZSA/IGcgOiBkLAogICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtdLAogICAgICAgICAgICAgICAgICAgIGluQ29sbGVjdGlvbjogdCwKICAgICAgICAgICAgICAgICAgICBpc1NwbGl0OiBlLAogICAgICAgICAgICAgICAgICAgIGluU3BsaXQ6IG8sCiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0ZXh0Tm9kZTogcywKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIF9ub2RlVG9CdXR0b246IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBvID0gKG4gPSBuIHx8IHRoaXMucy5idXR0b25zKS5sZW5ndGg7IGUgPCBvOyBlKyspIHsKICAgICAgICAgICAgICAgIGlmIChuW2VdLm5vZGUgPT09IHQpIHJldHVybiBuW2VdOwogICAgICAgICAgICAgICAgaWYgKG5bZV0uYnV0dG9ucy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX25vZGVUb0J1dHRvbih0LCBuW2VdLmJ1dHRvbnMpOwogICAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgX25vZGVUb0hvc3Q6IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBvID0gKG4gPSBuIHx8IHRoaXMucy5idXR0b25zKS5sZW5ndGg7IGUgPCBvOyBlKyspIHsKICAgICAgICAgICAgICAgIGlmIChuW2VdLm5vZGUgPT09IHQpIHJldHVybiBuOwogICAgICAgICAgICAgICAgaWYgKG5bZV0uYnV0dG9ucy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuX25vZGVUb0hvc3QodCwgbltlXS5idXR0b25zKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaSkgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIF9rZXlwcmVzczogZnVuY3Rpb24gKHMsIHIpIHsKICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgIHIuX2J1dHRvbnNIYW5kbGVkIHx8CiAgICAgICAgICAgICAgICAoYSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgZSwgbyA9IDAsIGkgPSB0Lmxlbmd0aDsgbyA8IGk7IG8rKykKICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSB0W29dLmNvbmYpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSB0W29dLm5vZGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIW4ua2V5IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4ua2V5ICE9PSBzICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgheC5pc1BsYWluT2JqZWN0KG4ua2V5KSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5rZXkua2V5ICE9PSBzIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5rZXkuc2hpZnRLZXkgJiYgIXIuc2hpZnRLZXkpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5rZXkuYWx0S2V5ICYmICFyLmFsdEtleSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuLmtleS5jdHJsS2V5ICYmICFyLmN0cmxLZXkpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5rZXkubWV0YUtleSAmJiAhci5tZXRhS2V5KSkpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChyLl9idXR0b25zSGFuZGxlZCA9ICEwKSwgeChlKS5jbGljaygpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbb10uYnV0dG9ucy5sZW5ndGggJiYgYSh0W29dLmJ1dHRvbnMpOwogICAgICAgICAgICAgICAgfSkodGhpcy5zLmJ1dHRvbnMpOwogICAgICAgIH0sCiAgICAgICAgX3JlbW92ZUtleTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgIHQua2V5ICYmCiAgICAgICAgICAgICAgICAoKHQgPSAoeC5pc1BsYWluT2JqZWN0KHQua2V5KSA/IHQua2V5IDogdCkua2V5KSwKICAgICAgICAgICAgICAgIChuID0gdGhpcy5zLmxpc3RlbktleXMuc3BsaXQoJycpKSwKICAgICAgICAgICAgICAgICh0ID0geC5pbkFycmF5KHQsIG4pKSwKICAgICAgICAgICAgICAgIG4uc3BsaWNlKHQsIDEpLAogICAgICAgICAgICAgICAgKHRoaXMucy5saXN0ZW5LZXlzID0gbi5qb2luKCcnKSkpOwogICAgICAgIH0sCiAgICAgICAgX3Jlc29sdmVFeHRlbmRzOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBmdW5jdGlvbiB0KHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyAheC5pc1BsYWluT2JqZWN0KHQpICYmICFBcnJheS5pc0FycmF5KHQpOyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IHQuY2FsbChpLCBzLCBlKSkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd1t0XSkgcmV0dXJuIHsgaHRtbDogdCB9OwogICAgICAgICAgICAgICAgICAgICAgICB0ID0gd1t0XTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKDMwIDwgKytuKSB0aHJvdyAnQnV0dG9uczogVG9vIG1hbnkgaXRlcmF0aW9ucyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0KSA/IHQgOiB4LmV4dGVuZCh7fSwgdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG4sCiAgICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgICAgaSA9IHRoaXMsCiAgICAgICAgICAgICAgICBzID0gdGhpcy5zLmR0OwogICAgICAgICAgICBmb3IgKGUgPSB0KGUpOyBlICYmIGUuZXh0ZW5kOyApIHsKICAgICAgICAgICAgICAgIGlmICghd1tlLmV4dGVuZF0pIHRocm93ICdDYW5ub3QgZXh0ZW5kIHVua25vd24gYnV0dG9uIHR5cGU6ICcgKyBlLmV4dGVuZDsKICAgICAgICAgICAgICAgIHZhciByID0gdCh3W2UuZXh0ZW5kXSk7CiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyKSkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICBpZiAoIXIpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIHZhciBhID0gci5jbGFzc05hbWU7CiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUuY29uZmlnICYmIHZvaWQgMCAhPT0gci5jb25maWcgJiYgKGUuY29uZmlnID0geC5leHRlbmQoe30sIHIuY29uZmlnLCBlLmNvbmZpZykpLAogICAgICAgICAgICAgICAgICAgIChlID0geC5leHRlbmQoe30sIHIsIGUpKSwKICAgICAgICAgICAgICAgICAgICBhICYmIGUuY2xhc3NOYW1lICE9PSBhICYmIChlLmNsYXNzTmFtZSA9IGEgKyAnICcgKyBlLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgKGUuZXh0ZW5kID0gci5leHRlbmQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBsID0gZS5wb3N0Zml4QnV0dG9uczsKICAgICAgICAgICAgaWYgKGwpIGZvciAoZS5idXR0b25zIHx8IChlLmJ1dHRvbnMgPSBbXSksIG4gPSAwLCBvID0gbC5sZW5ndGg7IG4gPCBvOyBuKyspIGUuYnV0dG9ucy5wdXNoKGxbbl0pOwogICAgICAgICAgICB2YXIgYyA9IGUucHJlZml4QnV0dG9uczsKICAgICAgICAgICAgaWYgKGMpIGZvciAoZS5idXR0b25zIHx8IChlLmJ1dHRvbnMgPSBbXSksIG4gPSAwLCBvID0gYy5sZW5ndGg7IG4gPCBvOyBuKyspIGUuYnV0dG9ucy5zcGxpY2UobiwgMCwgY1tuXSk7CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0sCiAgICAgICAgX3BvcG92ZXI6IGZ1bmN0aW9uIChvLCB0LCBuKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgICAgICAgICAoZiA9ICEwKSwKICAgICAgICAgICAgICAgICAgICB5KHgoaCksIHAuZmFkZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB4KHRoaXMpLmRldGFjaCgpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHgodS5idXR0b25zKCdbYXJpYS1oYXNwb3B1cD0iZGlhbG9nIl1bYXJpYS1leHBhbmRlZD0idHJ1ZSJdJykubm9kZXMoKSkuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpLAogICAgICAgICAgICAgICAgICAgIHgoJ2Rpdi5kdC1idXR0b24tYmFja2dyb3VuZCcpLm9mZignY2xpY2suZHRiLWNvbGxlY3Rpb24nKSwKICAgICAgICAgICAgICAgICAgICBfLmJhY2tncm91bmQoITEsIHAuYmFja2dyb3VuZENsYXNzTmFtZSwgcC5mYWRlLCBiKSwKICAgICAgICAgICAgICAgICAgICB4KGcpLm9mZigncmVzaXplLnJlc2l6ZS5kdGItY29sbGVjdGlvbicpLAogICAgICAgICAgICAgICAgICAgIHgoJ2JvZHknKS5vZmYoJy5kdGItY29sbGVjdGlvbicpLAogICAgICAgICAgICAgICAgICAgIHUub2ZmKCdidXR0b25zLWFjdGlvbi5iLWludGVybmFsJyksCiAgICAgICAgICAgICAgICAgICAgdS5vZmYoJ2Rlc3Ryb3knKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgIGwsCiAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgdSA9IHQsCiAgICAgICAgICAgICAgICBkID0gdGhpcy5jLAogICAgICAgICAgICAgICAgZiA9ICExLAogICAgICAgICAgICAgICAgcCA9IHguZXh0ZW5kKAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdidXR0b24tbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9DbG9zZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ2xhc3NOYW1lOiAnZHQtYnV0dG9uLWJhY2tncm91bmQnLAogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbjogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckNsYXNzTmFtZTogZC5kb20uY29sbGVjdGlvbi5jb250YWluZXIuY2xhc3NOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Q2xhc3NOYW1lOiBkLmRvbS5jb2xsZWN0aW9uLmNvbnRhaW5lci5jb250ZW50LmNsYXNzTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbkxheW91dDogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25UaXRsZTogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3B1cDogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIGZhZGU6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgcG9wb3ZlclRpdGxlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRBbGlnbkNsYXNzTmFtZTogJ2R0LWJ1dHRvbi1yaWdodCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogZC5kb20uY29sbGVjdGlvbi5jb250YWluZXIudGFnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBoID0gcC50YWcgKyAnLicgKyBwLmNvbnRhaW5lckNsYXNzTmFtZS5yZXBsYWNlKC8gL2csICcuJyksCiAgICAgICAgICAgICAgICBiID0gdC5ub2RlKCk7CiAgICAgICAgICAgICExID09PSBvCiAgICAgICAgICAgICAgICA/IGkoKQogICAgICAgICAgICAgICAgOiAoKGQgPSB4KHUuYnV0dG9ucygnW2FyaWEtaGFzcG9wdXA9ImRpYWxvZyJdW2FyaWEtZXhwYW5kZWQ9InRydWUiXScpLm5vZGVzKCkpKS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgIChiLmNsb3Nlc3QoaCkubGVuZ3RoICYmIChiID0gZC5lcSgwKSksIGkoKSksCiAgICAgICAgICAgICAgICAgIChuID0geCgnLmR0LWJ1dHRvbicsIG8pLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgIChkID0gJycpLAogICAgICAgICAgICAgICAgICAzID09PSBuID8gKGQgPSAnZHRiLWIzJykgOiAyID09PSBuID8gKGQgPSAnZHRiLWIyJykgOiAxID09PSBuICYmIChkID0gJ2R0Yi1iMScpLAogICAgICAgICAgICAgICAgICAoZSA9IHgoJzwnICsgcC50YWcgKyAnLz4nKQogICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHAuY29udGFpbmVyQ2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHAuY29sbGVjdGlvbkxheW91dCkKICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhwLnNwbGl0QWxpZ25DbGFzcykKICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhkKQogICAgICAgICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJykKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKHsgJ2FyaWEtbW9kYWwnOiAhMCwgcm9sZTogJ2RpYWxvZycgfSkpLAogICAgICAgICAgICAgICAgICAobyA9IHgobykuYWRkQ2xhc3MocC5jb250ZW50Q2xhc3NOYW1lKS5hdHRyKCdyb2xlJywgJ21lbnUnKS5hcHBlbmRUbyhlKSksCiAgICAgICAgICAgICAgICAgIGIuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyksCiAgICAgICAgICAgICAgICAgIGIucGFyZW50cygnYm9keScpWzBdICE9PSBtLmJvZHkgJiYgKGIgPSBtLmJvZHkubGFzdENoaWxkKSwKICAgICAgICAgICAgICAgICAgcC5wb3BvdmVyVGl0bGUKICAgICAgICAgICAgICAgICAgICAgID8gZS5wcmVwZW5kKCc8ZGl2IGNsYXNzPSJkdC1idXR0b24tY29sbGVjdGlvbi10aXRsZSI+JyArIHAucG9wb3ZlclRpdGxlICsgJzwvZGl2PicpCiAgICAgICAgICAgICAgICAgICAgICA6IHAuY29sbGVjdGlvblRpdGxlICYmIGUucHJlcGVuZCgnPGRpdiBjbGFzcz0iZHQtYnV0dG9uLWNvbGxlY3Rpb24tdGl0bGUiPicgKyBwLmNvbGxlY3Rpb25UaXRsZSArICc8L2Rpdj4nKSwKICAgICAgICAgICAgICAgICAgcC5jbG9zZUJ1dHRvbiAmJiBlLnByZXBlbmQoJzxkaXYgY2xhc3M9ImR0Yi1wb3BvdmVyLWNsb3NlIj4mdGltZXM7PC9kaXY+JykuYWRkQ2xhc3MoJ2R0Yi1jb2xsZWN0aW9uLWNsb3NlYWJsZScpLAogICAgICAgICAgICAgICAgICB2KGUuaW5zZXJ0QWZ0ZXIoYiksIHAuZmFkZSksCiAgICAgICAgICAgICAgICAgIChuID0geCh0LnRhYmxlKCkuY29udGFpbmVyKCkpKSwKICAgICAgICAgICAgICAgICAgKGQgPSBlLmNzcygncG9zaXRpb24nKSksCiAgICAgICAgICAgICAgICAgICgnY29udGFpbmVyJyAhPT0gcC5zcGFuICYmICdkdC1jb250YWluZXInICE9PSBwLmFsaWduKSB8fCAoKGIgPSBiLnBhcmVudCgpKSwgZS5jc3MoJ3dpZHRoJywgbi53aWR0aCgpKSksCiAgICAgICAgICAgICAgICAgICdhYnNvbHV0ZScgPT09IGQKICAgICAgICAgICAgICAgICAgICAgID8gKCh0ID0geChiWzBdLm9mZnNldFBhcmVudCkpLAogICAgICAgICAgICAgICAgICAgICAgICAobiA9IGIucG9zaXRpb24oKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChkID0gYi5vZmZzZXQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChhID0gdC5vZmZzZXQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChzID0gdC5wb3NpdGlvbigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBnLmdldENvbXB1dGVkU3R5bGUodFswXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAoYS5oZWlnaHQgPSB0Lm91dGVySGVpZ2h0KCkpLAogICAgICAgICAgICAgICAgICAgICAgICAoYS53aWR0aCA9IHQud2lkdGgoKSArIHBhcnNlRmxvYXQoci5wYWRkaW5nTGVmdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAoYS5yaWdodCA9IGEubGVmdCArIGEud2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICAoYS5ib3R0b20gPSBhLnRvcCArIGEuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICAgICAgKHQgPSBuLnRvcCArIGIub3V0ZXJIZWlnaHQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChhID0gbi5sZWZ0KSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5jc3MoeyB0b3A6IHQsIGxlZnQ6IGEgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIChyID0gZy5nZXRDb21wdXRlZFN0eWxlKGVbMF0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgKChsID0gZS5vZmZzZXQoKSkuaGVpZ2h0ID0gZS5vdXRlckhlaWdodCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKGwud2lkdGggPSBlLm91dGVyV2lkdGgoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChsLnJpZ2h0ID0gbC5sZWZ0ICsgbC53aWR0aCksCiAgICAgICAgICAgICAgICAgICAgICAgIChsLmJvdHRvbSA9IGwudG9wICsgbC5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgICAgICAobC5tYXJnaW5Ub3AgPSBwYXJzZUZsb2F0KHIubWFyZ2luVG9wKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChsLm1hcmdpbkJvdHRvbSA9IHBhcnNlRmxvYXQoci5tYXJnaW5Cb3R0b20pKSwKICAgICAgICAgICAgICAgICAgICAgICAgcC5kcm9wdXAgJiYgKHQgPSBuLnRvcCAtIGwuaGVpZ2h0IC0gbC5tYXJnaW5Ub3AgLSBsLm1hcmdpbkJvdHRvbSksCiAgICAgICAgICAgICAgICAgICAgICAgICgnYnV0dG9uLXJpZ2h0JyAhPT0gcC5hbGlnbiAmJiAhZS5oYXNDbGFzcyhwLnJpZ2h0QWxpZ25DbGFzc05hbWUpKSB8fCAoYSA9IG4ubGVmdCAtIGwud2lkdGggKyBiLm91dGVyV2lkdGgoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICgnZHQtY29udGFpbmVyJyAhPT0gcC5hbGlnbiAmJiAnY29udGFpbmVyJyAhPT0gcC5hbGlnbikgfHwgKGEgPCBuLmxlZnQgJiYgKGEgPSAtbi5sZWZ0KSksCiAgICAgICAgICAgICAgICAgICAgICAgIHMubGVmdCArIGEgKyBsLndpZHRoID4geChnKS53aWR0aCgpICYmIChhID0geChnKS53aWR0aCgpIC0gbC53aWR0aCAtIHMubGVmdCksCiAgICAgICAgICAgICAgICAgICAgICAgIGQubGVmdCArIGEgPCAwICYmIChhID0gLWQubGVmdCksCiAgICAgICAgICAgICAgICAgICAgICAgIHMudG9wICsgdCArIGwuaGVpZ2h0ID4geChnKS5oZWlnaHQoKSArIHgoZykuc2Nyb2xsVG9wKCkgJiYgKHQgPSBuLnRvcCAtIGwuaGVpZ2h0IC0gbC5tYXJnaW5Ub3AgLSBsLm1hcmdpbkJvdHRvbSksCiAgICAgICAgICAgICAgICAgICAgICAgIHMudG9wICsgdCA8IHgoZykuc2Nyb2xsVG9wKCkgJiYgKHQgPSBuLnRvcCArIGIub3V0ZXJIZWlnaHQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGUuY3NzKHsgdG9wOiB0LCBsZWZ0OiBhIH0pKQogICAgICAgICAgICAgICAgICAgICAgOiAoKGMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHgoZykuaGVpZ2h0KCkgLyAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLmhlaWdodCgpIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY3NzKCdtYXJnaW5Ub3AnLCAtMSAqIChuID0gdCA8IG4gPyB0IDogbikpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSgpLAogICAgICAgICAgICAgICAgICAgICAgICB4KGcpLm9uKCdyZXNpemUuZHRiLWNvbGxlY3Rpb24nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgcC5iYWNrZ3JvdW5kICYmIF8uYmFja2dyb3VuZCghMCwgcC5iYWNrZ3JvdW5kQ2xhc3NOYW1lLCBwLmZhZGUsIHAuYmFja2dyb3VuZEhvc3QgfHwgYiksCiAgICAgICAgICAgICAgICAgIHgoJ2Rpdi5kdC1idXR0b24tYmFja2dyb3VuZCcpLm9uKCdjbGljay5kdGItY29sbGVjdGlvbicsIGZ1bmN0aW9uICgpIHt9KSwKICAgICAgICAgICAgICAgICAgcC5hdXRvQ2xvc2UgJiYKICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHUub24oJ2J1dHRvbnMtYWN0aW9uLmItaW50ZXJuYWwnLCBmdW5jdGlvbiAodCwgbiwgZSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzBdICE9PSBiWzBdICYmIGkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDApLAogICAgICAgICAgICAgICAgICB4KGUpLnRyaWdnZXIoJ2J1dHRvbnMtcG9wb3Zlci5kdCcpLAogICAgICAgICAgICAgICAgICB1Lm9uKCdkZXN0cm95JywgaSksCiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgKGYgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgeCgnYm9keScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2suZHRiLWNvbGxlY3Rpb24nLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobiA9IHguZm4uYWRkQmFjayA/ICdhZGRCYWNrJyA6ICdhbmRTZWxmJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSB4KHQudGFyZ2V0KS5wYXJlbnQoKVswXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCF4KHQudGFyZ2V0KS5wYXJlbnRzKClbbl0oKS5maWx0ZXIobykubGVuZ3RoICYmICF4KGUpLmhhc0NsYXNzKCdkdC1idXR0b25zJykpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgodC50YXJnZXQpLmhhc0NsYXNzKCdkdC1idXR0b24tYmFja2dyb3VuZCcpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXl1cC5kdGItY29sbGVjdGlvbicsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyNyA9PT0gdC5rZXlDb2RlICYmIGkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXlkb3duLmR0Yi1jb2xsZWN0aW9uJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0geCgnYSwgYnV0dG9uJywgbyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG0uYWN0aXZlRWxlbWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDkgPT09IHQua2V5Q29kZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgtMSA9PT0gbi5pbmRleChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChuLmZpcnN0KCkuZm9jdXMoKSwgdC5wcmV2ZW50RGVmYXVsdCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQuc2hpZnRLZXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlID09PSBuWzBdICYmIChuLmxhc3QoKS5mb2N1cygpLCB0LnByZXZlbnREZWZhdWx0KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZSA9PT0gbi5sYXN0KClbMF0gJiYgKG4uZmlyc3QoKS5mb2N1cygpLCB0LnByZXZlbnREZWZhdWx0KCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDApKTsKICAgICAgICB9LAogICAgfSksCiAgICAgICAgKF8uYmFja2dyb3VuZCA9IGZ1bmN0aW9uICh0LCBuLCBlLCBvKSB7CiAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IDQwMCksCiAgICAgICAgICAgICAgICAobyA9IG8gfHwgbS5ib2R5KSwKICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICA/IHYoeCgnPGRpdi8+JykuYWRkQ2xhc3MobikuY3NzKCdkaXNwbGF5JywgJ25vbmUnKS5pbnNlcnRBZnRlcihvKSwgZSkKICAgICAgICAgICAgICAgICAgICA6IHkoeCgnZGl2LicgKyBuKSwgZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHgodGhpcykucmVtb3ZlQ2xhc3MobikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAoXy5pbnN0YW5jZVNlbGVjdG9yID0gZnVuY3Rpb24gKHQsIHMpIHsKICAgICAgICAgICAgdmFyIHIsIGEsIGw7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHQKICAgICAgICAgICAgICAgID8geC5tYXAocywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lmluc3Q7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6ICgociA9IFtdKSwKICAgICAgICAgICAgICAgICAgKGEgPSB4Lm1hcChzLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubmFtZTsKICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAobCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKSBmb3IgKHZhciBlID0gMCwgbyA9IHQubGVuZ3RoOyBlIDwgbzsgZSsrKSBsKHRbZV0pOwogICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IHQuaW5kZXhPZignLCcpID8gbCh0LnNwbGl0KCcsJykpIDogLTEgIT09IChuID0geC5pbkFycmF5KHQudHJpbSgpLCBhKSkgJiYgci5wdXNoKHNbbl0uaW5zdCk7CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgdCkgci5wdXNoKHNbdF0uaW5zdCk7CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgdCAmJiB0Lm5vZGVOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykgc1tpXS5pbnN0LmRvbS5jb250YWluZXJbMF0gPT09IHQgJiYgci5wdXNoKHNbaV0uaW5zdCk7CiAgICAgICAgICAgICAgICAgICAgICBlbHNlICdvYmplY3QnID09IHR5cGVvZiB0ICYmIHIucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgfSkodCksCiAgICAgICAgICAgICAgICAgIHIpOwogICAgICAgIH0pLAogICAgICAgIChfLmJ1dHRvblNlbGVjdG9yID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIHZhciBjID0gW10sCiAgICAgICAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8sIGksIHMgPSAwLCByID0gbi5sZW5ndGg7IHMgPCByOyBzKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA9IG5bc10pICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQucHVzaCh7IG5vZGU6IG8ubm9kZSwgbmFtZTogby5jb25mLm5hbWUsIGlkeDogKGkgPSB2b2lkIDAgIT09IGUgPyBlICsgcyA6IHMgKyAnJykgfSksIG8uYnV0dG9ucykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KHQsIG8uYnV0dG9ucywgaSArICctJyk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1KGUsIG4ucy5idXR0b25zKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lm1hcChlLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5ub2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkgfHwgdCBpbnN0YW5jZW9mIHgpIGZvciAocyA9IDAsIHIgPSB0Lmxlbmd0aDsgcyA8IHI7IHMrKykgZCh0W3NdLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobnVsbCA9PSB0IHx8ICcqJyA9PT0gdCkgZm9yIChzID0gMCwgciA9IGUubGVuZ3RoOyBzIDwgcjsgcysrKSBjLnB1c2goeyBpbnN0OiBuLCBub2RlOiBlW3NdLm5vZGUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdudW1iZXInID09IHR5cGVvZiB0KSBuLnMuYnV0dG9uc1t0XSAmJiBjLnB1c2goeyBpbnN0OiBuLCBub2RlOiBuLnMuYnV0dG9uc1t0XS5ub2RlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gdC5pbmRleE9mKCcsJykpIGZvciAodmFyIGkgPSB0LnNwbGl0KCcsJyksIHMgPSAwLCByID0gaS5sZW5ndGg7IHMgPCByOyBzKyspIGQoaVtzXS50cmltKCksIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodC5tYXRjaCgvXlxkKyhcLVxkKykqJC8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB4Lm1hcChlLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pZHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKHsgaW5zdDogbiwgbm9kZTogZVt4LmluQXJyYXkodCwgYSldLm5vZGUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC0xICE9PSB0LmluZGV4T2YoJzpuYW1lJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHQucmVwbGFjZSgnOm5hbWUnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChzID0gMCwgciA9IGUubGVuZ3RoOyBzIDwgcjsgcysrKSBlW3NdLm5hbWUgPT09IGwgJiYgYy5wdXNoKHsgaW5zdDogbiwgbm9kZTogZVtzXS5ub2RlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeChvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMucHVzaCh7IGluc3Q6IG4sIG5vZGU6IHRoaXMgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlICdvYmplY3QnID09IHR5cGVvZiB0ICYmIHQubm9kZU5hbWUgJiYgLTEgIT09IChhID0geC5pbkFycmF5KHQsIG8pKSAmJiBjLnB1c2goeyBpbnN0OiBuLCBub2RlOiBvW2FdIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZSA9IDAsCiAgICAgICAgICAgICAgICAgICAgbyA9IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgZSA8IG87CiAgICAgICAgICAgICAgICBlKysKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9IHRbZV07CiAgICAgICAgICAgICAgICBkKG4sIGkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgIH0pLAogICAgICAgIChfLnN0cmlwRGF0YSA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgIHJldHVybiAodCA9CiAgICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJgogICAgICAgICAgICAgICAgKCh0ID0gXy5zdHJpcEh0bWxTY3JpcHQodCkpLAogICAgICAgICAgICAgICAgKHQgPSBfLnN0cmlwSHRtbENvbW1lbnRzKHQpKSwKICAgICAgICAgICAgICAgIChuICYmICFuLnN0cmlwSHRtbCkgfHwgKHQgPSBlLnV0aWwuc3RyaXBIdG1sKHQpKSwKICAgICAgICAgICAgICAgIChuICYmICFuLnRyaW0pIHx8ICh0ID0gdC50cmltKCkpLAogICAgICAgICAgICAgICAgKG4gJiYgIW4uc3RyaXBOZXdsaW5lcykgfHwgKHQgPSB0LnJlcGxhY2UoL1xuL2csICcgJykpLAogICAgICAgICAgICAgICAgIW4gfHwgbi5kZWNvZGVFbnRpdGllcykKICAgICAgICAgICAgICAgICAgICA/IGkKICAgICAgICAgICAgICAgICAgICAgICAgPyBpKHQpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKChjLmlubmVySFRNTCA9IHQpLCBjLnZhbHVlKQogICAgICAgICAgICAgICAgICAgIDogdCk7CiAgICAgICAgfSksCiAgICAgICAgKF8uZW50aXR5RGVjb2RlciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIGkgPSB0OwogICAgICAgIH0pLAogICAgICAgIChfLnN0cmlwSHRtbENvbW1lbnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgbjsgKHQgPSAobiA9IHQpLnJlcGxhY2UoLyg8IS0tLio/LS0hPz4pfCg8IS0tW1xTXHNdKz8tLSE/Pil8KDwhLS1bXFNcc10qPyQpL2csICcnKSkgIT09IG47ICk7CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pLAogICAgICAgIChfLnN0cmlwSHRtbFNjcmlwdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIGZvciAodmFyIG47ICh0ID0gKG4gPSB0KS5yZXBsYWNlKC88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdFtePl0qPik8W148XSopKjxcL3NjcmlwdFtePl0qPi9naSwgJycpKSAhPT0gbjsgKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSksCiAgICAgICAgKF8uZGVmYXVsdHMgPSB7CiAgICAgICAgICAgIGJ1dHRvbnM6IFsnY29weScsICdleGNlbCcsICdjc3YnLCAncGRmJywgJ3ByaW50J10sCiAgICAgICAgICAgIG5hbWU6ICdtYWluJywKICAgICAgICAgICAgdGFiSW5kZXg6IDAsCiAgICAgICAgICAgIGRvbTogewogICAgICAgICAgICAgICAgY29udGFpbmVyOiB7IHRhZzogJ2RpdicsIGNsYXNzTmFtZTogJ2R0LWJ1dHRvbnMnIH0sCiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiB7IGRyb3BIdG1sOiAnPHNwYW4gY2xhc3M9ImR0LWJ1dHRvbi1kb3duLWFycm93Ij4mI3gyNUJDOzwvc3Bhbj4nIH0sCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiB7IGNsYXNzTmFtZTogJ2R0LWJ1dHRvbi1jb2xsZWN0aW9uJywgY29udGVudDogeyBjbGFzc05hbWU6ICcnLCB0YWc6ICdkaXYnIH0sIHRhZzogJ2RpdicgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBidXR0b246IHsKICAgICAgICAgICAgICAgICAgICB0YWc6ICdidXR0b24nLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2R0LWJ1dHRvbicsCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAnZHQtYnV0dG9uLWFjdGl2ZScsCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICdkaXNhYmxlZCcsCiAgICAgICAgICAgICAgICAgICAgc3BhY2VyOiB7IGNsYXNzTmFtZTogJ2R0LWJ1dHRvbi1zcGFjZXInLCB0YWc6ICdzcGFuJyB9LAogICAgICAgICAgICAgICAgICAgIGxpbmVyOiB7IHRhZzogJ3NwYW4nLCBjbGFzc05hbWU6ICcnIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3BsaXQ6IHsKICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHsgY2xhc3NOYW1lOiAnZHQtYnV0dG9uLXNwbGl0LWRyb3AtYnV0dG9uIGR0LWJ1dHRvbicsIHRhZzogJ2J1dHRvbicgfSwKICAgICAgICAgICAgICAgICAgICBkcm9wZG93bjogewogICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ3NwbGl0LXJpZ2h0JywKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHQtYnV0dG9uLXNwbGl0LWRyb3AnLAogICAgICAgICAgICAgICAgICAgICAgICBkcm9wSHRtbDogJzxzcGFuIGNsYXNzPSJkdC1idXR0b24tZG93bi1hcnJvdyI+JiN4MjVCQzs8L3NwYW4+JywKICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRBbGlnbkNsYXNzOiAnZHQtYnV0dG9uLXNwbGl0LWxlZnQnLAogICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICdidXR0b24nLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgd3JhcHBlcjogeyBjbGFzc05hbWU6ICdkdC1idXR0b24tc3BsaXQnLCB0YWc6ICdkaXYnIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIHguZXh0ZW5kKHcsIHsKICAgICAgICAgICAgY29sbGVjdGlvbjogewogICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLmNvbGxlY3Rpb24nLCAnQ29sbGVjdGlvbicpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtY29sbGVjdGlvbicsCiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbjogIShfLnZlcnNpb24gPSAnMy4xLjInKSwKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgbi5hdHRyKCdhcmlhLWV4cGFuZGVkJywgITEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQsIG4sIGUsIG8pIHsKICAgICAgICAgICAgICAgICAgICBvLl9jb2xsZWN0aW9uLnBhcmVudHMoJ2JvZHknKS5sZW5ndGggPyB0aGlzLnBvcG92ZXIoITEsIG8pIDogdGhpcy5wb3BvdmVyKG8uX2NvbGxlY3Rpb24sIG8pLAogICAgICAgICAgICAgICAgICAgICAgICAna2V5cHJlc3MnID09PSB0LnR5cGUgJiYgeCgnYSwgYnV0dG9uJywgby5fY29sbGVjdGlvbikuZXEoMCkuZm9jdXMoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWhhc3BvcHVwJzogJ2RpYWxvZycgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3BsaXQ6IHsKICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignYnV0dG9ucy5zcGxpdCcsICdTcGxpdCcpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtc3BsaXQnLAogICAgICAgICAgICAgICAgY2xvc2VCdXR0b246ICExLAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hdHRyKCdhcmlhLWV4cGFuZGVkJywgITEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHQsIG4sIGUsIG8pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcG92ZXIoby5fY29sbGVjdGlvbiwgbyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1oYXNwb3B1cCc6ICdkaWFsb2cnIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvcHk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICh3LmNvcHlIdG1sNSkgcmV0dXJuICdjb3B5SHRtbDUnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjc3Y6IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICBpZiAody5jc3ZIdG1sNSAmJiB3LmNzdkh0bWw1LmF2YWlsYWJsZSh0LCBuKSkgcmV0dXJuICdjc3ZIdG1sNSc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4Y2VsOiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgICAgaWYgKHcuZXhjZWxIdG1sNSAmJiB3LmV4Y2VsSHRtbDUuYXZhaWxhYmxlKHQsIG4pKSByZXR1cm4gJ2V4Y2VsSHRtbDUnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBwZGY6IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICBpZiAody5wZGZIdG1sNSAmJiB3LnBkZkh0bWw1LmF2YWlsYWJsZSh0LCBuKSkgcmV0dXJuICdwZGZIdG1sNSc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhZ2VMZW5ndGg6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHQuc2V0dGluZ3MoKVswXS5hTGVuZ3RoTWVudSwKICAgICAgICAgICAgICAgICAgICBlID0gW10sCiAgICAgICAgICAgICAgICAgICAgbyA9IFtdOwogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoblswXSkpIChlID0gblswXSksIChvID0gblsxXSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gbltpXTsKICAgICAgICAgICAgICAgICAgICAgICAgeC5pc1BsYWluT2JqZWN0KHMpID8gKGUucHVzaChzLnZhbHVlKSwgby5wdXNoKHMubGFiZWwpKSA6IChlLnB1c2gocyksIG8ucHVzaChzKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBleHRlbmQ6ICdjb2xsZWN0aW9uJywKICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLnBhZ2VMZW5ndGgnLCB7ICctMSc6ICdTaG93IGFsbCByb3dzJywgXzogJ1Nob3cgJWQgcm93cycgfSwgdC5wYWdlLmxlbigpKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtcGFnZS1sZW5ndGgnLAogICAgICAgICAgICAgICAgICAgIGF1dG9DbG9zZTogITAsCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogeC5tYXAoZSwgZnVuY3Rpb24gKHMsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9bdF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b24tcGFnZS1sZW5ndGgnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucGFnZS5sZW4ocykuZHJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hY3RpdmUodC5wYWdlLmxlbigpID09PSBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQub24oJ2xlbmd0aC5kdCcgKyBlLm5hbWVzcGFjZSwgbyksIG8oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAodCwgbiwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQub2ZmKCdsZW5ndGguZHQnICsgZS5uYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAodCwgbiwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHQub24oJ2xlbmd0aC5kdCcgKyBlLm5hbWVzcGFjZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby50ZXh0KGUudGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKHQsIG4sIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdC5vZmYoJ2xlbmd0aC5kdCcgKyBlLm5hbWVzcGFjZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNwYWNlcjogewogICAgICAgICAgICAgICAgc3R5bGU6ICdlbXB0eScsCiAgICAgICAgICAgICAgICBzcGFjZXI6ICEwLAogICAgICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLnNwYWNlcicsICcnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbnMoKScsIGZ1bmN0aW9uIChuLCBlKSB7CiAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoKGUgPSBuKSwgKG4gPSB2b2lkIDApKSwgKHRoaXMuc2VsZWN0b3IuYnV0dG9uR3JvdXAgPSBuKTsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLml0ZXJhdG9yKAogICAgICAgICAgICAgICAgITAsCiAgICAgICAgICAgICAgICAndGFibGUnLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodC5fYnV0dG9ucykgcmV0dXJuIF8uYnV0dG9uU2VsZWN0b3IoXy5pbnN0YW5jZVNlbGVjdG9yKG4sIHQuX2J1dHRvbnMpLCBlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAhMCwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICh0Ll9ncm91cFNlbGVjdG9yID0gbiksIHQ7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbigpJywgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgdCA9IHRoaXMuYnV0dG9ucyh0LCBuKTsKICAgICAgICAgICAgcmV0dXJuIDEgPCB0Lmxlbmd0aCAmJiB0LnNwbGljZSgxLCB0Lmxlbmd0aCksIHQ7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXJQbHVyYWwoJ2J1dHRvbnMoKS5hY3RpdmUoKScsICdidXR0b24oKS5hY3RpdmUoKScsIGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IG4KICAgICAgICAgICAgICAgID8gdGhpcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lmluc3QuYWN0aXZlKHQubm9kZSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6IHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgdC5pbnN0LmFjdGl2ZSh0Lm5vZGUsIG4pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBlLkFwaS5yZWdpc3RlclBsdXJhbCgnYnV0dG9ucygpLmFjdGlvbigpJywgJ2J1dHRvbigpLmFjdGlvbigpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbgogICAgICAgICAgICAgICAgPyB0aGlzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5zdC5hY3Rpb24odC5ub2RlKTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB0Lmluc3QuYWN0aW9uKHQubm9kZSwgbik7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUuQXBpLnJlZ2lzdGVyUGx1cmFsKCdidXR0b25zKCkuY29sbGVjdGlvblJlYnVpbGQoKScsICdidXR0b24oKS5jb2xsZWN0aW9uUmVidWlsZCgpJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSAnb2JqZWN0JyA9PSB0eXBlb2YgZVtuXSAmJiAoZVtuXS5wYXJlbnRDb25mID0gdCk7CiAgICAgICAgICAgICAgICB0Lmluc3QuY29sbGVjdGlvblJlYnVpbGQodC5ub2RlLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoWydidXR0b25zKCkuZW5hYmxlKCknLCAnYnV0dG9uKCkuZW5hYmxlKCknXSwgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5pbnN0LmVuYWJsZSh0Lm5vZGUsIG4pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBlLkFwaS5yZWdpc3RlcihbJ2J1dHRvbnMoKS5kaXNhYmxlKCknLCAnYnV0dG9uKCkuZGlzYWJsZSgpJ10sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdC5pbnN0LmRpc2FibGUodC5ub2RlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbigpLmluZGV4KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBuID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHQgPSB0Lmluc3QuaW5kZXgodC5ub2RlKTsKICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0ICYmIChuID0gdCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICBlLkFwaS5yZWdpc3RlclBsdXJhbCgnYnV0dG9ucygpLm5vZGVzKCknLCAnYnV0dG9uKCkubm9kZSgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbiA9IHgoKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHgoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuLmFkZCh0Lmluc3Qubm9kZSh0Lm5vZGUpKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXJQbHVyYWwoJ2J1dHRvbnMoKS5wcm9jZXNzaW5nKCknLCAnYnV0dG9uKCkucHJvY2Vzc2luZygpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbgogICAgICAgICAgICAgICAgPyB0aGlzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5zdC5wcm9jZXNzaW5nKHQubm9kZSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6IHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgdC5pbnN0LnByb2Nlc3NpbmcodC5ub2RlLCBuKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXJQbHVyYWwoJ2J1dHRvbnMoKS50ZXh0KCknLCAnYnV0dG9uKCkudGV4dCgpJywgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbgogICAgICAgICAgICAgICAgPyB0aGlzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5zdC50ZXh0KHQubm9kZSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6IHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgdC5pbnN0LnRleHQodC5ub2RlLCBuKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXJQbHVyYWwoJ2J1dHRvbnMoKS50cmlnZ2VyKCknLCAnYnV0dG9uKCkudHJpZ2dlcigpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0Lmluc3Qubm9kZSh0Lm5vZGUpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUuQXBpLnJlZ2lzdGVyKCdidXR0b24oKS5wb3BvdmVyKCknLCBmdW5jdGlvbiAobiwgZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0Lmluc3QuX3BvcG92ZXIobiwgdGhpcy5idXR0b24odGhpc1swXS5ub2RlKSwgZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGUuQXBpLnJlZ2lzdGVyKCdidXR0b25zKCkuY29udGFpbmVycygpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaSA9IHgoKSwKICAgICAgICAgICAgICAgIHMgPSB0aGlzLl9ncm91cFNlbGVjdG9yOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcighMCwgJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodC5fYnV0dG9ucykKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IF8uaW5zdGFuY2VTZWxlY3RvcihzLCB0Ll9idXR0b25zKSwgZSA9IDAsIG8gPSBuLmxlbmd0aDsgZSA8IG87IGUrKykgaSA9IGkuYWRkKG5bZV0uY29udGFpbmVyKCkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbnMoKS5jb250YWluZXIoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVycygpLmVxKDApOwogICAgICAgIH0pLAogICAgICAgIGUuQXBpLnJlZ2lzdGVyKCdidXR0b24oKS5hZGQoKScsIGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgby5sZW5ndGggJiYgKG8gPSBfLmluc3RhbmNlU2VsZWN0b3IodGhpcy5fZ3JvdXBTZWxlY3Rvciwgb1swXS5fYnV0dG9ucykpLmxlbmd0aCAmJiBvWzBdLmFkZChuLCB0LCBlKSwKICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uKHRoaXMuX2dyb3VwU2VsZWN0b3IsIHQpCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbnMoKS5kZXN0cm95KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB0aGlzLnBsdWNrKCdpbnN0JykKICAgICAgICAgICAgICAgICAgICAudW5pcXVlKCkKICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICB0LmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICBlLkFwaS5yZWdpc3RlclBsdXJhbCgnYnV0dG9ucygpLnJlbW92ZSgpJywgJ2J1dHRvbnMoKS5yZW1vdmUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHQuaW5zdC5yZW1vdmUodC5ub2RlKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIGUuQXBpLnJlZ2lzdGVyKCdidXR0b25zLmluZm8oKScsIGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICExID09PSB0CiAgICAgICAgICAgICAgICAgICAgPyAodGhpcy5vZmYoJ2Rlc3Ryb3kuYnRuLWluZm8nKSwKICAgICAgICAgICAgICAgICAgICAgIHkoeCgnI2RhdGF0YWJsZXNfYnV0dG9uc19pbmZvJyksIDQwMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHgodGhpcykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzKSwKICAgICAgICAgICAgICAgICAgICAgIChzID0gbnVsbCkpCiAgICAgICAgICAgICAgICAgICAgOiAocyAmJiBjbGVhclRpbWVvdXQocyksCiAgICAgICAgICAgICAgICAgICAgICB4KCcjZGF0YXRhYmxlc19idXR0b25zX2luZm8nKS5sZW5ndGggJiYgeCgnI2RhdGF0YWJsZXNfYnV0dG9uc19pbmZvJykucmVtb3ZlKCksCiAgICAgICAgICAgICAgICAgICAgICAodCA9IHQgPyAnPGgyPicgKyB0ICsgJzwvaDI+JyA6ICcnKSwKICAgICAgICAgICAgICAgICAgICAgIHYoCiAgICAgICAgICAgICAgICAgICAgICAgICAgeCgnPGRpdiBpZD0iZGF0YXRhYmxlc19idXR0b25zX2luZm8iIGNsYXNzPSJkdC1idXR0b24taW5mbyIvPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoeCgnPGRpdi8+JylbJ3N0cmluZycgPT0gdHlwZW9mIG4gPyAnaHRtbCcgOiAnYXBwZW5kJ10obikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbygnYm9keScpLAogICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIDAgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAocyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmJ1dHRvbnMuaW5mbyghMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkpLAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbignZGVzdHJveS5idG4taW5mbycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBvLmJ1dHRvbnMuaW5mbyghMSk7CiAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgZS5BcGkucmVnaXN0ZXIoJ2J1dHRvbnMuZXhwb3J0RGF0YSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dC5sZW5ndGgpIHJldHVybiB1KG5ldyBlLkFwaSh0aGlzLmNvbnRleHRbMF0pLCB0KTsKICAgICAgICB9KSwKICAgICAgICBlLkFwaS5yZWdpc3RlcignYnV0dG9ucy5leHBvcnRJbmZvKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgZmlsZW5hbWU6IG4oKHQgPSB0IHx8IHt9KSwgdGhpcyksCiAgICAgICAgICAgICAgICB0aXRsZTogYSh0LCB0aGlzKSwKICAgICAgICAgICAgICAgIG1lc3NhZ2VUb3A6IGwodGhpcywgdCwgdC5tZXNzYWdlIHx8IHQubWVzc2FnZVRvcCwgJ3RvcCcpLAogICAgICAgICAgICAgICAgbWVzc2FnZUJvdHRvbTogbCh0aGlzLCB0LCB0Lm1lc3NhZ2VCb3R0b20sICdib3R0b20nKSwKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKICAgIHZhciBzLAogICAgICAgIG4gPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0KICAgICAgICAgICAgICAgIChlID0KICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09CiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIChlID0KICAgICAgICAgICAgICAgICAgICAgICAgJyonID09PSB0LmZpbGVuYW1lICYmICcqJyAhPT0gdC50aXRsZSAmJiB2b2lkIDAgIT09IHQudGl0bGUgJiYgbnVsbCAhPT0gdC50aXRsZSAmJiAnJyAhPT0gdC50aXRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0LnRpdGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQuZmlsZW5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgID8gZSh0LCBuKQogICAgICAgICAgICAgICAgICAgICAgICA6IGUpCiAgICAgICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgICAgIDogKGUgPSAoZSA9IC0xICE9PSBlLmluZGV4T2YoJyonKSA/IGUucmVwbGFjZSgvXCovZywgeCgnaGVhZCA+IHRpdGxlJykudGV4dCgpKS50cmltKCkgOiBlKS5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgL1teYS16QS1aMC05X1x1MDBBMS1cdUZGRkZcLixcLV8gIVwoXCldL2csCiAgICAgICAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgKSkgKyAocih0LmV4dGVuc2lvbiwgdCwgbikgfHwgJycpOwogICAgICAgIH0sCiAgICAgICAgciA9IGZ1bmN0aW9uICh0LCBuLCBlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBudWxsIDogJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA/IHQobiwgZSkgOiB0OwogICAgICAgIH0sCiAgICAgICAgYSA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgIHQgPSByKHQudGl0bGUsIHQsIG4pOwogICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gdCA/IG51bGwgOiAtMSAhPT0gdC5pbmRleE9mKCcqJykgPyB0LnJlcGxhY2UoL1wqL2csIHgoJ2hlYWQgPiB0aXRsZScpLnRleHQoKSB8fCAnRXhwb3J0ZWQgZGF0YScpIDogdDsKICAgICAgICB9LAogICAgICAgIGwgPSBmdW5jdGlvbiAodCwgbiwgZSwgbykgewogICAgICAgICAgICBlID0gcihlLCBuLCB0KTsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUKICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgOiAoKG4gPSB4KCdjYXB0aW9uJywgdC50YWJsZSgpLmNvbnRhaW5lcigpKS5lcSgwKSksCiAgICAgICAgICAgICAgICAgICcqJyA9PT0gZSA/IChuLmNzcygnY2FwdGlvbi1zaWRlJykgIT09IG8gPyBudWxsIDogbi5sZW5ndGggPyBuLnRleHQoKSA6ICcnKSA6IGUpOwogICAgICAgIH0sCiAgICAgICAgYyA9IHgoJzx0ZXh0YXJlYS8+JylbMF0sCiAgICAgICAgdSA9IGZ1bmN0aW9uIChpLCB0KSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICB2YXIgcyA9IHguZXh0ZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAhMCwKICAgICAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyOiB7IHNlYXJjaDogJ2FwcGxpZWQnLCBvcmRlcjogJ2FwcGxpZWQnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcnRob2dvbmFsOiAnZGlzcGxheScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpcEh0bWw6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBOZXdsaW5lczogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVFbnRpdGllczogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmltOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uc3RyaXBEYXRhKHQsIHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5zdHJpcERhdGEodCwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5zdHJpcERhdGEodCwgcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21pemVEYXRhOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9taXplWmlwOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0LAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgdCA9IGkKICAgICAgICAgICAgICAgICAgICAgICAgLmNvbHVtbnMocy5jb2x1bW5zKQogICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhlcygpCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gaS5jb2x1bW4odCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5mb3JtYXQuaGVhZGVyKG4udGl0bGUoKSwgdCwgbi5oZWFkZXIoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgICAgbiA9IGkudGFibGUoKS5mb290ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICA/IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbHVtbnMocy5jb2x1bW5zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhlcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBpLmNvbHVtbih0KS5mb290ZXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiAobyA9ICgobiA9IHgoJy5kdC1jb2x1bW4tdGl0bGUnLCBlKSkubGVuZ3RoID8gbiA6IHgoZSkpLmh0bWwoKSksIHMuZm9ybWF0LmZvb3RlcihvLCB0LCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoKQogICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZSA9IHguZXh0ZW5kKHt9LCBzLm1vZGlmaWVyKSwKICAgICAgICAgICAgICAgICAgICBvID0KICAgICAgICAgICAgICAgICAgICAgICAgKGkuc2VsZWN0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBpLnNlbGVjdC5pbmZvICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUuc2VsZWN0ZWQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucm93cyhzLnJvd3MsIHguZXh0ZW5kKHsgc2VsZWN0ZWQ6ICEwIH0sIGUpKS5hbnkoKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5leHRlbmQoZSwgeyBzZWxlY3RlZDogITAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGkucm93cyhzLnJvd3MsIGUpLmluZGV4ZXMoKS50b0FycmF5KCkpLAogICAgICAgICAgICAgICAgICAgIG8gPSBpLmNlbGxzKG8sIHMuY29sdW1ucywgeyBvcmRlcjogZS5vcmRlciB9KSwKICAgICAgICAgICAgICAgICAgICByID0gby5yZW5kZXIocy5vcnRob2dvbmFsKS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgICAgYSA9IG8ubm9kZXMoKS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgICAgbCA9IG8uaW5kZXhlcygpLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgICBjID0gaS5jb2x1bW5zKHMuY29sdW1ucykuY291bnQoKSwKICAgICAgICAgICAgICAgICAgICB1ID0gW10sCiAgICAgICAgICAgICAgICAgICAgZCA9IDAsCiAgICAgICAgICAgICAgICAgICAgZiA9IDAsCiAgICAgICAgICAgICAgICAgICAgcCA9IDAgPCBjID8gci5sZW5ndGggLyBjIDogMDsKICAgICAgICAgICAgICAgIGYgPCBwOwogICAgICAgICAgICAgICAgZisrCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaCA9IFtjXSwgYiA9IDA7IGIgPCBjOyBiKyspIChoW2JdID0gcy5mb3JtYXQuYm9keShyW2RdLCBsW2RdLnJvdywgbFtkXS5jb2x1bW4sIGFbZF0pKSwgZCsrOwogICAgICAgICAgICAgICAgdVtmXSA9IGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZSA9IHsKICAgICAgICAgICAgICAgIGhlYWRlcjogdCwKICAgICAgICAgICAgICAgIGhlYWRlclN0cnVjdHVyZTogQShzLmZvcm1hdC5oZWFkZXIsIGkudGFibGUoKS5oZWFkZXIuc3RydWN0dXJlKHMuY29sdW1ucykpLAogICAgICAgICAgICAgICAgZm9vdGVyOiBuLAogICAgICAgICAgICAgICAgZm9vdGVyU3RydWN0dXJlOiBBKHMuZm9ybWF0LmZvb3RlciwgaS50YWJsZSgpLmZvb3Rlci5zdHJ1Y3R1cmUocy5jb2x1bW5zKSksCiAgICAgICAgICAgICAgICBib2R5OiB1LAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gcy5jdXN0b21pemVEYXRhICYmIHMuY3VzdG9taXplRGF0YShlKSwgZTsKICAgICAgICB9OwogICAgZnVuY3Rpb24gQSh0LCBuKSB7CiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBuLmxlbmd0aDsgZSsrKQogICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IG5bZV0ubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgICAgIHZhciBpID0gbltlXVtvXTsKICAgICAgICAgICAgICAgIGkgJiYgKGkudGl0bGUgPSB0KGkudGl0bGUsIG8sIGkuY2VsbCkpOwogICAgICAgICAgICB9CiAgICAgICAgcmV0dXJuIG47CiAgICB9CiAgICBmdW5jdGlvbiB0KHQsIG4pIHsKICAgICAgICAodCA9IG5ldyBlLkFwaSh0KSksIChuID0gbiB8fCB0LmluaXQoKS5idXR0b25zIHx8IGUuZGVmYXVsdHMuYnV0dG9ucyk7CiAgICAgICAgcmV0dXJuIG5ldyBfKHQsIG4pLmNvbnRhaW5lcigpOwogICAgfQogICAgcmV0dXJuICgKICAgICAgICAoeC5mbi5kYXRhVGFibGUuQnV0dG9ucyA9IF8pLAogICAgICAgICh4LmZuLkRhdGFUYWJsZS5CdXR0b25zID0gXyksCiAgICAgICAgeChtKS5vbignaW5pdC5kdCBwbHVnaW4taW5pdC5kdCcsIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICdkdCcgPT09IHQubmFtZXNwYWNlICYmICh0ID0gbi5vSW5pdC5idXR0b25zIHx8IGUuZGVmYXVsdHMuYnV0dG9ucykgJiYgIW4uX2J1dHRvbnMgJiYgbmV3IF8obiwgdCkuY29udGFpbmVyKCk7CiAgICAgICAgfSksCiAgICAgICAgZS5leHQuZmVhdHVyZS5wdXNoKHsgZm5Jbml0OiB0LCBjRmVhdHVyZTogJ0InIH0pLAogICAgICAgIGUuZmVhdHVyZSAmJiBlLmZlYXR1cmUucmVnaXN0ZXIoJ2J1dHRvbnMnLCB0KSwKICAgICAgICBlCiAgICApOwp9KTsKCi8qISBEYXRhVGFibGVzIHN0eWxpbmcgd3JhcHBlciBmb3IgQnV0dG9ucwogKiDCqSBTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKi8KIShmdW5jdGlvbiAobikgewogICAgdmFyIG8sIGQ7CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0LWR0JywgJ2RhdGF0YWJsZXMubmV0LWJ1dHRvbnMnXSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gbihlLCB3aW5kb3csIGRvY3VtZW50KTsKICAgICAgICAgIH0pCiAgICAgICAgOiAnb2JqZWN0JyA9PSB0eXBlb2YgZXhwb3J0cwogICAgICAgID8gKChvID0gcmVxdWlyZSgnanF1ZXJ5JykpLAogICAgICAgICAgKGQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIHQuZm4uZGF0YVRhYmxlIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0LWR0JykoZSwgdCksIHQuZm4uZGF0YVRhYmxlLkJ1dHRvbnMgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQtYnV0dG9ucycpKGUsIHQpOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGUgfHwgd2luZG93KSwgKHQgPSB0IHx8IG8oZSkpLCBkKGUsIHQpLCBuKHQsIDAsIGUuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChkKHdpbmRvdywgbyksIChtb2R1bGUuZXhwb3J0cyA9IG4obywgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiBuKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICByZXR1cm4gZS5mbi5kYXRhVGFibGU7Cn0pOwoKLyohCiAqIEhUTUw1IGV4cG9ydCBidXR0b25zIGZvciBCdXR0b25zIGFuZCBEYXRhVGFibGVzLgogKiDCqSBTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKgogKiBGaWxlU2F2ZXIuanMgKDEuMy4zKSAtIE1JVCBsaWNlbnNlCiAqIENvcHlyaWdodCDCqSAyMDE2IEVsaSBHcmV5IC0gaHR0cDovL2VsaWdyZXkuY29tCiAqLwohKGZ1bmN0aW9uIChvKSB7CiAgICB2YXIgbCwgbjsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnLCAnZGF0YXRhYmxlcy5uZXQtYnV0dG9ucyddLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBvKHQsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGwgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAobiA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgZS5mbi5kYXRhVGFibGUgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQnKSh0LCBlKSwgZS5mbi5kYXRhVGFibGUuQnV0dG9ucyB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldC1idXR0b25zJykodCwgZSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdCB8fCB3aW5kb3cpLCAoZSA9IGUgfHwgbCh0KSksIG4odCwgZSksIG8oZSwgdCwgdC5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKG4od2luZG93LCBsKSwgKG1vZHVsZS5leHBvcnRzID0gbyhsLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IG8oalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKFMsIEMsIHUpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBlLAogICAgICAgIG8sCiAgICAgICAgdCA9IFMuZm4uZGF0YVRhYmxlOwogICAgZnVuY3Rpb24gVCgpIHsKICAgICAgICByZXR1cm4gZSB8fCBDLkpTWmlwOwogICAgfQogICAgZnVuY3Rpb24gcygpIHsKICAgICAgICByZXR1cm4gbyB8fCBDLnBkZk1ha2U7CiAgICB9CiAgICAodC5CdXR0b25zLnBkZk1ha2UgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmICghdCkgcmV0dXJuIHMoKTsKICAgICAgICBvID0gdDsKICAgIH0pLAogICAgICAgICh0LkJ1dHRvbnMuanN6aXAgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBpZiAoIXQpIHJldHVybiBUKCk7CiAgICAgICAgICAgIGUgPSB0OwogICAgICAgIH0pOwogICAgZnVuY3Rpb24gayh0KSB7CiAgICAgICAgdmFyIGUgPSAnU2hlZXQxJzsKICAgICAgICByZXR1cm4gKGUgPSB0LnNoZWV0TmFtZSA/IHQuc2hlZXROYW1lLnJlcGxhY2UoL1tcW1xdXCpcL1xcXD9cOl0vZywgJycpIDogZSk7CiAgICB9CiAgICBmdW5jdGlvbiBjKHQsIGUpIHsKICAgICAgICBmdW5jdGlvbiBvKHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSA9ICcnLCBvID0gMCwgbCA9IHQubGVuZ3RoOyBvIDwgbDsgbysrKSAwIDwgbyAmJiAoZSArPSBhKSwgKGUgKz0gciA/IHIgKyAoJycgKyB0W29dKS5yZXBsYWNlKGQsIHAgKyByKSArIHIgOiB0W29dKTsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfQogICAgICAgIHZhciBsID0geShlKSwKICAgICAgICAgICAgbiA9IHQuYnV0dG9ucy5leHBvcnREYXRhKGUuZXhwb3J0T3B0aW9ucyksCiAgICAgICAgICAgIHIgPSBlLmZpZWxkQm91bmRhcnksCiAgICAgICAgICAgIGEgPSBlLmZpZWxkU2VwYXJhdG9yLAogICAgICAgICAgICBkID0gbmV3IFJlZ0V4cChyLCAnZycpLAogICAgICAgICAgICBwID0gdm9pZCAwICE9PSBlLmVzY2FwZUNoYXIgPyBlLmVzY2FwZUNoYXIgOiAnXFwnLAogICAgICAgICAgICB0ID0gJycsCiAgICAgICAgICAgIGkgPSAnJywKICAgICAgICAgICAgZiA9IFtdOwogICAgICAgIGUuaGVhZGVyICYmCiAgICAgICAgICAgICh0ID0KICAgICAgICAgICAgICAgIG4uaGVhZGVyU3RydWN0dXJlCiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0LnRpdGxlIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5qb2luKGwpICsgbCksCiAgICAgICAgICAgIGUuZm9vdGVyICYmCiAgICAgICAgICAgICAgICBuLmZvb3RlciAmJgogICAgICAgICAgICAgICAgKGkgPQogICAgICAgICAgICAgICAgICAgIG4uZm9vdGVyU3RydWN0dXJlCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdC50aXRsZSA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4obCkgKyBsKTsKICAgICAgICBmb3IgKHZhciBzID0gMCwgbSA9IG4uYm9keS5sZW5ndGg7IHMgPCBtOyBzKyspIGYucHVzaChvKG4uYm9keVtzXSkpOwogICAgICAgIHJldHVybiB7IHN0cjogdCArIGYuam9pbihsKSArIGwgKyBpLCByb3dzOiBmLmxlbmd0aCB9OwogICAgfQogICAgZnVuY3Rpb24gbSgpIHsKICAgICAgICB2YXIgdDsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAtMSAhPT0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSAmJgogICAgICAgICAgICAtMSA9PT0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSAmJgogICAgICAgICAgICAtMSA9PT0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdPcGVyYScpICYmCiAgICAgICAgICAgICEhKCh0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcLyhcZCtcLlxkKykvKSkgJiYgMSA8IHQubGVuZ3RoICYmICt0WzFdIDwgNjAzLjEpCiAgICAgICAgKTsKICAgIH0KICAgIHZhciBOID0gKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHZhciBwLCBpLCBmLCBzLCBtLCB1LCBlLCBjLCB5LCBsLCB0OwogICAgICAgICAgICBpZiAoISh2b2lkIDAgPT09IGQgfHwgKCd1bmRlZmluZWQnICE9IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL01TSUUgWzEtOV1cLi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkpKQogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAodCA9IGQuZG9jdW1lbnQpLAogICAgICAgICAgICAgICAgICAgIChwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5VUkwgfHwgZC53ZWJraXRVUkwgfHwgZDsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAoaSA9IHQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJywgJ2EnKSksCiAgICAgICAgICAgICAgICAgICAgKGYgPSAnZG93bmxvYWQnIGluIGkpLAogICAgICAgICAgICAgICAgICAgIChzID0gL2NvbnN0cnVjdG9yL2kudGVzdChkLkhUTUxFbGVtZW50KSB8fCBkLnNhZmFyaSksCiAgICAgICAgICAgICAgICAgICAgKG0gPSAvQ3JpT1NcL1tcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSwKICAgICAgICAgICAgICAgICAgICAodSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChkLnNldEltbWVkaWF0ZSB8fCBkLnNldFRpbWVvdXQpKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIChlID0gNGU0KSwKICAgICAgICAgICAgICAgICAgICAoYyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0cmluZycgPT0gdHlwZW9mIHQgPyBwKCkucmV2b2tlT2JqZWN0VVJMKHQpIDogdC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKHkgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gL15ccyooPzp0ZXh0XC9cUyp8YXBwbGljYXRpb25cL3htbHxcUypcL1xTKlwreG1sKVxzKjsuKmNoYXJzZXRccyo9XHMqdXRmLTgvaS50ZXN0KHQudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoNjUyNzkpLCB0XSwgeyB0eXBlOiB0LnR5cGUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdDsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAodCA9IChsID0gZnVuY3Rpb24gKHQsIG8sIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCAodCA9IHkodCkpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyA9PT0gdC50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gJ3dyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmQnLnNwbGl0KCcgJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IChlID0gW10uY29uY2F0KGUpKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwtLTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdFsnb24nICsgZVtsXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmNhbGwodCwgbyB8fCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIChyLnJlYWR5U3RhdGUgPSByLklOSVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChsID0gcCgpLmNyZWF0ZU9iamVjdFVSTCh0KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5ocmVmID0gbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLmRvd25sb2FkID0gbyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmRpc3BhdGNoRXZlbnQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIucmVhZHlTdGF0ZSA9IHIuRE9ORSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChtIHx8IChlICYmIHMpKSAmJiBkLkZpbGVSZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoKG4gPSBuZXcgRmlsZVJlYWRlcigpKS5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBtID8gbi5yZXN1bHQgOiBuLnJlc3VsdC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5vcGVuKHQsICdfYmxhbmsnKSB8fCAoZC5sb2NhdGlvbi5ocmVmID0gdCksIChyLnJlYWR5U3RhdGUgPSByLkRPTkUpLCBhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucmVhZEFzRGF0YVVSTCh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLnJlYWR5U3RhdGUgPSByLklOSVQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChsID0gbCB8fCBwKCkuY3JlYXRlT2JqZWN0VVJMKHQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghZSAmJiBkLm9wZW4obCwgJ19ibGFuaycpKSB8fCAoZC5sb2NhdGlvbi5ocmVmID0gbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5yZWFkeVN0YXRlID0gci5ET05FKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMobCkpOwogICAgICAgICAgICAgICAgICAgIH0pLnByb3RvdHlwZSksCiAgICAgICAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYgogICAgICAgICAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGUgfHwgdC5uYW1lIHx8ICdkb3dubG9hZCcpLCBvIHx8ICh0ID0geSh0KSksIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKHQsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHQuYWJvcnQgPSBmdW5jdGlvbiAoKSB7fSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKHQucmVhZHlTdGF0ZSA9IHQuSU5JVCA9IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICh0LldSSVRJTkcgPSAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAodC5ET05FID0gMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuZXJyb3IgPSB0Lm9ud3JpdGVzdGFydCA9IHQub25wcm9ncmVzcyA9IHQub253cml0ZSA9IHQub25hYm9ydCA9IHQub25lcnJvciA9IHQub253cml0ZWVuZCA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbCh0LCBlIHx8IHQubmFtZSB8fCAnZG93bmxvYWQnLCBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKTsKICAgICAgICB9KSgoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIHNlbGYgJiYgc2VsZikgfHwgKHZvaWQgMCAhPT0gQyAmJiBDKSB8fCB0aGlzLmNvbnRlbnQpLAogICAgICAgIHkgPQogICAgICAgICAgICAoKHQuZmlsZVNhdmUgPSBOKSwKICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0Lm5ld2xpbmUgfHwgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MvKSA/ICdcclxuJyA6ICdcbicpOwogICAgICAgICAgICB9KTsKICAgIGZ1bmN0aW9uIE8odCkgewogICAgICAgIGZvciAodmFyIGUgPSAnQScuY2hhckNvZGVBdCgwKSwgbyA9ICdaJy5jaGFyQ29kZUF0KDApIC0gZSArIDEsIGwgPSAnJzsgMCA8PSB0OyApCiAgICAgICAgICAgIChsID0gU3RyaW5nLmZyb21DaGFyQ29kZSgodCAlIG8pICsgZSkgKyBsKSwgKHQgPSBNYXRoLmZsb29yKHQgLyBvKSAtIDEpOwogICAgICAgIHJldHVybiBsOwogICAgfQogICAgdHJ5IHsKICAgICAgICB2YXIgeiwKICAgICAgICAgICAgRSA9IG5ldyBYTUxTZXJpYWxpemVyKCk7CiAgICB9IGNhdGNoICh0KSB7fQogICAgZnVuY3Rpb24gQSh0LCBlLCBvKSB7CiAgICAgICAgdmFyIGwgPSB0LmNyZWF0ZUVsZW1lbnQoZSk7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgbyAmJgogICAgICAgICAgICAgICAgKG8uYXR0ciAmJiBTKGwpLmF0dHIoby5hdHRyKSwKICAgICAgICAgICAgICAgIG8uY2hpbGRyZW4gJiYKICAgICAgICAgICAgICAgICAgICBTLmVhY2goby5jaGlsZHJlbiwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbC5hcHBlbmRDaGlsZChlKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG51bGwgIT09IG8udGV4dCkgJiYKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gby50ZXh0ICYmCiAgICAgICAgICAgICAgICBsLmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KSksCiAgICAgICAgICAgIGwKICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gRCh0LCBlLCBvLCBsLCBuKSB7CiAgICAgICAgdmFyIHIgPSBTKCdtZXJnZUNlbGxzJywgdCk7CiAgICAgICAgclswXS5hcHBlbmRDaGlsZChBKHQsICdtZXJnZUNlbGwnLCB7IGF0dHI6IHsgcmVmOiBPKG8pICsgZSArICc6JyArIE8obyArIG4gLSAxKSArIChlICsgbCAtIDEpIH0gfSkpLAogICAgICAgICAgICByLmF0dHIoJ2NvdW50JywgcGFyc2VGbG9hdChyLmF0dHIoJ2NvdW50JykpICsgMSk7CiAgICB9CiAgICB2YXIgUiA9IHsKICAgICAgICAgICAgJ19yZWxzLy5yZWxzJzoKICAgICAgICAgICAgICAgICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+PFJlbGF0aW9uc2hpcHMgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcyI+PFJlbGF0aW9uc2hpcCBJZD0icklkMSIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9vZmZpY2VEb2N1bWVudCIgVGFyZ2V0PSJ4bC93b3JrYm9vay54bWwiLz48L1JlbGF0aW9uc2hpcHM+JywKICAgICAgICAgICAgJ3hsL19yZWxzL3dvcmtib29rLnhtbC5yZWxzJzoKICAgICAgICAgICAgICAgICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+PFJlbGF0aW9uc2hpcHMgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcyI+PFJlbGF0aW9uc2hpcCBJZD0icklkMSIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy93b3Jrc2hlZXQiIFRhcmdldD0id29ya3NoZWV0cy9zaGVldDEueG1sIi8+PFJlbGF0aW9uc2hpcCBJZD0icklkMiIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zdHlsZXMiIFRhcmdldD0ic3R5bGVzLnhtbCIvPjwvUmVsYXRpb25zaGlwcz4nLAogICAgICAgICAgICAnW0NvbnRlbnRfVHlwZXNdLnhtbCc6CiAgICAgICAgICAgICAgICAnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxUeXBlcyB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9jb250ZW50LXR5cGVzIj48RGVmYXVsdCBFeHRlbnNpb249InhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3htbCIgLz48RGVmYXVsdCBFeHRlbnNpb249InJlbHMiIENvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5yZWxhdGlvbnNoaXBzK3htbCIgLz48RGVmYXVsdCBFeHRlbnNpb249ImpwZWciIENvbnRlbnRUeXBlPSJpbWFnZS9qcGVnIiAvPjxPdmVycmlkZSBQYXJ0TmFtZT0iL3hsL3dvcmtib29rLnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0Lm1haW4reG1sIiAvPjxPdmVycmlkZSBQYXJ0TmFtZT0iL3hsL3dvcmtzaGVldHMvc2hlZXQxLnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWwiIC8+PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvc3R5bGVzLnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnN0eWxlcyt4bWwiIC8+PC9UeXBlcz4nLAogICAgICAgICAgICAneGwvd29ya2Jvb2sueG1sJzoKICAgICAgICAgICAgICAgICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+PHdvcmtib29rIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiPjxmaWxlVmVyc2lvbiBhcHBOYW1lPSJ4bCIgbGFzdEVkaXRlZD0iNSIgbG93ZXN0RWRpdGVkPSI1IiBydXBCdWlsZD0iMjQ4MTYiLz48d29ya2Jvb2tQciBzaG93SW5rQW5ub3RhdGlvbj0iMCIgYXV0b0NvbXByZXNzUGljdHVyZXM9IjAiLz48Ym9va1ZpZXdzPjx3b3JrYm9va1ZpZXcgeFdpbmRvdz0iMCIgeVdpbmRvdz0iMCIgd2luZG93V2lkdGg9IjI1NjAwIiB3aW5kb3dIZWlnaHQ9IjE5MDIwIiB0YWJSYXRpbz0iNTAwIi8+PC9ib29rVmlld3M+PHNoZWV0cz48c2hlZXQgbmFtZT0iU2hlZXQxIiBzaGVldElkPSIxIiByOmlkPSJySWQxIi8+PC9zaGVldHM+PGRlZmluZWROYW1lcy8+PC93b3JrYm9vaz4nLAogICAgICAgICAgICAneGwvd29ya3NoZWV0cy9zaGVldDEueG1sJzoKICAgICAgICAgICAgICAgICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+PHdvcmtzaGVldCB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIiB4bWxuczpyPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzIiB4bWxuczptYz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL21hcmt1cC1jb21wYXRpYmlsaXR5LzIwMDYiIG1jOklnbm9yYWJsZT0ieDE0YWMiIHhtbG5zOngxNGFjPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMDkvOS9hYyI+PHNoZWV0RGF0YS8+PG1lcmdlQ2VsbHMgY291bnQ9IjAiLz48L3dvcmtzaGVldD4nLAogICAgICAgICAgICAneGwvc3R5bGVzLnhtbCc6CiAgICAgICAgICAgICAgICAnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3R5bGVTaGVldCB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIiB4bWxuczptYz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL21hcmt1cC1jb21wYXRpYmlsaXR5LzIwMDYiIG1jOklnbm9yYWJsZT0ieDE0YWMiIHhtbG5zOngxNGFjPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMDkvOS9hYyI+PG51bUZtdHMgY291bnQ9IjYiPjxudW1GbXQgbnVtRm10SWQ9IjE2NCIgZm9ybWF0Q29kZT0iWyQkLTQwOV0jLCMjMC4wMDstWyQkLTQwOV0jLCMjMC4wMCIvPjxudW1GbXQgbnVtRm10SWQ9IjE2NSIgZm9ybWF0Q29kZT0iJnF1b3Q7wqMmcXVvdDsjLCMjMC4wMCIvPjxudW1GbXQgbnVtRm10SWQ9IjE2NiIgZm9ybWF0Q29kZT0iWyTigqwtMl0gIywjIzAuMDAiLz48bnVtRm10IG51bUZtdElkPSIxNjciIGZvcm1hdENvZGU9IjAuMCUiLz48bnVtRm10IG51bUZtdElkPSIxNjgiIGZvcm1hdENvZGU9IiMsIyMwOygjLCMjMCkiLz48bnVtRm10IG51bUZtdElkPSIxNjkiIGZvcm1hdENvZGU9IiMsIyMwLjAwOygjLCMjMC4wMCkiLz48L251bUZtdHM+PGZvbnRzIGNvdW50PSI1IiB4MTRhYzprbm93bkZvbnRzPSIxIj48Zm9udD48c3ogdmFsPSIxMSIgLz48bmFtZSB2YWw9IkNhbGlicmkiIC8+PC9mb250Pjxmb250PjxzeiB2YWw9IjExIiAvPjxuYW1lIHZhbD0iQ2FsaWJyaSIgLz48Y29sb3IgcmdiPSJGRkZGRkZGRiIgLz48L2ZvbnQ+PGZvbnQ+PHN6IHZhbD0iMTEiIC8+PG5hbWUgdmFsPSJDYWxpYnJpIiAvPjxiIC8+PC9mb250Pjxmb250PjxzeiB2YWw9IjExIiAvPjxuYW1lIHZhbD0iQ2FsaWJyaSIgLz48aSAvPjwvZm9udD48Zm9udD48c3ogdmFsPSIxMSIgLz48bmFtZSB2YWw9IkNhbGlicmkiIC8+PHUgLz48L2ZvbnQ+PC9mb250cz48ZmlsbHMgY291bnQ9IjYiPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ibm9uZSIgLz48L2ZpbGw+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJub25lIiAvPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9InNvbGlkIj48ZmdDb2xvciByZ2I9IkZGRDlEOUQ5IiAvPjxiZ0NvbG9yIGluZGV4ZWQ9IjY0IiAvPjwvcGF0dGVybkZpbGw+PC9maWxsPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ic29saWQiPjxmZ0NvbG9yIHJnYj0iRkZEOTk3OTUiIC8+PGJnQ29sb3IgaW5kZXhlZD0iNjQiIC8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJzb2xpZCI+PGZnQ29sb3IgcmdiPSJmZmM2ZWZjZSIgLz48YmdDb2xvciBpbmRleGVkPSI2NCIgLz48L3BhdHRlcm5GaWxsPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9InNvbGlkIj48ZmdDb2xvciByZ2I9ImZmYzZjZmVmIiAvPjxiZ0NvbG9yIGluZGV4ZWQ9IjY0IiAvPjwvcGF0dGVybkZpbGw+PC9maWxsPjwvZmlsbHM+PGJvcmRlcnMgY291bnQ9IjIiPjxib3JkZXI+PGxlZnQgLz48cmlnaHQgLz48dG9wIC8+PGJvdHRvbSAvPjxkaWFnb25hbCAvPjwvYm9yZGVyPjxib3JkZXIgZGlhZ29uYWxVcD0iZmFsc2UiIGRpYWdvbmFsRG93bj0iZmFsc2UiPjxsZWZ0IHN0eWxlPSJ0aGluIj48Y29sb3IgYXV0bz0iMSIgLz48L2xlZnQ+PHJpZ2h0IHN0eWxlPSJ0aGluIj48Y29sb3IgYXV0bz0iMSIgLz48L3JpZ2h0Pjx0b3Agc3R5bGU9InRoaW4iPjxjb2xvciBhdXRvPSIxIiAvPjwvdG9wPjxib3R0b20gc3R5bGU9InRoaW4iPjxjb2xvciBhdXRvPSIxIiAvPjwvYm90dG9tPjxkaWFnb25hbCAvPjwvYm9yZGVyPjwvYm9yZGVycz48Y2VsbFN0eWxlWGZzIGNvdW50PSIxIj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgLz48L2NlbGxTdHlsZVhmcz48Y2VsbFhmcyBjb3VudD0iNjgiPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSIyIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIzIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSIzIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSI0IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSI0IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSI1IiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSIwIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSIyIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iMiIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjIiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSIyIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIxIiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMiIgZmlsbElkPSIzIiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjMiIGZpbGxJZD0iMyIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSI0IiBmaWxsSWQ9IjMiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSI0IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjEiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIyIiBmaWxsSWQ9IjQiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMyIgZmlsbElkPSI0IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjQiIGZpbGxJZD0iNCIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIwIiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMSIgZmlsbElkPSI1IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjIiIGZpbGxJZD0iNSIgYm9yZGVySWQ9IjEiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIvPjx4ZiBudW1GbXRJZD0iMCIgZm9udElkPSIzIiBmaWxsSWQ9IjUiIGJvcmRlcklkPSIxIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiLz48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iNCIgZmlsbElkPSI1IiBib3JkZXJJZD0iMSIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIi8+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlBbGlnbm1lbnQ9IjEiPjxhbGlnbm1lbnQgaG9yaXpvbnRhbD0ibGVmdCIvPjwveGY+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlBbGlnbm1lbnQ9IjEiPjxhbGlnbm1lbnQgaG9yaXpvbnRhbD0iY2VudGVyIi8+PC94Zj48eGYgbnVtRm10SWQ9IjAiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseUFsaWdubWVudD0iMSI+PGFsaWdubWVudCBob3Jpem9udGFsPSJyaWdodCIvPjwveGY+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlBbGlnbm1lbnQ9IjEiPjxhbGlnbm1lbnQgaG9yaXpvbnRhbD0iZmlsbCIvPjwveGY+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlBbGlnbm1lbnQ9IjEiPjxhbGlnbm1lbnQgdGV4dFJvdGF0aW9uPSI5MCIvPjwveGY+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlBbGlnbm1lbnQ9IjEiPjxhbGlnbm1lbnQgd3JhcFRleHQ9IjEiLz48L3hmPjx4ZiBudW1GbXRJZD0iOSIgICBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjE2NCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxNjUiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMTY2IiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjE2NyIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxNjgiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMTY5IiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjMiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iNCIgZm9udElkPSIwIiBmaWxsSWQ9IjAiIGJvcmRlcklkPSIwIiBhcHBseUZvbnQ9IjEiIGFwcGx5RmlsbD0iMSIgYXBwbHlCb3JkZXI9IjEiIHhmSWQ9IjAiIGFwcGx5TnVtYmVyRm9ybWF0PSIxIi8+PHhmIG51bUZtdElkPSIxIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiIGFwcGx5Rm9udD0iMSIgYXBwbHlGaWxsPSIxIiBhcHBseUJvcmRlcj0iMSIgeGZJZD0iMCIgYXBwbHlOdW1iZXJGb3JtYXQ9IjEiLz48eGYgbnVtRm10SWQ9IjIiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjx4ZiBudW1GbXRJZD0iMTQiIGZvbnRJZD0iMCIgZmlsbElkPSIwIiBib3JkZXJJZD0iMCIgYXBwbHlGb250PSIxIiBhcHBseUZpbGw9IjEiIGFwcGx5Qm9yZGVyPSIxIiB4ZklkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPjwvY2VsbFhmcz48Y2VsbFN0eWxlcyBjb3VudD0iMSI+PGNlbGxTdHlsZSBuYW1lPSJOb3JtYWwiIHhmSWQ9IjAiIGJ1aWx0aW5JZD0iMCIgLz48L2NlbGxTdHlsZXM+PGR4ZnMgY291bnQ9IjAiIC8+PHRhYmxlU3R5bGVzIGNvdW50PSIwIiBkZWZhdWx0VGFibGVTdHlsZT0iVGFibGVTdHlsZU1lZGl1bTkiIGRlZmF1bHRQaXZvdFN0eWxlPSJQaXZvdFN0eWxlTWVkaXVtNCIgLz48L3N0eWxlU2hlZXQ+JywKICAgICAgICB9LAogICAgICAgIF8gPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1hdGNoOiAvXlwtP1xkK1wuXGQlJC8sCiAgICAgICAgICAgICAgICBzdHlsZTogNjAsCiAgICAgICAgICAgICAgICBmbXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgLyAxMDA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtYXRjaDogL15cLT9cZCtcLj9cZColJC8sCiAgICAgICAgICAgICAgICBzdHlsZTogNTYsCiAgICAgICAgICAgICAgICBmbXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgLyAxMDA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7IG1hdGNoOiAvXlwtP1wkW1xkLF0rLj9cZCokLywgc3R5bGU6IDU3IH0sCiAgICAgICAgICAgIHsgbWF0Y2g6IC9eXC0/wqNbXGQsXSsuP1xkKiQvLCBzdHlsZTogNTggfSwKICAgICAgICAgICAgeyBtYXRjaDogL15cLT/igqxbXGQsXSsuP1xkKiQvLCBzdHlsZTogNTkgfSwKICAgICAgICAgICAgeyBtYXRjaDogL15cLT9cZCskLywgc3R5bGU6IDY1IH0sCiAgICAgICAgICAgIHsgbWF0Y2g6IC9eXC0/XGQrXC5cZHsyfSQvLCBzdHlsZTogNjYgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbWF0Y2g6IC9eXChbXGQsXStcKSQvLAogICAgICAgICAgICAgICAgc3R5bGU6IDYxLAogICAgICAgICAgICAgICAgZm10OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAqIHQucmVwbGFjZSgvW1woXCldL2csICcnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1hdGNoOiAvXlwoW1xkLF0rXC5cZHsyfVwpJC8sCiAgICAgICAgICAgICAgICBzdHlsZTogNjIsCiAgICAgICAgICAgICAgICBmbXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xICogdC5yZXBsYWNlKC9bXChcKV0vZywgJycpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeyBtYXRjaDogL15cLT9bXGQsXSskLywgc3R5bGU6IDYzIH0sCiAgICAgICAgICAgIHsgbWF0Y2g6IC9eXC0/W1xkLF0rXC5cZHsyfSQvLCBzdHlsZTogNjQgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbWF0Y2g6IC9eKDE5XGRcZHxbMi05XVxkXGRcZClcLSgwXGR8MVswMTJdKVwtWzAxMjNdW1xkXSQvLAogICAgICAgICAgICAgICAgc3R5bGU6IDY3LAogICAgICAgICAgICAgICAgZm10OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKDI1NTY5ICsgRGF0ZS5wYXJzZSh0KSAvIDg2NGU1KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgXTsKICAgIHJldHVybiAoCiAgICAgICAgKHQuZXh0LmJ1dHRvbnMuY29weUh0bWw1ID0gewogICAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b25zLWNvcHkgYnV0dG9ucy1odG1sNScsCiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLmNvcHknLCAnQ29weScpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICh0LCBlLCBvLCBsLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGMoZSwgbCksCiAgICAgICAgICAgICAgICAgICAgYSA9IGUuYnV0dG9ucy5leHBvcnRJbmZvKGwpLAogICAgICAgICAgICAgICAgICAgIGQgPSB5KGwpLAogICAgICAgICAgICAgICAgICAgIHAgPSByLnN0ciwKICAgICAgICAgICAgICAgICAgICBpID0gUygnPGRpdi8+JykuY3NzKHsgaGVpZ2h0OiAxLCB3aWR0aDogMSwgb3ZlcmZsb3c6ICdoaWRkZW4nLCBwb3NpdGlvbjogJ2ZpeGVkJywgdG9wOiAwLCBsZWZ0OiAwIH0pLAogICAgICAgICAgICAgICAgICAgIGQgPQogICAgICAgICAgICAgICAgICAgICAgICAoYS50aXRsZSAmJiAocCA9IGEudGl0bGUgKyBkICsgZCArIHApLAogICAgICAgICAgICAgICAgICAgICAgICBhLm1lc3NhZ2VUb3AgJiYgKHAgPSBhLm1lc3NhZ2VUb3AgKyBkICsgZCArIHApLAogICAgICAgICAgICAgICAgICAgICAgICBhLm1lc3NhZ2VCb3R0b20gJiYgKHAgPSBwICsgZCArIGQgKyBhLm1lc3NhZ2VCb3R0b20pLAogICAgICAgICAgICAgICAgICAgICAgICBsLmN1c3RvbWl6ZSAmJiAocCA9IGwuY3VzdG9taXplKHAsIGwsIGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgUygnPHRleHRhcmVhIHJlYWRvbmx5Lz4nKS52YWwocCkuYXBwZW5kVG8oaSkpOwogICAgICAgICAgICAgICAgaWYgKHUucXVlcnlDb21tYW5kU3VwcG9ydGVkKCdjb3B5JykpIHsKICAgICAgICAgICAgICAgICAgICBpLmFwcGVuZFRvKGUudGFibGUoKS5jb250YWluZXIoKSksIGRbMF0uZm9jdXMoKSwgZFswXS5zZWxlY3QoKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHUuZXhlY0NvbW1hbmQoJ2NvcHknKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpLnJlbW92ZSgpLCBmKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5jb3B5U3VjY2VzcyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmJ1dHRvbnMuaW5mbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaTE4bignYnV0dG9ucy5jb3B5VGl0bGUnLCAnQ29weSB0byBjbGlwYm9hcmQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaTE4bigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucy5jb3B5U3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAxOiAnQ29waWVkIG9uZSByb3cgdG8gY2xpcGJvYXJkJywgXzogJ0NvcGllZCAlZCByb3dzIHRvIGNsaXBib2FyZCcgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnJvd3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMmUzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzKCkgewogICAgICAgICAgICAgICAgICAgIG0ub2ZmKCdjbGljay5idXR0b25zLWNvcHknKSwgUyh1KS5vZmYoJy5idXR0b25zLWNvcHknKSwgZS5idXR0b25zLmluZm8oITEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGEgPSBTKAogICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmkxOG4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMuY29weUtleXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdQcmVzcyA8aT5jdHJsPC9pPiBvciA8aT7ijJg8L2k+ICsgPGk+QzwvaT4gdG8gY29weSB0aGUgdGFibGUgZGF0YTxicj50byB5b3VyIHN5c3RlbSBjbGlwYm9hcmQuPGJyPjxicj5UbyBjYW5jZWwsIGNsaWNrIHRoaXMgbWVzc2FnZSBvciBwcmVzcyBlc2NhcGUuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nLAogICAgICAgICAgICAgICAgICAgICkuYXBwZW5kKGkpLAogICAgICAgICAgICAgICAgICAgIG0gPQogICAgICAgICAgICAgICAgICAgICAgICAoZS5idXR0b25zLmluZm8oZS5pMThuKCdidXR0b25zLmNvcHlUaXRsZScsICdDb3B5IHRvIGNsaXBib2FyZCcpLCBhLCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgZFswXS5mb2N1cygpLAogICAgICAgICAgICAgICAgICAgICAgICBkWzBdLnNlbGVjdCgpLAogICAgICAgICAgICAgICAgICAgICAgICBTKGEpLmNsb3Nlc3QoJy5kdC1idXR0b24taW5mbycpKTsKICAgICAgICAgICAgICAgIG0ub24oJ2NsaWNrLmJ1dHRvbnMtY29weScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzKCksIG4oKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIFModSkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXlkb3duLmJ1dHRvbnMtY29weScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyNyA9PT0gdC5rZXlDb2RlICYmIChzKCksIG4oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY29weS5idXR0b25zLWNvcHkgY3V0LmJ1dHRvbnMtY29weScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMoKSwgbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmM6IDEwMCwKICAgICAgICAgICAgY29weVN1Y2Nlc3M6ICEwLAogICAgICAgICAgICBleHBvcnRPcHRpb25zOiB7fSwKICAgICAgICAgICAgZmllbGRTZXBhcmF0b3I6ICdcdCcsCiAgICAgICAgICAgIGZpZWxkQm91bmRhcnk6ICcnLAogICAgICAgICAgICBoZWFkZXI6ICEwLAogICAgICAgICAgICBmb290ZXI6ICEwLAogICAgICAgICAgICB0aXRsZTogJyonLAogICAgICAgICAgICBtZXNzYWdlVG9wOiAnKicsCiAgICAgICAgICAgIG1lc3NhZ2VCb3R0b206ICcqJywKICAgICAgICB9KSwKICAgICAgICAodC5leHQuYnV0dG9ucy5jc3ZIdG1sNSA9IHsKICAgICAgICAgICAgYm9tOiAhMSwKICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1jc3YgYnV0dG9ucy1odG1sNScsCiAgICAgICAgICAgIGF2YWlsYWJsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gQy5GaWxlUmVhZGVyICYmIEMuQmxvYjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGV4dDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ2J1dHRvbnMuY3N2JywgJ0NTVicpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICh0LCBlLCBvLCBsLCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGMoZSwgbCkuc3RyLAogICAgICAgICAgICAgICAgICAgIGEgPSBlLmJ1dHRvbnMuZXhwb3J0SW5mbyhsKSwKICAgICAgICAgICAgICAgICAgICBkID0gbC5jaGFyc2V0OwogICAgICAgICAgICAgICAgbC5jdXN0b21pemUgJiYgKHIgPSBsLmN1c3RvbWl6ZShyLCBsLCBlKSksCiAgICAgICAgICAgICAgICAgICAgKGQgPSAhMSAhPT0gZCA/IChkID0gZCB8fCB1LmNoYXJhY3RlclNldCB8fCB1LmNoYXJzZXQpICYmICc7Y2hhcnNldD0nICsgZCA6ICcnKSwKICAgICAgICAgICAgICAgICAgICBsLmJvbSAmJiAociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoNjUyNzkpICsgciksCiAgICAgICAgICAgICAgICAgICAgTihuZXcgQmxvYihbcl0sIHsgdHlwZTogJ3RleHQvY3N2JyArIGQgfSksIGEuZmlsZW5hbWUsICEwKSwKICAgICAgICAgICAgICAgICAgICBuKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jOiAxMDAsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnKicsCiAgICAgICAgICAgIGV4dGVuc2lvbjogJy5jc3YnLAogICAgICAgICAgICBleHBvcnRPcHRpb25zOiB7fSwKICAgICAgICAgICAgZmllbGRTZXBhcmF0b3I6ICcsJywKICAgICAgICAgICAgZmllbGRCb3VuZGFyeTogJyInLAogICAgICAgICAgICBlc2NhcGVDaGFyOiAnIicsCiAgICAgICAgICAgIGNoYXJzZXQ6IG51bGwsCiAgICAgICAgICAgIGhlYWRlcjogITAsCiAgICAgICAgICAgIGZvb3RlcjogITAsCiAgICAgICAgfSksCiAgICAgICAgKHQuZXh0LmJ1dHRvbnMuZXhjZWxIdG1sNSA9IHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1leGNlbCBidXR0b25zLWh0bWw1JywKICAgICAgICAgICAgYXZhaWxhYmxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBDLkZpbGVSZWFkZXIgJiYgdm9pZCAwICE9PSBUKCkgJiYgIW0oKSAmJiBFOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignYnV0dG9ucy5leGNlbCcsICdFeGNlbCcpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICh0LCBlLCBvLCBmLCBsKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSBSW3RdKSwgUy5wYXJzZVhNTCh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgICAgICAgICAgICAgIG0gPSBBKGMsICdyb3cnLCB7IGF0dHI6IHsgcjogKHMgPSB1ICsgMSkgfSB9KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgbyA9IHQubGVuZ3RoOyBlIDwgbzsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gTyhlKSArICcnICsgcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdFtlXSB8fCB2b2lkIDAgPT09IHRbZV0gfHwgJycgPT09IHRbZV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghMCAhPT0gZi5jcmVhdGVFbXB0eUNlbGxzKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbZV0gPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIHRbZV0gPSAnZnVuY3Rpb24nID09IHR5cGVvZiB0W2VdLnRyaW0gPyB0W2VdLnRyaW0oKSA6IHRbZV07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwLCBkID0gXy5sZW5ndGg7IGEgPCBkOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gX1thXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0W2VdLm1hdGNoICYmICF0W2VdLm1hdGNoKC9eMFxkKy8pICYmIHRbZV0ubWF0Y2gocC5tYXRjaCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRbZV0ucmVwbGFjZSgvW15cZFwuXC1dL2csICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmZtdCAmJiAoaSA9IHAuZm10KGkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBBKGMsICdjJywgeyBhdHRyOiB7IHI6IGwsIHM6IHAuc3R5bGUgfSwgY2hpbGRyZW46IFtBKGMsICd2JywgeyB0ZXh0OiBpIH0pXSB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdudW1iZXInID09IHR5cGVvZiB0W2VdIHx8ICh0W2VdLm1hdGNoICYmIHRbZV0ubWF0Y2goL14tP1xkKyhcLlxkKyk/KFtlRV1cLT9cZCspPyQvKSAmJiAhdFtlXS5tYXRjaCgvXjBcZCsvKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEEoYywgJ2MnLCB7IGF0dHI6IHsgdDogJ24nLCByOiBsIH0sIGNoaWxkcmVuOiBbQShjLCAndicsIHsgdGV4dDogdFtlXSB9KV0gfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgociA9IHIucmVwbGFjZSA/IHIucmVwbGFjZSgvW1x4MDAtXHgwOVx4MEJceDBDXHgwRS1ceDFGXHg3Ri1ceDlGXS9nLCAnJykgOiByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEoYywgJ2MnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjogeyB0OiAnaW5saW5lU3RyJywgcjogbCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdzogQShjLCAnaXMnLCB7IGNoaWxkcmVuOiB7IHJvdzogQShjLCAndCcsIHsgdGV4dDogciwgYXR0cjogeyAneG1sOnNwYWNlJzogJ3ByZXNlcnZlJyB9IH0pIH0gfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5hcHBlbmRDaGlsZChuKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeS5hcHBlbmRDaGlsZChtKSwgdSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gYSh0KSB7CiAgICAgICAgICAgICAgICAgICAgdC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdC50aXRsZSA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTKCdyb3c6bGFzdCBjJywgYykuYXR0cigncycsICcyJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmZvckVhY2goZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmICgxIDwgdC5jb2xTcGFuIHx8IDEgPCB0LnJvd1NwYW4pICYmIEQoYywgdSwgZSwgdC5yb3dTcGFuLCB0LmNvbFNwYW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgZCwKICAgICAgICAgICAgICAgICAgICBzLAogICAgICAgICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgICAgICAgdSA9IDAsCiAgICAgICAgICAgICAgICAgICAgYyA9IG4oJ3hsL3dvcmtzaGVldHMvc2hlZXQxLnhtbCcpLAogICAgICAgICAgICAgICAgICAgIHkgPSBjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzaGVldERhdGEnKVswXSwKICAgICAgICAgICAgICAgICAgICBwID0gewogICAgICAgICAgICAgICAgICAgICAgICBfcmVsczogeyAnLnJlbHMnOiBuKCdfcmVscy8ucmVscycpIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHhsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVsczogeyAnd29ya2Jvb2sueG1sLnJlbHMnOiBuKCd4bC9fcmVscy93b3JrYm9vay54bWwucmVscycpIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd29ya2Jvb2sueG1sJzogbigneGwvd29ya2Jvb2sueG1sJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3R5bGVzLnhtbCc6IG4oJ3hsL3N0eWxlcy54bWwnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzaGVldHM6IHsgJ3NoZWV0MS54bWwnOiBjIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICdbQ29udGVudF9UeXBlc10ueG1sJzogbignW0NvbnRlbnRfVHlwZXNdLnhtbCcpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaSA9IGUuYnV0dG9ucy5leHBvcnREYXRhKGYuZXhwb3J0T3B0aW9ucyksCiAgICAgICAgICAgICAgICAgICAgSSA9IGUuYnV0dG9ucy5leHBvcnRJbmZvKGYpOwogICAgICAgICAgICAgICAgSS50aXRsZSAmJiAocihbSS50aXRsZV0pLCBEKGMsIHUsIDAsIDEsIGkuaGVhZGVyLmxlbmd0aCksIFMoJ3JvdzpsYXN0IGMnLCBjKS5hdHRyKCdzJywgJzUxJykpLAogICAgICAgICAgICAgICAgICAgIEkubWVzc2FnZVRvcCAmJiAocihbSS5tZXNzYWdlVG9wXSksIEQoYywgdSwgMCwgMSwgaS5oZWFkZXIubGVuZ3RoKSksCiAgICAgICAgICAgICAgICAgICAgZi5oZWFkZXIgJiYgYShpLmhlYWRlclN0cnVjdHVyZSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBGID0gdSwgeCA9IDAsIGggPSBpLmJvZHkubGVuZ3RoOyB4IDwgaDsgeCsrKSByKGkuYm9keVt4XSk7CiAgICAgICAgICAgICAgICAoZCA9IHUpLAogICAgICAgICAgICAgICAgICAgIGYuZm9vdGVyICYmIGkuZm9vdGVyICYmIGEoaS5mb290ZXJTdHJ1Y3R1cmUpLAogICAgICAgICAgICAgICAgICAgIEkubWVzc2FnZUJvdHRvbSAmJiAocihbSS5tZXNzYWdlQm90dG9tXSksIEQoYywgdSwgMCwgMSwgaS5oZWFkZXIubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICB2YXIgYiA9IEEoYywgJ2NvbHMnKTsKICAgICAgICAgICAgICAgIFMoJ3dvcmtzaGVldCcsIGMpLnByZXBlbmQoYik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBnID0gMCwgdiA9IGkuaGVhZGVyLmxlbmd0aDsgZyA8IHY7IGcrKykKICAgICAgICAgICAgICAgICAgICBiLmFwcGVuZENoaWxkKAogICAgICAgICAgICAgICAgICAgICAgICBBKGMsICdjb2wnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBnICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IGcgKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0LmhlYWRlcltlXS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZm9vdGVyICYmIHQuZm9vdGVyW2VdICYmIHQuZm9vdGVyW2VdLmxlbmd0aCA+IG8gJiYgKG8gPSB0LmZvb3RlcltlXS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMCwgbiA9IHQuYm9keS5sZW5ndGg7IGwgPCBuOyBsKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LmJvZHlbbF1bZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDAgPAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IChhID0gbnVsbCAhPSBhID8gYS50b1N0cmluZygpIDogJycpLmluZGV4T2YoJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgociA9IGEuc3BsaXQoJ1xuJykpLnNvcnQoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5sZW5ndGggLSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgclswXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNTQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDYgPCAobyAqPSAxLjM1KSA/IG8gOiA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGksIGcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHZhciB3ID0gcC54bFsnd29ya2Jvb2sueG1sJ107CiAgICAgICAgICAgICAgICBTKCdzaGVldHMgc2hlZXQnLCB3KS5hdHRyKCduYW1lJywgayhmKSksCiAgICAgICAgICAgICAgICAgICAgZi5hdXRvRmlsdGVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChTKCdtZXJnZUNlbGxzJywgYykuYmVmb3JlKEEoYywgJ2F1dG9GaWx0ZXInLCB7IGF0dHI6IHsgcmVmOiAnQScgKyBGICsgJzonICsgTyhpLmhlYWRlci5sZW5ndGggLSAxKSArIGQgfSB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgIFMoJ2RlZmluZWROYW1lcycsIHcpLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEodywgJ2RlZmluZWROYW1lJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsgbmFtZTogJ194bG5tLl9GaWx0ZXJEYXRhYmFzZScsIGxvY2FsU2hlZXRJZDogJzAnLCBoaWRkZW46IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiJyIgKyBrKGYpLnJlcGxhY2UoLycvZywgIicnIikgKyAiJyEkQSQiICsgRiArICc6JyArIE8oaS5oZWFkZXIubGVuZ3RoIC0gMSkgKyBkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAgIGYuY3VzdG9taXplICYmIGYuY3VzdG9taXplKHAsIGYsIGUpLAogICAgICAgICAgICAgICAgICAgIDAgPT09IFMoJ21lcmdlQ2VsbHMnLCBjKS5jaGlsZHJlbigpLmxlbmd0aCAmJiBTKCdtZXJnZUNlbGxzJywgYykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB2YXIgdyA9IG5ldyAoVCgpKSgpLAogICAgICAgICAgICAgICAgICAgIEYgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uOiAnREVGTEFURScsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdibG9iJywKICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBCID0KICAgICAgICAgICAgICAgICAgICAgICAgKCEoZnVuY3Rpb24gZihzLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHogJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xID09PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnNlcmlhbGl6ZVRvU3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEMuRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKFJbJ3hsL3dvcmtzaGVldHMvc2hlZXQxLnhtbCddLCAndGV4dC94bWwnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5pbmRleE9mKCd4bWxuczpyJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMuZWFjaCh0LCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUy5pc1BsYWluT2JqZWN0KGUpKSBmKHMuZm9sZGVyKHQpLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8sIGwgPSBlLmNoaWxkTm9kZXNbMF0sIG4gPSBbXSwgciA9IGwuYXR0cmlidXRlcy5sZW5ndGggLSAxOyAwIDw9IHI7IHItLSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGwuYXR0cmlidXRlc1tyXS5ub2RlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBsLmF0dHJpYnV0ZXNbcl0ubm9kZVZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0gYS5pbmRleE9mKCc6JykgJiYgKG4ucHVzaCh7IG5hbWU6IGEsIHZhbHVlOiBkIH0pLCBsLnJlbW92ZUF0dHJpYnV0ZShhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAociA9IDAsIG8gPSBuLmxlbmd0aDsgciA8IG87IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGUuY3JlYXRlQXR0cmlidXRlKG5bcl0ubmFtZS5yZXBsYWNlKCc6JywgJ19kdF9iX25hbWVzcGFjZV90b2tlbl8nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwLnZhbHVlID0gbltyXS52YWx1ZSksIGwuc2V0QXR0cmlidXRlTm9kZShwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IEUuc2VyaWFsaXplVG9TdHJpbmcoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IChpID0gegogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChpID0gKGkgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSA9PT0gaS5pbmRleE9mKCc8P3htbCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgc3RhbmRhbG9uZT0ieWVzIj8+JyArIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaSkucmVwbGFjZSgvX2R0X2JfbmFtZXNwYWNlX3Rva2VuXy9nLCAnOicpKS5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAveG1sbnM6TlNbXGRdKz0iIiBOU1tcZF0rOi9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaSkucmVwbGFjZSgvPChbXjw+XSo/KSB4bWxucz0iIihbXjw+XSo/KT4vZywgJzwkMSAkMj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZmlsZSh0LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KSh3LCBwKSwKICAgICAgICAgICAgICAgICAgICAgICAgSS5maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAxNzUgPCBCICYmIChCID0gQi5zdWJzdHIoMCwgMTc1KSksCiAgICAgICAgICAgICAgICAgICAgZi5jdXN0b21pemVaaXAgJiYgZi5jdXN0b21pemVaaXAodywgaSwgQiksCiAgICAgICAgICAgICAgICAgICAgdy5nZW5lcmF0ZUFzeW5jCiAgICAgICAgICAgICAgICAgICAgICAgID8gdy5nZW5lcmF0ZUFzeW5jKEYpLnRoZW4oZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTih0LCBCKSwgbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIDogKE4ody5nZW5lcmF0ZShGKSwgQiksIGwoKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jOiAxMDAsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnKicsCiAgICAgICAgICAgIGV4dGVuc2lvbjogJy54bHN4JywKICAgICAgICAgICAgZXhwb3J0T3B0aW9uczoge30sCiAgICAgICAgICAgIGhlYWRlcjogITAsCiAgICAgICAgICAgIGZvb3RlcjogITAsCiAgICAgICAgICAgIHRpdGxlOiAnKicsCiAgICAgICAgICAgIG1lc3NhZ2VUb3A6ICcqJywKICAgICAgICAgICAgbWVzc2FnZUJvdHRvbTogJyonLAogICAgICAgICAgICBjcmVhdGVFbXB0eUNlbGxzOiAhMSwKICAgICAgICAgICAgYXV0b0ZpbHRlcjogITEsCiAgICAgICAgICAgIHNoZWV0TmFtZTogJycsCiAgICAgICAgfSksCiAgICAgICAgKHQuZXh0LmJ1dHRvbnMucGRmSHRtbDUgPSB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J1dHRvbnMtcGRmIGJ1dHRvbnMtaHRtbDUnLAogICAgICAgICAgICBhdmFpbGFibGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IEMuRmlsZVJlYWRlciAmJiBzKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdidXR0b25zLnBkZicsICdQREYnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCwgZSwgbywgbCwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBlLmJ1dHRvbnMuZXhwb3J0RGF0YShsLmV4cG9ydE9wdGlvbnMpLAogICAgICAgICAgICAgICAgICAgIGEgPSBlLmJ1dHRvbnMuZXhwb3J0SW5mbyhsKSwKICAgICAgICAgICAgICAgICAgICBkID0gW107CiAgICAgICAgICAgICAgICBsLmhlYWRlciAmJgogICAgICAgICAgICAgICAgICAgIHIuaGVhZGVyU3RydWN0dXJlLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZC5wdXNoKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IHsgdGV4dDogdC50aXRsZSwgY29sU3BhbjogdC5jb2xzcGFuLCByb3dTcGFuOiB0LnJvd3NwYW4sIHN0eWxlOiAndGFibGVIZWFkZXInIH0gOiB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZm9yICh2YXIgcCA9IDAsIGkgPSByLmJvZHkubGVuZ3RoOyBwIDwgaTsgcCsrKQogICAgICAgICAgICAgICAgICAgIGQucHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgci5ib2R5W3BdLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogbnVsbCA9PSB0ID8gJycgOiAnc3RyaW5nJyA9PSB0eXBlb2YgdCA/IHQgOiB0LnRvU3RyaW5nKCkgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGwuZm9vdGVyICYmCiAgICAgICAgICAgICAgICAgICAgci5mb290ZXJTdHJ1Y3R1cmUuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICBkLnB1c2goCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8geyB0ZXh0OiB0LnRpdGxlLCBjb2xTcGFuOiB0LmNvbHNwYW4sIHJvd1NwYW46IHQucm93c3Bhbiwgc3R5bGU6ICd0YWJsZUhlYWRlcicgfSA6IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgZiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IGwucGFnZVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VPcmllbnRhdGlvbjogbC5vcmllbnRhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAndGFibGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlOiB7IGhlYWRlclJvd3M6IHIuaGVhZGVyU3RydWN0dXJlLmxlbmd0aCwgZm9vdGVyUm93czogci5mb290ZXJTdHJ1Y3R1cmUubGVuZ3RoLCBib2R5OiBkIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhMaW5lV2lkdGg6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gdCB8fCB0ID09PSBlLnRhYmxlLmJvZHkubGVuZ3RoID8gMCA6IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdkxpbmVXaWR0aDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhMaW5lQ29sb3I6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gZS50YWJsZS5oZWFkZXJSb3dzIHx8IHQgPT09IGUudGFibGUuYm9keS5sZW5ndGggLSBlLnRhYmxlLmZvb3RlclJvd3MgPyAnIzMzMycgOiAnI2RkZCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0IDwgci5oZWFkZXJTdHJ1Y3R1cmUubGVuZ3RoID8gJyNmZmYnIDogdCAlIDIgPT0gMCA/ICcjZjNmM2YzJyA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUhlYWRlcjogeyBib2xkOiAhMCwgZm9udFNpemU6IDExLCBhbGlnbm1lbnQ6ICdjZW50ZXInIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUZvb3RlcjogeyBib2xkOiAhMCwgZm9udFNpemU6IDExIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZTogeyBtYXJnaW46IFswLCA1LCAwLCA1XSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHsgYWxpZ25tZW50OiAnY2VudGVyJywgZm9udFNpemU6IDEzIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFN0eWxlOiB7IGZvbnRTaXplOiAxMCB9LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZSA9CiAgICAgICAgICAgICAgICAgICAgICAgIChhLm1lc3NhZ2VUb3AgJiYgZi5jb250ZW50LnVuc2hpZnQoeyB0ZXh0OiBhLm1lc3NhZ2VUb3AsIHN0eWxlOiAnbWVzc2FnZScsIG1hcmdpbjogWzAsIDAsIDAsIDEyXSB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgYS5tZXNzYWdlQm90dG9tICYmIGYuY29udGVudC5wdXNoKHsgdGV4dDogYS5tZXNzYWdlQm90dG9tLCBzdHlsZTogJ21lc3NhZ2UnLCBtYXJnaW46IFswLCAwLCAwLCAxMl0gfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEudGl0bGUgJiYgZi5jb250ZW50LnVuc2hpZnQoeyB0ZXh0OiBhLnRpdGxlLCBzdHlsZTogJ3RpdGxlJywgbWFyZ2luOiBbMCwgMCwgMCwgMTJdIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBsLmN1c3RvbWl6ZSAmJiBsLmN1c3RvbWl6ZShmLCBsLCBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgcygpLmNyZWF0ZVBkZihmKSk7CiAgICAgICAgICAgICAgICAnb3BlbicgIT09IGwuZG93bmxvYWQgfHwgbSgpID8gZS5kb3dubG9hZChhLmZpbGVuYW1lKSA6IGUub3BlbigpLCBuKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jOiAxMDAsCiAgICAgICAgICAgIHRpdGxlOiAnKicsCiAgICAgICAgICAgIGZpbGVuYW1lOiAnKicsCiAgICAgICAgICAgIGV4dGVuc2lvbjogJy5wZGYnLAogICAgICAgICAgICBleHBvcnRPcHRpb25zOiB7fSwKICAgICAgICAgICAgb3JpZW50YXRpb246ICdwb3J0cmFpdCcsCiAgICAgICAgICAgIHBhZ2VTaXplOiAnZW4tVVMnID09PSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJ2VuLUNBJyA9PT0gbmF2aWdhdG9yLmxhbmd1YWdlID8gJ0xFVFRFUicgOiAnQTQnLAogICAgICAgICAgICBoZWFkZXI6ICEwLAogICAgICAgICAgICBmb290ZXI6ICEwLAogICAgICAgICAgICBtZXNzYWdlVG9wOiAnKicsCiAgICAgICAgICAgIG1lc3NhZ2VCb3R0b206ICcqJywKICAgICAgICAgICAgY3VzdG9taXplOiBudWxsLAogICAgICAgICAgICBkb3dubG9hZDogJ2Rvd25sb2FkJywKICAgICAgICB9KSwKICAgICAgICB0CiAgICApOwp9KTsKCi8qISBGaXhlZEhlYWRlciA0LjAuMQogKiDCqSBTcHJ5TWVkaWEgTHRkIC0gZGF0YXRhYmxlcy5uZXQvbGljZW5zZQogKi8KIShmdW5jdGlvbiAobykgewogICAgdmFyIGksIHM7CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0J10sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8odCwgd2luZG93LCBkb2N1bWVudCk7CiAgICAgICAgICB9KQogICAgICAgIDogJ29iamVjdCcgPT0gdHlwZW9mIGV4cG9ydHMKICAgICAgICA/ICgoaSA9IHJlcXVpcmUoJ2pxdWVyeScpKSwKICAgICAgICAgIChzID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgICBlLmZuLmRhdGFUYWJsZSB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldCcpKHQsIGUpOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQgfHwgd2luZG93KSwgKGUgPSBlIHx8IGkodCkpLCBzKHQsIGUpLCBvKGUsIHQsIHQuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChzKHdpbmRvdywgaSksIChtb2R1bGUuZXhwb3J0cyA9IG8oaSwgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiBvKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uIChiLCBtLCB2KSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBmdW5jdGlvbiBzKHQsIGUpIHsKICAgICAgICBpZiAoIWQudmVyc2lvbkNoZWNrKCcyJykpIHRocm93ICdXYXJuaW5nOiBGaXhlZEhlYWRlciByZXF1aXJlcyBEYXRhVGFibGVzIDIgb3IgbmV3ZXInOwogICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBzKSkgdGhyb3cgIkZpeGVkSGVhZGVyIG11c3QgYmUgaW5pdGlhbGlzZWQgd2l0aCB0aGUgJ25ldycga2V5d29yZC4iOwogICAgICAgIGlmICgKICAgICAgICAgICAgKCEwID09PSBlICYmIChlID0ge30pLAogICAgICAgICAgICAodCA9IG5ldyBkLkFwaSh0KSksCiAgICAgICAgICAgICh0aGlzLmMgPSBiLmV4dGVuZCghMCwge30sIHMuZGVmYXVsdHMsIGUpKSwKICAgICAgICAgICAgKHRoaXMucyA9IHsKICAgICAgICAgICAgICAgIGR0OiB0LAogICAgICAgICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgICAgICAgICB0aGVhZFRvcDogMCwKICAgICAgICAgICAgICAgICAgICB0Ym9keVRvcDogMCwKICAgICAgICAgICAgICAgICAgICB0Zm9vdFRvcDogMCwKICAgICAgICAgICAgICAgICAgICB0Zm9vdEJvdHRvbTogMCwKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgICAgIHRmb290SGVpZ2h0OiAwLAogICAgICAgICAgICAgICAgICAgIHRoZWFkSGVpZ2h0OiAwLAogICAgICAgICAgICAgICAgICAgIHdpbmRvd0hlaWdodDogYihtKS5oZWlnaHQoKSwKICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiAhMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoZWFkZXJNb2RlOiBudWxsLAogICAgICAgICAgICAgICAgZm9vdGVyTW9kZTogbnVsbCwKICAgICAgICAgICAgICAgIGF1dG9XaWR0aDogdC5zZXR0aW5ncygpWzBdLm9GZWF0dXJlcy5iQXV0b1dpZHRoLAogICAgICAgICAgICAgICAgbmFtZXNwYWNlOiAnLmR0ZmMnICsgbysrLAogICAgICAgICAgICAgICAgc2Nyb2xsTGVmdDogeyBoZWFkZXI6IC0xLCBmb290ZXI6IC0xIH0sCiAgICAgICAgICAgICAgICBlbmFibGU6ICEwLAogICAgICAgICAgICAgICAgYXV0b0Rpc2FibGU6ICExLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKHRoaXMuZG9tID0gewogICAgICAgICAgICAgICAgZmxvYXRpbmdIZWFkZXI6IG51bGwsCiAgICAgICAgICAgICAgICB0aGVhZDogYih0LnRhYmxlKCkuaGVhZGVyKCkpLAogICAgICAgICAgICAgICAgdGJvZHk6IGIodC50YWJsZSgpLmJvZHkoKSksCiAgICAgICAgICAgICAgICB0Zm9vdDogYih0LnRhYmxlKCkuZm9vdGVyKCkpLAogICAgICAgICAgICAgICAgaGVhZGVyOiB7CiAgICAgICAgICAgICAgICAgICAgaG9zdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBmbG9hdGluZzogbnVsbCwKICAgICAgICAgICAgICAgICAgICBmbG9hdGluZ1BhcmVudDogYignPGRpdiBjbGFzcz0iZHRmaC1mbG9hdGluZ3BhcmVudCI+PGRpdj48L2Rpdj48L2Rpdj4nKSwKICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbnVsbCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmb290ZXI6IHsKICAgICAgICAgICAgICAgICAgICBob3N0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZsb2F0aW5nUGFyZW50OiBiKCc8ZGl2IGNsYXNzPSJkdGZoLWZsb2F0aW5ncGFyZW50Ij48ZGl2PjwvZGl2PjwvZGl2PicpLAogICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBudWxsLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICh0aGlzLmRvbS5oZWFkZXIuaG9zdCA9IHRoaXMuZG9tLnRoZWFkLnBhcmVudCgpKSwKICAgICAgICAgICAgKHRoaXMuZG9tLmZvb3Rlci5ob3N0ID0gdGhpcy5kb20udGZvb3QucGFyZW50KCkpLAogICAgICAgICAgICAoZSA9IHQuc2V0dGluZ3MoKVswXSkuX2ZpeGVkSGVhZGVyKQogICAgICAgICkKICAgICAgICAgICAgdGhyb3cgJ0ZpeGVkSGVhZGVyIGFscmVhZHkgaW5pdGlhbGlzZWQgb24gdGFibGUgJyArIGUublRhYmxlLmlkOwogICAgICAgIChlLl9maXhlZEhlYWRlciA9IHRoaXMpLl9jb25zdHJ1Y3RvcigpOwogICAgfQogICAgdmFyIGQgPSBiLmZuLmRhdGFUYWJsZSwKICAgICAgICBvID0gMDsKICAgIHJldHVybiAoCiAgICAgICAgYi5leHRlbmQocy5wcm90b3R5cGUsIHsKICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmRvbTsKICAgICAgICAgICAgICAgIHRoaXMucy5kdC5vZmYoJy5kdGZjJyksCiAgICAgICAgICAgICAgICAgICAgYihtKS5vZmYodGhpcy5zLm5hbWVzcGFjZSksCiAgICAgICAgICAgICAgICAgICAgdC5oZWFkZXIucmlnaHRCbG9ja2VyICYmIHQuaGVhZGVyLnJpZ2h0QmxvY2tlci5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICB0LmhlYWRlci5sZWZ0QmxvY2tlciAmJiB0LmhlYWRlci5sZWZ0QmxvY2tlci5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICB0LmZvb3Rlci5yaWdodEJsb2NrZXIgJiYgdC5mb290ZXIucmlnaHRCbG9ja2VyLnJlbW92ZSgpLAogICAgICAgICAgICAgICAgICAgIHQuZm9vdGVyLmxlZnRCbG9ja2VyICYmIHQuZm9vdGVyLmxlZnRCbG9ja2VyLnJlbW92ZSgpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuYy5oZWFkZXIgJiYgdGhpcy5fbW9kZUNoYW5nZSgnaW4tcGxhY2UnLCAnaGVhZGVyJywgITApLAogICAgICAgICAgICAgICAgICAgIHRoaXMuYy5mb290ZXIgJiYgdC50Zm9vdC5sZW5ndGggJiYgdGhpcy5fbW9kZUNoYW5nZSgnaW4tcGxhY2UnLCAnZm9vdGVyJywgITApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgICAgICAgICAgICAodGhpcy5zLmVuYWJsZSA9IHQpLCAodGhpcy5zLmVuYWJsZVR5cGUgPSBvKSwgKCFlICYmIHZvaWQgMCAhPT0gZSkgfHwgKHRoaXMuX3Bvc2l0aW9ucygpLCB0aGlzLl9zY3JvbGwoITApKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW5hYmxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5lbmFibGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhlYWRlck9mZnNldDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgJiYgKCh0aGlzLmMuaGVhZGVyT2Zmc2V0ID0gdCksIHRoaXMudXBkYXRlKCkpLCB0aGlzLmMuaGVhZGVyT2Zmc2V0OwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb290ZXJPZmZzZXQ6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmICgodGhpcy5jLmZvb3Rlck9mZnNldCA9IHQpLCB0aGlzLnVwZGF0ZSgpKSwgdGhpcy5jLmZvb3Rlck9mZnNldDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnMuZHQudGFibGUoKS5ub2RlKCk7CiAgICAgICAgICAgICAgICAodGhpcy5zLmVuYWJsZSB8fCB0aGlzLnMuYXV0b0Rpc2FibGUpICYmCiAgICAgICAgICAgICAgICAgICAgKGIoZSkuaXMoJzp2aXNpYmxlJykKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMucy5hdXRvRGlzYWJsZSA9ICExKSwgdGhpcy5lbmFibGUoITAsICExKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMucy5hdXRvRGlzYWJsZSA9ICEwKSwgdGhpcy5lbmFibGUoITEsICExKSksCiAgICAgICAgICAgICAgICAgICAgMCAhPT0gYihlKS5jaGlsZHJlbigndGhlYWQnKS5sZW5ndGgpICYmCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3Bvc2l0aW9ucygpLCB0aGlzLl9zY3JvbGwodm9pZCAwID09PSB0IHx8IHQpLCB0aGlzLl93aWR0aHModGhpcy5kb20uaGVhZGVyKSwgdGhpcy5fd2lkdGhzKHRoaXMuZG9tLmZvb3RlcikpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfY29uc3RydWN0b3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBvID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgIHQgPQogICAgICAgICAgICAgICAgICAgICAgICAoYihtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdzY3JvbGwnICsgdGhpcy5zLm5hbWVzcGFjZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uX3Njcm9sbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVzaXplJyArIHRoaXMucy5uYW1lc3BhY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC51dGlsLnRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8ucy5wb3NpdGlvbi53aW5kb3dIZWlnaHQgPSBiKG0pLmhlaWdodCgpKSwgby51cGRhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBiKCcuZmgtZml4ZWRIZWFkZXInKSksCiAgICAgICAgICAgICAgICAgICAgdCA9ICghdGhpcy5jLmhlYWRlck9mZnNldCAmJiB0Lmxlbmd0aCAmJiAodGhpcy5jLmhlYWRlck9mZnNldCA9IHQub3V0ZXJIZWlnaHQoKSksIGIoJy5maC1maXhlZEZvb3RlcicpKTsKICAgICAgICAgICAgICAgICF0aGlzLmMuZm9vdGVyT2Zmc2V0ICYmIHQubGVuZ3RoICYmICh0aGlzLmMuZm9vdGVyT2Zmc2V0ID0gdC5vdXRlckhlaWdodCgpKSwKICAgICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb2x1bW4tcmVvcmRlci5kdC5kdGZjIGNvbHVtbi12aXNpYmlsaXR5LmR0LmR0ZmMgY29sdW1uLXNpemluZy5kdC5kdGZjIHJlc3BvbnNpdmUtZGlzcGxheS5kdC5kdGZjJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby51cGRhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdkcmF3LmR0LmR0ZmMnLCBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby51cGRhdGUoZSAhPT0gaS5zZXR0aW5ncygpWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgaS5vbignZGVzdHJveS5kdGZjJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBvLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3NpdGlvbnMoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGwoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2Nsb25lOiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICAgICAgdmFyIG8sCiAgICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgICBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBkID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLmRvbVt0XSwKICAgICAgICAgICAgICAgICAgICByID0gJ2hlYWRlcicgPT09IHQgPyB0aGlzLmRvbS50aGVhZCA6IHRoaXMuZG9tLnRmb290OwogICAgICAgICAgICAgICAgKCdmb290ZXInID09PSB0ICYmIHRoaXMuX3Njcm9sbEVuYWJsZWQoKSkgfHwKICAgICAgICAgICAgICAgICAgICAoIWUgJiYgbi5mbG9hdGluZwogICAgICAgICAgICAgICAgICAgICAgICA/IG4uZmxvYXRpbmcucmVtb3ZlQ2xhc3MoJ2ZpeGVkSGVhZGVyLWZsb2F0aW5nIGZpeGVkSGVhZGVyLWxvY2tlZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKG4uZmxvYXRpbmcgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IG4ucGxhY2Vob2xkZXIgJiYgbi5wbGFjZWhvbGRlci5yZW1vdmUoKSwgbi5mbG9hdGluZy5jaGlsZHJlbigpLmRldGFjaCgpLCBuLmZsb2F0aW5nLnJlbW92ZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IGIoZC50YWJsZSgpLm5vZGUoKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChvID0gYihlLnBhcmVudCgpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSB0aGlzLl9zY3JvbGxFbmFibGVkKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChuLmZsb2F0aW5nID0gYihkLnRhYmxlKCkubm9kZSgpLmNsb25lTm9kZSghMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7IHRvcDogMCwgbGVmdDogMCB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignaWQnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbi5mbG9hdGluZ1BhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBvWzBdLm9mZnNldFdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnZml0LWNvbnRlbnQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBpID8gZS5vZmZzZXQoKS5sZWZ0ICsgby5zY3JvbGxMZWZ0KCkgOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdoZWFkZXInID09PSB0ID8geyB0b3A6IHRoaXMuYy5oZWFkZXJPZmZzZXQsIGJvdHRvbTogJycgfSA6IHsgdG9wOiAnJywgYm90dG9tOiB0aGlzLmMuZm9vdGVyT2Zmc2V0IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnZm9vdGVyJyA9PT0gdCA/ICdkdGZoLWZsb2F0aW5ncGFyZW50LWZvb3QnIDogJ2R0ZmgtZmxvYXRpbmdwYXJlbnQtaGVhZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbygnYm9keScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZHJlbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcSgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKG4uZmxvYXRpbmcpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0aWNreVBvc2l0aW9uKG4uZmxvYXRpbmcsICctJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gby5zY3JvbGxMZWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLnMuc2Nyb2xsTGVmdCA9IHsgZm9vdGVyOiB0LCBoZWFkZXI6IHQgfSksIG4uZmxvYXRpbmdQYXJlbnQuc2Nyb2xsTGVmdChzLnMuc2Nyb2xsTGVmdC5oZWFkZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgby5vZmYoJ3Njcm9sbC5kdGZoJykub24oJ3Njcm9sbC5kdGZoJywgaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbi5mbG9hdGluZ1BhcmVudC5jaGlsZHJlbigpLmNzcyh7IHdpZHRoOiAnZml0LWNvbnRlbnQnLCBwYWRkaW5nUmlnaHQ6IHMucy5kdC5zZXR0aW5ncygpWzBdLm9Ccm93c2VyLmJhcldpZHRoIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlID0gYignZm9vdGVyJyA9PT0gdCA/ICdkaXYuZHRmYy1ib3R0b20tYmxvY2tlcicgOiAnZGl2LmR0ZmMtdG9wLWJsb2NrZXInLCBkLnRhYmxlKCkuY29udGFpbmVyKCkpKS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbG9uZSgpLmFwcGVuZFRvKG4uZmxvYXRpbmdQYXJlbnQpLmNzcyh7IHBvc2l0aW9uOiAnZml4ZWQnLCByaWdodDogZS53aWR0aCgpIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChuLnBsYWNlaG9sZGVyID0gci5jbG9uZSghMSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIG4ucGxhY2Vob2xkZXIuZmluZCgnKltpZF0nKS5yZW1vdmVBdHRyKCdpZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgIG4uaG9zdC5wcmVwZW5kKG4ucGxhY2Vob2xkZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIG4uZmxvYXRpbmcuYXBwZW5kKHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpZHRocyhuKSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfc3RpY2t5UG9zaXRpb246IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgaTsKICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbEVuYWJsZWQoKSAmJgogICAgICAgICAgICAgICAgICAgICgoaSA9ICdydGwnID09PSBiKHRoaXMucy5kdC50YWJsZSgpLm5vZGUoKSkuY3NzKCdkaXJlY3Rpb24nKSksCiAgICAgICAgICAgICAgICAgICAgdC5maW5kKCd0aCcpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgZSwgbzsKICAgICAgICAgICAgICAgICAgICAgICAgJ3N0aWNreScgPT09IGIodGhpcykuY3NzKCdwb3NpdGlvbicpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHQgPSBiKHRoaXMpLmNzcygncmlnaHQnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IGIodGhpcykuY3NzKCdsZWZ0JykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2F1dG8nID09PSB0IHx8IGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdhdXRvJyAhPT0gZSAmJiBpICYmICgobyA9ICtlLnJlcGxhY2UoL3B4L2csICcnKSksIGIodGhpcykuY3NzKCdsZWZ0JywgMCA8IG8gPyBvIDogMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKG8gPSArdC5yZXBsYWNlKC9weC9nLCAnJykpLCBiKHRoaXMpLmNzcygncmlnaHQnLCAwIDwgbyA/IG8gOiAwKSkpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2hvcml6b250YWw6IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbywKICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5kb21bdF0sCiAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMucy5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgaS5mbG9hdGluZyAmJgogICAgICAgICAgICAgICAgICAgIHNbdF0gIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAodGhpcy5fc2Nyb2xsRW5hYmxlZCgpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgobyA9IGIoYih0aGlzLnMuZHQudGFibGUoKS5ub2RlKCkpLnBhcmVudCgpKS5zY3JvbGxMZWZ0KCkpLAogICAgICAgICAgICAgICAgICAgICAgICBpLmZsb2F0aW5nLnNjcm9sbExlZnQobyksCiAgICAgICAgICAgICAgICAgICAgICAgIGkuZmxvYXRpbmdQYXJlbnQuc2Nyb2xsTGVmdChvKSksCiAgICAgICAgICAgICAgICAgICAgKHNbdF0gPSBlKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9tb2RlQ2hhbmdlOiBmdW5jdGlvbiAodCwgZSwgbykgewogICAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgICAgICBkLAogICAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgICAgICAgIGYsCiAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMuZG9tW2VdLAogICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLnMucG9zaXRpb24sCiAgICAgICAgICAgICAgICAgICAgYyA9IHRoaXMuX3Njcm9sbEVuYWJsZWQoKTsKICAgICAgICAgICAgICAgICgnZm9vdGVyJyA9PT0gZSAmJiBjKSB8fAogICAgICAgICAgICAgICAgICAgICgoaSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGguZmxvYXRpbmdbMF0uc3R5bGUuc2V0UHJvcGVydHkoJ3dpZHRoJywgdCArICdweCcsICdpbXBvcnRhbnQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgaC5mbG9hdGluZ1BhcmVudFswXS5zdHlsZS5zZXRQcm9wZXJ0eSgnd2lkdGgnLCB0ICsgJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIChuID0gdGhpcy5kb21bJ2Zvb3RlcicgPT09IGUgPyAndGZvb3QnIDogJ3RoZWFkJ10pLAogICAgICAgICAgICAgICAgICAgIChzID0gYi5jb250YWlucyhuWzBdLCB2LmFjdGl2ZUVsZW1lbnQpID8gdi5hY3RpdmVFbGVtZW50IDogbnVsbCksCiAgICAgICAgICAgICAgICAgICAgKHIgPSBiKGIodGhpcy5zLmR0LnRhYmxlKCkubm9kZSgpKS5wYXJlbnQoKSkpLAogICAgICAgICAgICAgICAgICAgICdpbi1wbGFjZScgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyAoaC5wbGFjZWhvbGRlciAmJiAoaC5wbGFjZWhvbGRlci5yZW1vdmUoKSwgKGgucGxhY2Vob2xkZXIgPSBudWxsKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcicgPT09IGUgPyBoLmhvc3QucHJlcGVuZChuKSA6IGguaG9zdC5hcHBlbmQobiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaC5mbG9hdGluZyAmJiAoaC5mbG9hdGluZy5yZW1vdmUoKSwgKGguZmxvYXRpbmcgPSBudWxsKSwgdGhpcy5fc3RpY2t5UG9zaXRpb24oaC5ob3N0LCAnKycpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nUGFyZW50ICYmIChoLmZsb2F0aW5nUGFyZW50LmZpbmQoJ2Rpdi5kdGZjLXRvcC1ibG9ja2VyJykucmVtb3ZlKCksIGguZmxvYXRpbmdQYXJlbnQucmVtb3ZlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGIoYihoLmhvc3QucGFyZW50KCkpLnBhcmVudCgpKS5zY3JvbGxMZWZ0KHIuc2Nyb2xsTGVmdCgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAnaW4nID09PSB0CiAgICAgICAgICAgICAgICAgICAgICAgID8gKHRoaXMuX2Nsb25lKGUsIG8pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChuID0gci5vZmZzZXQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGYgPSAoZCA9IGIodikuc2Nyb2xsVG9wKCkpICsgYihtKS5oZWlnaHQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSBjID8gbi50b3AgOiBsLnRib2R5VG9wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAobiA9IGMgPyBuLnRvcCArIHIub3V0ZXJIZWlnaHQoKSA6IGwudGZvb3RUb3ApLAogICAgICAgICAgICAgICAgICAgICAgICAgIChyID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvb3RlcicgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZiA8IGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGwudGZvb3RIZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGEgKyBsLnRmb290SGVpZ2h0IC0gZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkICsgdGhpcy5jLmhlYWRlck9mZnNldCArIGwudGhlYWRIZWlnaHQgLSBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9ICdoZWFkZXInID09PSBlID8gJ3RvcCcgOiAnYm90dG9tJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGYgPSB0aGlzLmNbZSArICdPZmZzZXQnXSAtICgwIDwgciA/IHIgOiAwKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaC5mbG9hdGluZy5hZGRDbGFzcygnZml4ZWRIZWFkZXItZmxvYXRpbmcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nUGFyZW50LmNzcyhhLCBmKS5jc3MoeyBsZWZ0OiBsLmxlZnQsICd6LWluZGV4JzogMyB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICBpKGwud2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICdmb290ZXInID09PSBlICYmIGguZmxvYXRpbmcuY3NzKCd0b3AnLCAnJykpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JlbG93JyA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgICA/ICh0aGlzLl9jbG9uZShlLCBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nLmFkZENsYXNzKCdmaXhlZEhlYWRlci1sb2NrZWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nUGFyZW50LmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IGwudGZvb3RUb3AgLSBsLnRoZWFkSGVpZ2h0LCBsZWZ0OiBsLmxlZnQgKyAncHgnIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIGkobC53aWR0aCkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2Fib3ZlJyA9PT0gdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9jbG9uZShlLCBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nLmFkZENsYXNzKCdmaXhlZEhlYWRlci1sb2NrZWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoLmZsb2F0aW5nUGFyZW50LmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IGwudGJvZHlUb3AsIGxlZnQ6IGwubGVmdCArICdweCcgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaShsLndpZHRoKSksCiAgICAgICAgICAgICAgICAgICAgcyAmJgogICAgICAgICAgICAgICAgICAgICAgICBzICE9PSB2LmFjdGl2ZUVsZW1lbnQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnNjcm9sbExlZnQuaGVhZGVyID0gLTEpLAogICAgICAgICAgICAgICAgICAgICh0aGlzLnMuc2Nyb2xsTGVmdC5mb290ZXIgPSAtMSksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc1tlICsgJ01vZGUnXSA9IHQpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX3Bvc2l0aW9uczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgZSA9IHQudGFibGUoKSwKICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5zLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLmRvbSwKICAgICAgICAgICAgICAgICAgICBlID0gYihlLm5vZGUoKSksCiAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuX3Njcm9sbEVuYWJsZWQoKSwKICAgICAgICAgICAgICAgICAgICBkID0gYih0LnRhYmxlKCkuaGVhZGVyKCkpLAogICAgICAgICAgICAgICAgICAgIHQgPSBiKHQudGFibGUoKS5mb290ZXIoKSksCiAgICAgICAgICAgICAgICAgICAgaSA9IGkudGJvZHksCiAgICAgICAgICAgICAgICAgICAgbiA9IGUucGFyZW50KCk7CiAgICAgICAgICAgICAgICAoby52aXNpYmxlID0gZS5pcygnOnZpc2libGUnKSksCiAgICAgICAgICAgICAgICAgICAgKG8ud2lkdGggPSBlLm91dGVyV2lkdGgoKSksCiAgICAgICAgICAgICAgICAgICAgKG8ubGVmdCA9IGUub2Zmc2V0KCkubGVmdCksCiAgICAgICAgICAgICAgICAgICAgKG8udGhlYWRUb3AgPSBkLm9mZnNldCgpLnRvcCksCiAgICAgICAgICAgICAgICAgICAgKG8udGJvZHlUb3AgPSAocyA/IG4gOiBpKS5vZmZzZXQoKS50b3ApLAogICAgICAgICAgICAgICAgICAgIChvLnRib2R5SGVpZ2h0ID0gKHMgPyBuIDogaSkub3V0ZXJIZWlnaHQoKSksCiAgICAgICAgICAgICAgICAgICAgKG8udGhlYWRIZWlnaHQgPSBkLm91dGVySGVpZ2h0KCkpLAogICAgICAgICAgICAgICAgICAgIChvLnRoZWFkQm90dG9tID0gby50aGVhZFRvcCArIG8udGhlYWRIZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIChvLnRmb290VG9wID0gby50Ym9keVRvcCArIG8udGJvZHlIZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIHQubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgID8gKChvLnRmb290Qm90dG9tID0gby50Zm9vdFRvcCArIHQub3V0ZXJIZWlnaHQoKSksIChvLnRmb290SGVpZ2h0ID0gdC5vdXRlckhlaWdodCgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAoKG8udGZvb3RCb3R0b20gPSBvLnRmb290VG9wKSwgKG8udGZvb3RIZWlnaHQgPSAwKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9zY3JvbGw6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgZSwgbywgaSwgcywgZCwgbiwgciwgYSwgZiwgaCwgbCwgYywgcCwgZywgdTsKICAgICAgICAgICAgICAgIHRoaXMucy5kdC5zZXR0aW5ncygpWzBdLmJEZXN0cm95aW5nIHx8CiAgICAgICAgICAgICAgICAgICAgKChlID0gdGhpcy5fc2Nyb2xsRW5hYmxlZCgpKSwKICAgICAgICAgICAgICAgICAgICAoaSA9IChvID0gYih0aGlzLnMuZHQudGFibGUoKS5ub2RlKCkpLnBhcmVudCgpKS5vZmZzZXQoKSksCiAgICAgICAgICAgICAgICAgICAgKGggPSBvLm91dGVySGVpZ2h0KCkpLAogICAgICAgICAgICAgICAgICAgIChzID0gYih2KS5zY3JvbGxMZWZ0KCkpLAogICAgICAgICAgICAgICAgICAgIChkID0gYih2KS5zY3JvbGxUb3AoKSksCiAgICAgICAgICAgICAgICAgICAgKG4gPSBiKG0pLmhlaWdodCgpICsgZCksCiAgICAgICAgICAgICAgICAgICAgKGwgPSB0aGlzLnMucG9zaXRpb24pLAogICAgICAgICAgICAgICAgICAgIChjID0gZSA/IGkudG9wIDogbC50Ym9keVRvcCksCiAgICAgICAgICAgICAgICAgICAgKGEgPSAoZSA/IGkgOiBsKS5sZWZ0KSwKICAgICAgICAgICAgICAgICAgICAoaCA9IGUgPyBpLnRvcCArIGggOiBsLnRmb290VG9wKSwKICAgICAgICAgICAgICAgICAgICAoZiA9IGUgPyBvLm91dGVyV2lkdGgoKSA6IGwudGJvZHlXaWR0aCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jLmhlYWRlciAmJgogICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMucy5lbmFibGUgfHwgIWwudmlzaWJsZSB8fCBkICsgdGhpcy5jLmhlYWRlck9mZnNldCArIGwudGhlYWRIZWlnaHQgPD0gYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAociA9ICdpbi1wbGFjZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGQgKyB0aGlzLmMuaGVhZGVyT2Zmc2V0ICsgbC50aGVhZEhlaWdodCA+IGMgJiYgZCArIHRoaXMuYy5oZWFkZXJPZmZzZXQgKyBsLnRoZWFkSGVpZ2h0IDwgaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHIgPSAnaW4nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCArIHRoaXMuYy5oZWFkZXJPZmZzZXQgKyBsLnRoZWFkSGVpZ2h0ID4gaCB8fCB2b2lkIDAgPT09IHRoaXMuZG9tLmhlYWRlci5mbG9hdGluZ1BhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodCA9ICEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRvbS5oZWFkZXIuZmxvYXRpbmdQYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoeyB0b3A6IHRoaXMuYy5oZWFkZXJPZmZzZXQsIHBvc2l0aW9uOiAnZml4ZWQnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVxKDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRoaXMuZG9tLmhlYWRlci5mbG9hdGluZykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChyID0gJ2JlbG93JyksCiAgICAgICAgICAgICAgICAgICAgICAgICghdCAmJiByID09PSB0aGlzLnMuaGVhZGVyTW9kZSkgfHwgdGhpcy5fbW9kZUNoYW5nZShyLCAnaGVhZGVyJywgdCksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hvcml6b250YWwoJ2hlYWRlcicsIHMpKSwKICAgICAgICAgICAgICAgICAgICAocCA9IHsgb2Zmc2V0OiB7IHRvcDogMCwgbGVmdDogMCB9LCBoZWlnaHQ6IDAgfSksCiAgICAgICAgICAgICAgICAgICAgKGcgPSB7IG9mZnNldDogeyB0b3A6IDAsIGxlZnQ6IDAgfSwgaGVpZ2h0OiAwIH0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMuYy5mb290ZXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20udGZvb3QubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLnRmb290LmZpbmQoJ3RoLCB0ZCcpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMucy5lbmFibGUgfHwgIWwudmlzaWJsZSB8fCBsLnRmb290Qm90dG9tICsgdGhpcy5jLmZvb3Rlck9mZnNldCA8PSBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICh1ID0gJ2luLXBsYWNlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaCArIGwudGZvb3RIZWlnaHQgKyB0aGlzLmMuZm9vdGVyT2Zmc2V0ID4gbiAmJiBjICsgdGhpcy5jLmZvb3Rlck9mZnNldCA8IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKCh1ID0gJ2luJyksICh0ID0gITApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodSA9ICdhYm92ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAoIXQgJiYgdSA9PT0gdGhpcy5zLmZvb3Rlck1vZGUpIHx8IHRoaXMuX21vZGVDaGFuZ2UodSwgJ2Zvb3RlcicsIHQpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ob3Jpem9udGFsKCdmb290ZXInLCBzKSwKICAgICAgICAgICAgICAgICAgICAgICAgKGggPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgb2Zmc2V0OiB0Lm9mZnNldCgpLCBoZWlnaHQ6IHQub3V0ZXJIZWlnaHQoKSB9OwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKHAgPSB0aGlzLmRvbS5oZWFkZXIuZmxvYXRpbmcgPyBoKHRoaXMuZG9tLmhlYWRlci5mbG9hdGluZykgOiBoKHRoaXMuZG9tLnRoZWFkKSksCiAgICAgICAgICAgICAgICAgICAgICAgIChnID0gdGhpcy5kb20uZm9vdGVyLmZsb2F0aW5nID8gaCh0aGlzLmRvbS5mb290ZXIuZmxvYXRpbmcpIDogaCh0aGlzLmRvbS50Zm9vdCkpLAogICAgICAgICAgICAgICAgICAgICAgICBlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBnLm9mZnNldC50b3AgPiBkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoYyA9IG4gKyAoKGwgPSBkIC0gaS50b3ApID4gLXAuaGVpZ2h0ID8gbCA6IDApIC0gKHAub2Zmc2V0LnRvcCArIChsIDwgLXAuaGVpZ2h0ID8gcC5oZWlnaHQgOiAwKSArIGcuaGVpZ2h0KSksCiAgICAgICAgICAgICAgICAgICAgICAgIG8ub3V0ZXJIZWlnaHQoKGMgPSBjIDwgMCA/IDAgOiBjKSksCiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQoby5vdXRlckhlaWdodCgpKSA+PSBNYXRoLnJvdW5kKGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGIodGhpcy5kb20udGZvb3QucGFyZW50KCkpLmFkZENsYXNzKCdmaXhlZEhlYWRlci1mbG9hdGluZycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGIodGhpcy5kb20udGZvb3QucGFyZW50KCkpLnJlbW92ZUNsYXNzKCdmaXhlZEhlYWRlci1mbG9hdGluZycpKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5oZWFkZXIuZmxvYXRpbmcgJiYgdGhpcy5kb20uaGVhZGVyLmZsb2F0aW5nUGFyZW50LmNzcygnbGVmdCcsIGEgLSBzKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5mb290ZXIuZmxvYXRpbmcgJiYgdGhpcy5kb20uZm9vdGVyLmZsb2F0aW5nUGFyZW50LmNzcygnbGVmdCcsIGEgLSBzKSwKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHRoaXMucy5kdC5zZXR0aW5ncygpWzBdLl9maXhlZENvbHVtbnMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLmRvbS5oZWFkZXIucmlnaHRCbG9ja2VyID0gKHUgPSBmdW5jdGlvbiAodCwgZSwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMCA9PT0gKGkgPSBiKCdkaXYuZHRmYy0nICsgdCArICctJyArIGUgKyAnLWJsb2NrZXInKSkubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGkuY2xvbmUoKS5jc3MoJ3otaW5kZXgnLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdpbicgPT09IHIgfHwgJ2JlbG93JyA9PT0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJ2JvZHknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyh7IHRvcDogKCd0b3AnID09PSBlID8gcCA6IGcpLm9mZnNldC50b3AsIGxlZnQ6ICdyaWdodCcgPT09IHQgPyBhICsgZiAtIG8ud2lkdGgoKSA6IGEgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogby5kZXRhY2goKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkoJ3JpZ2h0JywgJ3RvcCcsIHRoaXMuZG9tLmhlYWRlci5yaWdodEJsb2NrZXIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLmhlYWRlci5sZWZ0QmxvY2tlciA9IHUoJ2xlZnQnLCAndG9wJywgdGhpcy5kb20uaGVhZGVyLmxlZnRCbG9ja2VyKSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvbS5mb290ZXIucmlnaHRCbG9ja2VyID0gdSgncmlnaHQnLCAnYm90dG9tJywgdGhpcy5kb20uZm9vdGVyLnJpZ2h0QmxvY2tlcikpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20uZm9vdGVyLmxlZnRCbG9ja2VyID0gdSgnbGVmdCcsICdib3R0b20nLCB0aGlzLmRvbS5mb290ZXIubGVmdEJsb2NrZXIpKSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfc2Nyb2xsRW5hYmxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQuc2V0dGluZ3MoKVswXS5vU2Nyb2xsOwogICAgICAgICAgICAgICAgcmV0dXJuICcnICE9PSB0LnNZIHx8ICcnICE9PSB0LnNYOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfd2lkdGhzOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5wbGFjZWhvbGRlcikKICAgICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGIodGhpcy5zLmR0LnRhYmxlKCkubm9kZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBiKGUucGFyZW50KCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuZmxvYXRpbmdQYXJlbnQuY3NzKCd3aWR0aCcsIG9bMF0ub2Zmc2V0V2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZmxvYXRpbmcuY3NzKCd3aWR0aCcsIGVbMF0ub2Zmc2V0V2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoJ2NvbGdyb3VwJywgdC5mbG9hdGluZykucmVtb3ZlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wbGFjZWhvbGRlci5wYXJlbnQoKS5maW5kKCdjb2xncm91cCcpLmNsb25lKCkuYXBwZW5kVG8odC5mbG9hdGluZykuZmluZCgnY29sJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMucy5kdC5jb2x1bW5zKCc6dmlzaWJsZScpLndpZHRocygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGQgPCBzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZCsrCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBpLmVxKGQpLmNzcygnd2lkdGgnLCBzW2RdKTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAocy52ZXJzaW9uID0gJzQuMC4xJyksCiAgICAgICAgKHMuZGVmYXVsdHMgPSB7IGhlYWRlcjogITAsIGZvb3RlcjogITEsIGhlYWRlck9mZnNldDogMCwgZm9vdGVyT2Zmc2V0OiAwIH0pLAogICAgICAgIChiLmZuLmRhdGFUYWJsZS5GaXhlZEhlYWRlciA9IHMpLAogICAgICAgIChiLmZuLkRhdGFUYWJsZS5GaXhlZEhlYWRlciA9IHMpLAogICAgICAgIGIodikub24oJ2luaXQuZHQuZHRmaCcsIGZ1bmN0aW9uICh0LCBlLCBvKSB7CiAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAnZHQnID09PSB0Lm5hbWVzcGFjZSAmJgogICAgICAgICAgICAgICAgKCh0ID0gZS5vSW5pdC5maXhlZEhlYWRlciksIChpID0gZC5kZWZhdWx0cy5maXhlZEhlYWRlciksIHQgfHwgaSkgJiYKICAgICAgICAgICAgICAgICFlLl9maXhlZEhlYWRlciAmJgogICAgICAgICAgICAgICAgKChpID0gYi5leHRlbmQoe30sIGksIHQpKSwgITEgIT09IHQpICYmCiAgICAgICAgICAgICAgICBuZXcgcyhlLCBpKTsKICAgICAgICB9KSwKICAgICAgICBkLkFwaS5yZWdpc3RlcignZml4ZWRIZWFkZXIoKScsIGZ1bmN0aW9uICgpIHt9KSwKICAgICAgICBkLkFwaS5yZWdpc3RlcignZml4ZWRIZWFkZXIuYWRqdXN0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0ID0gdC5fZml4ZWRIZWFkZXI7CiAgICAgICAgICAgICAgICB0ICYmIHQudXBkYXRlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGQuQXBpLnJlZ2lzdGVyKCdmaXhlZEhlYWRlci5lbmFibGUoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0ID0gdC5fZml4ZWRIZWFkZXI7CiAgICAgICAgICAgICAgICAoZSA9IHZvaWQgMCA9PT0gZSB8fCBlKSwgdCAmJiBlICE9PSB0LmVuYWJsZWQoKSAmJiB0LmVuYWJsZShlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZC5BcGkucmVnaXN0ZXIoJ2ZpeGVkSGVhZGVyLmVuYWJsZWQoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0WzBdLl9maXhlZEhlYWRlcjsKICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdC5lbmFibGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0pLAogICAgICAgIGQuQXBpLnJlZ2lzdGVyKCdmaXhlZEhlYWRlci5kaXNhYmxlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0ID0gdC5fZml4ZWRIZWFkZXI7CiAgICAgICAgICAgICAgICB0ICYmIHQuZW5hYmxlZCgpICYmIHQuZW5hYmxlKCExKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgYi5lYWNoKFsnaGVhZGVyJywgJ2Zvb3RlciddLCBmdW5jdGlvbiAodCwgbykgewogICAgICAgICAgICBkLkFwaS5yZWdpc3RlcignZml4ZWRIZWFkZXIuJyArIG8gKyAnT2Zmc2V0KCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlCiAgICAgICAgICAgICAgICAgICAgPyB0Lmxlbmd0aCAmJiB0WzBdLl9maXhlZEhlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICA/IHRbMF0uX2ZpeGVkSGVhZGVyW28gKyAnT2Zmc2V0J10oKQogICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0Ll9maXhlZEhlYWRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIHRbbyArICdPZmZzZXQnXShlKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBkCiAgICApOwp9KTsKCi8qISBLZXlUYWJsZSAyLjEyLjEKICogwqkgU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UKICovCiEoZnVuY3Rpb24gKG4pIHsKICAgIHZhciBpLCBzOwogICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgICAgICA/IGRlZmluZShbJ2pxdWVyeScsICdkYXRhdGFibGVzLm5ldCddLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiBuKGUsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGkgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAocyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgdC5mbi5kYXRhVGFibGUgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQnKShlLCB0KTsKICAgICAgICAgIH0pLAogICAgICAgICAgJ3VuZGVmaW5lZCcgPT0gdHlwZW9mIHdpbmRvdwogICAgICAgICAgICAgID8gKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgPSBlIHx8IHdpbmRvdyksICh0ID0gdCB8fCBpKGUpKSwgcyhlLCB0KSwgbih0LCBlLCBlLmRvY3VtZW50KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiAocyh3aW5kb3csIGkpLCAobW9kdWxlLmV4cG9ydHMgPSBuKGksIHdpbmRvdywgd2luZG93LmRvY3VtZW50KSkpKQogICAgICAgIDogbihqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOwp9KShmdW5jdGlvbiAoYywgdSwgZCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZnVuY3Rpb24gbyhlLCB0KSB7CiAgICAgICAgaWYgKCFsLnZlcnNpb25DaGVjayB8fCAhbC52ZXJzaW9uQ2hlY2soJzEuMTAuOCcpKSB0aHJvdyAnS2V5VGFibGUgcmVxdWlyZXMgRGF0YVRhYmxlcyAxLjEwLjggb3IgbmV3ZXInOwogICAgICAgIGlmICgKICAgICAgICAgICAgKCh0aGlzLmMgPSBjLmV4dGVuZCghMCwge30sIGwuZGVmYXVsdHMua2V5VGFibGUsIG8uZGVmYXVsdHMsIHQpKSwKICAgICAgICAgICAgKHRoaXMucyA9IHsKICAgICAgICAgICAgICAgIGR0OiBuZXcgbC5BcGkoZSksCiAgICAgICAgICAgICAgICBkdERyYXdpbmc6ICExLAogICAgICAgICAgICAgICAgZW5hYmxlOiAhMCwKICAgICAgICAgICAgICAgIGZvY3VzRHJhdzogITEsCiAgICAgICAgICAgICAgICB3YWl0aW5nRm9yRHJhdzogITEsCiAgICAgICAgICAgICAgICBsYXN0Rm9jdXM6IG51bGwsCiAgICAgICAgICAgICAgICBuYW1lc3BhY2U6ICcua2V5VGFibGUtJyArIG4rKywKICAgICAgICAgICAgICAgIHRhYklucHV0OiBudWxsLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKHRoaXMuZG9tID0ge30pLAogICAgICAgICAgICAodCA9IHRoaXMucy5kdC5zZXR0aW5ncygpWzBdKSwKICAgICAgICAgICAgKGUgPSB0LmtleXRhYmxlKSkKICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICh0LmtleXRhYmxlID0gdGhpcykuX2NvbnN0cnVjdG9yKCk7CiAgICB9CiAgICB2YXIgbCA9IGMuZm4uZGF0YVRhYmxlLAogICAgICAgIG4gPSAwLAogICAgICAgIGYgPSAwOwogICAgcmV0dXJuICgKICAgICAgICBjLmV4dGVuZChvLnByb3RvdHlwZSwgewogICAgICAgICAgICBibHVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9ibHVyKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMucy5lbmFibGUgPSBlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zLmVuYWJsZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1cyh0aGlzLnMuZHQuY2VsbChlLCB0KSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvY3VzZWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMucy5sYXN0Rm9jdXMgJiYgKCh0ID0gdGhpcy5zLmxhc3RGb2N1cy5jZWxsLmluZGV4KCkpLCBlLnJvdyA9PT0gdC5yb3cpICYmIGUuY29sdW1uID09PSB0LmNvbHVtbjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2NvbnN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLl90YWJJbnB1dCgpOwogICAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICAgICAgbyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICBlID0gYyhzLnRhYmxlKCkubm9kZSgpKSwKICAgICAgICAgICAgICAgICAgICBsID0gdGhpcy5zLm5hbWVzcGFjZSwKICAgICAgICAgICAgICAgICAgICB0ID0gITEsCiAgICAgICAgICAgICAgICAgICAgbiA9CiAgICAgICAgICAgICAgICAgICAgICAgICgnc3RhdGljJyA9PT0gZS5jc3MoJ3Bvc2l0aW9uJykgJiYgZS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGMocy50YWJsZSgpLmJvZHkoKSkub24oJ2NsaWNrJyArIGwsICd0aCwgdGQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMSAhPT0gby5zLmVuYWJsZSAmJiAodCA9IHMuY2VsbCh0aGlzKSkuYW55KCkgJiYgby5fZm9jdXModCwgbnVsbCwgITEsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgYyhkKS5vbigna2V5ZG93bicgKyBsLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCB8fCBvLnMuZHREcmF3aW5nID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogby5fa2V5KGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jLmJsdXJhYmxlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGQpLm9uKCdtb3VzZWRvd24nICsgbCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGUudGFyZ2V0KS5wYXJlbnRzKCcuZGF0YVRhYmxlc19maWx0ZXIsIC5kdC1zZWFyY2gnKS5sZW5ndGggJiYgby5fYmx1cigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGUudGFyZ2V0KS5wYXJlbnRzKCkuZmlsdGVyKHMudGFibGUoKS5jb250YWluZXIoKSkubGVuZ3RoIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGUudGFyZ2V0KS5wYXJlbnRzKCdkaXYuRFRFJykubGVuZ3RoIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGUudGFyZ2V0KS5wYXJlbnRzKCdkaXYuZWRpdG9yLWRhdGV0aW1lJykubGVuZ3RoIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGUudGFyZ2V0KS5wYXJlbnRzKCdkaXYuZHQtZGF0ZXRpbWUnKS5sZW5ndGggfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoZS50YXJnZXQpLnBhcmVudHMoKS5maWx0ZXIoJy5EVEZDX0Nsb25lZCcpLmxlbmd0aCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fYmx1cigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYy5lZGl0b3IgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaSA9IHRoaXMuYy5lZGl0b3IpLm9uKCdvcGVuLmtleVRhYmxlTWFpbicsIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lubGluZScgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zLmVuYWJsZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5lbmFibGUoITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLm9uZSgnY2xvc2UnICsgbCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5lbmFibGUoITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYy5lZGl0T25Gb2N1cyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub24oJ2tleS1mb2N1cycgKyBsICsgJyBrZXktcmVmb2N1cycgKyBsLCBmdW5jdGlvbiAoZSwgdCwgbiwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLl9lZGl0b3IobnVsbCwgaSwgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5vbigna2V5JyArIGwsIGZ1bmN0aW9uIChlLCB0LCBuLCBpLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fZWRpdG9yKG4sIHMsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhzLnRhYmxlKCkuYm9keSgpKS5vbignZGJsY2xpY2snICsgbCwgJ3RoLCB0ZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IG8ucy5lbmFibGUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXMuY2VsbCh0aGlzKS5hbnkoKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5zLmxhc3RGb2N1cyAmJiB0aGlzICE9PSBvLnMubGFzdEZvY3VzLmNlbGwubm9kZSgpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLl9lZGl0b3IobnVsbCwgZSwgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdwcmVTdWJtaXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbigncHJlU3VibWl0Q2FuY2VsbGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ3N1Ym1pdENvbXBsZXRlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICBzLm9uKCdzdGF0ZVNhdmVQYXJhbXMnICsgbCwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ua2V5VGFibGUgPSBvLnMubGFzdEZvY3VzID8gby5zLmxhc3RGb2N1cy5jZWxsLmluZGV4KCkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5vbignY29sdW1uLXZpc2liaWxpdHknICsgbCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uX3RhYklucHV0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBzLm9uKCdjb2x1bW4tcmVvcmRlcicgKyBsLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG8ucy5sYXN0Rm9jdXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5jZWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpID0gcy5yZWxhdGl2ZS5jb2x1bW4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLmNlbGxbMF1bMF0uY29sdW1uID0gbi5tYXBwaW5nLmluZGV4T2YoaSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLnJlbGF0aXZlLmNvbHVtbiA9IG4ubWFwcGluZy5pbmRleE9mKGkpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBzLm9uKCdwcmVEcmF3JyArIGwgKyAnIHNjcm9sbGVyLXdpbGwtZHJhdycgKyBsLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zLmR0RHJhd2luZyA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5vbignZHJhdycgKyBsLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIG4sIGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5zLmR0RHJhd2luZyA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLl90YWJJbnB1dCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucy5mb2N1c0RyYXcgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8ucy5sYXN0Rm9jdXMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodCA9IG8ucy5sYXN0Rm9jdXMucmVsYXRpdmUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBzLnBhZ2UuaW5mbygpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdC5yb3cpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gbi5yZWNvcmRzRGlzcGxheSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPCBuLnN0YXJ0IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA+IG4uc3RhcnQgKyBuLmxlbmd0aCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID49IG4ucmVjb3Jkc0Rpc3BsYXkgJiYgKGkgPSBuLnJlY29yZHNEaXNwbGF5IC0gMSksIG8uX2ZvY3VzKGksIHQuY29sdW1uLCAhMCwgZSkpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMuY2xpcGJvYXJkICYmIHRoaXMuX2NsaXBib2FyZCgpLAogICAgICAgICAgICAgICAgICAgICAgICBzLm9uKCdkZXN0cm95JyArIGwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uX2JsdXIoITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub2ZmKGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMocy50YWJsZSgpLmJvZHkoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2snICsgbCwgJ3RoLCB0ZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vZmYoJ2RibGNsaWNrJyArIGwsICd0aCwgdGQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vZmYoJ21vdXNlZG93bicgKyBsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub2ZmKCdrZXlkb3duJyArIGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vZmYoJ2NvcHknICsgbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9mZigncGFzdGUnICsgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBzLnN0YXRlLmxvYWRlZCgpKTsKICAgICAgICAgICAgICAgIG4gJiYgbi5rZXlUYWJsZQogICAgICAgICAgICAgICAgICAgID8gcy5vbmUoJ2luaXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBzLmNlbGwobi5rZXlUYWJsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hbnkoKSAmJiBlLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIDogdGhpcy5jLmZvY3VzICYmIHMuY2VsbCh0aGlzLmMuZm9jdXMpLmZvY3VzKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9ibHVyOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICB0aGlzLnMuZW5hYmxlICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmxhc3RGb2N1cyAmJgogICAgICAgICAgICAgICAgICAgICgodCA9IHRoaXMucy5sYXN0Rm9jdXMuY2VsbCksCiAgICAgICAgICAgICAgICAgICAgYyh0Lm5vZGUoKSkucmVtb3ZlQ2xhc3ModGhpcy5jLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5sYXN0Rm9jdXMgPSBudWxsKSwKICAgICAgICAgICAgICAgICAgICBlIHx8ICh0aGlzLl91cGRhdGVGaXhlZENvbHVtbnModC5pbmRleCgpLmNvbHVtbiksIHRoaXMuX2VtaXRFdmVudCgna2V5LWJsdXInLCBbdGhpcy5zLmR0LCB0XSkpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2NsaXBib2FyZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIG8gPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgbCA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMucy5uYW1lc3BhY2UsCiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuYy5jbGlwYm9hcmQ7CiAgICAgICAgICAgICAgICB1LmdldFNlbGVjdGlvbiAmJgogICAgICAgICAgICAgICAgICAgICgoITAgIT09IHQgJiYgIXQuY29weSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgYyhkKS5vbignY29weScgKyBlLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBlLm9yaWdpbmFsRXZlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHUuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbC5zLmxhc3RGb2N1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0ICYmIG4gJiYgKGUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgbi5jZWxsLnJlbmRlcihsLmMuY2xpcGJvYXJkT3J0aG9nb25hbCkpLCBlLnByZXZlbnREZWZhdWx0KCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAoITAgIT09IHQgJiYgIXQucGFzdGUpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIGMoZCkub24oJ3Bhc3RlJyArIGUsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5vcmlnaW5hbEV2ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBsLnMubGFzdEZvY3VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBkLmFjdGl2ZUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGwuYy5lZGl0b3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbiB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpICYmICdib2R5JyAhPT0gaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnByZXZlbnREZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5jbGlwYm9hcmREYXRhICYmIHUuY2xpcGJvYXJkRGF0YS5nZXREYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHQgPSB1LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGUuY2xpcGJvYXJkRGF0YSAmJiBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSAmJiAodCA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKGkgPSBsLl9pbmxpbmVPcHRpb25zKG4uY2VsbC5pbmRleCgpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5pbmxpbmUoaS5jZWxsLCBpLmZpZWxkLCBpLm9wdGlvbnMpLnNldChzLmRpc3BsYXllZCgpWzBdLCB0KS5zdWJtaXQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAobi5jZWxsLmRhdGEodCksIG8uZHJhdyghMSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfY29sdW1uczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgdCA9IGUuY29sdW1ucyh0aGlzLmMuY29sdW1ucykuaW5kZXhlcygpLAogICAgICAgICAgICAgICAgICAgIG4gPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgZS5jb2x1bW5zKCc6dmlzaWJsZScpLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSB0LmluZGV4T2YoZSkgJiYgbi5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9lZGl0b3I6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgcywgbywgbCwgYSwgcjsKICAgICAgICAgICAgICAgICF0aGlzLnMubGFzdEZvY3VzIHx8CiAgICAgICAgICAgICAgICAgICAgKHQgJiYgJ2RyYXcnID09PSB0LnR5cGUpIHx8CiAgICAgICAgICAgICAgICAgICAgKChzID0gKGkgPSB0aGlzKS5zLmR0KSwKICAgICAgICAgICAgICAgICAgICAobyA9IHRoaXMuYy5lZGl0b3IpLAogICAgICAgICAgICAgICAgICAgIChsID0gdGhpcy5zLmxhc3RGb2N1cy5jZWxsKSwKICAgICAgICAgICAgICAgICAgICAoYSA9IHRoaXMucy5uYW1lc3BhY2UgKyAnZScgKyBmKyspLAogICAgICAgICAgICAgICAgICAgIGMoJ2Rpdi5EVEUnLCBsLm5vZGUoKSkubGVuZ3RoKSB8fAogICAgICAgICAgICAgICAgICAgIChudWxsICE9PSBlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoMCA8PSBlICYmIGUgPD0gOSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDExID09PSBlIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMiA9PT0gZSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDE0IDw9IGUgJiYgZSA8PSAzMSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxMTIgPD0gZSAmJiBlIDw9IDEyMykgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgxMjcgPD0gZSAmJiBlIDw9IDE1OSkpKSB8fAogICAgICAgICAgICAgICAgICAgICh0ICYmICh0LnN0b3BQcm9wYWdhdGlvbigpLCAxMyA9PT0gZSkgJiYgdC5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIChyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGkuX2lubGluZU9wdGlvbnMobC5pbmRleCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgby5vbmUoJ29wZW4nICsgYSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5vZmYoJ2NhbmNlbE9wZW4nICsgYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiB8fCBjKCdkaXYuRFRFX0ZpZWxkX0lucHV0Q29udHJvbCBpbnB1dCwgZGl2LkRURV9GaWVsZF9JbnB1dENvbnRyb2wgdGV4dGFyZWEnKS5zZWxlY3QoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmtleXMuZW5hYmxlKG4gPyAndGFiLW9ubHknIDogJ25hdmlnYXRpb24tb25seScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub24oJ2tleS1ibHVyLmVkaXRvcicsIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWJtaXQnICE9PSBvLnMuZWRpdE9wdHMub25CbHVyICYmIG8uZGlzcGxheWVkKCkgJiYgbi5ub2RlKCkgPT09IGwubm9kZSgpICYmIG8uc3VibWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBjKHMudGFibGUoKS5jb250YWluZXIoKSkuYWRkQ2xhc3MoJ2R0ay1mb2N1cy1hbHQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLm9uKCdwcmVTdWJtaXRDYW5jZWxsZWQnICsgYSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuX2ZvY3VzKGwsIG51bGwsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ub24oJ3N1Ym1pdFVuc3VjY2Vzc2Z1bCcgKyBhLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuX2ZvY3VzKGwsIG51bGwsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLm9uZSgnY2xvc2UnICsgYSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmtleXMuZW5hYmxlKCEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub2ZmKCdrZXktYmx1ci5lZGl0b3InKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ub2ZmKGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhzLnRhYmxlKCkuY29udGFpbmVyKCkpLnJlbW92ZUNsYXNzKCdkdGstZm9jdXMtYWx0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnMucmV0dXJuU3VibWl0ICYmICgoaS5zLnJldHVyblN1Ym1pdCA9ICExKSwgaS5fZW1pdEV2ZW50KCdrZXktcmV0dXJuLXN1Ym1pdCcsIFtzLCBsXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uZSgnY2FuY2VsT3BlbicgKyBhLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5vZmYoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlubGluZShlLmNlbGwsIGUuZmllbGQsIGUub3B0aW9ucyk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgMTMgPT09IGUKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKG4gPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgYyhkKS5vbmUoJ2tleXVwJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogcigpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2lubGluZU9wdGlvbnM6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jLmVkaXRvck9wdGlvbnMgPyB0aGlzLmMuZWRpdG9yT3B0aW9ucyhlKSA6IHsgY2VsbDogZSwgZmllbGQ6IHZvaWQgMCwgb3B0aW9uczogdm9pZCAwIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9lbWl0RXZlbnQ6IGZ1bmN0aW9uIChuLCBpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zLmR0Lml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMoZS5uVGFibGUpLnRyaWdnZXJIYW5kbGVyKG4sIGkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9mb2N1czogZnVuY3Rpb24gKGUsIHQsIG4sIGkpIHsKICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgIGwgPSBvLnBhZ2UuaW5mbygpLAogICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLnMubGFzdEZvY3VzOwogICAgICAgICAgICAgICAgaWYgKCgoaSA9IGkgfHwgbnVsbCksIHRoaXMucy5lbmFibGUpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCdudW1iZXInICE9IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS5hbnkoKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuaW5kZXgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodCA9IHIuY29sdW1uKSwgKGUgPSBvLnJvd3MoeyBmaWx0ZXI6ICdhcHBsaWVkJywgb3JkZXI6ICdhcHBsaWVkJyB9KS5pbmRleGVzKCkuaW5kZXhPZihyLnJvdykpIDwgMCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgbC5zZXJ2ZXJTaWRlICYmIChlICs9IGwuc3RhcnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09IGwubGVuZ3RoICYmIChlIDwgbC5zdGFydCB8fCBlID49IGwuc3RhcnQgKyBsLmxlbmd0aCkpCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuZm9jdXNEcmF3ID0gITApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy53YWl0aW5nRm9yRHJhdyA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKCdkcmF3JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5zLmZvY3VzRHJhdyA9ICExKSwgKHMucy53YWl0aW5nRm9yRHJhdyA9ICExKSwgcy5fZm9jdXMoZSwgdCwgdm9pZCAwLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYWdlKE1hdGguZmxvb3IoZSAvIGwubGVuZ3RoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZHJhdyghMSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoLTEgIT09IGMuaW5BcnJheSh0LCB0aGlzLl9jb2x1bW5zKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGwuc2VydmVyU2lkZSAmJiAoZSAtPSBsLnN0YXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBvLmNlbGxzKG51bGwsIHQsIHsgc2VhcmNoOiAnYXBwbGllZCcsIG9yZGVyOiAnYXBwbGllZCcgfSkuZmxhdHRlbigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsID0gby5jZWxsKHJbZV0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gdGhpcy5fZW1pdEV2ZW50KCdrZXktcHJlZm9jdXMnLCBbdGhpcy5zLmR0LCBsLCBpIHx8IG51bGxdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gci5pbmRleE9mKCExKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5ub2RlID09PSBsLm5vZGUoKSkgcmV0dXJuIHZvaWQgdGhpcy5fZW1pdEV2ZW50KCdrZXktcmVmb2N1cycsIFt0aGlzLnMuZHQsIGwsIGkgfHwgbnVsbF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2JsdXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZU90aGVyRm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gYyhsLm5vZGUoKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIuYWRkQ2xhc3ModGhpcy5jLmNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUZpeGVkQ29sdW1ucyh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgMCAhPT0gbiAmJiAhMCAhPT0gbikgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9zY3JvbGwoYyh1KSwgYyhkLmJvZHkpLCByLCAnb2Zmc2V0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IG8udGFibGUoKS5ib2R5KCkucGFyZW50Tm9kZSkgIT09IG8udGFibGUoKS5oZWFkZXIoKS5wYXJlbnROb2RlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gYyhhLnBhcmVudE5vZGUpKSwgdGhpcy5fc2Nyb2xsKG4sIG4sIHIsICdwb3NpdGlvbicpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucGFnZS5pbmZvKCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMubGFzdEZvY3VzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogbC5ub2RlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93OiBhLnN0YXJ0ICsgby5yb3dzKHsgcGFnZTogJ2N1cnJlbnQnIH0pLmluZGV4ZXMoKS5pbmRleE9mKGwuaW5kZXgoKS5yb3cpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGwuaW5kZXgoKS5jb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtaXRFdmVudCgna2V5LWZvY3VzJywgW3RoaXMucy5kdCwgbCwgaSB8fCBudWxsXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zdGF0ZS5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9rZXk6IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zLndhaXRpbmdGb3JEcmF3KSBuLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICghYyhuLnRhcmdldCkuY2xvc2VzdCgnLmR0ZS1pbmxpbmVBZGQnKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMucy5lbmFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHQgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnMucmV0dXJuU3VibWl0ID0gKCduYXZpZ2F0aW9uLW9ubHknID09PSBlIHx8ICd0YWItb25seScgPT09IGUpICYmIDEzID09PSBuLmtleUNvZGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgITAgPT09IGUgfHwgJ25hdmlnYXRpb24tb25seScgPT09IGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChlICYmICghKDAgPT09IG4ua2V5Q29kZSB8fCBuLmN0cmxLZXkgfHwgbi5tZXRhS2V5IHx8IG4uYWx0S2V5KSB8fCAobi5jdHJsS2V5ICYmIG4uYWx0S2V5KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLnMubGFzdEZvY3VzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnMuZHQuY2VsbChpLm5vZGUpLmFueSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gISF0aGlzLnMuZHQuc2V0dGluZ3MoKVswXS5vU2Nyb2xsLnNZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jLmtleXMgfHwgLTEgIT09IGMuaW5BcnJheShuLmtleUNvZGUsIHRoaXMuYy5rZXlzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLmtleUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnByZXZlbnREZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleUFjdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl9zaGlmdChuLCBuLnNoaWZ0S2V5ID8gJ2xlZnQnIDogJ3JpZ2h0JywgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhpLm5vZGUpLmZpbmQoJ2Rpdi5EVEUnKS5sZW5ndGggfHwgKHRoaXMuYy5ibHVyYWJsZSAmJiAhMCA9PT0gZSAmJiB0aGlzLl9ibHVyKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlBY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wYWdlKDMzID09PSBuLmtleUNvZGUgPyAncHJldmlvdXMnIDogJ25leHQnKS5kcmF3KCExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlBY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBvLmNlbGxzKHsgcGFnZTogJ2N1cnJlbnQnIH0pLmluZGV4ZXMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gcy5fY29sdW1ucygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fZm9jdXMoby5jZWxsKGVbMzUgPT09IG4ua2V5Q29kZSA/IGUubGVuZ3RoIC0gMSA6IHRbMF1dKSwgbnVsbCwgITAsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5QWN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX3NoaWZ0KG4sICdsZWZ0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2tleUFjdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl9zaGlmdChuLCAndXAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5QWN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX3NoaWZ0KG4sICdyaWdodCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlBY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fc2hpZnQobiwgJ2Rvd24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jLmVkaXRvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lZGl0b3IobnVsbCwgbiwgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwID09PSBlICYmIHRoaXMuX2VtaXRFdmVudCgna2V5JywgW28sIG4ua2V5Q29kZSwgdGhpcy5zLmxhc3RGb2N1cy5jZWxsLCBuXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnMubGFzdEZvY3VzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9rZXlBY3Rpb246IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuYy5lZGl0b3I7CiAgICAgICAgICAgICAgICB0ICYmIHQubW9kZSgpICYmIHQuZGlzcGxheSgpID8gdC5zdWJtaXQoZSkgOiBlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9yZW1vdmVPdGhlckZvY3VzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMucy5kdC50YWJsZSgpLm5vZGUoKTsKICAgICAgICAgICAgICAgIGMuZm4uZGF0YVRhYmxlLnRhYmxlcyh7IGFwaTogITAgfSkuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlKCkubm9kZSgpICE9PSB0ICYmIHRoaXMuY2VsbC5ibHVyKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX3Njcm9sbDogZnVuY3Rpb24gKGUsIHQsIG4sIGkpIHsKICAgICAgICAgICAgICAgIHZhciBzID0gbltpXSgpLAogICAgICAgICAgICAgICAgICAgIG8gPSBuLm91dGVySGVpZ2h0KCksCiAgICAgICAgICAgICAgICAgICAgbCA9IG4ub3V0ZXJXaWR0aCgpLAogICAgICAgICAgICAgICAgICAgIGEgPSB0LnNjcm9sbFRvcCgpLAogICAgICAgICAgICAgICAgICAgIHIgPSB0LnNjcm9sbExlZnQoKSwKICAgICAgICAgICAgICAgICAgICBjID0gZS5oZWlnaHQoKSwKICAgICAgICAgICAgICAgICAgICBlID0gZS53aWR0aCgpOwogICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJyA9PT0gaSAmJiAocy50b3AgKz0gcGFyc2VJbnQobi5jbG9zZXN0KCd0YWJsZScpLmNzcygndG9wJyksIDEwKSksCiAgICAgICAgICAgICAgICAgICAgcy50b3AgPCBhICYmIHMudG9wICsgbyA+IGEgLSA1ICYmIHQuc2Nyb2xsVG9wKHMudG9wKSwKICAgICAgICAgICAgICAgICAgICBzLmxlZnQgPCByICYmIHQuc2Nyb2xsTGVmdChzLmxlZnQpLAogICAgICAgICAgICAgICAgICAgIHMudG9wICsgbyA+IGEgKyBjICYmIHMudG9wIDwgYSArIGMgKyA1ICYmIG8gPCBjICYmIHQuc2Nyb2xsVG9wKHMudG9wICsgbyAtIGMpLAogICAgICAgICAgICAgICAgICAgIHMubGVmdCArIGwgPiByICsgZSAmJiBsIDwgZSAmJiB0LnNjcm9sbExlZnQocy5sZWZ0ICsgbCAtIGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfc2hpZnQ6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwKICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgIG8gPSBzLnBhZ2UuaW5mbygpLAogICAgICAgICAgICAgICAgICAgIGwgPSBvLnJlY29yZHNEaXNwbGF5LAogICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLl9jb2x1bW5zKCksCiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMucy5sYXN0Rm9jdXM7CiAgICAgICAgICAgICAgICByICYmCiAgICAgICAgICAgICAgICAgICAgKHIgPSByLmNlbGwpICYmCiAgICAgICAgICAgICAgICAgICAgKChpID0gcy5yb3dzKHsgZmlsdGVyOiAnYXBwbGllZCcsIG9yZGVyOiAnYXBwbGllZCcgfSkuaW5kZXhlcygpLmluZGV4T2Yoci5pbmRleCgpLnJvdykpLAogICAgICAgICAgICAgICAgICAgIG8uc2VydmVyU2lkZSAmJiAoaSArPSBvLnN0YXJ0KSwKICAgICAgICAgICAgICAgICAgICAobyA9IGkpLAogICAgICAgICAgICAgICAgICAgIChyID0gYVsoaSA9IHMuY29sdW1ucyhhKS5pbmRleGVzKCkuaW5kZXhPZihyLmluZGV4KCkuY29sdW1uKSldKSwKICAgICAgICAgICAgICAgICAgICAncnRsJyA9PT0gYyhzLnRhYmxlKCkubm9kZSgpKS5jc3MoJ2RpcmVjdGlvbicpICYmICgncmlnaHQnID09PSB0ID8gKHQgPSAnbGVmdCcpIDogJ2xlZnQnID09PSB0ICYmICh0ID0gJ3JpZ2h0JykpLAogICAgICAgICAgICAgICAgICAgICdyaWdodCcgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyAociA9IGkgPj0gYS5sZW5ndGggLSAxID8gKG8rKywgYVswXSkgOiBhW2kgKyAxXSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAnbGVmdCcgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyAociA9IDAgPT09IGkgPyAoby0tLCBhW2EubGVuZ3RoIC0gMV0pIDogYVtpIC0gMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ3VwJyA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgICA/IG8tLQogICAgICAgICAgICAgICAgICAgICAgICA6ICdkb3duJyA9PT0gdCAmJiBvKyssCiAgICAgICAgICAgICAgICAgICAgMCA8PSBvICYmIG8gPCBsICYmIC0xICE9PSBjLmluQXJyYXkociwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgPyAoZSAmJiBlLnByZXZlbnREZWZhdWx0KCksIHRoaXMuX2ZvY3VzKG8sIHIsICEwLCBlKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBuICYmIHRoaXMuYy5ibHVyYWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2JsdXIoKQogICAgICAgICAgICAgICAgICAgICAgICA6IGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX3RhYklucHV0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICBlID0gbnVsbCAhPT0gdGhpcy5jLnRhYkluZGV4ID8gdGhpcy5jLnRhYkluZGV4IDogaS5zZXR0aW5ncygpWzBdLmlUYWJJbmRleDsKICAgICAgICAgICAgICAgIC0xICE9IGUgJiYKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnRhYklucHV0IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICgoZSA9IGMoJzxkaXY+PGlucHV0IHR5cGU9InRleHQiIHRhYmluZGV4PSInICsgZSArICciLz48L2Rpdj4nKS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJywKICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBpLmNlbGwoJzplcSgwKScsIG4uX2NvbHVtbnMoKSwgeyBwYWdlOiAnY3VycmVudCcgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5hbnkoKSAmJiBuLl9mb2N1cyh0LCBudWxsLCAhMCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy50YWJJbnB1dCA9IGUpKSwKICAgICAgICAgICAgICAgICAgICAoZSA9IHRoaXMucy5kdC5jZWxsKCc6ZXEoMCknLCAnMDp2aXNpYmxlJywgeyBwYWdlOiAnY3VycmVudCcsIG9yZGVyOiAnY3VycmVudCcgfSkubm9kZSgpKSkgJiYKICAgICAgICAgICAgICAgICAgICBjKGUpLnByZXBlbmQodGhpcy5zLnRhYklucHV0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX3VwZGF0ZUZpeGVkQ29sdW1uczogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgaSA9IG4uc2V0dGluZ3MoKVswXTsKICAgICAgICAgICAgICAgIGkuX29GaXhlZENvbHVtbnMgJiYKICAgICAgICAgICAgICAgICAgICAoKHQgPSBpLl9vRml4ZWRDb2x1bW5zLnMuaUxlZnRDb2x1bW5zKSwgKGkgPSBpLmFvQ29sdW1ucy5sZW5ndGggLSBpLl9vRml4ZWRDb2x1bW5zLnMuaVJpZ2h0Q29sdW1ucyksIGUgPCB0IHx8IGkgPD0gZSkgJiYKICAgICAgICAgICAgICAgICAgICBuLmZpeGVkQ29sdW1ucygpLnVwZGF0ZSgpOwogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIChvLmRlZmF1bHRzID0gewogICAgICAgICAgICBibHVyYWJsZTogITAsCiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ZvY3VzJywKICAgICAgICAgICAgY2xpcGJvYXJkOiAhMCwKICAgICAgICAgICAgY2xpcGJvYXJkT3J0aG9nb25hbDogJ2Rpc3BsYXknLAogICAgICAgICAgICBjb2x1bW5zOiAnJywKICAgICAgICAgICAgZWRpdG9yOiBudWxsLAogICAgICAgICAgICBlZGl0T25Gb2N1czogITEsCiAgICAgICAgICAgIGVkaXRvck9wdGlvbnM6IG51bGwsCiAgICAgICAgICAgIGZvY3VzOiBudWxsLAogICAgICAgICAgICBrZXlzOiBudWxsLAogICAgICAgICAgICB0YWJJbmRleDogbnVsbCwKICAgICAgICB9KSwKICAgICAgICAoby52ZXJzaW9uID0gJzIuMTIuMScpLAogICAgICAgIChjLmZuLmRhdGFUYWJsZS5LZXlUYWJsZSA9IG8pLAogICAgICAgIChjLmZuLkRhdGFUYWJsZS5LZXlUYWJsZSA9IG8pLAogICAgICAgIGwuQXBpLnJlZ2lzdGVyKCdjZWxsLmJsdXIoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUua2V5dGFibGUgJiYgZS5rZXl0YWJsZS5ibHVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGwuQXBpLnJlZ2lzdGVyKCdjZWxsKCkuZm9jdXMoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ2NlbGwnLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgZS5rZXl0YWJsZSAmJiBlLmtleXRhYmxlLmZvY3VzKHQsIG4pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBsLkFwaS5yZWdpc3Rlcigna2V5cy5kaXNhYmxlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLmtleXRhYmxlICYmIGUua2V5dGFibGUuZW5hYmxlKCExKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgbC5BcGkucmVnaXN0ZXIoJ2tleXMuZW5hYmxlKCknLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5rZXl0YWJsZSAmJiBlLmtleXRhYmxlLmVuYWJsZSh2b2lkIDAgPT09IHQgfHwgdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGwuQXBpLnJlZ2lzdGVyKCdrZXlzLmVuYWJsZWQoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICByZXR1cm4gISF0Lmxlbmd0aCAmJiAhIXRbMF0ua2V5dGFibGUgJiYgdFswXS5rZXl0YWJsZS5lbmFibGVkKCk7CiAgICAgICAgfSksCiAgICAgICAgbC5BcGkucmVnaXN0ZXIoJ2tleXMubW92ZSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUua2V5dGFibGUgJiYgZS5rZXl0YWJsZS5fc2hpZnQobnVsbCwgdCwgITEpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBsLmV4dC5zZWxlY3Rvci5jZWxsLnB1c2goZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgdmFyIGkgPSB0LmZvY3VzZWQsCiAgICAgICAgICAgICAgICBzID0gZS5rZXl0YWJsZSwKICAgICAgICAgICAgICAgIG8gPSBbXTsKICAgICAgICAgICAgaWYgKCFzIHx8IHZvaWQgMCA9PT0gaSkgcmV0dXJuIG47CiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwLCBhID0gbi5sZW5ndGg7IGwgPCBhOyBsKyspICgoITAgPT09IGkgJiYgcy5mb2N1c2VkKG5bbF0pKSB8fCAoITEgPT09IGkgJiYgIXMuZm9jdXNlZChuW2xdKSkpICYmIG8ucHVzaChuW2xdKTsKICAgICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgfSksCiAgICAgICAgYyhkKS5vbigncHJlSW5pdC5kdC5kdGsnLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICB2YXIgaSwgczsKICAgICAgICAgICAgJ2R0JyA9PT0gZS5uYW1lc3BhY2UgJiYKICAgICAgICAgICAgICAgICgoZSA9IHQub0luaXQua2V5cyksIChpID0gbC5kZWZhdWx0cy5rZXlzKSwgZSB8fCBpKSAmJgogICAgICAgICAgICAgICAgKChzID0gYy5leHRlbmQoe30sIGksIGUpKSwgITEgIT09IGUpICYmCiAgICAgICAgICAgICAgICBuZXcgbyh0LCBzKTsKICAgICAgICB9KSwKICAgICAgICBsCiAgICApOwp9KTsKCi8qISBSZXNwb25zaXZlIDMuMC4zCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohKGZ1bmN0aW9uIChuKSB7CiAgICB2YXIgaSwgcjsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnXSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gbihlLCB3aW5kb3csIGRvY3VtZW50KTsKICAgICAgICAgIH0pCiAgICAgICAgOiAnb2JqZWN0JyA9PSB0eXBlb2YgZXhwb3J0cwogICAgICAgID8gKChpID0gcmVxdWlyZSgnanF1ZXJ5JykpLAogICAgICAgICAgKHIgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIHQuZm4uZGF0YVRhYmxlIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0JykoZSwgdCk7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlID0gZSB8fCB3aW5kb3cpLCAodCA9IHQgfHwgaShlKSksIHIoZSwgdCksIG4odCwgZSwgZS5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKHIod2luZG93LCBpKSwgKG1vZHVsZS5leHBvcnRzID0gbihpLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IG4oalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKGIsIHksIGQpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgIGlmICghaS52ZXJzaW9uQ2hlY2sgfHwgIWkudmVyc2lvbkNoZWNrKCcyJykpIHRocm93ICdEYXRhVGFibGVzIFJlc3BvbnNpdmUgcmVxdWlyZXMgRGF0YVRhYmxlcyAyIG9yIG5ld2VyJzsKICAgICAgICAodGhpcy5zID0geyBjaGlsZE5vZGVTdG9yZToge30sIGNvbHVtbnM6IFtdLCBjdXJyZW50OiBbXSwgZHQ6IG5ldyBpLkFwaShlKSB9KSwKICAgICAgICAgICAgdGhpcy5zLmR0LnNldHRpbmdzKClbMF0ucmVzcG9uc2l2ZSB8fAogICAgICAgICAgICAgICAgKHQgJiYgJ3N0cmluZycgPT0gdHlwZW9mIHQuZGV0YWlscwogICAgICAgICAgICAgICAgICAgID8gKHQuZGV0YWlscyA9IHsgdHlwZTogdC5kZXRhaWxzIH0pCiAgICAgICAgICAgICAgICAgICAgOiB0ICYmICExID09PSB0LmRldGFpbHMKICAgICAgICAgICAgICAgICAgICA/ICh0LmRldGFpbHMgPSB7IHR5cGU6ICExIH0pCiAgICAgICAgICAgICAgICAgICAgOiB0ICYmICEwID09PSB0LmRldGFpbHMgJiYgKHQuZGV0YWlscyA9IHsgdHlwZTogJ2lubGluZScgfSksCiAgICAgICAgICAgICAgICAodGhpcy5jID0gYi5leHRlbmQoITAsIHt9LCBhLmRlZmF1bHRzLCBpLmRlZmF1bHRzLnJlc3BvbnNpdmUsIHQpKSwKICAgICAgICAgICAgICAgIChlLnJlc3BvbnNpdmUgPSB0aGlzKS5fY29uc3RydWN0b3IoKSk7CiAgICB9CiAgICB2YXIgaSA9IGIuZm4uZGF0YVRhYmxlLAogICAgICAgIGUgPQogICAgICAgICAgICAoYi5leHRlbmQoYS5wcm90b3R5cGUsIHsKICAgICAgICAgICAgICAgIF9jb25zdHJ1Y3RvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGIoeSkuaW5uZXJXaWR0aCgpLAogICAgICAgICAgICAgICAgICAgICAgICBlID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoci5zZXR0aW5ncygpWzBdLl9yZXNwb25zaXZlID0gdGhpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKHkpLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcmllbnRhdGlvbmNoYW5nZS5kdHInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkudXRpbC50aHJvdHRsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gYih5KS5pbm5lcldpZHRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgIT09IHQgJiYgKHMuX3Jlc2l6ZSgpLCAodCA9IGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLm9uKCdyb3ctY3JlYXRlZC5kdHInLCBmdW5jdGlvbiAoZSwgdCwgbiwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSBiLmluQXJyYXkoITEsIHMucy5jdXJyZW50KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKCc+dGQsID50aCcsIHQpLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSByLmNvbHVtbi5pbmRleCgndG9EYXRhJywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMSA9PT0gcy5zLmN1cnJlbnRbZV0gJiYgYih0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpLmFkZENsYXNzKCdkdHItaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLm9uKCdkZXN0cm95LmR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLm9mZignLmR0cicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKHIudGFibGUoKS5ib2R5KCkpLm9mZignLmR0cicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKHkpLm9mZigncmVzaXplLmR0ciBvcmllbnRhdGlvbmNoYW5nZS5kdHInKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5jZWxscygnLmR0ci1jb250cm9sJykubm9kZXMoKS50byQoKS5yZW1vdmVDbGFzcygnZHRyLWNvbnRyb2wnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYihyLnRhYmxlKCkubm9kZSgpKS5yZW1vdmVDbGFzcygnZHRyLWlubGluZSBjb2xsYXBzZWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5lYWNoKHMucy5jdXJyZW50LCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITEgPT09IHQgJiYgcy5fc2V0Q29sdW1uVmlzKGUsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYy5icmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUud2lkdGggPCB0LndpZHRoID8gMSA6IGUud2lkdGggPiB0LndpZHRoID8gLTEgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGFzc0xvZ2ljKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMuZGV0YWlscyk7CiAgICAgICAgICAgICAgICAgICAgITEgIT09IGUudHlwZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAocy5fZGV0YWlsc0luaXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgci5vbignY29sdW1uLXZpc2liaWxpdHkuZHRyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fdGltZXIgJiYgY2xlYXJUaW1lb3V0KHMuX3RpbWVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5fdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMuX3RpbWVyID0gbnVsbCksIHMuX2NsYXNzTG9naWMoKSwgcy5fcmVzaXplQXV0bygpLCBzLl9yZXNpemUoITApLCBzLl9yZWRyYXdDaGlsZHJlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgci5vbignZHJhdy5kdHInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl9yZWRyYXdDaGlsZHJlbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgYihyLnRhYmxlKCkubm9kZSgpKS5hZGRDbGFzcygnZHRyLScgKyBlLnR5cGUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgci5vbignY29sdW1uLWNhbGMuZHQnLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHMucy5jdXJyZW50LCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHQudmlzaWJsZS5pbmRleE9mKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICExID09PSBuW2ldICYmIDAgPD0gciAmJiB0LnZpc2libGUuc3BsaWNlKHIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgci5vbigncHJlWGhyLmR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnJvd3MoKS5ldmVyeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZC5pc1Nob3duKCkgJiYgZS5wdXNoKHRoaXMuaWQoITApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIub25lKCdkcmF3LmR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fcmVzaXplQXV0bygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fcmVzaXplKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnJvd3MoZSkuZXZlcnkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX2RldGFpbHNEaXNwbGF5KHRoaXMsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdkcmF3LmR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl9jb250cm9sQ2xhc3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuX3Jlc2l6ZUF1dG8oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fcmVzaXplKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIub24oJ2NvbHVtbi1yZW9yZGVyLmR0cicsIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLl9jbGFzc0xvZ2ljKCksIHMuX3Jlc2l6ZUF1dG8oKSwgcy5fcmVzaXplKCEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIub24oJ2NvbHVtbi1zaXppbmcuZHRyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fcmVzaXplQXV0bygpLCBzLl9yZXNpemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfY29sR3JvdXBBdHRhY2g6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmICh0W25dLmdldCgwKS5wYXJlbnROb2RlICE9PSBlWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBuICsgMTsgciA8IHQubGVuZ3RoOyByKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZVswXSA9PT0gdFtyXS5nZXQoMCkucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBpID8gdFtuXS5pbnNlcnRCZWZvcmUodFtpXVswXSkgOiBlLmFwcGVuZCh0W25dKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2NoaWxkTm9kZXM6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0ICsgJy0nICsgbjsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zLmNoaWxkTm9kZVN0b3JlW2ldKSByZXR1cm4gdGhpcy5zLmNoaWxkTm9kZVN0b3JlW2ldOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBbXSwgcyA9IGUuY2VsbCh0LCBuKS5ub2RlKCkuY2hpbGROb2RlcywgbyA9IDAsIGQgPSBzLmxlbmd0aDsgbyA8IGQ7IG8rKykgci5wdXNoKHNbb10pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5zLmNoaWxkTm9kZVN0b3JlW2ldID0gcik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2NoaWxkTm9kZXNSZXN0b3JlOiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gdCArICctJyArIG47CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucy5jaGlsZE5vZGVTdG9yZVtpXSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuY2VsbCh0LCBuKS5ub2RlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5zLmNoaWxkTm9kZVN0b3JlW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gZVswXS5wYXJlbnROb2RlLmNoaWxkTm9kZXMsIG8gPSBbXSwgZCA9IDAsIGEgPSBzLmxlbmd0aDsgZCA8IGE7IGQrKykgby5wdXNoKHNbZF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDAsIGMgPSBvLmxlbmd0aDsgbCA8IGM7IGwrKykgci5hcHBlbmRDaGlsZChvW2xdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY2hpbGROb2RlU3RvcmVbaV0gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9jb2x1bW5zVmlzaWJsaXR5OiBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMucy5jb2x1bW5zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNvbHVtbklkeDogdCwgcHJpb3JpdHk6IGUucHJpb3JpdHkgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnByaW9yaXR5ICE9PSB0LnByaW9yaXR5ID8gZS5wcmlvcml0eSAtIHQucHJpb3JpdHkgOiBlLmNvbHVtbklkeCAtIHQuY29sdW1uSWR4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGIubWFwKGUsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExID09PSBpLmNvbHVtbih0KS52aXNpYmxlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnbm90LXZpc2libGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCFlLmF1dG8gfHwgbnVsbCAhPT0gZS5taW5XaWR0aCkgJiYgKCEwID09PSBlLmF1dG8gPyAnLScgOiAtMSAhPT0gYi5pbkFycmF5KG4sIGUuaW5jbHVkZUluKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIG8gPCBkOwogICAgICAgICAgICAgICAgICAgICAgICBvKysKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICEwID09PSByW29dICYmIChzICs9IGVbb10ubWluV2lkdGgpOwogICAgICAgICAgICAgICAgICAgIHZhciBhID0gaS5zZXR0aW5ncygpWzBdLm9TY3JvbGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBhLnNZIHx8IGEuc1ggPyBhLmlCYXJXaWR0aCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpLnRhYmxlKCkuY29udGFpbmVyKCkub2Zmc2V0V2lkdGggLSBhIC0gczsKICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwLCBkID0gci5sZW5ndGg7IG8gPCBkOyBvKyspIGVbb10uY29udHJvbCAmJiAobCAtPSBlW29dLm1pbldpZHRoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9ICExOwogICAgICAgICAgICAgICAgICAgIGZvciAobyA9IDAsIGQgPSB0Lmxlbmd0aDsgbyA8IGQ7IG8rKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHRbb10uY29sdW1uSWR4OwogICAgICAgICAgICAgICAgICAgICAgICAnLScgPT09IHJbdV0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFlW3VdLmNvbnRyb2wgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdV0ubWluV2lkdGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjIHx8IGwgLSBlW3VdLm1pbldpZHRoIDwgMCA/IChyW3VdID0gIShjID0gITApKSA6IChyW3VdID0gITApLCAobCAtPSBlW3VdLm1pbldpZHRoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBoID0gITE7CiAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gMCwgZCA9IGUubGVuZ3RoOyBvIDwgZDsgbysrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVbb10uY29udHJvbCAmJiAhZVtvXS5uZXZlciAmJiAhMSA9PT0gcltvXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwLCBkID0gZS5sZW5ndGg7IG8gPCBkOyBvKyspIGVbb10uY29udHJvbCAmJiAocltvXSA9IGgpLCAnbm90LXZpc2libGUnID09PSByW29dICYmIChyW29dID0gITEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSA9PT0gYi5pbkFycmF5KCEwLCByKSAmJiAoclswXSA9ICEwKSwgcjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfY2xhc3NMb2dpYzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGQoZSwgdCwgbiwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgcywgbzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnbWF4LScgPT09IG4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gYS5fZmluZCh0KS53aWR0aCwgcyA9IDAsIG8gPSBsLmxlbmd0aDsgcyA8IG87IHMrKykgbFtzXS53aWR0aCA8PSByICYmIHUoZSwgbFtzXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdtaW4tJyA9PT0gbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHIgPSBhLl9maW5kKHQpLndpZHRoLCBzID0gMCwgbyA9IGwubGVuZ3RoOyBzIDwgbzsgcysrKSBsW3NdLndpZHRoID49IHIgJiYgdShlLCBsW3NdLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ25vdC0nID09PSBuKSBmb3IgKHMgPSAwLCBvID0gbC5sZW5ndGg7IHMgPCBvOyBzKyspIC0xID09PSBsW3NdLm5hbWUuaW5kZXhPZihpKSAmJiB1KGUsIGxbc10ubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjW2VdLmluY2x1ZGVJbi5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLmMuYnJlYWtwb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLnMuZHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2x1bW5zKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lcSgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb2x1bW4oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlLmhlYWRlcigpLmNsYXNzTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUuaW5pdCgpLnJlc3BvbnNpdmVQcmlvcml0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUuaGVhZGVyKCkuZ2V0QXR0cmlidXRlKCdkYXRhLXByaW9yaXR5Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gbnVsbCA9PSBlID8gMWU0IDogK2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlSW46IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0bzogITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldmVyOiAhIXQubWF0Y2goL1xiKGR0clwtKT9uZXZlclxiLyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gY1tlXS5pbmNsdWRlSW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSA9PT0gYi5pbkFycmF5KHQsIGUpICYmIGUucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjLmVhY2goZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IGUuY2xhc3NOYW1lLnNwbGl0KCcgJyksIHMgPSAhMSwgbiA9IDAsIGkgPSB0Lmxlbmd0aDsgbiA8IGk7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W25dLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnYWxsJyA9PT0gbyB8fCAnZHRyLWFsbCcgPT09IG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKGUuaW5jbHVkZUluID0gYi5tYXAobCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ25vbmUnID09PSBvIHx8ICdkdHItbm9uZScgPT09IG8gfHwgZS5uZXZlcikgcmV0dXJuIHZvaWQgKHMgPSAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2NvbnRyb2wnID09PSBvIHx8ICdkdHItY29udHJvbCcgPT09IG8pIHJldHVybiAocyA9ICEwKSwgdm9pZCAoZS5jb250cm9sID0gITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5lYWNoKGwsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0Lm5hbWUuc3BsaXQoJy0nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5ldyBSZWdFeHAoJyhtaW5cXC18bWF4XFwtfG5vdFxcLSk/KCcgKyBuWzBdICsgJykoXFwtW19hLXpBLVowLTldKT8nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG8ubWF0Y2goaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHMgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbMl0gPT09IG5bMF0gJiYgaVszXSA9PT0gJy0nICsgblsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkKHIsIHQubmFtZSwgaVsxXSwgaVsyXSArIGlbM10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGlbMl0gIT09IG5bMF0gfHwgaVszXSB8fCBkKHIsIHQubmFtZSwgaVsxXSwgaVsyXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcyB8fCAoZS5hdXRvID0gITApOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmNvbHVtbnMgPSBjKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfY29udHJvbENsYXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHQsIG47CiAgICAgICAgICAgICAgICAgICAgJ2lubGluZScgPT09IHRoaXMuYy5kZXRhaWxzLnR5cGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKChlID0gdGhpcy5zLmR0KSwKICAgICAgICAgICAgICAgICAgICAgICAgKHQgPSB0aGlzLnMuY3VycmVudCksCiAgICAgICAgICAgICAgICAgICAgICAgIChuID0gYi5pbkFycmF5KCEwLCB0KSksCiAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jZWxscygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICE9PSBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBwYWdlOiAnY3VycmVudCcgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ub2RlcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG8kKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoJy5kdHItY29udHJvbCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2R0ci1jb250cm9sJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2VsbHMobnVsbCwgbiwgeyBwYWdlOiAnY3VycmVudCcgfSkubm9kZXMoKS50byQoKS5hZGRDbGFzcygnZHRyLWNvbnRyb2wnKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2RldGFpbHNEaXNwbGF5OiBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBiKHQubm9kZSgpKS50b2dnbGVDbGFzcygnZHRyLWV4cGFuZGVkJywgITEgIT09IGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYihzLnRhYmxlKCkubm9kZSgpKS50cmlnZ2VySGFuZGxlcigncmVzcG9uc2l2ZS1kaXNwbGF5LmR0JywgW3MsIHQsIGUsIG5dKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5jLmRldGFpbHM7CiAgICAgICAgICAgICAgICAgICAgbyAmJgogICAgICAgICAgICAgICAgICAgICAgICAhMSAhPT0gby50eXBlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoaSA9ICdzdHJpbmcnID09IHR5cGVvZiBvLnJlbmRlcmVyID8gYS5yZW5kZXJlcltvLnJlbmRlcmVyXSgpIDogby5yZW5kZXJlciksCiAgICAgICAgICAgICAgICAgICAgICAgICdib29sZWFuJyA9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIChvID0gby5kaXNwbGF5KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmNhbGwociwgcywgdFswXVswXSwgci5fZGV0YWlsc09iaih0WzBdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUoITEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgZShvKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfZGV0YWlsc0luaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmMuZGV0YWlscywKICAgICAgICAgICAgICAgICAgICAgICAgciA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ2lubGluZScgPT09IGUudHlwZSAmJiAoZS50YXJnZXQgPSAndGQuZHRyLWNvbnRyb2wsIHRoLmR0ci1jb250cm9sJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLm9uKCdkcmF3LmR0cicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLl90YWJJbmRleGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uX3RhYkluZGV4ZXMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoaS50YWJsZSgpLmJvZHkoKSkub24oJ2tleXVwLmR0cicsICd0ZCwgdGgnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEzID09PSBlLmtleUNvZGUgJiYgYih0aGlzKS5kYXRhKCdkdHIta2V5Ym9hcmQnKSAmJiBiKHRoaXMpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0KSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9ICdzdHJpbmcnID09IHR5cGVvZiByID8gciA6ICd0ZCwgdGgnOwogICAgICAgICAgICAgICAgICAgICh2b2lkIDAgPT09IHIgJiYgbnVsbCA9PT0gcikgfHwKICAgICAgICAgICAgICAgICAgICAgICAgYihpLnRhYmxlKCkuYm9keSgpKS5vbignY2xpY2suZHRyIG1vdXNlZG93bi5kdHIgbW91c2V1cC5kdHInLCBlLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoaS50YWJsZSgpLm5vZGUoKSkuaGFzQ2xhc3MoJ2NvbGxhcHNlZCcpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IGIuaW5BcnJheShiKHRoaXMpLmNsb3Nlc3QoJ3RyJykuZ2V0KDApLCBpLnJvd3MoKS5ub2RlcygpLnRvQXJyYXkoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIgPCAwID8gaS5jb2x1bW5zKCkuZXEoMCkubGVuZ3RoICsgciA6IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpLmNlbGwodGhpcykuaW5kZXgoKS5jb2x1bW4gIT09IHQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGkucm93KGIodGhpcykuY2xvc2VzdCgndHInKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJyA9PT0gZS50eXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbi5fZGV0YWlsc0Rpc3BsYXkodCwgITEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ21vdXNlZG93bicgPT09IGUudHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGIodGhpcykuY3NzKCdvdXRsaW5lJywgJ25vbmUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdtb3VzZXVwJyA9PT0gZS50eXBlICYmIGIodGhpcykudHJpZ2dlcignYmx1cicpLmNzcygnb3V0bGluZScsICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2RldGFpbHNPYmo6IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5zLmR0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiLm1hcCh0aGlzLnMuY29sdW1ucywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLm5ldmVyICYmICFlLmNvbnRyb2wpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogci5zZXR0aW5ncygpWzBdLmFvQ29sdW1uc1t0XS5zQ2xhc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSW5kZXg6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogci5jZWxsKG4sIHQpLnJlbmRlcihpLmMub3J0aG9nb25hbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiByLmNvbHVtbih0KS52aXNpYmxlKCkgJiYgIWkucy5jdXJyZW50W3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByLmNvbHVtbih0KS50aXRsZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfZmluZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5jLmJyZWFrcG9pbnRzLCBuID0gMCwgaSA9IHQubGVuZ3RoOyBuIDwgaTsgbisrKSBpZiAodFtuXS5uYW1lID09PSBlKSByZXR1cm4gdFtuXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfcmVkcmF3Q2hpbGRyZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLnMuZHQ7CiAgICAgICAgICAgICAgICAgICAgaS5yb3dzKHsgcGFnZTogJ2N1cnJlbnQnIH0pLml0ZXJhdG9yKCdyb3cnLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBuLl9kZXRhaWxzRGlzcGxheShpLnJvdyh0KSwgITApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9yZXNpemU6IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gYih5KS5pbm5lcldpZHRoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5jLmJyZWFrcG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHNbMF0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB0aGlzLnMuY29sdW1ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLnMuY3VycmVudC5zbGljZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHMubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgMCA8PSBsOwogICAgICAgICAgICAgICAgICAgICAgICBsLS0KICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0IDw9IHNbbF0ud2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBzW2xdLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5fY29sdW1uc1Zpc2libGl0eShvKSwKICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICgodGhpcy5zLmN1cnJlbnQgPSBjKSwgITEpOwogICAgICAgICAgICAgICAgICAgIGZvciAobCA9IDAsIGUgPSBkLmxlbmd0aDsgbCA8IGU7IGwrKykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCExID09PSBjW2xdICYmICFkW2xdLm5ldmVyICYmICFkW2xdLmNvbnRyb2wgJiYgITEgPT0gIXIuY29sdW1uKGwpLnZpc2libGUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBiKHIudGFibGUoKS5ub2RlKCkpLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZWQnLCB1KTsKICAgICAgICAgICAgICAgICAgICB2YXIgaCA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICBwID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHIuc2V0dGluZ3MoKVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGIoci50YWJsZSgpLm5vZGUoKSkuY2hpbGRyZW4oJ2NvbGdyb3VwJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBmLmFvQ29sdW1ucy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmNvbEVsOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2x1bW5zKCkKICAgICAgICAgICAgICAgICAgICAgICAgLmVxKDApCiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmNvbHVtbihlKS52aXNpYmxlKCkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoITAgPT09IGNbdF0gJiYgcCsrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghbiAmJiBjW3RdID09PSBhW3RdKSB8fCAoKGggPSAhMCksIGkuX3NldENvbHVtblZpcyhlLCBjW3RdKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1t0XSA/IGkuX2NvbEdyb3VwQXR0YWNoKG0sIHYsIHQpIDogdlt0XS5kZXRhY2goKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5jb2x1bW5zLmFkanVzdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVkcmF3Q2hpbGRyZW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoci50YWJsZSgpLm5vZGUoKSkudHJpZ2dlcigncmVzcG9uc2l2ZS1yZXNpemUuZHQnLCBbciwgdGhpcy5fcmVzcG9uc2l2ZU9ubHlIaWRkZW4oKV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gci5wYWdlLmluZm8oKS5yZWNvcmRzRGlzcGxheSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoJ3RkJywgci50YWJsZSgpLmJvZHkoKSkuZXEoMCkuYXR0cignY29sc3BhbicsIHApLAogICAgICAgICAgICAgICAgICAgICAgICBpLl9jb250cm9sQ2xhc3MoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfcmVzaXplQXV0bzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5zLmNvbHVtbnMsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbHVtbnMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluZGV4ZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNvbHVtbihlKS52aXNpYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYy5hdXRvICYmCiAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5pbkFycmF5KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIubWFwKG4sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmF1dG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQudGFibGUoKS5ub2RlKCkuY2xvbmVOb2RlKCExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gYih0LnRhYmxlKCkuaGVhZGVyKCkuY2xvbmVOb2RlKCExKSkuYXBwZW5kVG8oZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGIodC50YWJsZSgpLmZvb3RlcigpLmNsb25lTm9kZSghMSkpLmFwcGVuZFRvKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBiKHQudGFibGUoKS5ib2R5KCkpLmNsb25lKCExLCAhMSkuZW1wdHkoKS5hcHBlbmRUbyhlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChlLnN0eWxlLndpZHRoID0gJ2F1dG8nKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRhYmxlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oZWFkZXIuc3RydWN0dXJlKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiKGUuY2VsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xvbmUoITEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsICd0YWJsZS1jZWxsJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCd3aWR0aCcsICdhdXRvJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdtaW4td2lkdGgnLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYignPHRyLz4nKS5hcHBlbmQoZSkuYXBwZW5kVG8oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYignPHRyLz4nKS5hcHBlbmRUbyhkKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsIDwgcy5jb3VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCsrCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuYXBwZW5kKCc8dGQvPicpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMuZGV0YWlscy5yZW5kZXJlci5fcmVzcG9uc2l2ZU1vdmVzTm9kZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdC5yb3dzKHsgcGFnZTogJ2N1cnJlbnQnIH0pLmV2ZXJ5KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5ub2RlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChpID0gZS5jbG9uZU5vZGUoITEpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNlbGxzKG4sIHMpLmV2ZXJ5KGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSByLnMuY2hpbGROb2RlU3RvcmVbbiArICctJyArIHRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA/IGIodGhpcy5ub2RlKCkuY2xvbmVOb2RlKCExKSkuYXBwZW5kKGIodCkuY2xvbmUoKSkgOiBiKHRoaXMubm9kZSgpKS5jbG9uZSghMSkpLmFwcGVuZFRvKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuYXBwZW5kKGkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYihkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChiKHQucm93cyh7IHBhZ2U6ICdjdXJyZW50JyB9KS5ub2RlcygpKS5jbG9uZSghMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgndGgsIHRkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLmZpbmQoJ3RoLCB0ZCcpLmNzcygnZGlzcGxheScsICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGFibGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb290ZXIuc3RydWN0dXJlKHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYihlLmNlbGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZSghMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsICd0YWJsZS1jZWxsJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnd2lkdGgnLCAnYXV0bycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ21pbi13aWR0aCcsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoJzx0ci8+JykuYXBwZW5kKGUpLmFwcGVuZFRvKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lubGluZScgPT09IHRoaXMuYy5kZXRhaWxzLnR5cGUgJiYgYihlKS5hZGRDbGFzcygnZHRyLWlubGluZSBjb2xsYXBzZWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoZSkuZmluZCgnW25hbWVdJykucmVtb3ZlQXR0cignbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYihlKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBiKCc8ZGl2Lz4nKS5jc3MoeyB3aWR0aDogMSwgaGVpZ2h0OiAxLCBvdmVyZmxvdzogJ2hpZGRlbicsIGNsZWFyOiAnYm90aCcgfSkuYXBwZW5kKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBlLmluc2VydEJlZm9yZSh0LnRhYmxlKCkubm9kZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHQuY29sdW1uLmluZGV4KCdmcm9tVmlzaWJsZScsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bZV0ubWluV2lkdGggPSB0aGlzLm9mZnNldFdpZHRoIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9yZXNwb25zaXZlT25seUhpZGRlbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5zLmR0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiLm1hcCh0aGlzLnMuY3VycmVudCwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExID09PSBuLmNvbHVtbih0KS52aXNpYmxlKCkgfHwgZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfc2V0Q29sdW1uVmlzOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRIZWFkZXJWaXMoZSwgdCwgaS50YWJsZSgpLmhlYWRlci5zdHJ1Y3R1cmUoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldEhlYWRlclZpcyhlLCB0LCBpLnRhYmxlKCkuZm9vdGVyLnN0cnVjdHVyZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgaS5jb2x1bW4oZSkubm9kZXMoKS50byQoKS5jc3MoJ2Rpc3BsYXknLCByKS50b2dnbGVDbGFzcygnZHRyLWhpZGRlbicsICF0KSwKICAgICAgICAgICAgICAgICAgICAgICAgYi5pc0VtcHR5T2JqZWN0KHRoaXMucy5jaGlsZE5vZGVTdG9yZSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2VsbHMobnVsbCwgZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhlcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5fY2hpbGROb2Rlc1Jlc3RvcmUoaSwgZS5yb3csIGUuY29sdW1uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfc2V0SGVhZGVyVmlzOiBmdW5jdGlvbiAobiwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGkgPyAnJyA6ICdub25lJzsKICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVbbl0pIGIoZVtuXS5jZWxsKS5jc3MoJ2Rpc3BsYXknLCBzKS50b2dnbGVDbGFzcygnZHRyLWhpZGRlbicsICFpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IG47IDAgPD0gdDsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVbdF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0XS5jZWxsLmNvbFNwYW4gPSByLl9jb2xzcGFuKGUsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9jb2xzcGFuOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAxLCBpID0gdCArIDE7IGkgPCBlLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZVtpXSAmJiB0aGlzLnMuY3VycmVudFtpXSkgbisrOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlW2ldKSBicmVhazsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfdGFiSW5kZXhlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICB0ID0gZS5jZWxscyh7IHBhZ2U6ICdjdXJyZW50JyB9KS5ub2RlcygpLnRvJCgpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5jLmRldGFpbHMudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIHQuZmlsdGVyKCdbZGF0YS1kdHIta2V5Ym9hcmRdJykucmVtb3ZlRGF0YSgnW2RhdGEtZHRyLWtleWJvYXJkXScpLAogICAgICAgICAgICAgICAgICAgICAgICAoJ251bWJlcicgPT0gdHlwZW9mIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZS5jZWxscyhudWxsLCBpLCB7IHBhZ2U6ICdjdXJyZW50JyB9KS5ub2RlcygpLnRvJCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9ICd0ZDpmaXJzdC1jaGlsZCwgdGg6Zmlyc3QtY2hpbGQnID09PSBpID8gJz50ZDpmaXJzdC1jaGlsZCwgPnRoOmZpcnN0LWNoaWxkJyA6IGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yb3dzKHsgcGFnZTogJ2N1cnJlbnQnIH0pLm5vZGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhYkluZGV4Jywgbi5pVGFiSW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgnZHRyLWtleWJvYXJkJywgMSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGEuZGVmYXVsdHMgPSB7CiAgICAgICAgICAgICAgICBicmVha3BvaW50czogKGEuYnJlYWtwb2ludHMgPSBbCiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnZGVza3RvcCcsIHdpZHRoOiAxIC8gMCB9LAogICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ3RhYmxldC1sJywgd2lkdGg6IDEwMjQgfSwKICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICd0YWJsZXQtcCcsIHdpZHRoOiA3NjggfSwKICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdtb2JpbGUtbCcsIHdpZHRoOiA0ODAgfSwKICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdtb2JpbGUtcCcsIHdpZHRoOiAzMjAgfSwKICAgICAgICAgICAgICAgIF0pLAogICAgICAgICAgICAgICAgYXV0bzogITAsCiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogKGEuZGlzcGxheSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRSb3c6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGIoZS5ub2RlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGkuaGFzQ2xhc3MoJ2R0ci1leHBhbmRlZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGUuY2hpbGQobigpLCAnY2hpbGQnKS5zaG93KCksICEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaS5oYXNDbGFzcygnZHRyLWV4cGFuZGVkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlLmNoaWxkKCExKSwgITEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAhMSAhPT0gKHQgPSBuKCkpICYmIChlLmNoaWxkKHQsICdjaGlsZCcpLnNob3coKSwgITApOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFJvd0ltbWVkaWF0ZTogZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYihlLm5vZGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCF0ICYmIGkuaGFzQ2xhc3MoJ2R0ci1leHBhbmRlZCcpKSB8fCAhZS5yZXNwb25zaXZlLmhhc0hpZGRlbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZS5jaGlsZCghMSksICExKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogITEgIT09ICh0ID0gbigpKSAmJiAoZS5jaGlsZCh0LCAnY2hpbGQnKS5zaG93KCksICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWw6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIG4sIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghMSA9PT0gbikgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHMgPSBiKCdkaXYuZHRyLW1vZGFsLWNvbnRlbnQnKSkubGVuZ3RoIHx8IGUuaW5kZXgoKSAhPT0gcy5kYXRhKCdkdHItcm93LWlkeCcpKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5lbXB0eSgpLmFwcGVuZChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnJlbW92ZSgpLCBiKGQpLm9mZigna2V5cHJlc3MuZHRyJyksIGIoZS5ub2RlKCkpLnJlbW92ZUNsYXNzKCdkdHItZXhwYW5kZWQnKSwgaSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBiKCc8ZGl2IGNsYXNzPSJkdHItbW9kYWwiLz4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoJzxkaXYgY2xhc3M9ImR0ci1tb2RhbC1kaXNwbGF5Ii8+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYignPGRpdiBjbGFzcz0iZHRyLW1vZGFsLWNvbnRlbnQiLz4nKS5kYXRhKCdkdHItcm93LWlkeCcsIGUuaW5kZXgoKSkuYXBwZW5kKG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKCc8ZGl2IGNsYXNzPSJkdHItbW9kYWwtY2xvc2UiPiZ0aW1lczs8L2Rpdj4nKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoJzxkaXYgY2xhc3M9ImR0ci1tb2RhbC1iYWNrZ3JvdW5kIi8+JykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCdib2R5Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoZS5ub2RlKCkpLmFkZENsYXNzKCdkdHItZXhwYW5kZWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoZCkub24oJ2tleXVwLmR0cicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMjcgPT09IGUua2V5Q29kZSAmJiAoZS5zdG9wUHJvcGFnYXRpb24oKSwgcigpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyAmJiBvLmhlYWRlciAmJiBiKCdkaXYuZHRyLW1vZGFsLWNvbnRlbnQnKS5wcmVwZW5kKCc8aDI+JyArIG8uaGVhZGVyKGUpICsgJzwvaDI+JyksICEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KS5jaGlsZFJvdywKICAgICAgICAgICAgICAgICAgICByZW5kZXJlcjogKGEucmVuZGVyZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RIaWRkZW5Ob2RlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShpLCBlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYignPHVsIGRhdGEtZHRyLWluZGV4PSInICsgZSArICciIGNsYXNzPSJkdHItZGV0YWlscyIvPicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5lYWNoKHQsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaGlkZGVuICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gdC5jbGFzc05hbWUgPyAnY2xhc3M9IicgKyB0LmNsYXNzTmFtZSArICciJyA6ICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxpICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGRhdGEtZHRyLWluZGV4PSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY29sdW1uSW5kZXggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgZGF0YS1kdC1yb3c9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5yb3dJbmRleCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIiBkYXRhLWR0LWNvbHVtbj0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNvbHVtbkluZGV4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPjxzcGFuIGNsYXNzPSJkdHItdGl0bGUiPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50aXRsZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPiA8L2xpPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGIoJzxzcGFuIGNsYXNzPSJkdHItZGF0YSIvPicpLmFwcGVuZChyLl9jaGlsZE5vZGVzKGksIHQucm93SW5kZXgsIHQuY29sdW1uSW5kZXgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvID0gITApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhbyAmJiBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5fcmVzcG9uc2l2ZU1vdmVzTm9kZXMgPSAhMCksIGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RIaWRkZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAobiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5jbGFzc05hbWUgPyAnY2xhc3M9IicgKyBlLmNsYXNzTmFtZSArICciJyA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaGlkZGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnPGxpICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGF0YS1kdHItaW5kZXg9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY29sdW1uSW5kZXggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtZHQtcm93PSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJvd0luZGV4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIiBkYXRhLWR0LWNvbHVtbj0iJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jb2x1bW5JbmRleCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+PHNwYW4gY2xhc3M9ImR0ci10aXRsZSI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50aXRsZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4gPHNwYW4gY2xhc3M9ImR0ci1kYXRhIj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+PC9saT4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW4gJiYgYignPHVsIGRhdGEtZHRyLWluZGV4PSInICsgdCArICciIGNsYXNzPSJkdHItZGV0YWlscyIvPicpLmFwcGVuZChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlQWxsOiBmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IGIuZXh0ZW5kKHsgdGFibGVDbGFzczogJycgfSwgaSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKG4sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ciAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuY2xhc3NOYW1lID8gJ2NsYXNzPSInICsgZS5jbGFzc05hbWUgKyAnIicgOiAnJykgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGRhdGEtZHQtcm93PSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yb3dJbmRleCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtZHQtY29sdW1uPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jb2x1bW5JbmRleCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPjx0ZD4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50aXRsZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6PC90ZD4gPHRkPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90ZD48L3RyPicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIoJzx0YWJsZSBjbGFzcz0iJyArIGkudGFibGVDbGFzcyArICcgZHRyLWRldGFpbHMiIHdpZHRoPSIxMDAlIi8+JykuYXBwZW5kKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSkubGlzdEhpZGRlbigpLAogICAgICAgICAgICAgICAgICAgIHRhcmdldDogMCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5saW5lJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvcnRob2dvbmFsOiAnZGlzcGxheScsCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBiLmZuLmRhdGFUYWJsZS5BcGkpOwogICAgcmV0dXJuICgKICAgICAgICBlLnJlZ2lzdGVyKCdyZXNwb25zaXZlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0pLAogICAgICAgIGUucmVnaXN0ZXIoJ3Jlc3BvbnNpdmUuaW5kZXgoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB7IGNvbHVtbjogKGUgPSBiKGUpKS5kYXRhKCdkdHItaW5kZXgnKSwgcm93OiBlLnBhcmVudCgpLmRhdGEoJ2R0ci1pbmRleCcpIH07CiAgICAgICAgfSksCiAgICAgICAgZS5yZWdpc3RlcigncmVzcG9uc2l2ZS5yZWJ1aWxkKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLl9yZXNwb25zaXZlICYmIGUuX3Jlc3BvbnNpdmUuX2NsYXNzTG9naWMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgZS5yZWdpc3RlcigncmVzcG9uc2l2ZS5yZWNhbGMoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUuX3Jlc3BvbnNpdmUgJiYgKGUuX3Jlc3BvbnNpdmUuX3Jlc2l6ZUF1dG8oKSwgZS5fcmVzcG9uc2l2ZS5fcmVzaXplKCkpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBlLnJlZ2lzdGVyKCdyZXNwb25zaXZlLmhhc0hpZGRlbigpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZSA9IHRoaXMuY29udGV4dFswXTsKICAgICAgICAgICAgcmV0dXJuICEhZS5fcmVzcG9uc2l2ZSAmJiAtMSAhPT0gYi5pbkFycmF5KCExLCBlLl9yZXNwb25zaXZlLl9yZXNwb25zaXZlT25seUhpZGRlbigpKTsKICAgICAgICB9KSwKICAgICAgICBlLnJlZ2lzdGVyUGx1cmFsKCdjb2x1bW5zKCkucmVzcG9uc2l2ZUhpZGRlbigpJywgJ2NvbHVtbigpLnJlc3BvbnNpdmVIaWRkZW4oKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAnY29sdW1uJywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhZS5fcmVzcG9uc2l2ZSAmJiBlLl9yZXNwb25zaXZlLl9yZXNwb25zaXZlT25seUhpZGRlbigpW3RdOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKGEudmVyc2lvbiA9ICczLjAuMycpLAogICAgICAgIChiLmZuLmRhdGFUYWJsZS5SZXNwb25zaXZlID0gYSksCiAgICAgICAgKGIuZm4uRGF0YVRhYmxlLlJlc3BvbnNpdmUgPSBhKSwKICAgICAgICBiKGQpLm9uKCdwcmVJbml0LmR0LmR0cicsIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICdkdCcgPT09IGUubmFtZXNwYWNlICYmCiAgICAgICAgICAgICAgICAoYih0Lm5UYWJsZSkuaGFzQ2xhc3MoJ3Jlc3BvbnNpdmUnKSB8fAogICAgICAgICAgICAgICAgICAgIGIodC5uVGFibGUpLmhhc0NsYXNzKCdkdC1yZXNwb25zaXZlJykgfHwKICAgICAgICAgICAgICAgICAgICB0Lm9Jbml0LnJlc3BvbnNpdmUgfHwKICAgICAgICAgICAgICAgICAgICBpLmRlZmF1bHRzLnJlc3BvbnNpdmUpICYmCiAgICAgICAgICAgICAgICAhMSAhPT0gKGUgPSB0Lm9Jbml0LnJlc3BvbnNpdmUpICYmCiAgICAgICAgICAgICAgICBuZXcgYSh0LCBiLmlzUGxhaW5PYmplY3QoZSkgPyBlIDoge30pOwogICAgICAgIH0pLAogICAgICAgIGkKICAgICk7Cn0pOwoKLyohIERhdGFUYWJsZXMgc3R5bGluZyB3cmFwcGVyIGZvciBSZXNwb25zaXZlCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwoKKGZ1bmN0aW9uIChmYWN0b3J5KSB7CiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAgICAgLy8gQU1ECiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0LWR0JywgJ2RhdGF0YWJsZXMubmV0LXJlc3BvbnNpdmUnXSwgZnVuY3Rpb24gKCQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoJCwgd2luZG93LCBkb2N1bWVudCk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgICAgIC8vIENvbW1vbkpTCiAgICAgICAgdmFyIGpxID0gcmVxdWlyZSgnanF1ZXJ5Jyk7CiAgICAgICAgdmFyIGNqc1JlcXVpcmVzID0gZnVuY3Rpb24gKHJvb3QsICQpIHsKICAgICAgICAgICAgaWYgKCEkLmZuLmRhdGFUYWJsZSkgewogICAgICAgICAgICAgICAgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQtZHQnKShyb290LCAkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEkLmZuLmRhdGFUYWJsZS5SZXNwb25zaXZlKSB7CiAgICAgICAgICAgICAgICByZXF1aXJlKCdkYXRhdGFibGVzLm5ldC1yZXNwb25zaXZlJykocm9vdCwgJCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocm9vdCwgJCkgewogICAgICAgICAgICAgICAgaWYgKCFyb290KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ29tbW9uSlMgZW52aXJvbm1lbnRzIHdpdGhvdXQgYSB3aW5kb3cgZ2xvYmFsIG11c3QgcGFzcyBhCiAgICAgICAgICAgICAgICAgICAgLy8gcm9vdC4gVGhpcyB3aWxsIGdpdmUgYW4gZXJyb3Igb3RoZXJ3aXNlCiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IHdpbmRvdzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoISQpIHsKICAgICAgICAgICAgICAgICAgICAkID0ganEocm9vdCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2pzUmVxdWlyZXMocm9vdCwgJCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeSgkLCByb290LCByb290LmRvY3VtZW50KTsKICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjanNSZXF1aXJlcyh3aW5kb3csIGpxKTsKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KGpxLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAvLyBCcm93c2VyCiAgICAgICAgZmFjdG9yeShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOwogICAgfQp9KShmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgdmFyIERhdGFUYWJsZSA9ICQuZm4uZGF0YVRhYmxlOwoKICAgIHJldHVybiBEYXRhVGFibGU7Cn0pOwoKLyohIFJvd0dyb3VwIDEuNS4wCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohKGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgbiwgbzsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnXSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gZSh0LCB3aW5kb3csIGRvY3VtZW50KTsKICAgICAgICAgIH0pCiAgICAgICAgOiAnb2JqZWN0JyA9PSB0eXBlb2YgZXhwb3J0cwogICAgICAgID8gKChuID0gcmVxdWlyZSgnanF1ZXJ5JykpLAogICAgICAgICAgKG8gPSBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgICAgIHIuZm4uZGF0YVRhYmxlIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0JykodCwgcik7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCByKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdCB8fCB3aW5kb3cpLCAociA9IHIgfHwgbih0KSksIG8odCwgciksIGUociwgMCwgdC5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKG8od2luZG93LCBuKSwgKG1vZHVsZS5leHBvcnRzID0gZShuLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IGUoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKGksIHQsIHIpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGZ1bmN0aW9uIGEodCwgcikgewogICAgICAgIGlmICghbC52ZXJzaW9uQ2hlY2sgfHwgIWwudmVyc2lvbkNoZWNrKCcxLjExJykpIHRocm93ICdSb3dHcm91cCByZXF1aXJlcyBEYXRhVGFibGVzIDEuMTEgb3IgbmV3ZXInOwogICAgICAgIGlmICgKICAgICAgICAgICAgKCh0aGlzLmMgPSBpLmV4dGVuZCghMCwge30sIGwuZGVmYXVsdHMucm93R3JvdXAsIGEuZGVmYXVsdHMsIHIpKSwKICAgICAgICAgICAgKHRoaXMucyA9IHsgZHQ6IG5ldyBsLkFwaSh0KSB9KSwKICAgICAgICAgICAgKHRoaXMuZG9tID0ge30pLAogICAgICAgICAgICAociA9IHRoaXMucy5kdC5zZXR0aW5ncygpWzBdKSwKICAgICAgICAgICAgKHQgPSByLnJvd0dyb3VwKSkKICAgICAgICApCiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgIChyLnJvd0dyb3VwID0gdGhpcykuX2NvbnN0cnVjdG9yKCk7CiAgICB9CiAgICB2YXIgbCA9IGkuZm4uZGF0YVRhYmxlOwogICAgcmV0dXJuICgKICAgICAgICBpLmV4dGVuZChhLnByb3RvdHlwZSwgewogICAgICAgICAgICBkYXRhU3JjOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0CiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmMuZGF0YVNyYwogICAgICAgICAgICAgICAgICAgIDogKChyID0gdGhpcy5zLmR0KSwgKHRoaXMuYy5kYXRhU3JjID0gdCksIGkoci50YWJsZSgpLm5vZGUoKSkudHJpZ2dlckhhbmRsZXIoJ3Jvd2dyb3VwLWRhdGFzcmMuZHQnLCBbciwgdF0pLCB0aGlzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLmMuZW5hYmxlID0gITEpLCB0aGlzOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITEgPT09IHQgPyB0aGlzLmRpc2FibGUoKSA6ICgodGhpcy5jLmVuYWJsZSA9ICEwKSwgdGhpcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuYWJsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmMuZW5hYmxlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfY29uc3RydWN0b3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcywKICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgIG4gPSB0LnNldHRpbmdzKClbMF07CiAgICAgICAgICAgICAgICB0Lm9uKCdkcmF3LmR0cmcnLCBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgICAgICAgICAgIGUuYy5lbmFibGUgJiYgbiA9PT0gciAmJiBlLl9kcmF3KCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB0Lm9uKCdjb2x1bW4tdmlzaWJpbGl0eS5kdC5kdHJnIHJlc3BvbnNpdmUtcmVzaXplLmR0LmR0cmcnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuX2FkanVzdENvbHNwYW4oKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB0Lm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0Lm9mZignLmR0cmcnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2FkanVzdENvbHNwYW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGkoJ3RyLicgKyB0aGlzLmMuY2xhc3NOYW1lLCB0aGlzLnMuZHQudGFibGUoKS5ib2R5KCkpCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3RoOnZpc2libGUsIHRkOnZpc2libGUnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjb2xzcGFuJywgdGhpcy5fY29sc3BhbigpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2NvbHNwYW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnMuZHQKICAgICAgICAgICAgICAgICAgICAuY29sdW1ucygpCiAgICAgICAgICAgICAgICAgICAgLnZpc2libGUoKQogICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgKyByOwogICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfZHJhdzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuX2dyb3VwKDAsIHQucm93cyh7IHBhZ2U6ICdjdXJyZW50JyB9KS5pbmRleGVzKCkpOwogICAgICAgICAgICAgICAgdGhpcy5fZ3JvdXBEaXNwbGF5KDAsIHQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfZ3JvdXA6IGZ1bmN0aW9uICh0LCByKSB7CiAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gQXJyYXkuaXNBcnJheSh0aGlzLmMuZGF0YVNyYykgPyB0aGlzLmMuZGF0YVNyYyA6IFt0aGlzLmMuZGF0YVNyY10sCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBsLnV0aWwuZ2V0KG5bdF0pLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5zLmR0LAogICAgICAgICAgICAgICAgICAgICAgICBhID0gW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICBkID0gci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcyA8IGQ7CiAgICAgICAgICAgICAgICAgICAgcysrCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdSwKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHJbc107CiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSAodSA9IG8oaS5yb3coYykuZGF0YSgpLCB0KSkgJiYgKHUgPSB0aGlzLmMuZW1wdHlEYXRhR3JvdXApLAogICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAwICE9PSBlICYmIHUgPT09IGUpIHx8IChhLnB1c2goeyBkYXRhUG9pbnQ6IHUsIHJvd3M6IFtdIH0pLCAoZSA9IHUpKSwKICAgICAgICAgICAgICAgICAgICAgICAgYVthLmxlbmd0aCAtIDFdLnJvd3MucHVzaChjKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG5bdCArIDFdKSBmb3IgKHMgPSAwLCBkID0gYS5sZW5ndGg7IHMgPCBkOyBzKyspIGFbc10uY2hpbGRyZW4gPSB0aGlzLl9ncm91cCh0ICsgMSwgYVtzXS5yb3dzKTsKICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfZ3JvdXBEaXNwbGF5OiBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgbiA9IHRoaXMucy5kdCwgbyA9IDAsIGkgPSByLmxlbmd0aDsgbyA8IGk7IG8rKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gcltvXSwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHMuZGF0YVBvaW50LAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gcy5yb3dzOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYy5zdGFydFJlbmRlciAmJgogICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSB0aGlzLmMuc3RhcnRSZW5kZXIuY2FsbCh0aGlzLCBuLnJvd3ModSksIGQsIHQpKSwgKGEgPSB0aGlzLl9yb3dXcmFwKGUsIHRoaXMuYy5zdGFydENsYXNzTmFtZSwgdCkpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBhLmluc2VydEJlZm9yZShuLnJvdyh1WzBdKS5ub2RlKCkpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMuZW5kUmVuZGVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSB0aGlzLmMuZW5kUmVuZGVyLmNhbGwodGhpcywgbi5yb3dzKHUpLCBkLCB0KSksIChhID0gdGhpcy5fcm93V3JhcChlLCB0aGlzLmMuZW5kQ2xhc3NOYW1lLCB0KSkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmluc2VydEFmdGVyKG4ucm93KHVbdS5sZW5ndGggLSAxXSkubm9kZSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5jaGlsZHJlbiAmJiB0aGlzLl9ncm91cERpc3BsYXkodCArIDEsIHMuY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBfcm93V3JhcDogZnVuY3Rpb24gKHQsIHIsIGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09ICh0ID0gbnVsbCAhPT0gdCAmJiAnJyAhPT0gdCA/IHQgOiB0aGlzLmMuZW1wdHlEYXRhR3JvdXApCiAgICAgICAgICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgICAgICAgICAgOiAoJ29iamVjdCcgPT0gdHlwZW9mIHQgJiYgdC5ub2RlTmFtZSAmJiAndHInID09PSB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICA/IGkodCkKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQgaW5zdGFuY2VvZiBpICYmIHQubGVuZ3RoICYmICd0cicgPT09IHRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgID8gdAogICAgICAgICAgICAgICAgICAgICAgICAgIDogaSgnPHRyLz4nKS5hcHBlbmQoaSgnPHRoLz4nKS5hdHRyKCdjb2xzcGFuJywgdGhpcy5fY29sc3BhbigpKS5hdHRyKCdzY29wZScsICdyb3cnKS5hcHBlbmQodCkpCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuYy5jbGFzc05hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdkdHJnLWxldmVsLScgKyBlKTsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAoYS5kZWZhdWx0cyA9IHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHRyZy1ncm91cCcsCiAgICAgICAgICAgIGRhdGFTcmM6IDAsCiAgICAgICAgICAgIGVtcHR5RGF0YUdyb3VwOiAnTm8gZ3JvdXAnLAogICAgICAgICAgICBlbmFibGU6ICEwLAogICAgICAgICAgICBlbmRDbGFzc05hbWU6ICdkdHJnLWVuZCcsCiAgICAgICAgICAgIGVuZFJlbmRlcjogbnVsbCwKICAgICAgICAgICAgc3RhcnRDbGFzc05hbWU6ICdkdHJnLXN0YXJ0JywKICAgICAgICAgICAgc3RhcnRSZW5kZXI6IGZ1bmN0aW9uICh0LCByKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAoYS52ZXJzaW9uID0gJzEuNS4wJyksCiAgICAgICAgKGkuZm4uZGF0YVRhYmxlLlJvd0dyb3VwID0gYSksCiAgICAgICAgKGkuZm4uRGF0YVRhYmxlLlJvd0dyb3VwID0gYSksCiAgICAgICAgbC5BcGkucmVnaXN0ZXIoJ3Jvd0dyb3VwKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0pLAogICAgICAgIGwuQXBpLnJlZ2lzdGVyKCdyb3dHcm91cCgpLmRpc2FibGUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHQucm93R3JvdXAgJiYgdC5yb3dHcm91cC5lbmFibGUoITEpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBsLkFwaS5yZWdpc3Rlcigncm93R3JvdXAoKS5lbmFibGUoKScsIGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB0LnJvd0dyb3VwICYmIHQucm93R3JvdXAuZW5hYmxlKHZvaWQgMCA9PT0gciB8fCByKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgbC5BcGkucmVnaXN0ZXIoJ3Jvd0dyb3VwKCkuZW5hYmxlZCgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgcmV0dXJuICEoIXQubGVuZ3RoIHx8ICF0WzBdLnJvd0dyb3VwKSAmJiB0WzBdLnJvd0dyb3VwLmVuYWJsZWQoKTsKICAgICAgICB9KSwKICAgICAgICBsLkFwaS5yZWdpc3Rlcigncm93R3JvdXAoKS5kYXRhU3JjKCknLCBmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSByCiAgICAgICAgICAgICAgICA/IHRoaXMuY29udGV4dFswXS5yb3dHcm91cC5kYXRhU3JjKCkKICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgdC5yb3dHcm91cCAmJiB0LnJvd0dyb3VwLmRhdGFTcmMocik7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIGkocikub24oJ3ByZUluaXQuZHQuZHRyZycsIGZ1bmN0aW9uICh0LCByLCBlKSB7CiAgICAgICAgICAgIHZhciBuLCBvOwogICAgICAgICAgICAnZHQnID09PSB0Lm5hbWVzcGFjZSAmJgogICAgICAgICAgICAgICAgKCh0ID0gci5vSW5pdC5yb3dHcm91cCksIChuID0gbC5kZWZhdWx0cy5yb3dHcm91cCksIHQgfHwgbikgJiYKICAgICAgICAgICAgICAgICgobyA9IGkuZXh0ZW5kKHt9LCBuLCB0KSksICExICE9PSB0KSAmJgogICAgICAgICAgICAgICAgbmV3IGEociwgbyk7CiAgICAgICAgfSksCiAgICAgICAgbAogICAgKTsKfSk7CgovKiEgU2Nyb2xsZXIgMi40LjMKICogwqkgU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UKICovCiEoZnVuY3Rpb24gKG8pIHsKICAgIHZhciBlLCBpOwogICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgICAgICA/IGRlZmluZShbJ2pxdWVyeScsICdkYXRhdGFibGVzLm5ldCddLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBvKHQsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGUgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAoaSA9IGZ1bmN0aW9uICh0LCBzKSB7CiAgICAgICAgICAgICAgcy5mbi5kYXRhVGFibGUgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQnKSh0LCBzKTsKICAgICAgICAgIH0pLAogICAgICAgICAgJ3VuZGVmaW5lZCcgPT0gdHlwZW9mIHdpbmRvdwogICAgICAgICAgICAgID8gKG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHQsIHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSB0IHx8IHdpbmRvdyksIChzID0gcyB8fCBlKHQpKSwgaSh0LCBzKSwgbyhzLCB0LCB0LmRvY3VtZW50KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiAoaSh3aW5kb3csIGUpLCAobW9kdWxlLmV4cG9ydHMgPSBvKGUsIHdpbmRvdywgd2luZG93LmRvY3VtZW50KSkpKQogICAgICAgIDogbyhqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOwp9KShmdW5jdGlvbiAoZCwgbCwgbykgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZnVuY3Rpb24gaSh0LCBzKSB7CiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGkKICAgICAgICAgICAgPyAodm9pZCAwID09PSBzICYmIChzID0ge30pLAogICAgICAgICAgICAgICh0ID0gZC5mbi5kYXRhVGFibGUuQXBpKHQpKSwKICAgICAgICAgICAgICAodGhpcy5zID0gewogICAgICAgICAgICAgICAgICBkdDogdC5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICAgICAgICBkdEFwaTogdCwKICAgICAgICAgICAgICAgICAgdGFibGVUb3A6IDAsCiAgICAgICAgICAgICAgICAgIHRhYmxlQm90dG9tOiAwLAogICAgICAgICAgICAgICAgICByZWRyYXdUb3A6IDAsCiAgICAgICAgICAgICAgICAgIHJlZHJhd0JvdHRvbTogMCwKICAgICAgICAgICAgICAgICAgYXV0b0hlaWdodDogITAsCiAgICAgICAgICAgICAgICAgIHZpZXdwb3J0Um93czogMCwKICAgICAgICAgICAgICAgICAgc3RhdGVUTzogbnVsbCwKICAgICAgICAgICAgICAgICAgc3RhdGVTYXZlVGhyb3R0bGU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgICBkcmF3VE86IG51bGwsCiAgICAgICAgICAgICAgICAgIGhlaWdodHM6IHsganVtcDogbnVsbCwgcGFnZTogbnVsbCwgdmlydHVhbDogbnVsbCwgc2Nyb2xsOiBudWxsLCByb3c6IG51bGwsIHZpZXdwb3J0OiBudWxsLCBsYWJlbEhlaWdodDogMCwgeGJhcjogMCB9LAogICAgICAgICAgICAgICAgICB0b3BSb3dGbG9hdDogMCwKICAgICAgICAgICAgICAgICAgc2Nyb2xsRHJhd0RpZmY6IG51bGwsCiAgICAgICAgICAgICAgICAgIGxvYWRlclZpc2libGU6ICExLAogICAgICAgICAgICAgICAgICBmb3JjZVJlcG9zaXRpb246ICExLAogICAgICAgICAgICAgICAgICBiYXNlUm93VG9wOiAwLAogICAgICAgICAgICAgICAgICBiYXNlU2Nyb2xsVG9wOiAwLAogICAgICAgICAgICAgICAgICBtb3VzZWRvd246ICExLAogICAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsVG9wOiAwLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICh0aGlzLnMgPSBkLmV4dGVuZCh0aGlzLnMsIGkub0RlZmF1bHRzLCBzKSksCiAgICAgICAgICAgICAgKHRoaXMucy5oZWlnaHRzLnJvdyA9IHRoaXMucy5yb3dIZWlnaHQpLAogICAgICAgICAgICAgICh0aGlzLmRvbSA9IHsKICAgICAgICAgICAgICAgICAgZm9yY2U6IG8uY3JlYXRlRWxlbWVudCgnZGl2JyksCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBkKCc8ZGl2IGNsYXNzPSJkdHNfbGFiZWwiPjA8L2Rpdj4nKSwKICAgICAgICAgICAgICAgICAgc2Nyb2xsZXI6IG51bGwsCiAgICAgICAgICAgICAgICAgIHRhYmxlOiBudWxsLAogICAgICAgICAgICAgICAgICBsb2FkZXI6IG51bGwsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9TY3JvbGxlciB8fCAodGhpcy5zLmR0Lm9TY3JvbGxlciA9IHRoaXMpLmNvbnN0cnVjdCgpKQogICAgICAgICAgICA6IGFsZXJ0KCJTY3JvbGxlciB3YXJuaW5nOiBTY3JvbGxlciBtdXN0IGJlIGluaXRpYWxpc2VkIHdpdGggdGhlICduZXcnIGtleXdvcmQuIik7CiAgICB9CiAgICB2YXIgYSA9IGQuZm4uZGF0YVRhYmxlLAogICAgICAgIHQgPQogICAgICAgICAgICAoZC5leHRlbmQoaS5wcm90b3R5cGUsIHsKICAgICAgICAgICAgICAgIG1lYXN1cmU6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmF1dG9IZWlnaHQgJiYgdGhpcy5fY2FsY1Jvd0hlaWdodCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zLmhlaWdodHMsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMucm93ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChzLnZpZXdwb3J0ID0gdGhpcy5fcGFyc2VIZWlnaHQoZCh0aGlzLmRvbS5zY3JvbGxlcikuY3NzKCdtYXgtaGVpZ2h0JykpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnZpZXdwb3J0Um93cyA9IHBhcnNlSW50KHMudmlld3BvcnQgLyBzLnJvdywgMTApICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5kdC5faURpc3BsYXlMZW5ndGggPSB0aGlzLnMudmlld3BvcnRSb3dzICogdGhpcy5zLmRpc3BsYXlCdWZmZXIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmxhYmVsLm91dGVySGVpZ2h0KCkpOwogICAgICAgICAgICAgICAgICAgIChzLnhiYXIgPSB0aGlzLmRvbS5zY3JvbGxlci5vZmZzZXRIZWlnaHQgLSB0aGlzLmRvbS5zY3JvbGxlci5jbGllbnRIZWlnaHQpLAogICAgICAgICAgICAgICAgICAgICAgICAocy5sYWJlbEhlaWdodCA9IG8pLAogICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAwICE9PSB0ICYmICF0KSB8fCB0aGlzLnMuZHRBcGkuZHJhdyghMSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcGFnZUluZm86IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuZG9tLnNjcm9sbGVyLnNjcm9sbFRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQuZm5SZWNvcmRzRGlzcGxheSgpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gTWF0aC5jZWlsKHRoaXMucGl4ZWxzVG9Sb3cocyArIHRoaXMucy5oZWlnaHRzLnZpZXdwb3J0LCAhMSwgdGhpcy5zLmFuaSkpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXJ0OiBNYXRoLmZsb29yKHRoaXMucGl4ZWxzVG9Sb3cocywgITEsIHRoaXMucy5hbmkpKSwgZW5kOiB0IDwgbyA/IHQgLSAxIDogbyAtIDEgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwaXhlbHNUb1JvdzogZnVuY3Rpb24gKHQsIHMsIG8pIHsKICAgICAgICAgICAgICAgICAgICAodCAtPSB0aGlzLnMuYmFzZVNjcm9sbFRvcCksCiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodGhpcy5fZG9tYWluKCdwaHlzaWNhbFRvVmlydHVhbCcsIHRoaXMucy5iYXNlU2Nyb2xsVG9wKSArIHQpIC8gdGhpcy5zLmhlaWdodHMucm93CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQgLyB0aGlzLnMuaGVpZ2h0cy5yb3cgKyB0aGlzLnMuYmFzZVJvd1RvcCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgfHwgdm9pZCAwID09PSBzID8gcGFyc2VJbnQobywgMTApIDogbzsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByb3dUb1BpeGVsczogZnVuY3Rpb24gKHQsIHMsIG8pIHsKICAgICAgICAgICAgICAgICAgICAodCAtPSB0aGlzLnMuYmFzZVJvd1RvcCksIChvID0gbyA/IHRoaXMuX2RvbWFpbigndmlydHVhbFRvUGh5c2ljYWwnLCB0aGlzLnMuYmFzZVNjcm9sbFRvcCkgOiB0aGlzLnMuYmFzZVNjcm9sbFRvcCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvICs9IHQgKiB0aGlzLnMuaGVpZ2h0cy5yb3cpLCBzIHx8IHZvaWQgMCA9PT0gcyA/IHBhcnNlSW50KG8sIDEwKSA6IG87CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2Nyb2xsVG9Sb3c6IGZ1bmN0aW9uICh0LCBzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0aGlzLnJvd1RvUGl4ZWxzKHQpLAogICAgICAgICAgICAgICAgICAgICAgICByID0gdCAtICgodGhpcy5zLmRpc3BsYXlCdWZmZXIgLSAxKSAvIDIpICogdGhpcy5zLnZpZXdwb3J0Um93czsKICAgICAgICAgICAgICAgICAgICByIDwgMCAmJiAociA9IDApLAogICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocyA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPiB0aGlzLnMucmVkcmF3Qm90dG9tIHx8IGkgPCB0aGlzLnMucmVkcmF3VG9wKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5kdC5faURpc3BsYXlTdGFydCAhPT0gciAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoZSA9ICEwKSwgKGkgPSB0aGlzLl9kb21haW4oJ3ZpcnR1YWxUb1BoeXNpY2FsJywgdCAqIHRoaXMucy5oZWlnaHRzLnJvdykpLCB0aGlzLnMucmVkcmF3VG9wIDwgaSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpIDwgdGhpcy5zLnJlZHJhd0JvdHRvbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICEodGhpcy5zLmZvcmNlUmVwb3NpdGlvbiA9ICEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHMpIHx8IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKCh0aGlzLnMuYW5pID0gZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQodGhpcy5kb20uc2Nyb2xsZXIpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGkgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zLmFuaSA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGQodGhpcy5kb20uc2Nyb2xsZXIpLnNjcm9sbFRvcChpKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLnMuZHRBcGk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnMuZHQub0ZlYXR1cmVzLmJQYWdpbmF0ZSkgdGhyb3cgbmV3IEVycm9yKCdQYWdpbmF0aW9uIG11c3QgYmUgZW5hYmxlZCBmb3IgU2Nyb2xsZXIgdG8gb3BlcmF0ZScpOwogICAgICAgICAgICAgICAgICAgICh0aGlzLmRvbS5mb3JjZS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20uZm9yY2Uuc3R5bGUudG9wID0gJzBweCcpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20uZm9yY2Uuc3R5bGUubGVmdCA9ICcwcHgnKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLmZvcmNlLnN0eWxlLndpZHRoID0gJzFweCcpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20uc2Nyb2xsZXIgPSB0LnRhYmxlKCkubm9kZSgpLnBhcmVudE5vZGUpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5zY3JvbGxlci5hcHBlbmRDaGlsZCh0aGlzLmRvbS5mb3JjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvbS5zY3JvbGxlci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZScpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20udGFibGUgPSBkKCc+dGFibGUnLCB0aGlzLmRvbS5zY3JvbGxlcilbMF0pLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20udGFibGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLnRhYmxlLnN0eWxlLnRvcCA9ICcwcHgnKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLnRhYmxlLnN0eWxlLmxlZnQgPSAnMHB4JyksCiAgICAgICAgICAgICAgICAgICAgICAgIGQodC50YWJsZSgpLmNvbnRhaW5lcigpKS5hZGRDbGFzcygnZHRzIERUUycpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5sYWJlbC5hcHBlbmRUbyh0aGlzLmRvbS5zY3JvbGxlciksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5oZWlnaHRzLnJvdyAmJiAnYXV0bycgIT0gdGhpcy5zLmhlaWdodHMucm93ICYmICh0aGlzLnMuYXV0b0hlaWdodCA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5pbmdub3JlU2Nyb2xsID0gITApLAogICAgICAgICAgICAgICAgICAgICAgICBkKHRoaXMuZG9tLnNjcm9sbGVyKS5vbignc2Nyb2xsLmR0LXNjcm9sbGVyJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuX3Njcm9sbC5jYWxsKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZCh0aGlzLmRvbS5zY3JvbGxlcikub24oJ3RvdWNoc3RhcnQuZHQtc2Nyb2xsZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLl9zY3JvbGwuY2FsbChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGQodGhpcy5kb20uc2Nyb2xsZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlZG93bi5kdC1zY3JvbGxlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnMubW91c2Vkb3duID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZXVwLmR0LXNjcm9sbGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnMubGFiZWxWaXNpYmxlID0gITEpLCAoZS5zLm1vdXNlZG93biA9ICExKSwgZS5kb20ubGFiZWwuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBkKGwpLm9uKCdyZXNpemUuZHQtc2Nyb2xsZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1lYXN1cmUoITEpLCBlLl9pbmZvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBpID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LnN0YXRlLmxvYWRlZCgpOwogICAgICAgICAgICAgICAgICAgIHQub24oJ3N0YXRlU2F2ZVBhcmFtcy5zY3JvbGxlcicsIGZ1bmN0aW9uICh0LCBzLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKG8uc2Nyb2xsZXIgPSByLnNjcm9sbGVyKSwgKGkgPSAhMSksIG8uc2Nyb2xsZXIgJiYgKGUucy5sYXN0U2Nyb2xsVG9wID0gby5zY3JvbGxlci5zY3JvbGxUb3ApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoby5zY3JvbGxlciA9IHsgdG9wUm93OiBlLnMudG9wUm93RmxvYXQsIGJhc2VSb3dUb3A6IGUucy5iYXNlUm93VG9wIH0pOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0Lm9uKCdzdGF0ZUxvYWRQYXJhbXMuc2Nyb2xsZXInLCBmdW5jdGlvbiAodCwgcywgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBvLnNjcm9sbGVyICYmIGUuc2Nyb2xsVG9Sb3coby5zY3JvbGxlci50b3BSb3cpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlKCExKSwKICAgICAgICAgICAgICAgICAgICAgICAgciAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zY3JvbGxlciAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnMudG9wUm93RmxvYXQgPSByLnNjcm9sbGVyLnRvcFJvdyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmJhc2VSb3dUb3AgPSByLnNjcm9sbGVyLmJhc2VSb3dUb3ApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5iYXNlU2Nyb2xsVG9wID0gdGhpcy5zLmJhc2VSb3dUb3AgKiB0aGlzLnMuaGVpZ2h0cy5yb3cpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdGhpcy5fZG9tYWluKCdwaHlzaWNhbFRvVmlydHVhbCcsIHRoaXMucy50b3BSb3dGbG9hdCAqIHRoaXMucy5oZWlnaHRzLnJvdykpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKGUucy5zdGF0ZVNhdmVUaHJvdHRsZSA9IGEudXRpbC50aHJvdHRsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnMuZHRBcGkuc3RhdGUuc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5vbignaW5pdC5zY3JvbGxlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubWVhc3VyZSghMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUucy5zY3JvbGxUeXBlID0gJ2p1bXAnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLl9kcmF3KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5vbignZHJhdy5zY3JvbGxlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5fZHJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5vbigncHJlRHJhdy5kdC5zY3JvbGxlcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuX3Njcm9sbEZvcmNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0Lm9uKCdkZXN0cm95LnNjcm9sbGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZChsKS5vZmYoJ3Jlc2l6ZS5kdC1zY3JvbGxlcicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoZS5kb20uc2Nyb2xsZXIpLm9mZignLmR0LXNjcm9sbGVyJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZChlLnMuZHQublRhYmxlKS5vZmYoJy5zY3JvbGxlcicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoZS5zLmR0Lm5UYWJsZVdyYXBwZXIpLnJlbW92ZUNsYXNzKCdEVFMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKCdkaXYuRFRTX0xvYWRpbmcnLCBlLmRvbS5zY3JvbGxlci5wYXJlbnROb2RlKS5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kb20udGFibGUuc3R5bGUucG9zaXRpb24gPSAnJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuZG9tLnRhYmxlLnN0eWxlLnRvcCA9ICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kb20udGFibGUuc3R5bGUubGVmdCA9ICcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2NhbGNSb3dIZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMucy5kdCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHQublRhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gcy5jbG9uZU5vZGUoITEpLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gZCgnPHRib2R5Lz4nKS5hcHBlbmRUbyhvKSwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQub0NsYXNzZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBhLnZlcnNpb25DaGVjaygnMicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgY29udGFpbmVyOiB0LmNvbnRhaW5lciwgc2Nyb2xsZXI6IHQuc2Nyb2xsaW5nLmNvbnRhaW5lciwgYm9keTogdC5zY3JvbGxpbmcuYm9keSB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsgY29udGFpbmVyOiB0LnNXcmFwcGVyLCBzY3JvbGxlcjogdC5zU2Nyb2xsV3JhcHBlciwgYm9keTogdC5zU2Nyb2xsQm9keSB9LAogICAgICAgICAgICAgICAgICAgICAgICBpID0gZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNvbnRhaW5lciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBEVFMiPjxkaXYgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2Nyb2xsZXIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPjxkaXYgY2xhc3M9IicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYm9keSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+PC9kaXY+PC9kaXY+JywKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IChkKCd0Ym9keSB0cjpsdCg0KScsIHMpLmNsb25lKCkuYXBwZW5kVG8oZSksIGQoJ3RyJywgZSkubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gcikgZS5wcmVwZW5kKCc8dHI+PHRkPiYjMTYwOzwvdGQ+PC90cj4nKSwgZS5hcHBlbmQoJzx0cj48dGQ+JiMxNjA7PC90ZD48L3RyPicpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgZm9yICg7IHIgPCAzOyByKyspIGUuYXBwZW5kKCc8dHI+PHRkPiYjMTYwOzwvdGQ+PC90cj4nKTsKICAgICAgICAgICAgICAgICAgICBkKCdkaXYuJyArIHQuYm9keSwgaSkuYXBwZW5kKG8pOwogICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLnMuZHQubkhvbGRpbmcgfHwgcy5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgIGQodCkuaXMoJzp2aXNpYmxlJykgfHwgKHQgPSAnYm9keScpLAogICAgICAgICAgICAgICAgICAgICAgICBpLmZpbmQoJ2lucHV0JykucmVtb3ZlQXR0cignbmFtZScpLAogICAgICAgICAgICAgICAgICAgICAgICBpLmFwcGVuZFRvKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmhlaWdodHMucm93ID0gZCgndHInLCBlKS5lcSgxKS5vdXRlckhlaWdodCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgaS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfZHJhdzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMucy5oZWlnaHRzLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gdGhpcy5kb20uc2Nyb2xsZXIuc2Nyb2xsVG9wLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gZCh0aGlzLnMuZHQublRhYmxlKS5oZWlnaHQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMucy5kdC5faURpc3BsYXlTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMucy5kdC5faURpc3BsYXlMZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLnMuZHQuZm5SZWNvcmRzRGlzcGxheSgpLAogICAgICAgICAgICAgICAgICAgICAgICBhID0gbyArIHMudmlld3BvcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnMuc2tpcCA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICghdGhpcy5zLmR0LmJTb3J0ZWQgJiYgIXRoaXMucy5kdC5iRmlsdGVyZWQpIHx8IDAgIT09IGkgfHwgdGhpcy5zLmR0Ll9kcmF3SG9sZCB8fCAodGhpcy5zLnRvcFJvd0Zsb2F0ID0gMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA9ICdqdW1wJyA9PT0gdGhpcy5zLnNjcm9sbFR5cGUgPyB0aGlzLl9kb21haW4oJ3ZpcnR1YWxUb1BoeXNpY2FsJywgdGhpcy5zLnRvcFJvd0Zsb2F0ICogcy5yb3cpIDogbyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmJhc2VTY3JvbGxUb3AgPSBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuYmFzZVJvd1RvcCA9IHRoaXMucy50b3BSb3dGbG9hdCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvIC0gKHRoaXMucy50b3BSb3dGbG9hdCAtIGkpICogcy5yb3cpLAogICAgICAgICAgICAgICAgICAgICAgICBpID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwID09PSBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobiA9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsIDw9IGkgKyByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobiA9IHMuc2Nyb2xsIC0gZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG4gKyBlIDwgYSAmJiAoKHRoaXMucy5iYXNlU2Nyb2xsVG9wICs9IDEgKyAoKGwgPSBhIC0gZSkgLSBuKSksIChuID0gbCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLnRhYmxlLnN0eWxlLnRvcCA9IG4gKyAncHgnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudGFibGVUb3AgPSBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudGFibGVCb3R0b20gPSBlICsgdGhpcy5zLnRhYmxlVG9wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvIC0gdGhpcy5zLnRhYmxlVG9wKSAqIHRoaXMucy5ib3VuZGFyeVNjYWxlKTsKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnJlZHJhd1RvcCA9IG8gLSBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5yZWRyYXdCb3R0b20gPSBvICsgaSA+IHMuc2Nyb2xsIC0gcy52aWV3cG9ydCAtIHMucm93ID8gcy5zY3JvbGwgLSBzLnZpZXdwb3J0IC0gcy5yb3cgOiBvICsgaSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuc2tpcCA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5zLmluZ25vcmVTY3JvbGwgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuZHQub0ZlYXR1cmVzLmJTdGF0ZVNhdmUgJiYgbnVsbCAhPT0gdGhpcy5zLmR0Lm9Mb2FkZWRTdGF0ZSAmJiB2b2lkIDAgIT09IHRoaXMucy5kdC5vTG9hZGVkU3RhdGUuc2Nyb2xsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoKHIgPSAhKCghdGhpcy5zLmR0LnNBamF4U291cmNlICYmICF0LnMuZHQuYWpheCkgfHwgdGhpcy5zLmR0Lm9GZWF0dXJlcy5iU2VydmVyU2lkZSkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiA8PSB0aGlzLnMuZHQuaURyYXcpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFyICYmIDEgPD0gdGhpcy5zLmR0LmlEcmF3KSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQodC5kb20uc2Nyb2xsZXIpLnNjcm9sbFRvcCh0LnMuZHQub0xvYWRlZFN0YXRlLnNjcm9sbGVyLnNjcm9sbFRvcCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zLmluZ25vcmVTY3JvbGwgPSAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHQucy5pbmdub3JlU2Nyb2xsID0gITEpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9GZWF0dXJlcy5iSW5mbyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5faW5mby5jYWxsKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgIGQodGhpcy5zLmR0Lm5UYWJsZSkudHJpZ2dlckhhbmRsZXIoJ3Bvc2l0aW9uLmR0cy5kdCcsIG4pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9kb21haW46IGZ1bmN0aW9uICh0LCBzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8sCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLnMuaGVpZ2h0cywKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDFlNDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS52aXJ0dWFsID09PSBlLnNjcm9sbCB8fCBzIDwgaQogICAgICAgICAgICAgICAgICAgICAgICA/IHMKICAgICAgICAgICAgICAgICAgICAgICAgOiAndmlydHVhbFRvUGh5c2ljYWwnID09PSB0ICYmIHMgPj0gZS52aXJ0dWFsIC0gaQogICAgICAgICAgICAgICAgICAgICAgICA/ICgobyA9IGUudmlydHVhbCAtIHMpLCBlLnNjcm9sbCAtIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIDogJ3BoeXNpY2FsVG9WaXJ0dWFsJyA9PT0gdCAmJiBzID49IGUuc2Nyb2xsIC0gaQogICAgICAgICAgICAgICAgICAgICAgICA/ICgobyA9IGUuc2Nyb2xsIC0gcyksIGUudmlydHVhbCAtIG8pCiAgICAgICAgICAgICAgICAgICAgICAgIDogKChlID0gaSAtIChvID0gKGUudmlydHVhbCAtIGkgLSBpKSAvIChlLnNjcm9sbCAtIGkgLSBpKSkgKiBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAndmlydHVhbFRvUGh5c2ljYWwnID09PSB0ID8gKHMgLSBlKSAvIG8gOiBvICogcyArIGUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9pbmZvOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucy5kdC5vRmVhdHVyZXMuYkluZm8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zLmR0QXBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHQub0xhbmd1YWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHMucGFnZS5pbmZvKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5yZWNvcmRzRGlzcGxheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLnJlY29yZHNUb3RhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAodGhpcy5zLmxhc3RTY3JvbGxUb3AgLSB0aGlzLnMuYmFzZVNjcm9sbFRvcCkgLyB0aGlzLnMuaGVpZ2h0cy5yb3csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gTWF0aC5mbG9vcih0aGlzLnMuYmFzZVJvd1RvcCArIHIpICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gJ2p1bXAnID09PSB0aGlzLnMuc2Nyb2xsVHlwZSA/IE1hdGguZmxvb3IodGhpcy5zLnRvcFJvd0Zsb2F0KSArIDEgOiByKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLnMuaGVpZ2h0cy52aWV3cG9ydCAvIHRoaXMucy5oZWlnaHRzLnJvdyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gaSA8IGwgPyBpIDogbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IGkgJiYgaSA9PSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gby5zSW5mb0VtcHR5ICsgby5zSW5mb1Bvc3RGaXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwID09PSBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gby5zSW5mb0VtcHR5ICsgJyAnICsgby5zSW5mb0ZpbHRlcmVkICsgby5zSW5mb1Bvc3RGaXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpID09IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvLnNJbmZvICsgby5zSW5mb1Bvc3RGaXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvLnNJbmZvICsgJyAnICsgby5zSW5mb0ZpbHRlcmVkICsgby5zSW5mb1Bvc3RGaXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gKChhID0gdGhpcy5fbWFjcm9zKGEsIHIsIGwsIGUsIGkpKSwgby5mbkluZm9DYWxsYmFjayksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gKG8gJiYgKGEgPSBvLmNhbGwodC5vSW5zdGFuY2UsIHQsIHIsIGwsIGUsIGksIGEpKSwgdC5hYW5GZWF0dXJlcy5pKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaCA9IDAsIGMgPSBuLmxlbmd0aDsgaCA8IGM7IGgrKykgZChuW2hdKS5odG1sKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCh0Lm5UYWJsZSkudHJpZ2dlckhhbmRsZXIoJ2luZm8uZHQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBkKCdkaXYuZHQtaW5mbycsIHMudGFibGUoKS5jb250YWluZXIoKSkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKHRoaXMpLmh0bWwoYSksIHMudHJpZ2dlcignaW5mbycsIFtzLnNldHRpbmdzKClbMF0sIHRoaXMsIGFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9tYWNyb3M6IGZ1bmN0aW9uICh0LCBzLCBvLCBlLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLnMuZHRBcGksCiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBsLmZuRm9ybWF0TnVtYmVyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fU1RBUlRfL2csIGEuY2FsbChsLCBzKSkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19FTkRfL2csIGEuY2FsbChsLCBvKSkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19NQVhfL2csIGEuY2FsbChsLCBlKSkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19UT1RBTF8vZywgYS5jYWxsKGwsIGkpKQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX0VOVFJJRVNfL2csIHIuaTE4bignZW50cmllcycsICcnKSkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19FTlRSSUVTLU1BWF8vZywgci5pMThuKCdlbnRyaWVzJywgJycsIGUpKQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX0VOVFJJRVMtVE9UQUxfL2csIHIuaTE4bignZW50cmllcycsICcnLCBpKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX3BhcnNlSGVpZ2h0OiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzLAogICAgICAgICAgICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgICAgICAgICAgICB0ID0gL14oWystXT8oPzpcZCsoPzpcLlxkKyk/fFwuXGQrKSkocHh8ZW18cmVtfHZoKSQvLmV4ZWModCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobyA9IHBhcnNlRmxvYXQodFsxXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3B4JyA9PT0gKHQgPSB0WzJdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMgPSBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ3ZoJyA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMgPSAobyAvIDEwMCkgKiBkKGwpLmhlaWdodCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ3JlbScgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChzID0gbyAqIHBhcnNlRmxvYXQoZCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdlbScgPT09IHQgJiYgKHMgPSBvICogcGFyc2VGbG9hdChkKCdib2R5JykuY3NzKCdmb250LXNpemUnKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcykpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9zY3JvbGw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLnMuaGVpZ2h0cywKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMuZG9tLnNjcm9sbGVyLnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnMuc2tpcCB8fAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuaW5nbm9yZVNjcm9sbCB8fAogICAgICAgICAgICAgICAgICAgICAgICAoZSAhPT0gdGhpcy5zLmxhc3RTY3JvbGxUb3AgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuZHQuYkZpbHRlcmVkIHx8IHRoaXMucy5kdC5iU29ydGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodGhpcy5zLmxhc3RTY3JvbGxUb3AgPSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGNsZWFyVGltZW91dCh0aGlzLnMuc3RhdGVUTyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLnN0YXRlVE8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnMuZHRBcGkuc3RhdGUuc2F2ZSgpLCBzLl9pbmZvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyNTApKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuc2Nyb2xsVHlwZSA9IE1hdGguYWJzKGUgLSB0aGlzLnMubGFzdFNjcm9sbFRvcCkgPiBvLnZpZXdwb3J0ID8gJ2p1bXAnIDogJ2NvbnQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudG9wUm93RmxvYXQgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb250JyA9PT0gdGhpcy5zLnNjcm9sbFR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBpeGVsc1RvUm93KGUsICExLCAhMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kb21haW4oJ3BoeXNpY2FsVG9WaXJ0dWFsJywgZSkgLyBvLnJvdyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMudG9wUm93RmxvYXQgPCAwICYmICh0aGlzLnMudG9wUm93RmxvYXQgPSAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5mb3JjZVJlcG9zaXRpb24gfHwgZSA8IHRoaXMucy5yZWRyYXdUb3AgfHwgZSA+IHRoaXMucy5yZWRyYXdCb3R0b20KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodCA9IE1hdGguY2VpbCgoKHRoaXMucy5kaXNwbGF5QnVmZmVyIC0gMSkgLyAyKSAqIHRoaXMucy52aWV3cG9ydFJvd3MpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gcGFyc2VJbnQodGhpcy5zLnRvcFJvd0Zsb2F0LCAxMCkgLSB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuZm9yY2VSZXBvc2l0aW9uID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA8PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodCA9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0ICsgdGhpcy5zLmR0Ll9pRGlzcGxheUxlbmd0aCA+IHRoaXMucy5kdC5mblJlY29yZHNEaXNwbGF5KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICh0ID0gdGhpcy5zLmR0LmZuUmVjb3Jkc0Rpc3BsYXkoKSAtIHRoaXMucy5kdC5faURpc3BsYXlMZW5ndGgpIDwgMCAmJiAodCA9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0ICUgMiAhPSAwICYmIHQrKywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudGFyZ2V0VG9wID0gdCkgIT0gdGhpcy5zLmR0Ll9pRGlzcGxheVN0YXJ0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnMudGFibGVUb3AgPSBkKHRoaXMucy5kdC5uVGFibGUpLm9mZnNldCgpLnRvcCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy50YWJsZUJvdHRvbSA9IGQodGhpcy5zLmR0Lm5UYWJsZSkuaGVpZ2h0KCkgKyB0aGlzLnMudGFibGVUb3ApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5zLmR0Ll9pRGlzcGxheVN0YXJ0ID0gcy5zLnRhcmdldFRvcCksIHMucy5kdEFwaS5kcmF3KCdwYWdlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9GZWF0dXJlcy5iU2VydmVyU2lkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5zLmZvcmNlUmVwb3NpdGlvbiA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKHRoaXMucy5kdC5uVGFibGUpLnRyaWdnZXJIYW5kbGVyKCdzY3JvbGxlci13aWxsLWRyYXcuZHQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnZlcnNpb25DaGVjaygnMicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcy5zLmR0QXBpLnByb2Nlc3NpbmcoITApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zLmR0Lm9BcGkuX2ZuUHJvY2Vzc2luZ0Rpc3BsYXkodGhpcy5zLmR0LCAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucy5kcmF3VE8pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuZHJhd1RPID0gc2V0VGltZW91dCh0LCB0aGlzLnMuc2VydmVyV2FpdCkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQoKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5zLnRvcFJvd0Zsb2F0ID0gdGhpcy5waXhlbHNUb1JvdyhlLCAhMSwgITApKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2luZm8oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMubGFzdFNjcm9sbFRvcCA9IGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnN0YXRlU2F2ZVRocm90dGxlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnanVtcCcgPT09IHRoaXMucy5zY3JvbGxUeXBlICYmIHRoaXMucy5tb3VzZWRvd24gJiYgKHRoaXMucy5sYWJlbFZpc2libGUgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMubGFiZWxWaXNpYmxlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0ID0gKG8udmlld3BvcnQgLSBvLmxhYmVsSGVpZ2h0IC0gby54YmFyKSAvIG8uc2Nyb2xsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5sYWJlbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaHRtbCh0aGlzLnMuZHQuZm5Gb3JtYXROdW1iZXIocGFyc2VJbnQodGhpcy5zLnRvcFJvd0Zsb2F0LCAxMCkgKyAxKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygndG9wJywgZSArIGUgKiB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJykpKSkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9zY3JvbGxGb3JjZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zLmhlaWdodHM7CiAgICAgICAgICAgICAgICAgICAgKHQudmlydHVhbCA9IHQucm93ICogdGhpcy5zLmR0LmZuUmVjb3Jkc0Rpc3BsYXkoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0LnNjcm9sbCA9IHQudmlydHVhbCksCiAgICAgICAgICAgICAgICAgICAgICAgIDFlNiA8IHQuc2Nyb2xsICYmICh0LnNjcm9sbCA9IDFlNiksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvbS5mb3JjZS5zdHlsZS5oZWlnaHQgPSB0LnNjcm9sbCA+IHRoaXMucy5oZWlnaHRzLnJvdyA/IHQuc2Nyb2xsICsgJ3B4JyA6IHRoaXMucy5oZWlnaHRzLnJvdyArICdweCcpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChpLm9EZWZhdWx0cyA9IGkuZGVmYXVsdHMgPSB7IGJvdW5kYXJ5U2NhbGU6IDAuNSwgZGlzcGxheUJ1ZmZlcjogOSwgcm93SGVpZ2h0OiAnYXV0bycsIHNlcnZlcldhaXQ6IDIwMCB9KSwKICAgICAgICAgICAgKGkudmVyc2lvbiA9ICcyLjQuMycpLAogICAgICAgICAgICBkKG8pLm9uKCdwcmVJbml0LmR0LmR0c2Nyb2xsZXInLCBmdW5jdGlvbiAodCwgcykgewogICAgICAgICAgICAgICAgdmFyIG8sIGU7CiAgICAgICAgICAgICAgICAnZHQnID09PSB0Lm5hbWVzcGFjZSAmJgogICAgICAgICAgICAgICAgICAgICgodCA9IHMub0luaXQuc2Nyb2xsZXIpLCAobyA9IGEuZGVmYXVsdHMuc2Nyb2xsZXIpLCB0IHx8IG8pICYmCiAgICAgICAgICAgICAgICAgICAgKChlID0gZC5leHRlbmQoe30sIHQsIG8pKSwgITEgIT09IHQpICYmCiAgICAgICAgICAgICAgICAgICAgbmV3IGkocywgZSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoZC5mbi5kYXRhVGFibGUuU2Nyb2xsZXIgPSBpKSwKICAgICAgICAgICAgKGQuZm4uRGF0YVRhYmxlLlNjcm9sbGVyID0gaSksCiAgICAgICAgICAgIGQuZm4uZGF0YVRhYmxlLkFwaSk7CiAgICByZXR1cm4gKAogICAgICAgIHQucmVnaXN0ZXIoJ3Njcm9sbGVyKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0pLAogICAgICAgIHQucmVnaXN0ZXIoJ3Njcm9sbGVyKCkucm93VG9QaXhlbHMoKScsIGZ1bmN0aW9uICh0LCBzLCBvKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgICBpZiAoZS5sZW5ndGggJiYgZVswXS5vU2Nyb2xsZXIpIHJldHVybiBlWzBdLm9TY3JvbGxlci5yb3dUb1BpeGVscyh0LCBzLCBvKTsKICAgICAgICB9KSwKICAgICAgICB0LnJlZ2lzdGVyKCdzY3JvbGxlcigpLnBpeGVsc1RvUm93KCknLCBmdW5jdGlvbiAodCwgcywgbykgewogICAgICAgICAgICB2YXIgZSA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoICYmIGVbMF0ub1Njcm9sbGVyKSByZXR1cm4gZVswXS5vU2Nyb2xsZXIucGl4ZWxzVG9Sb3codCwgcywgbyk7CiAgICAgICAgfSksCiAgICAgICAgdC5yZWdpc3RlcihbJ3Njcm9sbGVyKCkuc2Nyb2xsVG9Sb3coKScsICdzY3JvbGxlci50b1Bvc2l0aW9uKCknXSwgZnVuY3Rpb24gKHMsIG8pIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICB0Lm9TY3JvbGxlciAmJiB0Lm9TY3JvbGxlci5zY3JvbGxUb1JvdyhzLCBvKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIHQucmVnaXN0ZXIoJ3JvdygpLnNjcm9sbFRvKCknLCBmdW5jdGlvbiAobykgewogICAgICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB0aGlzLml0ZXJhdG9yKCdyb3cnLCBmdW5jdGlvbiAodCwgcykgewogICAgICAgICAgICAgICAgICAgIHQub1Njcm9sbGVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgocyA9IGUucm93cyh7IG9yZGVyOiAnYXBwbGllZCcsIHNlYXJjaDogJ2FwcGxpZWQnIH0pLmluZGV4ZXMoKS5pbmRleE9mKHMpKSwgdC5vU2Nyb2xsZXIuc2Nyb2xsVG9Sb3cocywgbykpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgdC5yZWdpc3Rlcignc2Nyb2xsZXIubWVhc3VyZSgpJywgZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICB0Lm9TY3JvbGxlciAmJiB0Lm9TY3JvbGxlci5tZWFzdXJlKHMpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgdC5yZWdpc3Rlcignc2Nyb2xsZXIucGFnZSgpJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dDsKICAgICAgICAgICAgaWYgKHQubGVuZ3RoICYmIHRbMF0ub1Njcm9sbGVyKSByZXR1cm4gdFswXS5vU2Nyb2xsZXIucGFnZUluZm8oKTsKICAgICAgICB9KSwKICAgICAgICBhCiAgICApOwp9KTsKCi8qISBTZWFyY2hCdWlsZGVyIDEuOC4xCiAqIMKpU3ByeU1lZGlhIEx0ZCAtIGRhdGF0YWJsZXMubmV0L2xpY2Vuc2UvbWl0CiAqLwohKGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgbiwgczsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQnXSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gZSh0LCB3aW5kb3csIGRvY3VtZW50KTsKICAgICAgICAgIH0pCiAgICAgICAgOiAnb2JqZWN0JyA9PSB0eXBlb2YgZXhwb3J0cwogICAgICAgID8gKChuID0gcmVxdWlyZSgnanF1ZXJ5JykpLAogICAgICAgICAgKHMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgIGkuZm4uZGF0YVRhYmxlIHx8IHJlcXVpcmUoJ2RhdGF0YWJsZXMubmV0JykodCwgaSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdCB8fCB3aW5kb3cpLCAoaSA9IGkgfHwgbih0KSksIHModCwgaSksIGUoaSwgdCwgdC5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKHMod2luZG93LCBuKSwgKG1vZHVsZS5leHBvcnRzID0gZShuLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IGUoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKHMsIHUsIHQpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciB3LAogICAgICAgIGMsCiAgICAgICAgYSwKICAgICAgICBkLAogICAgICAgIGwsCiAgICAgICAgaCwKICAgICAgICBwLAogICAgICAgIGUsCiAgICAgICAgaSwKICAgICAgICBCID0gcy5mbi5kYXRhVGFibGU7CiAgICBmdW5jdGlvbiBvKCkgewogICAgICAgIHZhciB0ID0gQi51c2UoJ21vbWVudCcpOwogICAgICAgIHJldHVybiB0IHx8IHUubW9tZW50OwogICAgfQogICAgZnVuY3Rpb24gcigpIHsKICAgICAgICB2YXIgdCA9IEIudXNlKCdsdXhvbicpOwogICAgICAgIHJldHVybiB0IHx8IHUubHV4b247CiAgICB9CiAgICBmdW5jdGlvbiBEKHQsIGksIGUsIG4sIHMsIG8sIHIpIHsKICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSAwKSwgdm9pZCAwID09PSBzICYmIChzID0gMSksIHZvaWQgMCA9PT0gbyAmJiAobyA9IHZvaWQgMCksIHZvaWQgMCA9PT0gciAmJiAociA9ICExKTsKICAgICAgICB2YXIgYSA9IHRoaXMsCiAgICAgICAgICAgIGkgPQogICAgICAgICAgICAgICAgKCh0aGlzLmNsYXNzZXMgPSB3LmV4dGVuZCghMCwge30sIEQuY2xhc3NlcykpLAogICAgICAgICAgICAgICAgKHRoaXMuYyA9IHcuZXh0ZW5kKCEwLCB7fSwgRC5kZWZhdWx0cywgdy5mbi5kYXRhVGFibGUuZXh0LnNlYXJjaEJ1aWxkZXIsIGkpKSwKICAgICAgICAgICAgICAgIHRoaXMuYy5pMThuKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICgodGhpcy5zID0gewogICAgICAgICAgICAgICAgY29uZGl0aW9uOiB2b2lkIDAsCiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiB7fSwKICAgICAgICAgICAgICAgIGRhdGE6IHZvaWQgMCwKICAgICAgICAgICAgICAgIGRhdGFJZHg6IC0xLAogICAgICAgICAgICAgICAgZGF0YVBvaW50czogW10sCiAgICAgICAgICAgICAgICBkYXRlRm9ybWF0OiAhMSwKICAgICAgICAgICAgICAgIGRlcHRoOiBzLAogICAgICAgICAgICAgICAgZHQ6IHQsCiAgICAgICAgICAgICAgICBmaWxsZWQ6ICExLAogICAgICAgICAgICAgICAgaW5kZXg6IG4sCiAgICAgICAgICAgICAgICBsaXZlU2VhcmNoOiByLAogICAgICAgICAgICAgICAgb3JpZ0RhdGE6IHZvaWQgMCwKICAgICAgICAgICAgICAgIHByZXZlbnRSZWRyYXc6ICExLAogICAgICAgICAgICAgICAgc2VydmVyRGF0YTogbywKICAgICAgICAgICAgICAgIHRvcEdyb3VwOiBlLAogICAgICAgICAgICAgICAgdHlwZTogJycsCiAgICAgICAgICAgICAgICB2YWx1ZTogW10sCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAodGhpcy5kb20gPSB7CiAgICAgICAgICAgICAgICBidXR0b25zOiB3KCc8ZGl2Lz4nKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9uQ29udGFpbmVyKSwKICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogdygnPHNlbGVjdCBkaXNhYmxlZC8+JykKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmNvbmRpdGlvbikKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRyb3BEb3duKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuaXRhbGljKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhdXRvY29tcGxldGUnLCAnaGFja2luZycpLAogICAgICAgICAgICAgICAgY29uZGl0aW9uVGl0bGU6IHcoJzxvcHRpb24gdmFsdWU9IiIgZGlzYWJsZWQgc2VsZWN0ZWQgaGlkZGVuLz4nKS5odG1sKAogICAgICAgICAgICAgICAgICAgIHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbicsIGkuY29uZGl0aW9uKSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBjb250YWluZXI6IHcoJzxkaXYvPicpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5jb250YWluZXIpLAogICAgICAgICAgICAgICAgZGF0YTogdygnPHNlbGVjdC8+JykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRhdGEpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kcm9wRG93bikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLml0YWxpYyksCiAgICAgICAgICAgICAgICBkYXRhVGl0bGU6IHcoJzxvcHRpb24gdmFsdWU9IiIgZGlzYWJsZWQgc2VsZWN0ZWQgaGlkZGVuLz4nKS5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmRhdGEnLCBpLmRhdGEpKSwKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdygnPHNlbGVjdCBkaXNhYmxlZC8+JykKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZHJvcERvd24pCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5zZWxlY3QpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5pdGFsaWMpLAogICAgICAgICAgICAgICAgZGVsZXRlOiB3KCc8YnV0dG9uLz4nKQogICAgICAgICAgICAgICAgICAgIC5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmRlbGV0ZScsIGkuZGVsZXRlKSkKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRlbGV0ZSkKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbikKICAgICAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCB0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5kZWxldGVUaXRsZScsIGkuZGVsZXRlVGl0bGUpKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ2J1dHRvbicpLAogICAgICAgICAgICAgICAgaW5wdXRDb250OiB3KCc8ZGl2Lz4nKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuaW5wdXRDb250KSwKICAgICAgICAgICAgICAgIGxlZnQ6IHcoJzxidXR0b24vPicpCiAgICAgICAgICAgICAgICAgICAgLmh0bWwodGhpcy5zLmR0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIubGVmdCcsIGkubGVmdCkpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5sZWZ0KQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9uKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmxlZnRUaXRsZScsIGkubGVmdFRpdGxlKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgIHJpZ2h0OiB3KCc8YnV0dG9uLz4nKQogICAgICAgICAgICAgICAgICAgIC5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLnJpZ2h0JywgaS5yaWdodCkpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5yaWdodCkKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbikKICAgICAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCB0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5yaWdodFRpdGxlJywgaS5yaWdodFRpdGxlKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgIHZhbHVlOiBbCiAgICAgICAgICAgICAgICAgICAgdygnPHNlbGVjdCBkaXNhYmxlZC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kcm9wRG93bikKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5pdGFsaWMpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuc2VsZWN0KSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB2YWx1ZVRpdGxlOiB3KCc8b3B0aW9uIHZhbHVlPSItLXZhbHVlVGl0bGUtLSIgZGlzYWJsZWQgc2VsZWN0ZWQgaGlkZGVuLz4nKS5odG1sKAogICAgICAgICAgICAgICAgICAgIHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLnZhbHVlJywgaS52YWx1ZSksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdGhpcy5jLmdyZXlzY2FsZSkKICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5kb20uZGF0YS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZ3JleXNjYWxlKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvbi5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZ3JleXNjYWxlKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmRlZmF1bHRWYWx1ZS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZ3JleXNjYWxlKTsKICAgICAgICAgICAgZm9yICh2YXIgZCA9IDAsIGwgPSB0aGlzLmRvbS52YWx1ZTsgZCA8IGwubGVuZ3RoOyBkKyspIGxbZF0uYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmdyZXlzY2FsZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHcodSkub24oCiAgICAgICAgICAgICAgICAncmVzaXplLmR0c2InLAogICAgICAgICAgICAgICAgYy51dGlsLnRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBhLnMudG9wR3JvdXAudHJpZ2dlcignZHRzYi1yZWRyYXdMb2dpYycpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHRoaXMuX2J1aWxkQ3JpdGVyaWEoKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBtKHQsIGksIGUsIG4sIHMsIG8sIHIpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSAwKSwKICAgICAgICAgICAgdm9pZCAwID09PSBzICYmIChzID0gITEpLAogICAgICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSAxKSwKICAgICAgICAgICAgdm9pZCAwID09PSByICYmIChyID0gdm9pZCAwKSwKICAgICAgICAgICAgKHRoaXMuY2xhc3NlcyA9IGEuZXh0ZW5kKCEwLCB7fSwgbS5jbGFzc2VzKSksCiAgICAgICAgICAgICh0aGlzLmMgPSBhLmV4dGVuZCghMCwge30sIG0uZGVmYXVsdHMsIGkpKSwKICAgICAgICAgICAgKHRoaXMucyA9IHsKICAgICAgICAgICAgICAgIGNyaXRlcmlhOiBbXSwKICAgICAgICAgICAgICAgIGRlcHRoOiBvLAogICAgICAgICAgICAgICAgZHQ6IHQsCiAgICAgICAgICAgICAgICBpbmRleDogbiwKICAgICAgICAgICAgICAgIGlzQ2hpbGQ6IHMsCiAgICAgICAgICAgICAgICBsb2dpYzogdm9pZCAwLAogICAgICAgICAgICAgICAgb3B0czogaSwKICAgICAgICAgICAgICAgIHByZXZlbnRSZWRyYXc6ICExLAogICAgICAgICAgICAgICAgc2VydmVyRGF0YTogciwKICAgICAgICAgICAgICAgIHRvRHJvcDogdm9pZCAwLAogICAgICAgICAgICAgICAgdG9wR3JvdXA6IGUsCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAodGhpcy5kb20gPSB7CiAgICAgICAgICAgICAgICBhZGQ6IGEoJzxidXR0b24vPicpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5hZGQpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5idXR0b24pLmF0dHIoJ3R5cGUnLCAnYnV0dG9uJyksCiAgICAgICAgICAgICAgICBjbGVhcjogYSgnPGJ1dHRvbj4mdGltZXM8L2J1dHRvbj4nKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9uKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuY2xlYXJHcm91cCkuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogYSgnPGRpdi8+JykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmdyb3VwKSwKICAgICAgICAgICAgICAgIGxvZ2ljOiBhKCc8YnV0dG9uPjxkaXYvPjwvYnV0dG9uPicpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5sb2dpYykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbikuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgIGxvZ2ljQ29udGFpbmVyOiBhKCc8ZGl2Lz4nKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMubG9naWNDb250YWluZXIpLAogICAgICAgICAgICAgICAgc2VhcmNoOiBhKCc8YnV0dG9uLz4nKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuc2VhcmNoKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuYnV0dG9uKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ2J1dHRvbicpCiAgICAgICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJyksCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB2b2lkIDAgPT09IHRoaXMucy50b3BHcm91cCAmJiAodGhpcy5zLnRvcEdyb3VwID0gdGhpcy5kb20uY29udGFpbmVyKSwKICAgICAgICAgICAgdGhpcy5fc2V0dXAoKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBuKHQsIGkpIHsKICAgICAgICB2YXIgcyA9IHRoaXM7CiAgICAgICAgaWYgKCFoIHx8ICFoLnZlcnNpb25DaGVjayB8fCAhaC52ZXJzaW9uQ2hlY2soJzInKSkgdGhyb3cgbmV3IEVycm9yKCdTZWFyY2hCdWlsZGVyIHJlcXVpcmVzIERhdGFUYWJsZXMgMiBvciBuZXdlcicpOwogICAgICAgIHQgPSBuZXcgaC5BcGkodCk7CiAgICAgICAgaWYgKAogICAgICAgICAgICAoKHRoaXMuY2xhc3NlcyA9IGwuZXh0ZW5kKCEwLCB7fSwgbi5jbGFzc2VzKSksCiAgICAgICAgICAgICh0aGlzLmMgPSBsLmV4dGVuZCghMCwge30sIG4uZGVmYXVsdHMsIGkpKSwKICAgICAgICAgICAgKHRoaXMuZG9tID0gewogICAgICAgICAgICAgICAgY2xlYXJBbGw6IGwoJzxidXR0b24gdHlwZT0iYnV0dG9uIj4nICsgdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNsZWFyQWxsJywgdGhpcy5jLmkxOG4uY2xlYXJBbGwpICsgJzwvYnV0dG9uPicpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5jbGVhckFsbCkKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJ1dHRvbikKICAgICAgICAgICAgICAgICAgICAuYXR0cigndHlwZScsICdidXR0b24nKSwKICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogbCgnPGRpdi8+JykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmNvbnRhaW5lciksCiAgICAgICAgICAgICAgICB0aXRsZTogbCgnPGRpdi8+JykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnRpdGxlKSwKICAgICAgICAgICAgICAgIHRpdGxlUm93OiBsKCc8ZGl2Lz4nKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMudGl0bGVSb3cpLAogICAgICAgICAgICAgICAgdG9wR3JvdXA6IHZvaWQgMCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICh0aGlzLnMgPSB7IGR0OiB0LCBvcHRzOiBpLCBzZWFyY2g6IHZvaWQgMCwgc2VydmVyRGF0YTogdm9pZCAwLCB0b3BHcm91cDogdm9pZCAwIH0pLAogICAgICAgICAgICB2b2lkIDAgPT09IHQuc2V0dGluZ3MoKVswXS5fc2VhcmNoQnVpbGRlcikKICAgICAgICApCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAodC5zZXR0aW5ncygpWzBdLl9zZWFyY2hCdWlsZGVyID0gdGhpcykucy5kdC5wYWdlLmluZm8oKS5zZXJ2ZXJTaWRlICYmCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5kdC5vbigncHJlWGhyLmR0c2InLCBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHMucy5kdC5zdGF0ZS5sb2FkZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuLnNlYXJjaEJ1aWxkZXIgJiYgKGUuc2VhcmNoQnVpbGRlciA9IHMuX2NvbGxhcHNlQXJyYXkobi5zZWFyY2hCdWlsZGVyKSk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9uKCd4aHIuZHRzYicsIGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgZS5zZWFyY2hCdWlsZGVyICYmIGUuc2VhcmNoQnVpbGRlci5vcHRpb25zICYmIChzLnMuc2VydmVyRGF0YSA9IGUuc2VhcmNoQnVpbGRlci5vcHRpb25zKTsKICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICB0aGlzLnMuZHQuc2V0dGluZ3MoKVswXS5fYkluaXRDb21wbGV0ZQogICAgICAgICAgICAgICAgICAgID8gdGhpcy5fc2V0VXAoKQogICAgICAgICAgICAgICAgICAgIDogdC5vbmUoJ2luaXQuZHQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcy5fc2V0VXAoKTsKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgfQogICAgZnVuY3Rpb24gZih0LCBpKSB7CiAgICAgICAgKHQgPSBuZXcgQi5BcGkodCkpLCAoaSA9IGkgfHwgdC5pbml0KCkuc2VhcmNoQnVpbGRlciB8fCBCLmRlZmF1bHRzLnNlYXJjaEJ1aWxkZXIpOwogICAgICAgIHJldHVybiBuZXcgZSh0LCBpKS5nZXROb2RlKCk7CiAgICB9CiAgICByZXR1cm4gKAogICAgICAgIChELl9lc2NhcGVIVE1MID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgICAgIC50b1N0cmluZygpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvJmx0Oy9nLCAnPCcpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvJmd0Oy9nLCAnPicpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvJnF1b3Q7L2csICciJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8mYW1wOy9nLCAnJicpOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5kb1NlYXJjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5jLmxpdmVTZWFyY2ggJiYgdGhpcy5zLmR0LmRyYXcoKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wYXJzZU51bUZtdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiArdC5yZXBsYWNlKC8oPyFeLSlbXjAtOS5dL2csICcnKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUudXBkYXRlQXJyb3dzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITEpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmNoaWxkcmVuKCkuZGV0YWNoKCksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLmRhdGEpLmFwcGVuZCh0aGlzLmRvbS5jb25kaXRpb24pLmFwcGVuZCh0aGlzLmRvbS5pbnB1dENvbnQpLAogICAgICAgICAgICAgICAgdGhpcy5zZXRMaXN0ZW5lcnMoKSwKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdGhpcy5kb20udmFsdWVbMF0gJiYgdyh0aGlzLmRvbS52YWx1ZVswXSkudHJpZ2dlcignZHRzYi1pbnNlcnRlZCcpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuZG9tLnZhbHVlLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgdGhpcy5kb20uaW5wdXRDb250LmFwcGVuZCh0aGlzLmRvbS52YWx1ZVtpXSksIHcodGhpcy5kb20udmFsdWVbaV0pLnRyaWdnZXIoJ2R0c2ItaW5zZXJ0ZWQnKTsKICAgICAgICAgICAgMSA8IHRoaXMucy5kZXB0aCAmJiB0aGlzLmRvbS5idXR0b25zLmFwcGVuZCh0aGlzLmRvbS5sZWZ0KSwKICAgICAgICAgICAgICAgICghMSA9PT0gdGhpcy5jLmRlcHRoTGltaXQgfHwgdGhpcy5zLmRlcHRoIDwgdGhpcy5jLmRlcHRoTGltaXQpICYmIHQKICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZG9tLmJ1dHRvbnMuYXBwZW5kKHRoaXMuZG9tLnJpZ2h0KQogICAgICAgICAgICAgICAgICAgIDogdGhpcy5kb20ucmlnaHQucmVtb3ZlKCksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5idXR0b25zLmFwcGVuZCh0aGlzLmRvbS5kZWxldGUpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS5idXR0b25zKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5kb20uZGF0YS5vZmYoJy5kdHNiJyksIHRoaXMuZG9tLmNvbmRpdGlvbi5vZmYoJy5kdHNiJyksIHRoaXMuZG9tLmRlbGV0ZS5vZmYoJy5kdHNiJyk7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBpID0gdGhpcy5kb20udmFsdWU7IHQgPCBpLmxlbmd0aDsgdCsrKSBpW3RdLm9mZignLmR0c2InKTsKICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLnJlbW92ZSgpOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICB2YXIgZSA9IHRoaXMucy5kdC5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICAgICAgbiA9IHRoaXMucy5jb25kaXRpb25zW3RoaXMucy5jb25kaXRpb25dOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLnMuY29uZGl0aW9uICYmIHZvaWQgMCAhPT0gbikgewogICAgICAgICAgICAgICAgdmFyIHMgPSB0W3RoaXMucy5kYXRhSWR4XTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnMudHlwZSAmJiB0aGlzLnMudHlwZS5pbmNsdWRlcygnbnVtJykgJiYgKCcnICE9PSBlLm9MYW5ndWFnZS5zRGVjaW1hbCB8fCAnJyAhPT0gZS5vTGFuZ3VhZ2Uuc1Rob3VzYW5kcykpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IFt0W3RoaXMucy5kYXRhSWR4XV07CiAgICAgICAgICAgICAgICAgICAgaWYgKCgnJyAhPT0gZS5vTGFuZ3VhZ2Uuc0RlY2ltYWwgJiYgKG8gPSB0W3RoaXMucy5kYXRhSWR4XS5zcGxpdChlLm9MYW5ndWFnZS5zRGVjaW1hbCkpLCAnJyAhPT0gZS5vTGFuZ3VhZ2Uuc1Rob3VzYW5kcykpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgb1tyXSA9IG9bcl0ucmVwbGFjZShlLm9MYW5ndWFnZS5zVGhvdXNhbmRzLCAnLCcpOwogICAgICAgICAgICAgICAgICAgIHMgPSBvLmpvaW4oJy4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAoJ2ZpbHRlcicgIT09IHRoaXMuYy5vcnRob2dvbmFsLnNlYXJjaCAmJgogICAgICAgICAgICAgICAgICAgICAgICAocyA9IGUuZmFzdERhdGEoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmRhdGFJZHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgdGhpcy5jLm9ydGhvZ29uYWwgPyB0aGlzLmMub3J0aG9nb25hbCA6IHRoaXMuYy5vcnRob2dvbmFsLnNlYXJjaCwKICAgICAgICAgICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICAgICAgJ2FycmF5JyA9PT0gdGhpcy5zLnR5cGUpCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAocyA9IEFycmF5LmlzQXJyYXkocykgPyBzIDogW3NdKS5zb3J0KCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDAsIGQgPSBzOyBhIDwgZC5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGRbYV07CiAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgJ3N0cmluZycgPT0gdHlwZW9mIGwgJiYgKGwgPSBsLnJlcGxhY2UoL1tcclxuXHUyMDI4XS9nLCAnICcpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgbnVsbCAhPT0gcyAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgcyAmJiAocyA9IHMucmVwbGFjZSgvW1xyXG5cdTIwMjhdL2csICcgJykpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0aGlzLnMudHlwZS5pbmNsdWRlcygnaHRtbCcpICYmICdzdHJpbmcnID09IHR5cGVvZiBzICYmIChzID0gcy5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgJycpKSwKICAgICAgICAgICAgICAgICAgICBuLnNlYXJjaCgocyA9IG51bGwgPT09IHMgPyAnJyA6IHMpLCB0aGlzLnMudmFsdWUsIHRoaXMpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKEQucHJvdG90eXBlLmdldERldGFpbHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAhMSk7CiAgICAgICAgICAgIHZhciBpLAogICAgICAgICAgICAgICAgZSA9IHRoaXMucy5kdC5zZXR0aW5ncygpWzBdOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBudWxsID09PSB0aGlzLnMudHlwZSB8fAogICAgICAgICAgICAgICAgIVsnbnVtJywgJ251bS1mbXQnLCAnaHRtbC1udW0nLCAnaHRtbC1udW0tZm10J10uaW5jbHVkZXModGhpcy5zLnR5cGUpIHx8CiAgICAgICAgICAgICAgICAoJycgPT09IGUub0xhbmd1YWdlLnNEZWNpbWFsICYmICcnID09PSBlLm9MYW5ndWFnZS5zVGhvdXNhbmRzKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0aGlzLnMudHlwZSAmJiB0KQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnMudHlwZS5pbmNsdWRlcygnZGF0ZScpIHx8IHRoaXMucy50eXBlLmluY2x1ZGVzKCd0aW1lJykpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnMudmFsdWUubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSB0aGlzLnMudmFsdWVbaV0ubWF0Y2goL15cZHs0fS0oWzBdXGR8MVswLTJdKS0oWzAtMl1cZHwzWzAxXSkkL2cpICYmICh0aGlzLnMudmFsdWVbaV0gPSAnJyk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zLnR5cGUuaW5jbHVkZXMoJ21vbWVudCcpKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zLnZhbHVlLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnZhbHVlW2ldICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA8IHRoaXMucy52YWx1ZVtpXS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKCkodGhpcy5zLnZhbHVlW2ldLCB0aGlzLnMuZGF0ZUZvcm1hdCwgITApLmlzVmFsaWQoKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudmFsdWVbaV0gPSBvKCkodGhpcy5zLnZhbHVlW2ldLCB0aGlzLnMuZGF0ZUZvcm1hdCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucy50eXBlLmluY2x1ZGVzKCdsdXhvbicpKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zLnZhbHVlLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnZhbHVlW2ldICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA8IHRoaXMucy52YWx1ZVtpXS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdCh0aGlzLnMudmFsdWVbaV0sIHRoaXMucy5kYXRlRm9ybWF0KS5pbnZhbGlkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy52YWx1ZVtpXSA9IHIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRGF0ZVRpbWUuZnJvbUZvcm1hdCh0aGlzLnMudmFsdWVbaV0sIHRoaXMucy5kYXRlRm9ybWF0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Gb3JtYXQoJ3l5eXktTU0tZGQgSEg6bW06c3MnKSk7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMucy52YWx1ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gW3RoaXMucy52YWx1ZVtpXS50b1N0cmluZygpXTsKICAgICAgICAgICAgICAgICAgICBpZiAoKCcnICE9PSBlLm9MYW5ndWFnZS5zRGVjaW1hbCAmJiAobiA9IHRoaXMucy52YWx1ZVtpXS5zcGxpdChlLm9MYW5ndWFnZS5zRGVjaW1hbCkpLCAnJyAhPT0gZS5vTGFuZ3VhZ2Uuc1Rob3VzYW5kcykpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMrKykgbltzXSA9IG5bc10ucmVwbGFjZShlLm9MYW5ndWFnZS5zVGhvdXNhbmRzLCAnLCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMucy52YWx1ZVtpXSA9IG4uam9pbignLicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5zLnR5cGUgJiYgdGhpcy5zLnR5cGUuaW5jbHVkZXMoJ251bScpICYmIHRoaXMucy5kdC5wYWdlLmluZm8oKS5zZXJ2ZXJTaWRlKQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMucy52YWx1ZS5sZW5ndGg7IGkrKykgdGhpcy5zLnZhbHVlW2ldID0gdGhpcy5zLnZhbHVlW2ldLnJlcGxhY2UoL1teMC05LlwtXS9nLCAnJyk7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb246IHRoaXMucy5jb25kaXRpb24sCiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnMuZGF0YSwKICAgICAgICAgICAgICAgIG9yaWdEYXRhOiB0aGlzLnMub3JpZ0RhdGEsCiAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnMudHlwZSwKICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnMudmFsdWUubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCA/IHQudG9TdHJpbmcoKSA6IHQ7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgfTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuZ2V0Tm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tLmNvbnRhaW5lcjsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUucGFyc2VOdW1iZXIgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB2YXIgaSA9IHRoaXMucy5kdC5pMThuKCdkZWNpbWFsJyk7CiAgICAgICAgICAgIHJldHVybiArKHQgPSBpICYmICcuJyAhPT0gaSA/IHQucmVwbGFjZSgvXC4vZywgJycpLnJlcGxhY2UoaSwgJy4nKSA6IHQpLnJlcGxhY2UoLyg/IV4tKVteMC05Ll0vZywgJycpOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5wb3B1bGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5fcG9wdWxhdGVEYXRhKCksCiAgICAgICAgICAgICAgICAtMSAhPT0gdGhpcy5zLmRhdGFJZHggJiYgKHRoaXMuX3BvcHVsYXRlQ29uZGl0aW9uKCksIHZvaWQgMCAhPT0gdGhpcy5zLmNvbmRpdGlvbikgJiYgdGhpcy5fcG9wdWxhdGVWYWx1ZSgpOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5yZWJ1aWxkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgIHMgPSAhMTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKHRoaXMuX3BvcHVsYXRlRGF0YSgpLAogICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0LmRhdGEgJiYKICAgICAgICAgICAgICAgICAgICAoKGUgPSB0aGlzLmNsYXNzZXMuaXRhbGljKSwKICAgICAgICAgICAgICAgICAgICAobiA9IHRoaXMuZG9tLmRhdGEpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmRhdGEuY2hpbGRyZW4oJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAhcyAmJiAodyh0aGlzKS50ZXh0KCkgPT09IHQuZGF0YSB8fCAodC5vcmlnRGF0YSAmJiB3KHRoaXMpLnByb3AoJ29yaWdEYXRhJykgPT09IHQub3JpZ0RhdGEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodyh0aGlzKS5wcm9wKCdzZWxlY3RlZCcsICEwKSwgbi5yZW1vdmVDbGFzcyhlKSwgKHMgPSAhMCksIChpID0gcGFyc2VJbnQodyh0aGlzKS52YWwoKSwgMTApKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdyh0aGlzKS5yZW1vdmVQcm9wKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgIHMpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgKHRoaXMucy5kYXRhID0gdC5kYXRhKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5zLm9yaWdEYXRhID0gdC5vcmlnRGF0YSksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5kYXRhSWR4ID0gaSksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYy5vcnRob2dvbmFsID0gdGhpcy5fZ2V0T3B0aW9ucygpLm9ydGhvZ29uYWwpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmRhdGFUaXRsZS5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1bGF0ZUNvbmRpdGlvbigpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IHZvaWQgMCwgciA9IHRoaXMuZG9tLmNvbmRpdGlvbi5jaGlsZHJlbignb3B0aW9uJyksIGEgPSAwOyBhIDwgci5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0gdyhyW2FdKTsKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQuY29uZGl0aW9uICYmIGQudmFsKCkgPT09IHQuY29uZGl0aW9uICYmICdzdHJpbmcnID09IHR5cGVvZiB0LmNvbmRpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICA/IChkLnByb3AoJ3NlbGVjdGVkJywgITApLCAobyA9IGQudmFsKCkpKQogICAgICAgICAgICAgICAgICAgICAgICA6IGQucmVtb3ZlUHJvcCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgoKHRoaXMucy5jb25kaXRpb24gPSBvKSwgdm9pZCAwICE9PSB0aGlzLnMuY29uZGl0aW9uKSkgewogICAgICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb25kaXRpb25UaXRsZS5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvbi5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuaXRhbGljKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBhIDwgci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGErKwogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHcoclthXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGwudmFsKCkgIT09IHRoaXMucy5jb25kaXRpb24gJiYgbC5yZW1vdmVQcm9wKCdzZWxlY3RlZCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1bGF0ZVZhbHVlKHQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlLnByZXBlbmRUbyh0aGlzLmRvbS5jb25kaXRpb24pLnByb3AoJ3NlbGVjdGVkJywgITApOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKEQucHJvdG90eXBlLnNldExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGwgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmRvbS5kYXRhLnVuYmluZCgnY2hhbmdlJykub24oJ2NoYW5nZS5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbC5kb20uZGF0YVRpdGxlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gbC5kb20uZGF0YS5jaGlsZHJlbignb3B0aW9uLicgKyBsLmNsYXNzZXMub3B0aW9uKSwgaSA9IDA7IGkgPCB0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB3KHRbaV0pOwogICAgICAgICAgICAgICAgICAgIGUudmFsKCkgPT09IGwuZG9tLmRhdGEudmFsKCkKICAgICAgICAgICAgICAgICAgICAgICAgPyAobC5kb20uZGF0YS5yZW1vdmVDbGFzcyhsLmNsYXNzZXMuaXRhbGljKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByb3AoJ3NlbGVjdGVkJywgITApLAogICAgICAgICAgICAgICAgICAgICAgICAgIChsLnMuZGF0YUlkeCA9ICtlLnZhbCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAobC5zLmRhdGEgPSBlLnRleHQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGwucy5vcmlnRGF0YSA9IGUucHJvcCgnb3JpZ0RhdGEnKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGwuYy5vcnRob2dvbmFsID0gbC5fZ2V0T3B0aW9ucygpLm9ydGhvZ29uYWwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGwuX2NsZWFyQ29uZGl0aW9uKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbC5fY2xlYXJWYWx1ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGwuX3BvcHVsYXRlQ29uZGl0aW9uKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbC5zLmZpbGxlZCAmJiAoKGwucy5maWxsZWQgPSAhMSksIGwuZG9TZWFyY2goKSwgbC5zZXRMaXN0ZW5lcnMoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbC5zLmR0LnN0YXRlLnNhdmUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29uZGl0aW9uLnVuYmluZCgnY2hhbmdlJykub24oJ2NoYW5nZS5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGwuZG9tLmNvbmRpdGlvblRpdGxlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IGwuZG9tLmNvbmRpdGlvbi5jaGlsZHJlbignb3B0aW9uLicgKyBsLmNsYXNzZXMub3B0aW9uKSwgaSA9IDA7IGkgPCB0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdyh0W2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudmFsKCkgPT09IGwuZG9tLmNvbmRpdGlvbi52YWwoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5kb20uY29uZGl0aW9uLnJlbW92ZUNsYXNzKGwuY2xhc3Nlcy5pdGFsaWMpLCBlLnByb3AoJ3NlbGVjdGVkJywgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IGUudmFsKCksIHMgPSAwLCBvID0gT2JqZWN0LmtleXMobC5zLmNvbmRpdGlvbnMpOyBzIDwgby5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob1tzXSA9PT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnMuY29uZGl0aW9uID0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5fY2xlYXJWYWx1ZSgpLCBsLl9wb3B1bGF0ZVZhbHVlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgYSA9IGwuZG9tLnZhbHVlOyByIDwgYS5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYVtyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnMuZmlsbGVkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwICE9PSBsLmRvbS5pbnB1dENvbnQuaGFzKGRbMF0pLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGwucy5maWxsZWQgPSAhMSksIGwuZG9TZWFyY2goKSwgbC5zZXRMaXN0ZW5lcnMoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCA9PT0gbC5kb20udmFsdWUubGVuZ3RoIHx8ICgxID09PSBsLmRvbS52YWx1ZS5sZW5ndGggJiYgdm9pZCAwID09PSBsLmRvbS52YWx1ZVswXSkpICYmIGwuZG9TZWFyY2goKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGUucmVtb3ZlUHJvcCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuc2V0dXBCdXR0b25zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICA1NTAgPCB1LmlubmVyV2lkdGgKICAgICAgICAgICAgICAgID8gKHRoaXMuZG9tLmNvbnRhaW5lci5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMudmVydGljYWwpLAogICAgICAgICAgICAgICAgICB0aGlzLmRvbS5idXR0b25zLmNzcygnbGVmdCcsIG51bGwpLAogICAgICAgICAgICAgICAgICB0aGlzLmRvbS5idXR0b25zLmNzcygndG9wJywgbnVsbCkpCiAgICAgICAgICAgICAgICA6ICh0aGlzLmRvbS5jb250YWluZXIuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnZlcnRpY2FsKSwKICAgICAgICAgICAgICAgICAgdGhpcy5kb20uYnV0dG9ucy5jc3MoJ2xlZnQnLCB0aGlzLmRvbS5kYXRhLmlubmVyV2lkdGgoKSksCiAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmJ1dHRvbnMuY3NzKCd0b3AnLCB0aGlzLmRvbS5kYXRhLnBvc2l0aW9uKCkudG9wKSk7CiAgICAgICAgfSksCiAgICAgICAgKEQucHJvdG90eXBlLl9idWlsZENyaXRlcmlhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmRvbS5kYXRhLmFwcGVuZCh0aGlzLmRvbS5kYXRhVGl0bGUpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29uZGl0aW9uLmFwcGVuZCh0aGlzLmRvbS5jb25kaXRpb25UaXRsZSksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLmRhdGEpLmFwcGVuZCh0aGlzLmRvbS5jb25kaXRpb24pLAogICAgICAgICAgICAgICAgdGhpcy5kb20uaW5wdXRDb250LmVtcHR5KCk7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBpID0gdGhpcy5kb20udmFsdWU7IHQgPCBpLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGlbdF07CiAgICAgICAgICAgICAgICBlLmFwcGVuZCh0aGlzLmRvbS52YWx1ZVRpdGxlKSwgdGhpcy5kb20uaW5wdXRDb250LmFwcGVuZChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRvbS5idXR0b25zLmFwcGVuZCh0aGlzLmRvbS5kZWxldGUpLmFwcGVuZCh0aGlzLmRvbS5yaWdodCksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLmlucHV0Q29udCkuYXBwZW5kKHRoaXMuZG9tLmJ1dHRvbnMpLAogICAgICAgICAgICAgICAgdGhpcy5zZXRMaXN0ZW5lcnMoKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuX2NsZWFyQ29uZGl0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmRvbS5jb25kaXRpb24uZW1wdHkoKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlLnByb3AoJ3NlbGVjdGVkJywgITApLmF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvbi5wcmVwZW5kKHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlKS5wcm9wKCdzZWxlY3RlZEluZGV4JywgMCksCiAgICAgICAgICAgICAgICAodGhpcy5zLmNvbmRpdGlvbnMgPSB7fSksCiAgICAgICAgICAgICAgICAodGhpcy5zLmNvbmRpdGlvbiA9IHZvaWQgMCk7CiAgICAgICAgfSksCiAgICAgICAgKEQucHJvdG90eXBlLl9jbGVhclZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdDsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5zLmNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgaWYgKDAgPCB0aGlzLmRvbS52YWx1ZS5sZW5ndGggJiYgdm9pZCAwICE9PSB0aGlzLmRvbS52YWx1ZVswXSkKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZSA9IHRoaXMuZG9tLnZhbHVlOyBpIDwgZS5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSAodCA9IGVbaV0pICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICgodGhpcy5kb20udmFsdWUgPSBbXS5jb25jYXQodGhpcy5zLmNvbmRpdGlvbnNbdGhpcy5zLmNvbmRpdGlvbl0uaW5pdCh0aGlzLCBELnVwZGF0ZUxpc3RlbmVyKSkpLAogICAgICAgICAgICAgICAgICAgIDAgPCB0aGlzLmRvbS52YWx1ZS5sZW5ndGggJiYgdm9pZCAwICE9PSB0aGlzLmRvbS52YWx1ZVswXSkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmlucHV0Q29udC5lbXB0eSgpLmFwcGVuZCh0aGlzLmRvbS52YWx1ZVswXSkuaW5zZXJ0QWZ0ZXIodGhpcy5kb20uY29uZGl0aW9uKSwKICAgICAgICAgICAgICAgICAgICAgICAgdyh0aGlzLmRvbS52YWx1ZVswXSkudHJpZ2dlcignZHRzYi1pbnNlcnRlZCcpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAxOyBuIDwgdGhpcy5kb20udmFsdWUubGVuZ3RoOyBuKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmlucHV0Q29udC5hcHBlbmQodGhpcy5kb20udmFsdWVbbl0pLCB3KHRoaXMuZG9tLnZhbHVlW25dKS50cmlnZ2VyKCdkdHNiLWluc2VydGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgbyA9IHRoaXMuZG9tLnZhbHVlOyBzIDwgby5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09ICh0ID0gb1tzXSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgICAgICB0aGlzLmRvbS52YWx1ZVRpdGxlLnByb3AoJ3NlbGVjdGVkJywgITApLCB0aGlzLmRvbS5kZWZhdWx0VmFsdWUuYXBwZW5kKHRoaXMuZG9tLnZhbHVlVGl0bGUpLmluc2VydEFmdGVyKHRoaXMuZG9tLmNvbmRpdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKHRoaXMucy52YWx1ZSA9IFtdKSwKICAgICAgICAgICAgICAgICh0aGlzLmRvbS52YWx1ZSA9IFsKICAgICAgICAgICAgICAgICAgICB3KCc8c2VsZWN0IGRpc2FibGVkLz4nKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRyb3BEb3duKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLml0YWxpYykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5zZWxlY3QpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQodGhpcy5kb20udmFsdWVUaXRsZS5jbG9uZSgpKSwKICAgICAgICAgICAgICAgIF0pOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5fZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQ7CiAgICAgICAgICAgIHJldHVybiB3LmV4dGVuZCghMCwge30sIEQuZGVmYXVsdHMsIHQuc2V0dGluZ3MoKVswXS5hb0NvbHVtbnNbdGhpcy5zLmRhdGFJZHhdLnNlYXJjaEJ1aWxkZXIpOwogICAgICAgIH0pLAogICAgICAgIChELnByb3RvdHlwZS5fcG9wdWxhdGVDb25kaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gW10sCiAgICAgICAgICAgICAgICBpID0gT2JqZWN0LmtleXModGhpcy5zLmNvbmRpdGlvbnMpLmxlbmd0aCwKICAgICAgICAgICAgICAgIGUgPSB0aGlzLnMuZHQsCiAgICAgICAgICAgICAgICBuID0gZS5zZXR0aW5ncygpWzBdLmFvQ29sdW1ucywKICAgICAgICAgICAgICAgIHMgPSArdGhpcy5kb20uZGF0YS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7CiAgICAgICAgICAgIGlmICgwID09PSBpKSB7CiAgICAgICAgICAgICAgICAodGhpcy5zLnR5cGUgPSBlLmNvbHVtbihzKS50eXBlKCkpLAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAwICE9PSAobyA9IG5bc10pLnNlYXJjaEJ1aWxkZXJUeXBlICYmIG51bGwgIT09IG8uc2VhcmNoQnVpbGRlclR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHRoaXMucy50eXBlID0gby5zZWFyY2hCdWlsZGVyVHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHZvaWQgMCAhPT0gdGhpcy5zLnR5cGUgJiYgbnVsbCAhPT0gdGhpcy5zLnR5cGUpIHx8ICh0aGlzLnMudHlwZSA9IG8uc1R5cGUpKSwKICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gdGhpcy5zLnR5cGUgJiYgdm9pZCAwICE9PSB0aGlzLnMudHlwZSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKHcuZm4uZGF0YVRhYmxlLmV4dC5vQXBpICYmIHcuZm4uZGF0YVRhYmxlLmV4dC5vQXBpLl9mbkNvbHVtblR5cGVzKGUuc2V0dGluZ3MoKVswXSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudHlwZSA9IGUuY29sdW1uKHMpLnR5cGUoKSkpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvbi5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLmVtcHR5KCkuYXBwZW5kKHRoaXMuZG9tLmNvbmRpdGlvblRpdGxlKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuaXRhbGljKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb25kaXRpb25UaXRsZS5wcm9wKCdzZWxlY3RlZCcsICEwKTsKICAgICAgICAgICAgICAgIHZhciBvID0gZS5zZXR0aW5ncygpWzBdLm9MYW5ndWFnZS5zRGVjaW1hbCwKICAgICAgICAgICAgICAgICAgICByID0KICAgICAgICAgICAgICAgICAgICAgICAgKCcnICE9PSBvICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMudHlwZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnR5cGUuaW5kZXhPZihvKSA9PT0gdGhpcy5zLnR5cGUubGVuZ3RoIC0gby5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudHlwZS5pbmNsdWRlcygnbnVtLWZtdCcpIHx8IHRoaXMucy50eXBlLmluY2x1ZGVzKCdudW0nKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMudHlwZSA9IHRoaXMucy50eXBlLnJlcGxhY2UobywgJycpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdGhpcy5jLmNvbmRpdGlvbnNbdGhpcy5zLnR5cGVdCiAgICAgICAgICAgICAgICAgICAgPyAociA9IHRoaXMuYy5jb25kaXRpb25zW3RoaXMucy50eXBlXSkKICAgICAgICAgICAgICAgICAgICA6IHRoaXMucy50eXBlICYmIHRoaXMucy50eXBlLmluY2x1ZGVzKCdkYXRldGltZS0nKQogICAgICAgICAgICAgICAgICAgID8gKChyID0gQi51c2UoJ21vbWVudCcpID8gdGhpcy5jLmNvbmRpdGlvbnMubW9tZW50IDogdGhpcy5jLmNvbmRpdGlvbnMubHV4b24pLAogICAgICAgICAgICAgICAgICAgICAgKHRoaXMucy5kYXRlRm9ybWF0ID0gdGhpcy5zLnR5cGUucmVwbGFjZSgvZGF0ZXRpbWUtL2csICcnKSkpCiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnMudHlwZSAmJiB0aGlzLnMudHlwZS5pbmNsdWRlcygnbW9tZW50JykKICAgICAgICAgICAgICAgICAgICA/ICgociA9IHRoaXMuYy5jb25kaXRpb25zLm1vbWVudCksICh0aGlzLnMuZGF0ZUZvcm1hdCA9IHRoaXMucy50eXBlLnJlcGxhY2UoL21vbWVudC0vZywgJycpKSkKICAgICAgICAgICAgICAgICAgICA6IHRoaXMucy50eXBlICYmIHRoaXMucy50eXBlLmluY2x1ZGVzKCdsdXhvbicpCiAgICAgICAgICAgICAgICAgICAgPyAoKHIgPSB0aGlzLmMuY29uZGl0aW9ucy5sdXhvbiksICh0aGlzLnMuZGF0ZUZvcm1hdCA9IHRoaXMucy50eXBlLnJlcGxhY2UoL2x1eG9uLS9nLCAnJykpKQogICAgICAgICAgICAgICAgICAgIDogKHIgPSB0aGlzLmMuY29uZGl0aW9ucy5zdHJpbmcpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgZCwgbCA9IDAsIHUgPSBPYmplY3Qua2V5cyhyKTsgbCA8IHUubGVuZ3RoOyBsKyspCiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gclsoZCA9IHVbbF0pXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAoZS5wYWdlLmluZm8oKS5zZXJ2ZXJTaWRlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2RdLmluaXQgPT09IEQuaW5pdFNlbGVjdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKChhID0gbltzXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuc2VydmVyRGF0YSAmJiB0aGlzLnMuc2VydmVyRGF0YVthLmRhdGFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHJbZF0uaW5pdCA9IEQuaW5pdFNlbGVjdFNTUCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocltkXS5pbnB1dFZhbHVlID0gRC5pbnB1dFZhbHVlU2VsZWN0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyW2RdLmlzSW5wdXRWYWxpZCA9IEQuaXNJbnB1dFZhbGlkU2VsZWN0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgocltkXS5pbml0ID0gRC5pbml0SW5wdXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJbZF0uaW5wdXRWYWx1ZSA9IEQuaW5wdXRWYWx1ZUlucHV0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyW2RdLmlzSW5wdXRWYWxpZCA9IEQuaXNJbnB1dFZhbGlkSW5wdXQpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuY29uZGl0aW9uc1tkXSA9IHJbZF0pLAogICAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiAoViA9IHJbZF0uY29uZGl0aW9uTmFtZSkgJiYgKFYgPSBWKGUsIHRoaXMuYy5pMThuKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCh3KCc8b3B0aW9uPicsIHsgdGV4dDogViwgdmFsdWU6IGQgfSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wdGlvbikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm5vdEl0YWxpYykpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghKDAgPCBpKSkgcmV0dXJuIHZvaWQgdGhpcy5kb20uY29uZGl0aW9uLmF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuaXRhbGljKTsKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNvbmRpdGlvbi5lbXB0eSgpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLml0YWxpYyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgaCA9IE9iamVjdC5rZXlzKHRoaXMucy5jb25kaXRpb25zKTsgYyA8IGgubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICAgICAgICBkID0gaFtjXTsKICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMucy5jb25kaXRpb25zW2RdLmNvbmRpdGlvbk5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHAgJiYgKHAgPSBwKGUsIHRoaXMuYy5pMThuKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3KCc8b3B0aW9uPicsIHsgdGV4dDogcCwgdmFsdWU6IGQgfSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wdGlvbikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm5vdEl0YWxpYykpOwogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdGhpcy5zLmNvbmRpdGlvbiAmJgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY29uZGl0aW9uID09PSBwICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChtLnByb3AoJ3NlbGVjdGVkJywgITApLCB0aGlzLmRvbS5jb25kaXRpb24ucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLml0YWxpYykpLAogICAgICAgICAgICAgICAgICAgICAgICB0LnB1c2gobSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgZiA9IDAsIGcgPSB0OyBmIDwgZy5sZW5ndGg7IGYrKykgdGhpcy5kb20uY29uZGl0aW9uLmFwcGVuZChnW2ZdKTsKICAgICAgICAgICAgaWYgKG5bc10uc2VhcmNoQnVpbGRlciAmJiBuW3NdLnNlYXJjaEJ1aWxkZXIuZGVmYXVsdENvbmRpdGlvbikgewogICAgICAgICAgICAgICAgdmFyIHYgPSBuW3NdLnNlYXJjaEJ1aWxkZXIuZGVmYXVsdENvbmRpdGlvbjsKICAgICAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgdikgdGhpcy5kb20uY29uZGl0aW9uLnByb3AoJ3NlbGVjdGVkSW5kZXgnLCB2KSwgdGhpcy5kb20uY29uZGl0aW9uLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHYpCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0Lmxlbmd0aDsgYisrKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB5ID0gMCwgQyA9IE9iamVjdC5rZXlzKHRoaXMucy5jb25kaXRpb25zKTsgeSA8IEMubGVuZ3RoOyB5KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBWLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgPSBDW3ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgKFYgPSB0aGlzLnMuY29uZGl0aW9uc1tJXS5jb25kaXRpb25OYW1lKSA/IFYgOiBWKGUsIHRoaXMuYy5pMThuKSkgPT09IHRbYl0udGV4dCgpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSSA9PT0gdgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uY29uZGl0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdzZWxlY3RlZEluZGV4JywgdGhpcy5kb20uY29uZGl0aW9uLmNoaWxkcmVuKCkudG9BcnJheSgpLmluZGV4T2YodFtiXVswXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuaXRhbGljKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uY29uZGl0aW9uLnRyaWdnZXIoJ2NoYW5nZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYiA9IHQubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgdGhpcy5kb20uY29uZGl0aW9uLnByb3AoJ3NlbGVjdGVkSW5kZXgnLCAwKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuX3BvcHVsYXRlRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLnMuZHQuc2V0dGluZ3MoKVswXS5hb0NvbHVtbnMsCiAgICAgICAgICAgICAgICBpID0gdGhpcy5zLmR0LmNvbHVtbnModGhpcy5jLmNvbHVtbnMpLmluZGV4ZXMoKS50b0FycmF5KCk7CiAgICAgICAgICAgIHRoaXMuZG9tLmRhdGEuZW1wdHkoKS5hcHBlbmQodGhpcy5kb20uZGF0YVRpdGxlKTsKICAgICAgICAgICAgZm9yICh2YXIgZSwgbiwgcyA9IDA7IHMgPCB0Lmxlbmd0aDsgcysrKQogICAgICAgICAgICAgICAgKCEwICE9PSB0aGlzLmMuY29sdW1ucyAmJiAhaS5pbmNsdWRlcyhzKSkgfHwKICAgICAgICAgICAgICAgICAgICAoKG4gPSB7IGluZGV4OiBzLCBvcmlnRGF0YTogKGUgPSB0W3NdKS5kYXRhLCB0ZXh0OiAoZS5zZWFyY2hCdWlsZGVyVGl0bGUgfHwgZS5zVGl0bGUpLnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCAnJykgfSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uZGF0YS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIHcoJzxvcHRpb24+JywgeyB0ZXh0OiBuLnRleHQsIHZhbHVlOiBuLmluZGV4IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLmNsYXNzZXMubm90SXRhbGljKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ29yaWdEYXRhJywgZS5kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ3NlbGVjdGVkJywgdGhpcy5zLmRhdGFJZHggPT09IG4uaW5kZXgpLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmRhdGFJZHggIT09IG4uaW5kZXgpIHx8CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uZGF0YVRpdGxlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJyk7CiAgICAgICAgfSksCiAgICAgICAgKEQucHJvdG90eXBlLl9wb3B1bGF0ZVZhbHVlID0gZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIG4gPSB0aGlzLnMuZmlsbGVkLAogICAgICAgICAgICAgICAgICAgIHMgPQogICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMucy5maWxsZWQgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kb20uZGVmYXVsdFZhbHVlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCksCiAgICAgICAgICAgICAgICAgICAgICAgIDApLAogICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLmRvbS52YWx1ZTsKICAgICAgICAgICAgICAgIHMgPCBvLmxlbmd0aDsKICAgICAgICAgICAgICAgIHMrKwogICAgICAgICAgICApCiAgICAgICAgICAgICAgICAhKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdCAmJiB0LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICAgICAgICAgIH0pKG9bc10pOwogICAgICAgICAgICB2YXIgciA9IHRoaXMuZG9tLmlucHV0Q29udC5jaGlsZHJlbigpOwogICAgICAgICAgICBpZiAoMSA8IHIubGVuZ3RoKSBmb3IgKHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgdyhyW3RdKS5yZW1vdmUoKTsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gaSAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMucy5kdC5jb2x1bW5zKCkuZXZlcnkoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zLmR0LnNldHRpbmdzKClbMF0uYW9Db2x1bW5zW3RdLnNUaXRsZSA9PT0gaS5kYXRhICYmIChlLnMuZGF0YUlkeCA9IHQpOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLnZhbHVlID0gW10uY29uY2F0KAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY29uZGl0aW9uc1t0aGlzLnMuY29uZGl0aW9uXS5pbml0KHRoaXMsIEQudXBkYXRlTGlzdGVuZXIsIHZvaWQgMCAhPT0gaSA/IGkudmFsdWUgOiB2b2lkIDApLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBpICYmIHZvaWQgMCAhPT0gaS52YWx1ZSAmJiAodGhpcy5zLnZhbHVlID0gaS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uaW5wdXRDb250LmVtcHR5KCksCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0aGlzLmRvbS52YWx1ZVswXSAmJiB3KHRoaXMuZG9tLnZhbHVlWzBdKS5hcHBlbmRUbyh0aGlzLmRvbS5pbnB1dENvbnQpLnRyaWdnZXIoJ2R0c2ItaW5zZXJ0ZWQnKSwKICAgICAgICAgICAgICAgICAgICB0ID0gMTsKICAgICAgICAgICAgICAgIHQgPCB0aGlzLmRvbS52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICB0KysKICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdyh0aGlzLmRvbS52YWx1ZVt0XSkKICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIodGhpcy5kb20udmFsdWVbdCAtIDFdKQogICAgICAgICAgICAgICAgICAgIC50cmlnZ2VyKCdkdHNiLWluc2VydGVkJyk7CiAgICAgICAgICAgICh0aGlzLnMuZmlsbGVkID0gdGhpcy5zLmNvbmRpdGlvbnNbdGhpcy5zLmNvbmRpdGlvbl0uaXNJbnB1dFZhbGlkKHRoaXMuZG9tLnZhbHVlLCB0aGlzKSksCiAgICAgICAgICAgICAgICB0aGlzLnNldExpc3RlbmVycygpLAogICAgICAgICAgICAgICAgdGhpcy5zLnByZXZlbnRSZWRyYXcgfHwgbiA9PT0gdGhpcy5zLmZpbGxlZCB8fCAodGhpcy5zLmR0LnBhZ2UuaW5mbygpLnNlcnZlclNpZGUgfHwgdGhpcy5kb1NlYXJjaCgpLCB0aGlzLnNldExpc3RlbmVycygpKTsKICAgICAgICB9KSwKICAgICAgICAoRC5wcm90b3R5cGUuX3Rocm90dGxlID0gZnVuY3Rpb24gKG4sIHMpIHsKICAgICAgICAgICAgdmFyIG8gPSBudWxsLAogICAgICAgICAgICAgICAgciA9IG51bGwsCiAgICAgICAgICAgICAgICBhID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIG51bGwgPT09IChzID0gdm9pZCAwID09PSBzID8gMjAwIDogcykgJiYgKHMgPSAyMDApLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHRbaV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSArbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBvICYmIGUgPCBvICsgcyA/IGNsZWFyVGltZW91dChyKSA6IChvID0gZSksCiAgICAgICAgICAgICAgICAgICAgICAgIChyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobyA9IG51bGwpLCBuLmFwcGx5KGEsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBzKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKEQudmVyc2lvbiA9ICcxLjEuMCcpLAogICAgICAgIChELmNsYXNzZXMgPSB7CiAgICAgICAgICAgIGJ1dHRvbjogJ2R0c2ItYnV0dG9uJywKICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyOiAnZHRzYi1idXR0b25Db250YWluZXInLAogICAgICAgICAgICBjb25kaXRpb246ICdkdHNiLWNvbmRpdGlvbicsCiAgICAgICAgICAgIGNvbnRhaW5lcjogJ2R0c2ItY3JpdGVyaWEnLAogICAgICAgICAgICBkYXRhOiAnZHRzYi1kYXRhJywKICAgICAgICAgICAgZGVsZXRlOiAnZHRzYi1kZWxldGUnLAogICAgICAgICAgICBkcm9wRG93bjogJ2R0c2ItZHJvcERvd24nLAogICAgICAgICAgICBncmV5c2NhbGU6ICdkdHNiLWdyZXlzY2FsZScsCiAgICAgICAgICAgIGlucHV0OiAnZHRzYi1pbnB1dCcsCiAgICAgICAgICAgIGlucHV0Q29udDogJ2R0c2ItaW5wdXRDb250JywKICAgICAgICAgICAgaXRhbGljOiAnZHRzYi1pdGFsaWMnLAogICAgICAgICAgICBqb2luZXI6ICdkdHNiLWpvaW5lcicsCiAgICAgICAgICAgIGxlZnQ6ICdkdHNiLWxlZnQnLAogICAgICAgICAgICBub3RJdGFsaWM6ICdkdHNiLW5vdEl0YWxpYycsCiAgICAgICAgICAgIG9wdGlvbjogJ2R0c2Itb3B0aW9uJywKICAgICAgICAgICAgcmlnaHQ6ICdkdHNiLXJpZ2h0JywKICAgICAgICAgICAgc2VsZWN0OiAnZHRzYi1zZWxlY3QnLAogICAgICAgICAgICB2YWx1ZTogJ2R0c2ItdmFsdWUnLAogICAgICAgICAgICB2ZXJ0aWNhbDogJ2R0c2ItdmVydGljYWwnLAogICAgICAgIH0pLAogICAgICAgIChELmluaXRTZWxlY3QgPSBmdW5jdGlvbiAoZSwgdCwgbiwgaSkgewogICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSBudWxsKSwgdm9pZCAwID09PSBpICYmIChpID0gITEpOwogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgdmFyIHMgPSBlLmRvbS5kYXRhLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKSwKICAgICAgICAgICAgICAgICAgICBvID0gZS5zLmR0LnJvd3MoKS5pbmRleGVzKCkudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICAgIHIgPSBlLnMuZHQuc2V0dGluZ3MoKVswXS5mYXN0RGF0YSwKICAgICAgICAgICAgICAgICAgICBhID0KICAgICAgICAgICAgICAgICAgICAgICAgKGUuZG9tLnZhbHVlVGl0bGUucHJvcCgnc2VsZWN0ZWQnLCAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgIHcoJzxzZWxlY3QvPicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoRC5jbGFzc2VzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5kcm9wRG93bikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhELmNsYXNzZXMuaXRhbGljKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5zZWxlY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGUuZG9tLnZhbHVlVGl0bGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NoYW5nZS5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcodGhpcykucmVtb3ZlQ2xhc3MoRC5jbGFzc2VzLml0YWxpYyksIHQoZSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgZCA9IChlLmMuZ3JleXNjYWxlICYmIGEuYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSksIFtdKSwKICAgICAgICAgICAgICAgICAgICBsID0gW10sCiAgICAgICAgICAgICAgICAgICAgdSA9IDAsCiAgICAgICAgICAgICAgICAgICAgYyA9IG87CiAgICAgICAgICAgICAgICB1IDwgYy5sZW5ndGg7CiAgICAgICAgICAgICAgICB1KysKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB2YXIgaCA9IGNbdV0sCiAgICAgICAgICAgICAgICAgICAgcCA9IHIoaCwgcywgJ3N0cmluZycgPT0gdHlwZW9mIGUuYy5vcnRob2dvbmFsID8gZS5jLm9ydGhvZ29uYWwgOiBlLmMub3J0aG9nb25hbC5zZWFyY2gpLAogICAgICAgICAgICAgICAgICAgIG0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogJ3N0cmluZycgPT0gdHlwZW9mIHAgPyBwLnJlcGxhY2UoL1tcclxuXHUyMDI4XS9nLCAnICcpIDogcCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHIoaCwgcywgJ3N0cmluZycgPT0gdHlwZW9mIGUuYy5vcnRob2dvbmFsID8gZS5jLm9ydGhvZ29uYWwgOiBlLmMub3J0aG9nb25hbC5kaXNwbGF5KSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGYgPQogICAgICAgICAgICAgICAgICAgICAgICAoJ2FycmF5JyA9PT0gZS5zLnR5cGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobS5maWx0ZXIgPSBBcnJheS5pc0FycmF5KG0uZmlsdGVyKSA/IG0uZmlsdGVyIDogW20uZmlsdGVyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobS50ZXh0ID0gQXJyYXkuaXNBcnJheShtLnRleHQpID8gbS50ZXh0IDogW20udGV4dF0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucy50eXBlLmluY2x1ZGVzKCdodG1sJykgJiYgbnVsbCAhPT0gdCAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiB0LnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9IHcoJzxvcHRpb24+JywgeyB0eXBlOiBBcnJheS5pc0FycmF5KHQpID8gJ0FycmF5JyA6ICdTdHJpbmcnLCB2YWx1ZTogdCB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCdzYnYnLCB0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhlLmNsYXNzZXMub3B0aW9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhlLmNsYXNzZXMubm90SXRhbGljKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCdzdHJpbmcnID09IHR5cGVvZiBpID8gaS5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgJycpIDogaSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdC52YWwoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSA9PT0gZC5pbmRleE9mKGkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQucHVzaChpKSwgbC5wdXNoKHQpLCBudWxsICE9PSBuICYmIEFycmF5LmlzQXJyYXkoblswXSkgJiYgKG5bMF0gPSBuWzBdLnNvcnQoKS5qb2luKCcsJykpLCBudWxsICE9PSBuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudmFsKCkgPT09IG5bMF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5wcm9wKCdzZWxlY3RlZCcsICEwKSwgYS5yZW1vdmVDbGFzcyhELmNsYXNzZXMuaXRhbGljKSwgZS5kb20udmFsdWVUaXRsZS5yZW1vdmVQcm9wKCdzZWxlY3RlZCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoaSkgZm9yICh2YXIgZyA9IDA7IGcgPCBtLmZpbHRlci5sZW5ndGg7IGcrKykgZihtLmZpbHRlcltnXSwgbS50ZXh0W2ddKTsKICAgICAgICAgICAgICAgIGVsc2UgZihtLmZpbHRlciwgQXJyYXkuaXNBcnJheShtLnRleHQpID8gbS50ZXh0LmpvaW4oJywgJykgOiBtLnRleHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGwuc29ydChmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdhcnJheScgPT09IGUucy50eXBlIHx8ICdzdHJpbmcnID09PSBlLnMudHlwZSB8fCAnaHRtbCcgPT09IGUucy50eXBlCiAgICAgICAgICAgICAgICAgICAgPyB0LnZhbCgpIDwgaS52YWwoKQogICAgICAgICAgICAgICAgICAgICAgICA/IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIDogdC52YWwoKSA+IGkudmFsKCkKICAgICAgICAgICAgICAgICAgICAgICAgPyAxCiAgICAgICAgICAgICAgICAgICAgICAgIDogMAogICAgICAgICAgICAgICAgICAgIDogJ251bScgPT09IGUucy50eXBlIHx8ICdodG1sLW51bScgPT09IGUucy50eXBlCiAgICAgICAgICAgICAgICAgICAgPyArdC52YWwoKS5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgJycpIDwgK2kudmFsKCkucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICcnKQogICAgICAgICAgICAgICAgICAgICAgICA/IC0xCiAgICAgICAgICAgICAgICAgICAgICAgIDogK3QudmFsKCkucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICcnKSA+ICtpLnZhbCgpLnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgPyAxCiAgICAgICAgICAgICAgICAgICAgICAgIDogMAogICAgICAgICAgICAgICAgICAgIDogJ251bS1mbXQnID09PSBlLnMudHlwZSB8fCAnaHRtbC1udW0tZm10JyA9PT0gZS5zLnR5cGUKICAgICAgICAgICAgICAgICAgICA/ICt0LnZhbCgpLnJlcGxhY2UoL1teMC05Ll0vZywgJycpIDwgK2kudmFsKCkucmVwbGFjZSgvW14wLTkuXS9nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgPyAtMQogICAgICAgICAgICAgICAgICAgICAgICA6ICt0LnZhbCgpLnJlcGxhY2UoL1teMC05Ll0vZywgJycpID4gK2kudmFsKCkucmVwbGFjZSgvW14wLTkuXS9nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgPyAxCiAgICAgICAgICAgICAgICAgICAgICAgIDogMAogICAgICAgICAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZm9yICh2YXIgdiA9IDAsIGIgPSBsOyB2IDwgYi5sZW5ndGg7IHYrKykgYS5hcHBlbmQoYlt2XSk7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0pLAogICAgICAgIChELmluaXRTZWxlY3RTU1AgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgdC5kb20udmFsdWVUaXRsZS5wcm9wKCdzZWxlY3RlZCcsICEwKTsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIHZhciBuID0gdygnPHNlbGVjdC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5kcm9wRG93bikKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pdGFsaWMpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhELmNsYXNzZXMuc2VsZWN0KQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHQuZG9tLnZhbHVlVGl0bGUpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3KHRoaXMpLnJlbW92ZUNsYXNzKEQuY2xhc3Nlcy5pdGFsaWMpLCBpKHQsIHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzID0gKHQuYy5ncmV5c2NhbGUgJiYgbi5hZGRDbGFzcyhELmNsYXNzZXMuZ3JleXNjYWxlKSwgW10pLAogICAgICAgICAgICAgICAgICAgIG8gPSAwLAogICAgICAgICAgICAgICAgICAgIHIgPSB0LnMuc2VydmVyRGF0YVt0LnMub3JpZ0RhdGFdOwogICAgICAgICAgICAgICAgbyA8IHIubGVuZ3RoOwogICAgICAgICAgICAgICAgbysrCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdmFyIGEgPSByW29dLAogICAgICAgICAgICAgICAgICAgIGQgPSBhLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIGEgPSBhLmxhYmVsOwogICAgICAgICAgICAgICAgdC5zLnR5cGUuaW5jbHVkZXMoJ2h0bWwnKSAmJiBudWxsICE9PSBkICYmICdzdHJpbmcnID09IHR5cGVvZiBkICYmIGQucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICcnKSwKICAgICAgICAgICAgICAgICAgICAoZCA9IHcoJzxvcHRpb24+JywgeyB0eXBlOiBBcnJheS5pc0FycmF5KGQpID8gJ0FycmF5JyA6ICdTdHJpbmcnLCB2YWx1ZTogZCB9KQogICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgnc2J2JywgZCkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKHQuY2xhc3Nlcy5vcHRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh0LmNsYXNzZXMubm90SXRhbGljKQogICAgICAgICAgICAgICAgICAgICAgICAuaHRtbCgnc3RyaW5nJyA9PSB0eXBlb2YgYSA/IGEucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICcnKSA6IGEpKSwKICAgICAgICAgICAgICAgICAgICBzLnB1c2goZCksCiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gZSAmJgogICAgICAgICAgICAgICAgICAgICAgICBkLnZhbCgpID09PSBlWzBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChkLnByb3AoJ3NlbGVjdGVkJywgITApLCBuLnJlbW92ZUNsYXNzKEQuY2xhc3Nlcy5pdGFsaWMpLCB0LmRvbS52YWx1ZVRpdGxlLnJlbW92ZVByb3AoJ3NlbGVjdGVkJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwLCB1ID0gczsgbCA8IHUubGVuZ3RoOyBsKyspIG4uYXBwZW5kKHVbbF0pOwogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9KSwKICAgICAgICAoRC5pbml0U2VsZWN0QXJyYXkgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICByZXR1cm4gRC5pbml0U2VsZWN0KHQsIGksIChlID0gdm9pZCAwID09PSBlID8gbnVsbCA6IGUpLCAhMCk7CiAgICAgICAgfSksCiAgICAgICAgKEQuaW5pdElucHV0ID0gZnVuY3Rpb24gKGksIGUsIHQpIHsKICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gbnVsbCk7CiAgICAgICAgICAgIHZhciBuID0gaS5zLmR0LnNldHRpbmdzKClbMF0uc2VhcmNoRGVsYXksCiAgICAgICAgICAgICAgICBuID0gdygnPGlucHV0Lz4nKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhELmNsYXNzZXMudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pbnB1dCkKICAgICAgICAgICAgICAgICAgICAub24oCiAgICAgICAgICAgICAgICAgICAgICAgICdpbnB1dC5kdHNiIGtleXByZXNzLmR0c2InLAogICAgICAgICAgICAgICAgICAgICAgICBpLl90aHJvdHRsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQua2V5Q29kZSB8fCB0LndoaWNoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKGksIHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IG4gPyAxMDAgOiBuLAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBpLmMuZ3JleXNjYWxlICYmIG4uYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSksCiAgICAgICAgICAgICAgICBudWxsICE9PSB0ICYmIG4udmFsKHRbMF0pLAogICAgICAgICAgICAgICAgaS5zLmR0Lm9uZSgnZHJhdy5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGkucy50b3BHcm91cC50cmlnZ2VyKCdkdHNiLXJlZHJhd0xvZ2ljJyk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICAoRC5pbml0MklucHV0ID0gZnVuY3Rpb24gKGksIGUsIHQpIHsKICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gbnVsbCk7CiAgICAgICAgICAgIHZhciBuID0gaS5zLmR0LnNldHRpbmdzKClbMF0uc2VhcmNoRGVsYXksCiAgICAgICAgICAgICAgICBuID0gWwogICAgICAgICAgICAgICAgICAgIHcoJzxpbnB1dC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pbnB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lucHV0LmR0c2Iga2V5cHJlc3MuZHRzYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLl90aHJvdHRsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5rZXlDb2RlIHx8IHQud2hpY2g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKGksIHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gbiA/IDEwMCA6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHcoJzxzcGFuPicpLmFkZENsYXNzKGkuY2xhc3Nlcy5qb2luZXIpLmh0bWwoaS5zLmR0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIudmFsdWVKb2luZXInLCBpLmMuaTE4bi52YWx1ZUpvaW5lcikpLAogICAgICAgICAgICAgICAgICAgIHcoJzxpbnB1dC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pbnB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lucHV0LmR0c2Iga2V5cHJlc3MuZHRzYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLl90aHJvdHRsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5rZXlDb2RlIHx8IHQud2hpY2g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKGksIHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gbiA/IDEwMCA6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIGkuYy5ncmV5c2NhbGUgJiYgKG5bMF0uYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSksIG5bMl0uYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSkpLAogICAgICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiAoblswXS52YWwodFswXSksIG5bMl0udmFsKHRbMV0pKSwKICAgICAgICAgICAgICAgIGkucy5kdC5vbmUoJ2RyYXcuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpLnMudG9wR3JvdXAudHJpZ2dlcignZHRzYi1yZWRyYXdMb2dpYycpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKEQuaW5pdERhdGUgPSBmdW5jdGlvbiAoZSwgbiwgdCkgewogICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKTsKICAgICAgICAgICAgdmFyIHMgPSBlLnMuZHQuc2V0dGluZ3MoKVswXS5zZWFyY2hEZWxheSwKICAgICAgICAgICAgICAgIGkgPSBlLnMuZHQuaTE4bignZGF0ZXRpbWUnLCB7fSksCiAgICAgICAgICAgICAgICBpID0gdygnPGlucHV0Lz4nKQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhELmNsYXNzZXMudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pbnB1dCkKICAgICAgICAgICAgICAgICAgICAuZHREYXRlVGltZSh7IGF0dGFjaFRvOiAnaW5wdXQnLCBmb3JtYXQ6IGUucy5kYXRlRm9ybWF0IHx8IHZvaWQgMCwgaTE4bjogaSB9KQogICAgICAgICAgICAgICAgICAgIC5vbigKICAgICAgICAgICAgICAgICAgICAgICAgJ2NoYW5nZS5kdHNiJywKICAgICAgICAgICAgICAgICAgICAgICAgZS5fdGhyb3R0bGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oZSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gcyA/IDEwMCA6IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIC5vbignaW5wdXQuZHRzYiBrZXlwcmVzcy5kdHNiJywgZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5fdGhyb3R0bGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBpLmtleUNvZGUgfHwgaS53aGljaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlLCB0aGlzLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSBzID8gMTAwIDogcywKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIGUuYy5ncmV5c2NhbGUgJiYgaS5hZGRDbGFzcyhELmNsYXNzZXMuZ3JleXNjYWxlKSwKICAgICAgICAgICAgICAgIG51bGwgIT09IHQgJiYgaS52YWwodFswXSksCiAgICAgICAgICAgICAgICBlLnMuZHQub25lKCdkcmF3LmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zLnRvcEdyb3VwLnRyaWdnZXIoJ2R0c2ItcmVkcmF3TG9naWMnKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgaQogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIChELmluaXROb1ZhbHVlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHQucy5kdC5vbmUoJ2RyYXcuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0LnMudG9wR3JvdXAudHJpZ2dlcignZHRzYi1yZWRyYXdMb2dpYycpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBbXQogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIChELmluaXQyRGF0ZSA9IGZ1bmN0aW9uIChlLCBuLCB0KSB7CiAgICAgICAgICAgIHZhciBpID0gdGhpcywKICAgICAgICAgICAgICAgIHMgPSAodm9pZCAwID09PSB0ICYmICh0ID0gbnVsbCksIGUucy5kdC5zZXR0aW5ncygpWzBdLnNlYXJjaERlbGF5KSwKICAgICAgICAgICAgICAgIG8gPSBlLnMuZHQuaTE4bignZGF0ZXRpbWUnLCB7fSksCiAgICAgICAgICAgICAgICBvID0gWwogICAgICAgICAgICAgICAgICAgIHcoJzxpbnB1dC8+JykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKEQuY2xhc3Nlcy5pbnB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgLmR0RGF0ZVRpbWUoeyBhdHRhY2hUbzogJ2lucHV0JywgZm9ybWF0OiBlLnMuZGF0ZUZvcm1hdCB8fCB2b2lkIDAsIGkxOG46IG8gfSkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NoYW5nZS5kdHNiJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEIudXRpbC50aHJvdHRsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4oZSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oZSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignaW5wdXQuZHRzYiBrZXlwcmVzcy5kdHNiJywgZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEIudXRpbC50aHJvdHRsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gaS5rZXlDb2RlIHx8IGkud2hpY2g7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuKGUsIHRoaXMsIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gcyA/IDAgOiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdygnPHNwYW4+JykuYWRkQ2xhc3MoZS5jbGFzc2VzLmpvaW5lcikuaHRtbChlLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci52YWx1ZUpvaW5lcicsIGUuYy5pMThuLnZhbHVlSm9pbmVyKSksCiAgICAgICAgICAgICAgICAgICAgdygnPGlucHV0Lz4nKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoRC5jbGFzc2VzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoRC5jbGFzc2VzLmlucHV0KQogICAgICAgICAgICAgICAgICAgICAgICAuZHREYXRlVGltZSh7IGF0dGFjaFRvOiAnaW5wdXQnLCBmb3JtYXQ6IGUucy5kYXRlRm9ybWF0IHx8IHZvaWQgMCwgaTE4bjogbyB9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hhbmdlLmR0c2InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gQi51dGlsLnRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbihlLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lucHV0LmR0c2Iga2V5cHJlc3MuZHRzYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmMuZW50ZXJTZWFyY2ggfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAwICE9PSBlLnMuZHQuc2V0dGluZ3MoKVswXS5vSW5pdC5zZWFyY2ggJiYgZS5zLmR0LnNldHRpbmdzKClbMF0ub0luaXQuc2VhcmNoLnJldHVybikgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSBzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LmtleUNvZGUgfHwgdC53aGljaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGUsIGksIHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogQi51dGlsLnRocm90dGxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihlLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHMpLAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIGUuYy5ncmV5c2NhbGUgJiYgKG9bMF0uYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSksIG9bMl0uYWRkQ2xhc3MoRC5jbGFzc2VzLmdyZXlzY2FsZSkpLAogICAgICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiAwIDwgdC5sZW5ndGggJiYgKG9bMF0udmFsKHRbMF0pLCBvWzJdLnZhbCh0WzFdKSksCiAgICAgICAgICAgICAgICBlLnMuZHQub25lKCdkcmF3LmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zLnRvcEdyb3VwLnRyaWdnZXIoJ2R0c2ItcmVkcmF3TG9naWMnKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgbwogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIChELmlzSW5wdXRWYWxpZFNlbGVjdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAhMCwgZSA9IDAsIG4gPSB0OyBlIDwgbi5sZW5ndGg7IGUrKykgewogICAgICAgICAgICAgICAgdmFyIHMgPSBuW2VdOwogICAgICAgICAgICAgICAgcy5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykubGVuZ3RoID09PSBzLmNoaWxkcmVuKCdvcHRpb24nKS5sZW5ndGggLSBzLmNoaWxkcmVuKCdvcHRpb24uJyArIEQuY2xhc3Nlcy5ub3RJdGFsaWMpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgIDEgPT09IHMuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgIHMuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpWzBdID09PSBzLmNoaWxkcmVuKCdvcHRpb24nKVswXSAmJgogICAgICAgICAgICAgICAgICAgIChpID0gITEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0pLAogICAgICAgIChELmlzSW5wdXRWYWxpZElucHV0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9ICEwLCBlID0gMCwgbiA9IHQ7IGUgPCBuLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IG5bZV07CiAgICAgICAgICAgICAgICBzLmlzKCdpbnB1dCcpICYmIDAgPT09IHMudmFsKCkubGVuZ3RoICYmIChpID0gITEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0pLAogICAgICAgIChELmlucHV0VmFsdWVTZWxlY3QgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gW10sIGUgPSAwLCBuID0gdDsgZSA8IG4ubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgICAgIHZhciBzID0gbltlXTsKICAgICAgICAgICAgICAgIHMuaXMoJ3NlbGVjdCcpICYmIGkucHVzaChELl9lc2NhcGVIVE1MKHMuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ3NidicpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgfSksCiAgICAgICAgKEQuaW5wdXRWYWx1ZUlucHV0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IFtdLCBlID0gMCwgbiA9IHQ7IGUgPCBuLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IG5bZV07CiAgICAgICAgICAgICAgICBzLmlzKCdpbnB1dCcpICYmIGkucHVzaChELl9lc2NhcGVIVE1MKHMudmFsKCkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaS5tYXAoYy51dGlsLmRpYWNyaXRpY3MpOwogICAgICAgIH0pLAogICAgICAgIChELnVwZGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSB0LnMuY29uZGl0aW9uc1t0LnMuY29uZGl0aW9uXTsKICAgICAgICAgICAgaWYgKCgodC5zLmZpbGxlZCA9IG4uaXNJbnB1dFZhbGlkKHQuZG9tLnZhbHVlLCB0KSksICh0LnMudmFsdWUgPSBuLmlucHV0VmFsdWUodC5kb20udmFsdWUsIHQpKSwgdC5zLmZpbGxlZCkpIHsKICAgICAgICAgICAgICAgIGZvciAoQXJyYXkuaXNBcnJheSh0LnMudmFsdWUpIHx8ICh0LnMudmFsdWUgPSBbdC5zLnZhbHVlXSksIHIgPSAwOyByIDwgdC5zLnZhbHVlLmxlbmd0aDsgcisrKQogICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodC5zLnZhbHVlW3JdKSAmJiB0LnMudmFsdWVbcl0uc29ydCgpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IG51bGwsIG8gPSBudWxsLCByID0gMDsgciA8IHQuZG9tLnZhbHVlLmxlbmd0aDsgcisrKQogICAgICAgICAgICAgICAgICAgIGkgPT09IHQuZG9tLnZhbHVlW3JdWzBdICYmICgocyA9IHIpLCB2b2lkIDAgIT09IGkuc2VsZWN0aW9uU3RhcnQpICYmIChvID0gaS5zZWxlY3Rpb25TdGFydCk7CiAgICAgICAgICAgICAgICAoKHQuYy5lbnRlclNlYXJjaCB8fCAodm9pZCAwICE9PSB0LnMuZHQuc2V0dGluZ3MoKVswXS5vSW5pdC5zZWFyY2ggJiYgdC5zLmR0LnNldHRpbmdzKClbMF0ub0luaXQuc2VhcmNoLnJldHVybikpICYmCiAgICAgICAgICAgICAgICAgICAgMTMgIT09IGUpIHx8CiAgICAgICAgICAgICAgICAgICAgdC5kb1NlYXJjaCgpLAogICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKHQuZG9tLnZhbHVlW3NdLnJlbW92ZUNsYXNzKHQuY2xhc3Nlcy5pdGFsaWMpLCB0LmRvbS52YWx1ZVtzXS5mb2N1cygpLCBudWxsICE9PSBvKSAmJgogICAgICAgICAgICAgICAgICAgICAgICB0LmRvbS52YWx1ZVtzXVswXS5zZXRTZWxlY3Rpb25SYW5nZShvLCBvKTsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAoKHQuYy5lbnRlclNlYXJjaCB8fCAodm9pZCAwICE9PSB0LnMuZHQuc2V0dGluZ3MoKVswXS5vSW5pdC5zZWFyY2ggJiYgdC5zLmR0LnNldHRpbmdzKClbMF0ub0luaXQuc2VhcmNoLnJldHVybikpICYmCiAgICAgICAgICAgICAgICAgICAgMTMgIT09IGUpIHx8CiAgICAgICAgICAgICAgICAgICAgdC5kb1NlYXJjaCgpOwogICAgICAgIH0pLAogICAgICAgIChELmRhdGVDb25kaXRpb25zID0gewogICAgICAgICAgICAnPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUuZXF1YWxzJywgaS5jb25kaXRpb25zLmRhdGUuZXF1YWxzKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXREYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdC5yZXBsYWNlKC8oXC98LXwsKS9nLCAnLScpKSA9PT0gaVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUubm90JywgaS5jb25kaXRpb25zLmRhdGUubm90KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXREYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdC5yZXBsYWNlKC8oXC98LXwsKS9nLCAnLScpKSAhPT0gaVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc8JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5iZWZvcmUnLCBpLmNvbmRpdGlvbnMuZGF0ZS5iZWZvcmUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdERhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSB0LnJlcGxhY2UoLyhcL3wtfCwpL2csICctJykpIDwgaVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc+JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5hZnRlcicsIGkuY29uZGl0aW9ucy5kYXRlLmFmdGVyKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXREYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdC5yZXBsYWNlKC8oXC98LXwsKS9nLCAnLScpKSA+IGlbMF07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBiZXR3ZWVuOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLmJldHdlZW4nLCBpLmNvbmRpdGlvbnMuZGF0ZS5iZXR3ZWVuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXQyRGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQucmVwbGFjZSgvKFwvfC18LCkvZywgJy0nKSksIGlbMF0gPCBpWzFdID8gaVswXSA8PSB0ICYmIHQgPD0gaVsxXSA6IGlbMV0gPD0gdCAmJiB0IDw9IGlbMF07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIWJldHdlZW4nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLm5vdEJldHdlZW4nLCBpLmNvbmRpdGlvbnMuZGF0ZS5ub3RCZXR3ZWVuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXQyRGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IHQucmVwbGFjZSgvKFwvfC18LCkvZywgJy0nKSksIGlbMF0gPCBpWzFdID8gIShpWzBdIDw9IHQgJiYgdCA8PSBpWzFdKSA6ICEoaVsxXSA8PSB0ICYmIHQgPD0gaVswXSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBudWxsOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLmVtcHR5JywgaS5jb25kaXRpb25zLmRhdGUuZW1wdHkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdE5vVmFsdWUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBmdW5jdGlvbiAoKSB7fSwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCB8fCAwID09PSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchbnVsbCc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUubm90RW1wdHknLCBpLmNvbmRpdGlvbnMuZGF0ZS5ub3RFbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShudWxsID09IHQgfHwgMCA9PT0gdC5sZW5ndGgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAoRC5tb21lbnREYXRlQ29uZGl0aW9ucyA9IHsKICAgICAgICAgICAgJz0nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLmVxdWFscycsIGkuY29uZGl0aW9ucy5kYXRlLmVxdWFscyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0RGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvKCkodCwgZS5zLmRhdGVGb3JtYXQpLnZhbHVlT2YoKSA9PT0gbygpKGlbMF0sIGUucy5kYXRlRm9ybWF0KS52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIT0nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLm5vdCcsIGkuY29uZGl0aW9ucy5kYXRlLm5vdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0RGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvKCkodCwgZS5zLmRhdGVGb3JtYXQpLnZhbHVlT2YoKSAhPT0gbygpKGlbMF0sIGUucy5kYXRlRm9ybWF0KS52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnPCc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUuYmVmb3JlJywgaS5jb25kaXRpb25zLmRhdGUuYmVmb3JlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXREYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8oKSh0LCBlLnMuZGF0ZUZvcm1hdCkudmFsdWVPZigpIDwgbygpKGlbMF0sIGUucy5kYXRlRm9ybWF0KS52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnPic6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUuYWZ0ZXInLCBpLmNvbmRpdGlvbnMuZGF0ZS5hZnRlcik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0RGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvKCkodCwgZS5zLmRhdGVGb3JtYXQpLnZhbHVlT2YoKSA+IG8oKShpWzBdLCBlLnMuZGF0ZUZvcm1hdCkudmFsdWVPZigpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmV0d2VlbjogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5iZXR3ZWVuJywgaS5jb25kaXRpb25zLmRhdGUuYmV0d2Vlbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0MkRhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG8oKSh0LCBlLnMuZGF0ZUZvcm1hdCkudmFsdWVPZigpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gbygpKGlbMF0sIGUucy5kYXRlRm9ybWF0KS52YWx1ZU9mKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBvKCkoaVsxXSwgZS5zLmRhdGVGb3JtYXQpLnZhbHVlT2YoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA8IGkgPyBuIDw9IHQgJiYgdCA8PSBpIDogaSA8PSB0ICYmIHQgPD0gbjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchYmV0d2Vlbic6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUubm90QmV0d2VlbicsIGkuY29uZGl0aW9ucy5kYXRlLm5vdEJldHdlZW4pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdDJEYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBvKCkodCwgZS5zLmRhdGVGb3JtYXQpLnZhbHVlT2YoKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG8oKShpWzBdLCBlLnMuZGF0ZUZvcm1hdCkudmFsdWVPZigpLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gbygpKGlbMV0sIGUucy5kYXRlRm9ybWF0KS52YWx1ZU9mKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPCBpID8gISgrbiA8PSArdCAmJiArdCA8PSAraSkgOiAhKCtpIDw9ICt0ICYmICt0IDw9ICtuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG51bGw6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUuZW1wdHknLCBpLmNvbmRpdGlvbnMuZGF0ZS5lbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8IDAgPT09IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJyFudWxsJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5ub3RFbXB0eScsIGkuY29uZGl0aW9ucy5kYXRlLm5vdEVtcHR5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXROb1ZhbHVlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG51bGwgPT0gdCB8fCAwID09PSB0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIChELmx1eG9uRGF0ZUNvbmRpdGlvbnMgPSB7CiAgICAgICAgICAgICc9JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5lcXVhbHMnLCBpLmNvbmRpdGlvbnMuZGF0ZS5lcXVhbHMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdERhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcigpLkRhdGVUaW1lLmZyb21Gb3JtYXQodCwgZS5zLmRhdGVGb3JtYXQpLnRzID09PSByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdChpWzBdLCBlLnMuZGF0ZUZvcm1hdCkudHM7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIT0nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLm5vdCcsIGkuY29uZGl0aW9ucy5kYXRlLm5vdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0RGF0ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdCh0LCBlLnMuZGF0ZUZvcm1hdCkudHMgIT09IHIoKS5EYXRlVGltZS5mcm9tRm9ybWF0KGlbMF0sIGUucy5kYXRlRm9ybWF0KS50czsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc8JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5iZWZvcmUnLCBpLmNvbmRpdGlvbnMuZGF0ZS5iZWZvcmUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdERhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcigpLkRhdGVUaW1lLmZyb21Gb3JtYXQodCwgZS5zLmRhdGVGb3JtYXQpLnRzIDwgcigpLkRhdGVUaW1lLmZyb21Gb3JtYXQoaVswXSwgZS5zLmRhdGVGb3JtYXQpLnRzOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJz4nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5kYXRlLmFmdGVyJywgaS5jb25kaXRpb25zLmRhdGUuYWZ0ZXIpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdERhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcigpLkRhdGVUaW1lLmZyb21Gb3JtYXQodCwgZS5zLmRhdGVGb3JtYXQpLnRzID4gcigpLkRhdGVUaW1lLmZyb21Gb3JtYXQoaVswXSwgZS5zLmRhdGVGb3JtYXQpLnRzOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmV0d2VlbjogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5iZXR3ZWVuJywgaS5jb25kaXRpb25zLmRhdGUuYmV0d2Vlbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0MkRhdGUsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHIoKS5EYXRlVGltZS5mcm9tRm9ybWF0KHQsIGUucy5kYXRlRm9ybWF0KS50cywKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHIoKS5EYXRlVGltZS5mcm9tRm9ybWF0KGlbMF0sIGUucy5kYXRlRm9ybWF0KS50cywKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHIoKS5EYXRlVGltZS5mcm9tRm9ybWF0KGlbMV0sIGUucy5kYXRlRm9ybWF0KS50czsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA8IGkgPyBuIDw9IHQgJiYgdCA8PSBpIDogaSA8PSB0ICYmIHQgPD0gbjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchYmV0d2Vlbic6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUubm90QmV0d2VlbicsIGkuY29uZGl0aW9ucy5kYXRlLm5vdEJldHdlZW4pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdDJEYXRlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdCh0LCBlLnMuZGF0ZUZvcm1hdCkudHMsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdChpWzBdLCBlLnMuZGF0ZUZvcm1hdCkudHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByKCkuRGF0ZVRpbWUuZnJvbUZvcm1hdChpWzFdLCBlLnMuZGF0ZUZvcm1hdCkudHM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPCBpID8gISgrbiA8PSArdCAmJiArdCA8PSAraSkgOiAhKCtpIDw9ICt0ICYmICt0IDw9ICtuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG51bGw6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmRhdGUuZW1wdHknLCBpLmNvbmRpdGlvbnMuZGF0ZS5lbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8IDAgPT09IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJyFudWxsJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuZGF0ZS5ub3RFbXB0eScsIGkuY29uZGl0aW9ucy5kYXRlLm5vdEVtcHR5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXROb1ZhbHVlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG51bGwgPT0gdCB8fCAwID09PSB0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIChELm51bUNvbmRpdGlvbnMgPSB7CiAgICAgICAgICAgICc9JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmVxdWFscycsIGkuY29uZGl0aW9ucy5udW1iZXIuZXF1YWxzKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXRTZWxlY3QsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVTZWxlY3QsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkU2VsZWN0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiArdCA9PSAraVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5ub3QnLCBpLmNvbmRpdGlvbnMubnVtYmVyLm5vdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlU2VsZWN0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gK3QgIT0gK2lbMF07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnPCc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5sdCcsIGkuY29uZGl0aW9ucy5udW1iZXIubHQpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdElucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICt0IDwgK2lbMF07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnPD0nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5udW1iZXIubHRlJywgaS5jb25kaXRpb25zLm51bWJlci5sdGUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdElucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICt0IDw9ICtpWzBdOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJz49JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmd0ZScsIGkuY29uZGl0aW9ucy5udW1iZXIuZ3RlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXRJbnB1dCwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiArdCA+PSAraVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc+JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmd0JywgaS5jb25kaXRpb25zLm51bWJlci5ndCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gK3QgPiAraVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJldHdlZW46IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5iZXR3ZWVuJywgaS5jb25kaXRpb25zLm51bWJlci5iZXR3ZWVuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXQySW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gK2lbMF0gPCAraVsxXSA/ICtpWzBdIDw9ICt0ICYmICt0IDw9ICtpWzFdIDogK2lbMV0gPD0gK3QgJiYgK3QgPD0gK2lbMF07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIWJldHdlZW4nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5udW1iZXIubm90QmV0d2VlbicsIGkuY29uZGl0aW9ucy5udW1iZXIubm90QmV0d2Vlbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0MklucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtpWzBdIDwgK2lbMV0gPyAhKCtpWzBdIDw9ICt0ICYmICt0IDw9ICtpWzFdKSA6ICEoK2lbMV0gPD0gK3QgJiYgK3QgPD0gK2lbMF0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbnVsbDogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmVtcHR5JywgaS5jb25kaXRpb25zLm51bWJlci5lbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8IDAgPT09IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJyFudWxsJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLm5vdEVtcHR5JywgaS5jb25kaXRpb25zLm51bWJlci5ub3RFbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShudWxsID09IHQgfHwgMCA9PT0gdC5sZW5ndGgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAoRC5udW1GbXRDb25kaXRpb25zID0gewogICAgICAgICAgICAnPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5lcXVhbHMnLCBpLmNvbmRpdGlvbnMubnVtYmVyLmVxdWFscyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlU2VsZWN0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wYXJzZU51bWJlcih0KSA9PT0gZS5wYXJzZU51bWJlcihpWzBdKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5ub3QnLCBpLmNvbmRpdGlvbnMubnVtYmVyLm5vdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlU2VsZWN0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wYXJzZU51bWJlcih0KSAhPT0gZS5wYXJzZU51bWJlcihpWzBdKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc8JzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmx0JywgaS5jb25kaXRpb25zLm51bWJlci5sdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wYXJzZU51bWJlcih0KSA8IGUucGFyc2VOdW1iZXIoaVswXSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnPD0nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5udW1iZXIubHRlJywgaS5jb25kaXRpb25zLm51bWJlci5sdGUpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdElucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucGFyc2VOdW1iZXIodCkgPD0gZS5wYXJzZU51bWJlcihpWzBdKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICc+PSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5ndGUnLCBpLmNvbmRpdGlvbnMubnVtYmVyLmd0ZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wYXJzZU51bWJlcih0KSA+PSBlLnBhcnNlTnVtYmVyKGlbMF0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJz4nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5udW1iZXIuZ3QnLCBpLmNvbmRpdGlvbnMubnVtYmVyLmd0KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXRJbnB1dCwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnBhcnNlTnVtYmVyKHQpID4gZS5wYXJzZU51bWJlcihpWzBdKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJldHdlZW46IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLm51bWJlci5iZXR3ZWVuJywgaS5jb25kaXRpb25zLm51bWJlci5iZXR3ZWVuKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXQySW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucGFyc2VOdW1iZXIodCksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnBhcnNlTnVtYmVyKGlbMF0pLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5wYXJzZU51bWJlcihpWzFdKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gK24gPCArZSA/ICtuIDw9ICt0ICYmICt0IDw9ICtlIDogK2UgPD0gK3QgJiYgK3QgPD0gK247CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIWJldHdlZW4nOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5udW1iZXIubm90QmV0d2VlbicsIGkuY29uZGl0aW9ucy5udW1iZXIubm90QmV0d2Vlbik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0MklucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnBhcnNlTnVtYmVyKHQpLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5wYXJzZU51bWJlcihpWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUucGFyc2VOdW1iZXIoaVsxXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtuIDwgK2UgPyAhKCtuIDw9ICt0ICYmICt0IDw9ICtlKSA6ICEoK2UgPD0gK3QgJiYgK3QgPD0gK24pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbnVsbDogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLmVtcHR5JywgaS5jb25kaXRpb25zLm51bWJlci5lbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8IDAgPT09IHQubGVuZ3RoOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJyFudWxsJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMubnVtYmVyLm5vdEVtcHR5JywgaS5jb25kaXRpb25zLm51bWJlci5ub3RFbXB0eSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0Tm9WYWx1ZSwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShudWxsID09IHQgfHwgMCA9PT0gdC5sZW5ndGgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9KSwKICAgICAgICAoRC5zdHJpbmdDb25kaXRpb25zID0gewogICAgICAgICAgICAnPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLnN0cmluZy5lcXVhbHMnLCBpLmNvbmRpdGlvbnMuc3RyaW5nLmVxdWFscyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlU2VsZWN0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gaVswXTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchPSc6IHsKICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLnN0cmluZy5ub3QnLCBpLmNvbmRpdGlvbnMuc3RyaW5nLm5vdCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlU2VsZWN0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ICE9PSBpWzBdOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RhcnRzOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5zdHJpbmcuc3RhcnRzV2l0aCcsIGkuY29uZGl0aW9ucy5zdHJpbmcuc3RhcnRzV2l0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaVswXS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICchc3RhcnRzJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuc3RyaW5nLm5vdFN0YXJ0c1dpdGgnLCBpLmNvbmRpdGlvbnMuc3RyaW5nLm5vdFN0YXJ0c1dpdGgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdElucHV0LAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogRC5pbnB1dFZhbHVlSW5wdXQsCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IEQuaXNJbnB1dFZhbGlkSW5wdXQsCiAgICAgICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgIT09IHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGlbMF0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBjb250YWluczogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuc3RyaW5nLmNvbnRhaW5zJywgaS5jb25kaXRpb25zLnN0cmluZy5jb250YWlucyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlbMF0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIWNvbnRhaW5zJzogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuc3RyaW5nLm5vdENvbnRhaW5zJywgaS5jb25kaXRpb25zLnN0cmluZy5ub3RDb250YWlucyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpWzBdLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW5kczogewogICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuc3RyaW5nLmVuZHNXaXRoJywgaS5jb25kaXRpb25zLnN0cmluZy5lbmRzV2l0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogRC5pbml0SW5wdXQsCiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVJbnB1dCwKICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRJbnB1dCwKICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKGlbMF0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIWVuZHMnOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5zdHJpbmcubm90RW5kc1dpdGgnLCBpLmNvbmRpdGlvbnMuc3RyaW5nLm5vdEVuZHNXaXRoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXRJbnB1dCwKICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZUlucHV0LAogICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZElucHV0LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhdC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKGlbMF0udG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBudWxsOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5zdHJpbmcuZW1wdHknLCBpLmNvbmRpdGlvbnMuc3RyaW5nLmVtcHR5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXROb1ZhbHVlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgfHwgMCA9PT0gdC5sZW5ndGg7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAnIW51bGwnOiB7CiAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5zdHJpbmcubm90RW1wdHknLCBpLmNvbmRpdGlvbnMuc3RyaW5nLm5vdEVtcHR5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBELmluaXROb1ZhbHVlLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG51bGwgPT0gdCB8fCAwID09PSB0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIChELmRlZmF1bHRzID0gewogICAgICAgICAgICBjb2x1bW5zOiAhMCwKICAgICAgICAgICAgY29uZGl0aW9uczogewogICAgICAgICAgICAgICAgYXJyYXk6IChELmFycmF5Q29uZGl0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgICBjb250YWluczogewogICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25OYW1lOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaTE4bignc2VhcmNoQnVpbGRlci5jb25kaXRpb25zLmFycmF5LmNvbnRhaW5zJywgaS5jb25kaXRpb25zLmFycmF5LmNvbnRhaW5zKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0QXJyYXksCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZVNlbGVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVkZXMoaVswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB3aXRob3V0OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbk5hbWU6IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pMThuKCdzZWFyY2hCdWlsZGVyLmNvbmRpdGlvbnMuYXJyYXkud2l0aG91dCcsIGkuY29uZGl0aW9ucy5hcnJheS53aXRob3V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0QXJyYXksCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IEQuaW5wdXRWYWx1ZVNlbGVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnB1dFZhbGlkOiBELmlzSW5wdXRWYWxpZFNlbGVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xID09PSB0LmluZGV4T2YoaVswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAnPSc6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5hcnJheS5lcXVhbHMnLCBpLmNvbmRpdGlvbnMuYXJyYXkuZXF1YWxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVTZWxlY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRTZWxlY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gaVswXS5sZW5ndGgpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgaWYgKHRbZV0gIT09IGlbMF1bZV0pIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICchPSc6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5hcnJheS5ub3QnLCBpLmNvbmRpdGlvbnMuYXJyYXkubm90KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogRC5pbml0U2VsZWN0LAogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBELmlucHV0VmFsdWVTZWxlY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5wdXRWYWxpZDogRC5pc0lucHV0VmFsaWRTZWxlY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAhPT0gaVswXS5sZW5ndGgpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgaWYgKHRbZV0gIT09IGlbMF1bZV0pIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG51bGw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5hcnJheS5lbXB0eScsIGkuY29uZGl0aW9ucy5hcnJheS5lbXB0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdE5vVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdCB8fCAwID09PSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICchbnVsbCc6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uTmFtZTogZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIuY29uZGl0aW9ucy5hcnJheS5ub3RFbXB0eScsIGkuY29uZGl0aW9ucy5hcnJheS5ub3RFbXB0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IEQuaW5pdE5vVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWU6IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgICAgICAgICBpc0lucHV0VmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdCAmJiAwICE9PSB0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBkYXRlOiBELmRhdGVDb25kaXRpb25zLAogICAgICAgICAgICAgICAgaHRtbDogRC5zdHJpbmdDb25kaXRpb25zLAogICAgICAgICAgICAgICAgJ2h0bWwtbnVtJzogRC5udW1Db25kaXRpb25zLAogICAgICAgICAgICAgICAgJ2h0bWwtbnVtLWZtdCc6IEQubnVtRm10Q29uZGl0aW9ucywKICAgICAgICAgICAgICAgIGx1eG9uOiBELmx1eG9uRGF0ZUNvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICBtb21lbnQ6IEQubW9tZW50RGF0ZUNvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICBudW06IEQubnVtQ29uZGl0aW9ucywKICAgICAgICAgICAgICAgICdudW0tZm10JzogRC5udW1GbXRDb25kaXRpb25zLAogICAgICAgICAgICAgICAgc3RyaW5nOiBELnN0cmluZ0NvbmRpdGlvbnMsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlcHRoTGltaXQ6ICExLAogICAgICAgICAgICBlbnRlclNlYXJjaDogITEsCiAgICAgICAgICAgIGZpbHRlckNoYW5nZWQ6IHZvaWQgMCwKICAgICAgICAgICAgZ3JleXNjYWxlOiAhMSwKICAgICAgICAgICAgaTE4bjogewogICAgICAgICAgICAgICAgYWRkOiAnQWRkIENvbmRpdGlvbicsCiAgICAgICAgICAgICAgICBidXR0b246IHsgMDogJ1NlYXJjaCBCdWlsZGVyJywgXzogJ1NlYXJjaCBCdWlsZGVyICglZCknIH0sCiAgICAgICAgICAgICAgICBjbGVhckFsbDogJ0NsZWFyIEFsbCcsCiAgICAgICAgICAgICAgICBjb25kaXRpb246ICdDb25kaXRpb24nLAogICAgICAgICAgICAgICAgZGF0YTogJ0RhdGEnLAogICAgICAgICAgICAgICAgZGVsZXRlOiAnJnRpbWVzJywKICAgICAgICAgICAgICAgIGRlbGV0ZVRpdGxlOiAnRGVsZXRlIGZpbHRlcmluZyBydWxlJywKICAgICAgICAgICAgICAgIGxlZnQ6ICc8JywKICAgICAgICAgICAgICAgIGxlZnRUaXRsZTogJ091dGRlbnQgY3JpdGVyaWEnLAogICAgICAgICAgICAgICAgbG9naWNBbmQ6ICdBbmQnLAogICAgICAgICAgICAgICAgbG9naWNPcjogJ09yJywKICAgICAgICAgICAgICAgIHJpZ2h0OiAnPicsCiAgICAgICAgICAgICAgICByaWdodFRpdGxlOiAnSW5kZW50IGNyaXRlcmlhJywKICAgICAgICAgICAgICAgIHNlYXJjaDogJ1NlYXJjaCcsCiAgICAgICAgICAgICAgICB0aXRsZTogeyAwOiAnQ3VzdG9tIFNlYXJjaCBCdWlsZGVyJywgXzogJ0N1c3RvbSBTZWFyY2ggQnVpbGRlciAoJWQpJyB9LAogICAgICAgICAgICAgICAgdmFsdWU6ICdWYWx1ZScsCiAgICAgICAgICAgICAgICB2YWx1ZUpvaW5lcjogJ2FuZCcsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxpdmVTZWFyY2g6ICEwLAogICAgICAgICAgICBsb2dpYzogJ0FORCcsCiAgICAgICAgICAgIG9ydGhvZ29uYWw6IHsgZGlzcGxheTogJ2Rpc3BsYXknLCBzZWFyY2g6ICdmaWx0ZXInIH0sCiAgICAgICAgICAgIHByZURlZmluZWQ6ICExLAogICAgICAgIH0pLAogICAgICAgIChkID0gRCksCiAgICAgICAgKG0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuZG9tLmFkZC5vZmYoJy5kdHNiJyksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5sb2dpYy5vZmYoJy5kdHNiJyksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5zZWFyY2gub2ZmKCcuZHRzYicpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLnRyaWdnZXIoJ2R0c2ItZGVzdHJveScpLnJlbW92ZSgpLAogICAgICAgICAgICAgICAgKHRoaXMucy5jcml0ZXJpYSA9IFtdKTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuZ2V0RGV0YWlscyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIGlmICgodm9pZCAwID09PSB0ICYmICh0ID0gITEpLCAwID09PSB0aGlzLnMuY3JpdGVyaWEubGVuZ3RoKSkgcmV0dXJuIHt9OwogICAgICAgICAgICBmb3IgKHZhciBpID0geyBjcml0ZXJpYTogW10sIGxvZ2ljOiB0aGlzLnMubG9naWMgfSwgZSA9IDAsIG4gPSB0aGlzLnMuY3JpdGVyaWE7IGUgPCBuLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IG5bZV07CiAgICAgICAgICAgICAgICBpLmNyaXRlcmlhLnB1c2gocy5jcml0ZXJpYS5nZXREZXRhaWxzKHQpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuZ2V0Tm9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tLmNvbnRhaW5lcjsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUucmVidWlsZCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICBpZiAoISh2b2lkIDAgPT09IHQuY3JpdGVyaWEgfHwgbnVsbCA9PT0gdC5jcml0ZXJpYSB8fCAoQXJyYXkuaXNBcnJheSh0LmNyaXRlcmlhKSAmJiAwID09PSB0LmNyaXRlcmlhLmxlbmd0aCkpKSB7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnMubG9naWMgPSB0LmxvZ2ljKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5sb2dpYwogICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKQogICAgICAgICAgICAgICAgICAgICAgICAuZmlyc3QoKQogICAgICAgICAgICAgICAgICAgICAgICAuaHRtbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPUicgPT09IHRoaXMucy5sb2dpYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zLmR0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIubG9naWNPcicsIHRoaXMuYy5pMThuLmxvZ2ljT3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5sb2dpY0FuZCcsIHRoaXMuYy5pMThuLmxvZ2ljQW5kKSwKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHQuY3JpdGVyaWEpKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBuID0gdC5jcml0ZXJpYTsgZSA8IG4ubGVuZ3RoOyBlKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gKGkgPSBuW2VdKS5sb2dpYyA/IHRoaXMuX2FkZFByZXZHcm91cChpKSA6IHZvaWQgMCA9PT0gaS5sb2dpYyAmJiB0aGlzLl9hZGRQcmV2Q3JpdGVyaWEoaSk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMCwgbyA9IHRoaXMucy5jcml0ZXJpYTsgcyA8IG8ubGVuZ3RoOyBzKyspCiAgICAgICAgICAgICAgICAgICAgKGkgPSBvW3NdKS5jcml0ZXJpYSBpbnN0YW5jZW9mIGQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKGkuY3JpdGVyaWEudXBkYXRlQXJyb3dzKDEgPCB0aGlzLnMuY3JpdGVyaWEubGVuZ3RoKSwgdGhpcy5fc2V0Q3JpdGVyaWFMaXN0ZW5lcnMoaS5jcml0ZXJpYSkpOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLnJlZHJhd0NvbnRlbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMucy5wcmV2ZW50UmVkcmF3KSB7CiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIuY2hpbGRyZW4oKS5kZXRhY2goKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLmxvZ2ljQ29udGFpbmVyKS5hcHBlbmQodGhpcy5kb20uYWRkKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmMubGl2ZVNlYXJjaCB8fCB0aGlzLmRvbS5jb250YWluZXIuYXBwZW5kKHRoaXMuZG9tLnNlYXJjaCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmNyaXRlcmlhLnNvcnQoZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuY3JpdGVyaWEucy5pbmRleCA8IGkuY3JpdGVyaWEucy5pbmRleCA/IC0xIDogdC5jcml0ZXJpYS5zLmluZGV4ID4gaS5jcml0ZXJpYS5zLmluZGV4ID8gMSA6IDA7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMaXN0ZW5lcnMoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5zLmNyaXRlcmlhLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWE7CiAgICAgICAgICAgICAgICAgICAgaSBpbnN0YW5jZW9mIGQKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMucy5jcml0ZXJpYVt0XS5pbmRleCA9IHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWEucy5pbmRleCA9IHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5jcml0ZXJpYVt0XS5jcml0ZXJpYS5kb20uY29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmRvbS5hZGQpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldENyaXRlcmlhTGlzdGVuZXJzKGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWEucy5wcmV2ZW50UmVkcmF3ID0gdGhpcy5zLnByZXZlbnRSZWRyYXcpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy5jcml0ZXJpYVt0XS5jcml0ZXJpYS5yZWJ1aWxkKHRoaXMucy5jcml0ZXJpYVt0XS5jcml0ZXJpYS5nZXREZXRhaWxzKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWEucy5wcmV2ZW50UmVkcmF3ID0gITEpKQogICAgICAgICAgICAgICAgICAgICAgICA6IGkgaW5zdGFuY2VvZiBtICYmIDAgPCBpLnMuY3JpdGVyaWEubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgID8gKCh0aGlzLnMuY3JpdGVyaWFbdF0uaW5kZXggPSB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zLmNyaXRlcmlhW3RdLmNyaXRlcmlhLnMuaW5kZXggPSB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWEuZG9tLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5kb20uYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5zLnByZXZlbnRSZWRyYXcgPSB0aGlzLnMucHJldmVudFJlZHJhdyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaS5yZWRyYXdDb250ZW50cygpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChpLnMucHJldmVudFJlZHJhdyA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRHcm91cExpc3RlbmVycyhpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5zLmNyaXRlcmlhLnNwbGljZSh0LCAxKSwgdC0tKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBMb2dpYygpOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLnJlZHJhd0xvZ2ljID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgaSA9IHRoaXMucy5jcml0ZXJpYTsgdCA8IGkubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciBlID0gaVt0XTsKICAgICAgICAgICAgICAgIGUuY3JpdGVyaWEgaW5zdGFuY2VvZiBtICYmIGUuY3JpdGVyaWEucmVkcmF3TG9naWMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNldHVwTG9naWMoKTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuICdBTkQnID09PSB0aGlzLnMubG9naWMgPyB0aGlzLl9hbmRTZWFyY2godCwgaSkgOiAnT1InICE9PSB0aGlzLnMubG9naWMgfHwgdGhpcy5fb3JTZWFyY2godCwgaSk7CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLnNldHVwTG9naWMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICgodGhpcy5kb20ubG9naWNDb250YWluZXIucmVtb3ZlKCksIHRoaXMuZG9tLmNsZWFyLnJlbW92ZSgpLCB0aGlzLnMuY3JpdGVyaWEubGVuZ3RoIDwgMSkpCiAgICAgICAgICAgICAgICB0aGlzLnMuaXNDaGlsZCB8fCAodGhpcy5kb20uY29udGFpbmVyLnRyaWdnZXIoJ2R0c2ItZGVzdHJveScpLCB0aGlzLmRvbS5jb250YWluZXIuY3NzKCdtYXJnaW4tbGVmdCcsIDApKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5zZWFyY2guY3NzKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGVhci5oZWlnaHQoJzBweCcpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmxvZ2ljQ29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS5jbGVhciksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmlzQ2hpbGQgfHwgdGhpcy5kb20uc2VhcmNoLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jb250YWluZXIucHJlcGVuZCh0aGlzLmRvbS5sb2dpY0NvbnRhaW5lcik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgaSA9IHRoaXMucy5jcml0ZXJpYTsgdCA8IGkubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGlbdF07CiAgICAgICAgICAgICAgICAgICAgZS5jcml0ZXJpYSBpbnN0YW5jZW9mIGQgJiYgZS5jcml0ZXJpYS5zZXR1cEJ1dHRvbnMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5kb20uY29udGFpbmVyLm91dGVySGVpZ2h0KCkgLSAxLAogICAgICAgICAgICAgICAgICAgIG4gPQogICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb20ubG9naWNDb250YWluZXIud2lkdGgobiksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldExvZ2ljTGlzdGVuZXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmNzcygnbWFyZ2luLWxlZnQnLCB0aGlzLmRvbS5sb2dpY0NvbnRhaW5lci5vdXRlckhlaWdodCghMCkpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5sb2dpY0NvbnRhaW5lci5vZmZzZXQoKSksCiAgICAgICAgICAgICAgICAgICAgcyA9IG4ubGVmdCwKICAgICAgICAgICAgICAgICAgICBzID0gcyAtIChzIC0gdGhpcy5kb20uY29udGFpbmVyLm9mZnNldCgpLmxlZnQpIC0gdGhpcy5kb20ubG9naWNDb250YWluZXIub3V0ZXJIZWlnaHQoITApLAogICAgICAgICAgICAgICAgICAgIHMgPSAodGhpcy5kb20ubG9naWNDb250YWluZXIub2Zmc2V0KHsgbGVmdDogcyB9KSwgdGhpcy5kb20ubG9naWNDb250YWluZXIubmV4dCgpKSwKICAgICAgICAgICAgICAgICAgICBuID0gbi50b3AsCiAgICAgICAgICAgICAgICAgICAgcyA9IGEocykub2Zmc2V0KCkudG9wOwogICAgICAgICAgICAgICAgdGhpcy5kb20ubG9naWNDb250YWluZXIub2Zmc2V0KHsgdG9wOiBuIC0gKG4gLSBzKSB9KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGVhci5vdXRlckhlaWdodCh0aGlzLmRvbS5sb2dpY0NvbnRhaW5lci5oZWlnaHQoKSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0Q2xlYXJMaXN0ZW5lcigpOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLnNldExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmRvbS5hZGQudW5iaW5kKCdjbGljaycpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uYWRkLm9uKCdjbGljay5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHQucy5pc0NoaWxkIHx8IHQuZG9tLmNvbnRhaW5lci5wcmVwZW5kKHQuZG9tLmxvZ2ljQ29udGFpbmVyKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5hZGRDcml0ZXJpYSgpLAogICAgICAgICAgICAgICAgICAgICAgICB0LmRvbS5jb250YWluZXIudHJpZ2dlcignZHRzYi1hZGQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5zLmR0LnN0YXRlLnNhdmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgITEKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5zZWFyY2gub2ZmKCdjbGljay5kdHNiJykub24oJ2NsaWNrLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdC5zLmR0LmRyYXcoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZSA9IHRoaXMucy5jcml0ZXJpYTsgaSA8IGUubGVuZ3RoOyBpKyspIGVbaV0uY3JpdGVyaWEuc2V0TGlzdGVuZXJzKCk7CiAgICAgICAgICAgIHRoaXMuX3NldENsZWFyTGlzdGVuZXIoKSwgdGhpcy5fc2V0TG9naWNMaXN0ZW5lcigpOwogICAgICAgIH0pLAogICAgICAgIChtLnByb3RvdHlwZS5hZGRDcml0ZXJpYSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICB2YXIgaSA9IG51bGwgPT09ICh0ID0gdm9pZCAwID09PSB0ID8gbnVsbCA6IHQpID8gdGhpcy5zLmNyaXRlcmlhLmxlbmd0aCA6IHQucy5pbmRleCwKICAgICAgICAgICAgICAgICAgICBlID0gbmV3IGQodGhpcy5zLmR0LCB0aGlzLnMub3B0cywgdGhpcy5zLnRvcEdyb3VwLCBpLCB0aGlzLnMuZGVwdGgsIHRoaXMucy5zZXJ2ZXJEYXRhLCB0aGlzLmMubGl2ZVNlYXJjaCksCiAgICAgICAgICAgICAgICAgICAgbiA9IChudWxsICE9PSB0ICYmICgoZS5jID0gdC5jKSwgKGUucyA9IHQucyksIChlLnMuZGVwdGggPSB0aGlzLnMuZGVwdGgpLCAoZS5jbGFzc2VzID0gdC5jbGFzc2VzKSksIGUucG9wdWxhdGUoKSwgITEpLAogICAgICAgICAgICAgICAgICAgIHMgPSAwOwogICAgICAgICAgICAgICAgcyA8IHRoaXMucy5jcml0ZXJpYS5sZW5ndGg7CiAgICAgICAgICAgICAgICBzKysKICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgMCA9PT0gcyAmJiB0aGlzLnMuY3JpdGVyaWFbc10uY3JpdGVyaWEucy5pbmRleCA+IGUucy5pbmRleAogICAgICAgICAgICAgICAgICAgID8gKGUuZ2V0Tm9kZSgpLmluc2VydEJlZm9yZSh0aGlzLnMuY3JpdGVyaWFbc10uY3JpdGVyaWEuZG9tLmNvbnRhaW5lciksIChuID0gITApKQogICAgICAgICAgICAgICAgICAgIDogcyA8IHRoaXMucy5jcml0ZXJpYS5sZW5ndGggLSAxICYmCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWFbc10uY3JpdGVyaWEucy5pbmRleCA8IGUucy5pbmRleCAmJgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLmNyaXRlcmlhW3MgKyAxXS5jcml0ZXJpYS5zLmluZGV4ID4gZS5zLmluZGV4ICYmCiAgICAgICAgICAgICAgICAgICAgICAoZS5nZXROb2RlKCkuaW5zZXJ0QWZ0ZXIodGhpcy5zLmNyaXRlcmlhW3NdLmNyaXRlcmlhLmRvbS5jb250YWluZXIpLCAobiA9ICEwKSk7CiAgICAgICAgICAgIG4gfHwgZS5nZXROb2RlKCkuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLmFkZCksCiAgICAgICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWEucHVzaCh7IGNyaXRlcmlhOiBlLCBpbmRleDogaSB9KSwKICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWEgPSB0aGlzLnMuY3JpdGVyaWEuc29ydChmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNyaXRlcmlhLnMuaW5kZXggLSBpLmNyaXRlcmlhLnMuaW5kZXg7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCByID0gdGhpcy5zLmNyaXRlcmlhOyBvIDwgci5sZW5ndGg7IG8rKykgewogICAgICAgICAgICAgICAgdmFyIGEgPSByW29dOwogICAgICAgICAgICAgICAgYS5jcml0ZXJpYSBpbnN0YW5jZW9mIGQgJiYgYS5jcml0ZXJpYS51cGRhdGVBcnJvd3MoMSA8IHRoaXMucy5jcml0ZXJpYS5sZW5ndGgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX3NldENyaXRlcmlhTGlzdGVuZXJzKGUpLCBlLnNldExpc3RlbmVycygpLCB0aGlzLnNldHVwTG9naWMoKTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuY2hlY2tGaWxsZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBpID0gdGhpcy5zLmNyaXRlcmlhOyB0IDwgaS5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgdmFyIGUgPSBpW3RdOwogICAgICAgICAgICAgICAgaWYgKChlLmNyaXRlcmlhIGluc3RhbmNlb2YgZCAmJiBlLmNyaXRlcmlhLnMuZmlsbGVkKSB8fCAoZS5jcml0ZXJpYSBpbnN0YW5jZW9mIG0gJiYgZS5jcml0ZXJpYS5jaGVja0ZpbGxlZCgpKSkgcmV0dXJuICEwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBpID0gMCwgZSA9IHRoaXMucy5jcml0ZXJpYTsgaSA8IGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZVtpXTsKICAgICAgICAgICAgICAgIG4uY3JpdGVyaWEgaW5zdGFuY2VvZiBtID8gKHQgKz0gbi5jcml0ZXJpYS5jb3VudCgpKSA6IHQrKzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuX2FkZFByZXZHcm91cCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBpID0gdGhpcy5zLmNyaXRlcmlhLmxlbmd0aCwKICAgICAgICAgICAgICAgIGUgPSBuZXcgbSh0aGlzLnMuZHQsIHRoaXMuYywgdGhpcy5zLnRvcEdyb3VwLCBpLCAhMCwgdGhpcy5zLmRlcHRoICsgMSwgdGhpcy5zLnNlcnZlckRhdGEpOwogICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWEucHVzaCh7IGNyaXRlcmlhOiBlLCBpbmRleDogaSwgbG9naWM6IGUucy5sb2dpYyB9KSwKICAgICAgICAgICAgICAgIGUucmVidWlsZCh0KSwKICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbaV0uY3JpdGVyaWEgPSBlKSwKICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC50cmlnZ2VyKCdkdHNiLXJlZHJhd0NvbnRlbnRzJyksCiAgICAgICAgICAgICAgICB0aGlzLl9zZXRHcm91cExpc3RlbmVycyhlKTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuX2FkZFByZXZDcml0ZXJpYSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBpID0gdGhpcy5zLmNyaXRlcmlhLmxlbmd0aCwKICAgICAgICAgICAgICAgIGUgPSBuZXcgZCh0aGlzLnMuZHQsIHRoaXMucy5vcHRzLCB0aGlzLnMudG9wR3JvdXAsIGksIHRoaXMucy5kZXB0aCwgdGhpcy5zLnNlcnZlckRhdGEpOwogICAgICAgICAgICBlLnBvcHVsYXRlKCksCiAgICAgICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWEucHVzaCh7IGNyaXRlcmlhOiBlLCBpbmRleDogaSB9KSwKICAgICAgICAgICAgICAgIChlLnMucHJldmVudFJlZHJhdyA9IHRoaXMucy5wcmV2ZW50UmVkcmF3KSwKICAgICAgICAgICAgICAgIGUucmVidWlsZCh0KSwKICAgICAgICAgICAgICAgIChlLnMucHJldmVudFJlZHJhdyA9ICExKSwKICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbaV0uY3JpdGVyaWEgPSBlKSwKICAgICAgICAgICAgICAgIHRoaXMucy5wcmV2ZW50UmVkcmF3IHx8IHRoaXMucy50b3BHcm91cC50cmlnZ2VyKCdkdHNiLXJlZHJhd0NvbnRlbnRzJyk7CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLl9hbmRTZWFyY2ggPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5zLmNyaXRlcmlhLmxlbmd0aCkKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwLCBuID0gdGhpcy5zLmNyaXRlcmlhOyBlIDwgbi5sZW5ndGg7IGUrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gbltlXTsKICAgICAgICAgICAgICAgICAgICBpZiAoKCEocy5jcml0ZXJpYSBpbnN0YW5jZW9mIGQpIHx8IHMuY3JpdGVyaWEucy5maWxsZWQpICYmICFzLmNyaXRlcmlhLnNlYXJjaCh0LCBpKSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLl9vclNlYXJjaCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgIGlmICgwID09PSB0aGlzLnMuY3JpdGVyaWEubGVuZ3RoKSByZXR1cm4gITA7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSAhMSwgbiA9IDAsIHMgPSB0aGlzLnMuY3JpdGVyaWE7IG4gPCBzLmxlbmd0aDsgbisrKSB7CiAgICAgICAgICAgICAgICB2YXIgbyA9IHNbbl07CiAgICAgICAgICAgICAgICBpZiAoby5jcml0ZXJpYSBpbnN0YW5jZW9mIGQgJiYgby5jcml0ZXJpYS5zLmZpbGxlZCkgewogICAgICAgICAgICAgICAgICAgIGlmICgoKGUgPSAhMCksIG8uY3JpdGVyaWEuc2VhcmNoKHQsIGkpKSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLmNyaXRlcmlhIGluc3RhbmNlb2YgbSAmJiBvLmNyaXRlcmlhLmNoZWNrRmlsbGVkKCkgJiYgKChlID0gITApLCBvLmNyaXRlcmlhLnNlYXJjaCh0LCBpKSkpIHJldHVybiAhMDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gIWU7CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLl9yZW1vdmVDcml0ZXJpYSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgIGlmICgodm9pZCAwID09PSBpICYmIChpID0gITEpLCB0aGlzLnMuY3JpdGVyaWEubGVuZ3RoIDw9IDEgJiYgdGhpcy5zLmlzQ2hpbGQpKSB0aGlzLmRlc3Ryb3koKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdm9pZCAwLCBuID0gMDsgbiA8IHRoaXMucy5jcml0ZXJpYS5sZW5ndGg7IG4rKykKICAgICAgICAgICAgICAgICAgICB0aGlzLnMuY3JpdGVyaWFbbl0uaW5kZXggPT09IHQucy5pbmRleCAmJiAoIWkgfHwgdGhpcy5zLmNyaXRlcmlhW25dLmNyaXRlcmlhIGluc3RhbmNlb2YgbSkgJiYgKGUgPSBuKTsKICAgICAgICAgICAgICAgIGZvciAodm9pZCAwICE9PSBlICYmIHRoaXMucy5jcml0ZXJpYS5zcGxpY2UoZSwgMSksIG4gPSAwOyBuIDwgdGhpcy5zLmNyaXRlcmlhLmxlbmd0aDsgbisrKQogICAgICAgICAgICAgICAgICAgICh0aGlzLnMuY3JpdGVyaWFbbl0uaW5kZXggPSBuKSwgKHRoaXMucy5jcml0ZXJpYVtuXS5jcml0ZXJpYS5zLmluZGV4ID0gbik7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuX3NldENyaXRlcmlhTGlzdGVuZXJzID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgdmFyIHMgPSB0aGlzOwogICAgICAgICAgICBuLmRvbS5kZWxldGUudW5iaW5kKCdjbGljaycpLm9uKCdjbGljay5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcy5fcmVtb3ZlQ3JpdGVyaWEobiksIG4uZG9tLmNvbnRhaW5lci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCBpID0gcy5zLmNyaXRlcmlhOyB0IDwgaS5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gaVt0XTsKICAgICAgICAgICAgICAgICAgICBlLmNyaXRlcmlhIGluc3RhbmNlb2YgZCAmJiBlLmNyaXRlcmlhLnVwZGF0ZUFycm93cygxIDwgcy5zLmNyaXRlcmlhLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbi5kZXN0cm95KCksIHMucy5kdC5kcmF3KCksIHMucy50b3BHcm91cC50cmlnZ2VyKCdkdHNiLXJlZHJhd0NvbnRlbnRzJyksICExOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG4uZG9tLnJpZ2h0LnVuYmluZCgnY2xpY2snKS5vbignY2xpY2suZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG4ucy5pbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG5ldyBtKHMucy5kdCwgcy5zLm9wdHMsIHMucy50b3BHcm91cCwgbi5zLmluZGV4LCAhMCwgcy5zLmRlcHRoICsgMSwgcy5zLnNlcnZlckRhdGEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgIGkuYWRkQ3JpdGVyaWEobiksCiAgICAgICAgICAgICAgICAgICAgICAgIChzLnMuY3JpdGVyaWFbdF0uY3JpdGVyaWEgPSBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHMucy5jcml0ZXJpYVt0XS5sb2dpYyA9ICdBTkQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5zLnRvcEdyb3VwLnRyaWdnZXIoJ2R0c2ItcmVkcmF3Q29udGVudHMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5fc2V0R3JvdXBMaXN0ZW5lcnMoaSksCiAgICAgICAgICAgICAgICAgICAgICAgICExCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgbi5kb20ubGVmdC51bmJpbmQoJ2NsaWNrJykub24oJ2NsaWNrLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgKHMucy50b0Ryb3AgPSBuZXcgZChzLnMuZHQsIHMucy5vcHRzLCBzLnMudG9wR3JvdXAsIG4ucy5pbmRleCwgdm9pZCAwLCBzLnMuc2VydmVyRGF0YSkpLAogICAgICAgICAgICAgICAgICAgICAgICAocy5zLnRvRHJvcC5zID0gbi5zKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHMucy50b0Ryb3AuYyA9IG4uYyksCiAgICAgICAgICAgICAgICAgICAgICAgIChzLnMudG9Ecm9wLmNsYXNzZXMgPSBuLmNsYXNzZXMpLAogICAgICAgICAgICAgICAgICAgICAgICBzLnMudG9Ecm9wLnBvcHVsYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBzLnMudG9Ecm9wLnMuaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgcy5kb20uY29udGFpbmVyLnRyaWdnZXIoJ2R0c2ItZHJvcENyaXRlcmlhJyksCiAgICAgICAgICAgICAgICAgICAgICAgIChuLnMuaW5kZXggPSB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgcy5fcmVtb3ZlQ3JpdGVyaWEobiksCiAgICAgICAgICAgICAgICAgICAgICAgIHMucy50b3BHcm91cC50cmlnZ2VyKCdkdHNiLXJlZHJhd0NvbnRlbnRzJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHMucy5kdC5kcmF3KCksCiAgICAgICAgICAgICAgICAgICAgICAgICExCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIChtLnByb3RvdHlwZS5fc2V0Q2xlYXJMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmRvbS5jbGVhci51bmJpbmQoJ2NsaWNrJykub24oJ2NsaWNrLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIHQucy5pc0NoaWxkCiAgICAgICAgICAgICAgICAgICAgICAgID8gKHQuZGVzdHJveSgpLCB0LnMudG9wR3JvdXAudHJpZ2dlcignZHRzYi1yZWRyYXdDb250ZW50cycpKQogICAgICAgICAgICAgICAgICAgICAgICA6IHQuZG9tLmNvbnRhaW5lci50cmlnZ2VyKCdkdHNiLWNsZWFyQ29udGVudHMnKSwKICAgICAgICAgICAgICAgICAgICAhMQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgKG0ucHJvdG90eXBlLl9zZXRHcm91cExpc3RlbmVycyA9IGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgaS5kb20uYWRkLnVuYmluZCgnY2xpY2snKS5vbignY2xpY2suZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnNldHVwTG9naWMoKSwgZS5kb20uY29udGFpbmVyLnRyaWdnZXIoJ2R0c2ItYWRkJyksICExOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGkuZG9tLmNvbnRhaW5lci51bmJpbmQoJ2R0c2ItYWRkJykub24oJ2R0c2ItYWRkLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc2V0dXBMb2dpYygpLCBlLmRvbS5jb250YWluZXIudHJpZ2dlcignZHRzYi1hZGQnKSwgITE7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGkuZG9tLmNvbnRhaW5lci51bmJpbmQoJ2R0c2ItZGVzdHJveScpLm9uKCdkdHNiLWRlc3Ryb3kuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5fcmVtb3ZlQ3JpdGVyaWEoaSwgITApLCBpLmRvbS5jb250YWluZXIucmVtb3ZlKCksIGUuc2V0dXBMb2dpYygpLCAhMTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgaS5kb20uY29udGFpbmVyLnVuYmluZCgnZHRzYi1kcm9wQ3JpdGVyaWEnKS5vbignZHRzYi1kcm9wQ3JpdGVyaWEuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGkucy50b0Ryb3A7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0LnMuaW5kZXggPSBpLnMuaW5kZXgpLCB0LnVwZGF0ZUFycm93cygxIDwgZS5zLmNyaXRlcmlhLmxlbmd0aCksIGUuYWRkQ3JpdGVyaWEodCksICExOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBpLnNldExpc3RlbmVycygpOwogICAgICAgIH0pLAogICAgICAgIChtLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuc2V0TGlzdGVuZXJzKCksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5hZGQuaHRtbCh0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5hZGQnLCB0aGlzLmMuaTE4bi5hZGQpKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLnNlYXJjaC5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLnNlYXJjaCcsIHRoaXMuYy5pMThuLnNlYXJjaCkpLAogICAgICAgICAgICAgICAgdGhpcy5kb20ubG9naWMKICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oKQogICAgICAgICAgICAgICAgICAgIC5maXJzdCgpCiAgICAgICAgICAgICAgICAgICAgLmh0bWwoCiAgICAgICAgICAgICAgICAgICAgICAgICdPUicgPT09IHRoaXMuYy5sb2dpYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5sb2dpY09yJywgdGhpcy5jLmkxOG4ubG9naWNPcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zLmR0LmkxOG4oJ3NlYXJjaEJ1aWxkZXIubG9naWNBbmQnLCB0aGlzLmMuaTE4bi5sb2dpY0FuZCksCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICh0aGlzLnMubG9naWMgPSAnT1InID09PSB0aGlzLmMubG9naWMgPyAnT1InIDogJ0FORCcpLAogICAgICAgICAgICAgICAgdGhpcy5jLmdyZXlzY2FsZSAmJiB0aGlzLmRvbS5sb2dpYy5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZ3JleXNjYWxlKSwKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmxvZ2ljQ29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS5sb2dpYykuYXBwZW5kKHRoaXMuZG9tLmNsZWFyKSwKICAgICAgICAgICAgICAgIHRoaXMucy5pc0NoaWxkICYmIHRoaXMuZG9tLmNvbnRhaW5lci5hcHBlbmQodGhpcy5kb20ubG9naWNDb250YWluZXIpLAogICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS5hZGQpLAogICAgICAgICAgICAgICAgdGhpcy5jLmxpdmVTZWFyY2ggfHwgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS5zZWFyY2gpOwogICAgICAgIH0pLAogICAgICAgIChtLnByb3RvdHlwZS5fc2V0TG9naWNMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmRvbS5sb2dpYy51bmJpbmQoJ2NsaWNrJykub24oJ2NsaWNrLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBlLl90b2dnbGVMb2dpYygpLCBlLnMuZHQuZHJhdygpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIGkgPSBlLnMuY3JpdGVyaWE7IHQgPCBpLmxlbmd0aDsgdCsrKSBpW3RdLmNyaXRlcmlhLnNldExpc3RlbmVycygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAobS5wcm90b3R5cGUuX3RvZ2dsZUxvZ2ljID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAnT1InID09PSB0aGlzLnMubG9naWMKICAgICAgICAgICAgICAgID8gKCh0aGlzLnMubG9naWMgPSAnQU5EJyksCiAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmxvZ2ljLmNoaWxkcmVuKCkuZmlyc3QoKS5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmxvZ2ljQW5kJywgdGhpcy5jLmkxOG4ubG9naWNBbmQpKSkKICAgICAgICAgICAgICAgIDogJ0FORCcgPT09IHRoaXMucy5sb2dpYyAmJgogICAgICAgICAgICAgICAgICAoKHRoaXMucy5sb2dpYyA9ICdPUicpLAogICAgICAgICAgICAgICAgICB0aGlzLmRvbS5sb2dpYy5jaGlsZHJlbigpLmZpcnN0KCkuaHRtbCh0aGlzLnMuZHQuaTE4bignc2VhcmNoQnVpbGRlci5sb2dpY09yJywgdGhpcy5jLmkxOG4ubG9naWNPcikpKTsKICAgICAgICB9KSwKICAgICAgICAobS52ZXJzaW9uID0gJzEuMS4wJyksCiAgICAgICAgKG0uY2xhc3NlcyA9IHsKICAgICAgICAgICAgYWRkOiAnZHRzYi1hZGQnLAogICAgICAgICAgICBidXR0b246ICdkdHNiLWJ1dHRvbicsCiAgICAgICAgICAgIGNsZWFyR3JvdXA6ICdkdHNiLWNsZWFyR3JvdXAnLAogICAgICAgICAgICBncmV5c2NhbGU6ICdkdHNiLWdyZXlzY2FsZScsCiAgICAgICAgICAgIGdyb3VwOiAnZHRzYi1ncm91cCcsCiAgICAgICAgICAgIGlucHV0QnV0dG9uOiAnZHRzYi1pcHRidG4nLAogICAgICAgICAgICBsb2dpYzogJ2R0c2ItbG9naWMnLAogICAgICAgICAgICBsb2dpY0NvbnRhaW5lcjogJ2R0c2ItbG9naWNDb250YWluZXInLAogICAgICAgICAgICBzZWFyY2g6ICdkdHNiLXNlYXJjaCcsCiAgICAgICAgfSksCiAgICAgICAgKG0uZGVmYXVsdHMgPSB7CiAgICAgICAgICAgIGNvbHVtbnM6ICEwLAogICAgICAgICAgICBjb25kaXRpb25zOiB7CiAgICAgICAgICAgICAgICBkYXRlOiBkLmRhdGVDb25kaXRpb25zLAogICAgICAgICAgICAgICAgaHRtbDogZC5zdHJpbmdDb25kaXRpb25zLAogICAgICAgICAgICAgICAgJ2h0bWwtbnVtJzogZC5udW1Db25kaXRpb25zLAogICAgICAgICAgICAgICAgJ2h0bWwtbnVtLWZtdCc6IGQubnVtRm10Q29uZGl0aW9ucywKICAgICAgICAgICAgICAgIGx1eG9uOiBkLmx1eG9uRGF0ZUNvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICBtb21lbnQ6IGQubW9tZW50RGF0ZUNvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICBudW06IGQubnVtQ29uZGl0aW9ucywKICAgICAgICAgICAgICAgICdudW0tZm10JzogZC5udW1GbXRDb25kaXRpb25zLAogICAgICAgICAgICAgICAgc3RyaW5nOiBkLnN0cmluZ0NvbmRpdGlvbnMsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlcHRoTGltaXQ6ICExLAogICAgICAgICAgICBlbnRlclNlYXJjaDogITEsCiAgICAgICAgICAgIGZpbHRlckNoYW5nZWQ6IHZvaWQgMCwKICAgICAgICAgICAgZ3JleXNjYWxlOiAhMSwKICAgICAgICAgICAgbGl2ZVNlYXJjaDogITAsCiAgICAgICAgICAgIGkxOG46IHsKICAgICAgICAgICAgICAgIGFkZDogJ0FkZCBDb25kaXRpb24nLAogICAgICAgICAgICAgICAgYnV0dG9uOiB7IDA6ICdTZWFyY2ggQnVpbGRlcicsIF86ICdTZWFyY2ggQnVpbGRlciAoJWQpJyB9LAogICAgICAgICAgICAgICAgY2xlYXJBbGw6ICdDbGVhciBBbGwnLAogICAgICAgICAgICAgICAgY29uZGl0aW9uOiAnQ29uZGl0aW9uJywKICAgICAgICAgICAgICAgIGRhdGE6ICdEYXRhJywKICAgICAgICAgICAgICAgIGRlbGV0ZTogJyZ0aW1lcycsCiAgICAgICAgICAgICAgICBkZWxldGVUaXRsZTogJ0RlbGV0ZSBmaWx0ZXJpbmcgcnVsZScsCiAgICAgICAgICAgICAgICBsZWZ0OiAnPCcsCiAgICAgICAgICAgICAgICBsZWZ0VGl0bGU6ICdPdXRkZW50IGNyaXRlcmlhJywKICAgICAgICAgICAgICAgIGxvZ2ljQW5kOiAnQW5kJywKICAgICAgICAgICAgICAgIGxvZ2ljT3I6ICdPcicsCiAgICAgICAgICAgICAgICByaWdodDogJz4nLAogICAgICAgICAgICAgICAgcmlnaHRUaXRsZTogJ0luZGVudCBjcml0ZXJpYScsCiAgICAgICAgICAgICAgICBzZWFyY2g6ICdTZWFyY2gnLAogICAgICAgICAgICAgICAgdGl0bGU6IHsgMDogJ0N1c3RvbSBTZWFyY2ggQnVpbGRlcicsIF86ICdDdXN0b20gU2VhcmNoIEJ1aWxkZXIgKCVkKScgfSwKICAgICAgICAgICAgICAgIHZhbHVlOiAnVmFsdWUnLAogICAgICAgICAgICAgICAgdmFsdWVKb2luZXI6ICdhbmQnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2dpYzogJ0FORCcsCiAgICAgICAgICAgIG9ydGhvZ29uYWw6IHsgZGlzcGxheTogJ2Rpc3BsYXknLCBzZWFyY2g6ICdmaWx0ZXInIH0sCiAgICAgICAgICAgIHByZURlZmluZWQ6ICExLAogICAgICAgIH0pLAogICAgICAgIChwID0gbSksCiAgICAgICAgKG4ucHJvdG90eXBlLmdldERldGFpbHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmICh0ID0gITEpLCB0aGlzLnMudG9wR3JvdXAgPyB0aGlzLnMudG9wR3JvdXAuZ2V0RGV0YWlscyh0KSA6IHt9OwogICAgICAgIH0pLAogICAgICAgIChuLnByb3RvdHlwZS5nZXROb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kb20uY29udGFpbmVyOwogICAgICAgIH0pLAogICAgICAgIChuLnByb3RvdHlwZS5yZWJ1aWxkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuZG9tLmNsZWFyQWxsLmNsaWNrKCksCiAgICAgICAgICAgICAgICBudWxsICE9IHQgJiYKICAgICAgICAgICAgICAgICAgICAoKHRoaXMucy50b3BHcm91cC5zLnByZXZlbnRSZWRyYXcgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLnJlYnVpbGQodCksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMucy50b3BHcm91cC5zLnByZXZlbnRSZWRyYXcgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tDbGVhcigpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRpdGxlKHRoaXMucy50b3BHcm91cC5jb3VudCgpKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnMudG9wR3JvdXAucmVkcmF3Q29udGVudHMoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnMuZHQuZHJhdyghMSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLnNldExpc3RlbmVycygpKSwKICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICAobi5wcm90b3R5cGUuX2FwcGx5UHJlRGVmRGVmYXVsdHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLCBuID0gKHZvaWQgMCAhPT0gdC5jcml0ZXJpYSAmJiB2b2lkIDAgPT09IHQubG9naWMgJiYgKHQubG9naWMgPSAnQU5EJyksIHRoaXMpLCBpID0gMCwgcyA9IHQuY3JpdGVyaWE7CiAgICAgICAgICAgICAgICBpIDwgcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBpKysKICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgIShmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gaS5jcml0ZXJpYQogICAgICAgICAgICAgICAgICAgICAgICA/IChpID0gbi5fYXBwbHlQcmVEZWZEZWZhdWx0cyhpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBuLnMuZHQuY29sdW1ucygpLmV2ZXJ5KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucy5kdC5zZXR0aW5ncygpWzBdLmFvQ29sdW1uc1t0XS5zVGl0bGUgPT09IGkuZGF0YSAmJiAoaS5kYXRhSWR4ID0gdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KShzW2ldKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSksCiAgICAgICAgKG4ucHJvdG90eXBlLl9zZXRVcCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKHZvaWQgMCA9PT0gdCAmJiAodCA9ICEwKSwKICAgICAgICAgICAgICAgICdmdW5jdGlvbicgIT0gdHlwZW9mIHRoaXMucy5kdC5jb2x1bW4oKS50eXBlICYmCiAgICAgICAgICAgICAgICAgICAgQi5BcGkucmVnaXN0ZXJQbHVyYWwoJ2NvbHVtbnMoKS50eXBlcygpJywgJ2NvbHVtbigpLnR5cGUoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29sdW1uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYW9Db2x1bW5zW2ldLnNUeXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAhaC5EYXRlVGltZSkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSAoaSA9IHRoaXMucy5kdC5jb2x1bW5zKCkudHlwZXMoKS50b0FycmF5KCkpIHx8IGkuaW5jbHVkZXModm9pZCAwKSB8fCBpLmluY2x1ZGVzKG51bGwpKQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBbXSwgZSA9IDAsIHMgPSB0aGlzLnMuZHQuc2V0dGluZ3MoKVswXS5hb0NvbHVtbnM7IGUgPCBzLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gc1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKHZvaWQgMCAhPT0gby5zZWFyY2hCdWlsZGVyVHlwZSA/IG8uc2VhcmNoQnVpbGRlclR5cGUgOiBvLnNUeXBlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMucy5kdC5jb2x1bW5zKCkudG9BcnJheSgpOwogICAgICAgICAgICAgICAgKHZvaWQgMCA9PT0gaSB8fCBpLmluY2x1ZGVzKHZvaWQgMCkgfHwgaS5pbmNsdWRlcyhudWxsKSkgJiYKICAgICAgICAgICAgICAgICAgICAobC5mbi5kYXRhVGFibGUuZXh0Lm9BcGkgJiYgbC5mbi5kYXRhVGFibGUuZXh0Lm9BcGkuX2ZuQ29sdW1uVHlwZXModGhpcy5zLmR0LnNldHRpbmdzKClbMF0pLAogICAgICAgICAgICAgICAgICAgIChpID0gdGhpcy5zLmR0LmNvbHVtbnMoKS50eXBlcygpLnRvQXJyYXkoKSkpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCByWzBdLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBpW3JbMF1bYV1dOwogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgKCEwID09PSB0aGlzLmMuY29sdW1ucyB8fCAoQXJyYXkuaXNBcnJheSh0aGlzLmMuY29sdW1ucykgJiYgdGhpcy5jLmNvbHVtbnMuaW5jbHVkZXMoYSkpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAoZC5pbmNsdWRlcygnZGF0ZScpIHx8IGQuaW5jbHVkZXMoJ21vbWVudCcpIHx8IGQuaW5jbHVkZXMoJ2x1eG9uJykpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxlcnQoJ1NlYXJjaEJ1aWxkZXIgUmVxdWlyZXMgRGF0ZVRpbWUgd2hlbiB1c2VkIHdpdGggZGF0ZXMuJyksIG5ldyBFcnJvcignU2VhcmNoQnVpbGRlciByZXF1aXJlcyBEYXRlVGltZScpKQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICh0aGlzLnMudG9wR3JvdXAgPSBuZXcgcCh0aGlzLnMuZHQsIHRoaXMuYywgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCB0aGlzLnMuc2VydmVyRGF0YSkpLAogICAgICAgICAgICAgICAgdGhpcy5fc2V0Q2xlYXJMaXN0ZW5lcigpLAogICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9uKCdzdGF0ZVNhdmVQYXJhbXMuZHRzYicsIGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgKGUuc2VhcmNoQnVpbGRlciA9IG4uZ2V0RGV0YWlscygpKSwgZS5zY3JvbGxlciA/IChlLnN0YXJ0ID0gbi5zLmR0LnN0YXRlKCkuc3RhcnQpIDogKGUucGFnZSA9IG4ucy5kdC5wYWdlKCkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLnMuZHQub24oJ3N0YXRlTG9hZFBhcmFtcy5kdHNiJywgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICBuLnJlYnVpbGQoZS5zZWFyY2hCdWlsZGVyKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5fYnVpbGQoKSwKICAgICAgICAgICAgICAgIHRoaXMucy5kdC5vbigncHJlWGhyLmR0c2InLCBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICAgICAgICAgICAgIG4ucy5kdC5wYWdlLmluZm8oKS5zZXJ2ZXJTaWRlICYmIChlLnNlYXJjaEJ1aWxkZXIgPSBuLl9jb2xsYXBzZUFycmF5KG4uZ2V0RGV0YWlscyghMCkpKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9uKCdjb2x1bW5zLXJlb3JkZXJlZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBuLnJlYnVpbGQobi5nZXREZXRhaWxzKCkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0ICYmCiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09ICh0ID0gdGhpcy5zLmR0LnN0YXRlLmxvYWRlZCgpKSAmJiB2b2lkIDAgIT09IHQuc2VhcmNoQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgICA/ICh0aGlzLnMudG9wR3JvdXAucmVidWlsZCh0LnNlYXJjaEJ1aWxkZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLnRyaWdnZXIoJ2R0c2ItcmVkcmF3Q29udGVudHMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnMuZHQucGFnZS5pbmZvKCkuc2VydmVyU2lkZSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5wYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucy5kdC5wYWdlKHQucGFnZSkuZHJhdygncGFnZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucy5kdC5zY3JvbGxlciAmJiB0LnNjcm9sbGVyICYmIHRoaXMucy5kdC5zY3JvbGxlcigpLnNjcm9sbFRvUm93KHQuc2Nyb2xsZXIudG9wUm93KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLnNldExpc3RlbmVycygpKQogICAgICAgICAgICAgICAgICAgICAgICA6ICExICE9PSB0aGlzLmMucHJlRGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5jLnByZURlZmluZWQgPSB0aGlzLl9hcHBseVByZURlZkRlZmF1bHRzKHRoaXMuYy5wcmVEZWZpbmVkKSksIHRoaXMucmVidWlsZCh0aGlzLmMucHJlRGVmaW5lZCkpKSwKICAgICAgICAgICAgICAgIHRoaXMuX3NldEVtcHR5TGlzdGVuZXIoKSwKICAgICAgICAgICAgICAgIHRoaXMucy5kdC5zdGF0ZS5zYXZlKCk7CiAgICAgICAgfSksCiAgICAgICAgKG4ucHJvdG90eXBlLl9jb2xsYXBzZUFycmF5ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5sb2dpYykKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdC52YWx1ZSAmJgogICAgICAgICAgICAgICAgICAgICh0LnZhbHVlLnNvcnQoZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKCt0KSB8fCAoKHQgPSArdCksIChpID0gK2kpKSwgdCA8IGkgPyAtMSA6IGkgPCB0ID8gMSA6IDA7CiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgKHQudmFsdWUxID0gdC52YWx1ZVswXSksCiAgICAgICAgICAgICAgICAgICAgKHQudmFsdWUyID0gdC52YWx1ZVsxXSkpOwogICAgICAgICAgICBlbHNlIGZvciAodmFyIGkgPSAwOyBpIDwgdC5jcml0ZXJpYS5sZW5ndGg7IGkrKykgdC5jcml0ZXJpYVtpXSA9IHRoaXMuX2NvbGxhcHNlQXJyYXkodC5jcml0ZXJpYVtpXSk7CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pLAogICAgICAgIChuLnByb3RvdHlwZS5fdXBkYXRlVGl0bGUgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB0aGlzLmRvbS50aXRsZS5odG1sKHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLnRpdGxlJywgdGhpcy5jLmkxOG4udGl0bGUsIHQpKTsKICAgICAgICB9KSwKICAgICAgICAobi5wcm90b3R5cGUuX2J1aWxkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICB0ID0gKHRoaXMuZG9tLmNsZWFyQWxsLnJlbW92ZSgpLCB0aGlzLmRvbS5jb250YWluZXIuZW1wdHkoKSwgdGhpcy5zLnRvcEdyb3VwLmNvdW50KCkpLAogICAgICAgICAgICAgICAgcyA9CiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3VwZGF0ZVRpdGxlKHQpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLnRpdGxlUm93LmFwcGVuZCh0aGlzLmRvbS50aXRsZSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS50aXRsZVJvdyksCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9tLnRvcEdyb3VwID0gdGhpcy5zLnRvcEdyb3VwLmdldE5vZGUoKSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uY29udGFpbmVyLmFwcGVuZCh0aGlzLmRvbS50b3BHcm91cCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0UmVkcmF3TGlzdGVuZXIoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnMuZHQudGFibGUoMCkubm9kZSgpKTsKICAgICAgICAgICAgbC5mbi5kYXRhVGFibGUuZXh0LnNlYXJjaC5pbmNsdWRlcyh0aGlzLnMuc2VhcmNoKSB8fAogICAgICAgICAgICAgICAgKCh0aGlzLnMuc2VhcmNoID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5uVGFibGUgIT09IHMgfHwgbi5zLnRvcEdyb3VwLnNlYXJjaChpLCBlKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgbC5mbi5kYXRhVGFibGUuZXh0LnNlYXJjaC5wdXNoKHRoaXMucy5zZWFyY2gpKSwKICAgICAgICAgICAgICAgIHRoaXMucy5kdC5vbignZGVzdHJveS5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG4uZG9tLmNvbnRhaW5lci5yZW1vdmUoKSwgbi5kb20uY2xlYXJBbGwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IGwuZm4uZGF0YVRhYmxlLmV4dC5zZWFyY2guaW5kZXhPZihuLnMuc2VhcmNoKTsgLTEgIT09IHQ7ICkKICAgICAgICAgICAgICAgICAgICAgICAgbC5mbi5kYXRhVGFibGUuZXh0LnNlYXJjaC5zcGxpY2UodCwgMSksICh0ID0gbC5mbi5kYXRhVGFibGUuZXh0LnNlYXJjaC5pbmRleE9mKG4ucy5zZWFyY2gpKTsKICAgICAgICAgICAgICAgICAgICBuLnMuZHQub2ZmKCcuZHRzYicpLCBsKG4ucy5kdC50YWJsZSgpLm5vZGUoKSkub2ZmKCcuZHRzYicpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgKG4ucHJvdG90eXBlLl9jaGVja0NsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAwIDwgdGhpcy5zLnRvcEdyb3VwLnMuY3JpdGVyaWEubGVuZ3RoCiAgICAgICAgICAgICAgICA/ICh0aGlzLmRvbS5jbGVhckFsbC5pbnNlcnRBZnRlcih0aGlzLmRvbS50aXRsZSksIHRoaXMuX3NldENsZWFyTGlzdGVuZXIoKSkKICAgICAgICAgICAgICAgIDogdGhpcy5kb20uY2xlYXJBbGwucmVtb3ZlKCk7CiAgICAgICAgfSksCiAgICAgICAgKG4ucHJvdG90eXBlLl9maWx0ZXJDaGFuZ2VkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmMuZmlsdGVyQ2hhbmdlZDsKICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgaSAmJiBpKHQsIHRoaXMucy5kdC5pMThuKCdzZWFyY2hCdWlsZGVyLmJ1dHRvbicsIHRoaXMuYy5pMThuLmJ1dHRvbiwgdCkpOwogICAgICAgIH0pLAogICAgICAgIChuLnByb3RvdHlwZS5fc2V0Q2xlYXJMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICB0aGlzLmRvbS5jbGVhckFsbC51bmJpbmQoJ2NsaWNrJyksCiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGVhckFsbC5vbignY2xpY2suZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAodC5zLnRvcEdyb3VwID0gbmV3IHAodC5zLmR0LCB0LmMsIHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgdC5zLnNlcnZlckRhdGEpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5fYnVpbGQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5zLmR0LmRyYXcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5zLnRvcEdyb3VwLnNldExpc3RlbmVycygpLAogICAgICAgICAgICAgICAgICAgICAgICB0LmRvbS5jbGVhckFsbC5yZW1vdmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5fc2V0RW1wdHlMaXN0ZW5lcigpLAogICAgICAgICAgICAgICAgICAgICAgICB0Ll9maWx0ZXJDaGFuZ2VkKDApLAogICAgICAgICAgICAgICAgICAgICAgICAhMQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAobi5wcm90b3R5cGUuX3NldFJlZHJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaSA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLnVuYmluZCgnZHRzYi1yZWRyYXdDb250ZW50cycpLAogICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLmRvbS5jb250YWluZXIub24oJ2R0c2ItcmVkcmF3Q29udGVudHMuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpLl9jaGVja0NsZWFyKCksIGkucy50b3BHcm91cC5yZWRyYXdDb250ZW50cygpLCBpLnMudG9wR3JvdXAuc2V0dXBMb2dpYygpLCBpLl9zZXRFbXB0eUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBpLnMudG9wR3JvdXAuY291bnQoKTsKICAgICAgICAgICAgICAgICAgICBpLl91cGRhdGVUaXRsZSh0KSwgaS5fZmlsdGVyQ2hhbmdlZCh0KSwgaS5zLmR0LnBhZ2UuaW5mbygpLnNlcnZlclNpZGUgfHwgaS5zLmR0LmRyYXcoKSwgaS5zLmR0LnN0YXRlLnNhdmUoKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLmRvbS5jb250YWluZXIudW5iaW5kKCdkdHNiLXJlZHJhd0NvbnRlbnRzLW5vRHJhdycpLAogICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLmRvbS5jb250YWluZXIub24oJ2R0c2ItcmVkcmF3Q29udGVudHMtbm9EcmF3LmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaS5fY2hlY2tDbGVhcigpLAogICAgICAgICAgICAgICAgICAgICAgICAoaS5zLnRvcEdyb3VwLnMucHJldmVudFJlZHJhdyA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAgICAgaS5zLnRvcEdyb3VwLnJlZHJhd0NvbnRlbnRzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIChpLnMudG9wR3JvdXAucy5wcmV2ZW50UmVkcmF3ID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICBpLnMudG9wR3JvdXAuc2V0dXBMb2dpYygpLAogICAgICAgICAgICAgICAgICAgICAgICBpLl9zZXRFbXB0eUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBpLnMudG9wR3JvdXAuY291bnQoKTsKICAgICAgICAgICAgICAgICAgICBpLl91cGRhdGVUaXRsZSh0KSwgaS5fZmlsdGVyQ2hhbmdlZCh0KTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5zLnRvcEdyb3VwLmRvbS5jb250YWluZXIudW5iaW5kKCdkdHNiLXJlZHJhd0xvZ2ljJyksCiAgICAgICAgICAgICAgICB0aGlzLnMudG9wR3JvdXAuZG9tLmNvbnRhaW5lci5vbignZHRzYi1yZWRyYXdMb2dpYy5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGkucy50b3BHcm91cC5yZWRyYXdMb2dpYygpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gaS5zLnRvcEdyb3VwLmNvdW50KCk7CiAgICAgICAgICAgICAgICAgICAgaS5fdXBkYXRlVGl0bGUodCksIGkuX2ZpbHRlckNoYW5nZWQodCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLnVuYmluZCgnZHRzYi1hZGQnKSwKICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLm9uKCdkdHNiLWFkZC5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gaS5zLnRvcEdyb3VwLmNvdW50KCk7CiAgICAgICAgICAgICAgICAgICAgaS5fdXBkYXRlVGl0bGUodCksIGkuX2ZpbHRlckNoYW5nZWQodCksIGkuX2NoZWNrQ2xlYXIoKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5zLmR0Lm9uKCdwb3N0RWRpdC5kdHNiIHBvc3RDcmVhdGUuZHRzYiBwb3N0UmVtb3ZlLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaS5zLnRvcEdyb3VwLnJlZHJhd0NvbnRlbnRzKCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLnVuYmluZCgnZHRzYi1jbGVhckNvbnRlbnRzJyksCiAgICAgICAgICAgICAgICB0aGlzLnMudG9wR3JvdXAuZG9tLmNvbnRhaW5lci5vbignZHRzYi1jbGVhckNvbnRlbnRzLmR0c2InLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaS5fc2V0VXAoITEpLCBpLl9maWx0ZXJDaGFuZ2VkKDApLCBpLnMuZHQuZHJhdygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgKG4ucHJvdG90eXBlLl9zZXRFbXB0eUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uYWRkLm9uKCdjbGljay5kdHNiJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdC5fY2hlY2tDbGVhcigpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMucy50b3BHcm91cC5kb20uY29udGFpbmVyLm9uKCdkdHNiLWRlc3Ryb3kuZHRzYicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0LmRvbS5jbGVhckFsbC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIChuLnZlcnNpb24gPSAnMS44LjEnKSwKICAgICAgICAobi5jbGFzc2VzID0gewogICAgICAgICAgICBidXR0b246ICdkdHNiLWJ1dHRvbicsCiAgICAgICAgICAgIGNsZWFyQWxsOiAnZHRzYi1jbGVhckFsbCcsCiAgICAgICAgICAgIGNvbnRhaW5lcjogJ2R0c2Itc2VhcmNoQnVpbGRlcicsCiAgICAgICAgICAgIGlucHV0QnV0dG9uOiAnZHRzYi1pcHRidG4nLAogICAgICAgICAgICB0aXRsZTogJ2R0c2ItdGl0bGUnLAogICAgICAgICAgICB0aXRsZVJvdzogJ2R0c2ItdGl0bGVSb3cnLAogICAgICAgIH0pLAogICAgICAgIChuLmRlZmF1bHRzID0gewogICAgICAgICAgICBjb2x1bW5zOiAhMCwKICAgICAgICAgICAgY29uZGl0aW9uczogewogICAgICAgICAgICAgICAgZGF0ZTogZC5kYXRlQ29uZGl0aW9ucywKICAgICAgICAgICAgICAgIGh0bWw6IGQuc3RyaW5nQ29uZGl0aW9ucywKICAgICAgICAgICAgICAgICdodG1sLW51bSc6IGQubnVtQ29uZGl0aW9ucywKICAgICAgICAgICAgICAgICdodG1sLW51bS1mbXQnOiBkLm51bUZtdENvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICBsdXhvbjogZC5sdXhvbkRhdGVDb25kaXRpb25zLAogICAgICAgICAgICAgICAgbW9tZW50OiBkLm1vbWVudERhdGVDb25kaXRpb25zLAogICAgICAgICAgICAgICAgbnVtOiBkLm51bUNvbmRpdGlvbnMsCiAgICAgICAgICAgICAgICAnbnVtLWZtdCc6IGQubnVtRm10Q29uZGl0aW9ucywKICAgICAgICAgICAgICAgIHN0cmluZzogZC5zdHJpbmdDb25kaXRpb25zLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkZXB0aExpbWl0OiAhMSwKICAgICAgICAgICAgZW50ZXJTZWFyY2g6ICExLAogICAgICAgICAgICBmaWx0ZXJDaGFuZ2VkOiB2b2lkIDAsCiAgICAgICAgICAgIGdyZXlzY2FsZTogITEsCiAgICAgICAgICAgIGxpdmVTZWFyY2g6ICEwLAogICAgICAgICAgICBpMThuOiB7CiAgICAgICAgICAgICAgICBhZGQ6ICdBZGQgQ29uZGl0aW9uJywKICAgICAgICAgICAgICAgIGJ1dHRvbjogeyAwOiAnU2VhcmNoIEJ1aWxkZXInLCBfOiAnU2VhcmNoIEJ1aWxkZXIgKCVkKScgfSwKICAgICAgICAgICAgICAgIGNsZWFyQWxsOiAnQ2xlYXIgQWxsJywKICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogJ0NvbmRpdGlvbicsCiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgYXJyYXk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbnM6ICdDb250YWlucycsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiAnRW1wdHknLAogICAgICAgICAgICAgICAgICAgICAgICBlcXVhbHM6ICdFcXVhbHMnLAogICAgICAgICAgICAgICAgICAgICAgICBub3Q6ICdOb3QnLAogICAgICAgICAgICAgICAgICAgICAgICBub3RFbXB0eTogJ05vdCBFbXB0eScsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhvdXQ6ICdXaXRob3V0JywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRhdGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICdBZnRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZTogJ0JlZm9yZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGJldHdlZW46ICdCZXR3ZWVuJywKICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHk6ICdFbXB0eScsCiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsczogJ0VxdWFscycsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdDogJ05vdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdEJldHdlZW46ICdOb3QgQmV0d2VlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdEVtcHR5OiAnTm90IEVtcHR5JywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG51bWJlcjogewogICAgICAgICAgICAgICAgICAgICAgICBiZXR3ZWVuOiAnQmV0d2VlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiAnRW1wdHknLAogICAgICAgICAgICAgICAgICAgICAgICBlcXVhbHM6ICdFcXVhbHMnLAogICAgICAgICAgICAgICAgICAgICAgICBndDogJ0dyZWF0ZXIgVGhhbicsCiAgICAgICAgICAgICAgICAgICAgICAgIGd0ZTogJ0dyZWF0ZXIgVGhhbiBFcXVhbCBUbycsCiAgICAgICAgICAgICAgICAgICAgICAgIGx0OiAnTGVzcyBUaGFuJywKICAgICAgICAgICAgICAgICAgICAgICAgbHRlOiAnTGVzcyBUaGFuIEVxdWFsIFRvJywKICAgICAgICAgICAgICAgICAgICAgICAgbm90OiAnTm90JywKICAgICAgICAgICAgICAgICAgICAgICAgbm90QmV0d2VlbjogJ05vdCBCZXR3ZWVuJywKICAgICAgICAgICAgICAgICAgICAgICAgbm90RW1wdHk6ICdOb3QgRW1wdHknLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAnQ29udGFpbnMnLAogICAgICAgICAgICAgICAgICAgICAgICBlbXB0eTogJ0VtcHR5JywKICAgICAgICAgICAgICAgICAgICAgICAgZW5kc1dpdGg6ICdFbmRzIFdpdGgnLAogICAgICAgICAgICAgICAgICAgICAgICBlcXVhbHM6ICdFcXVhbHMnLAogICAgICAgICAgICAgICAgICAgICAgICBub3Q6ICdOb3QnLAogICAgICAgICAgICAgICAgICAgICAgICBub3RDb250YWluczogJ0RvZXMgTm90IENvbnRhaW4nLAogICAgICAgICAgICAgICAgICAgICAgICBub3RFbXB0eTogJ05vdCBFbXB0eScsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdEVuZHNXaXRoOiAnRG9lcyBOb3QgRW5kIFdpdGgnLAogICAgICAgICAgICAgICAgICAgICAgICBub3RTdGFydHNXaXRoOiAnRG9lcyBOb3QgU3RhcnQgV2l0aCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0c1dpdGg6ICdTdGFydHMgV2l0aCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkYXRhOiAnRGF0YScsCiAgICAgICAgICAgICAgICBkZWxldGU6ICcmdGltZXMnLAogICAgICAgICAgICAgICAgZGVsZXRlVGl0bGU6ICdEZWxldGUgZmlsdGVyaW5nIHJ1bGUnLAogICAgICAgICAgICAgICAgbGVmdDogJzwnLAogICAgICAgICAgICAgICAgbGVmdFRpdGxlOiAnT3V0ZGVudCBjcml0ZXJpYScsCiAgICAgICAgICAgICAgICBsb2dpY0FuZDogJ0FuZCcsCiAgICAgICAgICAgICAgICBsb2dpY09yOiAnT3InLAogICAgICAgICAgICAgICAgcmlnaHQ6ICc+JywKICAgICAgICAgICAgICAgIHJpZ2h0VGl0bGU6ICdJbmRlbnQgY3JpdGVyaWEnLAogICAgICAgICAgICAgICAgc2VhcmNoOiAnU2VhcmNoJywKICAgICAgICAgICAgICAgIHRpdGxlOiB7IDA6ICdDdXN0b20gU2VhcmNoIEJ1aWxkZXInLCBfOiAnQ3VzdG9tIFNlYXJjaCBCdWlsZGVyICglZCknIH0sCiAgICAgICAgICAgICAgICB2YWx1ZTogJ1ZhbHVlJywKICAgICAgICAgICAgICAgIHZhbHVlSm9pbmVyOiAnYW5kJywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbG9naWM6ICdBTkQnLAogICAgICAgICAgICBvcnRob2dvbmFsOiB7IGRpc3BsYXk6ICdkaXNwbGF5Jywgc2VhcmNoOiAnZmlsdGVyJyB9LAogICAgICAgICAgICBwcmVEZWZpbmVkOiAhMSwKICAgICAgICB9KSwKICAgICAgICAoZSA9IG4pLAogICAgICAgIChoID0gKGwgPSBzKS5mbi5EYXRhVGFibGUpLAogICAgICAgIChhID0gcykuZm4uZGF0YVRhYmxlLAogICAgICAgIChjID0gKHcgPSBzKS5mbi5kYXRhVGFibGUpLAogICAgICAgIChpID0gcy5mbi5kYXRhVGFibGUpLAogICAgICAgIChCLlNlYXJjaEJ1aWxkZXIgPSBlKSwKICAgICAgICAoaS5TZWFyY2hCdWlsZGVyID0gZSksCiAgICAgICAgKEIuR3JvdXAgPSBwKSwKICAgICAgICAoaS5Hcm91cCA9IHApLAogICAgICAgIChCLkNyaXRlcmlhID0gZCksCiAgICAgICAgKGkuQ3JpdGVyaWEgPSBkKSwKICAgICAgICAoaSA9IEIuQXBpLnJlZ2lzdGVyKSwKICAgICAgICAoQi5leHQuc2VhcmNoQnVpbGRlciA9IHsgY29uZGl0aW9uczoge30gfSksCiAgICAgICAgKEIuZXh0LmJ1dHRvbnMuc2VhcmNoQnVpbGRlciA9IHsKICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAodCwgaSwgZSwgbikgewogICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyKG4uX3NlYXJjaEJ1aWxkZXIuZ2V0Tm9kZSgpLCB7IGFsaWduOiAnY29udGFpbmVyJywgc3BhbjogJ2NvbnRhaW5lcicgfSk7CiAgICAgICAgICAgICAgICBuID0gbi5fc2VhcmNoQnVpbGRlci5zLnRvcEdyb3VwOwogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBuICYmIG4uZG9tLmNvbnRhaW5lci50cmlnZ2VyKCdkdHNiLXJlZHJhd0NvbnRlbnRzLW5vRHJhdycpLAogICAgICAgICAgICAgICAgICAgIDAgPT09IG4ucy5jcml0ZXJpYS5sZW5ndGggJiYgcygnLicgKyBzLmZuLmRhdGFUYWJsZS5Hcm91cC5jbGFzc2VzLmFkZC5yZXBsYWNlKC8gL2csICcuJykpLmNsaWNrKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbmZpZzoge30sCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChpLCB0LCBlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMsCiAgICAgICAgICAgICAgICAgICAgcyA9IG5ldyBCLlNlYXJjaEJ1aWxkZXIoaSwgZS5jb25maWcpOwogICAgICAgICAgICAgICAgaS5vbignZHJhdycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHMucy50b3BHcm91cCA/IHMucy50b3BHcm91cC5jb3VudCgpIDogMDsKICAgICAgICAgICAgICAgICAgICBuLnRleHQoaS5pMThuKCdzZWFyY2hCdWlsZGVyLmJ1dHRvbicsIHMuYy5pMThuLmJ1dHRvbiwgdCkpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgbi50ZXh0KGUudGV4dCB8fCBpLmkxOG4oJ3NlYXJjaEJ1aWxkZXIuYnV0dG9uJywgcy5jLmkxOG4uYnV0dG9uLCAwKSksCiAgICAgICAgICAgICAgICAgICAgKGUuX3NlYXJjaEJ1aWxkZXIgPSBzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGV4dDogbnVsbCwKICAgICAgICB9KSwKICAgICAgICBpKCdzZWFyY2hCdWlsZGVyLmdldERldGFpbHMoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9ICExKTsKICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmNvbnRleHRbMF07CiAgICAgICAgICAgIHJldHVybiBpLl9zZWFyY2hCdWlsZGVyID8gaS5fc2VhcmNoQnVpbGRlci5nZXREZXRhaWxzKHQpIDogbnVsbDsKICAgICAgICB9KSwKICAgICAgICBpKCdzZWFyY2hCdWlsZGVyLnJlYnVpbGQoKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBpID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBpLl9zZWFyY2hCdWlsZGVyID8gbnVsbCA6IChpLl9zZWFyY2hCdWlsZGVyLnJlYnVpbGQodCksIHRoaXMpOwogICAgICAgIH0pLAogICAgICAgIGkoJ3NlYXJjaEJ1aWxkZXIuY29udGFpbmVyKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gdC5fc2VhcmNoQnVpbGRlciA/IHQuX3NlYXJjaEJ1aWxkZXIuZ2V0Tm9kZSgpIDogbnVsbDsKICAgICAgICB9KSwKICAgICAgICBzKHQpLm9uKCdwcmVJbml0LmR0LmR0c3AnLCBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAnZHQnICE9PSB0Lm5hbWVzcGFjZSB8fCAoIWkub0luaXQuc2VhcmNoQnVpbGRlciAmJiAhQi5kZWZhdWx0cy5zZWFyY2hCdWlsZGVyKSB8fCBpLl9zZWFyY2hCdWlsZGVyIHx8IGYoaSk7CiAgICAgICAgfSksCiAgICAgICAgQi5leHQuZmVhdHVyZS5wdXNoKHsgY0ZlYXR1cmU6ICdRJywgZm5Jbml0OiBmIH0pLAogICAgICAgIEIuZmVhdHVyZSAmJiBCLmZlYXR1cmUucmVnaXN0ZXIoJ3NlYXJjaEJ1aWxkZXInLCBmKSwKICAgICAgICBCCiAgICApOwp9KTsKCi8qISBEYXRhVGFibGVzIGludGVncmF0aW9uIGZvciBEYXRhVGFibGVzJyBTZWFyY2hCdWlsZGVyCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlCiAqLwohKGZ1bmN0aW9uIChuKSB7CiAgICB2YXIgZCwgYTsKICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICAgICAgPyBkZWZpbmUoWydqcXVlcnknLCAnZGF0YXRhYmxlcy5uZXQtZHQnLCAnZGF0YXRhYmxlcy5uZXQtc2VhcmNoYnVpbGRlciddLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiBuKGUsIHdpbmRvdywgZG9jdW1lbnQpOwogICAgICAgICAgfSkKICAgICAgICA6ICdvYmplY3QnID09IHR5cGVvZiBleHBvcnRzCiAgICAgICAgPyAoKGQgPSByZXF1aXJlKCdqcXVlcnknKSksCiAgICAgICAgICAoYSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgdC5mbi5kYXRhVGFibGUgfHwgcmVxdWlyZSgnZGF0YXRhYmxlcy5uZXQtZHQnKShlLCB0KSwKICAgICAgICAgICAgICAgICAgdC5mbi5kYXRhVGFibGUuU2VhcmNoQnVpbGRlciB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldC1zZWFyY2hidWlsZGVyJykoZSwgdCk7CiAgICAgICAgICB9KSwKICAgICAgICAgICd1bmRlZmluZWQnID09IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlID0gZSB8fCB3aW5kb3cpLCAodCA9IHQgfHwgZChlKSksIGEoZSwgdCksIG4odCwgMCwgZS5kb2N1bWVudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKGEod2luZG93LCBkKSwgKG1vZHVsZS5leHBvcnRzID0gbihkLCB3aW5kb3csIHdpbmRvdy5kb2N1bWVudCkpKSkKICAgICAgICA6IG4oalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsKfSkoZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHJldHVybiBlLmZuLmRhdGFUYWJsZTsKfSk7CgovKiEgU2VsZWN0IGZvciBEYXRhVGFibGVzIDIuMS4wCiAqIMKpIFNwcnlNZWRpYSBMdGQgLSBkYXRhdGFibGVzLm5ldC9saWNlbnNlL21pdAogKi8KIShmdW5jdGlvbiAobCkgewogICAgdmFyIHMsIGM7CiAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgICAgID8gZGVmaW5lKFsnanF1ZXJ5JywgJ2RhdGF0YWJsZXMubmV0J10sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwoZSwgd2luZG93LCBkb2N1bWVudCk7CiAgICAgICAgICB9KQogICAgICAgIDogJ29iamVjdCcgPT0gdHlwZW9mIGV4cG9ydHMKICAgICAgICA/ICgocyA9IHJlcXVpcmUoJ2pxdWVyeScpKSwKICAgICAgICAgIChjID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICB0LmZuLmRhdGFUYWJsZSB8fCByZXF1aXJlKCdkYXRhdGFibGVzLm5ldCcpKGUsIHQpOwogICAgICAgICAgfSksCiAgICAgICAgICAndW5kZWZpbmVkJyA9PSB0eXBlb2Ygd2luZG93CiAgICAgICAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGUgfHwgd2luZG93KSwgKHQgPSB0IHx8IHMoZSkpLCBjKGUsIHQpLCBsKHQsIGUsIGUuZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChjKHdpbmRvdywgcyksIChtb2R1bGUuZXhwb3J0cyA9IGwocywgd2luZG93LCB3aW5kb3cuZG9jdW1lbnQpKSkpCiAgICAgICAgOiBsKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Cn0pKGZ1bmN0aW9uIChtLCBpLCBlKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICB2YXIgcCA9IG0uZm4uZGF0YVRhYmxlOwogICAgZnVuY3Rpb24gcihuLCBlLCB0KSB7CiAgICAgICAgZnVuY3Rpb24gbCh0LCBsKSB7CiAgICAgICAgICAgIGwgPCB0ICYmICgoZSA9IGwpLCAobCA9IHQpLCAodCA9IGUpKTsKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgICBzID0gITE7CiAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgICAgICAgICAuY29sdW1ucygnOnZpc2libGUnKQogICAgICAgICAgICAgICAgLmluZGV4ZXMoKQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSB0ICYmIChzID0gITApLCBlID09PSBsID8gIShzID0gITEpIDogczsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBzKHQsIGwpIHsKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgICBzID0gbi5yb3dzKHsgc2VhcmNoOiAnYXBwbGllZCcgfSkuaW5kZXhlcygpLAogICAgICAgICAgICAgICAgYyA9IChzLmluZGV4T2YodCkgPiBzLmluZGV4T2YobCkgJiYgKChlID0gbCksIChsID0gdCksICh0ID0gZSkpLCAhMSk7CiAgICAgICAgICAgIHJldHVybiBzLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IHQgJiYgKGMgPSAhMCksIGUgPT09IGwgPyAhKGMgPSAhMSkgOiBjOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdmFyIGMsCiAgICAgICAgICAgIHQgPSBuLmNlbGxzKHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpIHx8IHQgPyAoKGMgPSBsKHQuY29sdW1uLCBlLmNvbHVtbikpLCBzKHQucm93LCBlLnJvdykpIDogKChjID0gbCgwLCBlLmNvbHVtbikpLCBzKDAsIGUucm93KSksCiAgICAgICAgICAgIHQgPSBuLmNlbGxzKHQsIGMpLmZsYXR0ZW4oKTsKICAgICAgICBuLmNlbGxzKGUsIHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpID8gbi5jZWxscyh0KS5kZXNlbGVjdCgpIDogbi5jZWxscyh0KS5zZWxlY3QoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHYoZSkgewogICAgICAgIHZhciB0ID0gcC5zZWxlY3QuY2xhc3Nlcy5jaGVja2JveDsKICAgICAgICByZXR1cm4gZSA/IHQucmVwbGFjZSgvIC9nLCAnLicpIDogdDsKICAgIH0KICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgIHZhciB0ID0gZS5zZXR0aW5ncygpWzBdLl9zZWxlY3Quc2VsZWN0b3I7CiAgICAgICAgbShlLnRhYmxlKCkuY29udGFpbmVyKCkpLm9mZignbW91c2Vkb3duLmR0U2VsZWN0JywgdCkub2ZmKCdtb3VzZXVwLmR0U2VsZWN0JywgdCkub2ZmKCdjbGljay5kdFNlbGVjdCcsIHQpLAogICAgICAgICAgICBtKCdib2R5Jykub2ZmKCdjbGljay5kdFNlbGVjdCcgKyBfKGUudGFibGUoKS5ub2RlKCkpKTsKICAgIH0KICAgIGZ1bmN0aW9uIG4obykgewogICAgICAgIHZhciBhLAogICAgICAgICAgICB0ID0gbShvLnRhYmxlKCkuY29udGFpbmVyKCkpLAogICAgICAgICAgICBsID0gby5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICBzID0gbC5fc2VsZWN0LnNlbGVjdG9yOwogICAgICAgIHQKICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24uZHRTZWxlY3QnLCBzLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgKGUuc2hpZnRLZXkgfHwgZS5tZXRhS2V5IHx8IGUuY3RybEtleSkgJiYKICAgICAgICAgICAgICAgICAgICB0LmNzcygnLW1vei11c2VyLXNlbGVjdCcsICdub25lJykub25lKCdzZWxlY3RzdGFydC5kdFNlbGVjdCcsIHMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGkuZ2V0U2VsZWN0aW9uICYmIChhID0gaS5nZXRTZWxlY3Rpb24oKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5vbignbW91c2V1cC5kdFNlbGVjdCcsIHMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHQuY3NzKCctbW96LXVzZXItc2VsZWN0JywgJycpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAub24oJ2NsaWNrLmR0U2VsZWN0JywgcywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgICAgICAgIGwgPSBvLnNlbGVjdC5pdGVtcygpOwogICAgICAgICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGkuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCghcy5hbmNob3JOb2RlIHx8IG0ocy5hbmNob3JOb2RlKS5jbG9zZXN0KCd0YWJsZScpWzBdID09PSBvLnRhYmxlKCkubm9kZSgpKSAmJiBzICE9PSBhKSByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgYywKICAgICAgICAgICAgICAgICAgICBzID0gby5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICAgICAgICAgIG4gPSBvLnRhYmxlKCkuY29udGFpbmVyKCk7CiAgICAgICAgICAgICAgICBtKGUudGFyZ2V0KS5jbG9zZXN0KCdkaXYuZHQtY29udGFpbmVyJylbMF0gPT0gbiAmJgogICAgICAgICAgICAgICAgICAgIChuID0gby5jZWxsKG0oZS50YXJnZXQpLmNsb3Nlc3QoJ3RkLCB0aCcpKSkuYW55KCkgJiYKICAgICAgICAgICAgICAgICAgICAoKGMgPSBtLkV2ZW50KCd1c2VyLXNlbGVjdC5kdCcpKSwKICAgICAgICAgICAgICAgICAgICB1KG8sIGMsIFtsLCBuLCBlXSksCiAgICAgICAgICAgICAgICAgICAgYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAoKGMgPSBuLmluZGV4KCkpLAogICAgICAgICAgICAgICAgICAgICAgICAncm93JyA9PT0gbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHQgPSBjLnJvdyksIGgoZSwgbywgcywgJ3JvdycsIHQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnY29sdW1uJyA9PT0gbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHQgPSBuLmluZGV4KCkuY29sdW1uKSwgaChlLCBvLCBzLCAnY29sdW1uJywgdCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdjZWxsJyA9PT0gbCAmJiAoKHQgPSBuLmluZGV4KCkpLCBoKGUsIG8sIHMsICdjZWxsJywgdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAocy5fc2VsZWN0X2xhc3RDZWxsID0gYykpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG0oJ2JvZHknKS5vbignY2xpY2suZHRTZWxlY3QnICsgXyhvLnRhYmxlKCkubm9kZSgpKSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgIWwuX3NlbGVjdC5ibHVyYWJsZSB8fAogICAgICAgICAgICAgICAgICAgIG0oZS50YXJnZXQpLnBhcmVudHMoKS5maWx0ZXIoby50YWJsZSgpLmNvbnRhaW5lcigpKS5sZW5ndGggfHwKICAgICAgICAgICAgICAgICAgICAwID09PSBtKGUudGFyZ2V0KS5wYXJlbnRzKCdodG1sJykubGVuZ3RoIHx8CiAgICAgICAgICAgICAgICAgICAgbShlLnRhcmdldCkucGFyZW50cygnZGl2LkRURScpLmxlbmd0aCB8fAogICAgICAgICAgICAgICAgICAgICgodCA9IG0uRXZlbnQoJ3NlbGVjdC1ibHVyLmR0JykpLCB1KG8sIHQsIFtlLnRhcmdldCwgZV0pLCB0LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB8fAogICAgICAgICAgICAgICAgICAgIGYobCwgITApOwogICAgICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIHUoZSwgdCwgbCwgcykgewogICAgICAgIChzICYmICFlLmZsYXR0ZW4oKS5sZW5ndGgpIHx8ICgnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiAodCArPSAnLmR0JyksIGwudW5zaGlmdChlKSwgbShlLnRhYmxlKCkubm9kZSgpKS50cmlnZ2VyKHQsIGwpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGIoZSkgewogICAgICAgIHJldHVybiBlLm1SZW5kZXIgJiYgJ3NlbGVjdENoZWNrYm94JyA9PT0gZS5tUmVuZGVyLl9uYW1lOwogICAgfQogICAgZnVuY3Rpb24gcyhzLCBlKSB7CiAgICAgICAgdmFyIHQsIGwsIGMsIG4sIG87CiAgICAgICAgJ2FwaScgIT09IHMuc2VsZWN0LnN0eWxlKCkgJiYKICAgICAgICAgICAgITEgIT09IHMuc2VsZWN0LmluZm8oKSAmJgogICAgICAgICAgICAoKG8gPSBzLnNldHRpbmdzKClbMF0uX3NlbGVjdF9zZXQubGVuZ3RoIHx8IHMucm93cyh7IHNlbGVjdGVkOiAhMCB9KS5jb3VudCgpKSwKICAgICAgICAgICAgKHQgPSBzLmNvbHVtbnMoeyBzZWxlY3RlZDogITAgfSkuY291bnQoKSksCiAgICAgICAgICAgIChsID0gcy5jZWxscyh7IHNlbGVjdGVkOiAhMCB9KS5jb3VudCgpKSwKICAgICAgICAgICAgKGMgPSBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgZS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgbSgnPHNwYW4gY2xhc3M9InNlbGVjdC1pdGVtIi8+JykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICBzLmkxOG4oJ3NlbGVjdC4nICsgdCArICdzJywgeyBfOiAnJWQgJyArIHQgKyAncyBzZWxlY3RlZCcsIDA6ICcnLCAxOiAnMSAnICsgdCArICcgc2VsZWN0ZWQnIH0sIGwpLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGUgPSBtKGUpKSwKICAgICAgICAgICAgYygobiA9IG0oJzxzcGFuIGNsYXNzPSJzZWxlY3QtaW5mbyIvPicpKSwgJ3JvdycsIG8pLAogICAgICAgICAgICBjKG4sICdjb2x1bW4nLCB0KSwKICAgICAgICAgICAgYyhuLCAnY2VsbCcsIGwpLAogICAgICAgICAgICAobyA9IGUuY2hpbGRyZW4oJ3NwYW4uc2VsZWN0LWluZm8nKSkubGVuZ3RoICYmIG8ucmVtb3ZlKCksCiAgICAgICAgICAgICcnICE9PSBuLnRleHQoKSkgJiYKICAgICAgICAgICAgZS5hcHBlbmQobik7CiAgICB9CiAgICBmdW5jdGlvbiBvKG8pIHsKICAgICAgICB2YXIgciwKICAgICAgICAgICAgYSA9IG5ldyBwLkFwaShvKTsKICAgICAgICAoby5fc2VsZWN0X2luaXQgPSAhMCksCiAgICAgICAgICAgIChvLl9zZWxlY3Rfc2V0ID0gW10pLAogICAgICAgICAgICBvLmFvUm93Q3JlYXRlZENhbGxiYWNrLnB1c2goZnVuY3Rpb24gKGUsIHQsIGwpIHsKICAgICAgICAgICAgICAgIHZhciBzLAogICAgICAgICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgICAgICAgbiA9IG8uYW9EYXRhW2xdLAogICAgICAgICAgICAgICAgICAgIGwgPSBhLnJvdyhsKS5pZCgpOwogICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAobi5fc2VsZWN0X3NlbGVjdGVkIHx8ICgndW5kZWZpbmVkJyAhPT0gbCAmJiBvLl9zZWxlY3Rfc2V0LmluY2x1ZGVzKGwpKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKChuLl9zZWxlY3Rfc2VsZWN0ZWQgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgIG0oZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhvLl9zZWxlY3QuY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0LicgKyB2KCEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdjaGVja2VkJywgITApKSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBvLmFvQ29sdW1ucy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcyA8IGM7CiAgICAgICAgICAgICAgICAgICAgcysrCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKG8uYW9Db2x1bW5zW3NdLl9zZWxlY3Rfc2VsZWN0ZWQgfHwgKG4uX3NlbGVjdGVkX2NlbGxzICYmIG4uX3NlbGVjdGVkX2NlbGxzW3NdKSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgbShuLmFuQ2VsbHNbc10pLmFkZENsYXNzKG8uX3NlbGVjdC5jbGFzc05hbWUpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKHIgPSBhKS5vbignc2VsZWN0JywgZnVuY3Rpb24gKGUsIHQsIGwsIHMpIHsKICAgICAgICAgICAgICAgIGlmICgncm93JyA9PT0gbCkKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gci5zZXR0aW5ncygpWzBdLCBjID0gciwgbiA9IGwuX3NlbGVjdF9zZXQsIG8gPSBzLCBhID0gMDsgYSA8IG8ubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBjLnJvdyhvW2FdKS5pZCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpICYmICd1bmRlZmluZWQnICE9PSBpICYmICFuLmluY2x1ZGVzKGkpICYmIG4ucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICByLm9uKCdkZXNlbGVjdCcsIGZ1bmN0aW9uIChlLCB0LCBsLCBzKSB7CiAgICAgICAgICAgICAgICBpZiAoJ3JvdycgPT09IGwpCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IHIuc2V0dGluZ3MoKVswXSwgYyA9IHIsIG4gPSBsLl9zZWxlY3Rfc2V0LCBvID0gcywgYSA9IDA7IGEgPCBvLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYy5yb3cob1thXSkuaWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBuLmluZGV4T2YoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSBpICYmIG4uc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGEub24oJ2luZm8uZHQnLCBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgdC5fc2VsZWN0LmluZm9FbHMuaW5jbHVkZXMobCkgfHwgdC5fc2VsZWN0LmluZm9FbHMucHVzaChsKSwgcyhhLCBsKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGEub24oJ3NlbGVjdC5kdFNlbGVjdC5kdCBkZXNlbGVjdC5kdFNlbGVjdC5kdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG8uX3NlbGVjdC5pbmZvRWxzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBzKGEsIGUpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgYS5zdGF0ZS5zYXZlKCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBhLm9uKCdkZXN0cm95LmR0U2VsZWN0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbShhLnJvd3MoeyBzZWxlY3RlZDogITAgfSkubm9kZXMoKSkucmVtb3ZlQ2xhc3MoYS5zZXR0aW5ncygpWzBdLl9zZWxlY3QuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICBtKCdpbnB1dC4nICsgdighMCksIGEudGFibGUoKS5oZWFkZXIoKSkucmVtb3ZlKCksCiAgICAgICAgICAgICAgICAgICAgYyhhKSwKICAgICAgICAgICAgICAgICAgICBhLm9mZignLmR0U2VsZWN0JyksCiAgICAgICAgICAgICAgICAgICAgbSgnYm9keScpLm9mZignLmR0U2VsZWN0JyArIF8oYS50YWJsZSgpLm5vZGUoKSkpOwogICAgICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGQoZSwgdCwgbCwgcykgewogICAgICAgIHZhciBjLAogICAgICAgICAgICBuID0gZVt0ICsgJ3MnXSh7IHNlYXJjaDogJ2FwcGxpZWQnIH0pLmluZGV4ZXMoKSwKICAgICAgICAgICAgcyA9IG4uaW5kZXhPZihzKSwKICAgICAgICAgICAgbyA9IG4uaW5kZXhPZihsKTsKICAgICAgICBlW3QgKyAncyddKHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpIHx8IC0xICE9PSBzCiAgICAgICAgICAgID8gKG8gPCBzICYmICgoYyA9IG8pLCAobyA9IHMpLCAocyA9IGMpKSwgbi5zcGxpY2UobyArIDEsIG4ubGVuZ3RoKSwgbi5zcGxpY2UoMCwgcykpCiAgICAgICAgICAgIDogbi5zcGxpY2Uobi5pbmRleE9mKGwpICsgMSwgbi5sZW5ndGgpLAogICAgICAgICAgICBlW3RdKGwsIHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpID8gKG4uc3BsaWNlKG4uaW5kZXhPZihsKSwgMSksIGVbdCArICdzJ10obikuZGVzZWxlY3QoKSkgOiBlW3QgKyAncyddKG4pLnNlbGVjdCgpOwogICAgfQogICAgZnVuY3Rpb24gZihlLCB0KSB7CiAgICAgICAgKCF0ICYmICdzaW5nbGUnICE9PSBlLl9zZWxlY3Quc3R5bGUpIHx8CiAgICAgICAgICAgICgodCA9IG5ldyBwLkFwaShlKSkucm93cyh7IHNlbGVjdGVkOiAhMCB9KS5kZXNlbGVjdCgpLAogICAgICAgICAgICB0LmNvbHVtbnMoeyBzZWxlY3RlZDogITAgfSkuZGVzZWxlY3QoKSwKICAgICAgICAgICAgdC5jZWxscyh7IHNlbGVjdGVkOiAhMCB9KS5kZXNlbGVjdCgpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGgoZSwgdCwgbCwgcywgYykgewogICAgICAgIHZhciBuID0gdC5zZWxlY3Quc3R5bGUoKSwKICAgICAgICAgICAgbyA9IHQuc2VsZWN0LnRvZ2dsZWFibGUoKSwKICAgICAgICAgICAgYSA9IHRbc10oYywgeyBzZWxlY3RlZDogITAgfSkuYW55KCk7CiAgICAgICAgKGEgJiYgIW8pIHx8CiAgICAgICAgICAgICgnb3MnID09PSBuCiAgICAgICAgICAgICAgICA/IGUuY3RybEtleSB8fCBlLm1ldGFLZXkKICAgICAgICAgICAgICAgICAgICA/IHRbc10oYykuc2VsZWN0KCFhKQogICAgICAgICAgICAgICAgICAgIDogZS5zaGlmdEtleQogICAgICAgICAgICAgICAgICAgID8gJ2NlbGwnID09PSBzCiAgICAgICAgICAgICAgICAgICAgICAgID8gcih0LCBjLCBsLl9zZWxlY3RfbGFzdENlbGwgfHwgbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgOiBkKHQsIHMsIGMsIGwuX3NlbGVjdF9sYXN0Q2VsbCA/IGwuX3NlbGVjdF9sYXN0Q2VsbFtzXSA6IG51bGwpCiAgICAgICAgICAgICAgICAgICAgOiAoKG8gPSB0W3MgKyAncyddKHsgc2VsZWN0ZWQ6ICEwIH0pKSwKICAgICAgICAgICAgICAgICAgICAgIGEgJiYgMSA9PT0gby5mbGF0dGVuKCkubGVuZ3RoID8gdFtzXShjKS5kZXNlbGVjdCgpIDogKG8uZGVzZWxlY3QoKSwgdFtzXShjKS5zZWxlY3QoKSkpCiAgICAgICAgICAgICAgICA6ICdtdWx0aStzaGlmdCcgPT0gbiAmJiBlLnNoaWZ0S2V5CiAgICAgICAgICAgICAgICA/ICdjZWxsJyA9PT0gcwogICAgICAgICAgICAgICAgICAgID8gcih0LCBjLCBsLl9zZWxlY3RfbGFzdENlbGwgfHwgbnVsbCkKICAgICAgICAgICAgICAgICAgICA6IGQodCwgcywgYywgbC5fc2VsZWN0X2xhc3RDZWxsID8gbC5fc2VsZWN0X2xhc3RDZWxsW3NdIDogbnVsbCkKICAgICAgICAgICAgICAgIDogdFtzXShjKS5zZWxlY3QoIWEpKTsKICAgIH0KICAgIGZ1bmN0aW9uIF8oZSkgewogICAgICAgIHJldHVybiBlLmlkLnJlcGxhY2UoL1teYS16QS1aMC05XC1cX10vZywgJy0nKTsKICAgIH0KICAgIChwLnNlbGVjdCA9IHt9KSwKICAgICAgICAocC5zZWxlY3QuY2xhc3NlcyA9IHsgY2hlY2tib3g6ICdkdC1zZWxlY3QtY2hlY2tib3gnIH0pLAogICAgICAgIChwLnNlbGVjdC52ZXJzaW9uID0gJzIuMS4wJyksCiAgICAgICAgKHAuc2VsZWN0LmluaXQgPSBmdW5jdGlvbiAobykgewogICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgIHQsCiAgICAgICAgICAgICAgICBsLAogICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgdSwKICAgICAgICAgICAgICAgIGQsCiAgICAgICAgICAgICAgICBmLAogICAgICAgICAgICAgICAgaCwKICAgICAgICAgICAgICAgIF8gPSBvLnNldHRpbmdzKClbMF07CiAgICAgICAgICAgIGlmICghcC52ZXJzaW9uQ2hlY2soJzInKSkgdGhyb3cgJ1dhcm5pbmc6IFNlbGVjdCByZXF1aXJlcyBEYXRhVGFibGVzIDIgb3IgbmV3ZXInOwogICAgICAgICAgICAhXy5fc2VsZWN0ICYmCiAgICAgICAgICAgICAgICAoKGUgPSBvLnN0YXRlLmxvYWRlZCgpKSwKICAgICAgICAgICAgICAgICh0ID0gZnVuY3Rpb24gKGUsIHQsIGwpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbCAmJiB2b2lkIDAgIT09IGwuc2VsZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLnJvd3MoeyBzZWxlY3RlZDogITAgfSkuYW55KCkgJiYgby5yb3dzKCkuZGVzZWxlY3QoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbC5zZWxlY3Qucm93cyAmJiBvLnJvd3MobC5zZWxlY3Qucm93cykuc2VsZWN0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNvbHVtbnMoeyBzZWxlY3RlZDogITAgfSkuYW55KCkgJiYgby5jb2x1bW5zKCkuZGVzZWxlY3QoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gbC5zZWxlY3QuY29sdW1ucyAmJiBvLmNvbHVtbnMobC5zZWxlY3QuY29sdW1ucykuc2VsZWN0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNlbGxzKHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpICYmIG8uY2VsbHMoKS5kZXNlbGVjdCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBsLnNlbGVjdC5jZWxscykKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBsLnNlbGVjdC5jZWxscy5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNlbGwobC5zZWxlY3QuY2VsbHNbc10ucm93LCBsLnNlbGVjdC5jZWxsc1tzXS5jb2x1bW4pLnNlbGVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBvLnN0YXRlLnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG8KICAgICAgICAgICAgICAgICAgICAub24oJ3N0YXRlU2F2ZVBhcmFtcycsIGZ1bmN0aW9uIChlLCB0LCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIChsLnNlbGVjdCA9IHt9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLnNlbGVjdC5yb3dzID0gby5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pLmlkcyghMCkudG9BcnJheSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLnNlbGVjdC5jb2x1bW5zID0gby5jb2x1bW5zKHsgc2VsZWN0ZWQ6ICEwIH0pWzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLnNlbGVjdC5jZWxscyA9IG8uY2VsbHMoeyBzZWxlY3RlZDogITAgfSlbMF0ubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcm93OiBvLnJvdyhlLnJvdykuaWQoITApLCBjb2x1bW46IGUuY29sdW1uIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAub24oJ3N0YXRlTG9hZFBhcmFtcycsIHQpCiAgICAgICAgICAgICAgICAgICAgLm9uZSgnaW5pdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCgwLCAwLCBlKTsKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChzID0gXy5vSW5pdC5zZWxlY3QpLAogICAgICAgICAgICAgICAgKGwgPSBwLmRlZmF1bHRzLnNlbGVjdCksCiAgICAgICAgICAgICAgICAobCA9IHZvaWQgMCA9PT0gcyA/IGwgOiBzKSwKICAgICAgICAgICAgICAgIChzID0gJ3JvdycpLAogICAgICAgICAgICAgICAgKGEgPSAhKG4gPSAhKGMgPSAnYXBpJykpKSwKICAgICAgICAgICAgICAgICh1ID0gJ3RkLCB0aCcpLAogICAgICAgICAgICAgICAgKGQgPSAnc2VsZWN0ZWQnKSwKICAgICAgICAgICAgICAgIChoID0gIShmID0gciA9ICEoaSA9IG51bGwpKSksCiAgICAgICAgICAgICAgICAoXy5fc2VsZWN0ID0geyBpbmZvRWxzOiBbXSB9KSwKICAgICAgICAgICAgICAgICEwID09PSBsCiAgICAgICAgICAgICAgICAgICAgPyAoKGMgPSAnb3MnKSwgKGggPSAhMCkpCiAgICAgICAgICAgICAgICAgICAgOiAnc3RyaW5nJyA9PSB0eXBlb2YgbAogICAgICAgICAgICAgICAgICAgID8gKChjID0gbCksIChoID0gITApKQogICAgICAgICAgICAgICAgICAgIDogbS5pc1BsYWluT2JqZWN0KGwpICYmCiAgICAgICAgICAgICAgICAgICAgICAodm9pZCAwICE9PSBsLmJsdXJhYmxlICYmIChuID0gbC5ibHVyYWJsZSksCiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGwudG9nZ2xlYWJsZSAmJiAoYSA9IGwudG9nZ2xlYWJsZSksCiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGwuaW5mbyAmJiAociA9IGwuaW5mbyksCiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGwuaXRlbXMgJiYgKHMgPSBsLml0ZW1zKSwKICAgICAgICAgICAgICAgICAgICAgIChoID0gKChjID0gdm9pZCAwICE9PSBsLnN0eWxlID8gbC5zdHlsZSA6ICdvcycpLCAhMCkpLAogICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBsLnNlbGVjdG9yICYmICh1ID0gbC5zZWxlY3RvciksCiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGwuY2xhc3NOYW1lICYmIChkID0gbC5jbGFzc05hbWUpLAogICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBsLmhlYWRlckNoZWNrYm94ICYmIChmID0gbC5oZWFkZXJDaGVja2JveCksCiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGwuc2VsZWN0YWJsZSkgJiYKICAgICAgICAgICAgICAgICAgICAgIChpID0gbC5zZWxlY3RhYmxlKSwKICAgICAgICAgICAgICAgIG8uc2VsZWN0LnNlbGVjdG9yKHUpLAogICAgICAgICAgICAgICAgby5zZWxlY3QuaXRlbXMocyksCiAgICAgICAgICAgICAgICBvLnNlbGVjdC5zdHlsZShjKSwKICAgICAgICAgICAgICAgIG8uc2VsZWN0LmJsdXJhYmxlKG4pLAogICAgICAgICAgICAgICAgby5zZWxlY3QudG9nZ2xlYWJsZShhKSwKICAgICAgICAgICAgICAgIG8uc2VsZWN0LmluZm8ociksCiAgICAgICAgICAgICAgICBvLnNlbGVjdC5zZWxlY3RhYmxlKGkpLAogICAgICAgICAgICAgICAgKF8uX3NlbGVjdC5jbGFzc05hbWUgPSBkKSwKICAgICAgICAgICAgICAgICFoICYmIG0oby50YWJsZSgpLm5vZGUoKSkuaGFzQ2xhc3MoJ3NlbGVjdGFibGUnKSAmJiBvLnNlbGVjdC5zdHlsZSgnb3MnKSwKICAgICAgICAgICAgICAgIGYgfHwgJ3NlbGVjdC1wYWdlJyA9PT0gZiB8fCAnc2VsZWN0LWFsbCcgPT09IGYpICYmCiAgICAgICAgICAgICAgICBvLnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYywgbiwgbDsKICAgICAgICAgICAgICAgICAgICAobiA9IGYpLAogICAgICAgICAgICAgICAgICAgICAgICAobCA9IChjID0gbykuc2V0dGluZ3MoKVswXS5hb0NvbHVtbnMpLAogICAgICAgICAgICAgICAgICAgICAgICBjLmNvbHVtbnMoKS5pdGVyYXRvcignY29sdW1uJywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYihsW3RdKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodCA9IGMuY29sdW1uKHQpLmhlYWRlcigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKCdpbnB1dCcsIHQpLmxlbmd0aCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHMgPSBtKCc8aW5wdXQ+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogdighMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IGMuaTE4bignc2VsZWN0LmFyaWEuaGVhZGVyQ2hlY2tib3gnKSB8fCAnU2VsZWN0IGFsbCByb3dzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8odCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgnc2VsZWN0LXBhZ2UnID09IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjLnJvd3MoeyBwYWdlOiAnY3VycmVudCcgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjLnJvd3MoeyBzZWFyY2g6ICdhcHBsaWVkJyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuc2VsZWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoJ3NlbGVjdC1wYWdlJyA9PSBuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYy5yb3dzKHsgcGFnZTogJ2N1cnJlbnQnLCBzZWxlY3RlZDogITAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjLnJvd3MoeyBzZWxlY3RlZDogITAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLmRlc2VsZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5vbignZHJhdyBzZWxlY3QgZGVzZWxlY3QnLCBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdyb3cnICE9PSBsICYmIGwpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChsID0gKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gZS5zZXR0aW5ncygpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGwuX3NlbGVjdC5zZWxlY3RhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzZWxlY3QtcGFnZScgPT0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUucm93cyh7IHBhZ2U6ICdjdXJyZW50Jywgc2VsZWN0ZWQ6ICEwIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZS5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLmNvdW50KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzZWxlY3QtcGFnZScgPT0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUucm93cyh7IHBhZ2U6ICdjdXJyZW50Jywgc2VsZWN0ZWQ6ICEwIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZS5yb3dzKHsgc2VhcmNoOiAnYXBwbGllZCcsIHNlbGVjdGVkOiAhMCB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5jb3VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VsZWN0LXBhZ2UnID09IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUucm93cyh7IHBhZ2U6ICdjdXJyZW50JyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZS5yb3dzKHsgc2VhcmNoOiAnYXBwbGllZCcgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5pbmRleGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPCBhLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbC5hb0RhdGFbYVtpXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyhyLl9hRGF0YSwgci5uVHIsIGFbaV0pICYmIGMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VsZWN0LXBhZ2UnID09IHQgPyBlLnJvd3MoeyBwYWdlOiAnY3VycmVudCcgfSkgOiBlLnJvd3MoeyBzZWFyY2g6ICdhcHBsaWVkJyB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5jb3VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhdmFpbGFibGU6IGMsIGNvdW50OiBuLCBzZWFyY2g6IG8gfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShjLCBuKSkuc2VhcmNoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5zZWFyY2ggPD0gbC5jb3VudCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuc2VhcmNoID09PSBsLmF2YWlsYWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHMucHJvcCgnY2hlY2tlZCcsICEwKS5wcm9wKCdpbmRldGVybWluYXRlJywgITEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCA9PT0gbC5zZWFyY2ggJiYgMCA9PT0gbC5jb3VudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHMucHJvcCgnY2hlY2tlZCcsICExKS5wcm9wKCdpbmRldGVybWluYXRlJywgITEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcy5wcm9wKCdjaGVja2VkJywgITEpLnByb3AoJ2luZGV0ZXJtaW5hdGUnLCAhMCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIG0uZWFjaCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgeyB0eXBlOiAncm93JywgcHJvcDogJ2FvRGF0YScgfSwKICAgICAgICAgICAgICAgIHsgdHlwZTogJ2NvbHVtbicsIHByb3A6ICdhb0NvbHVtbnMnIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7CiAgICAgICAgICAgICAgICBwLmV4dC5zZWxlY3RvcltpLnR5cGVdLnB1c2goZnVuY3Rpb24gKGUsIHQsIGwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcywKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHQuc2VsZWN0ZWQsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAoITAgIT09IGMgJiYgITEgIT09IGMpIHJldHVybiBsOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCBhID0gbC5sZW5ndGg7IG8gPCBhOyBvKyspCiAgICAgICAgICAgICAgICAgICAgICAgIChzID0gZVtpLnByb3BdW2xbb11dKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCghMCA9PT0gYyAmJiAhMCA9PT0gcy5fc2VsZWN0X3NlbGVjdGVkKSB8fCAoITEgPT09IGMgJiYgIXMuX3NlbGVjdF9zZWxlY3RlZCkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2gobFtvXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICApLAogICAgICAgIHAuZXh0LnNlbGVjdG9yLmNlbGwucHVzaChmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICB2YXIgcywKICAgICAgICAgICAgICAgIGMgPSB0LnNlbGVjdGVkLAogICAgICAgICAgICAgICAgbiA9IFtdOwogICAgICAgICAgICBpZiAodm9pZCAwID09PSBjKSByZXR1cm4gbDsKICAgICAgICAgICAgZm9yICh2YXIgbyA9IDAsIGEgPSBsLmxlbmd0aDsgbyA8IGE7IG8rKykKICAgICAgICAgICAgICAgIChzID0gZS5hb0RhdGFbbFtvXS5yb3ddKSAmJgogICAgICAgICAgICAgICAgICAgICgoITAgPT09IGMgJiYgcy5fc2VsZWN0ZWRfY2VsbHMgJiYgITAgPT09IHMuX3NlbGVjdGVkX2NlbGxzW2xbb10uY29sdW1uXSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKCExID09PSBjICYmICghcy5fc2VsZWN0ZWRfY2VsbHMgfHwgIXMuX3NlbGVjdGVkX2NlbGxzW2xbb10uY29sdW1uXSkpKSAmJgogICAgICAgICAgICAgICAgICAgIG4ucHVzaChsW29dKTsKICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfSk7CiAgICB2YXIgdCA9IHAuQXBpLnJlZ2lzdGVyLAogICAgICAgIGwgPSBwLkFwaS5yZWdpc3RlclBsdXJhbDsKICAgIGZ1bmN0aW9uIGEodCwgbCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZS5pMThuKCdidXR0b25zLicgKyB0LCBsKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgZSA9IGUuX2V2ZW50TmFtZXNwYWNlOwogICAgICAgIHJldHVybiAnZHJhdy5kdC5EVCcgKyBlICsgJyBzZWxlY3QuZHQuRFQnICsgZSArICcgZGVzZWxlY3QuZHQuRFQnICsgZTsKICAgIH0KICAgIHQoJ3NlbGVjdCgpJywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHAuc2VsZWN0LmluaXQobmV3IHAuQXBpKGUpKTsKICAgICAgICB9KTsKICAgIH0pLAogICAgICAgIHQoJ3NlbGVjdC5ibHVyYWJsZSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgPyB0aGlzLmNvbnRleHRbMF0uX3NlbGVjdC5ibHVyYWJsZQogICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBlLl9zZWxlY3QuYmx1cmFibGUgPSB0OwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICB0KCdzZWxlY3QudG9nZ2xlYWJsZSgpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgPyB0aGlzLmNvbnRleHRbMF0uX3NlbGVjdC50b2dnbGVhYmxlCiAgICAgICAgICAgICAgICA6IHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGUuX3NlbGVjdC50b2dnbGVhYmxlID0gdDsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgdCgnc2VsZWN0LmluZm8oKScsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgID8gdGhpcy5jb250ZXh0WzBdLl9zZWxlY3QuaW5mbwogICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBlLl9zZWxlY3QuaW5mbyA9IHQ7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIHQoJ3NlbGVjdC5pdGVtcygpJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgPyB0aGlzLmNvbnRleHRbMF0uX3NlbGVjdC5pdGVtcwogICAgICAgICAgICAgICAgOiB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAoZS5fc2VsZWN0Lml0ZW1zID0gdCksIHUobmV3IHAuQXBpKGUpLCAnc2VsZWN0SXRlbXMnLCBbdF0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICB0KCdzZWxlY3Quc3R5bGUoKScsIGZ1bmN0aW9uIChsKSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IGwKICAgICAgICAgICAgICAgID8gdGhpcy5jb250ZXh0WzBdLl9zZWxlY3Quc3R5bGUKICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgZS5fc2VsZWN0IHx8IHAuc2VsZWN0LmluaXQobmV3IHAuQXBpKGUpKSwgZS5fc2VsZWN0X2luaXQgfHwgbyhlKSwgKGUuX3NlbGVjdC5zdHlsZSA9IGwpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgcC5BcGkoZSk7CiAgICAgICAgICAgICAgICAgICAgICAnYXBpJyAhPT0gbAogICAgICAgICAgICAgICAgICAgICAgICAgID8gdC5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyh0KSwgbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHUobmV3IHAuQXBpKGUpLCAnc2VsZWN0U3R5bGUnLCBbbF0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICB0KCdzZWxlY3Quc2VsZWN0b3IoKScsIGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHMKICAgICAgICAgICAgICAgID8gdGhpcy5jb250ZXh0WzBdLl9zZWxlY3Quc2VsZWN0b3IKICAgICAgICAgICAgICAgIDogdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgcC5BcGkoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGUuX3NlbGVjdC5zdHlsZTsKICAgICAgICAgICAgICAgICAgICAgIGModCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuX3NlbGVjdC5zZWxlY3RvciA9IHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgJ2FwaScgIT09IGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0LnJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyh0KSwgbih0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGModCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pLAogICAgICAgIHQoJ3NlbGVjdC5zZWxlY3RhYmxlKCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMuY29udGV4dFswXTsKICAgICAgICAgICAgcmV0dXJuIGUgPyAoKHQuX3NlbGVjdC5zZWxlY3RhYmxlID0gZSksIHRoaXMpIDogdC5fc2VsZWN0LnNlbGVjdGFibGU7CiAgICAgICAgfSksCiAgICAgICAgdCgnc2VsZWN0Lmxhc3QoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gZSA/ICgodC5fc2VsZWN0X2xhc3RDZWxsID0gZSksIHRoaXMpIDogdC5fc2VsZWN0X2xhc3RDZWxsOwogICAgICAgIH0pLAogICAgICAgIHQoJ3NlbGVjdC5jdW11bGF0aXZlKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gZSAmJiBlLl9zZWxlY3Rfc2V0ID8gZS5fc2VsZWN0X3NldCA6IFtdOwogICAgICAgIH0pLAogICAgICAgIGwoJ3Jvd3MoKS5zZWxlY3QoKScsICdyb3coKS5zZWxlY3QoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpcywKICAgICAgICAgICAgICAgIGEgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICExID09PSBlCiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZWxlY3QoKQogICAgICAgICAgICAgICAgOiAodGhpcy5pdGVyYXRvcigncm93JywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGYoZSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGUuYW9EYXRhW3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLmFvQ29sdW1uczsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlLl9zZWxlY3Quc2VsZWN0YWJsZSAmJiAhMSA9PT0gZS5fc2VsZWN0LnNlbGVjdGFibGUobC5fYURhdGEsIGwublRyLCB0KSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgbShsLm5UcikuYWRkQ2xhc3MoZS5fc2VsZWN0LmNsYXNzTmFtZSksIChsLl9zZWxlY3Rfc2VsZWN0ZWQgPSAhMCksIGEucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgcy5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gc1tjXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSBuLnNUeXBlICYmIG8uY29sdW1ucygpLnR5cGVzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIobikgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobiA9IGwuYW5DZWxscykgJiYgbltjXSAmJiBtKCdpbnB1dC4nICsgdighMCksIG5bY10pLnByb3AoJ2NoZWNrZWQnLCAhMCksIG51bGwgIT09IGwuX2FTb3J0RGF0YSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLl9hU29ydERhdGFbY10gPSBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHUobywgJ3NlbGVjdCcsIFsncm93JywgYV0sICEwKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHRoaXMpOwogICAgICAgIH0pLAogICAgICAgIHQoJ3JvdygpLnNlbGVjdGVkKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gISEoZSAmJiB0aGlzLmxlbmd0aCAmJiBlLmFvRGF0YVt0aGlzWzBdXSAmJiBlLmFvRGF0YVt0aGlzWzBdXS5fc2VsZWN0X3NlbGVjdGVkKTsKICAgICAgICB9KSwKICAgICAgICBsKCdjb2x1bW5zKCkuc2VsZWN0KCknLCAnY29sdW1uKCkuc2VsZWN0KCknLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbCA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiAhMSA9PT0gZQogICAgICAgICAgICAgICAgPyB0aGlzLmRlc2VsZWN0KCkKICAgICAgICAgICAgICAgIDogKHRoaXMuaXRlcmF0b3IoJ2NvbHVtbicsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICBmKGUpLCAoZS5hb0NvbHVtbnNbdF0uX3NlbGVjdF9zZWxlY3RlZCA9ICEwKTsKICAgICAgICAgICAgICAgICAgICAgIHQgPSBuZXcgcC5BcGkoZSkuY29sdW1uKHQpOwogICAgICAgICAgICAgICAgICAgICAgbSh0LmhlYWRlcigpKS5hZGRDbGFzcyhlLl9zZWxlY3QuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBtKHQuZm9vdGVyKCkpLmFkZENsYXNzKGUuX3NlbGVjdC5jbGFzc05hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHQubm9kZXMoKS50byQoKS5hZGRDbGFzcyhlLl9zZWxlY3QuY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHUobCwgJ3NlbGVjdCcsIFsnY29sdW1uJywgbFt0XV0sICEwKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHRoaXMpOwogICAgICAgIH0pLAogICAgICAgIHQoJ2NvbHVtbigpLnNlbGVjdGVkKCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jb250ZXh0WzBdOwogICAgICAgICAgICByZXR1cm4gISEoZSAmJiB0aGlzLmxlbmd0aCAmJiBlLmFvQ29sdW1uc1t0aGlzWzBdXSAmJiBlLmFvQ29sdW1uc1t0aGlzWzBdXS5fc2VsZWN0X3NlbGVjdGVkKTsKICAgICAgICB9KSwKICAgICAgICBsKCdjZWxscygpLnNlbGVjdCgpJywgJ2NlbGwoKS5zZWxlY3QoKScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBsID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICExID09PSBlCiAgICAgICAgICAgICAgICA/IHRoaXMuZGVzZWxlY3QoKQogICAgICAgICAgICAgICAgOiAodGhpcy5pdGVyYXRvcignY2VsbCcsIGZ1bmN0aW9uIChlLCB0LCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICBmKGUpOwogICAgICAgICAgICAgICAgICAgICAgdCA9IGUuYW9EYXRhW3RdOwogICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0Ll9zZWxlY3RlZF9jZWxscyAmJiAodC5fc2VsZWN0ZWRfY2VsbHMgPSBbXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuX3NlbGVjdGVkX2NlbGxzW2xdID0gITApLAogICAgICAgICAgICAgICAgICAgICAgICAgIHQuYW5DZWxscyAmJiBtKHQuYW5DZWxsc1tsXSkuYWRkQ2xhc3MoZS5fc2VsZWN0LmNsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICB1KGwsICdzZWxlY3QnLCBbJ2NlbGwnLCBsLmNlbGxzKGxbdF0pLmluZGV4ZXMoKS50b0FycmF5KCldLCAhMCk7CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB0aGlzKTsKICAgICAgICB9KSwKICAgICAgICB0KCdjZWxsKCkuc2VsZWN0ZWQoKScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmNvbnRleHRbMF07CiAgICAgICAgICAgIGlmIChlICYmIHRoaXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBlID0gZS5hb0RhdGFbdGhpc1swXVswXS5yb3ddOwogICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5fc2VsZWN0ZWRfY2VsbHMgJiYgZS5fc2VsZWN0ZWRfY2VsbHNbdGhpc1swXVswXS5jb2x1bW5dKSByZXR1cm4gITA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0pLAogICAgICAgIGwoJ3Jvd3MoKS5kZXNlbGVjdCgpJywgJ3JvdygpLmRlc2VsZWN0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3JvdycsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBlLmFvRGF0YVt0XSwKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUuYW9Db2x1bW5zOwogICAgICAgICAgICAgICAgICAgIG0obC5uVHIpLnJlbW92ZUNsYXNzKGUuX3NlbGVjdC5jbGFzc05hbWUpLCAobC5fc2VsZWN0X3NlbGVjdGVkID0gITEpLCAoZS5fc2VsZWN0X2xhc3RDZWxsID0gbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBzLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gc1tjXTsKICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gbi5zVHlwZSAmJiBvLmNvbHVtbnMoKS50eXBlcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYihuKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobiA9IGwuYW5DZWxscykgJiYgbltjXSAmJiBtKCdpbnB1dC4nICsgdighMCksIGwuYW5DZWxsc1tjXSkucHJvcCgnY2hlY2tlZCcsICExKSwgbnVsbCAhPT0gbC5fYVNvcnREYXRhKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLl9hU29ydERhdGFbY10gPSBudWxsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ3RhYmxlJywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICB1KG8sICdkZXNlbGVjdCcsIFsncm93Jywgb1t0XV0sICEwKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIGwoJ2NvbHVtbnMoKS5kZXNlbGVjdCgpJywgJ2NvbHVtbigpLmRlc2VsZWN0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBsID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ2NvbHVtbicsIGZ1bmN0aW9uIChzLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcy5hb0NvbHVtbnNbZV0uX3NlbGVjdF9zZWxlY3RlZCA9ICExOwogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IHAuQXBpKHMpLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gdC5jb2x1bW4oZSk7CiAgICAgICAgICAgICAgICAgICAgbShsLmhlYWRlcigpKS5yZW1vdmVDbGFzcyhzLl9zZWxlY3QuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgbShsLmZvb3RlcigpKS5yZW1vdmVDbGFzcyhzLl9zZWxlY3QuY2xhc3NOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNlbGxzKG51bGwsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5kZXhlcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gcy5hb0RhdGFbZS5yb3ddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdC5fc2VsZWN0ZWRfY2VsbHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXQuYW5DZWxscyB8fCAobCAmJiBsW2UuY29sdW1uXSkgfHwgbSh0LmFuQ2VsbHNbZS5jb2x1bW5dKS5yZW1vdmVDbGFzcyhzLl9zZWxlY3QuY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLml0ZXJhdG9yKCd0YWJsZScsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgdShsLCAnZGVzZWxlY3QnLCBbJ2NvbHVtbicsIGxbdF1dLCAhMCk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICBsKCdjZWxscygpLmRlc2VsZWN0KCknLCAnY2VsbCgpLmRlc2VsZWN0KCknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBsID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IoJ2NlbGwnLCBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgICAgIHQgPSBlLmFvRGF0YVt0XTsKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQuX3NlbGVjdGVkX2NlbGxzICYmICh0Ll9zZWxlY3RlZF9jZWxsc1tsXSA9ICExKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5hbkNlbGxzICYmICFlLmFvQ29sdW1uc1tsXS5fc2VsZWN0X3NlbGVjdGVkICYmIG0odC5hbkNlbGxzW2xdKS5yZW1vdmVDbGFzcyhlLl9zZWxlY3QuY2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcy5pdGVyYXRvcigndGFibGUnLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHUobCwgJ2Rlc2VsZWN0JywgWydjZWxsJywgbFt0XV0sICEwKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgIH0pOwogICAgdmFyIGcgPSAwOwogICAgcmV0dXJuICgKICAgICAgICBtLmV4dGVuZChwLmV4dC5idXR0b25zLCB7CiAgICAgICAgICAgIHNlbGVjdGVkOiB7CiAgICAgICAgICAgICAgICB0ZXh0OiBhKCdzZWxlY3RlZCcsICdTZWxlY3RlZCcpLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1zZWxlY3RlZCcsCiAgICAgICAgICAgICAgICBsaW1pdFRvOiBbJ3Jvd3MnLCAnY29sdW1ucycsICdjZWxscyddLAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKGwsIGUsIHMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgKHMuX2V2ZW50TmFtZXNwYWNlID0gJy5zZWxlY3QnICsgZysrKSwKICAgICAgICAgICAgICAgICAgICAgICAgbC5vbih3KHMpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuZW5hYmxlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoZSA9IGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoLTEgPT09ICh0ID0gcykubGltaXRUby5pbmRleE9mKCdyb3dzJykgfHwgIWUucm93cyh7IHNlbGVjdGVkOiAhMCB9KS5hbnkoKSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISgtMSA9PT0gdC5saW1pdFRvLmluZGV4T2YoJ2NvbHVtbnMnKSB8fCAhZS5jb2x1bW5zKHsgc2VsZWN0ZWQ6ICEwIH0pLmFueSgpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKC0xID09PSB0LmxpbWl0VG8uaW5kZXhPZignY2VsbHMnKSB8fCAhZS5jZWxscyh7IHNlbGVjdGVkOiAhMCB9KS5hbnkoKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChlLCB0LCBsKSB7CiAgICAgICAgICAgICAgICAgICAgZS5vZmYobC5fZXZlbnROYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VsZWN0ZWRTaW5nbGU6IHsKICAgICAgICAgICAgICAgIHRleHQ6IGEoJ3NlbGVjdGVkU2luZ2xlJywgJ1NlbGVjdGVkIHNpbmdsZScpLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1zZWxlY3RlZC1zaW5nbGUnLAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKHQsIGUsIGwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgKGwuX2V2ZW50TmFtZXNwYWNlID0gJy5zZWxlY3QnICsgZysrKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5vbih3KGwpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pLmZsYXR0ZW4oKS5sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY29sdW1ucyh7IHNlbGVjdGVkOiAhMCB9KS5mbGF0dGVuKCkubGVuZ3RoICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNlbGxzKHsgc2VsZWN0ZWQ6ICEwIH0pLmZsYXR0ZW4oKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmVuYWJsZSgxID09PSBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChlLCB0LCBsKSB7CiAgICAgICAgICAgICAgICAgICAgZS5vZmYobC5fZXZlbnROYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VsZWN0QWxsOiB7CiAgICAgICAgICAgICAgICB0ZXh0OiBhKCdzZWxlY3RBbGwnLCAnU2VsZWN0IGFsbCcpLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1zZWxlY3QtYWxsJywKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKGUsIHQsIGwsIHMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXMuc2VsZWN0Lml0ZW1zKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBzLnNlbGVjdG9yTW9kaWZpZXI7CiAgICAgICAgICAgICAgICAgICAgKG4gPyAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgbiAmJiAobiA9IG4uY2FsbCh0LCBlLCB0LCBsLCBzKSksIHRoaXNbYyArICdzJ10obikpIDogdGhpc1tjICsgJ3MnXSgpKS5zZWxlY3QoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdE5vbmU6IHsKICAgICAgICAgICAgICAgIHRleHQ6IGEoJ3NlbGVjdE5vbmUnLCAnRGVzZWxlY3QgYWxsJyksCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidXR0b25zLXNlbGVjdC1ub25lJywKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGYodGhpcy5zZXR0aW5ncygpWzBdLCAhMCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKHQsIGUsIGwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgKGwuX2V2ZW50TmFtZXNwYWNlID0gJy5zZWxlY3QnICsgZysrKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5vbih3KGwpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5yb3dzKHsgc2VsZWN0ZWQ6ICEwIH0pLmZsYXR0ZW4oKS5sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY29sdW1ucyh7IHNlbGVjdGVkOiAhMCB9KS5mbGF0dGVuKCkubGVuZ3RoICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNlbGxzKHsgc2VsZWN0ZWQ6ICEwIH0pLmZsYXR0ZW4oKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmVuYWJsZSgwIDwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGUoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgICAgIGUub2ZmKGwuX2V2ZW50TmFtZXNwYWNlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNob3dTZWxlY3RlZDogewogICAgICAgICAgICAgICAgdGV4dDogYSgnc2hvd1NlbGVjdGVkJywgJ1Nob3cgb25seSBzZWxlY3RlZCcpLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1zaG93LXNlbGVjdGVkJywKICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgczsKICAgICAgICAgICAgICAgICAgICB0LnNlYXJjaC5maXhlZCgnZHQtc2VsZWN0JykKICAgICAgICAgICAgICAgICAgICAgICAgPyAodC5zZWFyY2guZml4ZWQoJ2R0LXNlbGVjdCcsIG51bGwpLCB0aGlzLmFjdGl2ZSghMSkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKChzID0gdC5zZXR0aW5ncygpWzBdLmFvRGF0YSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zZWFyY2guZml4ZWQoJ2R0LXNlbGVjdCcsIGZ1bmN0aW9uIChlLCB0LCBsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzW2xdLl9zZWxlY3Rfc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUoITApKSwKICAgICAgICAgICAgICAgICAgICAgICAgdC5kcmF3KCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIG0uZWFjaChbJ1JvdycsICdDb2x1bW4nLCAnQ2VsbCddLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICB2YXIgYyA9IHQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgcC5leHQuYnV0dG9uc1snc2VsZWN0JyArIHQgKyAncyddID0gewogICAgICAgICAgICAgICAgdGV4dDogYSgnc2VsZWN0JyArIHQgKyAncycsICdTZWxlY3QgJyArIGMgKyAncycpLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9ucy1zZWxlY3QtJyArIGMgKyAncycsCiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdC5pdGVtcyhjKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZShlLnNlbGVjdC5pdGVtcygpID09PSBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5vbignc2VsZWN0SXRlbXMuZHQuRFQnLCBmdW5jdGlvbiAoZSwgdCwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5hY3RpdmUobCA9PT0gYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICB9KSwKICAgICAgICBwLnR5cGUoJ3NlbGVjdC1jaGVja2JveCcsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHQtc2VsZWN0JywKICAgICAgICAgICAgZGV0ZWN0OiBwLnZlcnNpb25DaGVjaygnMi4xJykKICAgICAgICAgICAgICAgID8gewogICAgICAgICAgICAgICAgICAgICAgb25lT2Y6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgYWxsT2Y6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKGUsIHQsIGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYih0KTsKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnc2VsZWN0LWNoZWNrYm94JyA9PT0gZSAmJiBlOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBvcmRlcjogewogICAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnWCcgPT09IGUgPyAtMSA6IDA7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIG0uZXh0ZW5kKCEwLCBwLmRlZmF1bHRzLm9MYW5ndWFnZSwgeyBzZWxlY3Q6IHsgYXJpYTogeyByb3dDaGVja2JveDogJ1NlbGVjdCByb3cnIH0gfSB9KSwKICAgICAgICAocC5yZW5kZXIuc2VsZWN0ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgZnVuY3Rpb24gbChlLCB0LCBsLCBzKSB7CiAgICAgICAgICAgICAgICB2YXIgYyA9IHMuc2V0dGluZ3MuYW9EYXRhW3Mucm93XSwKICAgICAgICAgICAgICAgICAgICBuID0gYy5fc2VsZWN0X3NlbGVjdGVkLAogICAgICAgICAgICAgICAgICAgIG8gPSBzLnNldHRpbmdzLm9MYW5ndWFnZS5zZWxlY3QuYXJpYS5yb3dDaGVja2JveCwKICAgICAgICAgICAgICAgICAgICBhID0gcy5zZXR0aW5ncy5fc2VsZWN0LnNlbGVjdGFibGU7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2Rpc3BsYXknICE9PSB0CiAgICAgICAgICAgICAgICAgICAgPyAndHlwZScgPT09IHQKICAgICAgICAgICAgICAgICAgICAgICAgPyAnc2VsZWN0LWNoZWNrYm94JwogICAgICAgICAgICAgICAgICAgICAgICA6ICdmaWx0ZXInICE9PSB0ICYmIG4KICAgICAgICAgICAgICAgICAgICAgICAgPyAnWCcKICAgICAgICAgICAgICAgICAgICAgICAgOiAnJwogICAgICAgICAgICAgICAgICAgIDogYSAmJiAhMSA9PT0gYShsLCBjLm5Uciwgcy5yb3cpCiAgICAgICAgICAgICAgICAgICAgPyAnJwogICAgICAgICAgICAgICAgICAgIDogbSgnPGlucHV0PicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB2KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHIgPyByKGwpIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGkgPyBpKGwpIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignaW5wdXQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksICh0aGlzLmNoZWNrZWQgPSBtKHRoaXMpLmNsb3Nlc3QoJ3RyJykuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pWzBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpID0gZSA/IHAudXRpbC5nZXQoZSkgOiBudWxsLAogICAgICAgICAgICAgICAgciA9IHQgPyBwLnV0aWwuZ2V0KHQpIDogbnVsbDsKICAgICAgICAgICAgcmV0dXJuIChsLl9uYW1lID0gJ3NlbGVjdENoZWNrYm94JyksIGw7CiAgICAgICAgfSksCiAgICAgICAgKHAuZXh0Lm9yZGVyWydzZWxlY3QtY2hlY2tib3gnXSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaSgpCiAgICAgICAgICAgICAgICAuY29sdW1uKGUsIHsgb3JkZXI6ICdpbmRleCcgfSkKICAgICAgICAgICAgICAgIC5ub2RlcygpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3cnID09PSB0Ll9zZWxlY3QuaXRlbXMKICAgICAgICAgICAgICAgICAgICAgICAgPyBtKGUpLnBhcmVudCgpLmhhc0NsYXNzKHQuX3NlbGVjdC5jbGFzc05hbWUpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgOiAnY2VsbCcgPT09IHQuX3NlbGVjdC5pdGVtcyAmJiBtKGUpLmhhc0NsYXNzKHQuX3NlbGVjdC5jbGFzc05hbWUpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAobS5mbi5EYXRhVGFibGUuc2VsZWN0ID0gcC5zZWxlY3QpLAogICAgICAgIG0oZSkub24oJ2kxOG4uZHQuZHRTZWxlY3QgcHJlSW5pdC5kdC5kdFNlbGVjdCcsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICdkdCcgPT09IGUubmFtZXNwYWNlICYmIHAuc2VsZWN0LmluaXQobmV3IHAuQXBpKHQpKTsKICAgICAgICB9KSwKICAgICAgICBwCiAgICApOwp9KTsK"
            }
        ],
        "tables": [
            {
                "name": "Subcontractors",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Timesheet Entries",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Expenses",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Timesheets",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Team Members",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Crews",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Dummy",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Equipment",
                "form": false,
                "static": false,
                "incidentIndependent": false
            },
            {
                "name": "Expense Reports",
                "form": false,
                "static": false,
                "incidentIndependent": false
            }
        ]
    },
    "Name": "Subcontractors Demo (Foster)"
}